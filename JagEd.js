(()=>{"use strict";var t={3927:(t,e,i)=>{t.t=i.e+"0c791968973e1f25c170.wasm"},5621:(t,e,i)=>{t.t=i.e+"9f86b5397894e28b5ae2.wasm"}},e={};function i(s){var n=e[s];if(void 0!==n)return n.t;var r=e[s]={t:{}};return t[s](r,r.t,i),r.t}i.i=t,i.s=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.e="/Client2/",i.n=document.baseURI||self.location.href,(()=>{async function t(t,e={}){const i={r:Object.assign(Object.create(globalThis),e.r||{},{h(t,e,i,s){t=h(t>>>0),e=h(e>>>0),i>>>=0,s>>>=0,(()=>{throw Error(`${t} in ${e}:${i}:${s}`)})()}})},{t:s}=await WebAssembly.instantiate(t,i),n=s.l||e.r.l,r=Object.setPrototypeOf({o(){return(t=s.o()>>>0)?{a:a(Int8Array,g(t+0)),c:a(Int8Array,g(t+4)),f:I(t+8),u:I(t+12),d:I(t+16),w:I(t+20),y:I(t+24),m:I(t+28),p:I(t+32),A:I(t+36),I:A(t+40),g:I(t+44),_:0!=A(t+48),C:I(t+52),b:I(t+56),T:I(t+60),E:I(t+64),v:I(t+68),L:I(t+72),S:I(t+76),O:I(t+80),k:I(t+84),R:f(I,2,g(t+88)),x:f(I,2,g(t+92)),M:f(I,2,g(t+96)),F:f((t=>0!=A(t)),0,g(t+100)),D:f((t=>0!=A(t)),0,g(t+104)),N:f(A,0,g(t+108)),U:f(A,0,g(t+112)),P:f(I,2,g(t+116)),B:f(A,0,g(t+120)),W:f(A,0,g(t+124)),G:l((t=>f(A,0,g(t))),2,g(t+128)),H:l((t=>f(I,2,g(t))),2,g(t+132)),Y:l((t=>f(I,2,g(t))),2,g(t+136)),V:l((t=>f(I,2,g(t))),2,g(t+140)),X:f(I,2,g(t+144))}:null;var t},j(t,e,i,n,r){e=function(t){if(t){const e=d.z(t);e?d.Z(t,e+1):d.Z(s.q(t),1)}return t}(c(Int8Array,6,0,e)||w()),r=function(t){if(null==t)return 0;const e=s.q(s.K(148,5));return p(e+0,c(Int8Array,6,0,t.a)||w()),p(e+4,c(Int8Array,6,0,t.c)||w()),p(e+8,t.f),p(e+12,t.u),p(e+16,t.d),p(e+20,t.w),p(e+24,t.y),p(e+28,t.m),p(e+32,t.p),p(e+36,t.A),m(e+40,t.I),p(e+44,t.g),m(e+48,t._?1:0),p(e+52,t.C),p(e+56,t.b),p(e+60,t.T),p(e+64,t.E),p(e+68,t.v),p(e+72,t.L),p(e+76,t.S),p(e+80,t.O),p(e+84,t.k),p(e+88,u(p,4,2,t.R,Int32Array)||w()),p(e+92,u(p,4,2,t.x,Int32Array)||w()),p(e+96,u(p,4,2,t.M,Int32Array)||w()),p(e+100,u(m,7,0,t.F,Uint8Array)||w()),p(e+104,u(m,7,0,t.D,Uint8Array)||w()),p(e+108,u(m,8,0,t.N,Uint8Array)||w()),p(e+112,u(m,8,0,t.U,Uint8Array)||w()),p(e+116,u(p,4,2,t.P,Int32Array)||w()),p(e+120,u(m,8,0,t.B,Uint8Array)||w()),p(e+124,u(m,8,0,t.W,Uint8Array)||w()),p(e+128,o(((t,e)=>{p(t,u(m,8,0,e,Uint8Array)||w())}),9,2,t.G)||w()),p(e+132,o(((t,e)=>{p(t,u(p,4,2,e,Int32Array)||w())}),10,2,t.H)||w()),p(e+136,o(((t,e)=>{p(t,u(p,4,2,e,Int32Array)||w())}),10,2,t.Y)||w()),p(e+140,o(((t,e)=>{p(t,u(p,4,2,e,Int32Array)||w())}),10,2,t.V)||w()),p(e+144,u(p,4,2,t.X,Int32Array)||w()),s.J(e),e}(r)||w();try{return a(Int8Array,s.j(t,e,i,n,r)>>>0)}finally{!function(t){if(t){const e=d.z(t);if(1===e)s.J(t),d.$(t);else{if(!e)throw Error(`invalid refcount '${e}' for reference '${t}'`);d.Z(t,e-1)}}}(e)}}},s);function h(t){if(!t)return null;const e=t+new Uint32Array(n.Q)[t-4>>>2]>>>1,i=new Uint16Array(n.Q);let s=t>>>1,r="";for(;e-s>1024;)r+=String.fromCharCode(...i.tt(s,s+=1024));return r+String.fromCharCode(...i.tt(s,e))}function l(t,e,i){if(!i)return null;const s=g(i+4),n=y.et(i+12,!0),r=new Array(n);for(let i=0;i<n;++i)r[i]=t(s+(i<<e>>>0));return r}function o(t,e,i,n){if(null==n)return 0;const r=n.it,h=s.q(s.K(r<<i,1))>>>0,l=s.q(s.K(16,e))>>>0;p(l+0,h),y.st(l+4,h,!0),y.st(l+8,r<<i,!0),y.st(l+12,r,!0);for(let e=0;e<r;++e)t(h+(e<<i>>>0),n[e]);return s.J(h),s.J(l),l}function a(t,e){return e?new t(n.Q,g(e+4),y.et(e+8,!0)/t.rt).nt():null}function c(t,e,i,r){if(null==r)return 0;const h=r.it,l=s.q(s.K(h<<i,1))>>>0,o=s.K(12,e)>>>0;return p(o+0,l),y.st(o+4,l,!0),y.st(o+8,h<<i,!0),new t(n.Q,l,h).Z(r),s.J(l),o}function f(t,e,i){if(!i)return null;const s=g(i-4)>>>e,n=new Array(s);for(let r=0;r<s;++r)n[r]=t(i+(r<<e>>>0));return n}function u(t,e,i,r,h){if(null==r)return 0;const l=r.it,o=s.q(s.K(l<<i,e))>>>0;if(h)new h(n.Q,o,l).Z(r);else for(let e=0;e<l;e++)t(o+(e<<i>>>0),r[e]);return s.J(o),o}const d=new Map;function w(){throw TypeError("value must not be null")}let y=new DataView(n.Q);function m(t,e){try{y.ht(t,e,!0)}catch{y=new DataView(n.Q),y.ht(t,e,!0)}}function p(t,e){try{y.st(t,e,!0)}catch{y=new DataView(n.Q),y.st(t,e,!0)}}function A(t){try{return y.lt(t,!0)}catch{return y=new DataView(n.Q),y.lt(t,!0)}}function I(t){try{return y.ot(t,!0)}catch{return y=new DataView(n.Q),y.ot(t,!0)}}function g(t){try{return y.et(t,!0)}catch{return y=new DataView(n.Q),y.et(t,!0)}}return r}class e{static at=null;static ct=null;static ft=async e=>{const i=new WebAssembly.Module(e),s=await t(i,{r:void 0});this.at=s,this.ct=s.o()};static j=(t,e,i,s)=>{if(!this.at||!this.ct)throw new Error('bz2 not found!!');return this.at.j(t,e,i,s,this.ct)}}let s;function n(t,e){return s=t.t,r.ut=e,s}async function r(t){void 0===t&&(t=new URL(i(3927),i.n));const e={dt:{}};('string'==typeof t||'function'==typeof Request&&t instanceof Request||'function'==typeof URL&&t instanceof URL)&&(t=fetch(t));const{wt:s,yt:r}=await async function(t,e){if('function'==typeof Response&&t instanceof Response){if('function'==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if('application/wasm'==t.mt.z('Content-Type'))throw e;console.warn('`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n',e)}const i=await t.pt();return await WebAssembly.instantiate(i,e)}{const i=await WebAssembly.instantiate(t,e);return i instanceof WebAssembly.Instance?{wt:i,yt:t}:i}}(await t,e);return n(s,r)}let h=null,l=!1;class o extends Error{At(t){super(t),this.It='DecompressionError'}}let a=0,c=null,f=null;function u(t,e,i){let s;if(i){const n=e;s=t.gt(n);const r=new Uint8Array(t.l.Q,s,n);try{i(r)}catch(e){throw t._t(s,n),e}return a=n,s}if('string'==typeof e){const i=a=function(t){let e=0,i=0,s=0;const n=t.it;for(;e<n;)i=t.Ct(e),i<=127?(s+=1,e++):i<=2047?(s+=2,e++):i<=65535?(s+=3,e++):(s+=4,e+=2);return s}(e);s=t.gt(i);const n=new Uint8Array(t.l.Q,s,i);return c||(c=new TextEncoder),c.bt(e,n),s}const n=e;return s=t.gt(a=n.it),f&&f.it||(f=new Uint8Array(t.l.Q)),f.Z(n,s),s}function d(t){if(!t)throw new Error('WASM not initialized')}class w{Tt;Et;vt;At(){this.Tt=0n,this.Et=this,this.vt=this}Lt=()=>{this.vt&&this.Et&&(this.vt.Et=this.Et,this.Et.vt=this.vt,this.Et=null,this.vt=null)}}class y extends w{St;Ot;At(){super(),this.St=this,this.Ot=this}kt=()=>{this.Ot&&this.St&&(this.Ot.St=this.St,this.St.Ot=this.Ot,this.St=null,this.Ot=null)}}class m extends y{static Rt=new Int32Array;static xt=0;static Mt=0;static Ft=0;static Dt=0;static Nt=0;static Ut=0;static Pt=0;static Bt=0;static Wt=0;static Gt=(t,e,i)=>{this.Rt=t,this.xt=e,this.Mt=i,this.Ht(0,0,e,i)};static Yt=()=>{this.Nt=0,this.Ft=0,this.Ut=this.xt,this.Dt=this.Mt,this.Pt=this.Ut-1,this.Bt=this.Ut/2|0};static Ht=(t,e,i,s)=>{t<0&&(t=0),e<0&&(e=0),i>this.xt&&(i=this.xt),s>this.Mt&&(s=this.Mt),this.Ft=e,this.Dt=s,this.Nt=t,this.Ut=i,this.Pt=this.Ut-1,this.Bt=this.Ut/2|0,this.Wt=this.Dt/2|0};static Vt=()=>{const t=this.xt*this.Mt;for(let e=0;e<t;e++)this.Rt[e]=0};static Xt=(t,e,i,s,n)=>{this.jt(t,e,n,i),this.jt(t,e+s-1,n,i),this.zt(t,e,n,s),this.zt(t+i-1,e,n,s)};static jt=(t,e,i,s)=>{if(e<this.Ft||e>=this.Dt)return;t<this.Nt&&(s-=this.Nt-t,t=this.Nt),t+s>this.Ut&&(s=this.Ut-t);const n=t+e*this.xt;for(let t=0;t<s;t++)this.Rt[n+t]=i};static zt=(t,e,i,s)=>{if(t<this.Nt||t>=this.Ut)return;e<this.Ft&&(s-=this.Ft-e,e=this.Ft),e+s>this.Dt&&(s=this.Dt-e);const n=t+e*this.xt;for(let t=0;t<s;t++)this.Rt[n+t*this.xt]=i};static Zt=(t,e,i,s,n)=>{const r=Math.abs(i-t),h=Math.abs(s-e),l=t<i?1:-1,o=e<s?1:-1;let a=r-h;for(;t>=this.Nt&&t<this.Ut&&e>=this.Ft&&e<this.Dt&&(this.Rt[t+e*this.xt]=n),t!==i||e!==s;){const i=2*a;i>-h&&(a-=h,t+=l),i<r&&(a+=r,e+=o)}};static qt=(t,e,i,s,n)=>{t<this.Nt&&(i-=this.Nt-t,t=this.Nt),e<this.Ft&&(s-=this.Ft-e,e=this.Ft),t+i>this.Ut&&(i=this.Ut-t),e+s>this.Dt&&(s=this.Dt-e);const r=this.xt-i;let h=t+e*this.xt;for(let t=-s;t<0;t++){for(let t=-i;t<0;t++)this.Rt[h++]=n;h+=r}};static Kt=(t,e,i)=>{t<this.Nt||t>=this.Ut||e<this.Ft||e>=this.Dt||(this.Rt[t+e*this.xt]=i)}}const p=document.getElementById('canvas'),A=p.Jt('2d',{$t:!0}),I=document.createElement('canvas'),g=document.createElement('img'),_=I.Jt('2d',{$t:!0});class C{Qt;te;ee;ie;Rt;At(t,e,i=A){this.ie=i,this.Qt=this.ie.se(0,0,t,e),this.Rt=new Int32Array(t*e),this.te=t,this.ee=e,this.Gt()}Vt=()=>{this.Rt.ne(0)};Gt=()=>{m.Gt(this.Rt,this.te,this.ee)};re=(t,e)=>{this.#t(),this.ie.he(this.Qt,t,e)};#t=()=>{const t=this.Qt.le;for(let e=0;e<this.Rt.it;e++){const i=this.Rt[e],s=4*e;t[s]=i>>16&255,t[s+1]=i>>8&255,t[s+2]=i>>0&255,t[s+3]=255}}}const b=async t=>new Promise((e=>setTimeout(e,t))),T=async t=>new Int8Array(await(await fetch(t)).pt());class E{oe;ae=null;At(){const t=new w;t.Et=t,t.vt=t,this.oe=t}ce=t=>{t.vt&&t.Lt(),t.vt=this.oe.vt,t.Et=this.oe,t.vt&&(t.vt.Et=t),t.Et.vt=t};fe=t=>{t.vt&&t.Lt(),t.vt=this.oe,t.Et=this.oe.Et,t.vt.Et=t,t.Et&&(t.Et.vt=t)};ue=()=>{const t=this.oe.Et;return t===this.oe?null:(t?.Lt(),t)};de=()=>{const t=this.oe.Et;return t===this.oe?(this.ae=null,null):(this.ae=t?.Et||null,t)};we=()=>{const t=this.oe.vt;return t===this.oe?(this.ae=null,null):(this.ae=t?.vt||null,t)};Et=()=>{const t=this.ae;return t===this.oe?(this.ae=null,null):(this.ae=t?.Et||null,t)};vt=()=>{const t=this.ae;return t===this.oe?(this.ae=null,null):(this.ae=t?.vt||null,t)};Vt=()=>{for(;;){const t=this.oe.Et;if(t===this.oe)return;t?.Lt()}}}class v extends y{static ye=3988292384;static me=new Int32Array(256);static pe=new Uint32Array(33);static Ae=new E;static Ie=new E;static ge=new E;static _e=0;static Ce=0;static be=0;static{for(let t=0;t<32;t++)v.pe[t]=(1<<t)-1;v.pe[32]=4294967295;for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1==(1&e)?e=e>>>1^v.ye:e>>>=1;v.me[t]=e}}static Te=t=>{let e=4294967295;for(let i=0;i<t.it;i++)e=e>>>8^v.me[255&(e^t[i])];return~e};le;Ee;ve=0;Le=null;At(t){if(!t)throw new Error('Input src packet array was null!');super(),t instanceof Int8Array?this.le=new Uint8Array(t):this.le=t,this.Ee=0}get it(){return this.le.it}get Se(){return this.le.it-this.Ee}static Oe=t=>{let e=null;return 0===t&&v._e>0?(v._e--,e=v.Ae.ue()):1===t&&v.Ce>0?(v.Ce--,e=v.Ie.ue()):2===t&&v.be>0&&(v.be--,e=v.ge.ue()),e?(e.Ee=0,e):new v(0===t?new Uint8Array(100):1===t?new Uint8Array(5e3):new Uint8Array(3e4))};ke=()=>{this.Ee=0,100===this.le.it&&v._e<1e3?(v.Ae.ce(this),v._e++):5e3===this.le.it&&v.Ce<250?(v.Ie.ce(this),v.Ce++):3e4===this.le.it&&v.be<50&&(v.ge.ce(this),v.be++)};get Re(){return this.le[this.Ee++]}get xe(){return this.le[this.Ee++]<<24>>24}get Me(){return this.le[this.Ee++]<<8|this.le[this.Ee++]}get Fe(){let t=this.le[this.Ee++]<<8|this.le[this.Ee++];return t>32767&&(t-=65536),t}get De(){return this.le[this.Ee++]<<16|this.le[this.Ee++]<<8|this.le[this.Ee++]}get Ne(){return this.le[this.Ee++]<<24|this.le[this.Ee++]<<16|this.le[this.Ee++]<<8|this.le[this.Ee++]}get Ue(){return(0xffffffffn&BigInt(this.Ne))<<32n|0xffffffffn&BigInt(this.Ne)}get Pe(){return this.le[this.Ee]<128?this.Re-64:this.Me-49152}get Be(){return this.le[this.Ee]<128?this.Re:this.Me-32768}get We(){let t='';for(;10!==this.le[this.Ee]&&this.Ee<this.le.it;)t+=String.fromCharCode(this.le[this.Ee++]);return this.Ee++,t}Ge=(t,e,i)=>{for(let s=e;s<e+t;s++)i[s]=this.le[this.Ee++]};He=t=>{this.le[this.Ee++]=t+(this.Le?.Ye??0)&255};Ve=t=>{this.le[this.Ee++]=t};Xe=t=>{this.le[this.Ee++]=t>>>8,this.le[this.Ee++]=t};je=t=>{this.le[this.Ee++]=t,this.le[this.Ee++]=t>>>8};ze=t=>{this.le[this.Ee++]=t>>>16,this.le[this.Ee++]=t>>>8,this.le[this.Ee++]=t};Ze=t=>{this.le[this.Ee++]=t>>>24,this.le[this.Ee++]=t>>>16,this.le[this.Ee++]=t>>>8,this.le[this.Ee++]=t};qe=t=>{this.le[this.Ee++]=t,this.le[this.Ee++]=t>>>8,this.le[this.Ee++]=t>>>16,this.le[this.Ee++]=t>>>24};Ke=t=>{this.Ze(Number(t>>32n)),this.Ze(Number(0xffffffffn&t))};Je=t=>{for(let e=0;e<t.it;e++)this.le[this.Ee++]=t.$e(e);this.le[this.Ee++]=10};Qe=(t,e,i)=>{for(let s=i;s<i+e;s++)this.le[this.Ee++]=t[s]};ti=t=>{this.le[this.Ee-t-1]=t};ei=()=>{this.ve=8*this.Ee};ii=()=>{this.Ee=(this.ve+7)/8|0};si=t=>{let e=this.ve>>>3,i=8-(7&this.ve),s=0;for(this.ve+=t;t>i;i=8)s+=(this.le[e++]&v.pe[i])<<t-i,t-=i;return s+=t===i?this.le[e]&v.pe[i]:this.le[e]>>>i-t&v.pe[t],s};ni=(t,e)=>{const i=new Uint8Array(this.Ee);((t,e,i,s,n)=>{for(;n--;)i[s++]=t[e++]})(this.le,0,i,0,this.Ee);const s=(t=>{const e=[];for(;t>0n;)e.ri(Number(255n&t)),t>>=8n;return new Uint8Array(e)})(((t,e,i)=>{let s=1n;for(;e>0n;)e%2n===1n&&(s=s*t%i),t=t*t%i,e>>=1n;return s})((t=>{let e=0n;for(let i=0;i<t.it;i++)e=(e<<8n)+BigInt(t[i]);return e})(i),e,t));this.Ee=0,this.Ve(s.it),this.Qe(s,s.it,0)}}class L extends y{Rt;te;ee;hi;li;oi;ai;ci;At(t,e,i){super(),this.Rt=new Int8Array(t*e),this.te=this.oi=t,this.ee=this.ai=e,this.hi=this.li=0,this.ci=i}static fi=(t,e,i=0)=>{const s=new v(t.j(e+'.dat')),n=new v(t.j('index.dat'));n.Ee=s.Me;const r=n.Me,h=n.Me,l=n.Re,o=new Int32Array(l);for(let t=1;t<l;t++)o[t]=n.De,0===o[t]&&(o[t]=1);for(let t=0;t<i;t++)n.Ee+=2,s.Ee+=n.Me*n.Me,n.Ee+=1;if(s.Ee>s.le.it||n.Ee>n.le.it)throw new Error;const a=n.Re,c=n.Re,f=n.Me,u=n.Me,d=new L(f,u,o);d.hi=a,d.li=c,d.oi=r,d.ai=h;const w=d.Rt,y=n.Re;if(0===y){const t=d.te*d.ee;for(let e=0;e<t;e++)w[e]=s.xe}else if(1===y){const t=d.te,e=d.ee;for(let i=0;i<t;i++)for(let n=0;n<e;n++)w[i+n*t]=s.xe}return d};re=(t,e)=>{t|=0,e|=0;let i=(t+=this.hi)+(e+=this.li)*m.xt,s=0,n=this.ee,r=this.te,h=m.xt-r,l=0;if(e<m.Ft){const t=m.Ft-e;n-=t,e=m.Ft,s+=t*r,i+=t*m.xt}if(e+n>m.Dt&&(n-=e+n-m.Dt),t<m.Nt){const e=m.Nt-t;r-=e,t=m.Nt,s+=e,i+=e,l+=e,h+=e}if(t+r>m.Ut){const e=t+r-m.Ut;r-=e,l+=e,h+=e}r>0&&n>0&&this.ui(r,n,this.Rt,s,l,m.Rt,i,h)};di=()=>{const t=this.Rt,e=this.te,i=this.ee;for(let s=0;s<i;s++){const i=e/2|0;for(let n=0;n<i;n++){const i=n+s*e,r=e-n-1+s*e,h=t[i];t[i]=t[r],t[r]=h}}};wi=()=>{const t=this.Rt,e=this.te,i=this.ee;for(let s=0;s<(i/2|0);s++)for(let n=0;n<e;n++){const r=n+s*e,h=n+(i-s-1)*e,l=t[r];t[r]=t[h],t[h]=l}};yi=(t,e,i)=>{for(let s=0;s<this.ci.it;s++){let n=this.ci[s]>>16&255;n+=t,n<0?n=0:n>255&&(n=255);let r=this.ci[s]>>8&255;r+=e,r<0?r=0:r>255&&(r=255);let h=255&this.ci[s];h+=i,h<0?h=0:h>255&&(h=255),this.ci[s]=(n<<16)+(r<<8)+h}};mi=()=>{this.oi|=0,this.ai|=0,this.oi/=2,this.ai/=2,this.oi|=0,this.ai|=0;const t=new Int8Array(this.oi*this.ai);let e=0;for(let i=0;i<this.ee;i++)for(let s=0;s<this.te;s++)t[(s+this.hi>>1)+(i+this.li>>1)*this.oi]=this.Rt[e++];this.Rt=t,this.te=this.oi,this.ee=this.ai,this.hi=0,this.li=0};pi=()=>{if(this.te===this.oi&&this.ee===this.ai)return;const t=new Int8Array(this.oi*this.ai);let e=0;for(let i=0;i<this.ee;i++)for(let s=0;s<this.te;s++)t[s+this.hi+(i+this.li)*this.oi]=this.Rt[e++];this.Rt=t,this.te=this.oi,this.ee=this.ai,this.hi=0,this.li=0};ui=(t,e,i,s,n,r,h,l)=>{const o=-(t>>2);t=-(3&t);for(let a=-e;a<0;a++){for(let t=o;t<0;t++){let t=i[s++];0===t?h++:r[h++]=this.ci[255&t],t=i[s++],0===t?h++:r[h++]=this.ci[255&t],t=i[s++],0===t?h++:r[h++]=this.ci[255&t],t=i[s++],0===t?h++:r[h++]=this.ci[255&t]}for(let e=t;e<0;e++){const t=i[s++];0===t?h++:r[h++]=this.ci[255&t]}h+=l,s+=n}}}class S extends Array{At(t,e){super(t);for(let i=0;i<t;i++)this[i]=e}}class O extends Array{At(t,e,i){super(t);for(let s=0;s<t;s++){this[s]=new Array(e);for(let t=0;t<e;t++)this[s][t]=i}}}class k extends Array{At(t,e,i,s){super(t);for(let n=0;n<t;n++){this[n]=new Array(e);for(let t=0;t<e;t++){this[n][t]=new Array(i);for(let e=0;e<i;e++)this[n][t][e]=s}}}}class R extends Array{At(t,e,i,s,n){super(t);for(let r=0;r<t;r++){this[r]=new Array(e);for(let t=0;t<e;t++){this[r][t]=new Array(i);for(let e=0;e<i;e++){this[r][t][e]=new Array(s);for(let i=0;i<s;i++)this[r][t][e][i]=n}}}}}class x extends Array{At(t,e,i){super(t);for(let s=0;s<t;s++){this[s]=new Array(e);for(let t=0;t<e;t++)this[s][t]=new Uint8Array(i)}}}class M extends Array{At(t,e){super(t);for(let i=0;i<t;i++)this[i]=new Int32Array(e)}}class F extends Array{At(t,e,i){super(t);for(let s=0;s<t;s++){this[s]=new Array(e);for(let t=0;t<e;t++)this[s][t]=new Int32Array(i)}}}class D extends m{static Ai=!1;static Ii=new Int32Array(512);static gi=new Int32Array(2048);static _i=new Int32Array(2048);static Ci=new Int32Array(2048);static ci=new Int32Array(65536);static bi=new S(50,null);static Ti=0;static Ei=new Int32Array;static vi=0;static Li=0;static Si=!0;static Oi=!1;static ki=0;static Ri=null;static xi=new S(50,null);static Mi=0;static Fi=0;static Di=new Int32Array(50);static Ni=new S(50,null);static Ui=!1;static Pi=new S(50,!1);static Bi=new Int32Array(50);static{for(let t=1;t<512;t++)this.Ii[t]=32768/t|0;for(let t=1;t<2048;t++)this.gi[t]=65536/t|0;for(let t=0;t<2048;t++)this._i[t]=65536*Math._i(.0030679615757712823*t)|0,this.Ci[t]=65536*Math.Ci(.0030679615757712823*t)|0}static Wi=()=>{this.Ii=null,this.Ii=null,this._i=null,this.Ci=null,this.Ei=null,this.bi=null,this.Pi=null,this.Bi=null,this.Ri=null,this.xi=null,this.Di=null,this.ci=null,this.Ni=null,console.log('Draw3D unloaded!')};static Gi=()=>{this.Ei=new Int32Array(m.Mt);for(let t=0;t<m.Mt;t++)this.Ei[t]=m.xt*t;this.vi=m.xt/2|0,this.Li=m.Mt/2|0};static Hi=(t,e)=>{this.Ei=new Int32Array(e);for(let i=0;i<e;i++)this.Ei[i]=t*i;this.vi=t/2|0,this.Li=e/2|0};static Yi=()=>{this.Ri=null,this.xi.ne(null)};static Vi=t=>{this.Ti=0;for(let e=0;e<50;e++)try{this.bi[e]=L.fi(t,e.Xi()),this.Ai&&128===this.bi[e]?.oi?this.bi[e]?.mi():this.bi[e]?.pi(),this.Ti++}catch(t){}};static ji=t=>{if(0!==this.Bi[t])return this.Bi[t];const e=this.Ni[t];if(!e)return 0;let i=0,s=0,n=0;const r=e.it;for(let t=0;t<r;t++)i+=e[t]>>16&255,s+=e[t]>>8&255,n+=255&e[t];let h=((i/r|0)<<16)+((s/r|0)<<8)+(n/r|0);return h=this.zi(h,1.4),0===h&&(h=1),this.Bi[t]=h,h};static Zi=t=>{const e=t+.03*Math.Le()-.015;let i=0;for(let t=0;t<512;t++){const s=(t/8|0)/64+.0078125,n=(7&t)/8+.0625;for(let t=0;t<128;t++){const r=t/128;let h=r,l=r,o=r;if(0!==n){let t;t=r<.5?r*(n+1):r+n-r*n;const e=2*r-t;let i=s+.3333333333333333;i>1&&i--;let a=s-.3333333333333333;a<0&&a++,h=6*i<1?e+6*(t-e)*i:2*i<1?t:3*i<2?e+(t-e)*(.6666666666666666-i)*6:e,l=6*s<1?e+6*(t-e)*s:2*s<1?t:3*s<2?e+(t-e)*(.6666666666666666-s)*6:e,o=6*a<1?e+6*(t-e)*a:2*a<1?t:3*a<2?e+(t-e)*(.6666666666666666-a)*6:e}const a=((256*h|0)<<16)+((256*l|0)<<8)+(256*o|0);this.ci[i++]=this.zi(a,e)}}for(let t=0;t<50;t++){const i=this.bi[t];if(!i)continue;const s=i.ci;this.Ni[t]=new Int32Array(s.it);for(let i=0;i<s.it;i++){const n=this.Ni[t];n&&(n[i]=this.zi(s[i],e))}}for(let t=0;t<50;t++)this.qi(t)};static zi=(t,e)=>{const i=(t>>16)/256,s=(t>>8&255)/256,n=(255&t)/256;return((256*Math.pow(i,e)|0)<<16)+((256*Math.pow(s,e)|0)<<8)+(256*Math.pow(n,e)|0)};static Ki=t=>{this.Ri||(this.Mi=t,this.Ai?this.Ri=new M(t,16384):this.Ri=new M(t,65536),this.xi.ne(null))};static Ji=(t,e,i,s,n,r,h,l,o)=>{let a=0,c=0;n!==s&&(a=(e-t<<16)/(n-s)|0,c=(l-h<<15)/(n-s)|0);let f=0,u=0;r!==n&&(f=(i-e<<16)/(r-n)|0,u=(o-l<<15)/(r-n)|0);let d=0,w=0;if(r!==s&&(d=(t-i<<16)/(s-r)|0,w=(h-o<<15)/(s-r)|0),s<=n&&s<=r){if(s<m.Dt)if(n>m.Dt&&(n=m.Dt),r>m.Dt&&(r=m.Dt),n<r)if(i=t<<=16,o=h<<=15,s<0&&(i-=d*s,t-=a*s,o-=w*s,h-=c*s,s=0),e<<=16,l<<=15,n<0&&(e-=f*n,l-=u*n,n=0),s!==n&&d<a||s===n&&d>f)for(r-=n,n-=s,s=D.Ei[s];;){if(--n<0)for(;;){if(--r<0)return;this.$i(i>>16,e>>16,o>>7,l>>7,m.Rt,s,0),i+=d,e+=f,o+=w,l+=u,s+=m.xt}this.$i(i>>16,t>>16,o>>7,h>>7,m.Rt,s,0),i+=d,t+=a,o+=w,h+=c,s+=m.xt}else for(r-=n,n-=s,s=D.Ei[s];;){if(--n<0)for(;;){if(--r<0)return;this.$i(e>>16,i>>16,l>>7,o>>7,m.Rt,s,0),i+=d,e+=f,o+=w,l+=u,s+=m.xt}this.$i(t>>16,i>>16,h>>7,o>>7,m.Rt,s,0),i+=d,t+=a,o+=w,h+=c,s+=m.xt}else if(e=t<<=16,l=h<<=15,s<0&&(e-=d*s,t-=a*s,l-=w*s,h-=c*s,s=0),i<<=16,o<<=15,r<0&&(i-=f*r,o-=u*r,r=0),s!==r&&d<a||s===r&&f>a)for(n-=r,r-=s,s=D.Ei[s];;){if(--r<0)for(;;){if(--n<0)return;this.$i(i>>16,t>>16,o>>7,h>>7,m.Rt,s,0),i+=f,t+=a,o+=u,h+=c,s+=m.xt}this.$i(e>>16,t>>16,l>>7,h>>7,m.Rt,s,0),e+=d,t+=a,l+=w,h+=c,s+=m.xt}else for(n-=r,r-=s,s=D.Ei[s];;){if(--r<0)for(;;){if(--n<0)return;this.$i(t>>16,i>>16,h>>7,o>>7,m.Rt,s,0),i+=f,t+=a,o+=u,h+=c,s+=m.xt}this.$i(t>>16,e>>16,h>>7,l>>7,m.Rt,s,0),e+=d,t+=a,l+=w,h+=c,s+=m.xt}}else if(n<=r){if(n<m.Dt)if(r>m.Dt&&(r=m.Dt),s>m.Dt&&(s=m.Dt),r<s)if(t=e<<=16,h=l<<=15,n<0&&(t-=a*n,e-=f*n,h-=c*n,l-=u*n,n=0),i<<=16,o<<=15,r<0&&(i-=d*r,o-=w*r,r=0),n!==r&&a<f||n===r&&a>d)for(s-=r,r-=n,n=D.Ei[n];;){if(--r<0)for(;;){if(--s<0)return;this.$i(t>>16,i>>16,h>>7,o>>7,m.Rt,n,0),t+=a,i+=d,h+=c,o+=w,n+=m.xt}this.$i(t>>16,e>>16,h>>7,l>>7,m.Rt,n,0),t+=a,e+=f,h+=c,l+=u,n+=m.xt}else for(s-=r,r-=n,n=D.Ei[n];;){if(--r<0)for(;;){if(--s<0)return;this.$i(i>>16,t>>16,o>>7,h>>7,m.Rt,n,0),t+=a,i+=d,h+=c,o+=w,n+=m.xt}this.$i(e>>16,t>>16,l>>7,h>>7,m.Rt,n,0),t+=a,e+=f,h+=c,l+=u,n+=m.xt}else if(i=e<<=16,o=l<<=15,n<0&&(i-=a*n,e-=f*n,o-=c*n,l-=u*n,n=0),t<<=16,h<<=15,s<0&&(t-=d*s,h-=w*s,s=0),r-=s,s-=n,n=D.Ei[n],a<f)for(;;){if(--s<0)for(;;){if(--r<0)return;this.$i(t>>16,e>>16,h>>7,l>>7,m.Rt,n,0),t+=d,e+=f,h+=w,l+=u,n+=m.xt}this.$i(i>>16,e>>16,o>>7,l>>7,m.Rt,n,0),i+=a,e+=f,o+=c,l+=u,n+=m.xt}else for(;;){if(--s<0)for(;;){if(--r<0)return;this.$i(e>>16,t>>16,l>>7,h>>7,m.Rt,n,0),t+=d,e+=f,h+=w,l+=u,n+=m.xt}this.$i(e>>16,i>>16,l>>7,o>>7,m.Rt,n,0),i+=a,e+=f,o+=c,l+=u,n+=m.xt}}else if(r<m.Dt)if(s>m.Dt&&(s=m.Dt),n>m.Dt&&(n=m.Dt),s<n)if(e=i<<=16,l=o<<=15,r<0&&(e-=f*r,i-=d*r,l-=u*r,o-=w*r,r=0),t<<=16,h<<=15,s<0&&(t-=a*s,h-=c*s,s=0),n-=s,s-=r,r=D.Ei[r],f<d)for(;;){if(--s<0)for(;;){if(--n<0)return;this.$i(e>>16,t>>16,l>>7,h>>7,m.Rt,r,0),e+=f,t+=a,l+=u,h+=c,r+=m.xt}this.$i(e>>16,i>>16,l>>7,o>>7,m.Rt,r,0),e+=f,i+=d,l+=u,o+=w,r+=m.xt}else for(;;){if(--s<0)for(;;){if(--n<0)return;this.$i(t>>16,e>>16,h>>7,l>>7,m.Rt,r,0),e+=f,t+=a,l+=u,h+=c,r+=m.xt}this.$i(i>>16,e>>16,o>>7,l>>7,m.Rt,r,0),e+=f,i+=d,l+=u,o+=w,r+=m.xt}else if(t=i<<=16,h=o<<=15,r<0&&(t-=f*r,i-=d*r,h-=u*r,o-=w*r,r=0),e<<=16,l<<=15,n<0&&(e-=a*n,l-=c*n,n=0),s-=n,n-=r,r=D.Ei[r],f<d)for(;;){if(--n<0)for(;;){if(--s<0)return;this.$i(e>>16,i>>16,l>>7,o>>7,m.Rt,r,0),e+=a,i+=d,l+=c,o+=w,r+=m.xt}this.$i(t>>16,i>>16,h>>7,o>>7,m.Rt,r,0),t+=f,i+=d,h+=u,o+=w,r+=m.xt}else for(;;){if(--n<0)for(;;){if(--s<0)return;this.$i(i>>16,e>>16,o>>7,l>>7,m.Rt,r,0),e+=a,i+=d,l+=c,o+=w,r+=m.xt}this.$i(i>>16,t>>16,o>>7,h>>7,m.Rt,r,0),t+=f,i+=d,h+=u,o+=w,r+=m.xt}};static $i=(t,e,i,s,n,r,h)=>{let l;if(D.Si){let o;if(D.Oi){if(o=e-t>3?(s-i)/(e-t)|0:0,e>m.Pt&&(e=m.Pt),t<0&&(i-=t*o,t=0),t>=e)return;r+=t,h=e-t>>2,o<<=2}else{if(!(t<e))return;r+=t,o=(h=e-t>>2)>0?(s-i)*D.Ii[h]>>15:0}if(0===D.ki)for(;;){if(--h<0){if((h=e-t&3)>0){l=D.ci[i>>8];do{n[r++]=l,h--}while(h>0);return}break}l=D.ci[i>>8],i+=o,n[r++]=l,n[r++]=l,n[r++]=l,n[r++]=l}else{const s=D.ki,a=256-D.ki;for(;;){if(--h<0){if((h=e-t&3)>0){l=D.ci[i>>8],l=((16711935&l)*a>>8&16711935)+((65280&l)*a>>8&65280);do{n[r++]=l+((16711935&n[r])*s>>8&16711935)+((65280&n[r])*s>>8&65280),h--}while(h>0)}break}l=D.ci[i>>8],i+=o,l=((16711935&l)*a>>8&16711935)+((65280&l)*a>>8&65280),n[r++]=l+((16711935&n[r])*s>>8&16711935)+((65280&n[r])*s>>8&65280),n[r++]=l+((16711935&n[r])*s>>8&16711935)+((65280&n[r])*s>>8&65280),n[r++]=l+((16711935&n[r])*s>>8&16711935)+((65280&n[r])*s>>8&65280),n[r++]=l+((16711935&n[r])*s>>8&16711935)+((65280&n[r])*s>>8&65280)}}}else if(t<e){const o=(s-i)/(e-t)|0;if(D.Oi&&(e>m.Pt&&(e=m.Pt),t<0&&(i-=t*o,t=0),t>=e))return;if(r+=t,h=e-t,0===D.ki)do{n[r++]=D.ci[i>>8],i+=o,h--}while(h>0);else{const t=D.ki,e=256-D.ki;do{l=D.ci[i>>8],i+=o,l=((16711935&l)*e>>8&16711935)+((65280&l)*e>>8&65280),n[r++]=l+((16711935&n[r])*t>>8&16711935)+((65280&n[r])*t>>8&65280),h--}while(h>0)}}};static Qi=(t,e,i,s,n,r,h)=>{let l=0;n!==s&&(l=(e-t<<16)/(n-s)|0);let o=0;r!==n&&(o=(i-e<<16)/(r-n)|0);let a=0;if(r!==s&&(a=(t-i<<16)/(s-r)|0),s<=n&&s<=r){if(s<m.Dt)if(n>m.Dt&&(n=m.Dt),r>m.Dt&&(r=m.Dt),n<r)if(i=t<<=16,s<0&&(i-=a*s,t-=l*s,s=0),e<<=16,n<0&&(e-=o*n,n=0),s!==n&&a<l||s===n&&a>o)for(r-=n,n-=s,s=this.Ei[s];;){if(--n<0)for(;;){if(--r<0)return;this.ts(i>>16,e>>16,m.Rt,s,h),i+=a,e+=o,s+=m.xt}this.ts(i>>16,t>>16,m.Rt,s,h),i+=a,t+=l,s+=m.xt}else for(r-=n,n-=s,s=this.Ei[s];;){if(--n<0)for(;;){if(--r<0)return;this.ts(e>>16,i>>16,m.Rt,s,h),i+=a,e+=o,s+=m.xt}this.ts(t>>16,i>>16,m.Rt,s,h),i+=a,t+=l,s+=m.xt}else if(e=t<<=16,s<0&&(e-=a*s,t-=l*s,s=0),i<<=16,r<0&&(i-=o*r,r=0),s!==r&&a<l||s===r&&o>l)for(n-=r,r-=s,s=this.Ei[s];;){if(--r<0)for(;;){if(--n<0)return;this.ts(i>>16,t>>16,m.Rt,s,h),i+=o,t+=l,s+=m.xt}this.ts(e>>16,t>>16,m.Rt,s,h),e+=a,t+=l,s+=m.xt}else for(n-=r,r-=s,s=this.Ei[s];;){if(--r<0)for(;;){if(--n<0)return;this.ts(t>>16,i>>16,m.Rt,s,h),i+=o,t+=l,s+=m.xt}this.ts(t>>16,e>>16,m.Rt,s,h),e+=a,t+=l,s+=m.xt}}else if(n<=r){if(n<m.Dt)if(r>m.Dt&&(r=m.Dt),s>m.Dt&&(s=m.Dt),r<s)if(t=e<<=16,n<0&&(t-=l*n,e-=o*n,n=0),i<<=16,r<0&&(i-=a*r,r=0),n!==r&&l<o||n===r&&l>a)for(s-=r,r-=n,n=this.Ei[n];;){if(--r<0)for(;;){if(--s<0)return;this.ts(t>>16,i>>16,m.Rt,n,h),t+=l,i+=a,n+=m.xt}this.ts(t>>16,e>>16,m.Rt,n,h),t+=l,e+=o,n+=m.xt}else for(s-=r,r-=n,n=this.Ei[n];;){if(--r<0)for(;;){if(--s<0)return;this.ts(i>>16,t>>16,m.Rt,n,h),t+=l,i+=a,n+=m.xt}this.ts(e>>16,t>>16,m.Rt,n,h),t+=l,e+=o,n+=m.xt}else if(i=e<<=16,n<0&&(i-=l*n,e-=o*n,n=0),t<<=16,s<0&&(t-=a*s,s=0),l<o)for(r-=s,s-=n,n=this.Ei[n];;){if(--s<0)for(;;){if(--r<0)return;this.ts(t>>16,e>>16,m.Rt,n,h),t+=a,e+=o,n+=m.xt}this.ts(i>>16,e>>16,m.Rt,n,h),i+=l,e+=o,n+=m.xt}else for(r-=s,s-=n,n=this.Ei[n];;){if(--s<0)for(;;){if(--r<0)return;this.ts(e>>16,t>>16,m.Rt,n,h),t+=a,e+=o,n+=m.xt}this.ts(e>>16,i>>16,m.Rt,n,h),i+=l,e+=o,n+=m.xt}}else if(r<m.Dt)if(s>m.Dt&&(s=m.Dt),n>m.Dt&&(n=m.Dt),s<n)if(e=i<<=16,r<0&&(e-=o*r,i-=a*r,r=0),t<<=16,s<0&&(t-=l*s,s=0),o<a)for(n-=s,s-=r,r=this.Ei[r];;){if(--s<0)for(;;){if(--n<0)return;this.ts(e>>16,t>>16,m.Rt,r,h),e+=o,t+=l,r+=m.xt}this.ts(e>>16,i>>16,m.Rt,r,h),e+=o,i+=a,r+=m.xt}else for(n-=s,s-=r,r=this.Ei[r];;){if(--s<0)for(;;){if(--n<0)return;this.ts(t>>16,e>>16,m.Rt,r,h),e+=o,t+=l,r+=m.xt}this.ts(i>>16,e>>16,m.Rt,r,h),e+=o,i+=a,r+=m.xt}else if(t=i<<=16,r<0&&(t-=o*r,i-=a*r,r=0),e<<=16,n<0&&(e-=l*n,n=0),o<a)for(s-=n,n-=r,r=this.Ei[r];;){if(--n<0)for(;;){if(--s<0)return;this.ts(e>>16,i>>16,m.Rt,r,h),e+=l,i+=a,r+=m.xt}this.ts(t>>16,i>>16,m.Rt,r,h),t+=o,i+=a,r+=m.xt}else for(s-=n,n-=r,r=this.Ei[r];;){if(--n<0)for(;;){if(--s<0)return;this.ts(i>>16,e>>16,m.Rt,r,h),e+=l,i+=a,r+=m.xt}this.ts(i>>16,t>>16,m.Rt,r,h),t+=o,i+=a,r+=m.xt}};static es=(t,e,i,s,n,r,h,l,o,a,c,f,u,d,w,y,p,A,I)=>{const g=this.is(I);this.Ui=!this.Pi[I];const _=a-u,C=c-w,b=f-p,T=d-a,E=y-c,v=A-f;let L=T*c-E*a<<14;const S=E*f-v*c<<8,O=v*a-T*f<<5;let k=_*c-C*a<<14;const R=C*f-b*c<<8,x=b*a-_*f<<5;let M=C*T-_*E<<14;const F=b*E-C*v<<8,D=_*v-b*T<<5;let N=0,U=0;n!==s&&(N=(e-t<<16)/(n-s)|0,U=(l-h<<16)/(n-s)|0);let P=0,B=0;r!==n&&(P=(i-e<<16)/(r-n)|0,B=(o-l<<16)/(r-n)|0);let W=0,G=0;if(r!==s&&(W=(t-i<<16)/(s-r)|0,G=(h-o<<16)/(s-r)|0),s<=n&&s<=r){if(s<m.Dt)if(n>m.Dt&&(n=m.Dt),r>m.Dt&&(r=m.Dt),n<r){i=t<<=16,o=h<<=16,s<0&&(i-=W*s,t-=N*s,o-=G*s,h-=U*s,s=0),e<<=16,l<<=16,n<0&&(e-=P*n,l-=B*n,n=0);const a=s-this.Li;if(L+=O*a,k+=x*a,M+=D*a,L|=0,k|=0,M|=0,s!==n&&W<N||s===n&&W>P)for(r-=n,n-=s,s=this.Ei[s];;){if(--n<0)for(;;){if(--r<0)return;this.ss(i>>16,e>>16,m.Rt,s,g,0,0,L,k,M,S,R,F,o>>8,l>>8),i+=W,e+=P,o+=G,l+=B,s+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(i>>16,t>>16,m.Rt,s,g,0,0,L,k,M,S,R,F,o>>8,h>>8),i+=W,t+=N,o+=G,h+=U,s+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}else for(r-=n,n-=s,s=this.Ei[s];;){if(--n<0)for(;;){if(--r<0)return;this.ss(e>>16,i>>16,m.Rt,s,g,0,0,L,k,M,S,R,F,l>>8,o>>8),i+=W,e+=P,o+=G,l+=B,s+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(t>>16,i>>16,m.Rt,s,g,0,0,L,k,M,S,R,F,h>>8,o>>8),i+=W,t+=N,o+=G,h+=U,s+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}}else{e=t<<=16,l=h<<=16,s<0&&(e-=W*s,t-=N*s,l-=G*s,h-=U*s,s=0),i<<=16,o<<=16,r<0&&(i-=P*r,o-=B*r,r=0);const a=s-this.Li;if(L+=O*a,k+=x*a,M+=D*a,L|=0,k|=0,M|=0,(s===r||W>=N)&&(s!==r||P<=N))for(n-=r,r-=s,s=this.Ei[s];;){if(--r<0)for(;;){if(--n<0)return;this.ss(t>>16,i>>16,m.Rt,s,g,0,0,L,k,M,S,R,F,h>>8,o>>8),i+=P,t+=N,o+=B,h+=U,s+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(t>>16,e>>16,m.Rt,s,g,0,0,L,k,M,S,R,F,h>>8,l>>8),e+=W,t+=N,l+=G,h+=U,s+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}else for(n-=r,r-=s,s=this.Ei[s];;){if(--r<0)for(;;){if(--n<0)return;this.ss(i>>16,t>>16,m.Rt,s,g,0,0,L,k,M,S,R,F,o>>8,h>>8),i+=P,t+=N,o+=B,h+=U,s+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(e>>16,t>>16,m.Rt,s,g,0,0,L,k,M,S,R,F,l>>8,h>>8),e+=W,t+=N,l+=G,h+=U,s+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}}}else if(n<=r){if(n<m.Dt)if(r>m.Dt&&(r=m.Dt),s>m.Dt&&(s=m.Dt),r<s){t=e<<=16,h=l<<=16,n<0&&(t-=N*n,e-=P*n,h-=U*n,l-=B*n,n=0),i<<=16,o<<=16,r<0&&(i-=W*r,o-=G*r,r=0);const a=n-this.Li;if(L+=O*a,k+=x*a,M+=D*a,L|=0,k|=0,M|=0,n!==r&&N<P||n===r&&N>W)for(s-=r,r-=n,n=this.Ei[n];;){if(--r<0)for(;;){if(--s<0)return;this.ss(t>>16,i>>16,m.Rt,n,g,0,0,L,k,M,S,R,F,h>>8,o>>8),t+=N,i+=W,h+=U,o+=G,n+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(t>>16,e>>16,m.Rt,n,g,0,0,L,k,M,S,R,F,h>>8,l>>8),t+=N,e+=P,h+=U,l+=B,n+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}else for(s-=r,r-=n,n=this.Ei[n];;){if(--r<0)for(;;){if(--s<0)return;this.ss(i>>16,t>>16,m.Rt,n,g,0,0,L,k,M,S,R,F,o>>8,h>>8),t+=N,i+=W,h+=U,o+=G,n+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(e>>16,t>>16,m.Rt,n,g,0,0,L,k,M,S,R,F,l>>8,h>>8),t+=N,e+=P,h+=U,l+=B,n+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}}else{i=e<<=16,o=l<<=16,n<0&&(i-=N*n,e-=P*n,o-=U*n,l-=B*n,n=0),t<<=16,h<<=16,s<0&&(t-=W*s,h-=G*s,s=0);const a=n-this.Li;if(L+=O*a,k+=x*a,M+=D*a,L|=0,k|=0,M|=0,r-=s,s-=n,n=this.Ei[n],N<P)for(;;){if(--s<0)for(;;){if(--r<0)return;this.ss(t>>16,e>>16,m.Rt,n,g,0,0,L,k,M,S,R,F,h>>8,l>>8),t+=W,e+=P,h+=G,l+=B,n+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(i>>16,e>>16,m.Rt,n,g,0,0,L,k,M,S,R,F,o>>8,l>>8),i+=N,e+=P,o+=U,l+=B,n+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}else for(;;){if(--s<0)for(;;){if(--r<0)return;this.ss(e>>16,t>>16,m.Rt,n,g,0,0,L,k,M,S,R,F,l>>8,h>>8),t+=W,e+=P,h+=G,l+=B,n+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(e>>16,i>>16,m.Rt,n,g,0,0,L,k,M,S,R,F,l>>8,o>>8),i+=N,e+=P,o+=U,l+=B,n+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}}}else if(r<m.Dt)if(s>m.Dt&&(s=m.Dt),n>m.Dt&&(n=m.Dt),s<n){e=i<<=16,l=o<<=16,r<0&&(e-=P*r,i-=W*r,l-=B*r,o-=G*r,r=0),t<<=16,h<<=16,s<0&&(t-=N*s,h-=U*s,s=0);const a=r-this.Li;if(L+=O*a,k+=x*a,M+=D*a,L|=0,k|=0,M|=0,n-=s,s-=r,r=this.Ei[r],P<W)for(;;){if(--s<0)for(;;){if(--n<0)return;this.ss(e>>16,t>>16,m.Rt,r,g,0,0,L,k,M,S,R,F,l>>8,h>>8),e+=P,t+=N,l+=B,h+=U,r+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(e>>16,i>>16,m.Rt,r,g,0,0,L,k,M,S,R,F,l>>8,o>>8),e+=P,i+=W,l+=B,o+=G,r+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}else for(;;){if(--s<0)for(;;){if(--n<0)return;this.ss(t>>16,e>>16,m.Rt,r,g,0,0,L,k,M,S,R,F,h>>8,l>>8),e+=P,t+=N,l+=B,h+=U,r+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(i>>16,e>>16,m.Rt,r,g,0,0,L,k,M,S,R,F,o>>8,l>>8),e+=P,i+=W,l+=B,o+=G,r+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}}else{t=i<<=16,h=o<<=16,r<0&&(t-=P*r,i-=W*r,h-=B*r,o-=G*r,r=0),e<<=16,l<<=16,n<0&&(e-=N*n,l-=U*n,n=0);const a=r-this.Li;if(L+=O*a,k+=x*a,M+=D*a,L|=0,k|=0,M|=0,s-=n,n-=r,r=this.Ei[r],P<W)for(;;){if(--n<0)for(;;){if(--s<0)return;this.ss(e>>16,i>>16,m.Rt,r,g,0,0,L,k,M,S,R,F,l>>8,o>>8),e+=N,i+=W,l+=U,o+=G,r+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(t>>16,i>>16,m.Rt,r,g,0,0,L,k,M,S,R,F,h>>8,o>>8),t+=P,i+=W,h+=B,o+=G,r+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}else for(;;){if(--n<0)for(;;){if(--s<0)return;this.ss(i>>16,e>>16,m.Rt,r,g,0,0,L,k,M,S,R,F,o>>8,l>>8),e+=N,i+=W,l+=U,o+=G,r+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}this.ss(i>>16,t>>16,m.Rt,r,g,0,0,L,k,M,S,R,F,o>>8,h>>8),t+=P,i+=W,h+=B,o+=G,r+=m.xt,L+=O,k+=x,M+=D,L|=0,k|=0,M|=0}}};static ss=(t,e,i,s,n,r,h,l,o,a,c,f,u,d,w)=>{if(t>=e)return;let y,p,A,I,g,_,C,b,T;if(this.Oi){if(y=(w-d)/(e-t)|0,e>m.Pt&&(e=m.Pt),t<0&&(d-=t*y,t=0),t>=e)return;p=e-t>>3,y<<=12}else e-t>7?(p=e-t>>3,y=(w-d)*this.Ii[p]>>6):(p=0,y=0);if(d<<=9,s+=t,this.Ai&&n)if(A=0,I=0,_=t-this.vi,l+=(c>>3)*_,o+=(f>>3)*_,a+=(u>>3)*_,l|=0,o|=0,g=(a|=0)>>12,0!==g&&(h=o/g|0,(r=l/g|0)<0?r=0:r>4032&&(r=4032)),l+=c,o+=f,a+=u,l|=0,o|=0,g=(a|=0)>>12,0!==g&&(A=l/g|0,I=o/g|0,A<7?A=7:A>4032&&(A=4032)),C=A-r>>3,b=I-h>>3,r+=d>>3&786432,T=d>>23,this.Ui){for(;p-- >0;)i[s++]=n[(4032&h)+(r>>6)]>>>T,r+=C,h+=b,i[s++]=n[(4032&h)+(r>>6)]>>>T,r+=C,h+=b,i[s++]=n[(4032&h)+(r>>6)]>>>T,r+=C,h+=b,i[s++]=n[(4032&h)+(r>>6)]>>>T,r+=C,h+=b,i[s++]=n[(4032&h)+(r>>6)]>>>T,r+=C,h+=b,i[s++]=n[(4032&h)+(r>>6)]>>>T,r+=C,h+=b,i[s++]=n[(4032&h)+(r>>6)]>>>T,r+=C,h+=b,i[s++]=n[(4032&h)+(r>>6)]>>>T,r=A,h=I,l+=c,o+=f,g=(a+=u)>>12,0!==g&&(A=l/g|0,I=o/g|0,A<7?A=7:A>4032&&(A=4032)),C=A-r>>3,b=I-h>>3,r+=(d+=y)>>3&786432,T=d>>23;for(p=e-t&7;p-- >0;)i[s++]=n[(4032&h)+(r>>6)]>>>T,r+=C,h+=b}else{for(;p-- >0;){let t;0!=(t=n[(4032&h)+(r>>6)]>>>T)&&(i[s]=t),s+=1,0!=(t=n[(4032&(h+=b))+((r+=C)>>6)]>>>T)&&(i[s]=t),s++,0!=(t=n[(4032&(h+=b))+((r+=C)>>6)]>>>T)&&(i[s]=t),s++,0!=(t=n[(4032&(h+=b))+((r+=C)>>6)]>>>T)&&(i[s]=t),s++,0!=(t=n[(4032&(h+=b))+((r+=C)>>6)]>>>T)&&(i[s]=t),s++,0!=(t=n[(4032&(h+=b))+((r+=C)>>6)]>>>T)&&(i[s]=t),s++,0!=(t=n[(4032&(h+=b))+((r+=C)>>6)]>>>T)&&(i[s]=t),s++,0!=(t=n[(4032&(h+=b))+((r+=C)>>6)]>>>T)&&(i[s]=t),s+=1,r=A,h=I,l+=c,o+=f,a+=u,l|=0,o|=0,g=(a|=0)>>12,0!==g&&(A=l/g|0,I=o/g|0,A<7?A=7:A>4032&&(A=4032)),C=A-r>>3,b=I-h>>3,r+=(d+=y)>>3&786432,T=d>>23}for(p=e-t&7;p-- >0;){let t;0!=(t=n[(4032&h)+(r>>6)]>>>T)&&(i[s]=t),s++,r+=C,h+=b}}else if(A=0,I=0,_=t-this.vi,l+=(c>>3)*_,o+=(f>>3)*_,a+=(u>>3)*_,l|=0,o|=0,g=(a|=0)>>14,0!==g&&(h=o/g|0,(r=l/g|0)<0?r=0:r>16256&&(r=16256)),l+=c,o+=f,a+=u,l|=0,o|=0,g=(a|=0)>>14,0!==g&&(A=l/g|0,I=o/g|0,A<7?A=7:A>16256&&(A=16256)),C=A-r>>3,b=I-h>>3,r+=6291456&d,T=d>>23,this.Ui&&n){for(;p-- >0;)i[s++]=n[(16256&h)+(r>>7)]>>>T,r+=C,h+=b,i[s++]=n[(16256&h)+(r>>7)]>>>T,r+=C,h+=b,i[s++]=n[(16256&h)+(r>>7)]>>>T,r+=C,h+=b,i[s++]=n[(16256&h)+(r>>7)]>>>T,r+=C,h+=b,i[s++]=n[(16256&h)+(r>>7)]>>>T,r+=C,h+=b,i[s++]=n[(16256&h)+(r>>7)]>>>T,r+=C,h+=b,i[s++]=n[(16256&h)+(r>>7)]>>>T,r+=C,h+=b,i[s++]=n[(16256&h)+(r>>7)]>>>T,r=A,h=I,l+=c,o+=f,a+=u,l|=0,o|=0,g=(a|=0)>>14,0!==g&&(A=l/g|0,I=o/g|0,A<7?A=7:A>16256&&(A=16256)),C=A-r>>3,b=I-h>>3,r+=6291456&(d+=y),T=d>>23;for(p=e-t&7;p-- >0;)i[s++]=n[(16256&h)+(r>>7)]>>>T,r+=C,h+=b}else{for(;p-- >0&&n;){let t;0!=(t=n[(16256&h)+(r>>7)]>>>T)&&(i[s]=t),s+=1,0!=(t=n[(16256&(h+=b))+((r+=C)>>7)]>>>T)&&(i[s]=t),s++,0!=(t=n[(16256&(h+=b))+((r+=C)>>7)]>>>T)&&(i[s]=t),s++,0!=(t=n[(16256&(h+=b))+((r+=C)>>7)]>>>T)&&(i[s]=t),s++,0!=(t=n[(16256&(h+=b))+((r+=C)>>7)]>>>T)&&(i[s]=t),s++,0!=(t=n[(16256&(h+=b))+((r+=C)>>7)]>>>T)&&(i[s]=t),s++,0!=(t=n[(16256&(h+=b))+((r+=C)>>7)]>>>T)&&(i[s]=t),s++,0!=(t=n[(16256&(h+=b))+((r+=C)>>7)]>>>T)&&(i[s]=t),s++,r=A,h=I,l+=c,o+=f,a+=u,l|=0,o|=0,g=(a|=0)>>14,0!==g&&(A=l/g|0,I=o/g|0,A<7?A=7:A>16256&&(A=16256)),C=A-r>>3,b=I-h>>3,r+=6291456&(d+=y),T=d>>23}for(p=e-t&7;p-- >0&&n;){let t;0!=(t=n[(16256&h)+(r>>7)]>>>T)&&(i[s]=t),s++,r+=C,h+=b}}};static ts=(t,e,i,s,n)=>{if(this.Oi&&(e>m.Pt&&(e=m.Pt),t<0&&(t=0)),t>=e)return;s+=t;let r=e-t>>2;if(0===this.ki)for(;;){if(r--,r<0)for(r=e-t&3;;){if(r--,r<0)return;i[s++]=n}i[s++]=n,i[s++]=n,i[s++]=n,i[s++]=n}const h=this.ki,l=256-this.ki;for(n=((16711935&n)*l>>8&16711935)+((65280&n)*l>>8&65280);;){if(r--,r<0)for(r=e-t&3;;){if(r--,r<0)return;i[s++]=n+((16711935&i[s])*h>>8&16711935)+((65280&i[s])*h>>8&65280)}i[s++]=n+((16711935&i[s])*h>>8&16711935)+((65280&i[s])*h>>8&65280),i[s++]=n+((16711935&i[s])*h>>8&16711935)+((65280&i[s])*h>>8&65280),i[s++]=n+((16711935&i[s])*h>>8&16711935)+((65280&i[s])*h>>8&65280),i[s++]=n+((16711935&i[s])*h>>8&16711935)+((65280&i[s])*h>>8&65280)}};static qi=t=>{this.xi[t]&&this.Ri&&(this.Ri[this.Mi++]=this.xi[t],this.xi[t]=null)};static is=t=>{if(this.Di[t]=this.Fi++,this.xi[t])return this.xi[t];let e;if(this.Mi>0&&this.Ri)e=this.Ri[--this.Mi],this.Ri[this.Mi]=null;else{let t=0,i=-1;for(let e=0;e<this.Ti;e++)this.xi[e]&&(this.Di[e]<t||-1===i)&&(t=this.Di[e],i=e);e=this.xi[i],this.xi[i]=null}this.xi[t]=e;const i=this.bi[t],s=this.Ni[t];if(!e||!i||!s)return null;if(this.Ai){this.Pi[t]=!1;for(let n=0;n<4096;n++){const r=e[n]=16316671&s[i.Rt[n]];0===r&&(this.Pi[t]=!0),e[n+4096]=r-(r>>>3)&16316671,e[n+8192]=r-(r>>>2)&16316671,e[n+12288]=r-(r>>>2)-(r>>>3)&16316671}}else{if(64===i.te)for(let t=0;t<128;t++)for(let n=0;n<128;n++)e[n+(t<<7|0)]=s[i.Rt[(n>>1)+(t>>1<<6|0)]];else for(let t=0;t<16384;t++)e[t]=s[i.Rt[t]];this.Pi[t]=!1;for(let i=0;i<16384;i++){e[i]&=16316671;const s=e[i];0===s&&(this.Pi[t]=!0),e[i+16384]=s-(s>>>3)&16316671,e[i+32768]=s-(s>>>2)&16316671,e[i+49152]=s-(s>>>2)-(s>>>3)&16316671}}return e}}const N={ns:{rs:8,hs:8},ls:{rs:10,hs:10},os:{rs:16,hs:65535},as:{rs:27,hs:27},cs:{rs:9,hs:9},fs:{rs:20,hs:65535},us:{rs:32,hs:32},ds:{rs:17,hs:65535},ws:{rs:18,hs:65535},ys:{rs:524,hs:65535},ms:{rs:37,hs:65535},ps:{rs:39,hs:65535},As:{rs:38,hs:65535},Is:{rs:40,hs:65535},gs:{rs:155,hs:65535},_s:{rs:36,hs:65535},Cs:{rs:33,hs:65535},bs:{rs:127,hs:127},Ts:{rs:35,hs:65535},Es:{rs:34,hs:65535},vs:{rs:192,hs:96},Ls:{rs:192,hs:126},Ss:{rs:49,hs:33},Os:{rs:50,hs:64},ks:{rs:51,hs:35},Rs:{rs:52,hs:36},xs:{rs:53,hs:37},Ms:{rs:54,hs:94},Fs:{rs:55,hs:38},Ds:{rs:56,hs:42},Ns:{rs:57,hs:40},Us:{rs:48,hs:41},Ps:{rs:45,hs:45},Bs:{rs:45,hs:95},Ws:{rs:61,hs:61},Gs:{rs:61,hs:43},Hs:{rs:91,hs:91},Ys:{rs:91,hs:123},Vs:{rs:93,hs:93},Xs:{rs:93,hs:125},js:{rs:92,hs:92},zs:{rs:92,hs:124},Zs:{rs:59,hs:59},qs:{rs:59,hs:58},Ks:{rs:222,hs:39},Js:{rs:222,hs:34},$s:{rs:44,hs:44},Qs:{rs:44,hs:60},tn:{rs:46,hs:46},en:{rs:46,hs:62},in:{rs:47,hs:47},sn:{rs:47,hs:63},nn:{rs:112,hs:65535},rn:{rs:113,hs:65535},hn:{rs:114,hs:65535},ln:{rs:115,hs:65535},on:{rs:116,hs:65535},an:{rs:117,hs:65535},cn:{rs:118,hs:65535},fn:{rs:119,hs:65535},un:{rs:120,hs:65535},dn:{rs:121,hs:65535},wn:{rs:122,hs:65535},yn:{rs:123,hs:65535},0:{rs:48,hs:48},1:{rs:49,hs:49},2:{rs:50,hs:50},3:{rs:51,hs:51},4:{rs:52,hs:52},5:{rs:53,hs:53},6:{rs:54,hs:54},7:{rs:55,hs:55},8:{rs:56,hs:56},9:{rs:57,hs:57},mn:{rs:65,hs:97},n:{rs:66,hs:98},pn:{rs:67,hs:99},An:{rs:68,hs:100},In:{rs:69,hs:101},gn:{rs:70,hs:102},_n:{rs:71,hs:103},Cn:{rs:72,hs:104},bn:{rs:73,hs:105},Tn:{rs:74,hs:106},En:{rs:75,hs:107},vn:{rs:76,hs:108},i:{rs:77,hs:109},Ln:{rs:78,hs:110},s:{rs:79,hs:111},e:{rs:80,hs:112},Sn:{rs:81,hs:113},On:{rs:82,hs:114},kn:{rs:83,hs:115},Rn:{rs:84,hs:116},xn:{rs:85,hs:117},Mn:{rs:86,hs:118},Fn:{rs:87,hs:119},Dn:{rs:88,hs:120},Nn:{rs:89,hs:121},Un:{rs:90,hs:122},Pn:{rs:65,hs:65},Bn:{rs:66,hs:66},Wn:{rs:67,hs:67},Gn:{rs:68,hs:68},Hn:{rs:69,hs:69},Yn:{rs:70,hs:70},Vn:{rs:71,hs:71},Xn:{rs:72,hs:72},jn:{rs:73,hs:73},zn:{rs:74,hs:74},Zn:{rs:75,hs:75},qn:{rs:76,hs:76},Kn:{rs:77,hs:77},Jn:{rs:78,hs:78},$n:{rs:79,hs:79},Qn:{rs:80,hs:80},tr:{rs:81,hs:81},er:{rs:82,hs:82},ir:{rs:83,hs:83},sr:{rs:84,hs:84},nr:{rs:85,hs:85},rr:{rs:86,hs:86},hr:{rs:87,hs:87},lr:{rs:88,hs:88},or:{rs:89,hs:89},ar:{rs:90,hs:90}},U=['Tab','F1','F2','F3','F4','F5','F6','F7','F8','F9','F10','ArrowLeft','ArrowRight','ArrowUp','ArrowDown'];class P{static cr=!1;static fr=null;static ur=null;static dr=0;static wr=0;static yr=0;static mr=0;static pr=0;static Ar=()=>{this.fr=v.Oe(1),this.ur=null,this.dr=Date.now(),this.cr=!0};static Ir=()=>{this.cr=!1,this.fr=null};static gr=()=>{let t=null;return this.ur&&this.cr&&(t=this.ur),this.ur=null,t};static _r=()=>{let t=null;return this.fr&&this.fr.Ee>0&&this.cr&&(t=this.fr),this.Ir(),t};static Cr=(t,e,i)=>{if(!(this.cr&&t>=0&&t<789&&e>=0&&e<532))return;this.wr++;const s=Date.now();let n=(s-this.dr)/10|0;n>250&&(n=250),this.dr=s,this.br(5),1===i?this.fr?.Ve(1):this.fr?.Ve(2),this.fr?.Ve(n),this.fr?.ze(t+(e<<10))};static Tr=t=>{if(!this.cr)return;this.wr++;const e=Date.now();let i=(e-this.dr)/10|0;i>250&&(i=250),this.dr=e,this.br(2),1===t?this.fr?.Ve(3):this.fr?.Ve(4),this.fr?.Ve(i)};static Er=(t,e)=>{if(!(this.cr&&t>=0&&t<789&&e>=0&&e<532))return;const i=Date.now();if(i-this.yr>=50){this.yr=i,this.wr++;let s=(i-this.dr)/10|0;s>250&&(s=250),this.dr=i,t-this.mr<8&&t-this.mr>=-8&&e-this.pr<8&&e-this.pr>=-8?(this.br(3),this.fr?.Ve(5),this.fr?.Ve(s),this.fr?.Ve(t+(e-this.pr+8<<4)+8-this.mr)):t-this.mr<128&&t-this.mr>=-128&&e-this.pr<128&&e-this.pr>=-128?(this.br(4),this.fr?.Ve(6),this.fr?.Ve(s),this.fr?.Ve(t+128-this.mr),this.fr?.Ve(e+128-this.pr)):(this.br(5),this.fr?.Ve(7),this.fr?.Ve(s),this.fr?.ze(t+(e<<10))),this.mr=t,this.pr=e}};static vr=t=>{if(!this.cr)return;this.wr++;const e=Date.now();let i=(e-this.dr)/10|0;i>250&&(i=250),this.dr=e,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.br(3),this.fr?.Ve(8),this.fr?.Ve(i),this.fr?.Ve(t)};static Lr=t=>{if(!this.cr)return;this.wr++;const e=Date.now();let i=(e-this.dr)/10|0;i>250&&(i=250),this.dr=e,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.br(3),this.fr?.Ve(9),this.fr?.Ve(i),this.fr?.Ve(t)};static Sr=()=>{if(!this.cr)return;this.wr++;const t=Date.now();let e=(t-this.dr)/10|0;e>250&&(e=250),this.dr=t,this.br(2),this.fr?.Ve(10),this.fr?.Ve(e)};static Or=()=>{if(!this.cr)return;this.wr++;const t=Date.now();let e=(t-this.dr)/10|0;e>250&&(e=250),this.dr=t,this.br(2),this.fr?.Ve(11),this.fr?.Ve(e)};static kr=()=>{if(!this.cr)return;this.wr++;const t=Date.now();let e=(t-this.dr)/10|0;e>250&&(e=250),this.dr=t,this.br(2),this.fr?.Ve(12),this.fr?.Ve(e)};static Rr=()=>{if(!this.cr)return;this.wr++;const t=Date.now();let e=(t-this.dr)/10|0;e>250&&(e=250),this.dr=t,this.br(2),this.fr?.Ve(13),this.fr?.Ve(e)};static br=t=>{if(this.fr&&this.fr.Ee+t>=500){const t=this.fr;this.fr=v.Oe(1),this.ur=t}}}class B{static xr(t){return new URLSearchParams(window.location.search).z(t)??''}static Mr(t,e){const i=new URL(window.location.Xi());i.Fr.Z(t,e),window.Dr.pushState(null,'',i.Xi())}Nr=0;Ur=[];Pr=0;Br=null;ct=0;Wr=20;Gr=1;Hr=[];Yr=0;Vr=0;Xr=[];jr=!0;zr=!1;Zr=0;qr=0;Kr=0;Jr=0;$r=0;Qr=0;th=0;eh=[];ih=[];sh=0;nh=0;At(t=!1){A.rh='black',A.qt(0,0,p.te,p.ee),this.zr=t,this.zr?this.hh(window.innerWidth,window.innerHeight):this.hh(p.te,p.ee)}get te(){return p.te}get ee(){return p.ee}hh(t,e){p.te=t,p.ee=e,this.Br=new C(t,e),D.Gi()}async lh(){window.addEventListener('resize',(()=>{this.zr&&this.hh(window.innerWidth,window.innerHeight)}),!1),window.addEventListener('keydown',this.vr),window.addEventListener('keyup',this.Lr),window.addEventListener('mousedown',this.Cr),window.addEventListener('mouseup',this.Tr),window.addEventListener('mouseenter',this.kr),window.addEventListener('mouseleave',this.Rr),window.addEventListener('mousemove',this.Er),window.addEventListener('focusin',this.Sr),window.addEventListener('focusout',this.Or),window.addEventListener('beforeunload',this.Wi),p.oh=t=>{t.ah()},await this.ch(0,'Loading...'),await this.ft();for(let t=0;t<10;t++)this.Hr[t]=Date.now();let t,e=0,i=256,s=1,n=0;for(;this.ct>=0;){if(this.ct>0&&(this.ct--,0===this.ct))return void this.fh();const r=i,h=s;i=300,s=1,t=Date.now();const l=this.Hr[e];if(0===l?(i=r,s=h):t>l&&(i=2560*this.Wr/(t-l)|0),i<25?i=25:i>256&&(i=256,s=this.Wr-(t-l)/10|0),this.Hr[e]=t,e=(e+1)%10,s>1)for(let t=0;t<10;t++)0!==this.Hr[t]&&(this.Hr[t]+=s);for(s<this.Gr&&(s=this.Gr),await b(s);n<256;)await this.uh(),this.$r=0,this.sh=this.nh,n+=i;n&=255,this.Wr>0&&(this.Yr=1e3*i/(256*this.Wr)|0);const o=performance.now();this.jr&&this.dh(),await this.re(),this.Xr[this.Vr]=(performance.now()-o)/1e3,this.Vr=(this.Vr+1)%this.Xr.it}-1===this.ct&&this.fh()}fh(){this.ct=-2,this.Wi()}wh(t){this.Wr=1e3/t|0}yh(){this.ct>=0&&(this.ct=0)}_r(){this.ct>=0&&(this.ct=4e3/this.Wr|0)}mh(){this.ct=-1}async ft(){}async uh(){}Wi(){}async re(){}dh(){}async ch(t,e){const i=this.te,s=this.ee;this.jr&&(A.rh='black',A.qt(0,0,i,s),this.jr=!1);const n=s/2-18;A.rh='rgb(140, 17, 17)',A.ph((i/2|0)-152,n,304,34),A.qt((i/2|0)-150,n+2,3*t,30),A.rh='black',A.qt((i/2|0)-150+3*t,n+2,300-3*t,30),A.Ah='bold 13px helvetica, sans-serif',A.Ih='center',A.rh='white',A.gh(e,i/2|0,n+22),await b(5)}vr=t=>{const e=t.rs;U._h(e)&&t.ah(),this.Zr=0;const i=N[e];if(!i)return void console.Ch(`Unhandled key ${e}`);const s=i.rs;let n=i.hs;n<30&&(n=0),37===s?n=1:39===s?n=2:38===s?n=3:40===s?n=4:17===s?n=5:8===s||127===s?n=8:9===s?n=9:10===s?n=10:s>=112&&s<=123?n=s+1008-112:36===s?n=1e3:35===s?n=1001:33===s?n=1002:34===s&&(n=1003),n>0&&n<128&&(this.eh[n]=1),n>4&&(this.ih[this.nh]=n,this.nh=this.nh+1&127),P.cr&&P.vr(n)};Lr=t=>{const e=t.rs;U._h(e)&&t.ah(),this.Zr=0;const i=N[e];if(!i)return void console.Ch(`Unhandled key ${e}`);const s=i.rs;let n=i.hs;n<30&&(n=0),37===s?n=1:39===s?n=2:38===s?n=3:40===s?n=4:17===s?n=5:8===s||127===s?n=8:9===s?n=9:10===s?n=10:s>=112&&s<=123?n=s+1008-112:36===s?n=1e3:35===s?n=1001:33===s?n=1002:34===s&&(n=1003),n>0&&n<128&&(this.eh[n]=0),P.cr&&P.Lr(n)};bh(){let t=-1;return this.nh!==this.sh&&(t=this.ih[this.sh],this.sh=this.sh+1&127),t}Cr=t=>{let e=t.Dn,i=t.Nn;const{Ft:s,Nt:n}=this.Th;e-=n,i-=s;const r=p.Eh();e*=p.te/r.te,i*=p.ee/r.ee,e|=0,i|=0,this.Zr=0,this.Qr=e,this.th=i,2===t.vh?(this.$r=2,this.qr=2):1===t.vh&&(this.$r=1,this.qr=1),P.cr};Tr=t=>{this.Zr=0,this.qr=0,P.cr};kr=t=>{P.cr&&P.kr()};Rr=t=>{P.cr&&P.Rr()};Er=t=>{let e=t.Dn,i=t.Nn;const{Ft:s,Nt:n}=this.Th;e-=n,i-=s;const r=p.Eh();e*=p.te/r.te,i*=p.ee/r.ee,e|=0,i|=0,this.Zr=0,this.Kr=e,this.Jr=i,P.cr&&P.Er(e,i)};Sr=t=>{this.jr=!0,this.dh(),P.cr&&P.Sr()};Or=t=>{P.cr&&P.Or()};get Lh(){const t=this.Xr.it;let e=0;for(let i=0;i<t;i++)e+=this.Xr[i];const i=e/t;return i>this.Nr&&(this.Nr=i),this.Ur[this.Pr]=i,this.Pr=(this.Pr+1)%250,i}get Sh(){return this.Ur.Oh(((t,e)=>t+e),0)/250}get Th(){const t=p.Eh(),e=window.getComputedStyle(p),i=parseFloat(e.kh||'0'),s=parseFloat(e.Rh||'0'),n=parseFloat(e.xh||'0'),r=parseFloat(e.Mh||'0'),h=t.Nt+n+i;return{Ft:t.Ft+r+s,Nt:h}}}class W{Fh;At(t){t.Dh=this.Dh,t.Nh=this.Nh,this.Fh=t}static Uh=async()=>await new Promise(((t,e)=>{const i=indexedDB.Ph('lostcity',1);i.Bh=e=>{const i=e.Wh;console.log('database success!'),t(i.Gh)},i.Hh=t=>{t.Wh.Gh.Yh('cache')},i.Dh=t=>{const i=t.Wh;console.Ch('database error!: ',i.Ch),e(i.Gh)}}));Vh=async t=>await new Promise((e=>{const i=this.Fh.jh('cache','readonly').Xh('cache').z(t);i.Bh=()=>{e(i.Gh)},i.Dh=t=>{e(void 0)}}));zh=async(t,e)=>await new Promise(((i,s)=>{const n=this.Fh.jh('cache','readwrite').Xh('cache').Zh(e,t);n.Bh=()=>{i()},n.Dh=t=>{s()}}));Nh=t=>{console.log('database close!')};Dh=t=>{console.log('database error!')};qh=t=>{const e=t.Kh();let i=0;for(let t=0;t<e.it&&t<12;t++){const s=e.Jh(t);i*=37,s>='A'&&s<='Z'?i+=s.$e(0)+1-65:s>='a'&&s<='z'?i+=s.$e(0)+1-97:s>='0'&&s<='9'&&(i+=s.$e(0)+27-48)}return i}}class G{static qh=t=>{let e=0;t=t.$h();for(let i=0;i<t.it;i++)e=61*e+t.$e(i)-32|0;return e};Q;Qh;tl;el;il;sl;nl;rl=[];At(t){t instanceof Uint8Array&&(t=new Int8Array(t));let i=new v(new Uint8Array(t));const s=i.De,n=i.De;s===n?(this.Q=t,this.Qh=!1):(this.Q=e.j(s,t,n,6),i=new v(new Uint8Array(this.Q)),this.Qh=!0),this.tl=i.Me,this.el=[],this.il=[],this.sl=[],this.nl=[];let r=i.Ee+10*this.tl;for(let t=0;t<this.tl;t++)this.el.hl(i.Ne),this.il.hl(i.De),this.sl.hl(i.De),this.nl.hl(r),r+=this.sl[t]}j=t=>{const e=G.qh(t),i=this.el.ll(e);return-1===i?null:this.ol(i)};ol=t=>{if(t<0||t>=this.tl)return null;if(this.rl[t])return this.rl[t];const i=this.nl[t],s=i+this.sl[t];if(this.Qh){const e=Uint8Array.from(this.Q.tt(i,i+s));return this.rl[t]=e,e}{const i=Uint8Array.from(e.j(this.il[t],this.Q,this.sl[t],this.nl[t]));return this.rl[t]=i,i}}}class H{static al=new Uint8Array(520);cl;fl;ul;At(t,e,i){this.cl=new v(t),this.fl=new v(e),this.ul=i+1}get tl(){return this.fl.it/6}j(t,e=!1){this.fl.Ee=6*t;const i=this.fl.De;let s=this.fl.De;if(s<=0||s>this.cl.it/520)return null;const n=new Uint8Array(i);let r=0;for(let e=0;r<i;e++){if(0===s)return null;this.cl.Ee=520*s;let h=i-r;h>512&&(h=512),this.cl.Ge(h+8,0,H.al);const l=(255&H.al[0])<<8|255&H.al[1],o=(255&H.al[2])<<8|255&H.al[3],a=(255&H.al[4])<<16|(255&H.al[5])<<8|255&H.al[6],c=255&H.al[7];if(l!==t||o!==e||c!==this.ul)return null;if(a<0||a>this.cl.it/520)return null;for(let t=0;t<h;t++)n[r++]=H.al[t+8];s=a}return e?n:1===this.ul?new G(n):function(t,e){d(h);const i=u(h,t,e),s=h.dl(i,a)>>>0;if(h._t(i,a),4294967295===s){const t=h.wl(),e=h.yl(),i=new Uint8Array(h.l.Q,t,e),s=(new TextDecoder).ml(i);throw new o(s)}const n=h.Q()>>>0;return new Uint8Array(h.l.Q,n,s)}(n)}}class Y{static pl=[];static Al=t=>{const e=new v(t.j('base_head.dat')),i=new v(t.j('base_type.dat')),s=new v(t.j('base_label.dat')),n=e.Me;e.Ee+=2;for(let t=0;t<n;t++){const t=e.Me,n=e.Re,r=new Uint8Array(n),h=new S(n,null);for(let t=0;t<n;t++){r[t]=i.Re;const e=s.Re,n=new Uint8Array(e);for(let t=0;t<e;t++)n[t]=s.Re;h[t]=n}this.pl[t]=new Y,this.pl[t].it=n,this.pl[t].Il=r,this.pl[t].gl=h}};it=0;Il=null;gl=null}class V{static pl=[];static Al=t=>{const e=new v(t.j('frame_head.dat')),i=new v(t.j('frame_tran1.dat')),s=new v(t.j('frame_tran2.dat')),n=new v(t.j('frame_del.dat')),r=e.Me;e.Ee+=2;const h=new Int32Array(500),l=new Int32Array(500),o=new Int32Array(500),a=new Int32Array(500);for(let t=0;t<r;t++){const t=e.Me,r=this.pl[t]=new V;r._l=n.Re;const c=e.Me,f=Y.pl[c];r.Y=f;const u=e.Re;let d=-1,w=0;for(let t=0;t<u;t++){if(!f.Il)throw new Error('SeqBase not loaded!!!');const e=i.Re;if(e>0){if(0!==f.Il[t])for(let e=t-1;e>d;e--)if(0===f.Il[e]){h[w]=e,l[w]=0,o[w]=0,a[w]=0,w++;break}h[w]=t;let i=0;3===f.Il[h[w]]&&(i=128),l[w]=0==(1&e)?i:s.Pe,o[w]=0==(2&e)?i:s.Pe,a[w]=0==(4&e)?i:s.Pe,d=t,w++}}r.it=w,r.Cl=new Int32Array(w),r.Dn=new Int32Array(w),r.Nn=new Int32Array(w),r.Un=new Int32Array(w);for(let t=0;t<w;t++)r.Cl[t]=h[t],r.Dn[t]=l[t],r.Nn[t]=o[t],r.Un[t]=a[t]}};_l=0;Y=null;it=0;Cl=null;Dn=null;Nn=null;Un=null}class X{bl=0;Tl=0;El=0;vl=-1;Ll=-1;Sl=-1;Ol=-1;kl=-1;Rl=-1;xl=-1;Ml=-1;Fl=-1;Dl=0;Nl=-1;Ul=-1;Pl=-1;le=null}class j{Dn=0;Nn=0;Un=0;Fn=0}class z extends y{static Bl=null;static oe=null;static Wl=null;static Gl=null;static Hl=null;static Yl=null;static Vl=null;static Xl=null;static jl=null;static zl=null;static Zl=null;static ql=null;static Kl=null;static Jl=null;static $l=null;static Ql=new S(4096,!1);static to=new S(4096,!1);static eo=new Int32Array(4096);static io=new Int32Array(4096);static so=new Int32Array(4096);static no=new Int32Array(4096);static ro=new Int32Array(4096);static ho=new Int32Array(4096);static lo=new Int32Array(1500);static oo=new M(1500,512);static ao=new Int32Array(12);static co=new M(12,2e3);static fo=new Int32Array(2e3);static uo=new Int32Array(2e3);static do=new Int32Array(12);static wo=new Int32Array(10);static yo=new Int32Array(10);static mo=new Int32Array(10);static po=0;static Ao=0;static Io=0;static go=!1;static Kr=0;static Jr=0;static _o=0;static Co=new Int32Array(1e3);static bo=!1;static Al(t){try{z.oe=new v(t.j('ob_head.dat')),z.Wl=new v(t.j('ob_face1.dat')),z.Gl=new v(t.j('ob_face2.dat')),z.Hl=new v(t.j('ob_face3.dat')),z.Yl=new v(t.j('ob_face4.dat')),z.Vl=new v(t.j('ob_face5.dat')),z.Xl=new v(t.j('ob_point1.dat')),z.jl=new v(t.j('ob_point2.dat')),z.zl=new v(t.j('ob_point3.dat')),z.Zl=new v(t.j('ob_point4.dat')),z.ql=new v(t.j('ob_point5.dat')),z.Kl=new v(t.j('ob_vertex1.dat')),z.Jl=new v(t.j('ob_vertex2.dat')),z.$l=new v(t.j('ob_axis.dat')),z.oe.Ee=0,z.Xl.Ee=0,z.jl.Ee=0,z.zl.Ee=0,z.Zl.Ee=0,z.Kl.Ee=0,z.Jl.Ee=0;const e=z.oe.Me;z.Bl=new S(e+100,null);let i=0,s=0,n=0,r=0,h=0,l=0,o=0;for(let t=0;t<e;t++){const t=z.oe.Me,e=new X;e.bl=z.oe.Me,e.Tl=z.oe.Me,e.El=z.oe.Re,e.vl=z.Xl.Ee,e.Ll=z.jl.Ee,e.Sl=z.zl.Ee,e.Ol=z.Zl.Ee,e.Rl=z.Kl.Ee,e.xl=z.Jl.Ee;const a=z.oe.Re,c=z.oe.Re,f=z.oe.Re,u=z.oe.Re,d=z.oe.Re;for(let t=0;t<e.bl;t++){const t=z.Xl.Re;0!=(1&t)&&z.jl.Pe,0!=(2&t)&&z.zl.Pe,0!=(4&t)&&z.Zl.Pe}for(let t=0;t<e.Tl;t++){1===z.Jl.Re&&(z.Kl.Pe,z.Kl.Pe),z.Kl.Pe}e.Ml=n,n+=2*e.Tl,1===a&&(e.Fl=r,r+=e.Tl),255===c?(e.Dl=h,h+=e.Tl):e.Dl=-c-1,1===f&&(e.Nl=l,l+=e.Tl),1===u&&(e.Ul=o,o+=e.Tl),1===d&&(e.kl=s,s+=e.bl),e.Pl=i,i+=e.El,z.Bl[t]=e}}catch(t){console.log('Error loading model index'),console.Ch(t)}}static To(t,e){if(null===z.Bl&&(z.Bl=[]),null===t){const t=new X;return t.bl=0,t.Tl=0,t.El=0,void(z.Bl[e]=t)}const i=new v(t);i.Ee=i.it-18;const s=new X;s.le=t,s.bl=i.Me,s.Tl=i.Me,s.El=i.Re,z.Bl[e]=s;const n=i.Re,r=i.Re,h=i.Re,l=i.Re,o=i.Re,a=i.Me,c=i.Me,f=i.Me,u=i.Me;let d=0;s.vl=d,d+=s.bl,s.xl=d,d+=s.Tl,s.Dl=d,255===r?d+=s.Tl:s.Dl=-r-1,s.Ul=d,1===l?d+=s.Tl:s.Ul=-1,s.Fl=d,1===n?d+=s.Tl:s.Fl=-1,s.kl=d,1===o?d+=s.bl:s.kl=-1,s.Nl=d,1===h?d+=s.Tl:s.Nl=-1,s.Rl=d,d+=u,s.Ml=d,d+=2*s.Tl,s.Pl=d,d+=6*s.El,s.Ll=d,d+=a,s.Sl=d,d+=c,s.Ol=d,d+=f}static Wi(){z.Bl=null,z.oe=null,z.Wl=null,z.Gl=null,z.Hl=null,z.Yl=null,z.Vl=null,z.Xl=null,z.jl=null,z.zl=null,z.Zl=null,z.ql=null,z.Kl=null,z.Jl=null,z.$l=null,z.Ql=null,z.to=null,z.eo=null,z.io=null,z.so=null,z.no=null,z.ro=null,z.ho=null,z.lo=null,z.oo=null,z.ao=null,z.co=null,z.fo=null,z.uo=null,z.do=null}static Eo(t,e,i){return 2==(2&i)?(e<0?e=0:e>127&&(e=127),127-e):((e=e*(127&t)>>7)<2?e=2:e>126&&(e=126),(65408&t)+e)}static vo=(t,e,i)=>{const s=t.bl,n=t.Tl,r=t.El;let h,l,o,a,c;if(e){h=new Int32Array(s);for(let e=0;e<s;e++)h[e]=t.Lo[e]}else h=t.Lo;let f=null,u=null;if(i){l=new Int32Array(n),o=new Int32Array(n),a=new Int32Array(n);for(let e=0;e<n;e++)t.So&&(l[e]=t.So[e]),t.Oo&&(o[e]=t.Oo[e]),t.ko&&(a[e]=t.ko[e]);if(c=new Int32Array(n),t.Ro)for(let e=0;e<n;e++)c[e]=t.Ro[e];else for(let t=0;t<n;t++)c[t]=0;f=new S(s,null);for(let e=0;e<s;e++){const i=f[e]=new j;if(t.xo){const s=t.xo[e];s&&(i.Dn=s.Dn,i.Nn=s.Nn,i.Un=s.Un,i.Fn=s.Fn)}}u=t.Mo}else l=t.So,o=t.Oo,a=t.ko,c=t.Ro;return new z({bl:s,Fo:t.Fo,Lo:h,Do:t.Do,Tl:n,No:t.No,Uo:t.Uo,Po:t.Po,So:l,Oo:o,ko:a,Ro:c,Bo:t.Bo,Wo:t.Wo,Go:t.Go,Ho:t.Ho,El:r,Yo:t.Yo,Vo:t.Vo,Xo:t.Xo,jo:t.jo,zo:t.zo,Zo:t.Zo,qo:t.qo,Ko:t.Ko,Jo:t.Jo,$o:t.$o,Qo:t.Qo,ta:t.ta,xo:f,Mo:u})};static ea=(t,e,i,s)=>{const n=t.bl,r=t.Tl,h=t.El;let l,o,a,c,f;if(s)l=t.Fo,o=t.Lo,a=t.Do;else{l=new Int32Array(n),o=new Int32Array(n),a=new Int32Array(n);for(let e=0;e<n;e++)l[e]=t.Fo[e],o[e]=t.Lo[e],a[e]=t.Do[e]}if(e)c=t.Go;else{c=new Int32Array(r);for(let e=0;e<r;e++)t.Go&&(c[e]=t.Go[e])}if(i)f=t.Wo;else if(f=new Int32Array(r),t.Wo)for(let e=0;e<r;e++)f[e]=t.Wo[e];else for(let t=0;t<r;t++)f[t]=0;return new z({bl:n,Fo:l,Lo:o,Do:a,Tl:r,No:t.No,Uo:t.Uo,Po:t.Po,So:null,Oo:null,ko:null,Ro:t.Ro,Bo:t.Bo,Wo:f,Go:c,Ho:t.Ho,El:h,Yo:t.Yo,Vo:t.Vo,Xo:t.Xo,ia:t.ia,sa:t.sa})};static na=(t,e)=>{const i=t.bl,s=t.Tl,n=t.El,r=new Int32Array(i),h=new Int32Array(i),l=new Int32Array(i);for(let e=0;e<i;e++)r[e]=t.Fo[e],h[e]=t.Lo[e],l[e]=t.Do[e];let o;if(e)o=t.Wo;else if(o=new Int32Array(s),t.Wo)for(let e=0;e<s;e++)o[e]=t.Wo[e];else for(let t=0;t<s;t++)o[t]=0;return new z({bl:i,Fo:r,Lo:h,Do:l,Tl:s,No:t.No,Uo:t.Uo,Po:t.Po,So:t.So,Oo:t.Oo,ko:t.ko,Ro:t.Ro,Bo:t.Bo,Wo:o,Go:t.Go,Ho:t.Ho,El:n,Yo:t.Yo,Vo:t.Vo,Xo:t.Xo,ra:t.ra,ha:t.ha})};static la=(t,e)=>{let i=!1,s=!1,n=!1,r=!1,h=0,l=0,o=0,a=-1;for(let c=0;c<e;c++){const e=t[c];e&&(h+=e.bl,l+=e.Tl,o+=e.El,i||=null!==e.Ro,e.Bo?s=!0:(-1===a&&(a=e.Ho),a!==e.Ho&&(s=!0)),n||=null!==e.Wo,r||=null!==e.Go)}const c=new Int32Array(h),f=new Int32Array(h),u=new Int32Array(h),d=new Int32Array(l),w=new Int32Array(l),y=new Int32Array(l),m=new Int32Array(l),p=new Int32Array(l),A=new Int32Array(l),I=new Int32Array(o),g=new Int32Array(o),_=new Int32Array(o);let C=null;i&&(C=new Int32Array(l));let b=null;s&&(b=new Int32Array(l));let T=null;n&&(T=new Int32Array(l));let E=null;r&&(E=new Int32Array(l)),h=0,l=0,o=0;for(let a=0;a<e;a++){const e=t[a];if(e){const t=h;for(let t=0;t<e.bl;t++)c[h]=e.Fo[t],f[h]=e.Lo[t],u[h]=e.Do[t],h++;for(let h=0;h<e.Tl;h++)d[l]=e.No[h]+t,w[l]=e.Uo[h]+t,y[l]=e.Po[h]+t,e.So&&(m[l]=e.So[h]),e.Oo&&(p[l]=e.Oo[h]),e.ko&&(A[l]=e.ko[h]),i&&(e.Ro?C&&(C[l]=e.Ro[h]):C&&(C[l]=0)),s&&(e.Bo?b&&(b[l]=e.Bo[h]):b&&(b[l]=e.Ho)),n&&(e.Wo?T&&(T[l]=e.Wo[h]):T&&(T[l]=0)),r&&e.Go&&E&&(E[l]=e.Go[h]),l++;for(let i=0;i<e.El;i++)I[o]=e.Yo[i]+t,g[o]=e.Vo[i]+t,_[o]=e.Xo[i]+t,o++}}const v=new z({bl:h,Fo:c,Lo:f,Do:u,Tl:l,No:d,Uo:w,Po:y,So:m,Oo:p,ko:A,Ro:C,Bo:b,Wo:T,Go:E,Ho:a,El:o,Yo:I,Vo:g,Xo:_});return v.oa(),v};static aa=(t,e)=>{let i=!1,s=!1,n=!1,r=!1,h=0,l=0,o=0,a=-1;for(let c=0;c<e;c++){const e=t[c];e&&(h+=e.bl,l+=e.Tl,o+=e.El,i||=null!==e.Ro,e.Bo?s=!0:(-1===a&&(a=e.Ho),a!==e.Ho&&(s=!0)),n||=null!==e.Wo,r||=null!==e.sa)}const c=new Int32Array(h),f=new Int32Array(h),u=new Int32Array(h),d=new Int32Array(h),w=new Int32Array(l),y=new Int32Array(l),m=new Int32Array(l),p=new Int32Array(o),A=new Int32Array(o),I=new Int32Array(o);let g=null;i&&(g=new Int32Array(l));let _=null;s&&(_=new Int32Array(l));let C=null;n&&(C=new Int32Array(l));let b=null;r&&(b=new Int32Array(l));const T=new Int32Array(l);h=0,l=0,o=0;const E=(t,e,i,s,n,r,h)=>{let l=-1;const o=t.Fo[e],a=t.Lo[e],c=t.Do[e];for(let t=0;t<h;t++)if(o===i[t]&&a===s[t]&&c===n[t]){l=t;break}return-1===l&&(i[h]=o,s[h]=a,n[h]=c,r&&t.ia&&(r[h]=t.ia[e]),l=h++),{ca:l,bl:h}};for(let a=0;a<e;a++){const e=t[a];if(e){for(let t=0;t<e.Tl;t++){i&&(e.Ro?g&&(g[l]=e.Ro[t]):g&&(g[l]=0)),s&&(e.Bo?_&&(_[l]=e.Bo[t]):_&&(_[l]=e.Ho)),n&&(e.Wo?C&&(C[l]=e.Wo[t]):C&&(C[l]=0)),r&&e.sa&&b&&(b[l]=e.sa[t]),e.Go&&(T[l]=e.Go[t]);const o=E(e,e.No[t],c,f,u,d,h);h=o.bl;const a=E(e,e.Uo[t],c,f,u,d,h);h=a.bl;const p=E(e,e.Po[t],c,f,u,d,h);h=p.bl,w[l]=o.ca,y[l]=a.ca,m[l]=p.ca,l++}for(let t=0;t<e.El;t++){const i=E(e,e.Yo[t],c,f,u,d,h);h=i.bl;const s=E(e,e.Vo[t],c,f,u,d,h);h=s.bl;const n=E(e,e.Xo[t],c,f,u,d,h);h=n.bl,p[o]=i.ca,A[o]=s.ca,I[o]=n.ca,o++}}}return new z({bl:h,Fo:c,Lo:f,Do:u,Tl:l,No:w,Uo:y,Po:m,So:null,Oo:null,ko:null,Ro:g,Bo:_,Wo:C,Go:T,Ho:a,El:o,Yo:p,Vo:A,Xo:I,ia:d,sa:b})};static fa=t=>{if(!z.Bl)throw new Error('cant loading model metadata!!!!!');const e=z.Bl[t];if(!e)throw console.log(`Error model:${t} not found!`),new Error('cant loading model metadata!!!!!');if(!(z.oe&&z.Wl&&z.Gl&&z.Hl&&z.Yl&&z.Vl&&z.Xl&&z.jl&&z.zl&&z.Zl&&z.ql&&z.Kl&&z.Jl&&z.$l))throw new Error('cant loading model!!!!!');const i=e.bl,s=e.Tl,n=e.El,r=new Int32Array(i),h=new Int32Array(i),l=new Int32Array(i),o=new Int32Array(s),a=new Int32Array(s),c=new Int32Array(s),f=new Int32Array(n),u=new Int32Array(n),d=new Int32Array(n);let w=null;e.kl>=0&&(w=new Int32Array(i));let y=null;e.Fl>=0&&(y=new Int32Array(s));let m=null,p=0;e.Dl>=0?m=new Int32Array(s):p=-e.Dl-1;let A=null;e.Nl>=0&&(A=new Int32Array(s));let I=null;e.Ul>=0&&(I=new Int32Array(s));const g=new Int32Array(s);z.Xl.Ee=e.vl,z.jl.Ee=e.Ll,z.zl.Ee=e.Sl,z.Zl.Ee=e.Ol,z.ql.Ee=e.kl;let _,C,b,T=0,E=0,v=0;for(let t=0;t<i;t++){const e=z.Xl.Re;_=0,0!=(1&e)&&(_=z.jl.Pe),C=0,0!=(2&e)&&(C=z.zl.Pe),b=0,0!=(4&e)&&(b=z.Zl.Pe),r[t]=T+_,h[t]=E+C,l[t]=v+b,T=r[t],E=h[t],v=l[t],w&&(w[t]=z.ql.Re)}z.Wl.Ee=e.Ml,z.Gl.Ee=e.Fl,z.Hl.Ee=e.Dl,z.Yl.Ee=e.Nl,z.Vl.Ee=e.Ul;for(let t=0;t<s;t++)g[t]=z.Wl.Me,y&&(y[t]=z.Gl.Re),m&&(m[t]=z.Hl.Re),A&&(A[t]=z.Yl.Re),I&&(I[t]=z.Vl.Re);z.Kl.Ee=e.Rl,z.Jl.Ee=e.xl,_=0,C=0,b=0;let L=0;for(let t=0;t<s;t++){const e=z.Jl.Re;if(1===e)_=z.Kl.Pe+L,L=_,C=z.Kl.Pe+L,L=C,b=z.Kl.Pe+L,L=b;else if(2===e)C=b,b=z.Kl.Pe+L,L=b;else if(3===e)_=b,b=z.Kl.Pe+L,L=b;else if(4===e){const t=_;_=C,C=t,b=z.Kl.Pe+L,L=b}o[t]=_,a[t]=C,c[t]=b}z.$l.Ee=6*e.Pl;for(let t=0;t<n;t++)f[t]=z.$l.Me,u[t]=z.$l.Me,d[t]=z.$l.Me;return new z({bl:i,Fo:r,Lo:h,Do:l,Tl:s,No:o,Uo:a,Po:c,So:null,Oo:null,ko:null,Ro:y,Bo:m,Wo:A,Go:g,Ho:p,El:n,Yo:f,Vo:u,Xo:d,ia:w,sa:I})};static ua=(t,e)=>{if(!z.Bl||!z.Bl[e])throw new Error('No model metadata');const i=z.Bl[e];if(i.le=t,!i.le.it)throw new Error('No model data');const s=i.bl,n=i.Tl,r=i.El,h=new Int32Array(s),l=new Int32Array(s),o=new Int32Array(s),a=new Int32Array(n),c=new Int32Array(n),f=new Int32Array(n),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(r);let y=null;i.kl>=0&&(y=new Int32Array(s));let m=null;i.Fl>=0&&(m=new Int32Array(n));let p=null,A=0;i.Dl>=0?p=new Int32Array(n):A=-i.Dl-1;let I=null;i.Nl>=0&&(I=new Int32Array(n));let g=null;i.Ul>=0&&(g=new Int32Array(n));const _=new Int32Array(n),C=new v(i.le);C.Ee=i.vl;const b=new v(i.le);b.Ee=i.Ll;const T=new v(i.le);T.Ee=i.Sl;const E=new v(i.le);E.Ee=i.Ol;const L=new v(i.le);L.Ee=i.kl;let S,O,k,R=0,x=0,M=0;for(let t=0;t<s;t++){const e=C.Re;S=0,0!=(1&e)&&(S=b.Pe),O=0,0!=(2&e)&&(O=T.Pe),k=0,0!=(4&e)&&(k=E.Pe),h[t]=R+S,l[t]=x+O,o[t]=M+k,R=h[t],x=l[t],M=o[t],y&&(y[t]=L.Re)}const F=new v(i.le);F.Ee=i.Ml;const D=new v(i.le);D.Ee=i.Fl;const N=new v(i.le);N.Ee=i.Dl;const U=new v(i.le);U.Ee=i.Nl;const P=new v(i.le);P.Ee=i.Ul;for(let t=0;t<n;t++)_[t]=F.Me,m&&(m[t]=D.Re),p&&(p[t]=N.Re),I&&(I[t]=U.Re),g&&(g[t]=P.Re);const B=new v(i.le);B.Ee=i.Rl;const W=new v(i.le);W.Ee=i.xl,S=0,O=0,k=0;let G=0;for(let t=0;t<n;t++){const e=W.Re;if(1===e)S=B.Pe+G,G=S,O=B.Pe+G,G=O,k=B.Pe+G,G=k;else if(2===e)O=k,k=B.Pe+G,G=k;else if(3===e)S=k,k=B.Pe+G,G=k;else if(4===e){const t=S;S=O,O=t,k=B.Pe+G,G=k}a[t]=S,c[t]=O,f[t]=k}const H=new v(i.le);H.Ee=6*i.Pl;for(let t=0;t<r;t++)u[t]=H.Me,d[t]=H.Me,w[t]=H.Me;return new z({bl:s,Fo:h,Lo:l,Do:o,Tl:n,No:a,Uo:c,Po:f,So:null,Oo:null,ko:null,Ro:m,Bo:p,Wo:I,Go:_,Ho:A,El:r,Yo:u,Vo:d,Xo:w,ia:y,sa:g})};bl;Fo;Lo;Do;Tl;No;Uo;Po;So;Oo;ko;Ro;Bo;Wo;Go;Ho;El;Yo;Vo;Xo;jo;zo;Zo;qo;Ko;Jo;$o;Qo;ta;ia;sa;ra;ha;xo;Mo;da=0;wa=!1;ya=-1;ma=-1;At(t){super(),this.bl=t.bl,this.Fo=t.Fo,this.Lo=t.Lo,this.Do=t.Do,this.Tl=t.Tl,this.No=t.No,this.Uo=t.Uo,this.Po=t.Po,this.So=t.So,this.Oo=t.Oo,this.ko=t.ko,this.Ro=t.Ro,this.Bo=t.Bo,this.Wo=t.Wo,this.Go=t.Go,this.Ho=t.Ho,this.El=t.El,this.Yo=t.Yo,this.Vo=t.Vo,this.Xo=t.Xo,this.jo=t.jo??0,this.zo=t.zo??0,this.Zo=t.Zo??0,this.qo=t.qo??0,this.Ko=t.Ko??0,this.Jo=t.Jo??0,this.$o=t.$o??0,this.Qo=t.Qo??0,this.ta=t.ta??0,this.ia=t.ia??null,this.sa=t.sa??null,this.ra=t.ra??null,this.ha=t.ha??null,this.xo=t.xo??null,this.Mo=t.Mo??null}oa=()=>{this.$o=0,this.Ko=0,this.Jo=0;for(let t=0;t<this.bl;t++){const e=this.Fo[t],i=this.Lo[t],s=this.Do[t];-i>this.$o&&(this.$o=-i),i>this.Jo&&(this.Jo=i);const n=e*e+s*s;n>this.Ko&&(this.Ko=n)}this.Ko=Math.sqrt(this.Ko)+.99|0,this.ta=Math.sqrt(this.Ko*this.Ko+this.$o*this.$o)+.99|0,this.Qo=this.ta+(Math.sqrt(this.Ko*this.Ko+this.Jo*this.Jo)+.99|0)};pa=()=>{this.$o=0,this.Jo=0;for(let t=0;t<this.bl;t++){const e=this.Lo[t];-e>this.$o&&(this.$o=-e),e>this.Jo&&(this.Jo=e)}this.ta=Math.sqrt(this.Ko*this.Ko+this.$o*this.$o)+.99|0,this.Qo=this.ta+(Math.sqrt(this.Ko*this.Ko+this.Jo*this.Jo)+.99|0)};Aa=()=>{if(this.ia){const t=new Int32Array(256);let e=0;for(let i=0;i<this.bl;i++){const s=this.ia[i];t[s]++,s>e&&(e=s)}this.ra=new S(e+1,null);for(let i=0;i<=e;i++)this.ra[i]=new Int32Array(t[i]),t[i]=0;let i=0;for(;i<this.bl;){const e=this.ia[i],s=this.ra[e];s&&(s[t[e]++]=i++)}this.ia=null}if(this.sa){const t=new Int32Array(256);let e=0;for(let i=0;i<this.Tl;i++){const s=this.sa[i];t[s]++,s>e&&(e=s)}this.ha=new S(e+1,null);for(let i=0;i<=e;i++)this.ha[i]=new Int32Array(t[i]),t[i]=0;let i=0;for(;i<this.Tl;){const e=this.sa[i],s=this.ha[e];s&&(s[t[e]++]=i++)}this.sa=null}};Ia=(t,e,i)=>{if(-1!==t)if(i&&-1!==e){const s=V.pl[t],n=V.pl[e],r=s.Y;z.po=0,z.Ao=0,z.Io=0;let h=0,l=i[h++];for(let t=0;t<s.it;t++){if(!s.Cl)continue;const e=s.Cl[t];for(;e>l;)l=i[h++];r&&r.Il&&s.Dn&&s.Nn&&s.Un&&r.gl&&(e!==l||0===r.Il[e])&&this.ga(s.Dn[t],s.Nn[t],s.Un[t],r.gl[e],r.Il[e])}z.po=0,z.Ao=0,z.Io=0,h=0,l=i[h++];for(let t=0;t<n.it;t++){if(!n.Cl)continue;const e=n.Cl[t];for(;e>l;)l=i[h++];r&&r.Il&&n.Dn&&n.Nn&&n.Un&&r.gl&&(e===l||0===r.Il[e])&&this.ga(n.Dn[t],n.Nn[t],n.Un[t],r.gl[e],r.Il[e])}}else this._a(t)};_a=t=>{if(!this.ra||-1===t||!V.pl[t])return;const e=V.pl[t],i=e.Y;z.po=0,z.Ao=0,z.Io=0;for(let t=0;t<e.it;t++){if(!(e.Cl&&e.Dn&&e.Nn&&e.Un&&i&&i.gl&&i.Il))continue;const s=e.Cl[t];this.ga(e.Dn[t],e.Nn[t],e.Un[t],i.gl[s],i.Il[s])}};Ca=()=>{for(let t=0;t<this.bl;t++){const e=this.Fo[t];this.Fo[t]=this.Do[t],this.Do[t]=-e}};ba=t=>{const e=D._i[t],i=D.Ci[t];for(let t=0;t<this.bl;t++){const s=this.Lo[t]*i-this.Do[t]*e>>16;this.Do[t]=this.Lo[t]*e+this.Do[t]*i>>16,this.Lo[t]=s}};yi=(t,e,i)=>{for(let s=0;s<this.bl;s++)this.Fo[s]+=e,this.Lo[s]+=t,this.Do[s]+=i};Ta=(t,e)=>{if(this.Go)for(let i=0;i<this.Tl;i++)this.Go[i]===t&&(this.Go[i]=e)};Ea=()=>{for(let t=0;t<this.bl;t++)this.Do[t]=-this.Do[t];for(let t=0;t<this.Tl;t++){const e=this.No[t];this.No[t]=this.Po[t],this.Po[t]=e}};va=(t,e,i)=>{for(let s=0;s<this.bl;s++)this.Fo[s]=this.Fo[s]*t/128|0,this.Lo[s]=this.Lo[s]*e/128|0,this.Do[s]=this.Do[s]*i/128|0};La=(t,e,i,s,n,r)=>{const h=e*(0|Math.sqrt(i*i+s*s+n*n))>>8;if(this.So&&this.Oo&&this.ko||(this.So=new Int32Array(this.Tl),this.Oo=new Int32Array(this.Tl),this.ko=new Int32Array(this.Tl)),!this.xo){this.xo=new S(this.bl,null);for(let t=0;t<this.bl;t++)this.xo[t]=new j}for(let e=0;e<this.Tl;e++){const r=this.No[e],l=this.Uo[e],o=this.Po[e],a=this.Fo[l]-this.Fo[r],c=this.Lo[l]-this.Lo[r],f=this.Do[l]-this.Do[r],u=this.Fo[o]-this.Fo[r],d=this.Lo[o]-this.Lo[r],w=this.Do[o]-this.Do[r];let y=c*w-d*f,m=f*u-w*a,p=a*d-u*c;for(;y>8192||m>8192||p>8192||y<-8192||m<-8192||p<-8192;)y>>=1,m>>=1,p>>=1;let A=0|Math.sqrt(y*y+m*m+p*p);if(A<=0&&(A=1),y=256*y/A|0,m=256*m/A|0,p=256*p/A|0,this.Ro&&0!=(1&this.Ro[e])){const r=t+((i*y+s*m+n*p)/(h+(h/2|0))|0);this.Go&&(this.So[e]=z.Eo(this.Go[e],r,this.Ro[e]))}else{let t=this.xo[r];t&&(t.Dn+=y,t.Nn+=m,t.Un+=p,t.Fn++),t=this.xo[l],t&&(t.Dn+=y,t.Nn+=m,t.Un+=p,t.Fn++),t=this.xo[o],t&&(t.Dn+=y,t.Nn+=m,t.Un+=p,t.Fn++)}}if(r)this.Sa(t,h,i,s,n);else{this.Mo=new S(this.bl,null);for(let t=0;t<this.bl;t++){const e=this.xo[t],i=new j;e&&(i.Dn=e.Dn,i.Nn=e.Nn,i.Un=e.Un,i.Fn=e.Fn),this.Mo[t]=i}}r?this.oa():this.Oa()};Sa=(t,e,i,s,n)=>{for(let r=0;r<this.Tl;r++){const h=this.No[r],l=this.Uo[r],o=this.Po[r];if(!this.Ro&&this.Go&&this.xo&&this.So&&this.Oo&&this.ko){const a=this.Go[r],c=this.xo[h];c&&(this.So[r]=z.Eo(a,t+((i*c.Dn+s*c.Nn+n*c.Un)/(e*c.Fn)|0),0));const f=this.xo[l];f&&(this.Oo[r]=z.Eo(a,t+((i*f.Dn+s*f.Nn+n*f.Un)/(e*f.Fn)|0),0));const u=this.xo[o];u&&(this.ko[r]=z.Eo(a,t+((i*u.Dn+s*u.Nn+n*u.Un)/(e*u.Fn)|0),0))}else if(this.Ro&&0==(1&this.Ro[r])&&this.Go&&this.xo&&this.So&&this.Oo&&this.ko){const a=this.Go[r],c=this.Ro[r],f=this.xo[h];f&&(this.So[r]=z.Eo(a,t+((i*f.Dn+s*f.Nn+n*f.Un)/(e*f.Fn)|0),c));const u=this.xo[l];u&&(this.Oo[r]=z.Eo(a,t+((i*u.Dn+s*u.Nn+n*u.Un)/(e*u.Fn)|0),c));const d=this.xo[o];d&&(this.ko[r]=z.Eo(a,t+((i*d.Dn+s*d.Nn+n*d.Un)/(e*d.Fn)|0),c))}}if(this.xo=null,this.Mo=null,this.ia=null,this.sa=null,this.Ro)for(let t=0;t<this.Tl;t++)if(2==(2&this.Ro[t]))return;this.Go=null};ka=(t,e,i,s,n,r,h)=>{const l=D._i[t],o=D.Ci[t],a=D._i[e],c=D.Ci[e],f=D._i[i],u=D.Ci[i],d=D._i[s],w=D.Ci[s],y=r*d+h*w>>16;for(let s=0;s<this.bl;s++){let m,p=this.Fo[s],A=this.Lo[s],I=this.Do[s];0!==i&&(m=A*f+p*u>>16,A=A*u-p*f>>16,p=m),0!==t&&(m=A*o-I*l>>16,I=A*l+I*o>>16,A=m),0!==e&&(m=I*a+p*c>>16,I=I*c-p*a>>16,p=m),p+=n,A+=r,I+=h,m=A*w-I*d>>16,I=A*d+I*w>>16,A=m,z.eo&&z.io&&z.so&&(z.so[s]=I-y,z.eo[s]=D.vi+((p<<9)/I|0),z.io[s]=D.Li+((A<<9)/I|0)),this.El>0&&z.no&&z.ro&&z.ho&&(z.no[s]=p,z.ro[s]=A,z.ho[s]=I)}try{this.Ra(!1,!1,0)}catch(t){}};re=(t,e,i,s,n,r,h,l,o)=>{const a=l*n-r*s>>16,c=h*e+a*i>>16,f=this.Ko*i>>16,u=c+f;if(u<=50||c>=3500)return;const d=l*s+r*n>>16;let w=d-this.Ko<<9;if((w/u|0)>=m.Bt)return;let y=d+this.Ko<<9;if((y/u|0)<=-m.Bt)return;const p=h*i-a*e>>16,A=this.Ko*e>>16;let I=p+A<<9;if((I/u|0)<=-m.Wt)return;let g=p-(A+(this.$o*i>>16))<<9;if((g/u|0)>=m.Wt)return;let _=c-(f+(this.$o*e>>16))<=50,C=!1;if(o>0&&z.go){let t=c-f;t<=50&&(t=50),d>0?(w=w/u|0,y=y/t|0):(y=y/u|0,w=w/t|0),p>0?(g=g/u|0,I=I/t|0):(I=I/u|0,g=g/t|0);const e=z.Kr-D.vi,i=z.Jr-D.Li;e>w&&e<y&&i>g&&i<I&&(this.wa?z.Co[z._o++]=o:C=!0)}const b=D.vi,T=D.Li;let E=0,v=0;0!==t&&(E=D._i[t],v=D.Ci[t]);for(let o=0;o<this.bl;o++){let a,f=this.Fo[o],u=this.Lo[o],d=this.Do[o];0!==t&&(a=d*E+f*v>>16,d=d*v-f*E>>16,f=a),f+=r,u+=h,d+=l,a=d*s+f*n>>16,d=d*n-f*s>>16,f=a,a=u*i-d*e>>16,d=u*e+d*i>>16,u=a,z.so&&(z.so[o]=d-c),d>=50&&z.eo&&z.io?(z.eo[o]=b+((f<<9)/d|0),z.io[o]=T+((u<<9)/d|0)):z.eo&&(z.eo[o]=-5e3,_=!0),(_||this.El>0)&&z.no&&z.ro&&z.ho&&(z.no[o]=f,z.ro[o]=u,z.ho[o]=d)}try{this.Ra(_,C,o)}catch(t){}};Ra=(t,e,i,s=!1)=>{z.bo&&(this.ya=-1,this.ma=-1);for(let t=0;t<this.Qo;t++)z.lo&&(z.lo[t]=0);for(let s=0;s<this.Tl;s++)if((!this.Ro||-1!==this.Ro[s])&&z.eo&&z.io&&z.so&&z.oo&&z.lo){const n=this.No[s],r=this.Uo[s],h=this.Po[s],l=z.eo[n],o=z.eo[r],a=z.eo[h],c=z.io[n],f=z.io[r],u=z.io[h],d=z.so[n],w=z.so[r],y=z.so[h];if(!t||-5e3!==l&&-5e3!==o&&-5e3!==a){e&&this.xa(z.Kr,z.Jr,c,f,u,l,o,a)&&(z.Co[z._o++]=i,e=!1);if((l-o)*(u-f)-(c-f)*(a-o)<=0)continue;if(z.to&&(z.to[s]=!1),z.Ql&&(z.Ql[s]=l<0||o<0||a<0||l>m.Pt||o>m.Pt||a>m.Pt),z.oo&&z.lo){const t=((d+w+y)/3|0)+this.ta;z.oo[t][z.lo[t]++]=s,z.bo&&this.xa(z.Kr,z.Jr,c,f,u,l,o,a)&&this.ma<t&&(this.ya=s,this.ma=t)}}else if(z.to&&(z.to[s]=!0),z.oo&&z.lo){const t=((d+w+y)/3|0)+this.ta;z.oo[t][z.lo[t]++]=s}}if(!this.Bo&&z.lo){for(let t=this.Qo-1;t>=0;t--){const e=z.lo[t];if(!(e<=0)&&z.oo){const i=z.oo[t];for(let t=0;t<e;t++)this.Ma(i[t],s)}}return}for(let t=0;t<12;t++)z.ao&&z.do&&(z.ao[t]=0,z.do[t]=0);if(z.lo)for(let t=this.Qo-1;t>=0;t--){const e=z.lo[t];if(e>0&&z.oo){const i=z.oo[t];for(let s=0;s<e;s++)if(this.Bo&&z.ao&&z.co){const e=i[s],n=this.Bo[e],r=z.ao[n]++;z.co[n][r]=e,n<10&&z.do?z.do[n]+=t:10===n&&z.fo?z.fo[r]=t:z.uo&&(z.uo[r]=t)}}}let n=0;z.ao&&z.do&&(z.ao[1]>0||z.ao[2]>0)&&(n=(z.do[1]+z.do[2])/(z.ao[1]+z.ao[2])|0);let r=0;z.ao&&z.do&&(z.ao[3]>0||z.ao[4]>0)&&(r=(z.do[3]+z.do[4])/(z.ao[3]+z.ao[4])|0);let h=0;if(z.ao&&z.do&&(z.ao[6]>0||z.ao[8]>0)&&(h=(z.do[6]+z.do[8])/(z.ao[6]+z.ao[8])|0),z.ao&&z.co){let t,e=0,i=z.ao[10],l=z.co[10],o=z.fo;e===i&&(e=0,i=z.ao[11],l=z.co[11],o=z.uo),t=e<i&&o?o[e]:-1e3;for(let a=0;a<10;a++){for(;0===a&&t>n;)this.Ma(l[e++],s),e===i&&l!==z.co[11]&&(e=0,i=z.ao[11],l=z.co[11],o=z.uo),t=e<i&&o?o[e]:-1e3;for(;3===a&&t>r;)this.Ma(l[e++],s),e===i&&l!==z.co[11]&&(e=0,i=z.ao[11],l=z.co[11],o=z.uo),t=e<i&&o?o[e]:-1e3;for(;5===a&&t>h;)this.Ma(l[e++],s),e===i&&l!==z.co[11]&&(e=0,i=z.ao[11],l=z.co[11],o=z.uo),t=e<i&&o?o[e]:-1e3;const c=z.ao[a],f=z.co[a];for(let t=0;t<c;t++)this.Ma(f[t],s)}for(;-1e3!==t;)this.Ma(l[e++],s),e===i&&l!==z.co[11]&&(e=0,l=z.co[11],i=z.ao[11],o=z.uo),t=e<i&&o?o[e]:-1e3}};Ma=(t,e=!1)=>{if(z.to&&z.to[t])return void this.Fa(t,e);const i=this.No[t],s=this.Uo[t],n=this.Po[t];let r;if(z.Ql&&(D.Oi=z.Ql[t]),this.Wo?D.ki=this.Wo[t]:D.ki=0,r=this.Ro?3&this.Ro[t]:0,e&&z.eo&&z.io&&this.So&&this.Oo&&this.ko)D.Zt(z.eo[i],z.io[i],z.eo[s],z.io[s],D.ci[this.So[t]]),D.Zt(z.eo[s],z.io[s],z.eo[n],z.io[n],D.ci[this.Oo[t]]),D.Zt(z.eo[n],z.io[n],z.eo[i],z.io[i],D.ci[this.ko[t]]);else if(0===r&&this.So&&this.Oo&&this.ko&&z.eo&&z.io)D.Ji(z.eo[i],z.eo[s],z.eo[n],z.io[i],z.io[s],z.io[n],this.So[t],this.Oo[t],this.ko[t]);else if(1===r&&this.So&&z.eo&&z.io)D.Qi(z.eo[i],z.eo[s],z.eo[n],z.io[i],z.io[s],z.io[n],D.ci[this.So[t]]);else if(2===r&&this.Ro&&this.Go&&this.So&&this.Oo&&this.ko&&z.eo&&z.io&&z.no&&z.ro&&z.ho){const e=this.Ro[t]>>2,r=this.Yo[e],h=this.Vo[e],l=this.Xo[e];D.es(z.eo[i],z.eo[s],z.eo[n],z.io[i],z.io[s],z.io[n],this.So[t],this.Oo[t],this.ko[t],z.no[r],z.ro[r],z.ho[r],z.no[h],z.no[l],z.ro[h],z.ro[l],z.ho[h],z.ho[l],this.Go[t])}else if(3===r&&this.Ro&&this.Go&&this.So&&z.eo&&z.io&&z.no&&z.ro&&z.ho){const e=this.Ro[t]>>2,r=this.Yo[e],h=this.Vo[e],l=this.Xo[e];D.es(z.eo[i],z.eo[s],z.eo[n],z.io[i],z.io[s],z.io[n],this.So[t],this.So[t],this.So[t],z.no[r],z.ro[r],z.ho[r],z.no[h],z.no[l],z.ro[h],z.ro[l],z.ho[h],z.ho[l],this.Go[t])}};Fa=(t,e=!1)=>{let i=0;if(z.ho){const e=D.vi,s=D.Li,n=this.No[t],r=this.Uo[t],h=this.Po[t],l=z.ho[n],o=z.ho[r],a=z.ho[h];if(l>=50&&z.eo&&z.io&&this.So)z.wo[i]=z.eo[n],z.yo[i]=z.io[n],z.mo[i++]=this.So[t];else if(z.no&&z.ro&&this.So){const c=z.no[n],f=z.ro[n],u=this.So[t];if(a>=50&&this.ko){const n=(50-l)*D.gi[a-l];z.wo[i]=e+((c+((z.no[h]-c)*n>>16)<<9)/50|0),z.yo[i]=s+((f+((z.ro[h]-f)*n>>16)<<9)/50|0),z.mo[i++]=u+((this.ko[t]-u)*n>>16)}if(o>=50&&this.Oo){const n=(50-l)*D.gi[o-l];z.wo[i]=e+((c+((z.no[r]-c)*n>>16)<<9)/50|0),z.yo[i]=s+((f+((z.ro[r]-f)*n>>16)<<9)/50|0),z.mo[i++]=u+((this.Oo[t]-u)*n>>16)}}if(o>=50&&z.eo&&z.io&&this.Oo)z.wo[i]=z.eo[r],z.yo[i]=z.io[r],z.mo[i++]=this.Oo[t];else if(z.no&&z.ro&&this.Oo){const c=z.no[r],f=z.ro[r],u=this.Oo[t];if(l>=50&&this.So){const r=(50-o)*D.gi[l-o];z.wo[i]=e+((c+((z.no[n]-c)*r>>16)<<9)/50|0),z.yo[i]=s+((f+((z.ro[n]-f)*r>>16)<<9)/50|0),z.mo[i++]=u+((this.So[t]-u)*r>>16)}if(a>=50&&this.ko){const n=(50-o)*D.gi[a-o];z.wo[i]=e+((c+((z.no[h]-c)*n>>16)<<9)/50|0),z.yo[i]=s+((f+((z.ro[h]-f)*n>>16)<<9)/50|0),z.mo[i++]=u+((this.ko[t]-u)*n>>16)}}if(a>=50&&z.eo&&z.io&&this.ko)z.wo[i]=z.eo[h],z.yo[i]=z.io[h],z.mo[i++]=this.ko[t];else if(z.no&&z.ro&&this.ko){const c=z.no[h],f=z.ro[h],u=this.ko[t];if(o>=50&&this.Oo){const n=(50-a)*D.gi[o-a];z.wo[i]=e+((c+((z.no[r]-c)*n>>16)<<9)/50|0),z.yo[i]=s+((f+((z.ro[r]-f)*n>>16)<<9)/50|0),z.mo[i++]=u+((this.Oo[t]-u)*n>>16)}if(l>=50&&this.So){const r=(50-a)*D.gi[l-a];z.wo[i]=e+((c+((z.no[n]-c)*r>>16)<<9)/50|0),z.yo[i]=s+((f+((z.ro[n]-f)*r>>16)<<9)/50|0),z.mo[i++]=u+((this.So[t]-u)*r>>16)}}}const s=z.wo[0],n=z.wo[1],r=z.wo[2],h=z.yo[0],l=z.yo[1],o=z.yo[2];if(!((s-n)*(o-l)-(h-l)*(r-n)<=0))if(D.Oi=!1,3===i){let i;if((s<0||n<0||r<0||s>m.Pt||n>m.Pt||r>m.Pt)&&(D.Oi=!0),i=this.Ro?3&this.Ro[t]:0,e)D.Zt(s,n,h,l,z.mo[0]),D.Zt(n,r,l,o,z.mo[1]),D.Zt(r,s,o,h,z.mo[2]);else if(0===i)D.Ji(s,n,r,h,l,o,z.mo[0],z.mo[1],z.mo[2]);else if(1===i&&this.So)D.Qi(s,n,r,h,l,o,D.ci[this.So[t]]);else if(2===i&&this.Ro&&this.Go&&z.no&&z.ro&&z.ho){const e=this.Ro[t]>>2,i=this.Yo[e],a=this.Vo[e],c=this.Xo[e];D.es(s,n,r,h,l,o,z.mo[0],z.mo[1],z.mo[2],z.no[i],z.ro[i],z.ho[i],z.no[a],z.no[c],z.ro[a],z.ro[c],z.ho[a],z.ho[c],this.Go[t])}else if(3===i&&this.Ro&&this.Go&&this.So&&z.no&&z.ro&&z.ho){const e=this.Ro[t]>>2,i=this.Yo[e],a=this.Vo[e],c=this.Xo[e];D.es(s,n,r,h,l,o,this.So[t],this.So[t],this.So[t],z.no[i],z.ro[i],z.ho[i],z.no[a],z.no[c],z.ro[a],z.ro[c],z.ho[a],z.ho[c],this.Go[t])}}else if(4===i){let i;if((s<0||n<0||r<0||s>m.Pt||n>m.Pt||r>m.Pt||z.wo[3]<0||z.wo[3]>m.Pt)&&(D.Oi=!0),i=this.Ro?3&this.Ro[t]:0,e)D.Zt(s,n,h,l,z.mo[0]),D.Zt(n,r,l,o,z.mo[1]),D.Zt(r,z.wo[3],o,z.yo[3],z.mo[2]),D.Zt(z.wo[3],s,z.yo[3],h,z.mo[3]);else if(0===i)D.Ji(s,n,r,h,l,o,z.mo[0],z.mo[1],z.mo[2]),D.Ji(s,r,z.wo[3],h,o,z.yo[3],z.mo[0],z.mo[2],z.mo[3]);else if(1===i){if(this.So){const e=D.ci[this.So[t]];D.Qi(s,n,r,h,l,o,e),D.Qi(s,r,z.wo[3],h,o,z.yo[3],e)}}else if(2===i&&this.Ro&&this.Go&&z.no&&z.ro&&z.ho){const e=this.Ro[t]>>2,i=this.Yo[e],a=this.Vo[e],c=this.Xo[e];D.es(s,n,r,h,l,o,z.mo[0],z.mo[1],z.mo[2],z.no[i],z.ro[i],z.ho[i],z.no[a],z.no[c],z.ro[a],z.ro[c],z.ho[a],z.ho[c],this.Go[t]),D.es(s,r,z.wo[3],h,o,z.yo[3],z.mo[0],z.mo[2],z.mo[3],z.no[i],z.ro[i],z.ho[i],z.no[a],z.no[c],z.ro[a],z.ro[c],z.ho[a],z.ho[c],this.Go[t])}else if(3===i&&this.Ro&&this.Go&&this.So&&z.no&&z.ro&&z.ho){const e=this.Ro[t]>>2,i=this.Yo[e],a=this.Vo[e],c=this.Xo[e];D.es(s,n,r,h,l,o,this.So[t],this.So[t],this.So[t],z.no[i],z.ro[i],z.ho[i],z.no[a],z.no[c],z.ro[a],z.ro[c],z.ho[a],z.ho[c],this.Go[t]),D.es(s,r,z.wo[3],h,o,z.yo[3],this.So[t],this.So[t],this.So[t],z.no[i],z.ro[i],z.ho[i],z.no[a],z.no[c],z.ro[a],z.ro[c],z.ho[a],z.ho[c],this.Go[t])}}};ga=(t,e,i,s,n)=>{if(!s)return;const r=s.it;if(0===n){let n=0;z.po=0,z.Ao=0,z.Io=0;for(let t=0;t<r;t++){if(!this.ra)continue;const e=s[t];if(e<this.ra.it){const t=this.ra[e];if(t)for(let e=0;e<t.it;e++){const i=t[e];z.po+=this.Fo[i],z.Ao+=this.Lo[i],z.Io+=this.Do[i],n++}}}n>0?(z.po=(z.po/n|0)+t,z.Ao=(z.Ao/n|0)+e,z.Io=(z.Io/n|0)+i):(z.po=t,z.Ao=e,z.Io=i)}else if(1===n)for(let n=0;n<r;n++){const r=s[n];if(!this.ra||r>=this.ra.it)continue;const h=this.ra[r];if(h)for(let s=0;s<h.it;s++){const n=h[s];this.Fo[n]+=t,this.Lo[n]+=e,this.Do[n]+=i}}else if(2===n)for(let n=0;n<r;n++){const r=s[n];if(!this.ra||r>=this.ra.it)continue;const h=this.ra[r];if(h)for(let s=0;s<h.it;s++){const n=h[s];this.Fo[n]-=z.po,this.Lo[n]-=z.Ao,this.Do[n]-=z.Io;const r=8*(255&t),l=8*(255&e),o=8*(255&i);let a,c;if(0!==o){a=D._i[o],c=D.Ci[o];const t=this.Lo[n]*a+this.Fo[n]*c>>16;this.Lo[n]=this.Lo[n]*c-this.Fo[n]*a>>16,this.Fo[n]=t}if(0!==r){a=D._i[r],c=D.Ci[r];const t=this.Lo[n]*c-this.Do[n]*a>>16;this.Do[n]=this.Lo[n]*a+this.Do[n]*c>>16,this.Lo[n]=t}if(0!==l){a=D._i[l],c=D.Ci[l];const t=this.Do[n]*a+this.Fo[n]*c>>16;this.Do[n]=this.Do[n]*c-this.Fo[n]*a>>16,this.Fo[n]=t}this.Fo[n]+=z.po,this.Lo[n]+=z.Ao,this.Do[n]+=z.Io}}else if(3===n)for(let n=0;n<r;n++){const r=s[n];if(!this.ra||r>=this.ra.it)continue;const h=this.ra[r];if(h)for(let s=0;s<h.it;s++){const n=h[s];this.Fo[n]-=z.po,this.Lo[n]-=z.Ao,this.Do[n]-=z.Io,this.Fo[n]=this.Fo[n]*t/128|0,this.Lo[n]=this.Lo[n]*e/128|0,this.Do[n]=this.Do[n]*i/128|0,this.Fo[n]+=z.po,this.Lo[n]+=z.Ao,this.Do[n]+=z.Io}}else if(5===n&&this.ha&&this.Wo)for(let e=0;e<r;e++){const i=s[e];if(i>=this.ha.it)continue;const n=this.ha[i];if(n)for(let e=0;e<n.it;e++){const i=n[e];this.Wo[i]+=8*t,this.Wo[i]<0&&(this.Wo[i]=0),this.Wo[i]>255&&(this.Wo[i]=255)}}};Oa=()=>{this.$o=0,this.Ko=0,this.Jo=0,this.jo=999999,this.zo=-999999,this.qo=-99999,this.Zo=99999;for(let t=0;t<this.bl;t++){const e=this.Fo[t],i=this.Lo[t],s=this.Do[t];e<this.jo&&(this.jo=e),e>this.zo&&(this.zo=e),s<this.Zo&&(this.Zo=s),s>this.qo&&(this.qo=s),-i>this.$o&&(this.$o=-i),i>this.Jo&&(this.Jo=i);const n=e*e+s*s;n>this.Ko&&(this.Ko=n)}this.Ko=0|Math.sqrt(this.Ko),this.ta=0|Math.sqrt(this.Ko*this.Ko+this.$o*this.$o),this.Qo=this.ta+(0|Math.sqrt(this.Ko*this.Ko+this.Jo*this.Jo))};xa=(t,e,i,s,n,r,h,l)=>!(e<i&&e<s&&e<n)&&(!(e>i&&e>s&&e>n)&&(!(t<r&&t<h&&t<l)&&(t<=r||t<=h||t<=l)));Da=t=>{if(!(z.eo&&z.io&&this.So&&this.Oo&&this.ko))return;const e=this.No[t],i=this.Uo[t],s=this.Po[t];D.Zt(z.eo[e],z.io[e],z.eo[i],z.io[i],D.ci[1e3]),D.Zt(z.eo[i],z.io[i],z.eo[s],z.io[s],D.ci[1e3]),D.Zt(z.eo[s],z.io[s],z.eo[e],z.io[e],D.ci[1e3])}}class Z{oe;At(){this.oe=new y}hl=t=>{t.Ot&&t.kt(),t.Ot=this.oe.Ot,t.St=this.oe,t.Ot&&(t.Ot.St=t),t.St.Ot=t};Na=()=>{const t=this.oe.St;return t===this.oe?null:(t?.kt(),t)}}class q{Ua;Pa;At(t){this.Ua=t,this.Pa=[];for(let e=0;e<t;e++)this.Pa[e]=new w}z=t=>{const e=this.Pa[Number(t&BigInt(this.Ua-1))];if(!e.Et)return null;for(let i=e.Et;i!==e;i=i.Et)if(i&&i.Tt===t)return i;return null};Zh=(t,e)=>{e.vt&&e.Lt();const i=this.Pa[Number(t&BigInt(this.Ua-1))];e.vt=i.vt,e.Et=i,e.vt&&(e.vt.Et=e),e.Et.vt=e,e.Tt=t}}class K{Ba;Wa;Dr;Se;At(t){this.Ba=t,this.Se=t,this.Wa=new q(1024),this.Dr=new Z}z=t=>{const e=this.Wa.z(t);return e&&this.Dr.hl(e),e};Zh=(t,e)=>{if(0===this.Se){const t=this.Dr.Na();t?.Lt(),t?.kt()}else this.Se--;this.Wa.Zh(t,e),this.Dr.hl(e)};Vt=()=>{const t=this.Dr.Na();t?(t.Lt(),t.kt()):this.Se=this.Ba}}class J extends y{Rt;te;ee;hi;li;oi;ai;At(t,e){super(),this.Rt=new Int32Array(t*e),this.te=this.oi=t,this.ee=this.ai=e,this.hi=this.li=0}static Ga=async(t,e)=>{const i=t.j(e+'.dat');if(!i)throw new Error(`${e} jpeg not found!`);const s=await(async t=>{255!==t[0]&&(t[0]=255),URL.revokeObjectURL(g.Ha),g.Ha=URL.createObjectURL(new Blob([t],{Ya:'image/jpeg'})),await new Promise((t=>g.Va=()=>t())),_.Xa(0,0,I.te,I.ee);const e=g.ja,i=g.za;return I.te=e,I.ee=i,_.Za(g,0,0),_.se(0,0,e,i)})(i),n=new J(s.te,s.ee),r=n.Rt,h=s.le;for(let t=0;t<r.it;t++){const e=4*t;r[t]=h[e+3]<<24|h[e]<<16|h[e+1]<<8|h[e+2]<<0}return n};static fi=(t,e,i=0)=>{const s=new v(t.j(e+'.dat')),n=new v(t.j('index.dat'));n.Ee=s.Me;const r=n.Me,h=n.Me,l=[],o=n.Re-1;for(let t=0;t<o;t++)l[t+1]=n.De,0===l[t+1]&&(l[t+1]=1);for(let t=0;t<i;t++)n.Ee+=2,s.Ee+=n.Me*n.Me,n.Ee+=1;if(s.Ee>s.le.it||n.Ee>n.le.it)throw new Error;const a=n.Re,c=n.Re,f=n.Me,u=n.Me,d=new J(f,u);d.hi=a,d.li=c,d.oi=r,d.ai=h;const w=n.Re;if(0===w){const t=d.te*d.ee;for(let e=0;e<t;e++)d.Rt[e]=l[s.Re]}else if(1===w){const t=d.te;for(let e=0;e<t;e++){const i=d.ee;for(let n=0;n<i;n++)d.Rt[e+n*t]=l[s.Re]}}return d};Gt=()=>{m.Gt(this.Rt,this.te,this.ee)};re=(t,e)=>{t|=0,e|=0;let i=(t+=this.hi)+(e+=this.li)*m.xt,s=0,n=this.ee,r=this.te,h=m.xt-r,l=0;if(e<m.Ft){const t=m.Ft-e;n-=t,e=m.Ft,s+=t*r,i+=t*m.xt}if(e+n>m.Dt&&(n-=e+n-m.Dt),t<m.Nt){const e=m.Nt-t;r-=e,t=m.Nt,s+=e,i+=e,l+=e,h+=e}if(t+r>m.Ut){const e=t+r-m.Ut;r-=e,l+=e,h+=e}r>0&&n>0&&this.qa(r,n,this.Rt,s,l,m.Rt,i,h)};Ka=(t,e,i)=>{e|=0,i|=0;let s=(e+=this.hi)+(i+=this.li)*m.xt,n=0,r=this.ee,h=this.te,l=m.xt-h,o=0;if(i<m.Ft){const t=m.Ft-i;r-=t,i=m.Ft,n+=t*h,s+=t*m.xt}if(i+r>m.Dt&&(r-=i+r-m.Dt),e<m.Nt){const t=m.Nt-e;h-=t,e=m.Nt,n+=t,s+=t,o+=t,l+=t}if(e+h>m.Ut){const t=e+h-m.Ut;h-=t,o+=t,l+=t}h>0&&r>0&&this.Ja(h,r,this.Rt,n,o,m.Rt,s,l,t)};$a=(t,e)=>{t|=0,e|=0;let i=(t+=this.hi)+(e+=this.li)*m.xt,s=0,n=this.ee,r=this.te,h=m.xt-r,l=0;if(e<m.Ft){const t=m.Ft-e;n-=t,e=m.Ft,s+=t*r,i+=t*m.xt}if(e+n>m.Dt&&(n-=e+n-m.Dt),t<m.Nt){const e=m.Nt-t;r-=e,t=m.Nt,s+=e,i+=e,l+=e,h+=e}if(t+r>m.Ut){const e=t+r-m.Ut;r-=e,l+=e,h+=e}r>0&&n>0&&this.Qa(r,n,this.Rt,s,l,m.Rt,i,h)};di=()=>{const t=this.Rt,e=this.te,i=this.ee;for(let s=0;s<i;s++){const i=e/2|0;for(let n=0;n<i;n++){const i=n+s*e,r=e-n-1+s*e,h=t[i];t[i]=t[r],t[r]=h}}};wi=()=>{const t=this.Rt,e=this.te,i=this.ee;for(let s=0;s<(i/2|0);s++)for(let n=0;n<e;n++){const r=n+s*e,h=n+(i-s-1)*e,l=t[r];t[r]=t[h],t[h]=l}};yi=(t,e,i)=>{for(let s=0;s<this.Rt.it;s++){const n=this.Rt[s];if(0!==n){let r=n>>16&255;r+=t,r<1?r=1:r>255&&(r=255);let h=n>>8&255;h+=e,h<1?h=1:h>255&&(h=255);let l=255&n;l+=i,l<1?l=1:l>255&&(l=255),this.Rt[s]=(r<<16)+(h<<8)+l}}};pi=(t,e,i,s)=>{t|=0,e|=0,i|=0,s|=0;try{const n=this.te;let r=0,h=0;const l=this.oi,o=this.ai,a=(l<<16)/i|0,c=(o<<16)/s|0;t+=(this.hi*i+l-1)/l|0,e+=(this.li*s+o-1)/o|0,this.hi*i%l!=0&&(r=(l-this.hi*i%l<<16)/i|0),this.li*s%o!=0&&(h=(o-this.li*s%o<<16)/s|0),i=i*(this.te-(r>>16))/l|0,s=s*(this.ee-(h>>16))/o|0;let f=t+e*m.xt,u=m.xt-i;if(e<m.Ft){const t=m.Ft-e;s-=t,e=0,f+=t*m.xt,h+=c*t}if(e+s>m.Dt&&(s-=e+s-m.Dt),t<m.Nt){const e=m.Nt-t;i-=e,t=0,f+=e,r+=a*e,u+=e}if(t+i>m.Ut){const e=t+i-m.Ut;i-=e,u+=e}this.va(i,s,this.Rt,r,h,m.Rt,u,f,n,a,c)}catch(t){console.Ch('error in sprite clipping routine')}};tc=(t,e,i,s,n,r,h,l,o,a)=>{t|=0,e|=0,i|=0,s|=0;try{const c=-i/2|0,f=-s/2|0,u=65536*Math._i(o/326.11)|0,d=65536*Math.Ci(o/326.11)|0,w=u*a>>8,y=d*a>>8;let p=(h<<16)+f*w+c*y,A=f*y-c*w+(l<<16),I=t+e*m.xt;for(let t=0;t<s;t++){const e=n[t];let i=I+e,s=p+y*e,h=A-w*e;for(let e=-r[t];e<0;e++)m.Rt[i++]=this.Rt[(s>>16)+(h>>16)*this.te],s+=y,h-=w;p+=w,A+=y,I+=m.xt}}catch(t){}};ec=(t,e,i)=>{t|=0,e|=0;let s=(t+=this.hi)+(e+=this.li)*m.xt,n=0,r=this.ee,h=this.te,l=m.xt-h,o=0;if(e<m.Ft){const t=m.Ft-e;r-=t,e=m.Ft,n+=t*h,s+=t*m.xt}if(e+r>m.Dt&&(r-=e+r-m.Dt),t<m.Nt){const e=m.Nt-t;h-=e,t=m.Nt,n+=e,s+=e,o+=e,l+=e}if(t+h>m.Ut){const e=t+h-m.Ut;h-=e,o+=e,l+=e}h>0&&r>0&&this.ic(h,r,this.Rt,o,n,m.Rt,s,l,i.Rt)};va=(t,e,i,s,n,r,h,l,o,a,c)=>{try{const f=s;for(let u=-e;u<0;u++){const e=(n>>16)*o;for(let n=-t;n<0;n++){const t=i[(s>>16)+e];0===t?l++:r[l++]=t,s+=a}n+=c,s=f,l+=h}}catch(t){console.Ch('error in plot_scale')}};Qa=(t,e,i,s,n,r,h,l)=>{const o=-(t>>2);t=-(3&t);for(let a=-e;a<0;a++){for(let t=o;t<0;t++)r[h++]=i[s++],r[h++]=i[s++],r[h++]=i[s++],r[h++]=i[s++];for(let e=t;e<0;e++)r[h++]=i[s++];h+=l,s+=n}};Ja=(t,e,i,s,n,r,h,l,o)=>{const a=256-o;for(let c=-e;c<0;c++){for(let e=-t;e<0;e++){const t=i[s++];if(0===t)h++;else{const e=r[h];r[h++]=((16711935&t)*o+(16711935&e)*a&4278255360)+((65280&t)*o+(65280&e)*a&16711680)>>8}}h+=l,s+=n}};qa=(t,e,i,s,n,r,h,l)=>{const o=-(t>>2);t=-(3&t);for(let a=-e;a<0;a++){for(let t=o;t<0;t++){let t=i[s++];0===t?h++:r[h++]=t,t=i[s++],0===t?h++:r[h++]=t,t=i[s++],0===t?h++:r[h++]=t,t=i[s++],0===t?h++:r[h++]=t}for(let e=t;e<0;e++){const t=i[s++];0===t?h++:r[h++]=t}h+=l,s+=n}};ic=(t,e,i,s,n,r,h,l,o)=>{const a=-(t>>2);t=-(3&t);for(let c=-e;c<0;c++){for(let t=a;t<0;t++){let t=i[n++];0!==t&&0===o[h]?r[h++]=t:h++,t=i[n++],0!==t&&0===o[h]?r[h++]=t:h++,t=i[n++],0!==t&&0===o[h]?r[h++]=t:h++,t=i[n++],0!==t&&0===o[h]?r[h++]=t:h++}for(let e=t;e<0;e++){const t=i[n++];0!==t&&0===o[h]?r[h++]=t:h++}h+=l,n+=s}}}class ${static sc=['_','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9'];static nc=t=>{t=t.Kh();let e=0n;for(let i=0;i<t.it&&i<12;i++){const s=t.$e(i);e*=37n,s>=65&&s<=90?e+=BigInt(s+1-65):s>=97&&s<=122?e+=BigInt(s+1-97):s>=48&&s<=57&&(e+=BigInt(s+27-48))}return e};static rc=t=>{if(t<0n||t>=6582952005840035281n)return'invalid_name';if(t%37n===0n)return'invalid_name';let e=0;const i=Array(12);for(;0n!==t;){const s=t;t/=37n,i[11-e++]=this.sc[Number(s-37n*t)]}return i.nt(12-e).hc('')};static lc=t=>{const e=[...t.oc()];let i=!0;for(let t=0;t<e.it;t++){const s=e[t];i&&s>='a'&&s<='z'&&(e[t]=s.$h(),i=!1),'.'!==s&&'!'!==s||(i=!0)}return e.hc('')};static ac=t=>{let e='';for(let i=0;i<t.it;i++)e+='*';return e};static cc=t=>(t>>24&255)+'.'+(t>>16&255)+'.'+(t>>8&255)+'.'+(255&t);static fc=t=>{if(0===t.it)return t;const e=[...t];for(let t=0;t<e.it;t++)'_'===e[t]&&(e[t]=' ',t+1<e.it&&e[t+1]>='a'&&e[t+1]<='z'&&(e[t+1]=String.fromCharCode(e[t+1].$e(0)+'A'.$e(0)-97)));return e[0]>='a'&&e[0]<='z'&&(e[0]=String.fromCharCode(e[0].$e(0)+'A'.$e(0)-97)),e.hc('')};static uc=t=>{const e=t.$h();let i=0n;for(let t=0;t<e.it;t++)i=61n*i+BigInt(e.$e(t))-32n,i=i+(i>>56n)&0xffffffffffffffn;return i}}class Q{static pl=[];static dc=null;static wc=null;static yc=0;static mc=1;static pc=2;static Ac=3;static Ic=4;static gc=5;static _c=6;static Cc=7;static bc=1;static Tc=2;static Ec=3;static vc=4;static Lc=5;static Sc=6;static Oc=1;static kc=100;static Rc=101;static xc=200;static Mc=201;static Fc=202;static Dc=203;static Nc=205;static Uc=300;static Pc=301;static Bc=302;static Wc=303;static Gc=304;static Hc=305;static Yc=306;static Vc=307;static Xc=308;static jc=309;static zc=310;static Zc=311;static qc=312;static Kc=313;static Jc=314;static $c=315;static Qc=316;static tf=317;static ef=318;static if=319;static sf=320;static nf=321;static rf=322;static hf=323;static lf=324;static of=325;static af=326;static cf=327;static ff=401;static uf=500;static df=501;static wf=502;static yf=503;static mf=600;static pf=601;static Af=602;static If=603;static gf=604;static _f=605;static Cf=606;static bf=607;static Tf=608;static Ef=609;static vf=610;static Lf=611;static Sf=612;static Of=613;static kf=650;static Rf=651;static xf=652;static Mf=653;static Ff=654;static Df=655;static Al=(t,e,i)=>{this.dc=new K(5e4),this.wc=new K(5e4);const s=new v(t.j('data'));let n=-1;for(s.Ee+=2;s.Ee<s.le.it;){let t=s.Me;65535===t&&(n=s.Me,t=s.Me);const r=this.pl[t]=new Q;r.Tt=t,r.Nf=n,r.Ya=s.Re,r.Uf=s.Re,r.Pf=s.Me,r.te=s.Me,r.ee=s.Me,r.Bf=s.Re,0===r.Bf?r.Bf=-1:r.Bf=(r.Bf-1<<8)+s.Re;const h=s.Re;if(h>0){r.Wf=new Uint8Array(h),r.Gf=new Uint16Array(h);for(let t=0;t<h;t++)r.Wf[t]=s.Re,r.Gf[t]=s.Me}const l=s.Re;if(l>0){r.Hf=new S(l,null);for(let t=0;t<l;t++){const e=s.Me,i=new Uint16Array(e);r.Hf[t]=i;for(let t=0;t<e;t++)i[t]=s.Me}}if(r.Ya===Q.yc){r.Yf=s.Me,r.Vf=1===s.Re;const t=s.Re;r.Xf=new Array(t),r.jf=new Array(t),r.zf=new Array(t);for(let e=0;e<t;e++)r.Xf[e]=s.Me,r.jf[e]=s.Fe,r.zf[e]=s.Fe}if(r.Ya===Q.mc&&(s.Ee+=3),r.Ya===Q.pc){r.Zf=new Int32Array(r.te*r.ee),r.qf=new Int32Array(r.te*r.ee),r.Kf=1===s.Re,r.Jf=1===s.Re,r.$f=1===s.Re,r.Qf=s.Re,r.tu=s.Re,r.eu=new Int16Array(20),r.iu=new Int16Array(20),r.su=new S(20,null);for(let t=0;t<20;t++)if(1===s.Re){r.eu[t]=s.Fe,r.iu[t]=s.Fe;const i=s.We;if(i.it>0){const s=i.nu(',');r.su[t]=this.ru(e,i.hu(0,s),parseInt(i.hu(s+1),10))}}r.lu=new S(5,null);for(let t=0;t<5;t++){const e=s.We;r.lu[t]=e,0===e.it&&(r.lu[t]=null)}}if(r.Ya===Q.Ac&&(r.ne=1===s.Re),r.Ya===Q.Ic||r.Ya===Q.mc){r.ou=1===s.Re;const t=s.Re;i&&(r.Ah=i[t]),r.au=1===s.Re}if(r.Ya===Q.Ic&&(r.cu=s.We,r.fu=s.We),r.Ya!==Q.mc&&r.Ya!==Q.Ac&&r.Ya!==Q.Ic||(r.uu=s.Ne),r.Ya!==Q.Ac&&r.Ya!==Q.Ic||(r.du=s.Ne,r.wu=s.Ne),r.Ya===Q.gc){const t=s.We;if(t.it>0){const i=t.nu(',');r.yu=this.ru(e,t.hu(0,i),parseInt(t.hu(i+1),10))}const i=s.We;if(i.it>0){const t=i.nu(',');r.mu=this.ru(e,i.hu(0,t),parseInt(i.hu(t+1),10))}}if(r.Ya===Q._c){const t=s.Re;0!==t&&(r.fa=this.pu((t-1<<8)+s.Re));const e=s.Re;0!==e&&(r.Au=this.pu((e-1<<8)+s.Re)),r.Iu=s.Re,0===r.Iu?r.Iu=-1:r.Iu=(r.Iu-1<<8)+s.Re,r.gu=s.Re,0===r.gu?r.gu=-1:r.gu=(r.gu-1<<8)+s.Re,r._u=s.Me,r.Cu=s.Me,r.bu=s.Me}if(r.Ya===Q.Cc){r.Zf=new Int32Array(r.te*r.ee),r.qf=new Int32Array(r.te*r.ee),r.ou=1===s.Re;const t=s.Re;i&&(r.Ah=i[t]),r.au=1===s.Re,r.uu=s.Ne,r.Qf=s.Fe,r.tu=s.Fe,r.Jf=1===s.Re,r.lu=new S(5,null);for(let t=0;t<5;t++){const e=s.We;r.lu[t]=e,0===e.it&&(r.lu[t]=null)}}r.Uf!==Q.Tc&&r.Ya!==Q.pc||(r.Tu=s.We,r.Eu=s.We,r.vu=s.Me),r.Uf!==Q.bc&&r.Uf!==Q.vc&&r.Uf!==Q.Lc&&r.Uf!==Q.Sc||(r.Lu=s.We,0===r.Lu.it&&(r.Uf===Q.bc?r.Lu='Ok':r.Uf===Q.vc||r.Uf===Q.Lc?r.Lu='Select':r.Uf===Q.Sc&&(r.Lu='Continue')))}this.dc=null,this.wc=null};static ru=(t,e,i)=>{const s=$.uc(e)<<8n|BigInt(i);if(this.dc){const t=this.dc.z(s);if(t)return t}let n;try{n=J.fi(t,e,i),this.dc?.Zh(s,n)}catch(t){return null}return n};static pu=t=>{if(this.wc){const e=this.wc.z(BigInt(t));if(e)return e}const e=z.fa(t);return this.wc?.Zh(BigInt(t),e),e};Tt=-1;Nf=-1;Ya=-1;Uf=-1;Pf=0;te=0;ee=0;Bf=-1;Wf=null;Gf=null;Hf=null;Yf=0;Vf=!1;Kf=!1;Jf=!1;$f=!1;Qf=0;tu=0;eu=null;iu=null;su=null;lu=null;ne=!1;ou=!1;Ah=null;au=!1;cu=null;fu=null;uu=0;du=0;wu=0;yu=null;mu=null;fa=null;Au=null;Iu=-1;gu=-1;_u=0;Cu=0;bu=0;Tu=null;Eu=null;vu=-1;Lu=null;Xf=null;jf=null;zf=null;Dn=0;Nn=0;Su=0;Zf=null;qf=null;Ou=0;ku=0;pu=(t,e,i)=>{let s=this.fa;if(i&&(s=this.Au),!s)return null;if(-1===t&&-1===e&&!s.Go)return s;const n=z.ea(s,!0,!0,!1);return-1===t&&-1===e||n.Aa(),-1!==t&&n._a(t),-1!==e&&n._a(e),n.La(64,768,-50,-10,-50,!0),n};Ru(){if(this.Nf===this.Tt)return this.Dn;let t=Q.pl[this.Nf];if(!t.Xf||!t.jf||!t.zf)return this.Dn;let e=t.Xf.ll(this.Tt);if(-1===e)return this.Dn;let i=t.jf[e];for(;t.Nf!==t.Tt;){const s=Q.pl[t.Nf];s.Xf&&s.jf&&s.zf&&(e=s.Xf.ll(t.Tt),-1!==e&&(i+=s.jf[e])),t=s}return i}xu(){if(this.Nf===this.Tt)return this.Nn;let t=Q.pl[this.Nf];if(!t.Xf||!t.jf||!t.zf)return this.Nn;let e=t.Xf.ll(this.Tt);if(-1===e)return this.Nn;let i=t.zf[e];for(;t.Nf!==t.Tt;){const s=Q.pl[t.Nf];s.Xf&&s.jf&&s.zf&&(e=s.Xf.ll(t.Tt),-1!==e&&(i+=s.zf[e])),t=s}return i}Mu(t){const e=this.Ru(),i=this.xu();m.Xt(e,i,this.te,this.ee,t)}Fu(t,e){if(this.Nf===this.Tt)return;this.Dn=0,this.Nn=0;const i=Q.pl[this.Nf];if(i.Xf&&i.jf&&i.zf){const s=i.Xf.ll(this.Tt);-1!==s&&(i.jf[s]=t,i.zf[s]=e)}}$(){if(this.Nf===this.Tt)return;const t=Q.pl[this.Nf];if(t.Xf&&t.jf&&t.zf){const e=t.Xf.ll(this.Tt);-1!==e&&(t.Xf.Du(e,1),t.jf.Du(e,1),t.zf.Du(e,1))}}}var tt,et=(tt="file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/tinymidipcm.mjs",function(t){var e,s,n=void 0!==(t=t||{})?t:{};n.Nu=new Promise((function(t,i){e=t,s=i})),["_tsf_load_memory","_tsf_set_output","_tsf_channel_set_bank_preset","_tsf_set_max_voices","_tsf_channel_set_presetnumber","_tsf_reset","_tsf_close","_tml_load_memory","_midi_render","_malloc","_realloc","_free","_fflush","onRuntimeInitialized"].Uu((t=>{Object.getOwnPropertyDescriptor(n.Nu,t)||Object.defineProperty(n.Nu,t,{z:()=>j('You are getting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),Z:()=>j('You are setting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js')})}));var r=Object.assign({},n),h=[],l='object'==typeof window,o='function'==typeof importScripts,a='object'==typeof process&&'object'==typeof process.versions&&'string'==typeof process.versions.node,c=!l&&!a&&!o;if(n.Pu)throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');var f,u,d,w='';if(a){if('undefined'==typeof process||!process.ke||'node'!==process.ke.It)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');var y,m;w=o?require('path').Bu(w)+'/':__dirname+'/';var p=()=>{m||(y=require('fs'),m=require('path'))};f=(t,e)=>(p(),t=m.Wu(t),y.Gu(t,e?void 0:'utf8')),d=t=>{var e=f(t,!0);return e.Q||(e=new Uint8Array(e)),M(e.Q),e},u=(t,e,i)=>{p(),t=m.Wu(t),y.Hu(t,(function(t,s){t?i(t):e(s.Q)}))},process.argv.it>1&&process.argv[1].Yu(/\\/g,'/'),h=process.argv.nt(2),process.on('uncaughtException',(function(t){if(!(t instanceof nt))throw t})),process.on('unhandledRejection',(function(t){throw t})),n.Vu=function(){return'[Emscripten Module object]'}}else if(c){if('object'==typeof process&&'function'==typeof require||'object'==typeof window||'function'==typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');'undefined'!=typeof read&&(f=function(t){return read(t)}),d=function(t){let e;return'function'==typeof readbuffer?new Uint8Array(readbuffer(t)):(e=read(t,'binary'),M('object'==typeof e),e)},u=function(t,e,i){setTimeout((()=>e(d(t))),0)},'undefined'!=typeof scriptArgs?h=scriptArgs:void 0!==arguments&&(h=arguments),'undefined'!=typeof print&&('undefined'==typeof console&&(console={}),console.log=print,console.warn=console.Ch='undefined'!=typeof printErr?printErr:print)}else{if(!l&&!o)throw new Error('environment detection error');if(o?w=self.location.href:'undefined'!=typeof document&&document.currentScript&&(w=document.currentScript.Ha),tt&&(w=tt),w=0!==w.ll('blob:')?w.Xu(0,w.Yu(/[?#].*/,"").nu('/')+1):'','object'!=typeof window&&'function'!=typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');f=t=>{var e=new XMLHttpRequest;return e.Ph('GET',t,!1),e.ju(null),e.zu},o&&(d=t=>{var e=new XMLHttpRequest;return e.Ph('GET',t,!1),e.Zu='arraybuffer',e.ju(null),new Uint8Array(e.qu)}),u=(t,e,i)=>{var s=new XMLHttpRequest;s.Ph('GET',t,!0),s.Zu='arraybuffer',s.Va=()=>{200==s.Ku||0==s.Ku&&s.qu?e(s.qu):i()},s.Dh=i,s.ju(null)}}n.Ju||console.log.Gt(console);var A,I,g=n.$u||console.warn.Gt(console);function _(t,e){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{Qu:!0,z:function(){j('Module.'+t+' has been replaced with plain '+e+' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)')}})}function C(t){return'FS_createPath'===t||'FS_createDataFile'===t||'FS_createPreloadedFile'===t||'FS_unlink'===t||'addRunDependency'===t||'FS_createLazyFile'===t||'FS_createDevice'===t||'removeRunDependency'===t}Object.assign(n,r),r=null,A='fetchSettings',Object.getOwnPropertyDescriptor(n,A)&&j('`Module.'+A+'` was supplied but `'+A+'` not included in INCOMING_MODULE_JS_API'),n.td&&(h=n.td),_('arguments','arguments_'),n.ed&&n.ed,_('thisProgram','thisProgram'),n.id&&n.id,_('quit','quit_'),M(void 0===n.sd,'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead'),M(void 0===n.nd,'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead'),M(void 0===n.rd,'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead'),M(void 0===n.hd,'Module.filePackagePrefixURL option was removed, use Module.locateFile instead'),M(void 0===n.j,'Module.read option was removed (modify read_ in JS)'),M(void 0===n.ld,'Module.readAsync option was removed (modify readAsync in JS)'),M(void 0===n.od,'Module.readBinary option was removed (modify readBinary in JS)'),M(void 0===n.ad,'Module.setWindowTitle option was removed (modify setWindowTitle in JS)'),M(void 0===n.cd,'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY'),_('read','read_'),_('readAsync','readAsync'),_('readBinary','readBinary'),_('setWindowTitle','setWindowTitle'),M(!c,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),n.fd&&(I=n.fd),_('wasmBinary','wasmBinary');var b;n.ud;_('noExitRuntime','noExitRuntime'),'object'!=typeof WebAssembly&&j('no native wasm support detected');var T,E,v,L,S,O,k,R,x=!1;function M(t,e){t||j('Assertion failed'+(e?': '+e:''))}function F(t){T=t,n.dd=E=new Int8Array(t),n.wd=L=new Int16Array(t),n.yd=S=new Int32Array(t),n.md=v=new Uint8Array(t),n.pd=new Uint16Array(t),n.Ad=O=new Uint32Array(t),n.Id=k=new Float32Array(t),n.gd=R=new Float64Array(t)}'undefined'!=typeof TextDecoder&&new TextDecoder('utf8');var D=5242880;n._d&&M(D===n._d,'the stack size can no longer be determined at runtime');var N=n.Cd||16777216;function U(){if(!x){var t=ft(),e=O[t>>2],i=O[t+4>>2];34821223==e&&2310721022==i||j('Stack overflow! Stack cookie has been overwritten at 0x'+t.Xi(16)+', expected hex dwords 0x89BACDFE and 0x2135467, but received 0x'+i.Xi(16)+' 0x'+e.Xi(16)),1668509029!==O[0]&&j('Runtime error: The application has corrupted its heap memory area (address zero)!')}}_('INITIAL_MEMORY','INITIAL_MEMORY'),M(N>=D,'INITIAL_MEMORY should be larger than TOTAL_STACK, was '+N+'! (TOTAL_STACK='+D+')'),M('undefined'!=typeof Int32Array&&'undefined'!=typeof Float64Array&&null!=Int32Array.prototype.tt&&null!=Int32Array.prototype.Z,'JS engine does not provide full typed array support'),M(!n.bd,'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally'),M(16777216==N,'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically'),function(){var t=new Int16Array(1),e=new Int8Array(t.Q);if(t[0]=25459,115!==e[0]||99!==e[1])throw'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)'}();var P=[],B=[],W=[],G=!1;M(Math.imul,'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),M(Math.fround,'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),M(Math.clz32,'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),M(Math.trunc,'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');var H=0,Y=null,V=null,X={};function j(t){n.Td&&n.Td(t),g(t='Aborted('+t+')'),x=!0;var e=new WebAssembly.RuntimeError(t);throw s(e),e}var z={Ch:function(){j('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM')},Ed:function(){z.Ch()},vd:function(){z.Ch()},Ld:function(){z.Ch()},Sd:function(){z.Ch()},Ph:function(){z.Ch()},Od:function(){z.Ch()},kd:function(){z.Ch()},Rd:function(){z.Ch()},xd:function(){z.Ch()},Md:function(){z.Ch()}};n.Fd=z.vd,n.Dd=z.Ld;var Z,q,K,J,$='data:application/octet-stream;base64,';function Q(t){return t.Nd($)}function et(t){return t.Nd('file://')}function it(t,e){return function(){var i=t,s=e;return e||(s=n.Ud),M(G,'native function `'+i+'` called before runtime initialization'),s[t]||M(s[t],'exported native function `'+i+'` not found'),s[t].Pd(null,arguments)}}function st(t){try{if(t==Z&&I)return new Uint8Array(I);if(d)return d(t);throw"both async and sync fetching of the wasm failed"}catch(t){j(t)}}function nt(t){this.It='ExitStatus',this.Bd='Program terminated with exit('+t+')',this.Ku=t}function rt(t){for(;t.it>0;)t.Wd()(n)}function ht(t){ht.Gd||(ht.Gd={}),ht.Gd[t]||(ht.Gd[t]=1,a&&(t='warning: '+t),g(t))}function lt(t){try{return b.Hd(t-T.Yd+65535>>>16),F(b.Q),1}catch(e){g('emscripten_realloc_buffer: Attempted to grow heap from '+T.Yd+' bytes to '+t+' bytes, but got error: '+e)}}n.Vd?Q(Z='tinymidipcm.wasm')||(q=Z,Z=n.Vd?n.Vd(q,w):w+q):Z=new URL(i(5621),i.n).Xi();var ot,at={Xd:function(t,e,i){v.jd(t,e,e+i)},zd:function(t){var e=v.it;M((t>>>=0)>e);var i,s,n=2147483648;if(t>n)return g('Cannot enlarge memory, asked to go up to '+t+' bytes, but the limit is '+n+' bytes!'),!1;for(var r=1;r<=4;r*=2){var h=e*(1+.2/r);h=Math.min(h,t+100663296);var l=Math.min(n,(i=Math.max(t,h))+((s=65536)-i%s)%s);if(lt(l))return!0}return g('Failed to grow the heap from '+e+' bytes to '+l+' bytes, not enough memory!'),!1}},ct=(function(){var t,e={r:at,Zd:at};function i(t,e){var i,s=t.t;n.Ud=s,M(b=n.Ud.l,"memory not found in wasm exports"),F(b.Q),M(n.Ud.qd,"table not found in wasm exports"),i=n.Ud.Kd,B.ri(i),function(t){if(H--,n.Jd&&n.Jd(H),t?(M(X[t]),delete X[t]):g('warning: run dependency removed without ID'),0==H&&(null!==Y&&(clearInterval(Y),Y=null),V)){var e=V;V=null,e()}}('wasm-instantiate')}t='wasm-instantiate',H++,n.Jd&&n.Jd(H),t?(M(!X[t]),X[t]=1,null===Y&&'undefined'!=typeof setInterval&&(Y=setInterval((function(){if(x)return clearInterval(Y),void(Y=null);var t=!1;for(var e in X)t||(t=!0,g('still waiting on run dependencies:')),g('dependency: '+e);t&&g('(end of list)')}),1e4))):g('warning: run dependency added without ID');var r=n;function h(t){M(n===r,'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?'),r=null,i(t.wt)}function c(t){return function(){if(!I&&(l||o)){if('function'==typeof fetch&&!et(Z))return fetch(Z,{tw:'same-origin'}).$d((function(t){if(!t.ew)throw"failed to load wasm binary file at '"+Z+"'";return t.pt()})).Qd((function(){return st(Z)}));if(u)return new Promise((function(t,e){u(Z,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().$d((function(){return st(Z)}))}().$d((function(t){return WebAssembly.instantiate(t,e)})).$d((function(t){return t})).$d(t,(function(t){g('failed to asynchronously prepare wasm: '+t),et(Z)&&g('warning: Loading from a file URI ('+Z+') is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing'),j(t)}))}if(n.iw)try{return n.iw(e,i)}catch(t){g('Module.instantiateWasm callback failed with error: '+t),s(t)}(I||'function'!=typeof WebAssembly.instantiateStreaming||Q(Z)||et(Z)||a||'function'!=typeof fetch?c(h):fetch(Z,{tw:'same-origin'}).$d((function(t){return WebAssembly.instantiateStreaming(t,e).$d(h,(function(t){return g('wasm streaming compile failed: '+t),g('falling back to ArrayBuffer instantiation'),c(h)}))}))).Qd(s)}(),n.sw=it("__wasm_call_ctors"),n.nw=it("malloc"),n.rw=it("free"),n.hw=it("tsf_load_memory"),n.lw=it("tsf_close"),n.ow=it("tsf_reset"),n.aw=it("tsf_set_output"),n.cw=it("tsf_set_max_voices"),n.fw=it("realloc"),n.uw=it("tsf_channel_set_presetnumber"),n.dw=it("tsf_channel_set_bank_preset"),n.ww=it("tml_load_memory"),n.yw=it("midi_render"),n.mw=it("__errno_location"),n.pw=it("fflush"),n.Aw=function(){return(ct=n.Aw=n.Ud.Iw).Pd(null,arguments)}),ft=(n.gw=function(){return(n.gw=n.Ud._w).Pd(null,arguments)},n.Cw=function(){return(n.Cw=n.Ud.bw).Pd(null,arguments)},n.Tw=function(){return(ft=n.Tw=n.Ud.Ew).Pd(null,arguments)});function ut(){var t;ct(),M(0==(3&(t=ft()))),O[t>>2]=34821223,O[t+4>>2]=2310721022,O[0]=1668509029}function dt(t){function i(){ot||(ot=!0,n.vw=!0,x||(M(!G),G=!0,U(),rt(B),e(n),n.Lw&&n.Lw(),M(!n.Sw,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(U(),n.Ow)for('function'==typeof n.Ow&&(n.Ow=[n.Ow]);n.Ow.it;)t=n.Ow.Wd(),W.ri(t);var t;rt(W)}()))}t=t||h,H>0||(ut(),function(){if(n.kw)for('function'==typeof n.kw&&(n.kw=[n.kw]);n.kw.it;)t=n.kw.Wd(),P.ri(t);var t;rt(P)}(),H>0||(n.Rw?(n.Rw('Running...'),setTimeout((function(){setTimeout((function(){n.Rw('')}),1),i()}),1)):i(),U()))}if(n.xw=it("stackSave"),n.Mw=it("stackRestore"),n.Fw=it("stackAlloc"),n.Dw=function(t,e,i="i8"){switch(i.Nw('*')&&(i='*'),i){case'i1':case'i8':E[t>>0]=e;break;case'i16':L[t>>1]=e;break;case'i32':S[t>>2]=e;break;case'i64':J=[e>>>0,(K=e,+Math.abs(K)>=1?K>0?(0|Math.min(+Math.floor(K/4294967296),4294967295))>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],S[t>>2]=J[0],S[t+4>>2]=J[1];break;case'float':k[t>>2]=e;break;case'double':R[t>>3]=e;break;case'*':O[t>>2]=e;break;default:j('invalid type for setValue: '+i)}},n.Uw=function(t,e="i8"){switch(e.Nw('*')&&(e='*'),e){case'i1':case'i8':return E[t>>0];case'i16':return L[t>>1];case'i32':case'i64':return S[t>>2];case'float':return k[t>>2];case'double':return R[t>>3];case'*':return O[t>>2];default:j('invalid type for getValue: '+e)}return null},['run','UTF8ArrayToString','UTF8ToString','stringToUTF8Array','stringToUTF8','lengthBytesUTF8','addOnPreRun','addOnInit','addOnPreMain','addOnExit','addOnPostRun','addRunDependency','removeRunDependency','FS_createFolder','FS_createPath','FS_createDataFile','FS_createPreloadedFile','FS_createLazyFile','FS_createLink','FS_createDevice','FS_unlink','getLEB','getFunctionTables','alignFunctionTables','registerFunctions','prettyPrint','getCompilerSetting','print','printErr','callMain','abort','keepRuntimeAlive','wasmMemory','stackAlloc','stackSave','stackRestore','getTempRet0','setTempRet0','writeStackCookie','checkStackCookie','ptrToString','zeroMemory','stringToNewUTF8','exitJS','getHeapMax','emscripten_realloc_buffer','ENV','ERRNO_CODES','ERRNO_MESSAGES','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','DNS','getHostByName','Protocols','Sockets','getRandomDevice','warnOnce','traverseStack','UNWIND_CACHE','convertPCtoSourceLocation','readAsmConstArgsArray','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','handleException','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','freeTableIndexes','functionsInTableMap','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','PATH','PATH_FS','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16Decoder','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeArrayToMemory','writeAsciiToMemory','SYSCALLS','getSocketFromFD','getSocketAddress','JSEvents','registerKeyEventCallback','specialHTMLTargets','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','currentFullscreenStrategy','restoreOldWindowedStyle','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','demangle','demangleAll','jsStackTrace','stackTrace','ExitStatus','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','dlopenMissingError','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','uncaughtExceptionCount','exceptionLast','exceptionCaught','ExceptionInfo','exception_addRef','exception_decRef','Browser','setMainLoop','wget','FS','MEMFS','TTY','PIPEFS','SOCKFS','_setNetworkCallback','tempFixedLengthArray','miniTempWebGLFloatBuffers','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','GL','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','AL','SDL_unicode','SDL_ttfContext','SDL_audio','SDL','SDL_gfx','GLUT','EGL','GLFW_Window','GLFW','GLEW','IDBStore','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].Uu((function(t){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{Qu:!0,z:function(){var e="'"+t+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";C(t)&&(e+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),j(e)}})})),['ptrToString','zeroMemory','stringToNewUTF8','exitJS','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','getHostByName','getRandomDevice','traverseStack','convertPCtoSourceLocation','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeAsciiToMemory','getSocketFromFD','getSocketAddress','registerKeyEventCallback','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','ExceptionInfo','exception_addRef','exception_decRef','setMainLoop','_setNetworkCallback','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','SDL_unicode','SDL_ttfContext','SDL_audio','GLFW_Window','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].Uu((function(t){'undefined'==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{Qu:!0,z:function(){var e='`'+t+'` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line';C(t)&&(e+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),ht(e)}})})),V=function t(){ot||dt(),ot||(V=t)},n.Pw)for('function'==typeof n.Pw&&(n.Pw=[n.Pw]);n.Pw.it>0;)n.Pw.Na()();return dt(),t.Nu});const it=et;const st=class{At(t={}){this.Bw=void 0,this.Ww=0,this.Gw=0,this.Hw=0,this.Yw=t.Yw||100,this.Vw=t.Vw||44100,this.Xw=t.Xw||2,this.jw=t.jw||0,t.zw?this.zw=t.zw:this.Zw(1),this.qw=t.qw||(()=>{}),this.Kw=t.Kw||(()=>{}),this.Jw=void 0,this.$w=0}async Ed(){if(!this.Bw){if('undefined'!=typeof process){const{Bu:t}=await import('path'),{Qw:e}=await import('module');globalThis.__dirname=t("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js"),globalThis.require=e("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js")}this.Bw=await it(),this.ty=this.Bw.nw(this.zw),this.ey=this.Bw.nw(8)}}Zw(t){this.zw=4*this.Vw*this.Xw*t}iy(){if(!this.Bw)throw new Error(`${this.At.It} not initalized. call .init()`)}sy(t){this.iy();const{nw:e,rw:i,hw:s,aw:n,dw:r,cw:h,uw:l}=this.Bw;i(this.Ww),this.Ww=e(t.it),this.Bw.md.Z(t,this.Ww),this.Gw=s(this.Ww,t.it),n(this.Gw,2===this.Xw?0:2,this.Vw,this.jw)}ny(){this.iy();const t=new Uint8Array(this.zw);return t.Z(this.Bw.md.tt(this.ty,this.ty+this.zw)),t}ry(t){const{nw:e,rw:i,ww:s}=this.Bw;return i(this.Hw),this.Hw=e(t.it),this.Bw.md.Z(t,this.Hw),s(this.Hw,t.it)}hy(t){const{yw:e}=this.Bw;return e(this.Gw,t,this.Xw,this.Vw,this.ty,this.zw,this.ey)}ly(t){if(this.iy(),!this.Gw)throw new Error('no soundfont buffer set. call .setSoundfont');window.clearTimeout(this.Jw);const{Dw:e,Uw:i}=this.Bw;e(this.ey,0,'double'),this.Bw.ow(this.Gw),this.Bw.dw(this.Gw,9,128,0),t[0]==='R'.$e(0)&&(t=t.nt(20));let s=this.ry(t);const n=()=>{s=this.hy(s);const t=this.ny();this.qw(t),s?this.Jw=setTimeout(n,this.Yw):this.Kw(i(this.ey,'double'))};this.Jw=setTimeout(n,16)}};!function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(window.audioContext=new window.AudioContext);var t=function(e){if(window.audioContext){var i=window.audioContext.createBuffer(1,1,22050),s=window.audioContext.createBufferSource();s.Q=i,s.oy(window.audioContext.destination),s.yh?s.yh(0):s.ay?s.ay(0):s.cy&&s.cy(0)}document.removeEventListener('touchstart',t),document.removeEventListener('touchend',t),document.removeEventListener('click',t)};document.addEventListener('touchstart',t),document.addEventListener('touchend',t),document.addEventListener('click',t)}(),(async()=>{let t=new Float32Array,e=window.audioContext.createGain();e.jw.fy=.1,e.oy(window.audioContext.destination);let i=window.audioContext.currentTime,s=[];const n=new st({Yw:30,qw:e=>{let i=new Float32Array(e.Q),s=new Float32Array(t.it+i.it);s.Z(t,0),s.Z(i,t.it),t=s},Kw:t=>{},zw:102400});await n.Ed();const r=await fetch('./SCC1_Florestan.sf2'),h=new Uint8Array(await r.pt());function l(){if(!window.audioContext||!t.it)return;let n=window.audioContext.createBufferSource();const r=t.it/2,h=window.audioContext.createBuffer(2,r,44100);for(let e=0;e<2;e++){const i=h.uy(e);let s=e;for(let e=0;e<r;e++)i[e]=t[s],s+=2}i<window.audioContext.currentTime&&(i=window.audioContext.currentTime),n.Q=h,n.oy(e),n.yh(i),s.hl(n),i+=h.dy,t=new Float32Array}let o;n.sy(h),window._tinyMidiStop=async()=>{if(o&&clearInterval(o),t=new Float32Array,s.it){let t=e.jw.fy;e.jw.fy=0,s.Uu((t=>{t._r(window.audioContext.currentTime)})),s=[],e.jw.fy=t}},window._tinyMidiVolume=(t=1)=>{e.jw.fy=t},window._tinyMidiPlay=async(t,e=1)=>{t&&(await window._tinyMidiStop(),-1!=e&&window._tinyMidiVolume(e),i=window.audioContext.currentTime,o=setInterval(l,250),n.ly(t))}})();class nt{wy;Nn;Dn;Un;fa;yy;my;py;Ay;Iy;gy;_y;Cy;by=0;Fi=0;At(t,e,i,s,n,r,h,l,o,a,c,f,u){this.wy=t,this.Nn=e,this.Dn=i,this.Un=s,this.fa=n,this.yy=r,this.my=h,this.py=l,this.Ay=o,this.Iy=a,this.gy=c,this._y=f,this.Cy=u}}class rt extends w{wy;Dn;Un;Ty;Ey;vy;Ly=null;Sy=null;Oy=null;ky=null;Ry=null;xy=null;My=null;Fy=0;Dy=0;Ny=0;Uy=!1;uh=!1;Py=!1;By=0;Wy=0;Gy=0;Hy=0;At(t,e,i){super(),this.Ty=this.wy=t,this.Dn=e,this.Un=i,this.Ey=new S(5,null),this.vy=new Int32Array(5)}}class ht{Yy;Vy;Xy;jy;Ya;jo;zo;Zo;qo;Jo;$o;zy=0;Zy=0;qy=0;Ky=0;Jy=0;$y=0;Qy=0;At(t,e,i,s,n,r,h,l,o,a,c){this.Yy=t,this.Vy=e,this.Xy=i,this.jy=s,this.Ya=n,this.jo=r,this.zo=h,this.Zo=l,this.qo=o,this.Jo=a,this.$o=c}}class lt{static tm=0;static em=1;static im=2;static sm=4;static nm=8;static rm=lt.em<<4;static hm=lt.im<<4;static lm=lt.sm<<4;static om=lt.nm<<4;static am=256;static cm=512;static fm=1024;static um=2048;static dm=4096;static wm=lt.cm<<4;static ym=lt.fm<<4;static mm=lt.um<<4;static pm=lt.dm<<4;static Am=lt.am<<9;static Im=524288;static gm=2097152;static _m=lt.gm|lt.Im;static Cm=lt.am|lt._m;static bm=lt.im|lt.Cm;static Tm=lt.nm|lt.Cm;static Em=lt.im|lt.sm|lt.Tm;static vm=lt.hm|lt.Cm;static Lm=lt.nm|lt.rm|lt.vm;static Sm=lt.om|lt.Cm;static Om=lt.em|lt.im|lt.Sm;static km=lt.hm|lt.lm|lt.Sm;static Rm=16777215}var ot;!function(t){t[t.xm=0]="WEST",t[t.Mm=1]="NORTH",t[t.Fm=2]="EAST",t[t.Dm=3]="SOUTH"}(ot||(ot={}));const at=ot;var ct;!function(t){t[t.Nm=0]="WALL",t[t.Um=1]="WALL_DECOR",t[t.Pm=2]="GROUND",t[t.Bm=3]="GROUND_DECOR"}(ct||(ct={}));var ft;!function(t){t[t.Wm=0]="WALL_STRAIGHT",t[t.Gm=1]="WALL_DIAGONAL_CORNER",t[t.Hm=2]="WALL_L",t[t.Ym=3]="WALL_SQUARE_CORNER",t[t.Vm=4]="WALLDECOR_STRAIGHT_NOOFFSET",t[t.Xm=5]="WALLDECOR_STRAIGHT_OFFSET",t[t.jm=6]="WALLDECOR_DIAGONAL_OFFSET",t[t.zm=7]="WALLDECOR_DIAGONAL_NOOFFSET",t[t.Zm=8]="WALLDECOR_DIAGONAL_BOTH",t[t.qm=9]="WALL_DIAGONAL",t[t.Km=10]="CENTREPIECE_STRAIGHT",t[t.Jm=11]="CENTREPIECE_DIAGONAL",t[t.$m=12]="ROOF_STRAIGHT",t[t.Qm=13]="ROOF_DIAGONAL_WITH_ROOFEDGE",t[t.tp=14]="ROOF_DIAGONAL",t[t.ep=15]="ROOF_L_CONCAVE",t[t.ip=16]="ROOF_L_CONVEX",t[t.sp=17]="ROOF_FLAT",t[t.np=18]="ROOFEDGE_STRAIGHT",t[t.rp=19]="ROOFEDGE_DIAGONAL_CORNER",t[t.hp=20]="ROOFEDGE_L",t[t.lp=21]="ROOFEDGE_SQUARE_CORNER",t[t.Bm=22]="GROUND_DECOR"}(ft||(ft={}));const ut=ft;class dt{static Mm=1;static Fm=2;static Dm=4;static xm=8;static op=dt.xm|dt.Dm;static ap=dt.xm|dt.Mm;static cp=dt.Fm|dt.Dm;static fp=dt.Fm|dt.Mm}class wt{static up=4;static dp=104;static wp=(t,e)=>t*wt.dp+e;yp;mp;pp;Ap;Ip;At(){this.yp=0,this.mp=0,this.pp=wt.dp,this.Ap=wt.dp,this.Ip=new Int32Array(this.pp*this.Ap),this.gp()}gp=()=>{for(let t=0;t<this.pp;t++)for(let e=0;e<this.Ap;e++){const i=wt.wp(t,e);0===t||0===e||t===this.pp-1||e===this.Ap-1?this.Ip[i]=lt.Rm:this.Ip[i]=lt.tm}};_p=(t,e)=>{this.Ip[wt.wp(t-this.yp,e-this.mp)]|=lt.gm};Cp=(t,e)=>{this.Ip[wt.wp(t-this.yp,e-this.mp)]&=~lt.gm};bp=(t,e,i,s,n,r)=>{let h=lt.am;r&&(h|=lt.Am);const l=t-this.yp,o=e-this.mp;if(n===at.Mm||n===at.Dm){const t=i;i=s,s=t}for(let t=l;t<l+i;t++)if(t>=0&&t<this.pp)for(let e=o;e<o+s;e++)e>=0&&e<this.Ap&&this.Tp(t,e,h)};Ep=(t,e,i,s,n,r)=>{let h=lt.am;r&&(h|=lt.Am);const l=t-this.yp,o=e-this.mp;if(n===at.Mm||n===at.Dm){const t=i;i=s,s=t}for(let t=l;t<l+i;t++)if(t>=0&&t<this.pp)for(let e=o;e<o+s;e++)e>=0&&e<this.Ap&&this.vp(t,e,h)};Lp=(t,e,i,s,n)=>{const r=t-this.yp,h=e-this.mp,l=n?lt.pm:lt.om,o=n?lt.dm:lt.nm,a=n?lt.fm:lt.im,c=n?lt.ym:lt.hm,f=n?lt.cm:lt.em,u=n?lt.wm:lt.rm,d=n?lt.um:lt.sm,w=n?lt.mm:lt.lm;i===ut.Wm?s===at.xm?(this.Tp(r,h,l),this.Tp(r-1,h,o)):s===at.Mm?(this.Tp(r,h,a),this.Tp(r,h+1,c)):s===at.Fm?(this.Tp(r,h,o),this.Tp(r+1,h,l)):s===at.Dm&&(this.Tp(r,h,c),this.Tp(r,h-1,a)):i===ut.Gm||i===ut.Ym?s===at.xm?(this.Tp(r,h,f),this.Tp(r-1,h+1,u)):s===at.Mm?(this.Tp(r,h,d),this.Tp(r+1,h+1,w)):s===at.Fm?(this.Tp(r,h,u),this.Tp(r+1,h-1,f)):s===at.Dm&&(this.Tp(r,h,w),this.Tp(r-1,h-1,d)):i===ut.Hm&&(s===at.xm?(this.Tp(r,h,a|l),this.Tp(r-1,h,o),this.Tp(r,h+1,c)):s===at.Mm?(this.Tp(r,h,a|o),this.Tp(r,h+1,c),this.Tp(r+1,h,l)):s===at.Fm?(this.Tp(r,h,c|o),this.Tp(r+1,h,l),this.Tp(r,h-1,a)):s===at.Dm&&(this.Tp(r,h,c|l),this.Tp(r,h-1,a),this.Tp(r-1,h,o))),n&&this.Lp(t,e,i,s,!1)};Sp=(t,e,i,s,n)=>{const r=t-this.yp,h=e-this.mp,l=n?lt.pm:lt.om,o=n?lt.dm:lt.nm,a=n?lt.fm:lt.im,c=n?lt.ym:lt.hm,f=n?lt.cm:lt.em,u=n?lt.wm:lt.rm,d=n?lt.um:lt.sm,w=n?lt.mm:lt.lm;i===ut.Wm?s===at.xm?(this.vp(r,h,l),this.vp(r-1,h,o)):s===at.Mm?(this.vp(r,h,a),this.vp(r,h+1,c)):s===at.Fm?(this.vp(r,h,o),this.vp(r+1,h,l)):s===at.Dm&&(this.vp(r,h,c),this.vp(r,h-1,a)):i===ut.Gm||i===ut.Ym?s===at.xm?(this.vp(r,h,f),this.vp(r-1,h+1,u)):s===at.Mm?(this.vp(r,h,d),this.vp(r+1,h+1,w)):s===at.Fm?(this.vp(r,h,u),this.vp(r+1,h-1,f)):s===at.Dm&&(this.vp(r,h,w),this.vp(r-1,h-1,d)):i===ut.Hm&&(s===at.xm?(this.vp(r,h,a|l),this.vp(r-1,h,o),this.vp(r,h+1,c)):s===at.Mm?(this.vp(r,h,a|o),this.vp(r,h+1,c),this.vp(r+1,h,l)):s===at.Fm?(this.vp(r,h,c|o),this.vp(r+1,h,l),this.vp(r,h-1,a)):s===at.Dm&&(this.vp(r,h,c|l),this.vp(r,h-1,a),this.vp(r-1,h,o))),n&&this.Sp(t,e,i,s,!1)};Op=(t,e,i,s,n,r)=>{if(t===i&&e===s)return!0;const h=t-this.yp,l=e-this.mp,o=i-this.yp,a=s-this.mp,c=wt.wp(h,l);if(n===ut.Wm){if(r===at.xm){if(h===o-1&&l===a)return!0;if(h===o&&l===a+1&&(this.Ip[c]&lt.vm)===lt.tm)return!0;if(h===o&&l===a-1&&(this.Ip[c]&lt.bm)===lt.tm)return!0}else if(r===at.Mm){if(h===o&&l===a+1)return!0;if(h===o-1&&l===a&&(this.Ip[c]&lt.Tm)===lt.tm)return!0;if(h===o+1&&l===a&&(this.Ip[c]&lt.Sm)===lt.tm)return!0}else if(r===at.Fm){if(h===o+1&&l===a)return!0;if(h===o&&l===a+1&&(this.Ip[c]&lt.vm)===lt.tm)return!0;if(h===o&&l===a-1&&(this.Ip[c]&lt.bm)===lt.tm)return!0}else if(r===at.Dm){if(h===o&&l===a-1)return!0;if(h===o-1&&l===a&&(this.Ip[c]&lt.Tm)===lt.tm)return!0;if(h===o+1&&l===a&&(this.Ip[c]&lt.Sm)===lt.tm)return!0}}else if(n===ut.Hm){if(r===at.xm){if(h===o-1&&l===a)return!0;if(h===o&&l===a+1)return!0;if(h===o+1&&l===a&&(this.Ip[c]&lt.Sm)===lt.tm)return!0;if(h===o&&l===a-1&&(this.Ip[c]&lt.bm)===lt.tm)return!0}else if(r===at.Mm){if(h===o-1&&l===a&&(this.Ip[c]&lt.Tm)===lt.tm)return!0;if(h===o&&l===a+1)return!0;if(h===o+1&&l===a)return!0;if(h===o&&l===a-1&&(this.Ip[c]&lt.bm)===lt.tm)return!0}else if(r===at.Fm){if(h===o-1&&l===a&&(this.Ip[c]&lt.Tm)===lt.tm)return!0;if(h===o&&l===a+1&&(this.Ip[c]&lt.vm)===lt.tm)return!0;if(h===o+1&&l===a)return!0;if(h===o&&l===a-1)return!0}else if(r===at.Dm){if(h===o-1&&l===a)return!0;if(h===o&&l===a+1&&(this.Ip[c]&lt.vm)===lt.tm)return!0;if(h===o+1&&l===a&&(this.Ip[c]&lt.Sm)===lt.tm)return!0;if(h===o&&l===a-1)return!0}}else if(n===ut.qm){if(h===o&&l===a+1&&(this.Ip[c]&lt.hm)===lt.tm)return!0;if(h===o&&l===a-1&&(this.Ip[c]&lt.im)===lt.tm)return!0;if(h===o-1&&l===a&&(this.Ip[c]&lt.nm)===lt.tm)return!0;if(h===o+1&&l===a&&(this.Ip[c]&lt.om)===lt.tm)return!0}return!1};kp=(t,e,i,s,n,r)=>{if(t===i&&e===s)return!0;const h=t-this.yp,l=e-this.mp,o=i-this.yp,a=s-this.mp,c=wt.wp(h,l);if(n===ut.jm||n===ut.zm){if(n===ut.zm&&(r=r+2&3),r===at.xm){if(h===o+1&&l===a&&(this.Ip[c]&lt.om)===lt.tm)return!0;if(h===o&&l===a-1&&(this.Ip[c]&lt.im)===lt.tm)return!0}else if(r===at.Mm){if(h===o-1&&l===a&&(this.Ip[c]&lt.nm)===lt.tm)return!0;if(h===o&&l===a-1&&(this.Ip[c]&lt.im)===lt.tm)return!0}else if(r===at.Fm){if(h===o-1&&l===a&&(this.Ip[c]&lt.nm)===lt.tm)return!0;if(h===o&&l===a+1&&(this.Ip[c]&lt.hm)===lt.tm)return!0}else if(r===at.Dm){if(h===o+1&&l===a&&(this.Ip[c]&lt.om)===lt.tm)return!0;if(h===o&&l===a+1&&(this.Ip[c]&lt.hm)===lt.tm)return!0}}else if(n===ut.Zm){if(h===o&&l===a+1&&(this.Ip[c]&lt.hm)===lt.tm)return!0;if(h===o&&l===a-1&&(this.Ip[c]&lt.im)===lt.tm)return!0;if(h===o-1&&l===a&&(this.Ip[c]&lt.nm)===lt.tm)return!0;if(h===o+1&&l===a&&(this.Ip[c]&lt.om)===lt.tm)return!0}return!1};Rp=(t,e,i,s,n,r,h)=>{const l=i+n-1,o=s+r-1,a=wt.wp(t-this.yp,e-this.mp);return t>=i&&t<=l&&e>=s&&e<=o||(t===i-1&&e>=s&&e<=o&&(this.Ip[a]&lt.nm)===lt.tm&&(h&dt.xm)===lt.tm||(t===l+1&&e>=s&&e<=o&&(this.Ip[a]&lt.om)===lt.tm&&(h&dt.Fm)===lt.tm||(e===s-1&&t>=i&&t<=l&&(this.Ip[a]&lt.im)===lt.tm&&(h&dt.Dm)===lt.tm||e===o+1&&t>=i&&t<=l&&(this.Ip[a]&lt.hm)===lt.tm&&(h&dt.Mm)===lt.tm)))};Tp=(t,e,i)=>{this.Ip[wt.wp(t,e)]|=i};vp=(t,e,i)=>{this.Ip[wt.wp(t,e)]&=lt.Rm-i}}class yt{Nn;Dn;Un;fa;_y;Cy;At(t,e,i,s,n,r){this.Nn=t,this.Dn=e,this.Un=i,this.fa=s,this._y=n,this.Cy=r}}class mt{Nn;Dn;Un;xp;Mp;Fp;Dp;_y;Cy;At(t,e,i,s,n,r,h,l,o){this.Nn=t,this.Dn=e,this.Un=i,this.xp=s,this.Mp=n,this.Fp=r,this.Dp=h,this._y=l,this.Cy=o}}class pt{Nn;Dn;Un;Ya;Np;fa;_y;Cy;At(t,e,i,s,n,r,h,l){this.Nn=t,this.Dn=e,this.Un=i,this.Ya=s,this.Np=n,this.fa=r,this._y=h,this.Cy=l}}class At{Nn;Dn;Un;Up;Pp;Bp;_y;Wp;At(t,e,i,s,n,r,h,l){this.Nn=t,this.Dn=e,this.Un=i,this.Up=s,this.Pp=n,this.Bp=r,this._y=h,this.Wp=l}}class It{Gp;Hp;Yp;Vp;Xp;jp;zp;At(t,e,i,s,n,r,h){this.Gp=t,this.Hp=e,this.Yp=i,this.Vp=s,this.Xp=n,this.jp=r,this.zp=h}}class gt{static Zp=new Int32Array(6);static qp=new Int32Array(6);static Kp=new Int32Array(6);static Jp=new Int32Array(6);static $p=new Int32Array(6);static Qp=[Int32Array.of(1,3,5,7),Int32Array.of(1,3,5,7),Int32Array.of(1,3,5,7),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,2,6),Int32Array.of(1,3,5,7,2,8),Int32Array.of(1,3,5,7,2,8),Int32Array.of(1,3,5,7,11,12),Int32Array.of(1,3,5,7,11,12),Int32Array.of(1,3,5,7,13,14)];static tA=[Int32Array.of(0,1,2,3,0,0,1,3),Int32Array.of(1,1,2,3,1,0,1,3),Int32Array.of(0,1,2,3,1,0,1,3),Int32Array.of(0,0,1,2,0,0,2,4,1,0,4,3),Int32Array.of(0,0,1,4,0,0,4,3,1,1,2,4),Int32Array.of(0,0,4,3,1,0,1,2,1,0,2,4),Int32Array.of(0,1,2,4,1,0,1,4,1,0,4,3),Int32Array.of(0,4,1,2,0,4,2,5,1,0,4,5,1,0,5,3),Int32Array.of(0,4,1,2,0,4,2,3,0,4,3,5,1,0,4,5),Int32Array.of(0,0,4,5,1,4,1,2,1,4,2,3,1,4,3,5),Int32Array.of(0,0,1,5,0,1,4,5,0,1,2,4,1,0,5,3,1,5,4,3,1,4,2,3),Int32Array.of(1,0,1,5,1,1,4,5,1,1,2,4,0,0,5,3,0,5,4,3,0,4,2,3),Int32Array.of(1,0,5,4,1,0,1,5,0,0,4,3,0,4,5,3,0,5,2,3,0,1,2,5)];static eA=128;static iA=this.eA/2|0;static sA=this.eA/4|0;static nA=3*this.eA/4|0;Fo;Lo;Do;rA;hA;lA;oA;aA;cA;fA;zp;uA;dA;wA;yA;At(t,e,i,s,n,r,h,l,o,a,c,f,u,d,w,y,m,p,A){this.zp=!(m!==s||m!==d||m!==l),this.uA=e,this.dA=r,this.wA=u,this.yA=o;const I=gt.Qp[e],g=I.it;this.Fo=new Int32Array(g),this.Lo=new Int32Array(g),this.Do=new Int32Array(g);const _=new Int32Array(g),C=new Int32Array(g),b=t*gt.eA,T=p*gt.eA;for(let t=0;t<g;t++){let e,o,c,u,p,g=I[t];0==(1&g)&&g<=8&&(g=1+(g-r-r-1&7)),g>8&&g<=12&&(g=9+(g-r-9&3)),g>12&&g<=16&&(g=13+(g-r-13&3)),1===g?(e=b,o=T,c=m,u=h,p=a):2===g?(e=b+gt.iA,o=T,c=m+s>>1,u=h+A>>1,p=a+i>>1):3===g?(e=b+gt.eA,o=T,c=s,u=A,p=i):4===g?(e=b+gt.eA,o=T+gt.iA,c=s+d>>1,u=A+n>>1,p=i+w>>1):5===g?(e=b+gt.eA,o=T+gt.eA,c=d,u=n,p=w):6===g?(e=b+gt.iA,o=T+gt.eA,c=d+l>>1,u=n+y>>1,p=w+f>>1):7===g?(e=b,o=T+gt.eA,c=l,u=y,p=f):8===g?(e=b,o=T+gt.iA,c=l+m>>1,u=y+h>>1,p=f+a>>1):9===g?(e=b+gt.iA,o=T+gt.sA,c=m+s>>1,u=h+A>>1,p=a+i>>1):10===g?(e=b+gt.nA,o=T+gt.iA,c=s+d>>1,u=A+n>>1,p=i+w>>1):11===g?(e=b+gt.iA,o=T+gt.nA,c=d+l>>1,u=n+y>>1,p=w+f>>1):12===g?(e=b+gt.sA,o=T+gt.iA,c=l+m>>1,u=y+h>>1,p=f+a>>1):13===g?(e=b+gt.sA,o=T+gt.sA,c=m,u=h,p=a):14===g?(e=b+gt.nA,o=T+gt.sA,c=s,u=A,p=i):15===g?(e=b+gt.nA,o=T+gt.nA,c=d,u=n,p=w):(e=b+gt.sA,o=T+gt.nA,c=l,u=y,p=f),this.Fo[t]=e,this.Lo[t]=c,this.Do[t]=o,_[t]=u,C[t]=p}const E=gt.tA[e],v=E.it/4|0;this.oA=new Int32Array(v),this.aA=new Int32Array(v),this.cA=new Int32Array(v),this.rA=new Int32Array(v),this.hA=new Int32Array(v),this.lA=new Int32Array(v),this.fA=-1!==c?new Int32Array(v):null;let L=0;for(let t=0;t<v;t++){const e=E[L];let i=E[L+1],s=E[L+2],n=E[L+3];L+=4,i<4&&(i=i-r&3),s<4&&(s=s-r&3),n<4&&(n=n-r&3),this.oA[t]=i,this.aA[t]=s,this.cA[t]=n,0===e?(this.rA[t]=_[i],this.hA[t]=_[s],this.lA[t]=_[n],this.fA&&(this.fA[t]=-1)):(this.rA[t]=C[i],this.hA[t]=C[s],this.lA[t]=C[n],this.fA&&(this.fA[t]=c))}}}var _t;!function(t){t[t.mA=0]="PLAIN",t[t.pA=1]="DIAGONAL",t[t.AA=2]="LEFT_SEMI_DIAGONAL_SMALL",t[t.IA=3]="RIGHT_SEMI_DIAGONAL_SMALL",t[t.gA=4]="LEFT_SEMI_DIAGONAL_BIG",t[t._A=5]="RIGHT_SEMI_DIAGONAL_BIG",t[t.iA=6]="HALF_SQUARE",t[t.sA=7]="CORNER_SMALL",t[t.nA=8]="CORNER_BIG",t[t.CA=9]="FAN_SMALL",t[t.bA=10]="FAN_BIG",t[t.TA=11]="TRAPEZIUM"}(_t||(_t={}));const Ct=_t;class bt{static EA=new R(8,32,51,51,!1);static vA=new S(100,null);static LA=new Int32Array(wt.up);static SA=new O(wt.up,500,null);static OA=new S(500,null);static kA=new E;static Fi=0;static RA=0;static xA=0;static MA=0;static FA=0;static DA=0;static NA=0;static UA=0;static PA=0;static BA=0;static WA=0;static GA=0;static HA=0;static YA=0;static VA=0;static XA=0;static jA=0;static zA=0;static ZA=0;static qA=0;static KA=0;static JA=0;static $A=!1;static QA=null;static tI=Int32Array.of(19,55,38,155,255,110,137,205,76);static eI=Int32Array.of(160,192,80,96,0,144,80,48,160);static iI=Int32Array.of(76,8,137,4,0,1,38,2,19);static sI=Int32Array.of(0,0,2,0,0,2,1,1,0);static nI=Int32Array.of(2,0,0,2,0,0,0,4,4);static rI=Int32Array.of(0,4,4,8,0,0,8,0,0);static hI=Int32Array.of(1,1,0,0,0,8,0,0,8);static lI=Int32Array.of(53,-53,-53,53);static oI=Int32Array.of(-53,-53,53,53);static aI=Int32Array.of(-45,45,45,-45);static cI=Int32Array.of(45,45,-45,-45);static fI=[new Int32Array(16),Int32Array.of(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),Int32Array.of(1,0,0,0,1,1,0,0,1,1,1,0,1,1,1,1),Int32Array.of(1,1,0,0,1,1,0,0,1,0,0,0,1,0,0,0),Int32Array.of(0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,1),Int32Array.of(0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1),Int32Array.of(1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1),Int32Array.of(1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0),Int32Array.of(0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0),Int32Array.of(1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,1),Int32Array.of(1,1,1,1,1,1,0,0,1,0,0,0,1,0,0,0),Int32Array.of(0,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1),Int32Array.of(0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1)];static uI=[Int32Array.of(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15),Int32Array.of(12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3),Int32Array.of(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0),Int32Array.of(3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12)];static dI=Int32Array.of(41,39248,41,4643,41,41,41,41,41,41,41,41,41,41,41,43086,41,41,41,41,41,41,41,8602,41,28992,41,41,41,41,41,5056,41,41,41,41,41,41,41,41,41,41,41,41,41,41,3131,41,41,41);static wI=0;static Kr=0;static Jr=0;static yI=-1;static mI=-1;static Ai=!0;static Ed=(t,e,i,s,n)=>{this.RA=0,this.xA=0,this.MA=t,this.FA=e,this.DA=t/2|0,this.NA=e/2|0;const r=new R(9,32,53,53,!1);for(let t=128;t<=384;t+=32)for(let e=0;e<2048;e+=64){this.UA=D._i[t],this.PA=D.Ci[t],this.BA=D._i[e],this.WA=D.Ci[e];const h=(t-128)/32|0,l=e/64|0;for(let t=-26;t<=26;t++)for(let e=-26;e<=26;e++){const o=128*t,a=128*e;let c=!1;for(let t=-i;t<=s;t+=128)if(this.pI(o,a,n[h]+t)){c=!0;break}r[h][l][t+25+1][e+25+1]=c}}for(let t=0;t<8;t++)for(let e=0;e<32;e++)for(let i=-25;i<25;i++)for(let s=-25;s<25;s++){let n=!1;t:for(let h=-1;h<=1;h++)for(let l=-1;l<=1;l++){if(r[t][e][i+h+25+1][s+l+25+1]){n=!0;break t}if(r[t][(e+1)%31][i+h+25+1][s+l+25+1]){n=!0;break t}if(r[t+1][e][i+h+25+1][s+l+25+1]){n=!0;break t}if(r[t+1][(e+1)%31][i+h+25+1][s+l+25+1]){n=!0;break t}}this.EA[t][e][i+25][s+25]=n}};static Wi=()=>{this.vA=null,this.LA=null,this.SA=null,this.kA=null,this.EA=null,this.OA=null,this.QA=null,console.log('World3D unloaded!')};static AI=(t,e,i,s,n,r,h,l)=>{bt.SA[t][bt.LA[t]++]=new ht(i/128|0,r/128|0,n/128|0,l/128|0,e,i,r,n,l,s,h)};static pI=(t,e,i)=>{const s=e*this.BA+t*this.WA>>16,n=e*this.WA-t*this.BA>>16,r=i*this.UA+n*this.PA>>16,h=i*this.PA-n*this.UA>>16;if(r<50||r>3500)return!1;const l=this.DA+((s<<9)/r|0),o=this.NA+((h<<9)/r|0);return l>=this.RA&&l<=this.MA&&o>=this.xA&&o<=this.FA};II;Vy;jy;gI;_I;CI;bI;TI;EI;vI=0;LI=0;SI=0;At(t,e,i,s){this.II=i,this.Vy=s,this.jy=e,this._I=new k(i,s,e,null),this.bI=new F(i,s+1,e+1),this.gI=t,this.CI=new S(5e3,null),this.TI=new Int32Array(1e4),this.EI=new Int32Array(1e4),this.gp()}gp=()=>{for(let t=0;t<this.II;t++)for(let e=0;e<this.Vy;e++)for(let i=0;i<this.jy;i++)this._I[t][e][i]=null;for(let t=0;t<wt.up;t++){for(let e=0;e<bt.LA[t];e++)bt.SA[t][e]=null;bt.LA[t]=0}for(let t=0;t<this.vI;t++)this.CI[t]=null;this.vI=0,bt.vA.ne(null)};OI=t=>{this.LI=t;for(let e=0;e<this.Vy;e++)for(let i=0;i<this.jy;i++)this._I[t][e][i]=new rt(t,e,i)};kI=(t,e)=>{const i=this._I[0][t][e];for(let i=0;i<3;i++){this._I[i][t][e]=this._I[i+1][t][e];const s=this._I[i][t][e];s&&s.wy--}this._I[0][t][e]||(this._I[0][t][e]=new rt(0,t,e));const s=this._I[0][t][e];s&&(s.My=i),this._I[3][t][e]=null};RI=(t,e,i,s)=>{const n=this._I[t][e][i];n&&(n.Ny=s)};xI=(t,e,i,s,n,r,h,l,o,a,c,f,u,d,w,y,m,p,A,I)=>{if(s===Ct.mA){for(let s=t;s>=0;s--)this._I[s][e][i]||(this._I[s][e][i]=new rt(s,e,i));const s=this._I[t][e][i];s&&(s.Ly=new It(c,f,u,d,-1,A,!1))}else if(s===Ct.pA){for(let s=t;s>=0;s--)this._I[s][e][i]||(this._I[s][e][i]=new rt(s,e,i));const s=this._I[t][e][i];s&&(s.Ly=new It(w,y,m,p,r,I,h===l&&h===o&&h===a))}else{for(let s=t;s>=0;s--)this._I[s][e][i]||(this._I[s][e][i]=new rt(s,e,i));const g=this._I[t][e][i];g&&(g.Sy=new gt(e,s,y,l,u,n,c,a,I,w,r,p,A,o,m,d,h,i,f))}};MI=(t,e,i,s,n,r,h)=>{this._I[e][i][s]||(this._I[e][i][s]=new rt(e,i,s));const l=this._I[e][i][s];l&&(l.Ry=new yt(n,128*i+64,128*s+64,t,r,h))};FI=(t,e,i)=>{const s=this._I[t][e][i];s&&(s.Ry=null)};DI=(t,e,i,s,n,r,h,l)=>{let o=0;const a=this._I[s][t][e];if(a)for(let t=0;t<a.Fy;t++){const e=a.Ey[t];if(!e||!e.fa)continue;const i=e.fa.da;i>o&&(o=i)}else this._I[s][t][e]=new rt(s,t,e);const c=this._I[s][t][e];c&&(c.xy=new At(i,128*t+64,128*e+64,r,h,l,n,o))};NI=(t,e,i)=>{const s=this._I[t][e][i];s&&(s.xy=null)};Lp=(t,e,i,s,n,r,h,l,o,a)=>{if(!h&&!l)return;for(let s=t;s>=0;s--)this._I[s][e][i]||(this._I[s][e][i]=new rt(s,e,i));const c=this._I[t][e][i];c&&(c.Oy=new mt(s,128*e+64,128*i+64,n,r,h,l,o,a))};Sp=(t,e,i,s)=>{const n=this._I[t][e][i];1===s&&n&&(n.Oy=null)};UI=(t,e,i,s,n,r,h,l,o,a,c)=>{if(!l)return;for(let s=t;s>=0;s--)this._I[s][e][i]||(this._I[s][e][i]=new rt(s,e,i));const f=this._I[t][e][i];f&&(f.ky=new pt(s,128*e+n+64,128*i+r+64,c,a,l,h,o))};PI=(t,e,i)=>{const s=this._I[t][e][i];s&&(s.ky=null)};BI=(t,e,i,s)=>{const n=this._I[t][e][i];if(!n)return;const r=n.ky;if(!r)return;const h=128*e+64,l=128*i+64;r.Dn=h+((r.Dn-h)*s/16|0),r.Un=l+((r.Un-l)*s/16|0)};WI=(t,e,i,s)=>{if(!s)return;const n=this._I[t][e][i];if(!n)return;const r=n.ky;r&&(r.fa=s)};GI=(t,e,i,s)=>{if(!s)return;const n=this._I[t][e][i];if(!n)return;const r=n.Ry;r&&(r.fa=s)};HI=(t,e,i,s)=>{if(!s)return;const n=this._I[t][e][i];if(!n)return;const r=n.Oy;r&&(r.Fp=s)};YI=(t,e,i,s,n)=>{if(!s)return;const r=this._I[i][t][e];if(!r)return;const h=r.Oy;h&&(h.Fp=s,h.Dp=n)};bp=(t,e,i,s,n,r,h,l,o,a,c)=>{if(!n&&!r)return!0;const f=128*e+64*o,u=128*i+64*a;return this.VI(f,u,s,t,e,i,o,a,n,r,h,l,c,!1)};XI=(t,e,i,s,n,r,h,l,o,a)=>{if(!n&&!r)return!0;let c=e-o,f=s-o,u=e+o,d=s+o;return a&&(l>640&&l<1408&&(d+=128),l>1152&&l<1920&&(u+=128),(l>1664||l<384)&&(f-=128),l>128&&l<896&&(c-=128)),c=c/128|0,f=f/128|0,u=u/128|0,d=d/128|0,this.VI(e,s,i,t,c,f,u+1-c,d-f+1,n,r,h,0,l,!0)};jI=(t,e,i,s,n,r,h,l,o,a,c,f)=>!o&&!a||this.VI(e,s,i,t,n,r,h+1-n,l-r+1,o,a,c,0,f,!0);Ep=(t,e,i)=>{const s=this._I[t][e][i];if(s)for(let t=0;t<s.Fy;t++){const n=s.Ey[t];if(n&&2==(n._y>>29&3)&&n.py===e&&n.Iy===i)return void this.zI(n)}};ZI=(t,e,i,s)=>{if(!s)return;const n=this._I[t][e][i];if(n)for(let t=0;t<n.Fy;t++){const e=n.Ey[t];if(e&&2==(e._y>>29&3))return void(e.fa=s)}};qI=()=>{for(let t=0;t<this.vI;t++){const e=this.CI[t];e&&this.zI(e),this.CI[t]=null}this.vI=0};KI=(t,e,i)=>{const s=this._I[t][e][i];return s&&s.Oy?s.Oy._y:0};JI=(t,e,i)=>{const s=this._I[t][i][e];return s&&s.ky?s.ky._y:0};$I=(t,e,i)=>{const s=this._I[t][e][i];if(!s)return 0;for(let t=0;t<s.Fy;t++){const n=s.Ey[t];if(n&&2==(n._y>>29&3)&&n.py===e&&n.Iy===i)return n._y}return 0};QI=(t,e,i)=>{const s=this._I[t][e][i];return s&&s.Ry?s.Ry._y:0};tg=(t,e,i,s)=>{const n=this._I[t][e][i];if(n){if(n.Oy&&n.Oy._y===s)return 255&n.Oy.Cy;if(n.ky&&n.ky._y===s)return 255&n.ky.Cy;if(n.Ry&&n.Ry._y===s)return 255&n.Ry.Cy;for(let t=0;t<n.Fy;t++){const e=n.Ey[t];if(e&&e._y===s)return 255&e.Cy}return-1}return-1};eg=(t,e,i,s,n)=>{const r=e*(0|Math.sqrt(i*i+s*s+n*n))>>8;for(let e=0;e<this.II;e++)for(let h=0;h<this.Vy;h++)for(let l=0;l<this.jy;l++){const o=this._I[e][h][l];if(!o)continue;const a=o.Oy;a&&a.Fp&&a.Fp.xo&&(this.ig(e,h,l,1,1,a.Fp),a.Dp&&a.Dp.xo&&(this.ig(e,h,l,1,1,a.Dp),this.sg(a.Fp,a.Dp,0,0,0,!1),a.Dp.Sa(t,r,i,s,n)),a.Fp.Sa(t,r,i,s,n));for(let a=0;a<o.Fy;a++){const c=o.Ey[a];c&&c.fa&&c.fa.xo&&(this.ig(e,h,l,c.Ay+1-c.py,c.gy-c.Iy+1,c.fa),c.fa.Sa(t,r,i,s,n))}const c=o.Ry;c&&c.fa&&c.fa.xo&&(this.ng(e,h,l,c.fa),c.fa.Sa(t,r,i,s,n))}};ng=(t,e,i,s)=>{if(e<this.Vy){const n=this._I[t][e+1][i];n&&n.Ry&&n.Ry.fa&&n.Ry.fa.xo&&this.sg(s,n.Ry.fa,128,0,0,!0)}if(i<this.Vy){const n=this._I[t][e][i+1];n&&n.Ry&&n.Ry.fa&&n.Ry.fa.xo&&this.sg(s,n.Ry.fa,0,0,128,!0)}if(e<this.Vy&&i<this.jy){const n=this._I[t][e+1][i+1];n&&n.Ry&&n.Ry.fa&&n.Ry.fa.xo&&this.sg(s,n.Ry.fa,128,0,128,!0)}if(e<this.Vy&&i>0){const n=this._I[t][e+1][i-1];n&&n.Ry&&n.Ry.fa&&n.Ry.fa.xo&&this.sg(s,n.Ry.fa,128,0,-128,!0)}};ig=(t,e,i,s,n,r)=>{let h=!0,l=e;const o=e+s,a=i-1,c=i+n;for(let f=t;f<=t+1;f++)if(f!==this.II){for(let u=l;u<=o;u++)if(!(u<0||u>=this.Vy))for(let l=a;l<=c;l++){if(l<0||l>=this.jy||h&&u<o&&l<c&&(l>=i||u===e))continue;const a=this._I[f][u][l];if(!a)continue;const d=128*(u-e)+64*(1-s),w=128*(l-i)+64*(1-n),y=((this.gI[f][u][l]+this.gI[f][u+1][l]+this.gI[f][u][l+1]+this.gI[f][u+1][l+1])/4|0)-((this.gI[t][e][i]+this.gI[t][e+1][i]+this.gI[t][e][i+1]+this.gI[t][e+1][i+1])/4|0),m=a.Oy;m&&m.Fp&&m.Fp.xo&&this.sg(r,m.Fp,d,y,w,h),m&&m.Dp&&m.Dp.xo&&this.sg(r,m.Dp,d,y,w,h);for(let t=0;t<a.Fy;t++){const l=a.Ey[t];if(!l||!l.fa||!l.fa.xo)continue;const o=l.Ay+1-l.py,c=l.gy+1-l.Iy;this.sg(r,l.fa,128*(l.py-e)+64*(o-s),y,128*(l.Iy-i)+64*(c-n),h)}}l--,h=!1}};sg=(t,e,i,s,n,r)=>{this.SI++;let h=0;const l=e.Fo,o=e.bl;if(t.xo&&t.Mo)for(let r=0;r<t.bl;r++){const a=t.xo[r],c=t.Mo[r];if(c&&0!==c.Fn){const f=t.Lo[r]-s;if(f>e.Jo)continue;const u=t.Fo[r]-i;if(u<e.jo||u>e.zo)continue;const d=t.Do[r]-n;if(d<e.Zo||d>e.qo)continue;if(e.xo&&e.Mo)for(let t=0;t<o;t++){const i=e.xo[t],s=e.Mo[t];u!==l[t]||d!==e.Do[t]||f!==e.Lo[t]||s&&0===s.Fn||(a&&i&&s&&(a.Dn+=s.Dn,a.Nn+=s.Nn,a.Un+=s.Un,a.Fn+=s.Fn,i.Dn+=c.Dn,i.Nn+=c.Nn,i.Un+=c.Un,i.Fn+=c.Fn,h++),this.TI[r]=this.SI,this.EI[t]=this.SI)}}}if(!(h<3)&&r){if(t.Ro)for(let e=0;e<t.Tl;e++)this.TI[t.No[e]]===this.SI&&this.TI[t.Uo[e]]===this.SI&&this.TI[t.Po[e]]===this.SI&&(t.Ro[e]=-1);if(e.Ro)for(let t=0;t<e.Tl;t++)this.EI[e.No[t]]===this.SI&&this.EI[e.Uo[t]]===this.SI&&this.EI[e.Po[t]]===this.SI&&(e.Ro[t]=-1)}};rg=(t,e,i,s,n,r)=>{const h=this._I[t][e][i];if(!h)return;const l=h.Ly;if(l){const t=l.jp;if(0!==t)for(let e=0;e<4;e++)s[n]=t,s[n+1]=t,s[n+2]=t,s[n+3]=t,n+=r;return}const o=h.Sy;if(!o)return;const a=o.uA,c=o.dA,f=o.wA,u=o.yA,d=bt.fI[a],w=bt.uI[c];let y=0;if(0===f)for(let t=0;t<4;t++)0!==d[w[y++]]&&(s[n]=u),0!==d[w[y++]]&&(s[n+1]=u),0!==d[w[y++]]&&(s[n+2]=u),0!==d[w[y++]]&&(s[n+3]=u),n+=r;else for(let t=0;t<4;t++)s[n]=0===d[w[y++]]?f:u,s[n+1]=0===d[w[y++]]?f:u,s[n+2]=0===d[w[y++]]?f:u,s[n+3]=0===d[w[y++]]?f:u,n+=r};hg=(t,e)=>{bt.$A=!0,bt.Kr=t,bt.Jr=e,bt.yI=-1,bt.mI=-1};re=(t,e,i,s,n,r,h)=>{t<0?t=0:t>=128*this.Vy&&(t=128*this.Vy-1),i<0?i=0:i>=128*this.jy&&(i=128*this.jy-1),bt.Fi++,bt.UA=D._i[r],bt.PA=D.Ci[r],bt.BA=D._i[n],bt.WA=D.Ci[n],bt.QA=bt.EA[(r-128)/32|0][n/64|0],bt.GA=t,bt.HA=e,bt.YA=i,bt.VA=t/128|0,bt.XA=i/128|0,bt.KA=s,bt.jA=bt.VA-25,bt.jA<0&&(bt.jA=0),bt.ZA=bt.XA-25,bt.ZA<0&&(bt.ZA=0),bt.zA=bt.VA+25,bt.zA>this.Vy&&(bt.zA=this.Vy),bt.qA=bt.XA+25,bt.qA>this.jy&&(bt.qA=this.jy),this.lg(),bt.JA=0;for(let t=this.LI;t<this.II;t++){const i=this._I[t];for(let n=bt.jA;n<bt.zA;n++)for(let r=bt.ZA;r<bt.qA;r++){const h=i[n][r];h&&(h.Ny<=s&&(bt.QA[n+25-bt.VA][r+25-bt.XA]||this.gI[t][n][r]-e>=2e3)?(h.Uy=!0,h.uh=!0,h.Py=h.Fy>0,bt.JA++):(h.Uy=!1,h.uh=!1,h.By=0))}}for(let t=this.LI;t<this.II;t++){const e=this._I[t];for(let t=-25;t<=0;t++){const i=bt.VA+t,s=bt.VA-t;if(!(i<bt.jA&&s>=bt.zA))for(let t=-25;t<=0;t++){const n=bt.XA+t,r=bt.XA-t;let l;if(i>=bt.jA&&(n>=bt.ZA&&(l=e[i][n],l&&l.Uy&&this.og(l,!0,h)),r<bt.qA&&(l=e[i][r],l&&l.Uy&&this.og(l,!0,h))),s<bt.zA&&(n>=bt.ZA&&(l=e[s][n],l&&l.Uy&&this.og(l,!0,h)),r<bt.qA&&(l=e[s][r],l&&l.Uy&&this.og(l,!0,h))),0===bt.JA)return void(bt.$A=!1)}}}for(let t=this.LI;t<this.II;t++){const e=this._I[t];for(let t=-25;t<=0;t++){const i=bt.VA+t,s=bt.VA-t;if(!(i<bt.jA&&s>=bt.zA))for(let t=-25;t<=0;t++){const n=bt.XA+t,r=bt.XA-t;let l;if(i>=bt.jA&&(n>=bt.ZA&&(l=e[i][n],l&&l.Uy&&this.og(l,!1,h)),r<bt.qA&&(l=e[i][r],l&&l.Uy&&this.og(l,!1,h))),s<bt.zA&&(n>=bt.ZA&&(l=e[s][n],l&&l.Uy&&this.og(l,!1,h)),r<bt.qA&&(l=e[s][r],l&&l.Uy&&this.og(l,!1,h))),0===bt.JA)return void(bt.$A=!1)}}}};VI=(t,e,i,s,n,r,h,l,o,a,c,f,u,d)=>{if(!o&&!a)return!1;for(let t=n;t<n+h;t++)for(let e=r;e<r+l;e++){if(t<0||e<0||t>=this.Vy||e>=this.jy)return!1;const i=this._I[s][t][e];if(i&&i.Fy>=5)return!1}const w=new nt(s,i,t,e,o,a,u,n,n+h-1,r,r+l-1,c,f);for(let t=n;t<n+h;t++)for(let e=r;e<r+l;e++){let i=0;t>n&&(i|=1),t<n+h-1&&(i+=4),e>r&&(i+=8),e<r+l-1&&(i+=2);for(let i=s;i>=0;i--)this._I[i][t][e]||(this._I[i][t][e]=new rt(i,t,e));const o=this._I[s][t][e];o&&(o.Ey[o.Fy]=w,o.vy[o.Fy]=i,o.Dy|=i,o.Fy++)}return d&&(this.CI[this.vI++]=w),!0};zI=t=>{for(let e=t.py;e<=t.Ay;e++)for(let i=t.Iy;i<=t.gy;i++){const s=this._I[t.wy][e][i];if(s){for(let e=0;e<s.Fy;e++)if(s.Ey[e]===t){s.Fy--;for(let t=e;t<s.Fy;t++)s.Ey[t]=s.Ey[t+1],s.vy[t]=s.vy[t+1];s.Ey[s.Fy]=null;break}s.Dy=0;for(let t=0;t<s.Fy;t++)s.Dy|=s.vy[t]}}};lg=()=>{const t=bt.LA[bt.KA],e=bt.SA[bt.KA];bt.wI=0;for(let i=0;i<t;i++){const t=e[i];if(!t)continue;let s,n,r,h;if(1===t.Ya){if(s=t.Yy+25-bt.VA,s>=0&&s<=50){n=t.Xy+25-bt.XA,n<0&&(n=0),r=t.jy+25-bt.XA,r>50&&(r=50);let e=!1;for(;n<=r;)if(bt.QA&&bt.QA[s][n++]){e=!0;break}if(e){if(h=bt.GA-t.jo,h>32)t.zy=1;else{if(h>=-32)continue;t.zy=2,h=-h}t.Ky=(t.Zo-bt.YA<<8)/h|0,t.Jy=(t.qo-bt.YA<<8)/h|0,t.$y=(t.Jo-bt.HA<<8)/h|0,t.Qy=(t.$o-bt.HA<<8)/h|0,bt.OA[bt.wI++]=t}}}else if(2===t.Ya){if(s=t.Xy+25-bt.XA,s>=0&&s<=50){n=t.Yy+25-bt.VA,n<0&&(n=0),r=t.Vy+25-bt.VA,r>50&&(r=50);let e=!1;for(;n<=r;)if(bt.QA&&bt.QA[n++][s]){e=!0;break}if(e){if(h=bt.YA-t.Zo,h>32)t.zy=3;else{if(h>=-32)continue;t.zy=4,h=-h}t.Zy=(t.jo-bt.GA<<8)/h|0,t.qy=(t.zo-bt.GA<<8)/h|0,t.$y=(t.Jo-bt.HA<<8)/h|0,t.Qy=(t.$o-bt.HA<<8)/h|0,bt.OA[bt.wI++]=t}}}else if(4===t.Ya&&(s=t.Jo-bt.HA,s>128&&(n=t.Xy+25-bt.XA,n<0&&(n=0),r=t.jy+25-bt.XA,r>50&&(r=50),n<=r))){let e=t.Yy+25-bt.VA;e<0&&(e=0),h=t.Vy+25-bt.VA,h>50&&(h=50);let i=!1;t:for(let t=e;t<=h;t++)for(let e=n;e<=r;e++)if(bt.QA&&bt.QA[t][e]){i=!0;break t}i&&(t.zy=5,t.Zy=(t.jo-bt.GA<<8)/s|0,t.qy=(t.zo-bt.GA<<8)/s|0,t.Ky=(t.Zo-bt.YA<<8)/s|0,t.Jy=(t.qo-bt.YA<<8)/s|0,bt.OA[bt.wI++]=t)}}};og=(t,e,i)=>{for(bt.kA.ce(t);;){let t;do{if(t=bt.kA.ue(),!t)return}while(!t.uh);const s=t.Dn,n=t.Un,r=t.wy,h=t.Ty,l=this._I[r];if(t.Uy){if(e){if(r>0){const t=this._I[r-1][s][n];if(t&&t.uh)continue}if(s<=bt.VA&&s>bt.jA){const e=l[s-1][n];if(e&&e.uh&&(e.Uy||0==(1&t.Dy)))continue}if(s>=bt.VA&&s<bt.zA-1){const e=l[s+1][n];if(e&&e.uh&&(e.Uy||0==(4&t.Dy)))continue}if(n<=bt.XA&&n>bt.ZA){const e=l[s][n-1];if(e&&e.uh&&(e.Uy||0==(8&t.Dy)))continue}if(n>=bt.XA&&n<bt.qA-1){const e=l[s][n+1];if(e&&e.uh&&(e.Uy||0==(2&t.Dy)))continue}}else e=!0;if(t.Uy=!1,t.My){const e=t.My;e.Ly?this.ag(0,s,n)||this.cg(e.Ly,0,s,n,bt.UA,bt.PA,bt.BA,bt.WA):e.Sy&&!this.ag(0,s,n)&&this.fg(s,n,e.Sy,bt.UA,bt.PA,bt.BA,bt.WA);const r=e.Oy;r&&r.Fp?.re(0,bt.UA,bt.PA,bt.BA,bt.WA,r.Dn-bt.GA,r.Nn-bt.HA,r.Un-bt.YA,r._y);for(let t=0;t<e.Fy;t++){const s=e.Ey[t];if(s){let t=s.fa;t||(t=s.yy?.re(i)??null),t?.re(s.my,bt.UA,bt.PA,bt.BA,bt.WA,s.Dn-bt.GA,s.Nn-bt.HA,s.Un-bt.YA,s._y)}}}let o=!1;t.Ly?this.ag(h,s,n)||(o=!0,this.cg(t.Ly,h,s,n,bt.UA,bt.PA,bt.BA,bt.WA)):t.Sy&&!this.ag(h,s,n)&&(o=!0,this.fg(s,n,t.Sy,bt.UA,bt.PA,bt.BA,bt.WA));let a=0,c=0;const f=t.Oy,u=t.ky;if((f||u)&&(bt.VA===s?a+=1:bt.VA<s&&(a+=2),bt.XA===n?a+=3:bt.XA>n&&(a+=6),c=bt.tI[a],t.Hy=bt.iI[a]),f&&(0==(f.xp&bt.eI[a])?t.By=0:16===f.xp?(t.By=3,t.Wy=bt.sI[a],t.Gy=3-t.Wy):32===f.xp?(t.By=6,t.Wy=bt.nI[a],t.Gy=6-t.Wy):64===f.xp?(t.By=12,t.Wy=bt.rI[a],t.Gy=12-t.Wy):(t.By=9,t.Wy=bt.hI[a],t.Gy=9-t.Wy),0==(f.xp&c)||this.ug(h,s,n,f.xp)||f.Fp?.re(0,bt.UA,bt.PA,bt.BA,bt.WA,f.Dn-bt.GA,f.Nn-bt.HA,f.Un-bt.YA,f._y),0==(f.Mp&c)||this.ug(h,s,n,f.Mp)||f.Dp?.re(0,bt.UA,bt.PA,bt.BA,bt.WA,f.Dn-bt.GA,f.Nn-bt.HA,f.Un-bt.YA,f._y)),u&&!this.Uy(h,s,n,u.fa.$o))if(0!=(u.Ya&c))u.fa.re(u.Np,bt.UA,bt.PA,bt.BA,bt.WA,u.Dn-bt.GA,u.Nn-bt.HA,u.Un-bt.YA,u._y);else if(0!=(768&u.Ya)){const t=u.Dn-bt.GA,e=u.Nn-bt.HA,i=u.Un-bt.YA,s=u.Np;let n,r;if(n=s===at.Mm||s===at.Fm?-t:t,r=s===at.Fm||s===at.Dm?-i:i,0!=(256&u.Ya)&&r<n){const n=t+bt.lI[s],r=i+bt.oI[s];u.fa.re(512*s+256,bt.UA,bt.PA,bt.BA,bt.WA,n,e,r,u._y)}if(0!=(512&u.Ya)&&r>n){const n=t+bt.aI[s],r=i+bt.cI[s];u.fa.re(512*s+1280&2047,bt.UA,bt.PA,bt.BA,bt.WA,n,e,r,u._y)}}if(o){const e=t.Ry;e&&e.fa?.re(0,bt.UA,bt.PA,bt.BA,bt.WA,e.Dn-bt.GA,e.Nn-bt.HA,e.Un-bt.YA,e._y);const i=t.xy;i&&0===i.Wp&&(i.Bp&&i.Bp.re(0,bt.UA,bt.PA,bt.BA,bt.WA,i.Dn-bt.GA,i.Nn-bt.HA,i.Un-bt.YA,i._y),i.Pp&&i.Pp.re(0,bt.UA,bt.PA,bt.BA,bt.WA,i.Dn-bt.GA,i.Nn-bt.HA,i.Un-bt.YA,i._y),i.Up&&i.Up.re(0,bt.UA,bt.PA,bt.BA,bt.WA,i.Dn-bt.GA,i.Nn-bt.HA,i.Un-bt.YA,i._y))}const d=t.Dy;if(0!==d){if(s<bt.VA&&0!=(4&d)){const t=l[s+1][n];t&&t.uh&&bt.kA.ce(t)}if(n<bt.XA&&0!=(2&d)){const t=l[s][n+1];t&&t.uh&&bt.kA.ce(t)}if(s>bt.VA&&0!=(1&d)){const t=l[s-1][n];t&&t.uh&&bt.kA.ce(t)}if(n>bt.XA&&0!=(8&d)){const t=l[s][n-1];t&&t.uh&&bt.kA.ce(t)}}}if(0!==t.By){let e=!0;for(let i=0;i<t.Fy;i++){const s=t.Ey[i];if(s&&(s.Fi!==bt.Fi&&(t.vy[i]&t.By)===t.Wy)){e=!1;break}}if(e){const e=t.Oy;e&&!this.ug(h,s,n,e.xp)&&e.Fp?.re(0,bt.UA,bt.PA,bt.BA,bt.WA,e.Dn-bt.GA,e.Nn-bt.HA,e.Un-bt.YA,e._y),t.By=0}}if(t.Py){const e=t.Fy;t.Py=!1;let r=0;t:for(let i=0;i<e;i++){const e=t.Ey[i];if(!e||e.Fi===bt.Fi)continue;for(let i=e.py;i<=e.Ay;i++)for(let s=e.Iy;s<=e.gy;s++){const n=l[i][s];if(n){if(!n.Uy){if(0===n.By)continue;let r=0;if(i>e.py&&(r+=1),i<e.Ay&&(r+=4),s>e.Iy&&(r+=8),s<e.gy&&(r+=2),(r&n.By)!==t.Gy)continue}t.Py=!0;continue t}}bt.vA[r++]=e;let s=bt.VA-e.py;const n=e.Ay-bt.VA;n>s&&(s=n);const h=bt.XA-e.Iy,o=e.gy-bt.XA;e.by=o>h?s+o:s+h}for(;;){let t=-50,e=-1;for(let i=0;i<r;i++){const s=bt.vA[i];s&&(s.Fi!==bt.Fi&&s.by>t&&(t=s.by,e=i))}if(-1===e)break;const o=bt.vA[e];if(o){o.Fi=bt.Fi;let t=o.fa;t||(t=o.yy?.re(i)??null),t&&!this.dg(h,o.py,o.Ay,o.Iy,o.gy,t.$o)&&t.re(o.my,bt.UA,bt.PA,bt.BA,bt.WA,o.Dn-bt.GA,o.Nn-bt.HA,o.Un-bt.YA,o._y);for(let t=o.py;t<=o.Ay;t++)for(let e=o.Iy;e<=o.gy;e++){const i=l[t][e];i&&(0!==i.By?bt.kA.ce(i):t===s&&e===n||!i.uh||bt.kA.ce(i))}}}if(t.Py)continue}if(!t.uh||0!==t.By)continue;if(s<=bt.VA&&s>bt.jA){const t=l[s-1][n];if(t&&t.uh)continue}if(s>=bt.VA&&s<bt.zA-1){const t=l[s+1][n];if(t&&t.uh)continue}if(n<=bt.XA&&n>bt.ZA){const t=l[s][n-1];if(t&&t.uh)continue}if(n>=bt.XA&&n<bt.qA-1){const t=l[s][n+1];if(t&&t.uh)continue}t.uh=!1,bt.JA--;const o=t.xy;if(o&&0!==o.Wp&&(o.Bp&&o.Bp.re(0,bt.UA,bt.PA,bt.BA,bt.WA,o.Dn-bt.GA,o.Nn-bt.HA-o.Wp,o.Un-bt.YA,o._y),o.Pp&&o.Pp.re(0,bt.UA,bt.PA,bt.BA,bt.WA,o.Dn-bt.GA,o.Nn-bt.HA-o.Wp,o.Un-bt.YA,o._y),o.Up&&o.Up.re(0,bt.UA,bt.PA,bt.BA,bt.WA,o.Dn-bt.GA,o.Nn-bt.HA-o.Wp,o.Un-bt.YA,o._y)),0!==t.Hy){const e=t.ky;if(e&&!this.Uy(h,s,n,e.fa.$o))if(0!=(e.Ya&t.Hy))e.fa.re(e.Np,bt.UA,bt.PA,bt.BA,bt.WA,e.Dn-bt.GA,e.Nn-bt.HA,e.Un-bt.YA,e._y);else if(0!=(768&e.Ya)){const t=e.Dn-bt.GA,i=e.Nn-bt.HA,s=e.Un-bt.YA,n=e.Np;let r,h;if(r=n===at.Mm||n===at.Fm?-t:t,h=n===at.Fm||n===at.Dm?-s:s,0!=(256&e.Ya)&&h>=r){const r=t+bt.lI[n],h=s+bt.oI[n];e.fa.re(512*n+256,bt.UA,bt.PA,bt.BA,bt.WA,r,i,h,e._y)}if(0!=(512&e.Ya)&&h<=r){const r=t+bt.aI[n],h=s+bt.cI[n];e.fa.re(512*n+1280&2047,bt.UA,bt.PA,bt.BA,bt.WA,r,i,h,e._y)}}const i=t.Oy;i&&(0==(i.Mp&t.Hy)||this.ug(h,s,n,i.Mp)||i.Dp?.re(0,bt.UA,bt.PA,bt.BA,bt.WA,i.Dn-bt.GA,i.Nn-bt.HA,i.Un-bt.YA,i._y),0==(i.xp&t.Hy)||this.ug(h,s,n,i.xp)||i.Fp?.re(0,bt.UA,bt.PA,bt.BA,bt.WA,i.Dn-bt.GA,i.Nn-bt.HA,i.Un-bt.YA,i._y))}if(r<this.II-1){const t=this._I[r+1][s][n];t&&t.uh&&bt.kA.ce(t)}if(s<bt.VA){const t=l[s+1][n];t&&t.uh&&bt.kA.ce(t)}if(n<bt.XA){const t=l[s][n+1];t&&t.uh&&bt.kA.ce(t)}if(s>bt.VA){const t=l[s-1][n];t&&t.uh&&bt.kA.ce(t)}if(n>bt.XA){const t=l[s][n-1];t&&t.uh&&bt.kA.ce(t)}}};cg=(t,e,i,s,n,r,h,l)=>{let o,a,c,f,u=o=(i<<7)-bt.GA,d=a=(s<<7)-bt.YA,w=c=u+128,y=f=d+128,p=this.gI[e][i][s]-bt.HA,A=this.gI[e][i+1][s]-bt.HA,I=this.gI[e][i+1][s+1]-bt.HA,g=this.gI[e][i][s+1]-bt.HA,_=d*h+u*l>>16;if(d=d*l-u*h>>16,u=_,_=p*r-d*n>>16,d=p*n+d*r>>16,p=_,d<50)return;if(_=a*h+w*l>>16,a=a*l-w*h>>16,w=_,_=A*r-a*n>>16,a=A*n+a*r>>16,A=_,a<50)return;if(_=y*h+c*l>>16,y=y*l-c*h>>16,c=_,_=I*r-y*n>>16,y=I*n+y*r>>16,I=_,y<50)return;if(_=f*h+o*l>>16,f=f*l-o*h>>16,o=_,_=g*r-f*n>>16,f=g*n+f*r>>16,g=_,f<50)return;const C=D.vi+((u<<9)/d|0),b=D.Li+((p<<9)/d|0),T=D.vi+((w<<9)/a|0),E=D.Li+((A<<9)/a|0),v=D.vi+((c<<9)/y|0),L=D.Li+((I<<9)/y|0),S=D.vi+((o<<9)/f|0),O=D.Li+((g<<9)/f|0);if(D.ki=0,(v-S)*(E-O)-(L-O)*(T-S)>0)if(D.Oi=v<0||S<0||T<0||v>m.Pt||S>m.Pt||T>m.Pt,bt.$A&&this.wg(bt.Kr,bt.Jr,L,O,E,v,S,T)&&(bt.yI=i,bt.mI=s),-1===t.Xp)12345678!==t.Yp&&D.Ji(v,S,T,L,O,E,t.Yp,t.Vp,t.Hp);else if(bt.Ai){const e=bt.dI[t.Xp];D.Ji(v,S,T,L,O,E,this.yg(e,t.Yp),this.yg(e,t.Vp),this.yg(e,t.Hp))}else t.zp?D.es(v,S,T,L,O,E,t.Yp,t.Vp,t.Hp,u,p,d,w,o,A,g,a,f,t.Xp):D.es(v,S,T,L,O,E,t.Yp,t.Vp,t.Hp,c,I,y,o,w,g,A,f,a,t.Xp);if(!((C-T)*(O-E)-(b-E)*(S-T)<=0))if(D.Oi=C<0||T<0||S<0||C>m.Pt||T>m.Pt||S>m.Pt,bt.$A&&this.wg(bt.Kr,bt.Jr,b,E,O,C,T,S)&&(bt.yI=i,bt.mI=s),-1!==t.Xp){if(!bt.Ai)return void D.es(C,T,S,b,E,O,t.Gp,t.Hp,t.Vp,u,p,d,w,o,A,g,a,f,t.Xp);const e=bt.dI[t.Xp];D.Ji(C,T,S,b,E,O,this.yg(e,t.Gp),this.yg(e,t.Hp),this.yg(e,t.Vp))}else 12345678!==t.Gp&&D.Ji(C,T,S,b,E,O,t.Gp,t.Hp,t.Vp)};fg=(t,e,i,s,n,r,h)=>{let l=i.Fo.it;for(let t=0;t<l;t++){let e=i.Fo[t]-bt.GA,l=i.Lo[t]-bt.HA,o=i.Do[t]-bt.YA,a=o*r+e*h>>16;if(o=o*h-e*r>>16,e=a,a=l*n-o*s>>16,o=l*s+o*n>>16,l=a,o<50)return;i.fA&&(gt.Kp[t]=e,gt.Jp[t]=l,gt.$p[t]=o),gt.Zp[t]=D.vi+((e<<9)/o|0),gt.qp[t]=D.Li+((l<<9)/o|0)}D.ki=0,l=i.oA.it;for(let s=0;s<l;s++){const n=i.oA[s],r=i.aA[s],h=i.cA[s],l=gt.Zp[n],o=gt.Zp[r],a=gt.Zp[h],c=gt.qp[n],f=gt.qp[r],u=gt.qp[h];if((l-o)*(u-f)-(c-f)*(a-o)>0)if(D.Oi=l<0||o<0||a<0||l>m.Pt||o>m.Pt||a>m.Pt,bt.$A&&this.wg(bt.Kr,bt.Jr,c,f,u,l,o,a)&&(bt.yI=t,bt.mI=e),i.fA&&-1!==i.fA[s])if(bt.Ai){const t=bt.dI[i.fA[s]];D.Ji(l,o,a,c,f,u,this.yg(t,i.rA[s]),this.yg(t,i.hA[s]),this.yg(t,i.lA[s]))}else i.zp?D.es(l,o,a,c,f,u,i.rA[s],i.hA[s],i.lA[s],gt.Kp[0],gt.Jp[0],gt.$p[0],gt.Kp[1],gt.Kp[3],gt.Jp[1],gt.Jp[3],gt.$p[1],gt.$p[3],i.fA[s]):D.es(l,o,a,c,f,u,i.rA[s],i.hA[s],i.lA[s],gt.Kp[n],gt.Jp[n],gt.$p[n],gt.Kp[r],gt.Kp[h],gt.Jp[r],gt.Jp[h],gt.$p[r],gt.$p[h],i.fA[s]);else 12345678!==i.rA[s]&&D.Ji(l,o,a,c,f,u,i.rA[s],i.hA[s],i.lA[s])}};ag=(t,e,i)=>{const s=this.bI[t][e][i];if(s===-bt.Fi)return!1;if(s===bt.Fi)return!0;{const s=e<<7,n=i<<7;return this.mg(s+1,this.gI[t][e][i],n+1)&&this.mg(s+128-1,this.gI[t][e+1][i],n+1)&&this.mg(s+128-1,this.gI[t][e+1][i+1],n+128-1)&&this.mg(s+1,this.gI[t][e][i+1],n+128-1)?(this.bI[t][e][i]=bt.Fi,!0):(this.bI[t][e][i]=-bt.Fi,!1)}};ug=(t,e,i,s)=>{if(!this.ag(t,e,i))return!1;const n=e<<7,r=i<<7,h=this.gI[t][e][i]-1,l=h-120,o=h-230,a=h-238;if(s<16){if(1===s){if(n>bt.GA){if(!this.mg(n,h,r))return!1;if(!this.mg(n,h,r+128))return!1}if(t>0){if(!this.mg(n,l,r))return!1;if(!this.mg(n,l,r+128))return!1}return!!this.mg(n,o,r)&&this.mg(n,o,r+128)}if(2===s){if(r<bt.YA){if(!this.mg(n,h,r+128))return!1;if(!this.mg(n+128,h,r+128))return!1}if(t>0){if(!this.mg(n,l,r+128))return!1;if(!this.mg(n+128,l,r+128))return!1}return!!this.mg(n,o,r+128)&&this.mg(n+128,o,r+128)}if(4===s){if(n<bt.GA){if(!this.mg(n+128,h,r))return!1;if(!this.mg(n+128,h,r+128))return!1}if(t>0){if(!this.mg(n+128,l,r))return!1;if(!this.mg(n+128,l,r+128))return!1}return!!this.mg(n+128,o,r)&&this.mg(n+128,o,r+128)}if(8===s){if(r>bt.YA){if(!this.mg(n,h,r))return!1;if(!this.mg(n+128,h,r))return!1}if(t>0){if(!this.mg(n,l,r))return!1;if(!this.mg(n+128,l,r))return!1}return!!this.mg(n,o,r)&&this.mg(n+128,o,r)}}return!!this.mg(n+64,a,r+64)&&(16===s?this.mg(n,o,r+128):32===s?this.mg(n+128,o,r+128):64===s?this.mg(n+128,o,r):128===s?this.mg(n,o,r):(console.warn('Warning unsupported wall type!'),!0))};Uy=(t,e,i,s)=>{if(this.ag(t,e,i)){const n=e<<7,r=i<<7;return this.mg(n+1,this.gI[t][e][i]-s,r+1)&&this.mg(n+128-1,this.gI[t][e+1][i]-s,r+1)&&this.mg(n+128-1,this.gI[t][e+1][i+1]-s,r+128-1)&&this.mg(n+1,this.gI[t][e][i+1]-s,r+128-1)}return!1};dg=(t,e,i,s,n,r)=>{let h,l;if(e!==i||s!==n){for(h=e;h<=i;h++)for(l=s;l<=n;l++)if(this.bI[t][h][l]===-bt.Fi)return!1;l=1+(e<<7);const o=2+(s<<7),a=this.gI[t][e][s]-r;if(!this.mg(l,a,o))return!1;const c=(i<<7)-1;if(!this.mg(c,a,o))return!1;const f=(n<<7)-1;return!!this.mg(l,a,f)&&this.mg(c,a,f)}return!!this.ag(t,e,s)&&(h=e<<7,l=s<<7,this.mg(h+1,this.gI[t][e][s]-r,l+1)&&this.mg(h+128-1,this.gI[t][e+1][s]-r,l+1)&&this.mg(h+128-1,this.gI[t][e+1][s+1]-r,l+128-1)&&this.mg(h+1,this.gI[t][e][s+1]-r,l+128-1))};mg=(t,e,i)=>{for(let s=0;s<bt.wI;s++){const n=bt.OA[s];if(n)if(1===n.zy){const s=n.jo-t;if(s>0){const t=n.Zo+(n.Ky*s>>8),r=n.qo+(n.Jy*s>>8),h=n.Jo+(n.$y*s>>8),l=n.$o+(n.Qy*s>>8);if(i>=t&&i<=r&&e>=h&&e<=l)return!0}}else if(2===n.zy){const s=t-n.jo;if(s>0){const t=n.Zo+(n.Ky*s>>8),r=n.qo+(n.Jy*s>>8),h=n.Jo+(n.$y*s>>8),l=n.$o+(n.Qy*s>>8);if(i>=t&&i<=r&&e>=h&&e<=l)return!0}}else if(3===n.zy){const s=n.Zo-i;if(s>0){const i=n.jo+(n.Zy*s>>8),r=n.zo+(n.qy*s>>8),h=n.Jo+(n.$y*s>>8),l=n.$o+(n.Qy*s>>8);if(t>=i&&t<=r&&e>=h&&e<=l)return!0}}else if(4===n.zy){const s=i-n.Zo;if(s>0){const i=n.jo+(n.Zy*s>>8),r=n.zo+(n.qy*s>>8),h=n.Jo+(n.$y*s>>8),l=n.$o+(n.Qy*s>>8);if(t>=i&&t<=r&&e>=h&&e<=l)return!0}}else if(5===n.zy){const s=e-n.Jo;if(s>0){const e=n.jo+(n.Zy*s>>8),r=n.zo+(n.qy*s>>8),h=n.Zo+(n.Ky*s>>8),l=n.qo+(n.Jy*s>>8);if(t>=e&&t<=r&&i>=h&&i<=l)return!0}}}return!1};wg=(t,e,i,s,n,r,h,l)=>{if(e<i&&e<s&&e<n)return!1;if(e>i&&e>s&&e>n)return!1;if(t<r&&t<h&&t<l)return!1;if(t>r&&t>h&&t>l)return!1;const o=(e-s)*(l-h)-(t-h)*(n-s);return((e-i)*(h-r)-(t-r)*(s-i))*o>0&&o*((e-n)*(r-l)-(t-l)*(i-n))>0};yg=(t,e)=>((e=(127-e)*(127&t)/160|0)<2?e=2:e>126&&(e=126),(65408&t)+e)}class Tt{Tt=-1;pg=null;Ag=(t,e)=>{for(this.Tt=t;;){const i=e.Re;if(0===i)break;this.ml(t,i,e)}}}class Et extends Tt{static Ig=0;static pl=[];static Al=t=>{const e=new v(t.j('flo.dat'));this.Ig=e.Me;for(let t=0;t<this.Ig;t++)this.pl[t]=new Et,this.pl[t].Ag(t,e)};static gg=(t,e,i)=>(i>179&&(e=e/2|0),i>192&&(e=e/2|0),i>217&&(e=e/2|0),i>243&&(e=e/2|0),((t/4|0)<<10)+((e/32|0)<<7)+(i/2|0));static _g=(t,e)=>-1===t?12345678:((e=e*(127&t)/128|0)<2?e=2:e>126&&(e=126),(65408&t)+e);static Cg=(t,e)=>-2===t?12345678:-1===t?(e<0?e=0:e>127&&(e=127),127-e):((e=e*(127&t)/128|0)<2?e=2:e>126&&(e=126),(65408&t)+e);bg=0;Tg=-1;Eg=!1;vg=!0;It=null;Lg=0;Sg=0;Og=0;kg=0;Rg=0;xg=0;ml=(t,e,i)=>{1===e?(this.bg=i.De,this.Mg(this.bg)):2===e?this.Tg=i.Re:3===e?this.Eg=!0:5===e?this.vg=!1:6===e?this.It=i.We:console.log('Error unrecognised config code: ',e)};Mg=t=>{const e=(t>>16&255)/256,i=(t>>8&255)/256,s=(255&t)/256;let n=e;i<e&&(n=i),s<n&&(n=s);let r=e;i>e&&(r=i),s>r&&(r=s);let h=0,l=0;const o=(n+r)/2;n!==r&&(o<.5&&(l=(r-n)/(r+n)),o>=.5&&(l=(r-n)/(2-r-n)),e===r?h=(i-s)/(r-n):i===r?h=(s-e)/(r-n)+2:s===r&&(h=(e-i)/(r-n)+4)),h/=6,this.Lg=256*h|0,this.Sg=256*l|0,this.Og=256*o|0,this.Sg<0?this.Sg=0:this.Sg>255&&(this.Sg=255),this.Og<0?this.Og=0:this.Og>255&&(this.Og=255),this.kg=o>.5?(1-o)*l*512|0:o*l*512|0,this.kg<1&&(this.kg=1),this.Rg=h*this.kg|0;let a=this.Lg+(16*Math.Le()|0)-8;a<0?a=0:a>255&&(a=255);let c=this.Sg+(48*Math.Le()|0)-24;c<0?c=0:c>255&&(c=255);let f=this.Og+(48*Math.Le()|0)-24;f<0?f=0:f>255&&(f=255),this.xg=Et.gg(a,c,f)}}class vt extends Tt{static Ig=0;static Fg=null;static cl=null;static Dg=null;static Ng=0;static Ug=new K(500);static Pg=new K(30);static Al=t=>{this.cl=new v(t.j('loc.dat'));const e=new v(t.j('loc.idx'));this.Ig=e.Me,this.Dg=new Int32Array(this.Ig);let i=2;for(let t=0;t<this.Ig;t++)this.Dg[t]=i,i+=e.Me;this.Fg=new S(10,null);for(let t=0;t<10;t++)this.Fg[t]=new vt};static z=t=>{if(!this.Fg||!this.Dg||!this.cl)throw new Error('LocType not loaded!!!');for(let e=0;e<10;e++){const i=this.Fg[e];if(i&&i.wp===t)return i}this.Ng=(this.Ng+1)%10;const e=this.Fg[this.Ng];return this.cl.Ee=this.Dg[t],e.wp=t,e.gp(),e.Ag(t,this.cl),e.Bg||(e.Bg=new Int32Array(1)),-1===e.Wg&&e.Bg&&(e.Gg=e.Bg.it>0&&e.Bg[0]===ut.Km,e.Hg&&(e.Gg=!0)),e};static Wi=()=>{this.Ug=null,this.Pg=null,this.Dg=null,this.Fg=null,this.cl=null};wp=-1;Yg=null;Bg=null;It=null;Vg=null;Xg=null;jg=null;te=1;it=1;zg=!0;Zg=!0;Gg=!1;Wg=-1;qg=!1;Kg=!1;vg=!1;Iu=-1;Jg=!1;$g=16;Qg=0;t_=0;Hg=null;e_=-1;i_=-1;s_=!1;n_=!0;r_=128;h_=128;l_=128;o_=0;a_=0;c_=0;f_=0;u_=!1;ml=(t,e,i)=>{if(1===e){const t=i.Re;this.Yg=new Int32Array(t),this.Bg=new Int32Array(t);for(let e=0;e<t;e++)this.Yg[e]=i.Me,this.Bg[e]=i.Re}else if(2===e)this.It=i.We;else if(3===e)this.Vg=i.We;else if(14===e)this.te=i.Re;else if(15===e)this.it=i.Re;else if(17===e)this.zg=!1;else if(18===e)this.Zg=!1;else if(19===e)this.Wg=i.Re,1===this.Wg&&(this.Gg=!0);else if(21===e)this.qg=!0;else if(22===e)this.Kg=!0;else if(23===e)this.vg=!0;else if(24===e)this.Iu=i.Me,65535===this.Iu&&(this.Iu=-1);else if(25===e)this.Jg=!0;else if(28===e)this.$g=i.Re;else if(29===e)this.Qg=i.xe;else if(39===e)this.t_=i.xe;else if(e>=30&&e<39)this.Hg||(this.Hg=new S(5,null)),this.Hg[e-30]=i.We,'hidden'===this.Hg[e-30]?.oc()&&(this.Hg[e-30]=null);else if(40===e){const t=i.Re;this.Xg=new Uint16Array(t),this.jg=new Uint16Array(t);for(let e=0;e<t;e++)this.Xg[e]=i.Me,this.jg[e]=i.Me}else 60===e?this.e_=i.Me:62===e?this.s_=!0:64===e?this.n_=!1:65===e?this.r_=i.Me:66===e?this.h_=i.Me:67===e?this.l_=i.Me:68===e?this.i_=i.Me:69===e?this.o_=i.Re:70===e?this.a_=i.Fe:71===e?this.c_=i.Fe:72===e?this.f_=i.Fe:73===e&&(this.u_=!0)};pu=(t,e,i,s,n,r,h)=>{if(!this.Bg)return null;let l=-1;for(let e=0;e<this.Bg.it;e++)if(this.Bg[e]===t){l=e;break}if(-1===l)return null;const o=BigInt(BigInt(this.wp)<<6n)+BigInt(BigInt(l)<<3n)+BigInt(e)+BigInt(BigInt(h)+1n<<32n);let a=vt.Pg?.z(o);if(a){if((this.qg||this.Kg)&&(a=z.vo(a,this.qg,this.Kg)),this.qg){const t=(i+s+n+r)/4|0;for(let e=0;e<a.bl;e++){const h=a.Fo[e],l=i+((s-i)*(h+64)/128|0),o=l+((r+((n-r)*(h+64)/128|0)-l)*(a.Do[e]+64)/128|0);a.Lo[e]+=o-t}a.pa()}return a}if(!this.Yg)return null;if(l>=this.Yg.it)return null;let c=this.Yg[l];if(-1===c)return null;const f=this.s_!==e>3;f&&(c+=65536);let u=vt.Ug?.z(BigInt(c));u||(u=z.fa(65535&c),f&&u.Ea(),vt.Ug?.Zh(BigInt(c),u));const d=128!==this.r_||128!==this.h_||128!==this.l_,w=0!==this.a_||0!==this.c_||0!==this.f_;let y=z.ea(u,!this.Xg,!this.Jg,e===at.xm&&-1===h&&!d&&!w);for(-1!==h&&(y.Aa(),y._a(h),y.ha=null,y.ra=null);e-- >0;)y.Ca();if(this.Xg&&this.jg)for(let t=0;t<this.Xg.it;t++)y.Ta(this.Xg[t],this.jg[t]);if(d&&y.va(this.r_,this.h_,this.l_),w&&y.yi(this.c_,this.a_,this.f_),y.La(64+(255&this.Qg),5*(255&this.t_)+768,-50,-10,-50,!this.Kg),this.zg&&(y.da=y.$o),vt.Pg?.Zh(o,y),(this.qg||this.Kg)&&(y=z.vo(y,this.qg,this.Kg)),this.qg){const t=(i+s+n+r)/4|0;for(let e=0;e<y.bl;e++){const h=y.Fo[e],l=i+((s-i)*(h+64)/128|0),o=l+((r+((n-r)*(h+64)/128|0)-l)*(y.Do[e]+64)/128|0);y.Lo[e]+=o-t}y.pa()}return y};gp=()=>{this.Yg=null,this.Bg=null,this.It=null,this.Vg=null,this.Xg=null,this.jg=null,this.te=1,this.it=1,this.zg=!0,this.Zg=!0,this.Gg=!1,this.Wg=-1,this.qg=!1,this.Kg=!1,this.vg=!1,this.Iu=-1,this.$g=16,this.Qg=0,this.t_=0,this.Hg=null,this.Jg=!1,this.e_=-1,this.i_=-1,this.s_=!1,this.n_=!0,this.r_=128,this.h_=128,this.l_=128,this.o_=0,this.a_=0,this.c_=0,this.f_=0,this.u_=!1}}class Lt extends w{d_;w_;y_;m_;wp;p_;Ou;ku;At(t,e,i,s,n,r,h){super(),this.d_=e,this.w_=i,this.y_=s,this.m_=n,this.wp=t,this.p_=r,h&&-1!==r.A_&&this.p_._l?(this.Ou=Math.Le()*this.p_.I_|0,this.ku=Math.Le()*this.p_._l[this.Ou]|0):(this.Ou=-1,this.ku=0)}}class St extends Tt{static Ig=0;static pl=[];static Al=t=>{const e=new v(t.j('seq.dat'));this.Ig=e.Me;for(let t=0;t<this.Ig;t++)this.pl[t]=new St,this.pl[t].Ag(t,e),0===this.pl[t].I_&&(this.pl[t].I_=1,this.pl[t].g_=new Int16Array(1),this.pl[t].g_[0]=-1,this.pl[t].__=new Int16Array(1),this.pl[t].__[0]=-1,this.pl[t]._l=new Int16Array(1),this.pl[t]._l[0]=-1)};I_=0;g_=null;__=null;_l=null;A_=-1;C_=null;b_=!1;Ho=5;T_=-1;E_=-1;v_=99;dy=0;ml=(t,e,i)=>{if(1===e){this.I_=i.Re,this.g_=new Int16Array(this.I_),this.__=new Int16Array(this.I_),this._l=new Int16Array(this.I_);for(let t=0;t<this.I_;t++)this.g_[t]=i.Me,this.__[t]=i.Me,65535===this.__[t]&&(this.__[t]=-1),this._l[t]=i.Me,0===this._l[t]&&(this._l[t]=V.pl[this.g_[t]]._l),0===this._l[t]&&(this._l[t]=1),this.dy+=this._l[t]}else if(2===e)this.A_=i.Me;else if(3===e){const t=i.Re;this.C_=new Int32Array(t+1);for(let e=0;e<t;e++)this.C_[e]=i.Re;this.C_[t]=9999999}else if(4===e)this.b_=!0;else if(5===e)this.Ho=i.Re;else if(6===e)this.T_=i.Me;else if(7===e)this.E_=i.Me;else{if(8!==e)throw new Error(`Unrecognized seq config code: ${e}`);this.v_=i.Re}}}class Ot{static L_=16711680;static S_=65280;static O_=255;static k_=16776960;static R_=65535;static x_=16711935;static M_=16777215;static F_=0;static D_=16748608;static N_=8388608;static U_=128;static P_=16756736;static B_=16740352;static W_=16723968;static G_=12648192;static H_=8453888;static Y_=4259584;static V_=9179409;static X_=6116423;static j_=2301979;static z_=5063219;static Z_=7759444;static q_=3353893;static K_=8388736;static J_=13350793;static $_=Int32Array.of(Ot.k_,Ot.L_,Ot.S_,Ot.R_,Ot.x_,Ot.M_)}class kt{static Q_=Int32Array.of(1,2,4,8);static tC=Int32Array.of(16,32,64,128);static eC=Int32Array.of(1,0,-1,0);static iC=Int32Array.of(0,-1,0,1);static sC=(17*Math.Le()|0)-8;static nC=(33*Math.Le()|0)-16;static Ai=!0;static rC=0;static hC=!1;static lC=(t,e)=>{let i=this.oC(t+45365,e+91923,4)+(this.oC(t+10294,e+37821,2)-128>>1)+(this.oC(t,e,1)-128>>2)-128;return i=35+(.3*i|0),i<10?i=10:i>60&&(i=60),i};static oC=(t,e,i)=>{const s=t/i|0,n=t&i-1,r=e/i|0,h=e&i-1,l=this.aC(s,r),o=this.aC(s+1,r),a=this.aC(s,r+1),c=this.aC(s+1,r+1),f=this.cC(l,o,n,i),u=this.cC(a,c,n,i);return this.cC(f,u,h,i)};static cC=(t,e,i,s)=>{const n=65536-D.Ci[1024*i/s|0]>>1;return(t*(65536-n)>>16)+(e*n>>16)};static aC=(t,e)=>((this.fC(t-1,e-1)+this.fC(t+1,e-1)+this.fC(t-1,e+1)+this.fC(t+1,e+1))/16|0)+((this.fC(t-1,e)+this.fC(t+1,e)+this.fC(t,e-1)+this.fC(t,e+1))/8|0)+(this.fC(t,e)/4|0);static fC=(t,e)=>{const i=t+57*e,s=i<<13^i,n=BigInt(s)*(BigInt(s)*BigInt(s)*15731n+789221n)+1376312589n&0x7fffffffn;return 255&Number(n>>19n)};static bp=(t,e,i,s,n,r,h,l,o,a,c)=>{const f=n[c][e][i],u=n[c][e+1][i],d=n[c][e+1][i+1],w=n[c][e][i+1],y=f+u+d+w>>2,m=vt.z(l);let p=e+(i<<7)+(l<<14)+1073741824|0;m.Gg||(p+=-2147483648),p|=0;const A=((a<<6)+o|0)<<24>>24;if(o===ut.Bm)s?.MI(m.pu(ut.Bm,a,f,u,d,w,-1),t,e,i,y,p,A),m.zg&&m.Gg&&h._p(e,i),-1!==m.Iu&&r.ce(new Lt(l,t,3,e,i,St.pl[m.Iu],!0));else if(o===ut.Km||o===ut.Jm){const n=m.pu(ut.Km,a,f,u,d,w,-1);if(n){let r,h,l=0;o===ut.Jm&&(l+=256),a===at.Mm||a===at.Dm?(r=m.it,h=m.te):(r=m.te,h=m.it),s?.bp(t,e,i,y,n,null,p,A,r,h,l)}m.zg&&h.bp(e,i,m.te,m.it,a,m.Zg),-1!==m.Iu&&r.ce(new Lt(l,t,2,e,i,St.pl[m.Iu],!0))}else if(o>=ut.$m)s?.bp(t,e,i,y,m.pu(o,a,f,u,d,w,-1),null,p,A,1,1,0),m.zg&&h.bp(e,i,m.te,m.it,a,m.Zg),-1!==m.Iu&&r.ce(new Lt(l,t,2,e,i,St.pl[m.Iu],!0));else if(o===ut.Wm)s?.Lp(t,e,i,y,kt.Q_[a],0,m.pu(ut.Wm,a,f,u,d,w,-1),null,p,A),m.zg&&h.Lp(e,i,o,a,m.Zg),-1!==m.Iu&&r.ce(new Lt(l,t,0,e,i,St.pl[m.Iu],!0));else if(o===ut.Gm)s?.Lp(t,e,i,y,kt.tC[a],0,m.pu(ut.Gm,a,f,u,d,w,-1),null,p,A),m.zg&&h.Lp(e,i,o,a,m.Zg),-1!==m.Iu&&r.ce(new Lt(l,t,0,e,i,St.pl[m.Iu],!0));else if(o===ut.Hm){const n=a+1&3;s?.Lp(t,e,i,y,kt.Q_[a],kt.Q_[n],m.pu(ut.Hm,a+4,f,u,d,w,-1),m.pu(ut.Hm,n,f,u,d,w,-1),p,A),m.zg&&h.Lp(e,i,o,a,m.Zg),-1!==m.Iu&&r.ce(new Lt(l,t,0,e,i,St.pl[m.Iu],!0))}else if(o===ut.Ym)s?.Lp(t,e,i,y,kt.tC[a],0,m.pu(ut.Ym,a,f,u,d,w,-1),null,p,A),m.zg&&h.Lp(e,i,o,a,m.Zg),-1!==m.Iu&&r.ce(new Lt(l,t,0,e,i,St.pl[m.Iu],!0));else if(o===ut.qm)s?.bp(t,e,i,y,m.pu(o,a,f,u,d,w,-1),null,p,A,1,1,0),m.zg&&h.bp(e,i,m.te,m.it,a,m.Zg),-1!==m.Iu&&r.ce(new Lt(l,t,2,e,i,St.pl[m.Iu],!0));else if(o===ut.Vm)s?.UI(t,e,i,y,0,0,p,m.pu(ut.Vm,at.xm,f,u,d,w,-1),A,512*a,kt.Q_[a]),-1!==m.Iu&&r.ce(new Lt(l,t,1,e,i,St.pl[m.Iu],!0));else if(o===ut.Xm){let n=16;if(s){const r=s.KI(t,e,i);r>0&&(n=vt.z(r>>14&32767).$g)}s?.UI(t,e,i,y,kt.eC[a]*n,kt.iC[a]*n,p,m.pu(ut.Vm,at.xm,f,u,d,w,-1),A,512*a,kt.Q_[a]),-1!==m.Iu&&r.ce(new Lt(l,t,1,e,i,St.pl[m.Iu],!0))}else o===ut.jm?(s?.UI(t,e,i,y,0,0,p,m.pu(ut.Vm,at.xm,f,u,d,w,-1),A,a,256),-1!==m.Iu&&r.ce(new Lt(l,t,1,e,i,St.pl[m.Iu],!0))):o===ut.zm?(s?.UI(t,e,i,y,0,0,p,m.pu(ut.Vm,at.xm,f,u,d,w,-1),A,a,512),-1!==m.Iu&&r.ce(new Lt(l,t,1,e,i,St.pl[m.Iu],!0))):o===ut.Zm&&(s?.UI(t,e,i,y,0,0,p,m.pu(ut.Vm,at.xm,f,u,d,w,-1),A,a,768),-1!==m.Iu&&r.ce(new Lt(l,t,1,e,i,St.pl[m.Iu],!0)))};Vy;jy;uC;dC;wC;yC;mC;pC;AC;IC;gC;_C;CC;bC;TC;EC;At(t,e,i,s){this.Vy=t,this.jy=e,this.uC=i,this.dC=s,this.wC=new x(wt.up,t,e),this.yC=new x(wt.up,t,e),this.mC=new x(wt.up,t,e),this.pC=new x(wt.up,t,e),this.EC=new F(wt.up,t+1,e+1),this.AC=new x(wt.up,t+1,e+1),this.IC=new M(t+1,e+1),this.gC=new Int32Array(e),this._C=new Int32Array(e),this.CC=new Int32Array(e),this.bC=new Int32Array(e),this.TC=new Int32Array(e)}vC=(t,e)=>{for(let t=0;t<wt.up;t++)for(let i=0;i<wt.dp;i++)for(let s=0;s<wt.dp;s++)if(1==(1&this.dC[t][i][s])){let n=t;2==(2&this.dC[1][i][s])&&n--,n>=0&&e[n]?._p(i,s)}kt.sC+=(5*Math.Le()|0)-2,kt.sC<-8?kt.sC=-8:kt.sC>8&&(kt.sC=8),kt.nC+=(5*Math.Le()|0)-2,kt.nC<-16?kt.nC=-16:kt.nC>16&&(kt.nC=16);for(let e=0;e<wt.up;e++){const i=this.AC[e],s=96,n=-50,r=-10,h=-50,l=768*(0|Math.sqrt(n*n+r*r+h*h))>>8;for(let t=1;t<this.jy-1;t++)for(let o=1;o<this.Vy-1;o++){const a=this.uC[e][o+1][t]-this.uC[e][o-1][t],c=this.uC[e][o][t+1]-this.uC[e][o][t-1],f=0|Math.sqrt(a*a+c*c+65536),u=s+((n*((a<<8)/f|0)+r*(65536/f|0)+h*((c<<8)/f|0))/l|0),d=(i[o-1][t]>>2)+(i[o+1][t]>>3)+(i[o][t-1]>>2)+(i[o][t+1]>>3)+(i[o][t]>>1);this.IC[o][t]=u-d}for(let t=0;t<this.jy;t++)this.gC[t]=0,this._C[t]=0,this.CC[t]=0,this.bC[t]=0,this.TC[t]=0;for(let i=-5;i<this.Vy+5;i++){for(let t=0;t<this.jy;t++){const s=i+5;let n;if(s>=0&&s<this.Vy){const i=255&this.wC[e][s][t];if(i>0){const e=Et.pl[i-1];this.gC[t]+=e.Rg,this._C[t]+=e.Sg,this.CC[t]+=e.Og,this.bC[t]+=e.kg,n=this.TC[t]++}}const r=i-5;if(r>=0&&r<this.Vy){const i=255&this.wC[e][r][t];if(i>0){const e=Et.pl[i-1];this.gC[t]-=e.Rg,this._C[t]-=e.Sg,this.CC[t]-=e.Og,this.bC[t]-=e.kg,n=this.TC[t]--}}}if(i>=1&&i<this.Vy-1){let s=0,n=0,r=0,h=0,l=0;for(let o=-5;o<this.jy+5;o++){const a=o+5;a>=0&&a<this.jy&&(s+=this.gC[a],n+=this._C[a],r+=this.CC[a],h+=this.bC[a],l+=this.TC[a]);const c=o-5;if(c>=0&&c<this.jy&&(s-=this.gC[c],n-=this._C[c],r-=this.CC[c],h-=this.bC[c],l-=this.TC[c]),o>=1&&o<this.jy-1&&(!kt.Ai||0==(16&this.dC[e][i][o])&&this.LC(e,i,o)===kt.rC)){const a=255&this.wC[e][i][o],c=255&this.yC[e][i][o];if(a>0||c>0){const f=this.uC[e][i][o],u=this.uC[e][i+1][o],d=this.uC[e][i+1][o+1],w=this.uC[e][i][o+1],y=this.IC[i][o],m=this.IC[i+1][o],p=this.IC[i+1][o+1],A=this.IC[i][o+1];let I=-1,g=-1;if(a>0){const t=256*s/h|0,e=n/l|0;let i=r/l|0;I=Et.gg(t,e,i);const o=t+kt.sC&255;i+=kt.nC,i<0?i=0:i>255&&(i=255),g=Et.gg(o,e,i)}if(e>0){let t=0!==a||this.mC[e][i][o]===Ct.mA;c>0&&!Et.pl[c-1].vg&&(t=!1),t&&f===u&&f===d&&f===w&&(this.EC[e][i][o]|=2340)}let _=0;if(-1!==I&&(_=D.ci[Et._g(g,96)]),0===c)t?.xI(e,i,o,Ct.mA,at.xm,-1,f,u,d,w,Et._g(I,y),Et._g(I,m),Et._g(I,p),Et._g(I,A),Ot.F_,Ot.F_,Ot.F_,Ot.F_,_,Ot.F_);else{const s=this.mC[e][i][o]+1,n=this.pC[e][i][o],r=Et.pl[c-1];let h,l,a=r.Tg;a>=0?(l=D.ji(a),h=-1):r.bg===Ot.x_?(l=0,h=-2,a=-1):(h=Et.gg(r.Lg,r.Sg,r.Og),l=D.ci[Et.Cg(r.xg,96)]),t?.xI(e,i,o,s,n,a,f,u,d,w,Et._g(I,y),Et._g(I,m),Et._g(I,p),Et._g(I,A),Et.Cg(h,y),Et.Cg(h,m),Et.Cg(h,p),Et.Cg(h,A),_,l)}}}}}}for(let i=1;i<this.jy-1;i++)for(let s=1;s<this.Vy-1;s++)t?.RI(e,s,i,this.LC(e,s,i))}kt.hC||t?.eg(64,768,-50,-10,-50);for(let e=0;e<this.Vy;e++)for(let i=0;i<this.jy;i++)2==(2&this.dC[1][e][i])&&t?.kI(e,i);if(!kt.hC){let t=1,e=2,i=4;for(let s=0;s<wt.up;s++){s>0&&(t<<=3,e<<=3,i<<=3);for(let n=0;n<=s;n++)for(let r=0;r<=this.jy;r++)for(let h=0;h<=this.Vy;h++){if(0!=(this.EC[n][h][r]&t)){let e=r,i=r,l=n,o=n;for(;e>0&&0!=(this.EC[n][h][e-1]&t);)e--;for(;i<this.jy&&0!=(this.EC[n][h][i+1]&t);)i++;t:for(;l>0;){for(let s=e;s<=i;s++)if(0==(this.EC[l-1][h][s]&t))break t;l--}t:for(;o<s;){for(let s=e;s<=i;s++)if(0==(this.EC[o+1][h][s]&t))break t;o++}if((o+1-l)*(i+1-e)>=8){const n=this.uC[o][h][e]-240,r=this.uC[l][h][e];bt.AI(s,1,128*h,n,128*e,128*h,r,128*i+128);for(let s=l;s<=o;s++)for(let n=e;n<=i;n++)this.EC[s][h][n]&=~t}}if(0!=(this.EC[n][h][r]&e)){let t=h,i=h,l=n,o=n;for(;t>0&&0!=(this.EC[n][t-1][r]&e);)t--;for(;i<this.Vy&&0!=(this.EC[n][i+1][r]&e);)i++;t:for(;l>0;){for(let s=t;s<=i;s++)if(0==(this.EC[l-1][s][r]&e))break t;l--}t:for(;o<s;){for(let s=t;s<=i;s++)if(0==(this.EC[o+1][s][r]&e))break t;o++}if((o+1-l)*(i+1-t)>=8){const n=this.uC[o][t][r]-240,h=this.uC[l][t][r];bt.AI(s,2,128*t,n,128*r,128*i+128,h,128*r);for(let s=l;s<=o;s++)for(let n=t;n<=i;n++)this.EC[s][n][r]&=~e}}if(0!=(this.EC[n][h][r]&i)){let t=h,e=h,l=r,o=r;for(;l>0&&0!=(this.EC[n][h][l-1]&i);)l--;for(;o<this.jy&&0!=(this.EC[n][h][o+1]&i);)o++;t:for(;t>0;){for(let e=l;e<=o;e++)if(0==(this.EC[n][t-1][e]&i))break t;t--}t:for(;e<this.Vy;){for(let t=l;t<=o;t++)if(0==(this.EC[n][e+1][t]&i))break t;e++}if((e+1-t)*(o+1-l)>=4){const r=this.uC[n][t][l];bt.AI(s,4,128*t,r,128*l,128*e+128,r,128*o+128);for(let s=t;s<=e;s++)for(let t=l;t<=o;t++)this.EC[n][s][t]&=~i}}}}}};SC=(t,e,i,s)=>{let n=0;for(let t=0;t<Et.Ig;t++)if('water'===Et.pl[t].It?.oc()){n=t+1<<24>>24;break}for(let r=t;r<t+i;r++)for(let t=e;t<e+s;t++)if(t>=0&&t<this.Vy&&r>=0&&r<this.jy){this.yC[0][t][r]=n;for(let e=0;e<wt.up;e++)this.uC[e][t][r]=0,this.dC[e][t][r]=0}};OC=(t,e,i,s,n)=>{const r=new v(new Uint8Array(n));for(let n=0;n<wt.up;n++)for(let h=0;h<64;h++)for(let l=0;l<64;l++){const o=h+i,a=l+s;let c;if(o>=0&&o<wt.dp&&a>=0&&a<wt.dp)for(this.dC[n][o][a]=0;;){if(c=r.Re,0===c){0===n?this.uC[0][o][a]=8*-kt.lC(o+t+932731,a+556238+e):this.uC[n][o][a]=this.uC[n-1][o][a]-240;break}if(1===c){let t=r.Re;1===t&&(t=0),0===n?this.uC[0][o][a]=8*-t:this.uC[n][o][a]=this.uC[n-1][o][a]-8*t;break}c<=49?(this.yC[n][o][a]=r.xe,this.mC[n][o][a]=((c-2)/4|0)<<24>>24,this.pC[n][o][a]=(c-2&3)<<24>>24):c<=81?this.dC[n][o][a]=c-49<<24>>24:this.wC[n][o][a]=c-81<<24>>24}else for(;c=r.Re,0!==c;){if(1===c){r.Re;break}c<=49&&r.Re}}};kC=(t,e,i,s,n,r)=>{const h=new v(new Uint8Array(s));let l=-1;for(;;){const s=h.Be;if(0===s)return;l+=s;let o=0;for(;;){const s=h.Be;if(0===s)break;o+=s-1;const a=63&o,c=o>>6&63,f=o>>12,u=h.Re,d=u>>2,w=3&u,y=c+n,m=a+r;if(y>0&&m>0&&y<wt.dp-1&&m<wt.dp-1){let s=f;2==(2&this.dC[1][y][m])&&(s=f-1);let n=null;s>=0&&(n=i[s]),this.bp(f,y,m,t,e,n,l,d,w)}}}};bp=(t,e,i,s,n,r,h,l,o)=>{if(kt.Ai){if(0!=(16&this.dC[t][e][i]))return;if(this.LC(t,e,i)!==kt.rC)return}const a=this.uC[t][e][i],c=this.uC[t][e+1][i],f=this.uC[t][e+1][i+1],u=this.uC[t][e][i+1],d=a+c+f+u>>2,w=vt.z(h);let y=e+(i<<7)+(h<<14)+1073741824|0;w.Gg||(y+=-2147483648),y|=0;const m=((o<<6)+l|0)<<24>>24;if(l===ut.Bm)(!kt.Ai||w.Gg||w.u_)&&(s?.MI(w.pu(ut.Bm,o,a,c,f,u,-1),t,e,i,d,y,m),w.zg&&w.Gg&&r&&r._p(e,i),-1!==w.Iu&&n.ce(new Lt(h,t,3,e,i,St.pl[w.Iu],!0)));else if(l===ut.Km||l===ut.Jm){const p=w.pu(ut.Km,o,a,c,f,u,-1);if(p){let n,r,h=0;if(l===ut.Jm&&(h+=256),o===at.Mm||o===at.Dm?(n=w.it,r=w.te):(n=w.te,r=w.it),s?.bp(t,e,i,d,p,null,y,m,n,r,h)&&w.n_)for(let s=0;s<=n;s++)for(let n=0;n<=r;n++){let r=p.Ko/4|0;r>30&&(r=30),r>this.AC[t][e+s][i+n]&&(this.AC[t][e+s][i+n]=r<<24>>24)}}w.zg&&r&&r.bp(e,i,w.te,w.it,o,w.Zg),-1!==w.Iu&&n.ce(new Lt(h,t,2,e,i,St.pl[w.Iu],!0))}else if(l>=ut.$m)s?.bp(t,e,i,d,w.pu(l,o,a,c,f,u,-1),null,y,m,1,1,0),l>=ut.$m&&l<=ut.sp&&l!==ut.Qm&&t>0&&(this.EC[t][e][i]|=2340),w.zg&&r&&r.bp(e,i,w.te,w.it,o,w.Zg),-1!==w.Iu&&n.ce(new Lt(h,t,2,e,i,St.pl[w.Iu],!0));else if(l===ut.Wm)s?.Lp(t,e,i,d,kt.Q_[o],0,w.pu(ut.Wm,o,a,c,f,u,-1),null,y,m),o===at.xm?(w.n_&&(this.AC[t][e][i]=50,this.AC[t][e][i+1]=50),w.vg&&(this.EC[t][e][i]|=585)):o===at.Mm?(w.n_&&(this.AC[t][e][i+1]=50,this.AC[t][e+1][i+1]=50),w.vg&&(this.EC[t][e][i+1]|=1170)):o===at.Fm?(w.n_&&(this.AC[t][e+1][i]=50,this.AC[t][e+1][i+1]=50),w.vg&&(this.EC[t][e+1][i]|=585)):o===at.Dm&&(w.n_&&(this.AC[t][e][i]=50,this.AC[t][e+1][i]=50),w.vg&&(this.EC[t][e][i]|=1170)),w.zg&&r&&r.Lp(e,i,l,o,w.Zg),-1!==w.Iu&&n.ce(new Lt(h,t,0,e,i,St.pl[w.Iu],!0)),16!==w.$g&&s?.BI(t,e,i,w.$g);else if(l===ut.Gm)s?.Lp(t,e,i,d,kt.tC[o],0,w.pu(ut.Gm,o,a,c,f,u,-1),null,y,m),w.n_&&(o===at.xm?this.AC[t][e][i+1]=50:o===at.Mm?this.AC[t][e+1][i+1]=50:o===at.Fm?this.AC[t][e+1][i]=50:o===at.Dm&&(this.AC[t][e][i]=50)),w.zg&&r&&r.Lp(e,i,l,o,w.Zg),-1!==w.Iu&&n.ce(new Lt(h,t,0,e,i,St.pl[w.Iu],!0));else if(l===ut.Hm){const p=o+1&3;s?.Lp(t,e,i,d,kt.Q_[o],kt.Q_[p],w.pu(ut.Hm,o+4,a,c,f,u,-1),w.pu(ut.Hm,p,a,c,f,u,-1),y,m),w.vg&&(o===at.xm?(this.EC[t][e][i]|=265,this.EC[t][e][i+1]|=1170):o===at.Mm?(this.EC[t][e][i+1]|=1170,this.EC[t][e+1][i]|=585):o===at.Fm?(this.EC[t][e+1][i]|=585,this.EC[t][e][i]|=1170):o===at.Dm&&(this.EC[t][e][i]|=1170,this.EC[t][e][i]|=585)),w.zg&&r&&r.Lp(e,i,l,o,w.Zg),-1!==w.Iu&&n.ce(new Lt(h,t,0,e,i,St.pl[w.Iu],!0)),16!==w.$g&&s?.BI(t,e,i,w.$g)}else if(l===ut.Ym)s?.Lp(t,e,i,d,kt.tC[o],0,w.pu(ut.Ym,o,a,c,f,u,-1),null,y,m),w.n_&&(o===at.xm?this.AC[t][e][i+1]=50:o===at.Mm?this.AC[t][e+1][i+1]=50:o===at.Fm?this.AC[t][e+1][i]=50:o===at.Dm&&(this.AC[t][e][i]=50)),w.zg&&r&&r.Lp(e,i,l,o,w.Zg),-1!==w.Iu&&n.ce(new Lt(h,t,0,e,i,St.pl[w.Iu],!0));else if(l===ut.qm)s?.bp(t,e,i,d,w.pu(l,o,a,c,f,u,-1),null,y,m,1,1,0),w.zg&&r&&r.bp(e,i,w.te,w.it,o,w.Zg),-1!==w.Iu&&n.ce(new Lt(h,t,2,e,i,St.pl[w.Iu],!0));else if(l===ut.Vm)s?.UI(t,e,i,d,0,0,y,w.pu(ut.Vm,at.xm,a,c,f,u,-1),m,512*o,kt.Q_[o]),-1!==w.Iu&&n.ce(new Lt(h,t,1,e,i,St.pl[w.Iu],!0));else if(l===ut.Xm){let r=16;if(s){const n=s.KI(t,e,i);n>0&&(r=vt.z(n>>14&32767).$g)}s?.UI(t,e,i,d,kt.eC[o]*r,kt.iC[o]*r,y,w.pu(ut.Vm,at.xm,a,c,f,u,-1),m,512*o,kt.Q_[o]),-1!==w.Iu&&n.ce(new Lt(h,t,1,e,i,St.pl[w.Iu],!0))}else l===ut.jm?(s?.UI(t,e,i,d,0,0,y,w.pu(ut.Vm,at.xm,a,c,f,u,-1),m,o,256),-1!==w.Iu&&n.ce(new Lt(h,t,1,e,i,St.pl[w.Iu],!0))):l===ut.zm?(s?.UI(t,e,i,d,0,0,y,w.pu(ut.Vm,at.xm,a,c,f,u,-1),m,o,512),-1!==w.Iu&&n.ce(new Lt(h,t,1,e,i,St.pl[w.Iu],!0))):l===ut.Zm&&(s?.UI(t,e,i,d,0,0,y,w.pu(ut.Vm,at.xm,a,c,f,u,-1),m,o,768),-1!==w.Iu&&n.ce(new Lt(h,t,1,e,i,St.pl[w.Iu],!0)))};LC=(t,e,i)=>0==(8&this.dC[t][e][i])?t<=0||0==(2&this.dC[1][e][i])?t:t-1:0}class Rt extends w{}class xt extends Rt{Dn=0;Un=0;my=0;RC=!1;Ua=1;xC=-1;MC=-1;FC=-1;DC=-1;NC=-1;UC=-1;PC=-1;BC=null;WC=100;GC=0;HC=0;YC=0;VC=0;XC=-1e3;jC=0;zC=0;ZC=-1;qC=0;KC=0;JC=-1;$C=0;QC=0;tb=-1;eb=0;ib=0;sb=0;nb=0;rb=-1;hb=0;lb=0;ob=0;ab=0;cb=0;fb=0;ub=0;db=0;wb=0;yb=0;mb=0;Fi=0;ee=0;pb=0;Ab=0;Ib=new Int32Array(10);gb=new Int32Array(10);_b=new S(10,!1);Cb=0;bb=-1;Tb=-1;Eb=-1;vb=-1;Fu=(t,e,i)=>{if(-1!==this.tb&&St.pl[this.tb].Ho<=1&&(this.tb=-1),!t){const t=e-this.Ib[0],s=i-this.gb[0];if(t>=-8&&t<=8&&s>=-8&&s<=8){this.Ab<9&&this.Ab++;for(let t=this.Ab;t>0;t--)this.Ib[t]=this.Ib[t-1],this.gb[t]=this.gb[t-1],this._b[t]=this._b[t-1];return this.Ib[0]=e,this.gb[0]=i,void(this._b[0]=!1)}}this.Ab=0,this.Cb=0,this.Ib[0]=e,this.gb[0]=i,this.Dn=128*this.Ib[0]+64*this.Ua,this.Un=128*this.gb[0]+64*this.Ua};Lb=(t,e)=>{let i=this.Ib[0],s=this.gb[0];0===e?(i--,s++):1===e?s++:2===e?(i++,s++):3===e?i--:4===e?i++:5===e?(i--,s--):6===e?s--:7===e&&(i++,s--),-1!==this.tb&&St.pl[this.tb].Ho<=1&&(this.tb=-1),this.Ab<9&&this.Ab++;for(let t=this.Ab;t>0;t--)this.Ib[t]=this.Ib[t-1],this.gb[t]=this.gb[t-1],this._b[t]=this._b[t-1];this.Ib[0]=i,this.gb[0]=s,this._b[0]=t}}class Mt extends Tt{static Ig=0;static pl=[];static wc=new K(30);static Al=t=>{const e=new v(t.j('spotanim.dat'));this.Ig=e.Me;for(let t=0;t<this.Ig;t++)this.pl[t]=new Mt,this.pl[t].wp=t,this.pl[t].Ag(t,e)};wp=0;fa=0;Iu=-1;p_=null;Jg=!1;Xg=new Uint16Array(6);jg=new Uint16Array(6);Sb=128;Ob=128;kb=0;Qg=0;t_=0;ml=(t,e,i)=>{if(1===e)this.fa=i.Me;else if(2===e)this.Iu=i.Me,St.pl&&(this.p_=St.pl[this.Iu]);else if(3===e)this.Jg=!0;else if(4===e)this.Sb=i.Me;else if(5===e)this.Ob=i.Me;else if(6===e)this.kb=i.Me;else if(7===e)this.Qg=i.Re;else if(8===e)this.t_=i.Re;else if(e>=40&&e<50)this.Xg[e-40]=i.Me;else{if(!(e>=50&&e<60))throw new Error(`Unrecognized spotanim config code: ${e}`);this.jg[e-50]=i.Me}};pu=()=>{let t=Mt.wc?.z(BigInt(this.wp));if(t)return t;t=z.fa(this.fa);for(let e=0;e<6;e++)0!==this.Xg[0]&&t.Ta(this.Xg[e],this.jg[e]);return Mt.wc?.Zh(BigInt(this.wp),t),t}}class Ft extends Tt{static Ig=0;static pl=[];static Al=t=>{const e=new v(t.j('idk.dat'));this.Ig=e.Me;for(let t=0;t<this.Ig;t++)this.pl[t]=new Ft,this.pl[t].Ag(t,e)};Ya=-1;Yg=null;Rb=new Int32Array(5).ne(-1);Xg=new Int32Array(6);jg=new Int32Array(6);xb=!1;ml=(t,e,i)=>{if(1===e)this.Ya=i.Re;else if(2===e){const t=i.Re;this.Yg=new Int32Array(t);for(let e=0;e<t;e++)this.Yg[e]=i.Me}else if(3===e)this.xb=!0;else if(e>=40&&e<50)this.Xg[e-40]=i.Me;else if(e>=50&&e<60)this.jg[e-50]=i.Me;else{if(!(e>=60&&e<70))throw new Error(`Unrecognized idk config code: ${e}`);this.Rb[e-60]=i.Me}};pu=()=>{if(!this.Yg)return null;const t=new S(this.Yg.it,null);for(let e=0;e<this.Yg.it;e++)t[e]=z.fa(this.Yg[e]);let e;e=1===t.it?t[0]:z.aa(t,t.it);for(let t=0;t<6&&0!==this.Xg[t];t++)e?.Ta(this.Xg[t],this.jg[t]);return e};Mb=()=>{let t=0;const e=new S(5,null);for(let i=0;i<5;i++)-1!==this.Rb[i]&&(e[t++]=z.fa(this.Rb[i]));const i=z.aa(e,t);for(let t=0;t<6&&0!==this.Xg[t];t++)i.Ta(this.Xg[t],this.jg[t]);return i}}class Dt extends Tt{static Ig=0;static Fg=null;static cl=null;static Dg=null;static Ng=0;static Fb=!0;static wc=new K(50);static Db=new K(200);static Al=(t,e)=>{this.Fb=e,this.cl=new v(t.j('obj.dat'));const i=new v(t.j('obj.idx'));this.Ig=i.Me,this.Dg=new Int32Array(this.Ig);let s=2;for(let t=0;t<this.Ig;t++)this.Dg[t]=s,s+=i.Me;this.Fg=new S(10,null);for(let t=0;t<10;t++)this.Fg[t]=new Dt};static z=t=>{if(!this.Fg||!this.Dg||!this.cl)throw new Error('ObjType not loaded!!!');for(let e=0;e<10;e++){const i=this.Fg[e];if(i&&i.wp===t)return i}this.Ng=(this.Ng+1)%10;const e=this.Fg[this.Ng];return this.cl.Ee=this.Dg[t],e.wp=t,e.gp(),e.Ag(t,this.cl),-1!==e.Nb&&e.Ub(),!this.Fb&&e.Pb&&(e.It='Members Object',e.Vg="Login to a members' server to use this object.",e.Hg=null,e.lu=null),e};static Wi=()=>{this.wc=null,this.Db=null,this.Dg=null,this.Fg=null,this.cl=null};static Bb=(t,e)=>{if(Dt.Db){let i=Dt.Db.z(BigInt(t));if(i&&i.ai!==e&&-1!==i.ai&&(i.Lt(),i=null),i)return i}let i=Dt.z(t);if(i.Wb||(e=-1),i.Wb&&i.Gb&&e>1){let t=-1;for(let s=0;s<10;s++)e>=i.Gb[s]&&0!==i.Gb[s]&&(t=i.Wb[s]);-1!==t&&(i=Dt.z(t))}const s=new J(32,32),n=D.vi,r=D.Li,h=D.Ei,l=m.Rt,o=m.xt,a=m.Mt,c=m.Nt,f=m.Ut,u=m.Ft,d=m.Dt;D.Si=!1,m.Gt(s.Rt,32,32),m.qt(0,0,32,32,Ot.F_),D.Gi();const w=i.Hb(1),y=D._i[i.Yb]*i.Vb>>16,p=D.Ci[i.Yb]*i.Vb>>16;w.ka(0,i.Xb,i.jb,i.Yb,i.zb,y+(w.$o/2|0)+i.Zb,p+i.Zb);for(let t=31;t>=0;t--)for(let e=31;e>=0;e--)0===s.Rt[t+32*e]&&(t>0&&s.Rt[t+32*e-1]>1||e>0&&s.Rt[t+32*(e-1)]>1||t<31&&s.Rt[t+32*e+1]>1||e<31&&s.Rt[t+32*(e+1)]>1)&&(s.Rt[t+32*e]=1);for(let t=31;t>=0;t--)for(let e=31;e>=0;e--)0===s.Rt[t+32*e]&&t>0&&e>0&&s.Rt[t+32*(e-1)-1]>0&&(s.Rt[t+32*e]=3153952);if(-1!==i.Nb){const t=this.Bb(i.qb,10),e=t.oi,s=t.ai;t.oi=32,t.ai=32,t.pi(5,5,22,22),t.oi=e,t.ai=s}return Dt.Db?.Zh(BigInt(t),s),m.Gt(l,o,a),m.Ht(c,u,f,d),D.vi=n,D.Li=r,D.Ei=h,D.Si=!0,i.Kb?s.oi=33:s.oi=32,s.ai=e,s};wp=-1;fa=0;It=null;Vg=null;Xg=null;jg=null;Vb=2e3;Yb=0;Xb=0;jb=0;zb=0;Zb=0;Jb=!1;$b=-1;Kb=!1;Qb=1;Pb=!1;Hg=null;lu=null;tT=-1;eT=-1;iT=0;sT=-1;nT=-1;rT=0;hT=-1;lT=-1;oT=-1;aT=-1;cT=-1;fT=-1;Wb=null;Gb=null;qb=-1;Nb=-1;ml=(t,e,i)=>{if(1===e)this.fa=i.Me;else if(2===e)this.It=i.We;else if(3===e)this.Vg=i.We;else if(4===e)this.Vb=i.Me;else if(5===e)this.Yb=i.Me;else if(6===e)this.Xb=i.Me;else if(7===e)this.zb=i.Fe,this.zb>32767&&(this.zb-=65536);else if(8===e)this.Zb=i.Fe,this.Zb>32767&&(this.Zb-=65536);else if(9===e)this.Jb=!0;else if(10===e)this.$b=i.Me;else if(11===e)this.Kb=!0;else if(12===e)this.Qb=i.Ne;else if(16===e)this.Pb=!0;else if(23===e)this.tT=i.Me,this.iT=i.xe;else if(24===e)this.eT=i.Me;else if(25===e)this.sT=i.Me,this.rT=i.xe;else if(26===e)this.nT=i.Me;else if(e>=30&&e<35)this.Hg||(this.Hg=new S(5,null)),this.Hg[e-30]=i.We,'hidden'===this.Hg[e-30]?.oc()&&(this.Hg[e-30]=null);else if(e>=35&&e<40)this.lu||(this.lu=new S(5,null)),this.lu[e-35]=i.We;else if(40===e){const t=i.Re;this.Xg=new Uint16Array(t),this.jg=new Uint16Array(t);for(let e=0;e<t;e++)this.Xg[e]=i.Me,this.jg[e]=i.Me}else 78===e?this.hT=i.Me:79===e?this.lT=i.Me:90===e?this.oT=i.Me:91===e?this.cT=i.Me:92===e?this.aT=i.Me:93===e?this.fT=i.Me:95===e?this.jb=i.Me:97===e?this.qb=i.Me:98===e?this.Nb=i.Me:e>=100&&e<110&&(this.Wb&&this.Gb||(this.Wb=new Uint16Array(10),this.Gb=new Uint16Array(10)),this.Wb[e-100]=i.Me,this.Gb[e-100]=i.Me)};uT=t=>{let e=this.tT;if(1===t&&(e=this.sT),-1===e)return null;let i=this.eT,s=this.hT;1===t&&(i=this.nT,s=this.lT);let n=z.fa(e);if(-1!==i){const t=z.fa(i);if(-1===s){const e=[n,t];n=z.aa(e,2)}else{const e=[n,t,z.fa(s)];n=z.aa(e,3)}}if(0===t&&0!==this.iT&&n.yi(this.iT,0,0),1===t&&0!==this.rT&&n.yi(this.rT,0,0),this.Xg&&this.jg)for(let t=0;t<this.Xg.it;t++)n.Ta(this.Xg[t],this.jg[t]);return n};Mb=t=>{let e=this.oT;if(1===t&&(e=this.cT),-1===e)return null;let i=this.aT;1===t&&(i=this.fT);let s=z.fa(e);if(-1!==i){const t=[s,z.fa(i)];s=z.aa(t,2)}if(this.Xg&&this.jg)for(let t=0;t<this.Xg.it;t++)s.Ta(this.Xg[t],this.jg[t]);return s};Hb=t=>{if(this.Wb&&this.Gb&&t>1){let e=-1;for(let i=0;i<10;i++)t>=this.Gb[i]&&0!==this.Gb[i]&&(e=this.Wb[i]);if(-1!==e)return Dt.z(e).Hb(1)}if(Dt.wc){const t=Dt.wc.z(BigInt(this.wp));if(t)return t}const e=z.fa(this.fa);if(this.Xg&&this.jg)for(let t=0;t<this.Xg.it;t++)e.Ta(this.Xg[t],this.jg[t]);return e.La(64,768,-50,-10,-50,!0),e.wa=!0,Dt.wc?.Zh(BigInt(this.wp),e),e};Ub=()=>{const t=Dt.z(this.Nb);this.fa=t.fa,this.Vb=t.Vb,this.Yb=t.Yb,this.Xb=t.Xb,this.jb=t.jb,this.zb=t.zb,this.Zb=t.Zb,this.Xg=t.Xg,this.jg=t.jg;const e=Dt.z(this.qb);this.It=e.It,this.Pb=e.Pb,this.Qb=e.Qb;let i='a';const s=(e.It||'').oc().Jh(0);'a'!==s&&'e'!==s&&'i'!==s&&'o'!==s&&'u'!==s||(i='an'),this.Vg=`Swap this note at any bank for ${i} ${e.It}.`,this.Kb=!0};gp=()=>{this.fa=0,this.It=null,this.Vg=null,this.Xg=null,this.jg=null,this.Vb=2e3,this.Yb=0,this.Xb=0,this.jb=0,this.zb=0,this.Zb=0,this.Jb=!1,this.$b=-1,this.Kb=!1,this.Qb=1,this.Pb=!1,this.Hg=null,this.lu=null,this.tT=-1,this.eT=-1,this.iT=0,this.sT=-1,this.nT=-1,this.rT=0,this.hT=-1,this.lT=-1,this.oT=-1,this.aT=-1,this.cT=-1,this.fT=-1,this.Wb=null,this.Gb=null,this.qb=-1,this.Nb=-1}}class Nt extends xt{static dT=[9104,10275,7595,3610,7975,8526,918,38802,24466,10145,58654,5027,1457,16565,34991,25486];static wT=[[6798,107,10283,16,4797,7744,5799,4634,33697,22433,2983,54193],[8741,12,64030,43162,7735,8404,1701,38430,24094,10153,56621,4783,1341,16578,35003,25239],[25238,8742,12,64030,43162,7735,8404,1701,38430,24094,10153,56621,4783,1341,16578,35003],[4626,11146,6439,12,4758,10270],[4550,4537,5681,5673,5790,6806,8076,4574]];static wc=new K(200);It=null;Uy=!1;yT=0;mT=0;pT=new Uint16Array(12);AT=new Uint16Array(5);IT=0;gT=0n;Nn=0;_T=0;CT=0;bT=0;TT=0;ET=0;vT=null;Yy=0;Xy=0;Vy=0;jy=0;Ai=!1;re(t){if(!this.Uy)return null;let e=this.LT();if(this.ee=e.$o,e.wa=!0,this.Ai)return e;if(-1!==this.rb&&-1!==this.hb){const t=Mt.pl[this.rb],i=z.ea(t.pu(),!0,!t.Jg,!1);i.yi(-this.ab,0,0),i.Aa(),t.p_&&t.p_.g_&&i._a(t.p_.g_[this.hb]),i.ha=null,i.ra=null,128===t.Sb&&128===t.Ob||i.va(t.Sb,t.Ob,t.Sb),i.La(t.Qg+64,t.t_+850,-30,-50,-30,!0);const s=[e,i];e=z.la(s,2)}if(this.vT&&(t>=this.CT&&(this.vT=null),t>=this._T&&t<this.CT)){const t=this.vT;if(t){t.yi(this.TT-this.Nn,this.bT-this.Dn,this.ET-this.Un),512===this.pb?(t.Ca(),t.Ca(),t.Ca()):1024===this.pb?(t.Ca(),t.Ca()):1536===this.pb&&t.Ca();const i=[e,t];e=z.la(i,2),512===this.pb?t.Ca():1024===this.pb?(t.Ca(),t.Ca()):1536===this.pb&&(t.Ca(),t.Ca(),t.Ca()),t.yi(this.Nn-this.TT,this.Dn-this.bT,this.Un-this.ET)}}return e.wa=!0,e}ST=()=>this.Uy;j=t=>{t.Ee=0,this.yT=t.Re,this.mT=t.Re;for(let e=0;e<12;e++){const i=t.Re;this.pT[e]=0===i?0:(i<<8)+t.Re}for(let e=0;e<5;e++){let i=t.Re;(i<0||i>=Nt.wT[e].it)&&(i=0),this.AT[e]=i}this.xC=t.Me,65535===this.xC&&(this.xC=-1),this.MC=t.Me,65535===this.MC&&(this.MC=-1),this.FC=t.Me,65535===this.FC&&(this.FC=-1),this.DC=t.Me,65535===this.DC&&(this.DC=-1),this.NC=t.Me,65535===this.NC&&(this.NC=-1),this.UC=t.Me,65535===this.UC&&(this.UC=-1),this.PC=t.Me,65535===this.PC&&(this.PC=-1),this.It=$.fc($.rc(t.Ue)),this.IT=t.Re,this.Uy=!0,this.gT=0n;for(let t=0;t<12;t++)this.gT<<=0x4n,this.pT[t]>=256&&(this.gT+=BigInt(this.pT[t])-256n);this.pT[0]>=256&&(this.gT+=BigInt(this.pT[0])-256n>>4n),this.pT[1]>=256&&(this.gT+=BigInt(this.pT[1])-256n>>8n);for(let t=0;t<5;t++)this.gT<<=0x3n,this.gT+=BigInt(this.AT[t]);this.gT<<=0x1n,this.gT+=BigInt(this.yT)};Mb=()=>{if(!this.Uy)return null;const t=new S(12,null);let e=0;for(let i=0;i<12;i++){const s=this.pT[i];if(s>=256&&s<512&&(t[e++]=Ft.pl[s-256].Mb()),s>=512){const i=Dt.z(s-512).Mb(this.yT);i&&(t[e++]=i)}}const i=z.aa(t,e);for(let t=0;t<5;t++)0!==this.AT[t]&&(i.Ta(Nt.wT[t][0],Nt.wT[t][this.AT[t]]),1===t&&i.Ta(Nt.dT[0],Nt.dT[this.AT[t]]));return i};LT=()=>{let t=this.gT,e=-1,i=-1,s=-1,n=-1;if(this.tb>=0&&0===this.sb){const r=St.pl[this.tb];if(r.g_&&(e=r.g_[this.eb]),this.JC>=0&&this.JC!==this.xC){const t=St.pl[this.JC].g_;t&&(i=t[this.$C])}r.T_>=0&&(s=r.T_,t+=BigInt(s-this.pT[5])<<8n),r.E_>=0&&(n=r.E_,t+=BigInt(n-this.pT[3])<<16n)}else if(this.JC>=0){const t=St.pl[this.JC].g_;t&&(e=t[this.$C])}let r=Nt.wc?.z(t);if(!r){const e=new S(12,null);let i=0;for(let t=0;t<12;t++){let r=this.pT[t];if(n>=0&&3===t&&(r=n),s>=0&&5===t&&(r=s),r>=256&&r<512){const t=Ft.pl[r-256].pu();t&&(e[i++]=t)}if(r>=512){const t=Dt.z(r-512).uT(this.yT);t&&(e[i++]=t)}}r=z.aa(e,i);for(let t=0;t<5;t++)0!==this.AT[t]&&(r.Ta(Nt.wT[t][0],Nt.wT[t][this.AT[t]]),1===t&&r.Ta(Nt.dT[0],Nt.dT[this.AT[t]]));r.Aa(),r.La(64,850,-30,-50,-30,!0),Nt.wc?.Zh(t,r)}if(this.Ai)return r;const h=z.na(r,!0);return-1!==e&&-1!==i?h.Ia(e,i,St.pl[this.tb].C_):-1!==e&&h._a(e),h.oa(),h.ha=null,h.ra=null,h}}class Ut extends Tt{static Ig=0;static Fg=null;static cl=null;static Dg=null;static Ng=0;static wc=new K(30);static Al=t=>{this.cl=new v(t.j('npc.dat'));const e=new v(t.j('npc.idx'));this.Ig=e.Me,this.Dg=new Int32Array(this.Ig);let i=2;for(let t=0;t<this.Ig;t++)this.Dg[t]=i,i+=e.Me;this.Fg=new S(20,null);for(let t=0;t<20;t++)this.Fg[t]=new Ut};static z=t=>{if(!this.Fg||!this.Dg||!this.cl)throw new Error('LocType not loaded!!!');for(let e=0;e<20;e++){const i=this.Fg[e];if(i&&i.wp===t)return i}this.Ng=(this.Ng+1)%20;const e=this.Fg[this.Ng]=new Ut;return this.cl.Ee=this.Dg[t],e.wp=t,e.Ag(t,this.cl),e};static Wi=()=>{this.wc=null,this.Dg=null,this.Fg=null,this.cl=null};wp=-1;It=null;Vg=null;Ua=1;Yg=null;Rb=null;Jg=!1;OT=-1;kT=-1;RT=-1;xT=-1;MT=-1;FT=!1;Xg=null;jg=null;Hg=null;DT=-1;NT=-1;UT=-1;PT=!0;BT=-1;Sb=128;Ob=128;ml=(t,e,i)=>{if(1===e){const t=i.Re;this.Yg=new Uint16Array(t);for(let e=0;e<t;e++)this.Yg[e]=i.Me}else if(2===e)this.It=i.We;else if(3===e)this.Vg=i.We;else if(12===e)this.Ua=i.xe;else if(13===e)this.OT=i.Me;else if(14===e)this.kT=i.Me;else if(16===e)this.Jg=!0;else if(17===e)this.kT=i.Me,this.RT=i.Me,this.xT=i.Me,this.MT=i.Me;else if(e>=30&&e<40)this.Hg||(this.Hg=new S(5,null)),this.Hg[e-30]=i.We,'hidden'===this.Hg[e-30]?.oc()&&(this.Hg[e-30]=null);else if(40===e){const t=i.Re;this.Xg=new Uint16Array(t),this.jg=new Uint16Array(t);for(let e=0;e<t;e++)this.Xg[e]=i.Me,this.jg[e]=i.Me}else if(60===e){const t=i.Re;this.Rb=new Uint16Array(t);for(let e=0;e<t;e++)this.Rb[e]=i.Me}else 90===e?this.DT=i.Me:91===e?this.NT=i.Me:92===e?this.UT=i.Me:93===e?this.PT=!1:95===e?this.BT=i.Me:97===e?this.Sb=i.Me:98===e&&(this.Ob=i.Me)};LT=(t,e,i)=>{let s=null,n=null;if(Ut.wc&&(n=Ut.wc.z(BigInt(this.wp)),!n&&this.Yg)){const t=new S(this.Yg.it,null);for(let e=0;e<this.Yg.it;e++)t[e]=z.fa(this.Yg[e]);if(n=1===t.it?t[0]:z.aa(t,t.it),this.Xg&&this.jg)for(let t=0;t<this.Xg.it;t++)n?.Ta(this.Xg[t],this.jg[t]);n?.Aa(),n?.La(64,850,-30,-50,-30,!0),n&&Ut.wc.Zh(BigInt(this.wp),n)}return n?(s=z.na(n,!this.Jg),-1!==t&&-1!==e?s.Ia(t,e,i):-1!==t&&s._a(t),128===this.Sb&&128===this.Ob||s.va(this.Sb,this.Ob,this.Sb),s.oa(),s.ha=null,s.ra=null,1===this.Ua&&(s.wa=!0),s):null};Mb=()=>{if(!this.Rb)return null;const t=new S(this.Rb.it,null);for(let e=0;e<this.Rb.it;e++)t[e]=z.fa(this.Rb[e]);let e;if(e=1===t.it?t[0]:z.aa(t,t.it),this.Xg&&this.jg)for(let t=0;t<this.Xg.it;t++)e?.Ta(this.Xg[t],this.jg[t]);return e}}class Pt extends Tt{static Ig=0;static pl=[];static WT=[];static GT=0;static Al=t=>{const e=new v(t.j('varp.dat'));this.Ig=e.Me;for(let t=0;t<this.Ig;t++)this.pl[t]=new Pt,this.pl[t].Ag(t,e)};$b=null;HT=0;YT=0;VT=!1;XT=!0;jT=0;zT=0;ZT=!1;qT=!1;ml(t,e,i){if(1===e)this.HT=i.Re;else if(2===e)this.YT=i.Re;else if(3===e)this.VT=!0,Pt.WT[Pt.GT++]=t;else if(4===e)this.XT=!1;else if(5===e)this.jT=i.Me;else if(6===e)this.ZT=!0;else if(7===e)this.zT=i.Ne;else if(8===e)this.qT=!0;else{if(10!==e)throw new Error(`Error unrecognised config code: ${e}`);this.$b=i.We}}}class Bt extends B{static KT=225;static JT=10;static $T=0;static Pb=!0;static Ai=!1;static QT='';static tE='';static eE=!1;static iE='https://raw.githubusercontent.com/2004scape/Server/main';static sE=58778699976184461502525193738213253649000149147835990136706041084440742975821n;static nE=7162900525229798032761816791230527296329313291232324290237849263501208207972894053929065636522363163621000728841182238772712427862772219676577293600221789n;static rE=0;static hE=0;static lE=0;static oE=0;static aE=0;static cE=0;static fE=0;static uE=0;static dE=0;static wE=0;static yE=0;static mE=0;static pE=0;static AE=0;static IE=0;static gE=()=>{bt.Ai=!1,D.Ai=!1,Bt.Ai=!1,kt.Ai=!1};static _E=()=>{bt.Ai=!0,D.Ai=!0,Bt.Ai=!0,kt.Ai=!0};CE=2048;bE=2047;TE=!1;EE=!1;vE=!1;LE=!1;Fh=null;SE=0;OE=!1;kE=[];a=null;RE=v.Oe(1);xE=v.Oe(1);ME=v.Oe(1);FE=0n;DE=0;NE=0;UE=0;PE=null;BE=0;WE=0;GE=0;HE=0;YE=0;VE=null;XE=!0;jE=0;zE=0;ZE=null;qE=null;KE=null;JE=null;$E=null;QE=null;tv=null;ev=null;iv=null;sv=null;nv=null;rv='';hv='';lv='';ov='';av=null;cv=null;fv=null;uv=null;dv=[];wv=!1;yv=null;mv=null;pv=null;Av=null;Iv=null;gv=null;_v=null;Cv=null;bv=null;Tv=null;Ev=new Int32Array(256);vv=0;Lv=0;Sv=0;Ov=null;kv=null;Rv=null;xv=null;Mv=null;Fv=null;Dv=null;Nv=null;Uv=null;Pv=null;Bv=null;Wv=null;Gv=null;Hv=null;Yv=null;Vv=null;Xv=null;jv=null;zv=null;Zv=null;qv=null;Kv=new Int32Array(33);Jv=new Int32Array(33);$v=new Int32Array(151);Qv=new Int32Array(151);tL=null;eL=null;iL=null;sL=null;nL=null;rL=null;hL=new S(13,null);lL=null;oL=null;aL=new S(50,null);cL=new S(50,null);fL=new S(20,null);uL=new S(20,null);dL=null;wL=new S(8,null);yL=null;mL=null;pL=null;AL=null;IL=null;gL=null;_L=null;CL=null;bL=null;TL=null;EL=null;vL=null;LL=null;SL=null;OL=null;kL=null;RL=null;xL=null;ML=new S(1e3,null);FL=!1;DL=!1;NL=!1;UL=!1;PL=-1;BL=0;WL=0;GL=0;HL=0;YL=0;VL=0;XL=!1;jL=0;zL=0;ZL=0;qL=0;KL=0;JL=0;$L=[];QL=-1;tS=-1;eS=new Q;iS=78;sS=0;nS=0;rS=[];hS=0;lS=0;oS=0;aS=0;cS=0;fS=0;uS=0;dS=0;wS=[];yS=[];mS=[];pS=[];AS=null;IS=-1;gS=3;_S=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];CS=0;bS=0;TS=0;ES=!1;vS=0;LS=!1;SS='';OS='';kS=0;RS='';xS=!1;MS=-1;FS=new S(100,null);DS=new S(100,null);NS=new Int32Array(100);US=new Int32Array(100);PS=0;BS=0;WS=0;GS='';HS=0;YS=0;VS=0;XS=0;jS=0;zS=0;ZS=0;qS=0;KS=0;JS=!1;$S=0;QS=0;tO=0;eO=0;iO=null;sO=0;nO=0;rO=0;hO=0;lO=!1;oO=[];aO=[];cO=0;fO=0;uO=0;dO=null;wO=0;yO=new Int32Array(500);mO=new Int32Array(500);pO=new Int32Array(500);AO=new Int32Array(500);IO=0;gO=0;_O=0;CO='';bO=!1;TO=-1;EO=0;vO=0;LO=0;SO=0;OO=0;kO=new Int32Array(1e3);RO=new Int32Array(1e3);xO=null;MO=0;FO=0;DO=0;NO=0;UO=0;PO=!1;BO=0;WO=0;GO=0;HO=0;YO=2;VO=2;XO=1;jO=new Int32Array(5);zO=new S(5,!1);ZO=new Int32Array(5);qO=new Int32Array(5);KO=new Int32Array(5);JO=0;$O=0;QO=0;tk=0;ek=0;ik=0;sk=0;nk=0;rk=0;hk=1;lk=2;ok=-1;po=0;Io=0;ak=0;ck=0;fk=0;uk=0;dk=null;wk=null;yk=null;mk=0;pk=0;Ak=new Int8Array(16384);Ik=new S(wt.up,null);gk=0;_k=0;Ck=128;bk=0;Tk=0;Ek=0;vk=0;Lk=0;uC=null;dC=null;Sk=new M(wt.dp,wt.dp);Ok=0;kk=0;Rk=0;xk=0;Mk=0;Fk=0;Dk=0;Nk=0;Uk=0;Pk=0;Bk=0;Wk=0;Gk=new S(this.CE,null);Hk=0;Yk=new Int32Array(this.CE);Vk=0;Xk=0;jk=new Int32Array(this.CE);zk=new Int32Array(1e3);Zk=new S(this.CE,null);qk=new S(8192,null);Kk=0;Jk=new Int32Array(8192);$k=new E;Qk=new E;tR=new E;CI=new E;eR=new k(wt.up,wt.dp,wt.dp,null);iR=new E;sR=new Int32Array(4e3);nR=new Int32Array(4e3);rR=new Int32Array(wt.dp*wt.dp);hR=new Int32Array(wt.dp*wt.dp);lR=0;oR=null;aR=0;cR=0;fR=-1;uR=0;dR=0;wR=0;yR=0;mR=!1;pR=!0;AR=!1;IR=new Int32Array(7);gR=new Int32Array(5);_R=0;CR=0;static bR=50;TR=new Int32Array(Bt.bR);ER=new Int32Array(Bt.bR);vR=new Int32Array(Bt.bR);LR=new Int32Array(Bt.bR);SR=new Int32Array(Bt.bR);OR=new Int32Array(Bt.bR);kR=new Int32Array(Bt.bR);RR=new S(Bt.bR,null);xR=new S(100,null);MR=new BigInt64Array(100);FR=new Int32Array(100);DR=null;NR=0;UR=!0;PR=new Int32Array(50);BR=new Int32Array(50);WR=new Int32Array(50);GR=192;HR=-1;YR=-1;VR=0;XR=0;jR=0;zR=!0;ZR=null;qR=0;KR=0;JR=192;Wi=()=>{try{this.a&&this.a.$R()}catch(t){}this.a=null,window._tinyMidiStop&&window._tinyMidiStop(),this.xE=null,this.ME=null,this.RE=null,this.yk=null,this.dk=null,this.wk=null,this.uC=null,this.dC=null,this.xO=null,this.Ik=null,this.rR=null,this.hR=null,this.sR=null,this.nR=null,this.Ak=null,this.kv=null,this.Rv=null,this.xv=null,this.Mv=null,this.Fv=null,this.Dv=null,this.Nv=null,this.Uv=null,this.Pv=null,this.Bv=null,this.Wv=null,this.Gv=null,this.Hv=null,this.Yv=null,this.Vv=null,this.Xv=null,this.jv=null,this.tL=null,this.iL=null,this.eL=null,this.sL=null,this.nL=null,this.rL=null,this.hL=null,this._L=null,this.CL=null,this.bL=null,this.TL=null,this.EL=null,this.vL=null,this.LL=null,this.SL=null,this.OL=null,this.kL=null,this.oL=null,this.fL=null,this.uL=null,this.wL=null,this.yL=null,this.mL=null,this.pL=null,this.AL=null,this.aL=null,this.cL=null,this.Sk=null,this.Gk=null,this.Yk=null,this.jk=null,this.Zk=null,this.zk=null,this.qk=null,this.Jk=null,this.eR=null,this.iR=null,this.CI=null,this.$k=null,this.Qk=null,this.tR=null,this.pO=null,this.AO=null,this.yO=null,this.mO=null,this.$L=null,this.oO=null,this.kO=null,this.RO=null,this.ML=null,this.lL=null,this.xR=null,this.MR=null,this.FR=null,this.JE=null,this.$E=null,this.ZE=null,this.qE=null,this.KE=null,this.QE=null,this.tv=null,this.ev=null,this.iv=null,this.QR(),vt.Wi(),Ut.Wi(),Dt.Wi(),Et.pl=null,Ft.pl=null,Q.pl=null,St.pl=null,Mt.pl=null,Mt.wc=null,Pt.pl=null,this.Br=null,Nt.wc=null,D.Wi(),bt.Wi(),z.Wi(),Y.pl=[],V.pl=[]};QR=()=>{this.wv=!1,this.Ov&&(clearInterval(this.Ov),this.Ov=null),this.sv=null,this.nv=null,this.dv=[],this._v=null,this.Cv=null,this.bv=null,this.Tv=null,this.Av=null,this.pv=null,this.Iv=null,this.gv=null,this.yv=null,this.mv=null};tx=async(t,e,i,s)=>{let n=5,r=await(this.Fh?.Vh(t));if(r&&v.Te(r)!==i&&(r=void 0),r)return new G(r);for(;!r;){await this.ch(s,`Requesting ${e}`);try{r=await T(`${Bt.tE}/${t}${i}`)}catch(t){r=void 0;for(let t=n;t>0;t--)await this.ch(s,`Error loading - Will retry in ${t} secs.`),await b(1e3);n*=2,n>60&&(n=60)}}return await(this.Fh?.zh(t,r)),new G(r)};ex=async(t,i,s)=>{let n=await(this.Fh?.Vh(t+'.mid'));if(n&&12345678!==i&&v.Te(n)!==i&&(n=void 0),!n)try{n=await T(`${Bt.tE}/${t}_${i}.mid`),s!==n.it&&(n=n.nt(0,s))}catch(t){}if(!n)return;await(this.Fh?.zh(t+'.mid',n));const r=new v(Uint8Array.from(n)).Ne;!function(t,e){window._tinyMidiPlay&&window._tinyMidiPlay(t,e/256)}(e.j(r,n,s,4),this.JR)};ix=()=>{if(A.rh='black',A.qt(0,0,this.te,this.ee),this.wh(1),this.vE){this.wv=!1,A.Ah='bold 16px helvetica, sans-serif',A.Ih='left',A.rh='yellow';let t=35;A.gh('Sorry, an error has occured whilst loading RuneScape',30,t),t+=50,A.rh='white',A.gh('To fix this try the following (in order):',30,t),t+=50,A.Ah='bold 12px helvetica, sans-serif',A.gh('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,A.gh('2: Try clearing your web-browsers cache from tools->internet options',30,t),t+=30,A.gh('3: Try using a different game-world',30,t),t+=30,A.gh('4: Try rebooting your computer',30,t),t+=30,A.gh('5: Try selecting a different version of Java from the play-game menu',30,t)}if(this.LE&&(this.wv=!1,A.Ah='bold 20px helvetica, sans-serif',A.Ih='left',A.rh='white',A.gh('Error - unable to load game!',50,50),A.gh('To play RuneScape make sure you play from',50,100),A.gh('https://2004scape.org',50,150)),this.EE){this.wv=!1,A.Ah='bold 13px helvetica, sans-serif',A.Ih='left',A.rh='yellow';let t=35;A.gh('Error a copy of RuneScape already appears to be loaded',30,t),t+=50,A.rh='white',A.gh('To fix this try the following (in order):',30,t),t+=50,A.Ah='bold 12px helvetica, sans-serif',A.gh('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,A.gh('2: Try rebooting your computer, and reloading',30,t)}};sx=t=>{if(!t.Wf)return!1;for(let e=0;e<t.Wf.it;e++){const i=this.nx(t,e);if(!t.Gf)return!1;const s=t.Gf[e];if(2===t.Wf[e]){if(i>=s)return!1}else if(3===t.Wf[e]){if(i<=s)return!1}else if(4===t.Wf[e]){if(i===s)return!1}else if(i!==s)return!1}return!0};rx=(t,e,i,s,n)=>{this.IL?.re(t,e),this.gL?.re(t,e+n-16),m.qt(t,e+16,16,n-32,Ot.j_);let r=(n-32)*n/s|0;r<8&&(r=8);const h=(n-r-32)*i/(s-n)|0;m.qt(t,e+h+16,16,r,Ot.z_),m.zt(t,e+h+16,Ot.Z_,r),m.zt(t+1,e+h+16,Ot.Z_,r),m.jt(t,e+h+16,Ot.Z_,16),m.jt(t,e+h+17,Ot.Z_,16),m.zt(t+15,e+h+16,Ot.q_,r),m.zt(t+14,e+h+17,Ot.q_,r-1),m.jt(t,e+h+r+15,Ot.q_,16),m.jt(t+1,e+h+r+14,Ot.q_,15)};hx=(t,e)=>{let i=!1;const s=Q.pl[t];if(!s.Xf)return!1;for(let t=0;t<s.Xf.it&&-1!==s.Xf[t];t++){const n=Q.pl[s.Xf[t]];if(1===n.Ya&&(i||=this.hx(n.Tt,e)),6===n.Ya&&(-1!==n.Iu||-1!==n.gu)){let t;if(t=this.sx(n)?n.gu:n.Iu,-1!==t){const s=St.pl[t];if(n.ku+=e,s._l)for(;n.ku>s._l[n.Ou];)n.ku-=s._l[n.Ou]+1,n.Ou++,n.Ou>=s.I_&&(n.Ou-=s.A_,(n.Ou<0||n.Ou>=s.I_)&&(n.Ou=0)),i=!0}}}return i};lx=(t,e,i,s,n=!1)=>{if(0!==t.Ya||!t.Xf||t.Vf&&this.HS!==t.Tt&&this.YS!==t.Tt&&this.VS!==t.Tt)return;const r=m.Nt,h=m.Ft,l=m.Ut,o=m.Dt;m.Ht(e,i,e+t.te,i+t.ee);const a=t.Xf.it;for(let r=0;r<a;r++){if(!t.jf||!t.zf)continue;let h=t.jf[r]+e,l=t.zf[r]+i-s;const o=Q.pl[t.Xf[r]];if(h+=o.Dn,l+=o.Nn,n&&m.Xt(h,l,o.te,o.ee,Ot.M_),o.Pf>0&&this.ox(o),o.Ya===Q.yc)o.Su>o.Yf-o.ee&&(o.Su=o.Yf-o.ee),o.Su<0&&(o.Su=0),this.lx(o,h,l,o.Su,n),o.Yf>o.ee&&this.rx(h+o.te,l,o.Su,o.Yf,o.ee);else if(o.Ya===Q.pc){let t=0;for(let e=0;e<o.ee;e++)for(let i=0;i<o.te;i++){if(!(o.eu&&o.iu&&o.Zf&&o.qf))continue;let s=h+i*(o.Qf+32),n=l+e*(o.tu+32);if(t<20&&(s+=o.eu[t],n+=o.iu[t]),o.Zf[t]>0){let e=0,i=0;const r=o.Zf[t]-1;if(s>=-32&&s<=512&&n>=-32&&n<=334||0!==this.zS&&this.jS===t){const h=Dt.Bb(r,o.qf[t]);if(0!==this.zS&&this.jS===t&&this.XS===o.Tt?(e=this.Kr-this.ZS,i=this.Jr-this.qS,e<5&&e>-5&&(e=0),i<5&&i>-5&&(i=0),this.KS<5&&(e=0,i=0),h.Ka(128,s+e,n+i)):0!==this.sO&&this.nO===t&&this.rO===o.Tt?h.Ka(128,s,n):h.re(s,n),33===h.oi||1!==o.qf[t]){const r=o.qf[t];this.av?.ax(s+e+1,n+10+i,this.cx(r),Ot.F_),this.av?.ax(s+e,n+9+i,this.cx(r),Ot.k_)}}}else if(o.su&&t<20){const e=o.su[t];e?.re(s,n)}t++}}else if(o.Ya===Q.Ac)o.ne?m.qt(h,l,o.te,o.ee,o.uu):m.Xt(h,l,o.te,o.ee,o.uu);else if(o.Ya===Q.Ic){const t=o.Ah;let e=o.uu,i=o.cu;if(this.VS!==o.Tt&&this.YS!==o.Tt&&this.HS!==o.Tt||0===o.wu||(e=o.wu),this.sx(o)&&(e=o.du,o.fu&&o.fu.it>0&&(i=o.fu)),o.Uf===Q.Sc&&this.lO&&(i='Please wait...',e=o.uu),!t||!i)continue;for(let s=l+t.ee;i.it>0;s+=t.ee){if(-1!==i.ll('%')){for(;;){const t=i.ll('%1');if(-1===t)break;i=i.hu(0,t)+this.fx(this.nx(o,0))+i.hu(t+2)}for(;;){const t=i.ll('%2');if(-1===t)break;i=i.hu(0,t)+this.fx(this.nx(o,1))+i.hu(t+2)}for(;;){const t=i.ll('%3');if(-1===t)break;i=i.hu(0,t)+this.fx(this.nx(o,2))+i.hu(t+2)}for(;;){const t=i.ll('%4');if(-1===t)break;i=i.hu(0,t)+this.fx(this.nx(o,3))+i.hu(t+2)}for(;;){const t=i.ll('%5');if(-1===t)break;i=i.hu(0,t)+this.fx(this.nx(o,4))+i.hu(t+2)}}const n=i.ll('\\n');let r;-1!==n?(r=i.hu(0,n),i=i.hu(n+2)):(r=i,i=''),o.ou?t.ux(h+(o.te/2|0),s,r,e,o.au):t.dx(h,s,r,e,o.au)}}else if(o.Ya===Q.gc){let t;t=this.sx(o)?o.mu:o.yu,t?.re(h,l)}else if(o.Ya===Q._c){const t=D.vi,e=D.Li;D.vi=h+(o.te/2|0),D.Li=l+(o.ee/2|0);const i=D._i[o.Cu]*o._u>>16,s=D.Ci[o.Cu]*o._u>>16,n=this.sx(o);let r;r=n?o.gu:o.Iu;let a=null;if(-1===r)a=o.pu(-1,-1,n);else{const t=St.pl[r];t.g_&&t.__&&(a=o.pu(t.g_[o.Ou],t.__[o.Ou],n))}a&&a.ka(0,o.bu,0,o.Cu,0,i,s),D.vi=t,D.Li=e}else if(o.Ya===Q.Cc){const t=o.Ah;if(!t||!o.Zf||!o.qf)continue;let e=0;for(let i=0;i<o.ee;i++)for(let s=0;s<o.te;s++){if(o.Zf[e]>0){const n=Dt.z(o.Zf[e]-1);let r=n.It;if((n.Kb||1!==o.qf[e])&&(r=r+' x'+this.wx(o.qf[e])),!r)continue;const a=h+s*(o.Qf+115),c=l+i*(o.tu+12);o.ou?t.ux(a+(o.te/2|0),c,r,o.uu,o.au):t.dx(a,c,r,o.uu,o.au)}e++}}}m.Ht(r,h,l,o)};ox=t=>{let e=t.Pf;if(e>=Q.Oc&&e<=Q.kc)e--,e>=this._R?(t.cu='',t.Uf=0):(t.cu=this.xR[e],t.Uf=1);else if(e>=Q.Rc&&e<=Q.xc)e-=Q.Rc,e>=this._R?(t.cu='',t.Uf=0):(0===this.FR[e]?t.cu='@red@Offline':this.FR[e]===Bt.JT?t.cu='@gre@World-'+(this.FR[e]-9):t.cu='@yel@World-'+(this.FR[e]-9),t.Uf=1);else if(e===Q.Dc)t.Yf=15*this._R+20,t.Yf<=t.ee&&(t.Yf=t.ee+1);else if(e>=Q.ff&&e<=Q.uf)e-=Q.ff,e>=this.nS?(t.cu='',t.Uf=0):(t.cu=$.fc($.rc(this.rS[e])),t.Uf=1);else if(e===Q.yf)t.Yf=15*this.nS+20,t.Yf<=t.ee&&(t.Yf=t.ee+1);else if(e===Q.cf){if(t.Cu=150,t.bu=2047&(256*Math._i(this.SE/40)|0),this.AR){this.AR=!1;const e=new S(7,null);let i=0;for(let t=0;t<7;t++){const s=this.IR[t];s>=0&&(e[i++]=Ft.pl[s].pu())}const s=z.aa(e,i);for(let t=0;t<5;t++)0!==this.gR[t]&&(s.Ta(Nt.wT[t][0],Nt.wT[t][this.gR[t]]),1===t&&s.Ta(Nt.dT[0],Nt.dT[this.gR[t]]));if(this.oR){const e=St.pl[this.oR.xC].g_;e&&(s.Aa(),s._a(e[0]),s.La(64,850,-30,-50,-30,!0),t.fa=s)}}}else if(e===Q.lf)this.RL||(this.RL=t.yu,this.xL=t.mu),this.pR?t.yu=this.xL:t.yu=this.RL;else if(e===Q.of)this.RL||(this.RL=t.yu,this.xL=t.mu),this.pR?t.yu=this.RL:t.yu=this.xL;else if(e===Q.mf)t.cu=this.CO,this.SE%20<10?t.cu=t.cu+'|':t.cu=t.cu+' ';else if(e===Q.Of)this.mR?this.bO?(t.uu=Ot.L_,t.cu='Moderator option: Mute player for 48 hours: <ON>'):(t.uu=Ot.M_,t.cu='Moderator option: Mute player for 48 hours: <OFF>'):t.cu='';else if(e===Q.kf||e===Q.Df)if(0===this.EO)t.cu='';else{let e;e=0===this.vO?'earlier today':1===this.vO?'yesterday':this.vO+' days ago',t.cu='You last logged in '+e+' from: '+$.cc(this.EO)}else if(e===Q.Rf)0===this.SO&&(t.cu='0 unread messages',t.uu=Ot.k_),1===this.SO&&(t.cu='1 unread message',t.uu=Ot.S_),this.SO>1&&(t.cu=this.SO+' unread messages',t.uu=Ot.S_);else if(e===Q.xf)if(201===this.LO)t.cu='';else if(200===this.LO)t.cu='You have not yet set any password recovery questions.';else{let e;e=0===this.LO?'Earlier today':1===this.LO?'Yesterday':this.LO+' days ago',t.cu=e+' you changed your recovery questions'}else e===Q.Mf?201===this.LO?t.cu='':200===this.LO?t.cu='We strongly recommend you do so now to secure your account.':t.cu='If you do not remember making this change then cancel it immediately':e===Q.Ff&&(201===this.LO?t.cu='':(this.LO,t.cu="Do this from the 'account management' area on our front webpage"))};nx=(t,e)=>{if(!t.Hf||e>=t.Hf.it)return-2;try{const i=t.Hf[e];if(!i)return-1;let s=0,n=0;for(;;){const t=i[n++];if(0===t)return s;if(1===t)s+=this.yS[i[n++]];else if(2===t)s+=this.mS[i[n++]];else if(3===t)s+=this.wS[i[n++]];else if(4===t){const t=Q.pl[i[n++]],e=i[n++]+1;if(t.Zf&&t.qf)for(let i=0;i<t.Zf.it;i++)t.Zf[i]===e&&(s+=t.qf[i]);else s+=0}else if(5===t)s+=this.oO[i[n++]];else if(6===t)s+=this.pS[this.mS[i[n++]]-1];else if(7===t)s+=100*this.oO[i[n++]]/46875|0;else if(8===t)s+=this.oR?.IT||0;else if(9===t)for(let t=0;t<19;t++)18===t&&(t=20),s+=this.mS[t];else if(10===t){const t=Q.pl[i[n++]],e=i[n++]+1;for(let i=0;i<t.Zf.it;i++)if(t.Zf[i]===e){s+=999999999;break}}else if(11===t)s+=this.aR;else if(12===t)s+=this.uR;else if(13===t){const t=this.oO[i[n++]];s+=0==(t&1<<i[n++])?0:1}}}catch(t){return-1}};fx=t=>t<999999999?String(t):'*';wx=t=>{let e=String(t);for(let t=e.it-3;t>0;t-=3)e=e.hu(0,t)+','+e.hu(t);return e.it>8?e='@gre@'+e.hu(0,e.it-8)+' million @whi@('+e+')':e.it>4&&(e='@cya@'+e.hu(0,e.it-4)+'K @whi@('+e+')'),' '+e};cx=t=>t<1e5?String(t):t<1e7?(t/1e3|0)+'K':(t/1e6|0)+'M'}(new class extends Bt{TE=!1;EE=!1;vE=!1;LE=!1;yx=null;mx=null;px=null;Ax=null;Ix=null;gx=null;GA=0;HA=0;YA=0;_x=0;Cx=0;bx=2;fa={Tt:parseInt(B.xr('model'))||0,Tx:null,Dn:0,Nn:0,Un:420,my:0};Ex=null;At(){super(!0)}ft=async()=>{if(this.TE)this.EE=!0;else{this.TE=!0;try{await async function(t){if(l||h)return;l=!0;const e=await r(t);h||(h=e)}(),await e.ft(await(await fetch('bz2.wasm')).pt()),this.Fh=new W(await W.Uh()),this.yx=document.getElementById('rightPanel');const t=document.getElementById('mainPanel');t&&(t.vx=t=>{t.ah(),t.Lx()},t.Sx=async t=>{if(t.ah(),t.Lx(),!t.Ox||!t.Ox.kx.it)return;const e=['main_file_cache.dat','main_file_cache.idx0','main_file_cache.idx1','main_file_cache.idx2','main_file_cache.idx3','main_file_cache.idx4'],i=[];for(let s=0;s<t.Ox.kx.it;s++){const n=t.Ox.kx[s];e._h(n.It)&&i.hl(n)}for(let t=0;t<i.it;t++){const e=i[t],s=await e.pt();await(this.Fh?.zh(e.It,new Int8Array(s)))}await this.Ed()}),await this.Ed()}catch(t){this.vE=!0,console.Ch(t)}}};uh=async()=>{this.EE||this.vE||this.LE||(this.Rx(),this.xx())};re=async()=>{this.EE||this.vE||this.LE?this.ix():(z.bo=!0,z.Kr=this.Kr,z.Jr=this.Jr,this.Br?.Gt(),m.Vt(),m.qt(0,0,this.te,this.ee,Ot.F_),null!==this.fa.Tx&&(this.fa.Tx.re(this.fa.my,D._i[this._x],D.Ci[this._x],D._i[this.Cx],D.Ci[this.Cx],this.fa.Dn-this.GA,this.fa.Nn-this.HA,this.fa.Un-this.YA,0),-1!==this.fa.Tx.ya&&this.fa.Tx.Da(this.fa.Tx.ya)),this.Br?.re(0,0),this.Ex?.re(this.Kr,this.Jr))};Ed=async()=>{const t=await(this.Fh?.Vh('main_file_cache.dat'));if(!t){return document.getElementById('helpme').Fx.Mx='block',void(p.Fx.Mx='none')}const e=await(this.Fh?.Vh('main_file_cache.idx0')),i=await(this.Fh?.Vh('main_file_cache.idx1')),s=await(this.Fh?.Vh('main_file_cache.idx2')),n=await(this.Fh?.Vh('main_file_cache.idx3')),r=await(this.Fh?.Vh('main_file_cache.idx4'));if(!(e&&i&&s&&n&&r)){return document.getElementById('helpme').Fx.Mx='block',void(p.Fx.Mx='none')}document.getElementById('helpme').Fx.Mx='none',p.Fx.Mx='block',this.mx=new H(t,e,0),this.px=new H(t,i,1),this.Ax=new H(t,s,2),this.Ix=new H(t,n,3),this.gx=new H(t,r,4),await this.ch(10,'Unpacking textures');const h=this.mx.j(6);D.Vi(h),D.Zi(.8),D.Ki(20),await this.ch(20,'Loading models...');for(let t=0;t<this.px.tl;t++){const e=this.px.j(t);null!==e&&z.To(e,t)}if(this.Dx(0),null!==this.yx){const t=document.createElement('ul');t.Tt='modelList',t.Nx='list-group',this.yx.Ux(t);for(let e=0;e<this.px.tl;e++){const i=document.createElement('li');i.Nx='list-group-item',i.Px=`Model ${e}`,i.Bx=()=>{this.fa.Tt=e,this.Dx(e)},t.Ux(i)}}await this.ch(80,'Finishing up...'),this.Ex=new C(512,128),this.Ex.Gt();for(let t=0;t<512;t++)for(let e=0;e<128;e++){const i=t,s=127-e;m.Kt(i,s,D.ci[e+128*t])}this.Ex.re(0,0)};Dx(t){if(null===this.px)return;const e=this.px.j(t);null!==e?(this.fa.Tx=z.ua(e,t),this.fa.Tx.La(64,850,-30,-50,-30,!0),document.title=`Model ${t} | 2004Scape Tools`):document.title=`Missing model ${t} | 2004Scape Tools`}Rx(){for(;;){const t=this.bh();if(-1===t)break;t==='r'.$e(0)?(this.bx=2,this.GA=0,this.HA=0,this.YA=0,this._x=0,this.Cx=0,this.fa.Dn=0,this.fa.Nn=0,this.fa.Un=420,this.fa.my=0):t==='1'.$e(0)?(this.fa.Tt--,z.Bl&&this.fa.Tt<0&&(this.fa.Tt=z.Bl.it-1),this.Dx(this.fa.Tt)):t==='2'.$e(0)&&(this.fa.Tt++,z.Bl&&this.fa.Tt>=z.Bl.it&&(this.fa.Tt=0),this.Dx(this.fa.Tt))}}xx(){this.eh['['.$e(0)]?this.bx--:this.eh[']'.$e(0)]&&this.bx++,this.eh[1]?this.fa.my+=this.bx:this.eh[2]&&(this.fa.my-=this.bx),this.eh['w'.$e(0)]?this.fa.Un-=this.bx:this.eh['s'.$e(0)]&&(this.fa.Un+=this.bx),this.eh['a'.$e(0)]?this.fa.Dn-=this.bx:this.eh['d'.$e(0)]&&(this.fa.Dn+=this.bx),this.eh['q'.$e(0)]?this.fa.Nn-=this.bx:this.eh['e'.$e(0)]&&(this.fa.Nn+=this.bx),this._x=2047&this._x,this.Cx=2047&this.Cx,this.fa.my=2047&this.fa.my}}).lh().$d((()=>{}))})()})();