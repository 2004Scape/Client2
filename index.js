(()=>{"use strict";var t,i,s,h,e={1651:(t,i,s)=>{s.d(i,{K:()=>k});var h=s(4818),e=s(4583),n=s(2901),r=s(1069),o=s(7046),l=(s(9896),s(6666)),a=s(3045),c=s(818),f=s(670),u=s(8268),d=s(3867),w=s(7854),y=s(8950),A=s(1302),p=s(9298),m=s(8665),I=s(1312),_=s(3819),g=s(8317),E=s(9234),C=s(1908),T=s(123),O=s(5637),b=s(6948),v=s(2164),L=s(8738),R=s(3764),S=s(182),M=s(7018);class k extends o.A{static tt=225;static it=10;static portOffset=0;static members=!0;static st=!1;static ht='';static et='';static nt=!1;static rt=2;static ot='https://raw.githubusercontent.com/2004scape/Server/main';static exponent=58778699976184461502525193738213253649000149147835990136706041084440742975821n;static lt=7162900525229798032761816791230527296329313291232324290237849263501208207972894053929065636522363163621000728841182238772712427862772219676577293600221789n;static ct=0;static ft=0;static ut=0;static dt=0;static wt=0;static yt=0;static At=0;static It=0;static _t=0;static gt=0;static Et=0;static Ct=0;static Tt=0;static Ot=0;static bt=0;static vt=()=>{a.A.st=!1,e.A.st=!1,k.st=!1,c.A.st=!1};static Lt=()=>{a.A.st=!0,e.A.st=!0,k.st=!0,c.A.st=!0};Rt=2048;St=2047;Mt=!1;kt=!1;xt=!1;Dt=!1;db=null;Nt=0;Pt=[];stream=null;in=r.A.Ft(1);Ut=r.A.Ft(1);Bt=r.A.Ft(1);Gt=0n;Ht=0;Wt=0;Yt=0;Vt=null;Kt=0;packetSize=0;Xt=0;zt=0;jt=0;Zt=null;qt=!0;$t=0;Jt=0;Qt=null;ti=null;ii=null;si=null;hi=null;ei=null;ni=null;ri=null;oi=null;li=null;ai=null;ci='';fi='';username='';password='';ui=null;di=null;wi=null;yi=null;Ai=[];pi=!1;mi=null;Ii=null;_i=null;gi=null;Ei=null;Ci=null;Ti=null;Oi=null;bi=null;vi=null;Li=new Int32Array(256);Ri=0;Si=0;Mi=0;ki=null;xi=null;Di=null;Ni=null;Pi=null;Fi=null;Ui=null;Bi=null;Gi=null;Hi=null;Wi=null;Yi=null;Vi=null;Ki=null;Xi=null;zi=null;ji=null;Zi=null;qi=null;$i=null;Ji=null;Qi=new Int32Array(33);ts=new Int32Array(33);ss=new Int32Array(151);hs=new Int32Array(151);es=null;ns=null;rs=null;os=null;ls=null;cs=null;fs=new d.us(13,null);ds=null;ws=null;ys=new d.us(50,null);As=new d.us(50,null);ps=new d.us(20,null);Is=new d.us(20,null);_s=null;gs=new d.us(8,null);Es=null;Cs=null;Ts=null;Os=null;bs=null;vs=null;Ls=null;Rs=null;Ss=null;Ms=null;ks=null;xs=null;Ds=null;Ns=null;Ps=null;Fs=null;Us=null;Bs=null;Gs=new d.us(1e3,null);Hs=!1;Ws=!1;Ys=!1;Vs=!1;Ks=-1;Xs=0;zs=0;js=0;Zs=0;qs=0;$s=0;Js=!1;Qs=0;th=0;ih=0;sh=0;hh=0;eh=0;nh=[];rh=-1;oh=-1;lh=new h.A;ah=78;fh=0;uh=0;dh=[];wh=0;yh=0;Ah=0;ph=0;mh=0;Ih=0;_h=0;gh=0;Eh=[];Ch=[];Th=[];Oh=[];bh=null;Lh=-1;Rh=3;Sh=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];Mh=0;kh=0;xh=0;Dh=!1;Nh=0;Ph=!1;Fh='';Uh='';Bh=0;Gh='';Hh=!1;Wh=-1;Yh=new d.us(100,null);Vh=new d.us(100,null);messageType=new Int32Array(100);Kh=new Int32Array(100);Xh=0;zh=0;jh=0;Zh='';qh=0;$h=0;Jh=0;Qh=0;te=0;ie=0;se=0;he=0;ee=0;ne=!1;re=0;oe=0;le=0;ae=0;ce=null;fe=0;ue=0;de=0;we=0;ye=!1;Ae=[];pe=[];me=0;Ie=0;_e=0;ge=null;Ee=0;Ce=new Int32Array(500);Te=new Int32Array(500);Oe=new Int32Array(500);be=new Int32Array(500);ve=0;Le=0;Re=0;Se='';Me=!1;ke=-1;xe=0;De=0;Ne=0;Pe=0;Fe=0;Ue=new Int32Array(1e3);Be=new Int32Array(1e3);Ge=null;He=0;We=0;Ye=0;Ve=0;Ke=0;Xe=!1;ze=0;je=0;Ze=0;qe=0;$e=2;Je=2;Qe=1;tn=new Int32Array(5);sn=new d.us(5,!1);hn=new Int32Array(5);en=new Int32Array(5);nn=new Int32Array(5);rn=0;ln=0;an=0;cn=0;fn=0;un=0;dn=0;wn=0;yn=0;An=1;pn=2;mn=-1;In=0;_n=0;gn=0;En=0;Cn=0;Tn=0;On=null;bn=null;vn=null;Ln=0;Rn=0;Sn=new Int8Array(16384);Mn=new d.us(f.A.kn,null);xn=0;Dn=0;Nn=128;Pn=0;Fn=0;Un=0;Bn=0;Gn=0;Hn=null;Wn=null;Yn=new d.Vn(f.A.Kn,f.A.Kn);Xn=0;zn=0;jn=0;Zn=0;qn=0;$n=0;Jn=0;Qn=0;tr=0;ir=0;sr=0;hr=0;er=new d.us(this.Rt,null);nr=0;rr=new Int32Array(this.Rt);lr=0;ar=0;cr=new Int32Array(this.Rt);ur=new Int32Array(1e3);dr=new d.us(this.Rt,null);wr=new d.us(8192,null);yr=0;Ar=new Int32Array(8192);pr=new l.A;mr=new l.A;Ir=new l.A;_r=new l.A;gr=new d.Er(f.A.kn,f.A.Kn,f.A.Kn,null);Cr=new l.A;Tr=new Int32Array(4e3);Or=new Int32Array(4e3);br=new Int32Array(f.A.Kn*f.A.Kn);vr=new Int32Array(f.A.Kn*f.A.Kn);Lr=0;Rr=null;Sr=0;Mr=0;kr=-1;Dr=0;Nr=0;Pr=0;Fr=0;Ur=!1;Br=!0;Gr=!1;Hr=new Int32Array(7);Wr=new Int32Array(5);Yr=0;Vr=0;static Kr=50;Xr=new Int32Array(k.Kr);zr=new Int32Array(k.Kr);jr=new Int32Array(k.Kr);Zr=new Int32Array(k.Kr);qr=new Int32Array(k.Kr);$r=new Int32Array(k.Kr);Jr=new Int32Array(k.Kr);Qr=new d.us(k.Kr,null);io=new d.us(100,null);so=new BigInt64Array(100);ho=new Int32Array(100);eo=null;no=0;ro=!0;oo=new Int32Array(50);lo=new Int32Array(50);ao=new Int32Array(50);co=192;fo=-1;uo=-1;do=0;wo=0;yo=0;Ao=!0;po=null;mo=0;Io=0;_o=192;Eo=new d.us(16,null);Co=0;To=!1;Oo=()=>{try{this.stream&&this.stream.close()}catch(t){}this.stream=null,(0,T.bo)(),this.Ut=null,this.Bt=null,this.in=null,this.vn=null,this.On=null,this.bn=null,this.Hn=null,this.Wn=null,this.Ge=null,this.Mn=null,this.br=null,this.vr=null,this.Tr=null,this.Or=null,this.Sn=null,this.xi=null,this.Di=null,this.Ni=null,this.Pi=null,this.Fi=null,this.Ui=null,this.Bi=null,this.Gi=null,this.Hi=null,this.Wi=null,this.Yi=null,this.Vi=null,this.Ki=null,this.Xi=null,this.zi=null,this.ji=null,this.Zi=null,this.es=null,this.rs=null,this.ns=null,this.os=null,this.ls=null,this.cs=null,this.fs=null,this.Ls=null,this.Rs=null,this.Ss=null,this.Ms=null,this.ks=null,this.xs=null,this.Ds=null,this.Ns=null,this.Ps=null,this.Fs=null,this.ws=null,this.ps=null,this.Is=null,this.gs=null,this.Es=null,this.Cs=null,this.Ts=null,this.Os=null,this.ys=null,this.As=null,this.Yn=null,this.er=null,this.rr=null,this.cr=null,this.dr=null,this.ur=null,this.wr=null,this.Ar=null,this.gr=null,this.Cr=null,this._r=null,this.pr=null,this.mr=null,this.Ir=null,this.Oe=null,this.be=null,this.Ce=null,this.Te=null,this.nh=null,this.Ae=null,this.Ue=null,this.Be=null,this.Gs=null,this.ds=null,this.io=null,this.so=null,this.ho=null,this.si=null,this.hi=null,this.Qt=null,this.ti=null,this.ii=null,this.ei=null,this.ni=null,this.ri=null,this.oi=null,this.vo(),O.A.Oo(),b.A.Oo(),A.A.Oo(),v.A.Lo=null,g.A.Lo=null,h.A.Lo=null,I.A.Lo=null,L.A.Lo=null,L.A.Ro=null,R.A.Lo=null,this.So=null,u.A.Ro=null,e.A.Oo(),a.A.Oo(),m.A.Oo(),S.A.Lo=[],M.A.Lo=[]};Mo(){return this.$t}ko(){return this.Hh}xo(){return this.Ph}Do(){return this.oh}No(){return this.Ks}vo=()=>{this.pi=!1,this.ki&&(clearInterval(this.ki),this.ki=null),this.li=null,this.ai=null,this.Ai=[],this.Ti=null,this.Oi=null,this.bi=null,this.vi=null,this.gi=null,this._i=null,this.Ei=null,this.Ci=null,this.mi=null,this.Ii=null};Po=async(t,i,s,h)=>{let e=5,o=await(this.db?.Fo(t));if(o&&r.A.Uo(o)!==s&&(o=void 0),o)return new n.A(o);for(;!o;){await this.Bo(h,`Requesting ${i}`);try{o=await(0,E.Go)(`${k.et}/${t}${s}`)}catch(t){o=void 0;for(let t=e;t>0;t--)await this.Bo(h,`Error loading - Will retry in ${t} secs.`),await(0,E.Ho)(1e3);e*=2,e>60&&(e=60)}}return await(this.db?.Wo(t,o)),new n.A(o)};Yo=async(t,i,s)=>{let h=await(this.db?.Fo(t+'.mid'));if(h&&12345678!==i&&r.A.Uo(h)!==i&&(h=void 0),!h)try{h=await(0,E.Go)(`${k.et}/${t}_${i}.mid`),s!==h.length&&(h=h.slice(0,s))}catch(t){}if(!h)return;await(this.db?.Wo(t+'.mid',h));const e=new r.A(Uint8Array.from(h)).Vo,n=C.A.read(e,h,s,4);(0,T.Ko)(n,this._o)};Xo=()=>{if(w.zo.fillStyle='black',w.zo.fillRect(0,0,this.width,this.height),this.jo(1),this.xt){this.pi=!1,w.zo.font='bold 16px helvetica, sans-serif',w.zo.textAlign='left',w.zo.fillStyle='yellow';let t=35;w.zo.fillText('Sorry, an error has occured whilst loading RuneScape',30,t),t+=50,w.zo.fillStyle='white',w.zo.fillText('To fix this try the following (in order):',30,t),t+=50,w.zo.font='bold 12px helvetica, sans-serif',w.zo.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.zo.fillText('2: Try clearing your web-browsers cache from tools->internet options',30,t),t+=30,w.zo.fillText('3: Try using a different game-world',30,t),t+=30,w.zo.fillText('4: Try rebooting your computer',30,t),t+=30,w.zo.fillText('5: Try selecting a different version of Java from the play-game menu',30,t)}if(this.Dt&&(this.pi=!1,w.zo.font='bold 20px helvetica, sans-serif',w.zo.textAlign='left',w.zo.fillStyle='white',w.zo.fillText('Error - unable to load game!',50,50),w.zo.fillText('To play RuneScape make sure you play from',50,100),w.zo.fillText('https://2004scape.org',50,150)),this.kt){this.pi=!1,w.zo.font='bold 13px helvetica, sans-serif',w.zo.textAlign='left',w.zo.fillStyle='yellow';let t=35;w.zo.fillText('Error a copy of RuneScape already appears to be loaded',30,t),t+=50,w.zo.fillStyle='white',w.zo.fillText('To fix this try the following (in order):',30,t),t+=50,w.zo.font='bold 12px helvetica, sans-serif',w.zo.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.zo.fillText('2: Try rebooting your computer, and reloading',30,t)}};Zo=t=>{if(!t.qo)return!1;for(let i=0;i<t.qo.length;i++){const s=this.$o(t,i);if(!t.Jo)return!1;const h=t.Jo[i];if(2===t.qo[i]){if(s>=h)return!1}else if(3===t.qo[i]){if(s<=h)return!1}else if(4===t.qo[i]){if(s===h)return!1}else if(s!==h)return!1}return!0};Qo=(t,i,s,h,e)=>{this.bs?.draw(t,i),this.vs?.draw(t,i+e-16),y.A.fillRect(t,i+16,16,e-32,p.A.tl);let n=(e-32)*e/h|0;n<8&&(n=8);const r=(e-n-32)*s/(h-e)|0;y.A.fillRect(t,i+r+16,16,n,p.A.il),y.A.sl(t,i+r+16,p.A.hl,n),y.A.sl(t+1,i+r+16,p.A.hl,n),y.A.el(t,i+r+16,p.A.hl,16),y.A.el(t,i+r+17,p.A.hl,16),y.A.sl(t+15,i+r+16,p.A.nl,n),y.A.sl(t+14,i+r+17,p.A.nl,n-1),y.A.el(t,i+r+n+15,p.A.nl,16),y.A.el(t+1,i+r+n+14,p.A.nl,15)};rl=(t,i)=>{let s=!1;const e=h.A.Lo[t];if(!e.ol)return!1;for(let t=0;t<e.ol.length&&-1!==e.ol[t];t++){const n=h.A.Lo[e.ol[t]];if(1===n.type&&(s||=this.rl(n.id,i)),6===n.type&&(-1!==n.ll||-1!==n.al)){let t;if(t=this.Zo(n)?n.al:n.ll,-1!==t){const h=I.A.Lo[t];if(n.cl+=i,h.delay)for(;n.cl>h.delay[n.fl];)n.cl-=h.delay[n.fl]+1,n.fl++,n.fl>=h.ul&&(n.fl-=h.dl,(n.fl<0||n.fl>=h.ul)&&(n.fl=0)),s=!0}}}return s};wl=(t,i,s,n,r=!1)=>{if(0!==t.type||!t.ol||t.hide&&this.qh!==t.id&&this.$h!==t.id&&this.Jh!==t.id)return;const o=y.A.left,l=y.A.top,a=y.A.right,c=y.A.bottom;y.A.yl(i,s,i+t.width,s+t.height);const f=t.ol.length;for(let o=0;o<f;o++){if(!t.Al||!t.pl)continue;let l=t.Al[o]+i,a=t.pl[o]+s-n;const c=h.A.Lo[t.ol[o]];if(l+=c.x,a+=c.y,r&&y.A.ml(l,a,c.width,c.height,p.A.Il),c._l>0&&this.gl(c),c.type===h.A.El)c.Cl>c.scroll-c.height&&(c.Cl=c.scroll-c.height),c.Cl<0&&(c.Cl=0),this.wl(c,l,a,c.Cl,r),c.scroll>c.height&&this.Qo(l+c.width,a,c.Cl,c.scroll,c.height);else if(c.type===h.A.Tl){let t=0;for(let i=0;i<c.height;i++)for(let s=0;s<c.width;s++){if(!(c.Ol&&c.bl&&c.vl&&c.Ll))continue;let h=l+s*(c.Rl+32),e=a+i*(c.Sl+32);if(t<20&&(h+=c.Ol[t],e+=c.bl[t]),c.vl[t]>0){let i=0,s=0;const n=c.vl[t]-1;if(h>=-32&&h<=512&&e>=-32&&e<=334||0!==this.ie&&this.te===t){const r=A.A.Ml(n,c.Ll[t]);if(0!==this.ie&&this.te===t&&this.Qh===c.id?(i=this.kl-this.se,s=this.xl-this.he,i<5&&i>-5&&(i=0),s<5&&s>-5&&(s=0),this.ee<5&&(i=0,s=0),r.Dl(128,h+i,e+s)):0!==this.fe&&this.ue===t&&this.de===c.id?r.Dl(128,h,e):r.draw(h,e),33===r.Nl||1!==c.Ll[t]){const n=c.Ll[t];this.ui?.Pl(h+i+1,e+10+s,this.Fl(n),p.A.Ul),this.ui?.Pl(h+i,e+9+s,this.Fl(n),p.A.Bl)}}}else if(c.Gl&&t<20){const i=c.Gl[t];i?.draw(h,e)}t++}}else if(c.type===h.A.Hl)c.fill?y.A.fillRect(l,a,c.width,c.height,c.Wl):y.A.ml(l,a,c.width,c.height,c.Wl);else if(c.type===h.A.Yl){const t=c.font;let i=c.Wl,s=c.text;if(this.Jh!==c.id&&this.$h!==c.id&&this.qh!==c.id||0===c.Vl||(i=c.Vl),this.Zo(c)&&(i=c.Kl,c.Xl&&c.Xl.length>0&&(s=c.Xl)),c.zl===h.A.jl&&this.ye&&(s='Please wait...',i=c.Wl),!t||!s)continue;for(let h=a+t.height;s.length>0;h+=t.height){if(-1!==s.indexOf('%')){for(;;){const t=s.indexOf('%1');if(-1===t)break;s=s.substring(0,t)+this.Zl(this.$o(c,0))+s.substring(t+2)}for(;;){const t=s.indexOf('%2');if(-1===t)break;s=s.substring(0,t)+this.Zl(this.$o(c,1))+s.substring(t+2)}for(;;){const t=s.indexOf('%3');if(-1===t)break;s=s.substring(0,t)+this.Zl(this.$o(c,2))+s.substring(t+2)}for(;;){const t=s.indexOf('%4');if(-1===t)break;s=s.substring(0,t)+this.Zl(this.$o(c,3))+s.substring(t+2)}for(;;){const t=s.indexOf('%5');if(-1===t)break;s=s.substring(0,t)+this.Zl(this.$o(c,4))+s.substring(t+2)}}const e=s.indexOf('\\n');let n;-1!==e?(n=s.substring(0,e),s=s.substring(e+2)):(n=s,s=''),c.ql?t.$l(l+(c.width/2|0),h,n,i,c.Jl):t.Ql(l,h,n,i,c.Jl)}}else if(c.type===h.A.ta){let t;t=this.Zo(c)?c.ia:c.sa,t?.draw(l,a)}else if(c.type===h.A.ha){const t=e.A.ea,i=e.A.na;e.A.ea=l+(c.width/2|0),e.A.na=a+(c.height/2|0);const s=e.A.sin[c.ra]*c.zoom>>16,h=e.A.cos[c.ra]*c.zoom>>16,n=this.Zo(c);let r;r=n?c.al:c.ll;let o=null;if(-1===r)o=c.oa(-1,-1,n);else{const t=I.A.Lo[r];t.frames&&t.la&&(o=c.oa(t.frames[c.fl],t.la[c.fl],n))}o&&o.aa(0,c.ca,0,c.ra,0,s,h),e.A.ea=t,e.A.na=i}else if(c.type===h.A.fa){const t=c.font;if(!t||!c.vl||!c.Ll)continue;let i=0;for(let s=0;s<c.height;s++)for(let h=0;h<c.width;h++){if(c.vl[i]>0){const e=A.A.get(c.vl[i]-1);let n=e.name;if((e.ua||1!==c.Ll[i])&&(n=n+' x'+this.da(c.Ll[i])),!n)continue;const r=l+h*(c.Rl+115),o=a+s*(c.Sl+12);c.ql?t.$l(r+(c.width/2|0),o,n,c.Wl,c.Jl):t.Ql(r,o,n,c.Wl,c.Jl)}i++}}}y.A.yl(o,l,a,c)};gl=t=>{let i=t._l;if(i>=h.A.wa&&i<=h.A.ya)i--,i>=this.Yr?(t.text='',t.zl=0):(t.text=this.io[i],t.zl=1);else if(i>=h.A.Aa&&i<=h.A.pa)i-=h.A.Aa,i>=this.Yr?(t.text='',t.zl=0):(0===this.ho[i]?t.text='@red@Offline':this.ho[i]===k.it?t.text='@gre@World-'+(this.ho[i]-9):t.text='@yel@World-'+(this.ho[i]-9),t.zl=1);else if(i===h.A.ma)t.scroll=15*this.Yr+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i>=h.A.Ia&&i<=h.A._a)i-=h.A.Ia,i>=this.uh?(t.text='',t.zl=0):(t.text=_.A.ga(_.A.Ea(this.dh[i])),t.zl=1);else if(i===h.A.Ca)t.scroll=15*this.uh+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i===h.A.Ta){if(t.ra=150,t.ca=256*Math.sin(this.Nt/40)&2047,this.Gr){this.Gr=!1;const i=new d.us(7,null);let s=0;for(let t=0;t<7;t++){const h=this.Hr[t];h>=0&&(i[s++]=g.A.Lo[h].oa())}const h=m.A.Oa(i,s);for(let t=0;t<5;t++)0!==this.Wr[t]&&(h.ba(u.A.va[t][0],u.A.va[t][this.Wr[t]]),1===t&&h.ba(u.A.La[0],u.A.La[this.Wr[t]]));if(this.Rr){const i=I.A.Lo[this.Rr.Ra].frames;i&&(h.Sa(),h.Ma(i[0]),h.ka(64,850,-30,-50,-30,!0),t.model=h)}}}else if(i===h.A.xa)this.Us||(this.Us=t.sa,this.Bs=t.ia),this.Br?t.sa=this.Bs:t.sa=this.Us;else if(i===h.A.Da)this.Us||(this.Us=t.sa,this.Bs=t.ia),this.Br?t.sa=this.Us:t.sa=this.Bs;else if(i===h.A.Na)t.text=this.Se,this.Nt%20<10?t.text=t.text+'|':t.text=t.text+' ';else if(i===h.A.Pa)this.Ur?this.Me?(t.Wl=p.A.RED,t.text='Moderator option: Mute player for 48 hours: <ON>'):(t.Wl=p.A.Il,t.text='Moderator option: Mute player for 48 hours: <OFF>'):t.text='';else if(i===h.A.Fa||i===h.A.Ua)if(0===this.xe)t.text='';else{let i;i=0===this.De?'earlier today':1===this.De?'yesterday':this.De+' days ago',t.text='You last logged in '+i+' from: '+_.A.Ba(this.xe)}else if(i===h.A.Ga)0===this.Pe&&(t.text='0 unread messages',t.Wl=p.A.Bl),1===this.Pe&&(t.text='1 unread message',t.Wl=p.A.GREEN),this.Pe>1&&(t.text=this.Pe+' unread messages',t.Wl=p.A.GREEN);else if(i===h.A.Ha)if(201===this.Ne)t.text='';else if(200===this.Ne)t.text='You have not yet set any password recovery questions.';else{let i;i=0===this.Ne?'Earlier today':1===this.Ne?'Yesterday':this.Ne+' days ago',t.text=i+' you changed your recovery questions'}else i===h.A.Wa?201===this.Ne?t.text='':200===this.Ne?t.text='We strongly recommend you do so now to secure your account.':t.text='If you do not remember making this change then cancel it immediately':i===h.A.Ya&&(201===this.Ne?t.text='':(this.Ne,t.text="Do this from the 'account management' area on our front webpage"))};$o=(t,i)=>{if(!t.scripts||i>=t.scripts.length)return-2;try{const s=t.scripts[i];if(!s)return-1;let e=0,n=0;for(;;){const t=s[n++];if(0===t)return e;if(1===t)e+=this.Ch[s[n++]];else if(2===t)e+=this.Th[s[n++]];else if(3===t)e+=this.Eh[s[n++]];else if(4===t){const t=h.A.Lo[s[n++]],i=s[n++]+1;if(t.vl&&t.Ll)for(let s=0;s<t.vl.length;s++)t.vl[s]===i&&(e+=t.Ll[s]);else e+=0}else if(5===t)e+=this.Ae[s[n++]];else if(6===t)e+=this.Oh[this.Th[s[n++]]-1];else if(7===t)e+=100*this.Ae[s[n++]]/46875|0;else if(8===t)e+=this.Rr?.Va||0;else if(9===t)for(let t=0;t<19;t++)18===t&&(t=20),e+=this.Th[t];else if(10===t){const t=h.A.Lo[s[n++]],i=s[n++]+1;for(let s=0;s<t.vl.length;s++)if(t.vl[s]===i){e+=999999999;break}}else if(11===t)e+=this.Sr;else if(12===t)e+=this.Dr;else if(13===t){const t=this.Ae[s[n++]];e+=t&1<<s[n++]?1:0}}}catch(t){return-1}};Zl=t=>t<999999999?String(t):'*';da=t=>{let i=String(t);for(let t=i.length-3;t>0;t-=3)i=i.substring(0,t)+','+i.substring(t);return i.length>8?i='@gre@'+i.substring(0,i.length-8)+' million @whi@('+i+')':i.length>4&&(i='@cya@'+i.substring(0,i.length-4)+'K @whi@('+i+')'),' '+i};Fl=t=>t<1e5?String(t):t<1e7?(t/1e3|0)+'K':(t/1e6|0)+'M'}},7604:(t,i,s)=>{s.d(i,{w:()=>r});var h=s(7046),e=s(1651),n=s(9234);async function r(){await async function(){0===h.A.getParameter('world').length&&h.A.setParameter('world','1');'localhost'===window.location.hostname&&'0'===h.A.getParameter('world')?(e.K.ht='http://localhost',e.K.et='http://localhost',e.K.portOffset=0):await async function(t){const i=await o(t,parseInt(h.A.getParameter('world'),10)),s=new URL(i.address);e.K.it=10+i.id-1,e.K.ht=`${s.protocol}//${s.hostname}`,e.K.et=`${s.protocol}//${s.hostname}:${s.port}`,t||(e.K.ht=e.K.ht.replace('https:','http:'));e.K.portOffset=i.portOffset,e.K.members=!0===i?.members,h.A.setParameter('world',i.id.toString(10))}(window.location.protocol.startsWith('https'))}(),function(){0===h.A.getParameter('detail').length&&h.A.setParameter('detail','high');'low'===h.A.getParameter('detail')?e.K.Lt():e.K.vt()}(),0===h.A.getParameter('method').length&&h.A.setParameter('method','0')}async function o(t,i,s=0){if(s>=10)throw new Error('could not find world to connect!');const h=t?'https:':'http:';let e;try{e=JSON.parse(await(0,n.Ka)(`${h}//2004scape.org/api/v1/worldlist`))}catch(h){return await(0,n.Ho)(1e3),o(t,i,++s)}e.push({id:0,region:'Local Development',address:'http://localhost',portOffset:0,members:!0,er:0});const r=e.find((t=>t.id===i));return r||o(t,i,10)}},7906:(t,i,s)=>{s.a(t,(async(t,i)=>{try{var h=s(1312),e=s(5637),n=s(1302),r=s(6948),o=s(8317),l=s(8738),a=s(3764),c=s(4818),f=s(1183),u=s(8950),d=s(4583),w=s(1673),y=s(2511),A=s(2682),p=s(8665),m=s(9298),I=s(1069),_=s(3554),g=s(353),E=s(2634),C=s(4544),T=s(2215),O=s(3955),b=s(7953),v=s(2646),L=s(3937),R=(s(9896),s(1908)),S=s(6666),M=s(3819),k=s(2595),x=s(3045),D=s(818),N=s(5599),P=s(1023),F=s(6169),U=s(2630),B=s(5327),G=s(670),H=s(9456),W=s(8268),Y=s(8412),V=s(3606),K=s(4197),X=s(254),z=s(7628),j=s(123),Z=s(9234),q=s(3867),$=s(1651),J=s(182),Q=s(7018),tt=s(2164),it=s(7604),st=s(3795),ht=s(4909);class t extends $.K{load=async()=>{if(this.Mt)this.kt=!0;else{this.Mt=!0;try{await this.Bo(10,'Connecting to fileserver'),await R.A.load(await(await fetch('bz2.wasm')).arrayBuffer()),this.db=new C.A(await C.A.openDatabase());const t=new I.A(new Uint8Array(await(0,Z.Go)(`${$.K.et}/crc`)));for(let i=0;i<9;i++)this.Pt[i]=t.Vo;$.K.st||await this.Yo('scape_main',12345678,4e4);const i=await this.Po('title','title screen',this.Pt[1],10);this.Zt=i,this.ui=A.A.Xa(i,'p11'),this.di=A.A.Xa(i,'p12'),this.wi=A.A.Xa(i,'b12'),this.yi=A.A.Xa(i,'q8'),await this.za(),this.ja();const s=await this.Po('config','config',this.Pt[2],15),u=await this.Po('interface','interface',this.Pt[3],20),m=await this.Po('media','2d graphics',this.Pt[4],30),_=await this.Po('models','3d graphics',this.Pt[5],40),g=await this.Po('textures','textures',this.Pt[6],60),E=await this.Po('wordenc','chat system',this.Pt[7],65),T=await this.Po('sounds','sound effects',this.Pt[8],70);this.Wn=new q.Za(G.A.kn,G.A.Kn,G.A.Kn),this.Hn=new q.qa(G.A.kn,G.A.Kn+1,G.A.Kn+1),this.Hn&&(this.Ge=new x.A(this.Hn,G.A.Kn,G.A.kn,G.A.Kn));for(let t=0;t<G.A.kn;t++)this.Mn[t]=new G.A;this.ds=new y.A(512,512),await this.Bo(75,'Unpacking media'),this.es=w.A.Xa(m,'invback',0),this.ns=w.A.Xa(m,'chatback',0),this.rs=w.A.Xa(m,'mapback',0),this.os=w.A.Xa(m,'backbase1',0),this.ls=w.A.Xa(m,'backbase2',0),this.cs=w.A.Xa(m,'backhmid1',0);for(let t=0;t<13;t++)this.fs[t]=w.A.Xa(m,'sideicons',t);this.ws=y.A.Xa(m,'compass',0);try{for(let t=0;t<50;t++)22!==t&&(this.ys[t]=w.A.Xa(m,'mapscene',t))}catch(t){}try{for(let t=0;t<50;t++)this.As[t]=y.A.Xa(m,'mapfunction',t)}catch(t){}try{for(let t=0;t<20;t++)this.ps[t]=y.A.Xa(m,'hitmarks',t)}catch(t){}try{for(let t=0;t<20;t++)this.Is[t]=y.A.Xa(m,'headicons',t)}catch(t){}this._s=y.A.Xa(m,'mapflag',0);for(let t=0;t<8;t++)this.gs[t]=y.A.Xa(m,'cross',t);this.Es=y.A.Xa(m,'mapdots',0),this.Cs=y.A.Xa(m,'mapdots',1),this.Ts=y.A.Xa(m,'mapdots',2),this.Os=y.A.Xa(m,'mapdots',3),this.bs=w.A.Xa(m,'scrollbar',0),this.vs=w.A.Xa(m,'scrollbar',1),this.Ls=w.A.Xa(m,'redstone1',0),this.Rs=w.A.Xa(m,'redstone2',0),this.Ss=w.A.Xa(m,'redstone3',0),this.Ms=w.A.Xa(m,'redstone1',0),this.Ms?.$a(),this.ks=w.A.Xa(m,'redstone2',0),this.ks?.$a(),this.xs=w.A.Xa(m,'redstone1',0),this.xs?.Ja(),this.Ds=w.A.Xa(m,'redstone2',0),this.Ds?.Ja(),this.Ns=w.A.Xa(m,'redstone3',0),this.Ns?.Ja(),this.Ps=w.A.Xa(m,'redstone1',0),this.Ps?.$a(),this.Ps?.Ja(),this.Fs=w.A.Xa(m,'redstone2',0),this.Fs?.$a(),this.Fs?.Ja();const O=y.A.Xa(m,'backleft1',0);this.Gi=new f.A(O.width,O.height),O.Qa(0,0);const v=y.A.Xa(m,'backleft2',0);this.Hi=new f.A(v.width,v.height),v.Qa(0,0);const S=y.A.Xa(m,'backright1',0);this.Wi=new f.A(S.width,S.height),S.Qa(0,0);const M=y.A.Xa(m,'backright2',0);this.Yi=new f.A(M.width,M.height),M.Qa(0,0);const k=y.A.Xa(m,'backtop1',0);this.Vi=new f.A(k.width,k.height),k.Qa(0,0);const D=y.A.Xa(m,'backtop2',0);this.Ki=new f.A(D.width,D.height),D.Qa(0,0);const N=y.A.Xa(m,'backvmid1',0);this.Xi=new f.A(N.width,N.height),N.Qa(0,0);const P=y.A.Xa(m,'backvmid2',0);this.zi=new f.A(P.width,P.height),P.Qa(0,0);const F=y.A.Xa(m,'backvmid3',0);this.ji=new f.A(F.width,F.height),F.Qa(0,0);const U=y.A.Xa(m,'backhmid2',0);this.Zi=new f.A(U.width,U.height),U.Qa(0,0);const B=(21*Math.random()|0)-10,H=(21*Math.random()|0)-10,W=(21*Math.random()|0)-10,Y=(41*Math.random()|0)-20;for(let t=0;t<50;t++)this.As[t]&&this.As[t]?.translate(B+Y,H+Y,W+Y),this.ys[t]&&this.ys[t]?.translate(B+Y,H+Y,W+Y);await this.Bo(80,'Unpacking textures'),d.A.tc(g),d.A.ic(.8),d.A.sc(20),await this.Bo(83,'Unpacking models'),p.A.hc(_),J.A.hc(_),Q.A.hc(_),await this.Bo(86,'Unpacking config'),h.A.hc(s),e.A.hc(s),tt.A.hc(s),n.A.hc(s,$.K.members),r.A.hc(s),o.A.hc(s),l.A.hc(s),a.A.hc(s),$.K.st||(await this.Bo(90,'Unpacking sounds'),L.A.hc(T)),await this.Bo(92,'Unpacking interfaces'),c.A.hc(u,m,[this.ui,this.di,this.wi,this.yi]),await this.Bo(97,'Preparing game engine');for(let t=0;t<33;t++){let i=999,s=0;for(let h=0;h<35;h++)if(0===this.rs.ec[h+t*this.rs.width])999===i&&(i=h);else if(999!==i){s=h;break}this.Qi[t]=i,this.ts[t]=s-i}for(let t=9;t<160;t++){let i=999,s=0;for(let h=10;h<168;h++)if(0===this.rs.ec[h+t*this.rs.width]&&(h>34||t>34))999===i&&(i=h);else if(999!==i){s=h;break}this.ss[t-9]=i-21,this.hs[t-9]=s-i}d.A.nc(479,96),this.qi=d.A.rc,d.A.nc(190,261),this.$i=d.A.rc,d.A.nc(512,334),this.Ji=d.A.rc;const V=new Int32Array(9);for(let t=0;t<9;t++){const i=32*t+128+15,s=3*i+600,h=d.A.sin[i];V[t]=s*h>>16}x.A.init(512,334,500,800,V),b.A.hc(E),this.oc()}catch(t){console.error(t),this.xt=!0}}};update=async()=>{this.kt||this.xt||this.Dt||(this.Nt++,this.lc?await this.ac():await this.cc())};draw=async()=>{this.kt||this.xt||this.Dt?this.Xo():(this.lc?this.fc():await this.uc(),this.Xs=0)};refresh=()=>{this.qt=!0};Bo=async(t,i)=>{if(console.log(`${t}%: ${i}`),await this.dc(),!this.Zt)return void await super.Bo(t,i);this.ii?.bind();this.wi?.wc(180,54,'RuneScape is loading - please wait...',m.A.Il);u.A.ml(28,62,304,34,m.A.yc),u.A.ml(29,63,302,32,m.A.Ul),u.A.fillRect(30,64,3*t,30,m.A.yc),u.A.fillRect(30+3*t,64,300-3*t,30,m.A.Ul),this.wi?.wc(180,85,i,m.A.Il),this.ii?.draw(214,186),this.qt&&(this.qt=!1,this.pi||(this.si?.draw(0,0),this.hi?.draw(661,0)),this.Qt?.draw(128,0),this.ti?.draw(214,386),this.ei?.draw(0,265),this.ni?.draw(574,265),this.ri?.draw(128,186),this.oi?.draw(574,186)),await(0,Z.Ho)(5)};Ac=()=>{this.pi&&(this.mc(),this.mc(),this.Ic())};dc=async()=>{this.Qt||(this.So=null,this.Pi=null,this.Di=null,this.xi=null,this.Ni=null,this.Fi=null,this.Ui=null,this.Bi=null,this.si=new f.A(128,265),u.A.clear(),this.hi=new f.A(128,265),u.A.clear(),this.Qt=new f.A(533,186),u.A.clear(),this.ti=new f.A(360,146),u.A.clear(),this.ii=new f.A(360,200),u.A.clear(),this.ei=new f.A(214,267),u.A.clear(),this.ni=new f.A(215,267),u.A.clear(),this.ri=new f.A(86,79),u.A.clear(),this.oi=new f.A(87,79),u.A.clear(),this.Zt&&(await this.za(),this.ja()),this.qt=!0)};za=async()=>{if(!this.Zt)return;const t=await y.A._c(this.Zt,'title');this.si?.bind(),t.Qa(0,0),this.hi?.bind(),t.Qa(-661,0),this.Qt?.bind(),t.Qa(-128,0),this.ti?.bind(),t.Qa(-214,-386),this.ii?.bind(),t.Qa(-214,-186),this.ei?.bind(),t.Qa(0,-265),this.ni?.bind(),t.Qa(-128,-186),this.ri?.bind(),t.Qa(-128,-186),this.oi?.bind(),t.Qa(-574,-186),t.$a(),this.si?.bind(),t.Qa(394,0),this.hi?.bind(),t.Qa(-267,0),this.Qt?.bind(),t.Qa(266,0),this.ti?.bind(),t.Qa(180,-386),this.ii?.bind(),t.Qa(180,-186),this.ei?.bind(),t.Qa(394,-265),this.ni?.bind(),t.Qa(-180,-265),this.ri?.bind(),t.Qa(212,-186),this.oi?.bind(),t.Qa(-180,-186);const i=y.A.Xa(this.Zt,'logo');this.Qt?.bind(),i.draw((this.width/2|0)-(i.width/2|0)-128,18)};gc=t=>{if(!this.gi||!this._i)return;this.gi.fill(0);for(let t=0;t<5e3;t++){const t=128*Math.random()*256|0;this.gi[t]=256*Math.random()|0}for(let t=0;t<20;t++){for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this._i[s]=(this.gi[s-1]+this.gi[s+1]+this.gi[s-128]+this.gi[s+128])/4|0}const t=this.gi;this.gi=this._i,this._i=t}if(t){let i=0;for(let s=0;s<t.height;s++)for(let h=0;h<t.width;h++)if(0!==t.ec[i++]){const i=h+t.Ec+16+(s+t.Cc+16<<7);this.gi[i]=0}}};ja=()=>{if(this.Zt){this.li=w.A.Xa(this.Zt,'titlebox'),this.ai=w.A.Xa(this.Zt,'titlebutton');for(let t=0;t<12;t++)this.Ai[t]=w.A.Xa(this.Zt,'runes',t);this.mi=new y.A(128,265),this.Ii=new y.A(128,265),this.si&&(0,Z.Tc)(this.si.ec,0,this.mi.ec,0,33920),this.hi&&(0,Z.Tc)(this.hi.ec,0,this.Ii.ec,0,33920),this.Oi=new Int32Array(256);for(let t=0;t<64;t++)this.Oi[t]=262144*t;for(let t=0;t<64;t++)this.Oi[t+64]=1024*t+m.A.RED;for(let t=0;t<64;t++)this.Oi[t+128]=4*t+m.A.Bl;for(let t=0;t<64;t++)this.Oi[t+192]=m.A.Il;this.bi=new Int32Array(256);for(let t=0;t<64;t++)this.bi[t]=1024*t;for(let t=0;t<64;t++)this.bi[t+64]=4*t+m.A.GREEN;for(let t=0;t<64;t++)this.bi[t+128]=262144*t+m.A.Oc;for(let t=0;t<64;t++)this.bi[t+192]=m.A.Il;this.vi=new Int32Array(256);for(let t=0;t<64;t++)this.vi[t]=4*t;for(let t=0;t<64;t++)this.vi[t+64]=262144*t+m.A.BLUE;for(let t=0;t<64;t++)this.vi[t+128]=1024*t+m.A.bc;for(let t=0;t<64;t++)this.vi[t+192]=m.A.Il;this.Ti=new Int32Array(256),this.gi=new Int32Array(32768),this._i=new Int32Array(32768),this.gc(null),this.Ei=new Int32Array(32768),this.Ci=new Int32Array(32768),this.Bo(10,'Connecting to fileserver').then((()=>{this.pi||(this.pi=!0,this.ki=setInterval(this.Ac,35))}))}};cc=async()=>{if(0===this.$t){let t=(this.width/2|0)-80,i=20+(this.height/2|0);i+=20,1===this.vc&&this.Lc>=t-75&&this.Lc<=t+75&&this.Rc>=i-20&&this.Rc<=i+20&&(this.$t=3,this.Jt=0),t=80+(this.width/2|0),1===this.vc&&this.Lc>=t-75&&this.Lc<=t+75&&this.Rc>=i-20&&this.Rc<=i+20&&(this.ci='',this.fi='Enter your username & password.',this.$t=2,this.Jt=0)}else if(2===this.$t){let t=(this.height/2|0)-40;t+=30,t+=25,1===this.vc&&this.Rc>=t-15&&this.Rc<t&&(this.Jt=0),t+=15,1===this.vc&&this.Rc>=t-15&&this.Rc<t&&(this.Jt=1);let i=(this.width/2|0)-80,s=50+(this.height/2|0);for(s+=20,1===this.vc&&this.Lc>=i-75&&this.Lc<=i+75&&this.Rc>=s-20&&this.Rc<=s+20&&await this.Sc(this.username,this.password,!1),i=80+(this.width/2|0),1===this.vc&&this.Lc>=i-75&&this.Lc<=i+75&&this.Rc>=s-20&&this.Rc<=s+20&&(this.$t=0,this.username='',this.password='');;){const t=this.Mc();if(-1===t)return;let i=!1;for(let s=0;s<A.A.kc.length;s++)if(String.fromCharCode(t)===A.A.kc.charAt(s)){i=!0;break}0===this.Jt?(8===t&&this.username.length>0&&(this.username=this.username.substring(0,this.username.length-1)),9!==t&&10!==t&&13!==t||(this.Jt=1),i&&(this.username=this.username+String.fromCharCode(t)),this.username.length>12&&(this.username=this.username.substring(0,12))):1===this.Jt&&(8===t&&this.password.length>0&&(this.password=this.password.substring(0,this.password.length-1)),9!==t&&10!==t&&13!==t||(this.Jt=0),i&&(this.password=this.password+String.fromCharCode(t)),this.password.length>20&&(this.password=this.password.substring(0,20)))}}else if(3===this.$t){const t=this.width/2|0;let i=50+(this.height/2|0);i+=20,1===this.vc&&this.Lc>=t-75&&this.Lc<=t+75&&this.Rc>=i-20&&this.Rc<=i+20&&(this.$t=0)}};uc=async()=>{await this.dc(),this.ii?.bind(),this.li?.draw(0,0);if(0===this.$t){let t=180,i=80;this.wi?.$l(t,i,'Welcome to RuneScape',m.A.Bl,!0),t=100,i=120,this.ai?.draw(t-73,i-20),this.wi?.$l(t,i+5,'New user',m.A.Il,!0),t=260,this.ai?.draw(t-73,i-20),this.wi?.$l(t,i+5,'Existing User',m.A.Il,!0)}else if(2===this.$t){let t=100,i=60;this.ci.length>0?(this.wi?.$l(180,i-15,this.ci,m.A.Bl,!0),this.wi?.$l(180,i,this.fi,m.A.Bl,!0),i+=30):(this.wi?.$l(180,i-7,this.fi,m.A.Bl,!0),i+=30),this.wi?.Ql(90,i,`Username: ${this.username}${0===this.Jt&&this.Nt%40<20?'@yel@|':''}`,m.A.Il,!0),i+=15,this.wi?.Ql(92,i,`Password: ${M.A.xc(this.password)}${1===this.Jt&&this.Nt%40<20?'@yel@|':''}`,m.A.Il,!0),i=150,this.ai?.draw(t-73,i-20),this.wi?.$l(t,i+5,'Login',m.A.Il,!0),t=260,this.ai?.draw(t-73,i-20),this.wi?.$l(t,i+5,'Cancel',m.A.Il,!0)}else if(3===this.$t){this.wi?.$l(180,40,'Create a free account',m.A.Bl,!0);const t=180;let i=65;this.wi?.$l(180,i,'To create a new account you need to',m.A.Il,!0),i+=15,this.wi?.$l(180,i,'go back to the main RuneScape webpage',m.A.Il,!0),i+=15,this.wi?.$l(180,i,"and choose the red 'create account'",m.A.Il,!0),i+=15,this.wi?.$l(180,i,'button at the top right of that page.',m.A.Il,!0),i=150,this.ai?.draw(t-73,i-20),this.wi?.$l(t,i+5,'Cancel',m.A.Il,!0)}this.ii?.draw(214,186),this.qt&&(this.qt=!1,this.Qt?.draw(128,0),this.ti?.draw(214,386),this.ei?.draw(0,265),this.ni?.draw(574,265),this.ri?.draw(128,186),this.oi?.draw(574,186))};Sc=async(t,i,s)=>{try{s||(this.ci='',this.fi='Connecting to server...',await this.uc()),this.stream=new _.A(await _.A.Dc({host:$.K.ht,port:43594+$.K.portOffset})),await(this.stream?.Nc(this.in.data,0,8)),this.in.Pc=0,this.Gt=this.in.Fc;const h=new Int32Array([Math.floor(99999999*Math.random()),Math.floor(99999999*Math.random()),Number(this.Gt>>32n),Number(this.Gt&BigInt(4294967295))]);this.Ut.Pc=0,this.Ut.p1(10),this.Ut.p4(h[0]),this.Ut.p4(h[1]),this.Ut.p4(h[2]),this.Ut.p4(h[3]),this.Ut.p4(0),this.Ut.Uc(t),this.Ut.Uc(i),this.Ut.Bc($.K.lt,$.K.exponent),this.Bt.Pc=0,s?this.Bt.p1(18):this.Bt.p1(16),this.Bt.p1(this.Ut.Pc+36+1+1),this.Bt.p1($.K.tt),this.Bt.p1($.K.st?1:0);for(let t=0;t<9;t++)this.Bt.p4(this.Pt[t]);this.Bt.Gc(this.Ut.data,this.Ut.Pc,0),this.Ut.random=new E.A(h);for(let t=0;t<4;t++)h[t]+=50;this.Vt=new E.A(h),this.stream?.write(this.Bt.data,this.Bt.Pc);const e=await this.stream.read();if(1===e)return await(0,Z.Ho)(2e3),void await this.Sc(t,i,s);if(2===e||18===e){this.Ur=18===e,k.A.Hc(),this.lc=!0,this.Ut.Pc=0,this.in.Pc=0,this.Kt=-1,this.Xt=-1,this.zt=-1,this.jt=-1,this.packetSize=0,this.Ht=0,this.Yt=0,this.Wt=0,this.wh=0,this.eh=0,this.Js=!1,this.Wc=0;for(let t=0;t<100;t++)this.Yh[t]=null;this.re=0,this.me=0,this.He=0,this.no=0,this.je=(100*Math.random()|0)-50,this.Ze=(110*Math.random()|0)-55,this.qe=(80*Math.random()|0)-40,this.wn=(120*Math.random()|0)-60,this.yn=(30*Math.random()|0)-20,this.Pn=(20*Math.random()|0)-10&2047,this.mn=-1,this.Ve=0,this.Ke=0,this.nr=0,this.yr=0;for(let t=0;t<this.Rt;t++)this.er[t]=null,this.dr[t]=null;for(let t=0;t<8192;t++)this.wr[t]=null;this.Rr=this.er[this.St]=new W.A,this.pr.clear(),this.mr.clear(),this._r.clear();for(let t=0;t<G.A.kn;t++)for(let i=0;i<G.A.Kn;i++)for(let s=0;s<G.A.Kn;s++)this.gr[t][i][s]=null;this.Cr=new S.A,this.Yr=0,this.Wh=-1,this.oh=-1,this.Ks=-1,this.rh=-1,this.ye=!1,this.Rh=3,this.Hh=!1,this.Js=!1,this.Ph=!1,this.bh=null,this.Mr=0,this.Lh=-1,this.Br=!0,this.Yc();for(let t=0;t<5;t++)this.Wr[t]=0;return(0,j.bo)(),$.K.At=0,$.K.It=0,$.K._t=0,$.K.gt=0,$.K.Et=0,$.K.Ct=0,$.K.Tt=0,$.K.Ot=0,$.K.bt=0,void this.Vc()}if(3===e)return this.ci='',void(this.fi='Invalid username or password.');if(4===e)return this.ci='Your account has been disabled.',void(this.fi='Please check your message-centre for details.');if(5===e)return this.ci='Your account is already logged in.',void(this.fi='Try again in 60 secs...');if(6===e)return this.ci='RuneScape has been updated!',void(this.fi='Please reload this page.');if(7===e)return this.ci='This world is full.',void(this.fi='Please use a different world.');if(8===e)return this.ci='Unable to connect.',void(this.fi='Login server offline.');if(9===e)return this.ci='Login limit exceeded.',void(this.fi='Too many connections from your address.');if(10===e)return this.ci='Unable to connect.',void(this.fi='Bad session id.');if(11===e)return this.fi='Login server rejected session.',void(this.fi='Please try again.');if(12===e)return this.ci='You need a members account to login to this world.',void(this.fi='Please subscribe, or use a different world.');if(13===e)return this.ci='Could not complete login.',void(this.fi='Please try using a different world.');if(14===e)return this.ci='The server is being updated.',void(this.fi='Please wait 1 minute and try again.');if(15===e)return this.lc=!0,this.Ut.Pc=0,this.in.Pc=0,this.Kt=-1,this.Xt=-1,this.zt=-1,this.jt=-1,this.packetSize=0,this.Ht=0,this.Yt=0,this.eh=0,void(this.Js=!1);if(16===e)return this.ci='Login attempts exceeded.',void(this.fi='Please wait 1 minute and try again.');17===e&&(this.ci='You are standing in a members-only area.',this.fi='To play on this world move to a free area first')}catch(t){console.log(t),this.ci='',this.fi='Error connecting to server.'}};ac=async()=>{if(null!==this.er){this.Yt>1&&this.Yt--,this.Wt>0&&this.Wt--;for(let t=0;t<5&&await this.read();t++);if(this.lc){for(let t=0;t<this.no;t++)if(this.ao[t]<=0){try{const i=L.A.Kc(this.oo[t],this.lo[t]);if(!i)throw new Error;Date.now()+(i.Pc/22|0)>this.wo+(this.do/22|0)&&(this.do=i.Pc,this.wo=Date.now(),this.fo=this.oo[t],this.uo=this.lo[t],await(0,j.Xc)(i.data.slice(0,i.Pc),this.co))}catch(t){console.error(t)}this.no--;for(let i=t;i<this.no;i++)this.oo[i]=this.oo[i+1],this.lo[i]=this.lo[i+1],this.ao[i]=this.ao[i+1];t--}else this.ao[t]--;this.yo>0&&(this.yo-=20,this.yo<0&&(this.yo=0),0===this.yo&&this.Ao&&!$.K.st&&this.po&&await this.Yo(this.po,this.mo,this.Io));const t=k.A.flush();if(t&&(this.Ut.zc(O.A.jc),this.Ut.p2(t.Pc),this.Ut.Gc(t.data,t.Pc,0),t.release()),this.Ht++,this.Ht>750&&await this.Zc(),this.qc(),this.$c(),this.Jc(),this.Qc(),(1===this.tf[1]||1===this.tf[2]||1===this.tf[3]||1===this.tf[4])&&this.Dn++>5&&(this.Dn=0,this.Ut.zc(O.A.if),this.Ut.p2(this.Nn),this.Ut.p2(this.Pn),this.Ut.p1(this.wn),this.Ut.p1(this.yn)),this.We++,0!==this.zs&&(this.js+=20,this.js>=400&&(this.zs=0)),0!==this.fe&&(this.we++,this.we>=15&&(2===this.fe&&(this.Hs=!0),3===this.fe&&(this.Ws=!0),this.fe=0)),0!==this.ie&&(this.ee++,(this.kl>this.se+5||this.kl<this.se-5||this.xl>this.he+5||this.xl<this.he-5)&&(this.ne=!0),0===this.sf)){if(2===this.ie&&(this.Hs=!0),3===this.ie&&(this.Ws=!0),this.ie=0,this.ne&&this.ee>=5){if(this.ve=-1,this.hf(),this.ve===this.Qh&&this.Le!==this.te){const t=c.A.Lo[this.Qh];if(t.vl){const i=t.vl[this.Le];t.vl[this.Le]=t.vl[this.te],t.vl[this.te]=i}if(t.Ll){const i=t.Ll[this.Le];t.Ll[this.Le]=t.Ll[this.te],t.Ll[this.te]=i}this.Ut.zc(O.A.ef),this.Ut.p2(this.Qh),this.Ut.p2(this.te),this.Ut.p2(this.Le)}}else(1===this.Ee||this.nf(this.eh-1))&&this.eh>2?this.rf():this.eh>0&&await this.lf(this.eh-1);this.we=10,this.vc=0}if($.K.ut++,$.K.ut>127&&($.K.ut=0,this.Ut.zc(O.A.af),this.Ut.p3(4991788)),-1!==x.A.cf&&this.Rr){const t=x.A.cf,i=x.A.ff,s=this.uf(this.Rr.df[0],this.Rr.wf[0],t,i,0,0,0,0,0,0,!0);x.A.cf=-1,s&&(this.Zs=this.Lc,this.qs=this.Rc,this.zs=1,this.js=0)}1===this.vc&&this.bh&&(this.bh=null,this.Ws=!0,this.vc=0),await this.yf(),this.Af(),this.pf(),this.mf(),1!==this.sf&&1!==this.vc||this.Xs++,2===this.He&&this.If(),2===this.He&&this.Xe&&this._f();for(let t=0;t<5;t++)this.tn[t]++;if(await this.gf(),this.Wc++,this.Wc>4500&&(this.Wt=250,this.Wc-=500,this.Ut.zc(O.A.Ef)),this.ze++,this.ze>500){this.ze=0;const t=8*Math.random()|0;1&~t||(this.je+=this.$e),2&~t||(this.Ze+=this.Je),4&~t||(this.qe+=this.Qe)}if(this.je<-50&&(this.$e=2),this.je>50&&(this.$e=-2),this.Ze<-55&&(this.Je=2),this.Ze>55&&(this.Je=-2),this.qe<-40&&(this.Qe=1),this.qe>40&&(this.Qe=-1),this.dn++,this.dn>500){this.dn=0;const t=8*Math.random()|0;1&~t||(this.wn+=this.pn),2&~t||(this.yn+=this.An)}this.wn<-60&&(this.pn=2),this.wn>60&&(this.pn=-2),this.yn<-20&&(this.An=1),this.yn>10&&(this.An=-1),$.K.dt++,$.K.dt>110&&($.K.dt=0,this.Ut.zc(O.A.Cf),this.Ut.p4(0)),this.Nr++,this.Nr>50&&this.Ut.zc(O.A.Tf);try{this.stream&&this.Ut.Pc>0&&(this.stream.write(this.Ut.data,this.Ut.Pc),this.Ut.Pc=0,this.Nr=0)}catch(t){console.log(t),await this.Zc()}}}};fc=()=>{if(null===this.er)return;this.qt&&(this.qt=!1,this.Gi?.draw(0,11),this.Hi?.draw(0,375),this.Wi?.draw(729,5),this.Yi?.draw(752,231),this.Vi?.draw(0,0),this.Ki?.draw(561,0),this.Xi?.draw(520,11),this.zi?.draw(520,231),this.ji?.draw(501,375),this.Zi?.draw(0,345),this.Hs=!0,this.Ws=!0,this.Ys=!0,this.Vs=!0,2!==this.He&&(this.Ni?.draw(8,11),this.Di?.draw(561,5))),2===this.He&&this.Of(),this.Js&&1===this.Qs&&(this.Hs=!0);let t=!1;if(-1!==this.rh&&(t=this.rl(this.rh,this.We),t&&(this.Hs=!0)),2===this.fe&&(this.Hs=!0),2===this.ie&&(this.Hs=!0),this.Hs&&(this.bf(),this.Hs=!1),-1===this.oh){this.lh.Cl=this.ah-this.fh-77,this.kl>453&&this.kl<565&&this.xl>350&&this.vf(this.kl-22,this.xl-375,this.ah,77,!1,463,0,this.lh);let t=this.ah-this.lh.Cl-77;t<0&&(t=0),t>this.ah-77&&(t=this.ah-77),this.fh!==t&&(this.fh=t,this.Ws=!0)}-1!==this.oh&&(t=this.rl(this.oh,this.We),t&&(this.Ws=!0)),3===this.fe&&(this.Ws=!0),3===this.ie&&(this.Ws=!0),this.bh&&(this.Ws=!0),this.Js&&2===this.Qs&&(this.Ws=!0),this.Ws&&(this.Lf(),this.Ws=!1),2===this.He&&(this.Rf(),this.Di?.draw(561,5)),-1!==this.Lh&&(this.Ys=!0),this.Ys&&(-1!==this.Lh&&this.Lh===this.Rh&&(this.Lh=-1,this.Ut.zc(O.A.Sf),this.Ut.p1(this.Rh)),this.Ys=!1,this.Bi?.bind(),this.cs?.draw(0,0),-1===this.rh&&(-1!==this.Sh[this.Rh]&&(0===this.Rh?this.Ls?.draw(29,30):1===this.Rh?this.Rs?.draw(59,29):2===this.Rh?this.Rs?.draw(87,29):3===this.Rh?this.Ss?.draw(115,29):4===this.Rh?this.ks?.draw(156,29):5===this.Rh?this.ks?.draw(184,29):6===this.Rh&&this.Ms?.draw(212,30)),-1!==this.Sh[0]&&(0!==this.Lh||this.Nt%20<10)&&this.fs[0]?.draw(35,34),-1!==this.Sh[1]&&(1!==this.Lh||this.Nt%20<10)&&this.fs[1]?.draw(59,32),-1!==this.Sh[2]&&(2!==this.Lh||this.Nt%20<10)&&this.fs[2]?.draw(86,32),-1!==this.Sh[3]&&(3!==this.Lh||this.Nt%20<10)&&this.fs[3]?.draw(121,33),-1!==this.Sh[4]&&(4!==this.Lh||this.Nt%20<10)&&this.fs[4]?.draw(157,34),-1!==this.Sh[5]&&(5!==this.Lh||this.Nt%20<10)&&this.fs[5]?.draw(185,32),-1!==this.Sh[6]&&(6!==this.Lh||this.Nt%20<10)&&this.fs[6]?.draw(212,34)),this.Bi?.draw(520,165),this.Ui?.bind(),this.ls?.draw(0,0),-1===this.rh&&(-1!==this.Sh[this.Rh]&&(7===this.Rh?this.xs?.draw(49,0):8===this.Rh?this.Ds?.draw(81,0):9===this.Rh?this.Ds?.draw(108,0):10===this.Rh?this.Ns?.draw(136,1):11===this.Rh?this.Fs?.draw(178,0):12===this.Rh?this.Fs?.draw(205,0):13===this.Rh&&this.Ps?.draw(233,0)),-1!==this.Sh[8]&&(8!==this.Lh||this.Nt%20<10)&&this.fs[7]?.draw(80,2),-1!==this.Sh[9]&&(9!==this.Lh||this.Nt%20<10)&&this.fs[8]?.draw(107,3),-1!==this.Sh[10]&&(10!==this.Lh||this.Nt%20<10)&&this.fs[9]?.draw(142,4),-1!==this.Sh[11]&&(11!==this.Lh||this.Nt%20<10)&&this.fs[10]?.draw(179,2),-1!==this.Sh[12]&&(12!==this.Lh||this.Nt%20<10)&&this.fs[11]?.draw(206,2),-1!==this.Sh[13]&&(13!==this.Lh||this.Nt%20<10)&&this.fs[12]?.draw(230,2)),this.Ui?.draw(501,492),this.Ni?.bind()),this.Vs&&(this.Vs=!1,this.Fi?.bind(),this.os?.draw(0,0),this.di?.$l(57,33,'Public chat',m.A.Il,!0),0===this.Mh&&this.di?.$l(57,46,'On',m.A.GREEN,!0),1===this.Mh&&this.di?.$l(57,46,'Friends',m.A.Bl,!0),2===this.Mh&&this.di?.$l(57,46,'Off',m.A.RED,!0),3===this.Mh&&this.di?.$l(57,46,'Hide',m.A.Oc,!0),this.di?.$l(186,33,'Private chat',m.A.Il,!0),0===this.kh&&this.di?.$l(186,46,'On',m.A.GREEN,!0),1===this.kh&&this.di?.$l(186,46,'Friends',m.A.Bl,!0),2===this.kh&&this.di?.$l(186,46,'Off',m.A.RED,!0),this.di?.$l(326,33,'Trade/duel',m.A.Il,!0),0===this.xh&&this.di?.$l(326,46,'On',m.A.GREEN,!0),1===this.xh&&this.di?.$l(326,46,'Friends',m.A.Bl,!0),2===this.xh&&this.di?.$l(326,46,'Off',m.A.RED,!0),this.di?.$l(462,38,'Report abuse',m.A.Il,!0),this.Fi?.draw(0,471),this.Ni?.bind()),this.We=0};Of=()=>{if(this.Ye++,this.Mf(),this.kf(),this.xf(),this.Df(),this.Nf(),!this.Xe){let t=this.Nn;(this.un/256|0)>t&&(t=this.un/256|0),this.sn[4]&&this.en[4]+128>t&&(t=this.en[4]+128);const i=this.Pn+this.qe&2047;if(this.Rr&&this.Pf(this.Bn,this.Ff(this.xn,this.Rr.x,this.Rr.z)-50,this.Gn,i,t,3*t+600),$.K.ft++,$.K.ft>1802){$.K.ft=0,this.Ut.zc(O.A.Uf),this.Ut.p1(0);const t=this.Ut.Pc;this.Ut.p2(29711),this.Ut.p1(70),this.Ut.p1(256*Math.random()|0),this.Ut.p1(242),this.Ut.p1(186),this.Ut.p1(39),this.Ut.p1(61),2*Math.random()|0||this.Ut.p1(13),2*Math.random()|0||this.Ut.p2(57856),this.Ut.p2(65536*Math.random()|0),this.Ut.Bf(this.Ut.Pc-t)}}let t;t=this.Xe?this.Gf():this.Hf();const i=this.rn,s=this.ln,h=this.an,e=this.cn,n=this.fn;let r;for(let t=0;t<5;t++)this.sn[t]&&(r=Math.random()*(2*this.hn[t]+1)-this.hn[t]+Math.sin(this.tn[t]*(this.nn[t]/100))*this.en[t]|0,0===t&&(this.rn+=r),1===t&&(this.ln+=r),2===t&&(this.an+=r),3===t&&(this.fn=this.fn+r&2047),4===t&&(this.cn+=r,this.cn<128&&(this.cn=128),this.cn>383&&(this.cn=383)));r=d.A.Wf,p.A.Yf=!0,p.A.Vf=0,p.A.kl=this.kl-8,p.A.xl=this.xl-11,u.A.clear(),this.Ge?.draw(this.rn,this.ln,this.an,t,this.fn,this.cn,this.Nt),this.Ge?.Kf(),this.Xf(),this.zf(),$.K.nt&&this.jf(),this.Zf(r),this.qf(),this.Ni?.draw(8,11),this.rn=i,this.ln=s,this.an=h,this.cn=e,this.fn=n};$f=()=>{e.A.Jf?.clear(),e.A.Qf?.clear(),r.A.Ro?.clear(),n.A.Ro?.clear(),n.A.tu?.clear(),W.A.Ro?.clear(),l.A.Ro?.clear()};iu=(t,i)=>{this.su(t.x,i,t.z)};su=(t,i,s)=>{if(t<128||s<128||t>13056||s>13056)return this.Xn=-1,void(this.zn=-1);const h=this.Ff(this.xn,t,s)-i;this.hu(t,h,s)};hu=(t,i,s)=>{let h=t-this.rn,e=i-this.ln,n=s-this.an;const r=d.A.sin[this.cn],o=d.A.cos[this.cn],l=d.A.sin[this.fn],a=d.A.cos[this.fn];let c=n*l+h*a>>16;n=n*a-h*l>>16,h=c,c=e*o-n*r>>16,n=e*r+n*o>>16,e=c,n>=50?(this.Xn=d.A.ea+((h<<9)/n|0),this.zn=d.A.na+((e<<9)/n|0)):(this.Xn=-1,this.zn=-1)};Xf=()=>{this.Vr=0;for(let t=-1;t<this.nr+this.yr;t++){let i=null;if(i=-1===t?this.Rr:t<this.nr?this.er[this.rr[t]]:this.wr[this.Ar[t-this.nr]],i&&i.isVisible()){if(t<this.nr){let s=30;const h=i;if(0!==h.eu&&(this.iu(i,i.height+15),this.Xn>-1))for(let t=0;t<8;t++)h.eu&1<<t&&(this.Is[t]?.draw(this.Xn-12,this.zn-s),s-=25);t>=0&&10===this.wh&&this.mh===this.rr[t]&&(this.iu(i,i.height+15),this.Xn>-1&&this.Is[7]?.draw(this.Xn-12,this.zn-s))}else 1===this.wh&&this.yh===this.Ar[t-this.nr]&&this.Nt%20<10&&(this.iu(i,i.height+15),this.Xn>-1&&this.Is[2]?.draw(this.Xn-12,this.zn-28));if(i.nu&&(t>=this.nr||0===this.Mh||3===this.Mh||1===this.Mh&&this.ru(i.name))&&(this.iu(i,i.height),this.Xn>-1&&this.Vr<$.K.Kr&&this.wi&&(this.Zr[this.Vr]=this.wi.ou(i.nu)/2|0,this.jr[this.Vr]=this.wi.height,this.Xr[this.Vr]=this.Xn,this.zr[this.Vr]=this.zn,this.qr[this.Vr]=i.lu,this.$r[this.Vr]=i.au,this.Jr[this.Vr]=i.cu,this.Qr[this.Vr++]=i.nu,0===this.jh&&1===i.au&&(this.jr[this.Vr]+=10,this.zr[this.Vr]+=5),0===this.jh&&2===i.au&&(this.Zr[this.Vr]=60))),i.fu>this.Nt+100&&(this.iu(i,i.height+15),this.Xn>-1)){let t=30*i.uu/i.du|0;t>30&&(t=30),u.A.fillRect(this.Xn-15,this.zn-3,t,5,m.A.GREEN),u.A.fillRect(this.Xn-15+t,this.zn-3,30-t,5,m.A.RED)}if(i.fu>this.Nt+330&&(this.iu(i,i.height/2|0),this.Xn>-1&&(this.ps[i.wu]?.draw(this.Xn-12,this.zn-12),this.ui?.wc(this.Xn,this.zn+4,i.yu.toString(),m.A.Ul),this.ui?.wc(this.Xn-1,this.zn+3,i.yu.toString(),m.A.Il))),$.K.nt){if(i.pathLength>0||i.Au>=this.Nt||i.pu>this.Nt){const t=64*i.size;this.mu(128*i.df[0]+t,128*i.wf[0]+t,this.xn,i.size,65535,!1)}this.mu(i.x,i.z,this.xn,i.size,6710886,!1);let s=0;if(this.iu(i,i.height+30),t<this.nr){const t=i;if(this.ui?.wc(this.Xn,this.zn+s,t.name,m.A.Il),s-=15,-1!==t.Iu&&this.Nt-t._u<30){if(1&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Appearance Update',m.A.Il),s-=15),2&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Play Seq: '+t.gu,m.A.Il),s-=15),!(4&~t.Iu)){let i=t.Eu;i>32767&&(i-=32768),this.ui?.wc(this.Xn,this.zn+s,'Face Entity: '+i,m.A.Il),s-=15}8&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Say',m.A.Il),s-=15),16&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Hit: Type '+t.wu+' Amount '+t.yu+' HP '+t.uu+'/'+t.du,m.A.Il),s-=15),32&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Face Coord: '+t.Cu/2+' '+t.Tu/2,m.A.Il),s-=15),64&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Chat',m.A.Il),s-=15),256&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Play Spotanim: '+t.Ou,m.A.Il),s-=15),512&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Exact Move',m.A.Il),s-=15)}}else{const t=i;let s=0;if(this.iu(i,i.height+30),this.ui?.wc(this.Xn,this.zn+s,t.type?.name??null,m.A.Il),s-=15,-1!==t.Iu&&this.Nt-t._u<30){if(2&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Play Seq: '+t.gu,m.A.Il),s-=15),!(4&~t.Iu)){let i=t.Eu;i>32767&&(i-=32768),this.ui?.wc(this.Xn,this.zn+s,'Face Entity: '+i,m.A.Il),s-=15}8&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Say',m.A.Il),s-=15),16&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Hit: Type '+t.wu+' Amount '+t.yu+' HP '+t.uu+'/'+t.du,m.A.Il),s-=15),32&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Change Type: '+t.type?.id??null,m.A.Il),s-=15),64&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Play Spotanim: '+t.Ou,m.A.Il),s-=15),128&~t.Iu||(this.ui?.wc(this.Xn,this.zn+s,'Face Coord: '+t.Cu/2+' '+t.Tu/2,m.A.Il),s-=15)}}}}}if($.K.nt)for(let t=0;t<this.Eo.length;t++){const i=this.Eo[t];!i||i.level!==this.xn||i.x<0||i.z<0||i.x>=104||i.z>=104||this.mu(128*i.x+64,128*i.z+64,i.level,1,16776960,!1)}for(let t=0;t<this.Vr;t++){const i=this.Xr[t];let s=this.zr[t];const h=this.Zr[t],e=this.jr[t];let n=!0;for(;n;){n=!1;for(let r=0;r<t;r++)s+2>this.zr[r]-this.jr[r]&&s-e<this.zr[r]+2&&i-h<this.Xr[r]+this.Zr[r]&&i+h>this.Xr[r]-this.Zr[r]&&this.zr[r]-this.jr[r]<s&&(s=this.zr[r]-this.jr[r],n=!0)}this.Xn=this.Xr[t],this.zn=this.zr[t]=s;const r=this.Qr[t];if(0===this.jh){let i=m.A.Bl;if(this.qr[t]<6&&(i=m.A.bu[this.qr[t]]),6===this.qr[t]&&(i=this.Ye%20<10?m.A.RED:m.A.Bl),7===this.qr[t]&&(i=this.Ye%20<10?m.A.BLUE:m.A.Oc),8===this.qr[t]&&(i=this.Ye%20<10?45056:8454016),9===this.qr[t]){const s=150-this.Jr[t];s<50?i=1280*s+m.A.RED:s<100?i=m.A.Bl-327680*(s-50):s<150&&(i=5*(s-100)+m.A.GREEN)}if(10===this.qr[t]){const s=150-this.Jr[t];s<50?i=5*s+m.A.RED:s<100?i=m.A.bc-327680*(s-50):s<150&&(i=327680*(s-100)+m.A.BLUE-5*(s-100))}if(11===this.qr[t]){const s=150-this.Jr[t];s<50?i=m.A.Il-327685*s:s<100?i=327685*(s-50)+m.A.GREEN:s<150&&(i=m.A.Il-327680*(s-100))}if(0===this.$r[t]&&(this.wi?.wc(this.Xn,this.zn+1,r,m.A.Ul),this.wi?.wc(this.Xn,this.zn,r,i)),1===this.$r[t]&&(this.wi?.vu(this.Xn,this.zn+1,r,m.A.Ul,this.Ye),this.wi?.vu(this.Xn,this.zn,r,i,this.Ye)),2===this.$r[t]){const s=this.wi?.ou(r)??0,h=(150-this.Jr[t])*(s+100)/150;u.A.yl(334,this.Xn+50,0,this.Xn-50),this.wi?.Pl(this.Xn+50-h,this.zn+1,r,m.A.Ul),this.wi?.Pl(this.Xn+50-h,this.zn,r,i),u.A.Lu()}}else this.wi?.wc(this.Xn,this.zn+1,r,m.A.Ul),this.wi?.wc(this.Xn,this.zn,r,m.A.Bl)}};zf=()=>{2===this.wh&&this.Is[2]&&(this.su((this.Ih-this.Cn<<7)+this.Ah,2*this.gh,(this._h-this.Tn<<7)+this.ph),this.Xn>-1&&this.Nt%20<10&&this.Is[2].draw(this.Xn-12,this.zn-28))};jf=()=>{const t=507;let i=13;this.ui?.Ru(t,i,`FPS: ${this.Su}`,m.A.Bl,!0),i+=13,this.ui?.Ru(t,i,`Speed: ${this.ms.toFixed(4)} ms`,m.A.Bl,!0),i+=13,this.ui?.Ru(t,i,`Average: ${this.Mu.toFixed(4)} ms`,m.A.Bl,!0),i+=13,this.ui?.Ru(t,i,`Slowest: ${this.ku.toFixed(4)} ms`,m.A.Bl,!0),i+=13,this.ui?.Ru(t,i,`Occluders: ${x.A.xu[x.A.Du]} Active: ${x.A.Nu}`,m.A.Bl,!0),i+=13,this.To?this.ui?.Ru(t,i,'tock',m.A.Bl,!0):this.wi?.Ru(t,i,'tick',m.A.Bl,!0)};mu=(t,i,s,h,e,n)=>{const r=this.Ff(s,t,i),o=64*h;this.hu(t-o,r,i-o);const l=this.Xn,a=this.zn;this.hu(t+o,r,i-o);const c=this.Xn,f=this.zn;this.hu(t-o,r,i+o);const d=this.Xn,w=this.zn;this.hu(t+o,r,i+o);const y=this.Xn,A=this.zn;-1!==l&&-1!==c&&-1!==d&&-1!==y&&(n&&(u.A.Pu(l,a,y,A,(16711422&e)>>1),u.A.Pu(c,f,d,w,(16711422&e)>>1)),u.A.Pu(l,a,c,f,e),u.A.Pu(l,a,d,w,e),u.A.Pu(c,f,y,A,e),u.A.Pu(d,w,y,A,e))};qf=()=>{if(this.Fu(),1===this.zs&&this.gs[this.js/100|0]?.draw(this.Zs-8-8,this.qs-8-11),2===this.zs&&this.gs[4+(this.js/100|0)]?.draw(this.Zs-8-8,this.qs-8-11),-1!==this.Ks&&(this.rl(this.Ks,this.We),this.wl(c.A.Lo[this.Ks],0,0,0)),this.Uu(),this.Js?0===this.Qs&&this.Bu():(this.hf(),this.Gu()),1===this.Mr&&(this.Pr>0||1===this.Fr?this.Is[1]?.draw(472,258):this.Is[1]?.draw(472,296)),this.Pr>0&&(this.Is[0]?.draw(472,296),this.di?.wc(484,329,'Level: '+this.Pr,m.A.Bl)),1===this.Fr&&(this.Is[6]?.draw(472,296),this.di?.wc(484,329,'Arena',m.A.Bl)),0!==this.Yt){let t=this.Yt/50|0;const i=t/60|0;t%=60,t<10?this.di?.Pl(4,329,'System update in: '+i+':0'+t,m.A.Bl):this.di?.Pl(4,329,'System update in: '+i+':'+t,m.A.Bl)}};Fu=()=>{if(0===this.zh)return;const t=this.di;let i=0;0!==this.Yt&&(i=1);for(let s=0;s<100;s++){if(!this.Yh[s])continue;const h=this.messageType[s];let e;if((3===h||7===h)&&(7===h||0===this.kh||1===this.kh&&this.ru(this.Vh[s]))&&(e=329-13*i,t?.Pl(4,e,'From '+this.Vh[s]+': '+this.Yh[s],m.A.Ul),t?.Pl(4,e-1,'From '+this.Vh[s]+': '+this.Yh[s],m.A.Oc),i++,i>=5))return;if(5===h&&this.kh<2&&(e=329-13*i,t?.Pl(4,e,this.Yh[s],m.A.Ul),t?.Pl(4,e-1,this.Yh[s],m.A.Oc),i++,i>=5))return;if(6===h&&this.kh<2&&(e=329-13*i,t?.Pl(4,e,'To '+this.Vh[s]+': '+this.Yh[s],m.A.Ul),t?.Pl(4,e-1,'To '+this.Vh[s]+': '+this.Yh[s],m.A.Oc),i++,i>=5))return}};Uu=()=>{if(!this.Rr)return;const t=(this.Rr.x>>7)+this.Cn,i=(this.Rr.z>>7)+this.Tn;if(this.Pr=t>=2944&&t<3392&&i>=3520&&i<6400?1+((i-3520)/8|0):t>=2944&&t<3392&&i>=9920&&i<12800?1+((i-9920)/8|0):0,this.Fr=0,t>=3328&&t<3392&&i>=3200&&i<3264){const s=63&t,h=63&i;(s>=4&&s<=29&&h>=44&&h<=58||s>=36&&s<=61&&h>=44&&h<=58||s>=4&&s<=29&&h>=25&&h<=39||s>=36&&s<=61&&h>=25&&h<=39||s>=4&&s<=29&&h>=6&&h<=20||s>=36&&s<=61&&h>=6&&h<=20)&&(this.Fr=1)}0===this.Fr&&t>=3328&&t<=3393&&i>=3203&&i<=3325&&(this.Fr=2),this.$s=0,(t>=3053&&t<=3156&&i>=3056&&i<=3136||t>=3072&&t<=3118&&i>=9492&&i<=9535)&&(this.$s=1),1===this.$s&&t>=3139&&t<=3199&&i>=3008&&i<=3062&&(this.$s=0)};bf=()=>{this.xi?.bind(),this.$i&&(d.A.rc=this.$i),this.es?.draw(0,0),-1!==this.rh?this.wl(c.A.Lo[this.rh],0,0,0):-1!==this.Sh[this.Rh]&&this.wl(c.A.Lo[this.Sh[this.Rh]],0,0,0),this.Js&&1===this.Qs&&this.Bu(),this.xi?.draw(562,231),this.Ni?.bind(),this.Ji&&(d.A.rc=this.Ji)};Lf=()=>{if(this.Pi?.bind(),this.qi&&(d.A.rc=this.qi),this.ns?.draw(0,0),this.Ph)this.wi?.wc(239,40,this.Fh,m.A.Ul),this.wi?.wc(239,60,this.Uh+'*',m.A.Hu);else if(this.Hh)this.wi?.wc(239,40,'Enter amount:',m.A.Ul),this.wi?.wc(239,60,this.Gh+'*',m.A.Hu);else if(this.bh)this.wi?.wc(239,40,this.bh,m.A.Ul),this.wi?.wc(239,60,'Click to continue',m.A.Hu);else if(-1!==this.oh)this.wl(c.A.Lo[this.oh],0,0,0);else if(-1===this.Wh){let t=this.di;0===$.K.rt&&(t=this.yi);let i=0;u.A.yl(0,0,463,77);for(let s=0;s<100;s++){const h=this.Yh[s];if(!h)continue;const e=this.messageType[s],n=this.fh+70-14*i;0===e&&(n>0&&n<110&&t?.Pl(4,n,h,m.A.Ul),i++),1===e&&(n>0&&n<110&&(t?.Pl(4,n,this.Vh[s]+':',m.A.Il),t?.Pl(t.ou(this.Vh[s])+12,n,h,m.A.BLUE)),i++),2===e&&(0===this.Mh||1===this.Mh&&this.ru(this.Vh[s]))&&(n>0&&n<110&&(t?.Pl(4,n,this.Vh[s]+':',m.A.Ul),t?.Pl(t.ou(this.Vh[s])+12,n,h,m.A.BLUE)),i++),3!==e&&7!==e||0!==this.zh||!(7===e||0===this.kh||1===this.kh&&this.ru(this.Vh[s]))||(n>0&&n<110&&(t?.Pl(4,n,'From '+this.Vh[s]+':',m.A.Ul),t?.Pl(t.ou('From '+this.Vh[s])+12,n,h,m.A.Wu)),i++),4===e&&(0===this.xh||1===this.xh&&this.ru(this.Vh[s]))&&(n>0&&n<110&&t?.Pl(4,n,this.Vh[s]+' '+this.Yh[s],m.A.Yu),i++),5===e&&0===this.zh&&this.kh<2&&(n>0&&n<110&&t?.Pl(4,n,h,m.A.Wu),i++),6===e&&0===this.zh&&this.kh<2&&(n>0&&n<110&&(t?.Pl(4,n,'To '+this.Vh[s]+':',m.A.Ul),t?.Pl(t.ou('To '+this.Vh[s])+12,n,h,m.A.Wu)),i++),8===e&&(0===this.xh||1===this.xh&&this.ru(this.Vh[s]))&&(n>0&&n<110&&t?.Pl(4,n,this.Vh[s]+' '+this.Yh[s],m.A.Vu),i++)}u.A.Lu(),this.ah=14*i+7,this.ah<78&&(this.ah=78),this.Qo(463,0,this.ah-this.fh-77,this.ah,77),0==$.K.rt?t?.Pl(3,90,this.Zh+'*',m.A.Ul):1==$.K.rt?t?.Pl(3,90,this.Zh+'*',m.A.BLUE):(t?.Pl(4,90,M.A.ga(this.username)+':',m.A.Ul),t?.Pl(t.ou(this.username+': ')+6,90,this.Zh+'*',m.A.BLUE)),u.A.el(0,77,m.A.Ul,479)}else this.wl(c.A.Lo[this.Wh],0,0,0);this.Js&&2===this.Qs&&this.Bu(),this.Pi?.draw(22,375),this.Ni?.bind(),this.Ji&&(d.A.rc=this.Ji)};Rf=()=>{if(this.Di?.bind(),!this.Rr)return;const t=this.Pn+this.wn&2047;let i=48+(this.Rr.x/32|0),s=464-(this.Rr.z/32|0);this.ds?.Ku(21,9,146,151,this.ss,this.hs,i,s,t,this.yn+256),this.ws?.Ku(0,0,33,33,this.Qi,this.ts,25,25,this.Pn,256);for(let t=0;t<this.Fe;t++)i=4*this.Ue[t]+2-(this.Rr.x/32|0),s=4*this.Be[t]+2-(this.Rr.z/32|0),this.Xu(s,this.Gs[t],i);for(let t=0;t<G.A.Kn;t++)for(let h=0;h<G.A.Kn;h++){this.gr[this.xn][t][h]&&(i=4*t+2-(this.Rr.x/32|0),s=4*h+2-(this.Rr.z/32|0),this.Xu(s,this.Es,i))}for(let t=0;t<this.yr;t++){const h=this.wr[this.Ar[t]];h&&h.isVisible()&&h.type&&h.type.zu&&(i=(h.x/32|0)-(this.Rr.x/32|0),s=(h.z/32|0)-(this.Rr.z/32|0),this.Xu(s,this.Cs,i))}for(let t=0;t<this.nr;t++){const h=this.er[this.rr[t]];if(h&&h.isVisible()&&h.name){i=(h.x/32|0)-(this.Rr.x/32|0),s=(h.z/32|0)-(this.Rr.z/32|0);let t=!1;const e=M.A.ju(h.name);for(let i=0;i<this.Yr;i++)if(e===this.so[i]&&0!==this.ho[i]){t=!0;break}t?this.Xu(s,this.Os,i):this.Xu(s,this.Ts,i)}}0!==this.Ve&&(i=4*this.Ve+2-(this.Rr.x/32|0),s=4*this.Ke+2-(this.Rr.z/32|0),this.Xu(s,this._s,i)),u.A.fillRect(93,82,3,3,m.A.Il),this.Ni?.bind()};Xu=(t,i,s)=>{if(!i)return;const h=this.Pn+this.wn&2047,e=s*s+t*t;if(e>6400)return;let n=d.A.sin[h],r=d.A.cos[h];n=256*n/(this.yn+256)|0,r=256*r/(this.yn+256)|0;const o=t*n+s*r>>16,l=t*r-s*n>>16;e>2500&&this.rs?i.Zu(o+94-(i.Nl/2|0),83-l-(i.qu/2|0),this.rs):i.draw(o+94-(i.Nl/2|0),83-l-(i.qu/2|0))};$u=t=>{if(!this.ds)return;const i=this.ds.ec,s=i.length;for(let t=0;t<s;t++)i[t]=0;for(let s=1;s<G.A.Kn-1;s++){let h=512*(G.A.Kn-1-s)*4+24628;for(let e=1;e<G.A.Kn-1;e++)!this.Wn||24&this.Wn[t][e][s]||this.Ge?.Ju(t,e,s,i,h,512),t<3&&this.Wn&&8&this.Wn[t+1][e][s]&&this.Ge?.Ju(t+1,e,s,i,h,512),h+=4}const h=(238+(20*Math.random()|0)-10<<16)+(238+(20*Math.random()|0)-10<<8)+(20*Math.random()|0)+238-10,n=238+(20*Math.random()|0)-10<<16;this.ds.bind();for(let i=1;i<G.A.Kn-1;i++)for(let s=1;s<G.A.Kn-1;s++)!this.Wn||24&this.Wn[t][s][i]||this.Qu(s,i,t,h,n),t<3&&this.Wn&&8&this.Wn[t+1][s][i]&&this.Qu(s,i,t+1,h,n);this.Ni?.bind(),this.Fe=0;for(let t=0;t<G.A.Kn;t++)for(let i=0;i<G.A.Kn;i++){let s=this.Ge?.td(this.xn,t,i)??0;if(0===s)continue;s=s>>14&32767;const h=e.A.get(s).sd;if(h<0)continue;let n=t,r=i;if(22!==h&&29!==h&&34!==h&&36!==h&&46!==h&&47!==h&&48!==h){const s=G.A.Kn,h=G.A.Kn,e=this.Mn[this.xn];if(e){const o=e.flags;for(let e=0;e<10;e++){const e=4*Math.random()|0;0===e&&n>0&&n>t-3&&(o[G.A.index(n-1,r)]&H.A.hd)===H.A.OPEN&&n--,1===e&&n<s-1&&n<t+3&&(o[G.A.index(n+1,r)]&H.A.ed)===H.A.OPEN&&n++,2===e&&r>0&&r>i-3&&(o[G.A.index(n,r-1)]&H.A.nd)===H.A.OPEN&&r--,3===e&&r<h-1&&r<i+3&&(o[G.A.index(n,r+1)]&H.A.rd)===H.A.OPEN&&r++}}}this.Gs[this.Fe]=this.As[h],this.Ue[this.Fe]=n,this.Be[this.Fe]=r,this.Fe++}};Qu=(t,i,s,h,n)=>{if(!this.Ge||!this.ds)return;let r=this.Ge.od(s,t,i);if(0!==r){const o=this.Ge.ld(s,t,i,r),l=o>>6&3,a=31&o;let c=h;r>0&&(c=n);const f=this.ds.ec,u=4*t+512*(103-i)*4+24624,d=r>>14&32767,w=e.A.get(d);if(-1===w.ad)a!==P.A.fd.id&&a!==P.A.ud.id||(l===F.A.dd?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.A.wd?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.A.yd?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.A.Ad&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c)),a===P.A.pd.id&&(l===F.A.dd?f[u]=c:l===F.A.wd?f[u+3]=c:l===F.A.yd?f[u+3+1536]=c:l===F.A.Ad&&(f[u+1536]=c)),a===P.A.ud.id&&(l===F.A.Ad?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.A.dd?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.A.wd?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.A.yd&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c));else{const s=this.ys[w.ad];if(s){const h=(4*w.width-s.width)/2|0,e=(4*w.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.A.Kn-i-w.length)+e+48)}}}if(r=this.Ge.md(s,t,i),0!==r){const h=this.Ge.ld(s,t,i,r),n=h>>6&3,o=31&h,l=r>>14&32767,a=e.A.get(l);if(-1!==a.ad){const s=this.ys[a.ad];if(s){const h=(4*a.width-s.width)/2|0,e=(4*a.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.A.Kn-i-a.length)+e+48)}}else if(o===P.A.Id.id){let s=15658734;r>0&&(s=15597568);const h=this.ds.ec,e=4*t+512*(G.A.Kn-1-i)*4+24624;n===F.A.dd||n===F.A.yd?(h[e+1536]=s,h[e+1024+1]=s,h[e+512+2]=s,h[e+3]=s):(h[e]=s,h[e+512+1]=s,h[e+1024+2]=s,h[e+1536+3]=s)}}if(r=this.Ge.td(s,t,i),0!==r){const s=e.A.get(r>>14&32767);if(-1!==s.ad){const h=this.ys[s.ad];if(h){const e=(4*s.width-h.width)/2|0,n=(4*s.length-h.height)/2|0;h.draw(4*t+48+e,4*(G.A.Kn-i-s.length)+n+48)}}}};Gu=()=>{if(this.eh<2&&0===this.re&&0===this.me)return;let t;t=1===this.re&&this.eh<2?'Use '+this.ce+' with...':1===this.me&&this.eh<2?this.ge+'...':this.nh[this.eh-1],this.eh>2&&(t=t+'@whi@ / '+(this.eh-2)+' more options'),this.wi?._d(4,15,t,m.A.Il,!0,this.Nt/1e3|0)};Bu=()=>{const t=this.th,i=this.ih,s=this.sh,h=this.hh,e=m.A.gd;u.A.fillRect(t,i,s,h,e),u.A.fillRect(t+1,i+1,s-2,16,m.A.Ul),u.A.ml(t+1,i+18,s-2,h-19,m.A.Ul),this.wi?.Pl(t+3,i+14,'Choose Option',e);let n=this.kl,r=this.xl;0===this.Qs&&(n-=8,r-=11),1===this.Qs&&(n-=562,r-=231),2===this.Qs&&(n-=22,r-=375);for(let h=0;h<this.eh;h++){const e=i+15*(this.eh-1-h)+31;let o=m.A.Il;n>t&&n<t+s&&r>e-13&&r<e+3&&(o=m.A.Bl),this.wi?.Ql(t+3,e,this.nh[h],o,!0)}};yf=async()=>{if(0!==this.ie)return;let t=this.vc;if(1===this.me&&this.Lc>=520&&this.Rc>=165&&this.Lc<=788&&this.Rc<=230&&(t=0),this.Js){if(1!==t){let t=this.kl,i=this.xl;0===this.Qs?(t-=8,i-=11):1===this.Qs?(t-=562,i-=231):2===this.Qs&&(t-=22,i-=375),(t<this.th-10||t>this.th+this.sh+10||i<this.ih-10||i>this.ih+this.hh+10)&&(this.Js=!1,1===this.Qs&&(this.Hs=!0),2===this.Qs&&(this.Ws=!0))}if(1===t){const t=this.th,i=this.ih,s=this.sh;let h=this.Lc,e=this.Rc;0===this.Qs?(h-=8,e-=11):1===this.Qs?(h-=562,e-=231):2===this.Qs&&(h-=22,e-=375);let n=-1;for(let r=0;r<this.eh;r++){const o=i+15*(this.eh-1-r)+31;h>t&&h<t+s&&e>o-13&&e<o+3&&(n=r)}-1!==n&&await this.lf(n),this.Js=!1,1===this.Qs?this.Hs=!0:2===this.Qs&&(this.Ws=!0)}}else{if(1===t&&this.eh>0){const t=this.Ce[this.eh-1];if(602===t||596===t||22===t||892===t||415===t||405===t||38===t||422===t||478===t||347===t||188===t){const t=this.Oe[this.eh-1],i=this.be[this.eh-1];if(c.A.Lo[i].draggable)return this.ne=!1,this.ee=0,this.Qh=i,this.te=t,this.ie=2,this.se=this.Lc,this.he=this.Rc,c.A.Lo[i].Ed===this.Ks&&(this.ie=1),void(c.A.Lo[i].Ed===this.oh&&(this.ie=3))}}if(1===t&&(1===this.Ee||this.nf(this.eh-1))&&this.eh>2&&(t=2),1===t&&this.eh>0&&await this.lf(this.eh-1),2!==t||this.eh<=0)return;this.rf()}};Af=()=>{if(1===this.vc&&this.Rr){let t=this.Lc-21-561,i=this.Rc-9-5;if(t>=0&&i>=0&&t<146&&i<151){t-=73,i-=75;const s=this.Pn+this.wn&2047;let h=d.A.sin[s],e=d.A.cos[s];h=h*(this.yn+256)>>8,e=e*(this.yn+256)>>8;const n=i*h+t*e>>11,r=i*e-t*h>>11,o=this.Rr.x+n>>7,l=this.Rr.z-r>>7;this.uf(this.Rr.df[0],this.Rr.wf[0],o,l,1,0,0,0,0,0,!0)&&(this.Ut.p1(t),this.Ut.p1(i),this.Ut.p2(this.Pn),this.Ut.p1(57),this.Ut.p1(this.wn),this.Ut.p1(this.yn),this.Ut.p1(89),this.Ut.p2(this.Rr.x),this.Ut.p2(this.Rr.z),this.Ut.p1(this.Lr),this.Ut.p1(63))}}};nf=t=>{if(t<0)return!1;let i=this.Ce[t];return i>=2e3&&(i-=2e3),406===i};lf=async t=>{if(t<0)return;this.Hh&&(this.Hh=!1,this.Ws=!0);let i=this.Ce[t];const s=this.Te[t],h=this.Oe[t],r=this.be[t];if(i>=2e3&&(i-=2e3),903===i||363===i){let s=this.nh[t];const h=s.indexOf('@whi@');if(-1!==h){s=s.substring(h+5).trim();const t=M.A.ga(M.A.Ea(M.A.ju(s)));let e=!1;for(let s=0;s<this.nr;s++){const h=this.er[this.rr[s]];if(h&&h.name&&h.name.toLowerCase()===t.toLowerCase()&&this.Rr){this.uf(this.Rr.df[0],this.Rr.wf[0],h.df[0],h.wf[0],2,1,1,0,0,0,!1),903===i?this.Ut.zc(O.A.Cd):363===i&&this.Ut.zc(O.A.Td),this.Ut.p2(this.rr[s]),e=!0;break}}e||this.Od(0,'Unable to find '+t,'')}}else if(450===i&&this.bd(O.A.vd,h,r,s))this.Ut.p2(this.ae),this.Ut.p2(this.oe),this.Ut.p2(this.le);else if(405===i||38===i||422===i||478===i||347===i)478===i?(3&h||$.K.Et++,$.K.Et>=90&&this.Ut.zc(O.A.Ld),this.Ut.zc(O.A.Rd)):347===i?this.Ut.zc(O.A.Sd):422===i?this.Ut.zc(O.A.Md):405===i?($.K._t+=s,$.K._t>=97&&(this.Ut.zc(O.A.kd),this.Ut.p3(14953816)),this.Ut.zc(O.A.xd)):38===i&&this.Ut.zc(O.A.Dd),this.Ut.p2(s),this.Ut.p2(h),this.Ut.p2(r),this.we=0,this.de=r,this.ue=h,this.fe=2,c.A.Lo[r].Ed===this.Ks&&(this.fe=1),c.A.Lo[r].Ed===this.oh&&(this.fe=3);else if(728===i||542===i||6===i||963===i||245===i){const t=this.wr[s];t&&this.Rr&&(this.uf(this.Rr.df[0],this.Rr.wf[0],t.df[0],t.wf[0],2,1,1,0,0,0,!1),this.Zs=this.Lc,this.qs=this.Rc,this.zs=2,this.js=0,542===i?this.Ut.zc(O.A.Nd):6===i?(3&s||$.K.It++,$.K.It>=124&&(this.Ut.zc(O.A.Pd),this.Ut.p4(0)),this.Ut.zc(O.A.Fd)):963===i?this.Ut.zc(O.A.Ud):728===i?this.Ut.zc(O.A.Bd):245===i&&(3&s||$.K.gt++,$.K.gt>=85&&(this.Ut.zc(O.A.Gd),this.Ut.p2(39596)),this.Ut.zc(O.A.Hd)),this.Ut.p2(s))}else if(217===i){if(this.Rr){this.uf(this.Rr.df[0],this.Rr.wf[0],h,r,2,0,0,0,0,0,!1)||this.uf(this.Rr.df[0],this.Rr.wf[0],h,r,2,1,1,0,0,0,!1),this.Zs=this.Lc,this.qs=this.Rc,this.zs=2,this.js=0,this.Ut.zc(O.A.Wd),this.Ut.p2(h+this.Cn),this.Ut.p2(r+this.Tn),this.Ut.p2(s),this.Ut.p2(this.ae),this.Ut.p2(this.oe),this.Ut.p2(this.le)}}else if(1175===i){const t=s>>14&32767,i=e.A.get(t);let h;h=i.Yd?i.Yd:"It's a "+i.name+'.',this.Od(0,h,'')}else if(285===i)this.bd(O.A.Vd,h,r,s);else if(881===i)this.Ut.zc(O.A.Kd),this.Ut.p2(s),this.Ut.p2(h),this.Ut.p2(r),this.Ut.p2(this.ae),this.Ut.p2(this.oe),this.Ut.p2(this.le),this.we=0,this.de=r,this.ue=h,this.fe=2,c.A.Lo[r].Ed===this.Ks&&(this.fe=1),c.A.Lo[r].Ed===this.oh&&(this.fe=3);else if(391===i)this.Ut.zc(O.A.Xd),this.Ut.p2(s),this.Ut.p2(h),this.Ut.p2(r),this.Ut.p2(this.Ie),this.we=0,this.de=r,this.ue=h,this.fe=2,c.A.Lo[r].Ed===this.Ks&&(this.fe=1),c.A.Lo[r].Ed===this.oh&&(this.fe=3);else if(660===i)this.Js?this.Ge?.click(h-8,r-11):this.Ge?.click(this.Lc-8,this.Rc-11);else{if(188===i)return this.re=1,this.oe=h,this.le=r,this.ae=s,this.ce=n.A.get(s).name,void(this.me=0);if(44===i)this.ye||(this.Ut.zc(O.A.zd),this.Ut.p2(r),this.ye=!0);else if(1773===i){const t=n.A.get(s);let i;i=r>=1e5?r+' x '+t.name:t.Yd?t.Yd:"It's a "+t.name+'.',this.Od(0,i,'')}else if(900===i){const t=this.wr[s];t&&this.Rr&&(this.uf(this.Rr.df[0],this.Rr.wf[0],t.df[0],t.wf[0],2,1,1,0,0,0,!1),this.Zs=this.Lc,this.qs=this.Rc,this.zs=2,this.js=0,this.Ut.zc(O.A.jd),this.Ut.p2(s),this.Ut.p2(this.ae),this.Ut.p2(this.oe),this.Ut.p2(this.le))}else if(1373===i||1544===i||151===i||1101===i){const t=this.er[s];t&&this.Rr&&(this.uf(this.Rr.df[0],this.Rr.wf[0],t.df[0],t.wf[0],2,1,1,0,0,0,!1),this.Zs=this.Lc,this.qs=this.Rc,this.zs=2,this.js=0,1101===i?this.Ut.zc(O.A.Td):151===i?($.K.Ot++,$.K.Ot>=90&&(this.Ut.zc(O.A.Zd),this.Ut.p2(31114)),this.Ut.zc(O.A.qd)):1373===i?this.Ut.zc(O.A.Cd):1544===i&&this.Ut.zc(O.A.$d),this.Ut.p2(s))}else if(265===i){const t=this.wr[s];t&&this.Rr&&(this.uf(this.Rr.df[0],this.Rr.wf[0],t.df[0],t.wf[0],2,1,1,0,0,0,!1),this.Zs=this.Lc,this.qs=this.Rc,this.zs=2,this.js=0,this.Ut.zc(O.A.Jd),this.Ut.p2(s),this.Ut.p2(this.Ie))}else if(679===i){const i=this.nh[t],s=i.indexOf('@whi@');if(-1!==s){const t=M.A.ju(i.substring(s+5).trim());let h=-1;for(let i=0;i<this.Yr;i++)if(this.so[i]===t){h=i;break}-1!==h&&this.ho[h]>0&&(this.Ws=!0,this.Hh=!1,this.Ph=!0,this.Uh='',this.Bh=3,this.eo=this.so[h],this.Fh='Enter message to send to '+this.io[h])}}else if(55===i)this.bd(O.A.Qd,h,r,s)&&this.Ut.p2(this.Ie);else if(224===i||993===i||99===i||746===i||877===i){if(this.Rr){this.uf(this.Rr.df[0],this.Rr.wf[0],h,r,2,0,0,0,0,0,!1)||this.uf(this.Rr.df[0],this.Rr.wf[0],h,r,2,1,1,0,0,0,!1),this.Zs=this.Lc,this.qs=this.Rc,this.zs=2,this.js=0,224===i?this.Ut.zc(O.A.tw):746===i?this.Ut.zc(O.A.iw):877===i?this.Ut.zc(O.A.sw):99===i?this.Ut.zc(O.A.hw):993===i&&this.Ut.zc(O.A.ew),this.Ut.p2(h+this.Cn),this.Ut.p2(r+this.Tn),this.Ut.p2(s)}}else if(1607===i){const t=this.wr[s];if(t&&t.type){let i;i=t.type.Yd?t.type.Yd:"It's a "+t.type.name+'.',this.Od(0,i,'')}}else if(504===i)this.bd(O.A.nw,h,r,s);else{if(930===i){const t=c.A.Lo[r];this.me=1,this.Ie=r,this._e=t.rw,this.re=0;let i=t.ow;i&&-1!==i.indexOf(' ')&&(i=i.substring(0,i.indexOf(' ')));let s=t.ow;return s&&-1!==s.indexOf(' ')&&(s=s.substring(s.indexOf(' ')+1)),this.ge=i+' '+t.action+' '+s,void(16===this._e&&(this.Hs=!0,this.Rh=3,this.Ys=!0))}if(951===i){const t=c.A.Lo[r];let i=!0;t._l>0&&(i=this.lw(t)),i&&(this.Ut.zc(O.A.aw),this.Ut.p2(r))}else if(602===i||596===i||22===i||892===i||415===i)22===i?this.Ut.zc(O.A.cw):415===i?(3&r||$.K.Tt++,$.K.Tt>=55&&(this.Ut.zc(O.A.fw),this.Ut.p4(0)),this.Ut.zc(O.A.uw)):602===i?this.Ut.zc(O.A.dw):892===i?(3&h||$.K.bt++,$.K.bt>=130&&(this.Ut.zc(O.A.ww),this.Ut.p1(177)),this.Ut.zc(O.A.yw)):596===i&&this.Ut.zc(O.A.Aw),this.Ut.p2(s),this.Ut.p2(h),this.Ut.p2(r),this.we=0,this.de=r,this.ue=h,this.fe=2,c.A.Lo[r].Ed===this.Ks&&(this.fe=1),c.A.Lo[r].Ed===this.oh&&(this.fe=3);else if(581===i)3&s||$.K.At++,$.K.At>=99&&(this.Ut.zc(O.A.pw),this.Ut.p4(0)),this.bd(O.A.mw,h,r,s);else if(965===i){if(this.Rr){this.uf(this.Rr.df[0],this.Rr.wf[0],h,r,2,0,0,0,0,0,!1)||this.uf(this.Rr.df[0],this.Rr.wf[0],h,r,2,1,1,0,0,0,!1),this.Zs=this.Lc,this.qs=this.Rc,this.zs=2,this.js=0,this.Ut.zc(O.A.Iw),this.Ut.p2(h+this.Cn),this.Ut.p2(r+this.Tn),this.Ut.p2(s),this.Ut.p2(this.Ie)}}else if(1501===i)$.K.Ct+=this.Tn,$.K.Ct>=92&&(this.Ut.zc(O.A._w),this.Ut.p4(0)),this.bd(O.A.gw,h,r,s);else if(364===i)this.bd(O.A.Ew,h,r,s);else if(1102===i){const t=n.A.get(s);let i;i=t.Yd?t.Yd:"It's a "+t.name+'.',this.Od(0,i,'')}else if(960===i){this.Ut.zc(O.A.aw),this.Ut.p2(r);const t=c.A.Lo[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];t.Jo&&this.Ae[i]!==t.Jo[0]&&(this.Ae[i]=t.Jo[0],await this.Cw(i),this.Hs=!0)}}else if(34===i){const i=this.nh[t],s=i.indexOf('@whi@');if(-1!==s){this.Tw(),this.Se=i.substring(s+5).trim(),this.Me=!1;for(let t=0;t<c.A.Lo.length;t++)if(c.A.Lo[t]&&c.A.Lo[t]._l===c.A.Na){this.ke=this.Ks=c.A.Lo[t].Ed;break}}}else if(947===i)this.Tw();else if(367===i){const t=this.er[s];t&&this.Rr&&(this.uf(this.Rr.df[0],this.Rr.wf[0],t.df[0],t.wf[0],2,1,1,0,0,0,!1),this.Zs=this.Lc,this.qs=this.Rc,this.zs=2,this.js=0,this.Ut.zc(O.A.Ow),this.Ut.p2(s),this.Ut.p2(this.ae),this.Ut.p2(this.oe),this.Ut.p2(this.le))}else if(465===i){this.Ut.zc(O.A.aw),this.Ut.p2(r);const t=c.A.Lo[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];this.Ae[i]=1-this.Ae[i],await this.Cw(i),this.Hs=!0}}else if(406===i||436===i||557===i||556===i){const s=this.nh[t],h=s.indexOf('@whi@');if(-1!==h){const t=M.A.ju(s.substring(h+5).trim());406===i?this.bw(t):436===i?this.Lw(t):557===i?this.Rw(t):556===i&&this.Sw(t)}}else if(651===i){const t=this.er[s];t&&this.Rr&&(this.uf(this.Rr.df[0],this.Rr.wf[0],t.df[0],t.wf[0],2,1,1,0,0,0,!1),this.Zs=this.Lc,this.qs=this.Rc,this.zs=2,this.js=0,this.Ut.zc(O.A.Mw),this.Ut.p2(s),this.Ut.p2(this.Ie))}}}this.re=0,this.me=0};lw=t=>{const i=t._l;if(i===c.A.kw&&(this.Ws=!0,this.Hh=!1,this.Ph=!0,this.Uh='',this.Bh=1,this.Fh='Enter name of friend to add to list'),i===c.A.xw&&(this.Ws=!0,this.Hh=!1,this.Ph=!0,this.Uh='',this.Bh=2,this.Fh='Enter name of friend to delete from list'),i===c.A.Dw)return this.Wt=250,!0;if(i===c.A.Nw&&(this.Ws=!0,this.Hh=!1,this.Ph=!0,this.Uh='',this.Bh=4,this.Fh='Enter name of player to add to list'),i===c.A.Pw&&(this.Ws=!0,this.Hh=!1,this.Ph=!0,this.Uh='',this.Bh=5,this.Fh='Enter name of player to delete from list'),i>=c.A.Fw&&i<=c.A.Uw){const t=(i-300)/2|0,s=1&i;let h=this.Hr[t];if(-1!==h)for(;;)if(0===s&&(h--,h<0&&(h=o.A.count-1)),1===s&&(h++,h>=o.A.count&&(h=0)),!o.A.Lo[h].disable&&o.A.Lo[h].type===t+(this.Br?0:7)){this.Hr[t]=h,this.Gr=!0;break}}if(i>=c.A.Bw&&i<=c.A.Gw){const t=(i-314)/2|0,s=1&i;let h=this.Wr[t];0===s&&(h--,h<0&&(h=W.A.va[t].length-1)),1===s&&(h++,h>=W.A.va[t].length&&(h=0)),this.Wr[t]=h,this.Gr=!0}if(i!==c.A.xa||this.Br||(this.Br=!0,this.Yc()),i===c.A.Da&&this.Br&&(this.Br=!1,this.Yc()),i===c.A.Hw){this.Ut.zc(O.A.Ww),this.Ut.p1(this.Br?0:1);for(let t=0;t<7;t++)this.Ut.p1(this.Hr[t]);for(let t=0;t<5;t++)this.Ut.p1(this.Wr[t]);return!0}return i===c.A.Pa&&(this.Me=!this.Me),i>=c.A.Yw&&i<=c.A.Vw&&(this.Tw(),this.Se.length>0&&(this.Ut.zc(O.A.Kw),this.Ut.Xw(M.A.ju(this.Se)),this.Ut.p1(i-601),this.Ut.p1(this.Me?1:0))),!1};Yc=()=>{this.Gr=!0;for(let t=0;t<7;t++){this.Hr[t]=-1;for(let i=0;i<o.A.count;i++)if(!o.A.Lo[i].disable&&o.A.Lo[i].type===t+(this.Br?0:7)){this.Hr[t]=i;break}}};bd=(t,i,s,h)=>{if(!this.Rr||!this.Ge)return!1;const n=h>>14&32767,r=this.Ge.ld(this.xn,i,s,h);if(-1===r)return!1;const o=31&r,l=r>>6&3;if(o===P.A.zw.id||o===P.A.jw.id||o===P.A.Zw.id){const t=e.A.get(n);let h,r;l===F.A.dd||l===F.A.yd?(h=t.width,r=t.length):(h=t.length,r=t.width);let o=t.qw;0!==l&&(o=(o<<l&15)+(o>>4-l)),this.uf(this.Rr.df[0],this.Rr.wf[0],i,s,2,h,r,0,0,o,!1)}else this.uf(this.Rr.df[0],this.Rr.wf[0],i,s,2,0,0,l,o+1,0,!1);return this.Zs=this.Lc,this.qs=this.Rc,this.zs=2,this.js=0,this.Ut.zc(t),this.Ut.p2(i+this.Cn),this.Ut.p2(s+this.Tn),this.Ut.p2(n),!0};pf=()=>{1===this.vc&&(this.Lc>=549&&this.Lc<=583&&this.Rc>=195&&this.Rc<231&&-1!==this.Sh[0]?(this.Hs=!0,this.Rh=0,this.Ys=!0):this.Lc>=579&&this.Lc<=609&&this.Rc>=194&&this.Rc<231&&-1!==this.Sh[1]?(this.Hs=!0,this.Rh=1,this.Ys=!0):this.Lc>=607&&this.Lc<=637&&this.Rc>=194&&this.Rc<231&&-1!==this.Sh[2]?(this.Hs=!0,this.Rh=2,this.Ys=!0):this.Lc>=635&&this.Lc<=679&&this.Rc>=194&&this.Rc<229&&-1!==this.Sh[3]?(this.Hs=!0,this.Rh=3,this.Ys=!0):this.Lc>=676&&this.Lc<=706&&this.Rc>=194&&this.Rc<231&&-1!==this.Sh[4]?(this.Hs=!0,this.Rh=4,this.Ys=!0):this.Lc>=704&&this.Lc<=734&&this.Rc>=194&&this.Rc<231&&-1!==this.Sh[5]?(this.Hs=!0,this.Rh=5,this.Ys=!0):this.Lc>=732&&this.Lc<=766&&this.Rc>=195&&this.Rc<231&&-1!==this.Sh[6]?(this.Hs=!0,this.Rh=6,this.Ys=!0):this.Lc>=550&&this.Lc<=584&&this.Rc>=492&&this.Rc<528&&-1!==this.Sh[7]?(this.Hs=!0,this.Rh=7,this.Ys=!0):this.Lc>=582&&this.Lc<=612&&this.Rc>=492&&this.Rc<529&&-1!==this.Sh[8]?(this.Hs=!0,this.Rh=8,this.Ys=!0):this.Lc>=609&&this.Lc<=639&&this.Rc>=492&&this.Rc<529&&-1!==this.Sh[9]?(this.Hs=!0,this.Rh=9,this.Ys=!0):this.Lc>=637&&this.Lc<=681&&this.Rc>=493&&this.Rc<528&&-1!==this.Sh[10]?(this.Hs=!0,this.Rh=10,this.Ys=!0):this.Lc>=679&&this.Lc<=709&&this.Rc>=492&&this.Rc<529&&-1!==this.Sh[11]?(this.Hs=!0,this.Rh=11,this.Ys=!0):this.Lc>=706&&this.Lc<=736&&this.Rc>=492&&this.Rc<529&&-1!==this.Sh[12]?(this.Hs=!0,this.Rh=12,this.Ys=!0):this.Lc>=734&&this.Lc<=768&&this.Rc>=492&&this.Rc<528&&-1!==this.Sh[13]&&(this.Hs=!0,this.Rh=13,this.Ys=!0),$.K.ct++,$.K.ct>150&&($.K.ct=0,this.Ut.zc(O.A.$w),this.Ut.p1(43)))};gf=async()=>{for(;;){let t;do{for(;;){if(t=this.Mc(),-1===t)return;if(-1!==this.Ks&&this.Ks===this.ke){8===t&&this.Se.length>0&&(this.Se=this.Se.substring(0,this.Se.length-1));break}if(this.Ph){if(t>=32&&t<=122&&this.Uh.length<80&&(this.Uh=this.Uh+String.fromCharCode(t),this.Ws=!0),8===t&&this.Uh.length>0&&(this.Uh=this.Uh.substring(0,this.Uh.length-1),this.Ws=!0),13===t||10===t){let t;if(this.Ph=!1,this.Ws=!0,1===this.Bh&&(t=M.A.ju(this.Uh),this.bw(t)),2===this.Bh&&this.Yr>0&&(t=M.A.ju(this.Uh),this.Rw(t)),3===this.Bh&&this.Uh.length>0&&this.eo){this.Ut.zc(O.A.Jw),this.Ut.p1(0);const t=this.Ut.Pc;this.Ut.Xw(this.eo),v.A.Qw(this.Ut,this.Uh),this.Ut.Bf(this.Ut.Pc-t),this.Uh=M.A.ty(this.Uh),this.Uh=b.A.filter(this.Uh),this.Od(6,this.Uh,M.A.ga(M.A.Ea(this.eo))),2===this.kh&&(this.kh=1,this.Vs=!0,this.Ut.zc(O.A.iy),this.Ut.p1(this.Mh),this.Ut.p1(this.kh),this.Ut.p1(this.xh))}4===this.Bh&&this.uh<100&&(t=M.A.ju(this.Uh),this.Lw(t)),5===this.Bh&&this.uh>0&&(t=M.A.ju(this.Uh),this.Sw(t))}}else if(this.Hh){if(t>=48&&t<=57&&this.Gh.length<10&&(this.Gh=this.Gh+String.fromCharCode(t),this.Ws=!0),8===t&&this.Gh.length>0&&(this.Gh=this.Gh.substring(0,this.Gh.length-1),this.Ws=!0),13===t||10===t){if(this.Gh.length>0){let t=0;try{t=parseInt(this.Gh,10)}catch(t){}this.Ut.zc(O.A.sy),this.Ut.p4(t)}this.Hh=!1,this.Ws=!0}}else if(-1===this.oh&&(t>=32&&t<=122&&this.Zh.length<80&&(this.Zh=this.Zh+String.fromCharCode(t),this.Ws=!0),8===t&&this.Zh.length>0&&(this.Zh=this.Zh.substring(0,this.Zh.length-1),this.Ws=!0),(13===t||10===t)&&this.Zh.length>0)){if('::clientdrop'===this.Zh)await this.Zc();else if(this.Ur&&'::noclip'===this.Zh)for(let t=0;t<G.A.kn;t++)for(let i=1;i<G.A.Kn-1;i++)for(let s=1;s<G.A.Kn-1;s++){const h=this.Mn[t];h&&(h.flags[G.A.index(i,s)]=0)}else if('::debug'===this.Zh)$.K.nt=!$.K.nt;else if('::chat'===this.Zh)$.K.rt=($.K.rt+1)%3;else if(this.Zh.startsWith('::fps '))try{this.hy(parseInt(this.Zh.substring(6),10))}catch(t){}if(this.Zh.startsWith('::'))this.Ut.zc(O.A.ey),this.Ut.p1(this.Zh.length-1),this.Ut.Uc(this.Zh.substring(2));else{let t=0;this.Zh.startsWith('yellow:')?(t=0,this.Zh=this.Zh.substring(7)):this.Zh.startsWith('red:')?(t=1,this.Zh=this.Zh.substring(4)):this.Zh.startsWith('green:')?(t=2,this.Zh=this.Zh.substring(6)):this.Zh.startsWith('cyan:')?(t=3,this.Zh=this.Zh.substring(5)):this.Zh.startsWith('purple:')?(t=4,this.Zh=this.Zh.substring(7)):this.Zh.startsWith('white:')?(t=5,this.Zh=this.Zh.substring(6)):this.Zh.startsWith('flash1:')?(t=6,this.Zh=this.Zh.substring(7)):this.Zh.startsWith('flash2:')?(t=7,this.Zh=this.Zh.substring(7)):this.Zh.startsWith('flash3:')?(t=8,this.Zh=this.Zh.substring(7)):this.Zh.startsWith('glow1:')?(t=9,this.Zh=this.Zh.substring(6)):this.Zh.startsWith('glow2:')?(t=10,this.Zh=this.Zh.substring(6)):this.Zh.startsWith('glow3:')&&(t=11,this.Zh=this.Zh.substring(6));let i=0;this.Zh.startsWith('wave:')&&(i=1,this.Zh=this.Zh.substring(5)),this.Zh.startsWith('scroll:')&&(i=2,this.Zh=this.Zh.substring(7)),this.Ut.zc(O.A.ny),this.Ut.p1(0);const s=this.Ut.Pc;this.Ut.p1(t),this.Ut.p1(i),v.A.Qw(this.Ut,this.Zh),this.Ut.Bf(this.Ut.Pc-s),this.Zh=M.A.ty(this.Zh),this.Zh=b.A.filter(this.Zh),this.Rr&&this.Rr.name&&(this.Rr.nu=this.Zh,this.Rr.lu=t,this.Rr.au=i,this.Rr.cu=150,this.Od(2,this.Rr.nu,this.Rr.name)),2===this.Mh&&(this.Mh=3,this.Vs=!0,this.Ut.zc(O.A.iy),this.Ut.p1(this.Mh),this.Ut.p1(this.kh),this.Ut.p1(this.xh))}this.Zh='',this.Ws=!0}}}while((t<97||t>122)&&(t<65||t>90)&&(t<48||t>57)&&32!==t);this.Se.length<12&&(this.Se=this.Se+String.fromCharCode(t))}};mf=()=>{if(1===this.vc)if(this.Lc>=8&&this.Lc<=108&&this.Rc>=490&&this.Rc<=522)this.Mh=(this.Mh+1)%4,this.Vs=!0,this.Ws=!0,this.Ut.zc(O.A.iy),this.Ut.p1(this.Mh),this.Ut.p1(this.kh),this.Ut.p1(this.xh);else if(this.Lc>=137&&this.Lc<=237&&this.Rc>=490&&this.Rc<=522)this.kh=(this.kh+1)%3,this.Vs=!0,this.Ws=!0,this.Ut.zc(O.A.iy),this.Ut.p1(this.Mh),this.Ut.p1(this.kh),this.Ut.p1(this.xh);else if(this.Lc>=275&&this.Lc<=375&&this.Rc>=490&&this.Rc<=522)this.xh=(this.xh+1)%3,this.Vs=!0,this.Ws=!0,this.Ut.zc(O.A.iy),this.Ut.p1(this.Mh),this.Ut.p1(this.kh),this.Ut.p1(this.xh);else if(this.Lc>=416&&this.Lc<=516&&this.Rc>=490&&this.Rc<=522){this.Tw(),this.Se='',this.Me=!1;for(let t=0;t<c.A.Lo.length;t++)if(c.A.Lo[t]&&600===c.A.Lo[t]._l)return void(this.ke=this.Ks=c.A.Lo[t].Ed)}};vf=(t,i,s,h,e,n,r,o)=>{if(this.Dh?this.Nh=32:this.Nh=0,this.Dh=!1,t>=n&&t<n+16&&i>=r&&i<r+16)o.Cl-=4*this.Xs,e&&(this.Hs=!0);else if(t>=n&&t<n+16&&i>=r+h-16&&i<r+h)o.Cl+=4*this.Xs,e&&(this.Hs=!0);else if(t>=n-this.Nh&&t<n+this.Nh+16&&i>=r+16&&i<r+h-16&&this.Xs>0){let t=(h-32)*h/s|0;t<8&&(t=8);const n=i-r-(t/2|0)-16,l=h-t-32;o.Cl=(s-h)*n/l|0,e&&(this.Hs=!0),this.Dh=!0}};Vc=()=>{this.Pi||(this.vo(),this.So=null,this.Qt=null,this.ti=null,this.ii=null,this.si=null,this.hi=null,this.ei=null,this.ni=null,this.ri=null,this.oi=null,this.Pi=new f.A(479,96),this.Di=new f.A(168,160),u.A.clear(),this.rs?.draw(0,0),this.xi=new f.A(190,261),this.Ni=new f.A(512,334),u.A.clear(),this.Fi=new f.A(501,61),this.Ui=new f.A(288,40),this.Bi=new f.A(269,66),this.qt=!0)};ru=t=>{if(!t)return!1;for(let i=0;i<this.Yr;i++)if(t.toLowerCase()===this.io[i]?.toLowerCase())return!0;return!!this.Rr&&t.toLowerCase()===this.Rr.name?.toLowerCase()};bw=t=>{if(0n===t)return;if(this.Yr>=100)return void this.Od(0,'Your friends list is full. Max of 100 hit','');const i=M.A.ga(M.A.Ea(t));for(let s=0;s<this.Yr;s++)if(this.so[s]===t)return void this.Od(0,i+' is already on your friend list','');for(let s=0;s<this.uh;s++)if(this.dh[s]===t)return void this.Od(0,'Please remove '+i+' from your ignore list first','');this.Rr&&this.Rr.name&&i!==this.Rr.name&&(this.io[this.Yr]=i,this.so[this.Yr]=t,this.ho[this.Yr]=0,this.Yr++,this.Hs=!0,this.Ut.zc(O.A.oy),this.Ut.Xw(t))};Rw=t=>{if(0n!==t)for(let i=0;i<this.Yr;i++)if(this.so[i]===t){this.Yr--,this.Hs=!0;for(let t=i;t<this.Yr;t++)this.io[t]=this.io[t+1],this.ho[t]=this.ho[t+1],this.so[t]=this.so[t+1];return this.Ut.zc(O.A.ly),void this.Ut.Xw(t)}};Lw=t=>{if(0n===t)return;if(this.uh>=100)return void this.Od(0,'Your ignore list is full. Max of 100 hit','');const i=M.A.ga(M.A.Ea(t));for(let s=0;s<this.uh;s++)if(this.dh[s]===t)return void this.Od(0,i+' is already on your ignore list','');for(let s=0;s<this.Yr;s++)if(this.so[s]===t)return void this.Od(0,'Please remove '+i+' from your friend list first','');this.dh[this.uh++]=t,this.Hs=!0,this.Ut.zc(O.A.uy),this.Ut.Xw(t)};Sw=t=>{if(0n!==t)for(let i=0;i<this.uh;i++)if(this.dh[i]===t){this.uh--,this.Hs=!0;for(let t=i;t<this.uh;t++)this.dh[t]=this.dh[t+1];return this.Ut.zc(O.A.wy),void this.Ut.Xw(t)}};yy=(t,i)=>{const s=this.gr[this.xn][t][i];if(!s)return void this.Ge?.Ay(this.xn,t,i);let h=-99999999,e=null;for(let t=s.head();t;t=s.next()){const i=n.A.get(t.index);let s=i.py;i.ua&&(s*=t.count+1),s>h&&(h=s,e=t)}if(!e)return;s.my(e);let r=-1,o=-1,l=0,a=0;for(let t=s.head();t;t=s.next())t.index!==e.index&&-1===r&&(r=t.index,l=t.count),t.index!==e.index&&t.index!==r&&-1===o&&(o=t.index,a=t.count);let c=null;-1!==r&&(c=n.A.get(r).Iy(l));let f=null;-1!==o&&(f=n.A.get(o).Iy(a));const u=t+(i<<7)+1610612736|0,d=n.A.get(e.index);this.Ge?._y(t,i,this.Ff(this.xn,128*t+64,128*i+64),this.xn,u,d.Iy(e.count),f,c)};gy=(t,i,s,h,n,r,o)=>{if(i<1||s<1||i>102||s>102)return;if($.K.st&&t!==this.xn)return;if(!this.Ge)return;let l=0;if(o===N.A.Ey&&(l=this.Ge.od(t,i,s)),o===N.A.Cy&&(l=this.Ge.Ty(t,s,i)),o===N.A.Oy&&(l=this.Ge.md(t,i,s)),o===N.A.Zw&&(l=this.Ge.td(t,i,s)),0!==l){const h=this.Ge.ld(t,i,s,l),n=l>>14&32767,r=31&h,a=h>>6;if(o===N.A.Ey){this.Ge?.by(t,i,s,1);const h=e.A.get(n);h.vy&&this.Mn[t]?.by(i,s,r,a,h.Ly)}if(o===N.A.Cy&&this.Ge?.Ry(t,i,s),o===N.A.Oy){this.Ge.Sy(t,i,s);const h=e.A.get(n);if(i+h.width>G.A.Kn-1||s+h.width>G.A.Kn-1||i+h.length>G.A.Kn-1||s+h.length>G.A.Kn-1)return;h.vy&&this.Mn[t]?.Sy(i,s,h.width,h.length,a,h.Ly)}if(o===N.A.Zw){this.Ge?.My(t,i,s);const h=e.A.get(n);h.vy&&h.active&&this.Mn[t]?.ky(i,s)}}if(h>=0){let e=t;this.Wn&&t<3&&!(2&~this.Wn[1][i][s])&&(e=t+1),this.Hn&&D.A.gy(t,i,s,this.Ge,this.Hn,this.Ir,this.Mn[t],h,r,n,e)}};Tw=()=>{this.Ut.zc(O.A.xy),-1!==this.rh&&(this.rh=-1,this.Hs=!0,this.ye=!1,this.Ys=!0),-1!==this.oh&&(this.oh=-1,this.Ws=!0,this.ye=!1),this.Ks=-1};Zc=async()=>{this.Wt>0?await this.Dy():(this.Ni?.bind(),this.di?.wc(257,144,'Connection lost',m.A.Ul),this.di?.wc(256,143,'Connection lost',m.A.Il),this.di?.wc(257,159,'Please wait - attempting to reestablish',m.A.Ul),this.di?.wc(256,158,'Please wait - attempting to reestablish',m.A.Il),this.Ni?.draw(8,11),this.Ve=0,this.stream?.close(),this.lc=!1,await this.Sc(this.username,this.password,!0),this.lc||await this.Dy())};Dy=async()=>{this.stream&&this.stream.close(),this.stream=null,this.lc=!1,this.$t=0,this.username='',this.password='',k.A.Hc(),this.$f(),this.Ge?.reset();for(let t=0;t<G.A.kn;t++)this.Mn[t]?.reset();(0,j.bo)(),this.po=null,this.yo=0,$.K.st||await this.Yo('scape_main',12345678,4e4)};read=async()=>{if(!this.stream)return!1;try{let t=this.stream.available;if(0===t)return!1;if(-1===this.Kt&&(await this.stream.Nc(this.in.data,0,1),this.Kt=255&this.in.data[0],this.Vt&&(this.Kt=this.Kt-this.Vt.Ny&255),this.packetSize=g.A.Py[this.Kt],t--),-1===this.packetSize){if(t<=0)return!1;await this.stream.Nc(this.in.data,0,1),this.packetSize=255&this.in.data[0],t--}if(-2===this.packetSize){if(t<=1)return!1;await this.stream.Nc(this.in.data,0,2),this.in.Pc=0,this.packetSize=this.in.Fy,t-=2}if(t<this.packetSize)return!1;if(this.in.Pc=0,await this.stream.Nc(this.in.data,0,this.packetSize),this.Ht=0,this.jt=this.zt,this.zt=this.Xt,this.Xt=this.Kt,this.Kt===T.A.Uy){const t=this.in.Fy,i=this.in.By;return this.pe[t]=i,this.Ae[t]!==i&&(this.Ae[t]=i,await this.Cw(t),this.Hs=!0,-1!==this.Wh&&(this.Ws=!0)),this.Kt=-1,!0}if(this.Kt===T.A.Gy){const t=this.in.Fc,i=this.in.Hy;let s=M.A.ga(M.A.Ea(t));for(let h=0;h<this.Yr;h++)if(t===this.so[h]){this.ho[h]!==i&&(this.ho[h]=i,this.Hs=!0,i>0&&this.Od(5,s+' has logged in.',''),0===i&&this.Od(5,s+' has logged out.','')),s=null;break}s&&this.Yr<100&&(this.so[this.Yr]=t,this.io[this.Yr]=s,this.ho[this.Yr]=i,this.Yr++,this.Hs=!0);let h=!1;for(;!h;){h=!0;for(let t=0;t<this.Yr-1;t++)if(this.ho[t]!==$.K.it&&this.ho[t+1]===$.K.it||0===this.ho[t]&&0!==this.ho[t+1]){const i=this.ho[t];this.ho[t]=this.ho[t+1],this.ho[t+1]=i;const s=this.io[t];this.io[t]=this.io[t+1],this.io[t+1]=s;const e=this.so[t];this.so[t]=this.so[t+1],this.so[t+1]=e,this.Hs=!0,h=!1}}return this.Kt=-1,!0}if(this.Kt===T.A.Wy)return this.Yt=30*this.in.Fy,this.Kt=-1,!0;if(this.Kt===T.A.Yy){const t=this.in.Hy,i=this.in.Hy;let s=-1;if(this.vn)for(let h=0;h<this.vn.length;h++)this.vn[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.On;if(h){const e=h[s];-1!==s&&e&&(this.db?.Wo(`m${t}_${i}`,e),this.He=1)}}return this.Kt=-1,!0}if(this.Kt===T.A.Vy)return this.Ky(this.in,this.packetSize),this.Kt=-1,!0;if(this.Kt===T.A.Xy){const t=this.in.Fy,i=this.in.Fy;if(this.gn===t&&this.En===i&&0!==this.He)return this.Kt=-1,!0;this.gn=t,this.En=i,this.Cn=8*(this.gn-6),this.Tn=8*(this.En-6),this.He=1,this.Ni?.bind(),this.di?.wc(257,151,'Loading - please wait.',m.A.Ul),this.di?.wc(256,150,'Loading - please wait.',m.A.Il),this.Ni?.draw(8,11);const s=(this.packetSize-2)/10|0;this.On=new q.us(s,null),this.bn=new q.us(s,null),this.vn=new Int32Array(s),this.Ut.zc(O.A.zy),this.Ut.p1(0);let h=0;for(let t=0;t<s;t++){const i=this.in.Hy,s=this.in.Hy,e=this.in.Vo,n=this.in.Vo;let r;this.vn[t]=(i<<8)+s,0!==e&&(r=await(this.db?.Fo(`m${i}_${s}`)),r&&I.A.Uo(r)!==e&&(r=void 0),r?this.On[t]=r:(this.He=0,this.Ut.p1(0),this.Ut.p1(i),this.Ut.p1(s),h+=3)),0!==n&&(r=await(this.db?.Fo(`l${i}_${s}`)),r&&I.A.Uo(r)!==n&&(r=void 0),r?this.bn[t]=r:(this.He=0,this.Ut.p1(1),this.Ut.p1(i),this.Ut.p1(s),h+=3))}this.Ut.Bf(h),this.Ni?.bind(),0===this.He&&(this.di?.wc(257,166,'Map area updated since last visit, so load will take longer this time only',m.A.Ul),this.di?.wc(256,165,'Map area updated since last visit, so load will take longer this time only',m.A.Il)),this.Ni?.draw(8,11);const e=this.Cn-this.Ln,n=this.Tn-this.Rn;this.Ln=this.Cn,this.Rn=this.Tn;for(let t=0;t<8192;t++){const i=this.wr[t];if(i){for(let t=0;t<10;t++)i.df[t]-=e,i.wf[t]-=n;i.x-=128*e,i.z-=128*n}}for(let t=0;t<this.Rt;t++){const i=this.er[t];if(i){for(let t=0;t<10;t++)i.df[t]-=e,i.wf[t]-=n;i.x-=128*e,i.z-=128*n}}let r=0,o=G.A.Kn,l=1;e<0&&(r=G.A.Kn-1,o=-1,l=-1);let a=0,c=G.A.Kn,f=1;n<0&&(a=G.A.Kn-1,c=-1,f=-1);for(let t=r;t!==o;t+=l)for(let i=a;i!==c;i+=f){const s=t+e,h=i+n;for(let e=0;e<G.A.kn;e++)s>=0&&h>=0&&s<G.A.Kn&&h<G.A.Kn?this.gr[e][t][i]=this.gr[e][s][h]:this.gr[e][t][i]=null}for(let t=this.Cr.head();t;t=this.Cr.next())t.x-=e,t.z-=n,(t.x<0||t.z<0||t.x>=G.A.Kn||t.z>=G.A.Kn)&&t.jy();return 0!==this.Ve&&(this.Ve-=e,this.Ke-=n),this.Xe=!1,this.Kt=-1,!0}if(this.Kt===T.A.Zy)return c.A.Lo[this.in.Fy].model=this.Rr?.qy()||null,this.Kt=-1,!0;if(this.Kt===T.A.$y)return this.wh=this.in.Hy,1===this.wh&&(this.yh=this.in.Fy),this.wh>=2&&this.wh<=6&&(2===this.wh&&(this.Ah=64,this.ph=64),3===this.wh&&(this.Ah=0,this.ph=64),4===this.wh&&(this.Ah=128,this.ph=64),5===this.wh&&(this.Ah=64,this.ph=0),6===this.wh&&(this.Ah=64,this.ph=128),this.wh=2,this.Ih=this.in.Fy,this._h=this.in.Fy,this.gh=this.in.Hy),10===this.wh&&(this.mh=this.in.Fy),this.Kt=-1,!0;if(this.Kt===T.A.Jy){const t=this.in.Qy,i=this.in.Vo,s=this.in.Vo;return t!==this.po&&this.Ao&&!$.K.st&&await this.Yo(t,i,s),this.po=t,this.mo=i,this.Io=s,this.yo=0,this.Kt=-1,!0}if(this.Kt===T.A.tA)return await this.Dy(),this.Kt=-1,!1;if(this.Kt===T.A.iA){const t=this.in.Hy,i=this.in.Hy;let s=-1;if(this.vn)for(let h=0;h<this.vn.length;h++)this.vn[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.bn;if(h){const e=h[s];-1!==s&&e&&(this.db?.Wo(`l${t}_${i}`,e),this.He=1)}}return this.Kt=-1,!0}if(this.Kt===T.A.sA)return this.Ve=0,this.Kt=-1,!0;if(this.Kt===T.A.hA)return this.kr=this.in.Fy,this.Kt=-1,!0;if(this.Kt===T.A.eA||this.Kt===T.A.nA||this.Kt===T.A.rA||this.Kt===T.A.oA||this.Kt===T.A.lA||this.Kt===T.A.aA||this.Kt===T.A.cA||this.Kt===T.A.fA||this.Kt===T.A.uA||this.Kt===T.A.dA)return this.wA(this.in,this.Kt),this.Kt=-1,!0;if(this.Kt===T.A.yA){const t=this.in.Fy,i=this.in.Fy;return-1!==this.oh&&(this.oh=-1,this.Ws=!0),this.Hh&&(this.Hh=!1,this.Ws=!0),this.Ks=t,this.rh=i,this.Hs=!0,this.Ys=!0,this.ye=!1,this.Kt=-1,!0}if(this.Kt===T.A.AA){const t=this.in.Fy,i=this.in.Vo;return this.pe[t]=i,this.Ae[t]!==i&&(this.Ae[t]=i,await this.Cw(t),this.Hs=!0,-1!==this.Wh&&(this.Ws=!0)),this.Kt=-1,!0}if(this.Kt===T.A.pA){const t=this.in.Fy;return c.A.Lo[t].ll=this.in.Fy,this.Kt=-1,!0}if(this.Kt===T.A.mA){let t=this.in.Fy;const i=this.in.Hy;return 65535===t&&(t=-1),this.Sh[i]=t,this.Hs=!0,this.Ys=!0,this.Kt=-1,!0}if(this.Kt===T.A.IA){const t=this.in.Hy,i=this.in.Hy,s=this.in.Fy,h=this.in.Fy;let e=-1;if(this.vn)for(let s=0;s<this.vn.length;s++)this.vn[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.bn){this.bn[e]&&this.bn[e]?.length===h||(this.bn[e]=new Int8Array(h));const t=this.bn[e];t&&this.in._A(this.packetSize-6,s,t)}return this.Kt=-1,!0}if(this.Kt===T.A.gA){const t=k.A.stop();return t&&(this.Ut.zc(O.A.jc),this.Ut.p2(t.Pc),this.Ut.Gc(t.data,t.Pc,0),t.release()),this.Kt=-1,!0}if(this.Kt===T.A.EA){this.Hs=!0;const t=this.in.Fy,i=c.A.Lo[t],s=this.in.Hy;if(i.vl&&i.Ll){for(let t=0;t<s;t++){i.vl[t]=this.in.Fy;let s=this.in.Hy;255===s&&(s=this.in.Vo),i.Ll[t]=s}for(let t=s;t<i.vl.length;t++)i.vl[t]=0,i.Ll[t]=0}else for(let t=0;t<s;t++)this.in.Fy,255===this.in.Hy&&this.in.Vo;return this.Kt=-1,!0}if(this.Kt===T.A.CA)return k.A.TA(),this.Kt=-1,!0;if(this.Kt===T.A.OA)return this.Ph=!1,this.Hh=!0,this.Gh='',this.Ws=!0,this.Kt=-1,!0;if(this.Kt===T.A.bA){const t=c.A.Lo[this.in.Fy];if(t.vl)for(let i=0;i<t.vl.length;i++)t.vl[i]=-1,t.vl[i]=0;return this.Kt=-1,!0}if(this.Kt===T.A.vA){if(this.xe=this.in.Vo,this.De=this.in.Fy,this.Ne=this.in.Hy,this.Pe=this.in.Fy,0!==this.xe&&-1===this.Ks){this.Tw();let t=650;201!==this.Ne&&(t=655),this.Se='',this.Me=!1;for(let i=0;i<c.A.Lo.length;i++)if(c.A.Lo[i]&&c.A.Lo[i]._l===t){this.Ks=c.A.Lo[i].Ed;break}}return this.Kt=-1,!0}if(this.Kt===T.A.LA)return this.Lh=this.in.Hy,this.Lh===this.Rh&&(3===this.Lh?this.Rh=1:this.Rh=3,this.Hs=!0),this.Kt=-1,!0;if(this.Kt===T.A.RA){if(this.Ao&&!$.K.st){const t=this.in.Fy,i=this.in.Vo,s=this.packetSize-6,h=R.A.read(i,Int8Array.from(this.in.data),s,this.in.Pc);(0,j.Ko)(h,this._o),this.yo=t}return this.Kt=-1,!0}if(this.Kt===T.A.SA)return this.Mr=this.in.Hy,this.Kt=-1,!0;if(this.Kt===T.A.MA){const t=this.in.Fy,i=this.in.Hy,s=this.in.Fy;return this.ro&&!$.K.st&&this.no<50&&(this.oo[this.no]=t,this.lo[this.no]=i,this.ao[this.no]=s+L.A.kA[t],this.no++),this.Kt=-1,!0}if(this.Kt===T.A.xA){const t=this.in.Fy,i=this.in.Fy,s=r.A.get(i);return c.A.Lo[t].model=s.qy(),this.Kt=-1,!0}if(this.Kt===T.A.DA)return this.In=this.in.Hy,this._n=this.in.Hy,this.Kt=-1,!0;if(this.Kt===T.A.NA){const t=this.in.Fy,i=this.in.Fy,s=this.in.Fy,h=c.A.Lo[t].model;return h?.ba(i,s),this.Kt=-1,!0}if(this.Kt===T.A.PA)return this.Mh=this.in.Hy,this.kh=this.in.Hy,this.xh=this.in.Hy,this.Vs=!0,this.Ws=!0,this.Kt=-1,!0;if(this.Kt===T.A.FA){const t=this.in.Fy;return this.UA(t),-1!==this.oh&&(this.oh=-1,this.Ws=!0),this.Hh&&(this.Hh=!1,this.Ws=!0),this.rh=t,this.Hs=!0,this.Ys=!0,this.Ks=-1,this.ye=!1,this.Kt=-1,!0}if(this.Kt===T.A.BA){const t=this.in.Fy;return this.UA(t),-1!==this.rh&&(this.rh=-1,this.Hs=!0,this.Ys=!0),this.oh=t,this.Ws=!0,this.Ks=-1,this.ye=!1,this.Kt=-1,!0}if(this.Kt===T.A.GA){const t=this.in.Fy,i=this.in.HA,s=this.in.HA,h=c.A.Lo[t];return h.x=i,h.y=s,this.Kt=-1,!0}if(this.Kt===T.A.WA)return this.Xe=!0,this.Qn=this.in.Hy,this.tr=this.in.Hy,this.ir=this.in.Fy,this.sr=this.in.Hy,this.hr=this.in.Hy,this.hr>=100&&(this.rn=128*this.Qn+64,this.an=128*this.tr+64,this.ln=this.Ff(this.xn,this.Qn,this.tr)-this.ir),this.Kt=-1,!0;if(this.Kt===T.A.YA){this.In=this.in.Hy,this._n=this.in.Hy;for(let t=this.In;t<this.In+8;t++)for(let i=this._n;i<this._n+8;i++)this.gr[this.xn][t][i]&&(this.gr[this.xn][t][i]=null,this.yy(t,i));for(let t=this.Cr.head();t;t=this.Cr.next())t.x>=this.In&&t.x<this.In+8&&t.z>=this._n&&t.z<this._n+8&&t.VA===this.xn&&(this.gy(t.VA,t.x,t.z,t.KA,t.XA,t.zA,t.Ed),t.jy());return this.Kt=-1,!0}if(this.Kt===T.A.jA){const t=this.in.Hy,i=this.in.Hy,s=this.in.Fy,h=this.in.Fy;let e=-1;if(this.vn)for(let s=0;s<this.vn.length;s++)this.vn[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.On){this.On[e]&&this.On[e]?.length===h||(this.On[e]=new Int8Array(h));const t=this.On[e];t&&this.in._A(this.packetSize-6,s,t)}return this.Kt=-1,!0}if(this.Kt===T.A.Jw){const t=this.in.Fc,i=this.in.Vo,s=this.in.Hy;let h=!1;for(let t=0;t<100;t++)if(this.Kh[t]===i){h=!0;break}if(s<=1)for(let i=0;i<this.uh;i++)if(this.dh[i]===t){h=!0;break}if(!h&&0===this.$s)try{this.Kh[this.Xh]=i,this.Xh=(this.Xh+1)%100;const h=v.A.hc(this.in,this.packetSize-13),e=b.A.filter(h);s>1?this.Od(7,e,M.A.ga(M.A.Ea(t))):this.Od(3,e,M.A.ga(M.A.Ea(t)))}catch(t){}return this.Kt=-1,!0}if(this.Kt===T.A.ZA){for(let t=0;t<this.Ae.length;t++)this.Ae[t]!==this.pe[t]&&(this.Ae[t]=this.pe[t],await this.Cw(t),this.Hs=!0);return this.Kt=-1,!0}if(this.Kt===T.A.qA){const t=this.in.Fy,i=this.in.Fy;return c.A.Lo[t].model=p.A.model(i),this.Kt=-1,!0}if(this.Kt===T.A.$A)return this.Wh=this.in.HA,this.Ws=!0,this.Kt=-1,!0;if(this.Kt===T.A.JA)return 12===this.Rh&&(this.Hs=!0),this.Sr=this.in.Hy,this.Kt=-1,!0;if(this.Kt===T.A.QA){if(this.Xe=!0,this.jn=this.in.Hy,this.Zn=this.in.Hy,this.qn=this.in.Fy,this.$n=this.in.Hy,this.Jn=this.in.Hy,this.Jn>=100){const t=128*this.jn+64,i=128*this.Zn+64,s=this.Ff(this.xn,this.jn,this.Zn)-this.qn,h=t-this.rn,e=s-this.ln,n=i-this.an,r=0|Math.sqrt(h*h+n*n);this.cn=325.949*Math.atan2(e,r)&2047,this.fn=-325.949*Math.atan2(h,n)&2047,this.cn<128&&(this.cn=128),this.cn>383&&(this.cn=383)}return this.Kt=-1,!0}if(this.Kt===T.A.tp)return this.Rh=this.in.Hy,this.Hs=!0,this.Ys=!0,this.Kt=-1,!0;if(this.Kt===T.A.ip){const t=this.in.Qy;let i;if(t.endsWith(':tradereq:')){const s=t.substring(0,t.indexOf(':'));i=M.A.ju(s);let h=!1;for(let t=0;t<this.uh;t++)if(this.dh[t]===i){h=!0;break}h||0!==this.$s||this.Od(4,'wishes to trade with you.',s)}else if(t.endsWith(':duelreq:')){const s=t.substring(0,t.indexOf(':'));i=M.A.ju(s);let h=!1;for(let t=0;t<this.uh;t++)if(this.dh[t]===i){h=!0;break}h||0!==this.$s||this.Od(8,'wishes to duel with you.',s)}else this.Od(0,t,'');return this.Kt=-1,!0}if(this.Kt===T.A.sp){const t=this.in.Fy,i=this.in.Fy,s=this.in.Fy,h=n.A.get(i);return c.A.Lo[t].model=h.Iy(50),c.A.Lo[t].ra=h.hp,c.A.Lo[t].ca=h.ep,c.A.Lo[t].zoom=100*h.np/s|0,this.Kt=-1,!0}if(this.Kt===T.A.rp){const t=this.in.Fy;return this.UA(t),-1!==this.rh&&(this.rh=-1,this.Hs=!0,this.Ys=!0),-1!==this.oh&&(this.oh=-1,this.Ws=!0),this.Hh&&(this.Hh=!1,this.Ws=!0),this.Ks=t,this.ye=!1,this.Kt=-1,!0}if(this.Kt===T.A.op){const t=this.in.Fy,i=this.in.Fy,s=i>>10&31,h=i>>5&31,e=31&i;return c.A.Lo[t].Wl=(s<<19)+(h<<11)+(e<<3),this.Kt=-1,!0}if(this.Kt===T.A.lp){for(let t=0;t<this.er.length;t++){const i=this.er[t];i&&(i.gu=-1)}for(let t=0;t<this.wr.length;t++){const i=this.wr[t];i&&(i.gu=-1)}return this.Kt=-1,!0}if(this.Kt===T.A.ap){const t=this.in.Fy;return c.A.Lo[t].hide=1===this.in.Hy,this.Kt=-1,!0}if(this.Kt===T.A.cp){this.uh=this.packetSize/8|0;for(let t=0;t<this.uh;t++)this.dh[t]=this.in.Fc;return this.Kt=-1,!0}if(this.Kt===T.A.fp){this.Xe=!1;for(let t=0;t<5;t++)this.sn[t]=!1;return this.Kt=-1,!0}if(this.Kt===T.A.up)return-1!==this.rh&&(this.rh=-1,this.Hs=!0,this.Ys=!0),-1!==this.oh&&(this.oh=-1,this.Ws=!0),this.Hh&&(this.Hh=!1,this.Ws=!0),this.Ks=-1,this.ye=!1,this.Kt=-1,!0;if(this.Kt===T.A.dp){const t=this.in.Fy;return c.A.Lo[t].text=this.in.Qy,c.A.Lo[t].Ed===this.Sh[this.Rh]&&(this.Hs=!0),this.Kt=-1,!0}if(this.Kt===T.A.wp){this.Hs=!0;const t=this.in.Hy,i=this.in.Vo,s=this.in.Hy;this.Eh[t]=i,this.Ch[t]=s,this.Th[t]=1;for(let s=0;s<98;s++)i>=this.Oh[s]&&(this.Th[t]=s+2);return this.Kt=-1,!0}if(this.Kt===T.A.yp){for(this.In=this.in.Hy,this._n=this.in.Hy;this.in.Pc<this.packetSize;){const t=this.in.Hy;this.wA(this.in,t)}return this.Kt=-1,!0}if(this.Kt===T.A.Ap)return 12===this.Rh&&(this.Hs=!0),this.Dr=this.in.HA,this.Kt=-1,!0;if(this.Kt===T.A.pp){const t=this.in.Hy,i=this.in.Hy,s=this.in.Hy,h=this.in.Hy;return this.sn[t]=!0,this.hn[t]=i,this.en[t]=s,this.nn[t]=h,this.tn[t]=0,this.Kt=-1,!0}if(this.Kt===T.A.mp){this.Hs=!0;const t=this.in.Fy,i=c.A.Lo[t];for(;this.in.Pc<this.packetSize;){const t=this.in.Hy,s=this.in.Fy;let h=this.in.Hy;255===h&&(h=this.in.Vo),i.vl&&i.Ll&&t>=0&&t<i.vl.length&&(i.vl[t]=s,i.Ll[t]=h)}return this.Kt=-1,!0}if(this.Kt===T.A.Ip)return this.To=!this.To,this._p(this.in,this.packetSize),1===this.He&&(this.He=2,D.A.gp=this.xn,this.Ep()),$.K.st&&2===this.He&&D.A.gp!==this.xn&&(this.Ni?.bind(),this.di?.wc(257,151,'Loading - please wait.',m.A.Ul),this.di?.wc(256,150,'Loading - please wait.',m.A.Il),this.Ni?.draw(8,11),D.A.gp=this.xn,this.Ep()),this.xn!==this.mn&&2===this.He&&(this.mn=this.xn,this.$u(this.xn)),this.Kt=-1,!0;await this.Dy()}catch(t){console.log(t),await this.Zc()}return!0};Ep=()=>{try{this.mn=-1,this._r.clear(),this.Ir.clear(),this.mr.clear(),this.pr.clear(),d.A.Cp(),this.$f(),this.Ge?.reset();for(let t=0;t<G.A.kn;t++)this.Mn[t]?.reset();const t=new D.A(G.A.Kn,G.A.Kn,this.Hn,this.Wn);D.A.st=$.K.st;const i=this.On?.length??0;if(this.vn)for(let t=0;t<i;t++){const i=this.vn[t]>>8,s=255&this.vn[t];if(33===i&&s>=71&&s<=73){D.A.st=!1;break}}if($.K.st?this.Ge?.Tp(this.xn):this.Ge?.Tp(0),this.vn&&this.On){this.Ut.zc(O.A.Tf);for(let s=0;s<i;s++){const i=64*(this.vn[s]>>8)-this.Cn,h=64*(255&this.vn[s])-this.Tn,e=this.On[s];if(e){const s=new I.A(new Uint8Array(e)).Vo,n=R.A.read(s,e,e.length-4,4);t.Op(8*(this.gn-6),8*(this.En-6),i,h,n)}else this.En<800&&t.bp(h,i,64,64)}}if(this.vn&&this.bn){this.Ut.zc(O.A.Tf);for(let s=0;s<i;s++){const i=this.bn[s];if(i){const h=new I.A(new Uint8Array(i)).Vo,e=R.A.read(h,i,i.length-4,4),n=64*(this.vn[s]>>8)-this.Cn,r=64*(255&this.vn[s])-this.Tn;t.vp(this.Ge,this.Ir,this.Mn,e,n,r)}}}this.Ut.zc(O.A.Tf),t.Lp(this.Ge,this.Mn),this.Ni?.bind(),this.Ut.zc(O.A.Tf);for(let t=this.Ir.head();t;t=this.Ir.next())2===(this.Wn&&2&this.Wn[1][t.Rp][t.Sp])&&(t.Mp--,t.Mp<0&&t.jy());for(let t=0;t<G.A.Kn;t++)for(let i=0;i<G.A.Kn;i++)this.yy(t,i);for(let t=this.Cr.head();t;t=this.Cr.next())this.gy(t.VA,t.x,t.z,t.kp,t.angle,t.shape,t.Ed)}catch(t){}e.A.Jf?.clear(),d.A.sc(20)};UA=t=>{const i=c.A.Lo[t];if(i.ol)for(let t=0;t<i.ol.length&&-1!==i.ol[t];t++){const s=c.A.Lo[i.ol[t]];1===s.type&&this.UA(s.id),s.fl=0,s.cl=0}};oc=()=>{let t=0;for(let i=0;i<99;i++){const s=i+1;t+=s+300*Math.pow(2,s/7)|0,this.Oh[i]=t/4|0}};Od=(t,i,s)=>{0===t&&-1!==this.Wh&&(this.bh=i,this.vc=0),-1===this.oh&&(this.Ws=!0);for(let t=99;t>0;t--)this.messageType[t]=this.messageType[t-1],this.Vh[t]=this.Vh[t-1],this.Yh[t]=this.Yh[t-1];$.K.nt&&0===t&&(i='['+(this.Nt/30|0)+']: '+i),this.messageType[0]=t,this.Vh[0]=s,this.Yh[0]=i};Cw=async t=>{const i=a.A.Lo[t].xp;if(0!==i){const s=this.Ae[t];if(1===i&&(1===s&&d.A.ic(.9),2===s&&d.A.ic(.8),3===s&&d.A.ic(.7),4===s&&d.A.ic(.6),n.A.tu?.clear(),this.qt=!0),3===i){const t=this.Ao;0===s&&(this._o=256,(0,j.Dp)(256),this.Ao=!0),1===s&&(this._o=192,(0,j.Dp)(192),this.Ao=!0),2===s&&(this._o=128,(0,j.Dp)(128),this.Ao=!0),3===s&&(this._o=64,(0,j.Dp)(64),this.Ao=!0),4===s&&(this.Ao=!1),this.Ao!==t&&(this.Ao&&this.po?await this.Yo(this.po,this.mo,this.Io):(0,j.bo)(),this.yo=0)}4===i&&(0===s&&(this.co=256,(0,j.Np)(256),this.ro=!0),1===s&&(this.co=192,(0,j.Np)(192),this.ro=!0),2===s&&(this.co=128,(0,j.Np)(128),this.ro=!0),3===s&&(this.co=64,(0,j.Np)(64),this.ro=!0),4===s&&(this.ro=!1)),5===i&&(this.Ee=s),6===i&&(this.jh=s),8===i&&(this.zh=s,this.Ws=!0)}};Pp=(t,i)=>{let s=0;for(let t=0;t<100;t++){if(!this.Yh[t])continue;const h=this.messageType[t],e=this.fh+70+4-14*s;if(e<-20)break;0===h&&s++,1!==h&&2!==h||!(1===h||0===this.Mh||1===this.Mh&&this.ru(this.Vh[t]))||(i>e-14&&i<=e&&this.Rr&&this.Vh[t]!==this.Rr.name&&(this.Ur&&(this.nh[this.eh]='Report abuse @whi@'+this.Vh[t],this.Ce[this.eh]=34,this.eh++),this.nh[this.eh]='Add ignore @whi@'+this.Vh[t],this.Ce[this.eh]=436,this.eh++,this.nh[this.eh]='Add friend @whi@'+this.Vh[t],this.Ce[this.eh]=406,this.eh++),s++),3!==h&&7!==h||0!==this.zh||!(7===h||0===this.kh||1===this.kh&&this.ru(this.Vh[t]))||(i>e-14&&i<=e&&(this.Ur&&(this.nh[this.eh]='Report abuse @whi@'+this.Vh[t],this.Ce[this.eh]=34,this.eh++),this.nh[this.eh]='Add ignore @whi@'+this.Vh[t],this.Ce[this.eh]=436,this.eh++,this.nh[this.eh]='Add friend @whi@'+this.Vh[t],this.Ce[this.eh]=406,this.eh++),s++),4===h&&(0===this.xh||1===this.xh&&this.ru(this.Vh[t]))&&(i>e-14&&i<=e&&(this.nh[this.eh]='Accept trade @whi@'+this.Vh[t],this.Ce[this.eh]=903,this.eh++),s++),(5===h||6===h)&&0===this.zh&&this.kh<2&&s++,8===h&&(0===this.xh||1===this.xh&&this.ru(this.Vh[t]))&&(i>e-14&&i<=e&&(this.nh[this.eh]='Accept duel @whi@'+this.Vh[t],this.Ce[this.eh]=363,this.eh++),s++)}};Fp=t=>{if(0===this.zh)return;let i=0;0!==this.Yt&&(i=1);for(let s=0;s<100;s++)if(null!==this.Yh[s]){const h=this.messageType[s];if((3===h||7===h)&&(7===h||0===this.kh||1===this.kh&&this.ru(this.Vh[s]))){const h=329-13*i;if(this.kl>8&&this.kl<520&&t-11>h-10&&t-11<=h+3&&(this.Ur&&(this.nh[this.eh]='Report abuse @whi@'+this.Vh[s],this.Ce[this.eh]=2034,this.eh++),this.nh[this.eh]='Add ignore @whi@'+this.Vh[s],this.Ce[this.eh]=2436,this.eh++,this.nh[this.eh]='Add friend @whi@'+this.Vh[s],this.Ce[this.eh]=2406,this.eh++),i++,i>=5)return}if((5===h||6===h)&&this.kh<2&&(i++,i>=5))return}};Up=(t,i,s,h,e,r)=>{if(0!==t.type||!t.ol||t.hide||i<h||s<e||i>h+t.width||s>e+t.height||!t.Al||!t.pl)return;const o=t.ol.length;for(let l=0;l<o;l++){let o=t.Al[l]+h,a=t.pl[l]+e-r;const f=c.A.Lo[t.ol[l]];if(o+=f.x,a+=f.y,(f.Bp>=0||0!==f.Vl)&&i>=o&&s>=a&&i<o+f.width&&s<a+f.height&&(f.Bp>=0?this.Re=f.Bp:this.Re=f.id),0===f.type)this.Up(f,i,s,o,a,f.Cl),f.scroll>f.height&&this.vf(i,s,f.scroll,f.height,!0,o+f.width,a,f);else if(2===f.type){let t=0;for(let h=0;h<f.height;h++)for(let e=0;e<f.width;e++){let r=o+e*(f.Rl+32),l=a+h*(f.Sl+32);if(t<20&&f.Ol&&f.bl&&(r+=f.Ol[t],l+=f.bl[t]),i<r||s<l||i>=r+32||s>=l+32){t++;continue}if(this.Le=t,this.ve=f.id,!f.vl||f.vl[t]<=0){t++;continue}const c=n.A.get(f.vl[t]-1);if(1===this.re&&f.Gp)f.id===this.le&&t===this.oe||(this.nh[this.eh]='Use '+this.ce+' with @lre@'+c.name,this.Ce[this.eh]=881,this.Te[this.eh]=c.id,this.Oe[this.eh]=t,this.be[this.eh]=f.id,this.eh++);else if(1===this.me&&f.Gp)16&~this._e||(this.nh[this.eh]=this.ge+' @lre@'+c.name,this.Ce[this.eh]=391,this.Te[this.eh]=c.id,this.Oe[this.eh]=t,this.be[this.eh]=f.id,this.eh++);else{if(f.Gp)for(let i=4;i>=3;i--)c.Hp&&c.Hp[i]?(this.nh[this.eh]=c.Hp[i]+' @lre@'+c.name,3===i?this.Ce[this.eh]=478:4===i&&(this.Ce[this.eh]=347),this.Te[this.eh]=c.id,this.Oe[this.eh]=t,this.be[this.eh]=f.id,this.eh++):4===i&&(this.nh[this.eh]='Drop @lre@'+c.name,this.Ce[this.eh]=347,this.Te[this.eh]=c.id,this.Oe[this.eh]=t,this.be[this.eh]=f.id,this.eh++);if(f.Wp&&(this.nh[this.eh]='Use @lre@'+c.name,this.Ce[this.eh]=188,this.Te[this.eh]=c.id,this.Oe[this.eh]=t,this.be[this.eh]=f.id,this.eh++),f.Gp&&c.Hp)for(let i=2;i>=0;i--)c.Hp[i]&&(this.nh[this.eh]=c.Hp[i]+' @lre@'+c.name,0===i?this.Ce[this.eh]=405:1===i?this.Ce[this.eh]=38:2===i&&(this.Ce[this.eh]=422),this.Te[this.eh]=c.id,this.Oe[this.eh]=t,this.be[this.eh]=f.id,this.eh++);if(f.Yp)for(let i=4;i>=0;i--)f.Yp[i]&&(this.nh[this.eh]=f.Yp[i]+' @lre@'+c.name,0===i?this.Ce[this.eh]=602:1===i?this.Ce[this.eh]=596:2===i?this.Ce[this.eh]=22:3===i?this.Ce[this.eh]=892:4===i&&(this.Ce[this.eh]=415),this.Te[this.eh]=c.id,this.Oe[this.eh]=t,this.be[this.eh]=f.id,this.eh++);this.nh[this.eh]='Examine @lre@'+c.name,$.K.nt&&(this.nh[this.eh]+='@whi@ ('+c.id+')'),this.Ce[this.eh]=1773,this.Te[this.eh]=c.id,f.Ll&&(this.be[this.eh]=f.Ll[t]),this.eh++}t++}}else if(i>=o&&s>=a&&i<o+f.width&&s<a+f.height)if(f.zl===c.A.Vp){let t=!1;0!==f._l&&(t=this.Kp(f)),!t&&f.Xp&&(this.nh[this.eh]=f.Xp,this.Ce[this.eh]=951,this.be[this.eh]=f.id,this.eh++)}else if(f.zl===c.A.zp&&0===this.me){let t=f.ow;t&&-1!==t.indexOf(' ')&&(t=t.substring(0,t.indexOf(' '))),this.nh[this.eh]=t+' @gre@'+f.action,this.Ce[this.eh]=930,this.be[this.eh]=f.id,this.eh++}else f.zl===c.A.jp?(this.nh[this.eh]='Close',this.Ce[this.eh]=947,this.be[this.eh]=f.id,this.eh++):f.zl===c.A.Zp&&f.Xp?(this.nh[this.eh]=f.Xp,this.Ce[this.eh]=465,this.be[this.eh]=f.id,this.eh++):f.zl===c.A.qp&&f.Xp?(this.nh[this.eh]=f.Xp,this.Ce[this.eh]=960,this.be[this.eh]=f.id,this.eh++):f.zl===c.A.jl&&!this.ye&&f.Xp&&(this.nh[this.eh]=f.Xp,this.Ce[this.eh]=44,this.be[this.eh]=f.id,this.eh++)}};Kp=t=>{let i=t._l;return i>=c.A.wa&&i<=c.A.pa?(i>=c.A.Aa?i-=c.A.Aa:i--,this.nh[this.eh]='Remove @whi@'+this.io[i],this.Ce[this.eh]=557,this.eh++,this.nh[this.eh]='Message @whi@'+this.io[i],this.Ce[this.eh]=679,this.eh++,!0):i>=c.A.Ia&&i<=c.A._a&&(this.nh[this.eh]='Remove @whi@'+t.text,this.Ce[this.eh]=556,this.eh++,!0)};$p=()=>{0===this.re&&0===this.me&&(this.nh[this.eh]='Walk here',this.Ce[this.eh]=660,this.Oe[this.eh]=this.kl,this.be[this.eh]=this.xl,this.eh++);let t=-1;for(let i=0;i<p.A.Vf;i++){const s=p.A.Jp[i],h=127&s,r=s>>7&127,o=s>>29&3,l=s>>14&32767;if(s!==t){if(t=s,2===o&&this.Ge&&this.Ge.ld(this.xn,h,r,s)>=0){const t=e.A.get(l);if(1===this.re)this.nh[this.eh]='Use '+this.ce+' with @cya@'+t.name,this.Ce[this.eh]=450,this.Te[this.eh]=s,this.Oe[this.eh]=h,this.be[this.eh]=r,this.eh++;else if(1!==this.me){if(t.Qp)for(let i=4;i>=0;i--)t.Qp[i]&&(this.nh[this.eh]=t.Qp[i]+' @cya@'+t.name,0===i&&(this.Ce[this.eh]=285),1===i&&(this.Ce[this.eh]=504),2===i&&(this.Ce[this.eh]=364),3===i&&(this.Ce[this.eh]=581),4===i&&(this.Ce[this.eh]=1501),this.Te[this.eh]=s,this.Oe[this.eh]=h,this.be[this.eh]=r,this.eh++);this.nh[this.eh]='Examine @cya@'+t.name,$.K.nt&&(this.nh[this.eh]+='@whi@ ('+t.id+')'),this.Ce[this.eh]=1175,this.Te[this.eh]=s,this.Oe[this.eh]=h,this.be[this.eh]=r,this.eh++}else 4&~this._e||(this.nh[this.eh]=this.ge+' @cya@'+t.name,this.Ce[this.eh]=55,this.Te[this.eh]=s,this.Oe[this.eh]=h,this.be[this.eh]=r,this.eh++)}if(1===o){const t=this.wr[l];if(t&&t.type&&1===t.type.size&&64==(127&t.x)&&64==(127&t.z))for(let i=0;i<this.yr;i++){const s=this.wr[this.Ar[i]];s&&s!==t&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.tm(s.type,this.Ar[i],h,r)}t&&t.type&&this.tm(t.type,l,h,r)}if(0===o){const t=this.er[l];if(t&&64==(127&t.x)&&64==(127&t.z)){for(let i=0;i<this.yr;i++){const s=this.wr[this.Ar[i]];s&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.tm(s.type,this.Ar[i],h,r)}for(let i=0;i<this.nr;i++){const s=this.er[this.rr[i]];s&&s!==t&&s.x===t.x&&s.z===t.z&&this.im(s,this.rr[i],h,r)}}t&&this.im(t,l,h,r)}if(3===o){const t=this.gr[this.xn][h][r];if(!t)continue;for(let i=t.sm();i;i=t.hm()){const t=n.A.get(i.index);if(1===this.re)this.nh[this.eh]='Use '+this.ce+' with @lre@'+t.name,this.Ce[this.eh]=217,this.Te[this.eh]=i.index,this.Oe[this.eh]=h,this.be[this.eh]=r,this.eh++;else if(1!==this.me){for(let s=4;s>=0;s--)t.Qp&&t.Qp[s]?(this.nh[this.eh]=t.Qp[s]+' @lre@'+t.name,0===s&&(this.Ce[this.eh]=224),1===s&&(this.Ce[this.eh]=993),2===s&&(this.Ce[this.eh]=99),3===s&&(this.Ce[this.eh]=746),4===s&&(this.Ce[this.eh]=877),this.Te[this.eh]=i.index,this.Oe[this.eh]=h,this.be[this.eh]=r,this.eh++):2===s&&(this.nh[this.eh]='Take @lre@'+t.name,this.Ce[this.eh]=99,this.Te[this.eh]=i.index,this.Oe[this.eh]=h,this.be[this.eh]=r,this.eh++);this.nh[this.eh]='Examine @lre@'+t.name,$.K.nt&&(this.nh[this.eh]+='@whi@ ('+i.index+')'),this.Ce[this.eh]=1102,this.Te[this.eh]=i.index,this.Oe[this.eh]=h,this.be[this.eh]=r,this.eh++}else 1&~this._e||(this.nh[this.eh]=this.ge+' @lre@'+t.name,this.Ce[this.eh]=965,this.Te[this.eh]=i.index,this.Oe[this.eh]=h,this.be[this.eh]=r,this.eh++)}}}}};tm=(t,i,s,h)=>{if(this.eh>=400)return;let e=t.name;if(0!==t.nm&&this.Rr&&(e=e+this.rm(this.Rr.Va,t.nm)+' (level-'+t.nm+')'),1===this.re)this.nh[this.eh]='Use '+this.ce+' with @yel@'+e,this.Ce[this.eh]=900,this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++;else if(1!==this.me){let n;if(t.Qp)for(n=4;n>=0;n--)t.Qp[n]&&'attack'!==t.Qp[n]?.toLowerCase()&&(this.nh[this.eh]=t.Qp[n]+' @yel@'+e,0===n?this.Ce[this.eh]=728:1===n?this.Ce[this.eh]=542:2===n?this.Ce[this.eh]=6:3===n?this.Ce[this.eh]=963:4===n&&(this.Ce[this.eh]=245),this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++);if(t.Qp)for(n=4;n>=0;n--)if(t.Qp[n]&&'attack'===t.Qp[n]?.toLowerCase()){let r=0;this.Rr&&t.nm>this.Rr.Va&&(r=2e3),this.nh[this.eh]=t.Qp[n]+' @yel@'+e,0===n?this.Ce[this.eh]=r+728:1===n?this.Ce[this.eh]=r+542:2===n?this.Ce[this.eh]=r+6:3===n?this.Ce[this.eh]=r+963:4===n&&(this.Ce[this.eh]=r+245),this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++}this.nh[this.eh]='Examine @yel@'+e,$.K.nt&&(this.nh[this.eh]+='@whi@ ('+t.id+')'),this.Ce[this.eh]=1607,this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++}else 2&~this._e||(this.nh[this.eh]=this.ge+' @yel@'+e,this.Ce[this.eh]=265,this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++)};im=(t,i,s,h)=>{if(t===this.Rr||this.eh>=400)return;let e=null;this.Rr&&(e=t.name+this.rm(this.Rr.Va,t.Va)+' (level-'+t.Va+')'),1===this.re?(this.nh[this.eh]='Use '+this.ce+' with @whi@'+e,this.Ce[this.eh]=367,this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++):1!==this.me?(this.nh[this.eh]='Follow @whi@'+e,this.Ce[this.eh]=1544,this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++,0===this.$s&&(this.nh[this.eh]='Trade with @whi@'+e,this.Ce[this.eh]=1373,this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++),this.Pr>0&&(this.nh[this.eh]='Attack @whi@'+e,this.Rr&&this.Rr.Va>=t.Va?this.Ce[this.eh]=151:this.Ce[this.eh]=2151,this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++),1===this.Fr&&(this.nh[this.eh]='Fight @whi@'+e,this.Ce[this.eh]=151,this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++),2===this.Fr&&(this.nh[this.eh]='Duel-with @whi@'+e,this.Ce[this.eh]=1101,this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++)):8&~this._e||(this.nh[this.eh]=this.ge+' @whi@'+e,this.Ce[this.eh]=651,this.Te[this.eh]=i,this.Oe[this.eh]=s,this.be[this.eh]=h,this.eh++);for(let t=0;t<this.eh;t++)if(660===this.Ce[t])return void(this.nh[t]='Walk here @whi@'+e)};rm=(t,i)=>{const s=t-i;return s<-9?'@red@':s<-6?'@or3@':s<-3?'@or2@':s<0?'@or1@':s>9?'@gre@':s>6?'@gr3@':s>3?'@gr2@':s>0?'@gr1@':'@yel@'};hf=()=>{if(0===this.ie){this.nh[0]='Cancel',this.Ce[0]=1252,this.eh=1,this.Fp(this.xl),this.Re=0,this.kl>8&&this.xl>11&&this.kl<520&&this.xl<345&&(-1===this.Ks?this.$p():this.Up(c.A.Lo[this.Ks],this.kl,this.xl,8,11,0)),this.Re!==this.qh&&(this.qh=this.Re),this.Re=0,this.kl>562&&this.xl>231&&this.kl<752&&this.xl<492&&(-1!==this.rh?this.Up(c.A.Lo[this.rh],this.kl,this.xl,562,231,0):-1!==this.Sh[this.Rh]&&this.Up(c.A.Lo[this.Sh[this.Rh]],this.kl,this.xl,562,231,0)),this.Re!==this.$h&&(this.Hs=!0,this.$h=this.Re),this.Re=0,this.kl>22&&this.xl>375&&this.kl<431&&this.xl<471&&(-1===this.oh?this.Pp(this.kl-22,this.xl-375):this.Up(c.A.Lo[this.oh],this.kl,this.xl,22,375,0)),-1!==this.oh&&this.Re!==this.Jh&&(this.Ws=!0,this.Jh=this.Re);let t=!1;for(;!t;){t=!0;for(let i=0;i<this.eh-1;i++)if(this.Ce[i]<1e3&&this.Ce[i+1]>1e3){const s=this.nh[i];this.nh[i]=this.nh[i+1],this.nh[i+1]=s;const h=this.Ce[i];this.Ce[i]=this.Ce[i+1],this.Ce[i+1]=h;const e=this.Oe[i];this.Oe[i]=this.Oe[i+1],this.Oe[i+1]=e;const n=this.be[i];this.be[i]=this.be[i+1],this.be[i+1]=n;const r=this.Te[i];this.Te[i]=this.Te[i+1],this.Te[i+1]=r,t=!1}}}};rf=()=>{let t=0;if(this.wi){let i;t=this.wi.ou('Choose Option');for(let s=0;s<this.eh;s++)i=this.wi.ou(this.nh[s]),i>t&&(t=i)}t+=8;const i=15*this.eh+21;let s,h;this.Lc>8&&this.Rc>11&&this.Lc<520&&this.Rc<345&&(s=this.Lc-(t/2|0)-8,s+t>512?s=512-t:s<0&&(s=0),h=this.Rc-11,h+i>334?h=334-i:h<0&&(h=0),this.Js=!0,this.Qs=0,this.th=s,this.ih=h,this.sh=t,this.hh=15*this.eh+22),this.Lc>562&&this.Rc>231&&this.Lc<752&&this.Rc<492&&(s=this.Lc-(t/2|0)-562,s<0?s=0:s+t>190&&(s=190-t),h=this.Rc-231,h<0?h=0:h+i>261&&(h=261-i),this.Js=!0,this.Qs=1,this.th=s,this.ih=h,this.sh=t,this.hh=15*this.eh+22),this.Lc>22&&this.Rc>375&&this.Lc<501&&this.Rc<471&&(s=this.Lc-(t/2|0)-22,s<0?s=0:s+t>479&&(s=479-t),h=this.Rc-375,h<0?h=0:h+i>96&&(h=96-i),this.Js=!0,this.Qs=2,this.th=s,this.ih=h,this.sh=t,this.hh=15*this.eh+22)};uf=(t,i,s,h,e,n,r,o,l,a,c)=>{const f=this.Mn[this.xn];if(!f)return!1;const u=G.A.Kn,d=G.A.Kn;for(let t=0;t<u;t++)for(let i=0;i<d;i++){const s=G.A.index(t,i);this.br[s]=0,this.vr[s]=99999999}let w=t,y=i;const A=G.A.index(t,i);this.br[A]=99,this.vr[A]=0;let p=0,m=0;this.Tr[p]=t,this.Or[p++]=i;let I=!1,_=this.Tr.length;const g=f.flags;for(;m!==p;){if(w=this.Tr[m],y=this.Or[m],m=(m+1)%_,w===s&&y===h){I=!0;break}if(l!==P.A.fd.id){if((l<P.A.om.id||l===P.A.zw.id)&&f.lm(w,y,s,h,l-1,o)){I=!0;break}if(l<P.A.zw.id&&f.am(w,y,s,h,l-1,o)){I=!0;break}}if(0!==n&&0!==r&&f.fm(w,y,s,h,n,r,a)){I=!0;break}const t=this.vr[G.A.index(w,y)]+1;let i=G.A.index(w-1,y);w>0&&0===this.br[i]&&(g[i]&H.A.hd)===H.A.OPEN&&(this.Tr[p]=w-1,this.Or[p]=y,p=(p+1)%_,this.br[i]=2,this.vr[i]=t),i=G.A.index(w+1,y),w<u-1&&0===this.br[i]&&(g[i]&H.A.ed)===H.A.OPEN&&(this.Tr[p]=w+1,this.Or[p]=y,p=(p+1)%_,this.br[i]=8,this.vr[i]=t),i=G.A.index(w,y-1),y>0&&0===this.br[i]&&(g[i]&H.A.nd)===H.A.OPEN&&(this.Tr[p]=w,this.Or[p]=y-1,p=(p+1)%_,this.br[i]=1,this.vr[i]=t),i=G.A.index(w,y+1),y<d-1&&0===this.br[i]&&(g[i]&H.A.rd)===H.A.OPEN&&(this.Tr[p]=w,this.Or[p]=y+1,p=(p+1)%_,this.br[i]=4,this.vr[i]=t),i=G.A.index(w-1,y-1),w>0&&y>0&&0===this.br[i]&&!(g[i]&H.A.um)&&(g[G.A.index(w-1,y)]&H.A.hd)===H.A.OPEN&&(g[G.A.index(w,y-1)]&H.A.nd)===H.A.OPEN&&(this.Tr[p]=w-1,this.Or[p]=y-1,p=(p+1)%_,this.br[i]=3,this.vr[i]=t),i=G.A.index(w+1,y-1),w<u-1&&y>0&&0===this.br[i]&&!(g[i]&H.A.dm)&&(g[G.A.index(w+1,y)]&H.A.ed)===H.A.OPEN&&(g[G.A.index(w,y-1)]&H.A.nd)===H.A.OPEN&&(this.Tr[p]=w+1,this.Or[p]=y-1,p=(p+1)%_,this.br[i]=9,this.vr[i]=t),i=G.A.index(w-1,y+1),w>0&&y<d-1&&0===this.br[i]&&!(g[i]&H.A.wm)&&(g[G.A.index(w-1,y)]&H.A.hd)===H.A.OPEN&&(g[G.A.index(w,y+1)]&H.A.rd)===H.A.OPEN&&(this.Tr[p]=w-1,this.Or[p]=y+1,p=(p+1)%_,this.br[i]=6,this.vr[i]=t),i=G.A.index(w+1,y+1),w<u-1&&y<d-1&&0===this.br[i]&&!(g[i]&H.A.ym)&&(g[G.A.index(w+1,y)]&H.A.ed)===H.A.OPEN&&(g[G.A.index(w,y+1)]&H.A.rd)===H.A.OPEN&&(this.Tr[p]=w+1,this.Or[p]=y+1,p=(p+1)%_,this.br[i]=12,this.vr[i]=t)}if(this.Lr=0,!I){if(c){let t=100;for(let i=1;i<2;i++){for(let e=s-i;e<=s+i;e++)for(let s=h-i;s<=h+i;s++){const i=G.A.index(e,s);e>=0&&s>=0&&e<G.A.Kn&&s<G.A.Kn&&this.vr[i]<t&&(t=this.vr[i],w=e,y=s,this.Lr=1,I=!0)}if(I)break}}if(!I)return!1}m=0,this.Tr[m]=w,this.Or[m++]=y;let E=this.br[G.A.index(w,y)],C=E;for(;w!==t||y!==i;)C!==E&&(E=C,this.Tr[m]=w,this.Or[m++]=y),C&ht.A.yd?w++:C&ht.A.dd&&w--,C&ht.A.wd?y++:C&ht.A.Ad&&y--,C=this.br[G.A.index(w,y)];if(m>0){_=Math.min(m,25),m--;const t=this.Tr[m],i=this.Or[m];if($.K.nt&&1===this.tf[6]&&1===this.tf[7]){for(let t=0;t<this.Eo.length;t++){const i=this.Eo[t];if(i&&i.x===x.A.cf&&i.z===x.A.ff)return this.Eo[t]=null,!1}return this.Eo[this.Co]=new st.A(this.xn,x.A.cf,x.A.ff),this.Co=this.Co+1&this.Eo.length-1,!1}0===e?(this.Ut.zc(O.A.Am),this.Ut.p1(_+_+3)):1===e?(this.Ut.zc(O.A.pm),this.Ut.p1(_+_+3+14)):2===e&&(this.Ut.zc(O.A.Im),this.Ut.p1(_+_+3)),1===this.tf[5]?this.Ut.p1(1):this.Ut.p1(0),this.Ut.p2(t+this.Cn),this.Ut.p2(i+this.Tn),this.Ve=this.Tr[0],this.Ke=this.Or[0];for(let s=1;s<_;s++)m--,this.Ut.p1(this.Tr[m]-t),this.Ut.p1(this.Or[m]-i);return!0}return 1!==e};_p=(t,i)=>{this.ar=0,this.lr=0,this._m(t),this.gm(t),this.Em(t,i),this.Cm(t);for(let t=0;t<this.ar;t++){const i=this.ur[t],s=this.er[i];s&&(s.Wf!==this.Nt&&(this.er[i]=null))}if(t.Pc!==i)throw new Error(`eek! Error packet size mismatch in getplayer pos:${t.Pc} psize:${i}`);for(let t=0;t<this.nr;t++)if(!this.er[this.rr[t]])throw new Error(`eek! ${this.username} null entry in pl list - pos:${t} size:${this.nr}`)};_m=t=>{t.Tm();if(0!==t.Om(1)){const i=t.Om(2);if(0===i)this.cr[this.lr++]=this.St;else if(1===i){const i=t.Om(3);this.Rr?.step(!1,i);1===t.Om(1)&&(this.cr[this.lr++]=this.St)}else if(2===i){const i=t.Om(3);this.Rr?.step(!0,i);const s=t.Om(3);this.Rr?.step(!0,s);1===t.Om(1)&&(this.cr[this.lr++]=this.St)}else if(3===i){this.xn=t.Om(2);const i=t.Om(7),s=t.Om(7),h=t.Om(1);this.Rr?.move(1===h,i,s);1===t.Om(1)&&(this.cr[this.lr++]=this.St)}}};gm=t=>{const i=t.Om(8);if(i<this.nr)for(let t=i;t<this.nr;t++)this.ur[this.ar++]=this.rr[t];if(i>this.nr)throw new Error(`eek! ${this.username} Too many players`);this.nr=0;for(let s=0;s<i;s++){const i=this.rr[s],h=this.er[i];if(0===t.Om(1))this.rr[this.nr++]=i,h&&(h.Wf=this.Nt);else{const s=t.Om(2);if(0===s)this.rr[this.nr++]=i,h&&(h.Wf=this.Nt),this.cr[this.lr++]=i;else if(1===s){this.rr[this.nr++]=i,h&&(h.Wf=this.Nt);const s=t.Om(3);h?.step(!1,s);1===t.Om(1)&&(this.cr[this.lr++]=i)}else if(2===s){this.rr[this.nr++]=i,h&&(h.Wf=this.Nt);const s=t.Om(3);h?.step(!0,s);const e=t.Om(3);h?.step(!0,e);1===t.Om(1)&&(this.cr[this.lr++]=i)}else 3===s&&(this.ur[this.ar++]=i)}}};Em=(t,i)=>{let s;for(;t.bm+10<8*i&&(s=t.Om(11),2047!==s);){if(!this.er[s]){this.er[s]=new W.A;const t=this.dr[s];t&&this.er[s]?.read(t)}this.rr[this.nr++]=s;const i=this.er[s];i&&(i.Wf=this.Nt);let h=t.Om(5);h>15&&(h-=32);let e=t.Om(5);e>15&&(e-=32);const n=t.Om(1);this.Rr&&i?.move(1===n,this.Rr.df[0]+h,this.Rr.wf[0]+e);1===t.Om(1)&&(this.cr[this.lr++]=s)}t.vm()};Cm=t=>{for(let i=0;i<this.lr;i++){const s=this.cr[i],h=this.er[s];if(!h)continue;let e=t.Hy;128&~e||(e+=t.Hy<<8),this.Lm(h,s,e,t)}};Lm=(t,i,s,e)=>{if(t.Iu=s,t._u=this.Nt,!(1&~s)){const s=e.Hy,h=new Uint8Array(s),n=new I.A(h);e._A(s,0,h),this.dr[i]=n,t.read(n)}if(!(2&~s)){let i=e.Fy;65535===i&&(i=-1),i===t.gu&&(t.Rm=0);const s=e.Hy;(-1===i||-1===t.gu||h.A.Lo[i].priority>h.A.Lo[t.gu].priority||0===h.A.Lo[t.gu].priority)&&(t.gu=i,t.Sm=0,t.Mm=0,t.km=s,t.Rm=0)}if(4&~s||(t.Eu=e.Fy,65535===t.Eu&&(t.Eu=-1)),8&~s||(t.nu=e.Qy,t.lu=0,t.au=0,t.cu=150,t.name&&this.Od(2,t.nu,t.name)),16&~s||(t.yu=e.Hy,t.wu=e.Hy,t.fu=this.Nt+400,t.uu=e.Hy,t.du=e.Hy),32&~s||(t.xm=e.Fy,t.Dm=e.Fy,t.Cu=t.xm,t.Tu=t.Dm),!(64&~s)){const i=e.Fy,s=e.Hy,h=e.Hy,n=e.Pc;if(t.name){const n=M.A.ju(t.name);let r=!1;if(s<=1)for(let t=0;t<this.uh;t++)if(this.dh[t]===n){r=!0;break}if(!r&&0===this.$s)try{const n=v.A.hc(e,h),r=b.A.filter(n);t.nu=r,t.lu=i>>8,t.au=255&i,t.cu=150,s>1?this.Od(1,r,t.name):this.Od(2,r,t.name)}catch(t){}}e.Pc=n+h}if(!(256&~s)){t.Ou=e.Fy;const i=e.Vo;t.Nm=i>>16,t.Pm=this.Nt+(65535&i),t.Fm=0,t.Um=0,t.Pm>this.Nt&&(t.Fm=-1),65535===t.Ou&&(t.Ou=-1)}512&~s||(t.Bm=e.Hy,t.Gm=e.Hy,t.Hm=e.Hy,t.Wm=e.Hy,t.Au=e.Fy+this.Nt,t.pu=e.Fy+this.Nt,t.Ym=e.Hy,t.pathLength=0,t.df[0]=t.Hm,t.wf[0]=t.Wm)};Ky=(t,i)=>{this.ar=0,this.lr=0,this.Vm(t),this.Km(t,i),this.Xm(t);for(let t=0;t<this.ar;t++){const i=this.ur[t],s=this.wr[i];s&&(s.Wf!==this.Nt&&(s.type=null,this.wr[i]=null))}if(t.Pc!==i)throw new Error(`eek! ${this.username} size mismatch in getnpcpos - pos:${t.Pc} psize:${i}`);for(let t=0;t<this.yr;t++)if(!this.wr[this.Ar[t]])throw new Error(`eek! ${this.username} null entry in npc list - pos:${t} size:${this.yr}`)};Vm=t=>{t.Tm();const i=t.Om(8);if(i<this.yr)for(let t=i;t<this.yr;t++)this.ur[this.ar++]=this.Ar[t];if(i>this.yr)throw new Error(`eek! ${this.username} Too many npc!`);this.yr=0;for(let s=0;s<i;s++){const i=this.Ar[s],h=this.wr[i];if(0===t.Om(1))this.Ar[this.yr++]=i,h&&(h.Wf=this.Nt);else{const s=t.Om(2);if(0===s)this.Ar[this.yr++]=i,h&&(h.Wf=this.Nt),this.cr[this.lr++]=i;else if(1===s){this.Ar[this.yr++]=i,h&&(h.Wf=this.Nt);const s=t.Om(3);h?.step(!1,s);1===t.Om(1)&&(this.cr[this.lr++]=i)}else if(2===s){this.Ar[this.yr++]=i,h&&(h.Wf=this.Nt);const s=t.Om(3);h?.step(!0,s);const e=t.Om(3);h?.step(!0,e);1===t.Om(1)&&(this.cr[this.lr++]=i)}else 3===s&&(this.ur[this.ar++]=i)}}};Km=(t,i)=>{for(;t.bm+21<8*i;){const i=t.Om(13);if(8191===i)break;this.wr[i]||(this.wr[i]=new Y.A);const s=this.wr[i];this.Ar[this.yr++]=i,s?(s.Wf=this.Nt,s.type=r.A.get(t.Om(11)),s.size=s.type.size,s.zm=s.type.jm,s.Zm=s.type.qm,s.$m=s.type.Jm,s.Qm=s.type.tI,s.Ra=s.type.iI):t.Om(11);let h=t.Om(5);h>15&&(h-=32);let e=t.Om(5);e>15&&(e-=32),this.Rr&&s?.move(!1,this.Rr.df[0]+h,this.Rr.wf[0]+e);1===t.Om(1)&&(this.cr[this.lr++]=i)}t.vm()};Xm=t=>{for(let i=0;i<this.lr;i++){const s=this.cr[i],e=this.wr[s];if(!e)continue;const n=t.Hy;if(e.Iu=n,e._u=this.Nt,!(2&~n)){let i=t.Fy;65535===i&&(i=-1),i===e.gu&&(e.Rm=0);const s=t.Hy;(-1===i||-1===e.gu||h.A.Lo[i].priority>h.A.Lo[e.gu].priority||0===h.A.Lo[e.gu].priority)&&(e.gu=i,e.Sm=0,e.Mm=0,e.km=s,e.Rm=0)}if(4&~n||(e.Eu=t.Fy,65535===e.Eu&&(e.Eu=-1)),8&~n||(e.nu=t.Qy,e.cu=100),16&~n||(e.yu=t.Hy,e.wu=t.Hy,e.fu=this.Nt+400,e.uu=t.Hy,e.du=t.Hy),32&~n||(e.type=r.A.get(t.Fy),e.zm=e.type.jm,e.Zm=e.type.qm,e.$m=e.type.Jm,e.Qm=e.type.tI,e.Ra=e.type.iI),!(64&~n)){e.Ou=t.Fy;const i=t.Vo;e.Nm=i>>16,e.Pm=this.Nt+(65535&i),e.Fm=0,e.Um=0,e.Pm>this.Nt&&(e.Fm=-1),65535===e.Ou&&(e.Ou=-1)}128&~n||(e.xm=t.Fy,e.Dm=t.Fy,e.Cu=e.xm,e.Tu=e.Dm)}};qc=()=>{for(let t=-1;t<this.nr;t++){let i;i=-1===t?this.St:this.rr[t];const s=this.er[i];s&&this.sI(s)}if($.K.yt++,$.K.yt>1406){$.K.yt=0,this.Ut.zc(O.A.hI),this.Ut.p1(0);const t=this.Ut.Pc;this.Ut.p1(162),this.Ut.p1(22),2*Math.random()|0||this.Ut.p1(84),this.Ut.p2(31824),this.Ut.p2(13490),2*Math.random()|0||this.Ut.p1(123),2*Math.random()|0||this.Ut.p1(134),this.Ut.p1(100),this.Ut.p1(94),this.Ut.p2(35521),this.Ut.Bf(this.Ut.Pc-t)}};sI=t=>{(t.x<128||t.z<128||t.x>=13184||t.z>=13184)&&(t.gu=-1,t.Ou=-1,t.Au=0,t.pu=0,t.x=128*t.df[0]+64*t.size,t.z=128*t.wf[0]+64*t.size,t.pathLength=0),t===this.Rr&&(t.x<1536||t.z<1536||t.x>=11776||t.z>=11776)&&(t.gu=-1,t.Ou=-1,t.Au=0,t.pu=0,t.x=128*t.df[0]+64*t.size,t.z=128*t.wf[0]+64*t.size,t.pathLength=0),t.Au>this.Nt?this.eI(t):t.pu>=this.Nt?this.nI(t):this.rI(t),this.oI(t),this.lI(t)};Mf=()=>{if(this.Rr){this.Rr.x>>7===this.Ve&&this.Rr.z>>7===this.Ke&&(this.Ve=0);for(let t=-1;t<this.nr;t++){let i,s;if(-1===t?(i=this.Rr,s=this.St<<14):(i=this.er[this.rr[t]],s=this.rr[t]<<14),!i||!i.isVisible())continue;i.st=($.K.st&&this.nr>50||this.nr>200)&&-1!==t&&i.aI===i.Ra;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.A.Kn||e<0||e>=G.A.Kn))if(!i.cI||this.Nt<i.fI||this.Nt>=i.uI){if(64==(127&i.x)&&64==(127&i.z)){if(this.Yn[h][e]===this.Ye)continue;this.Yn[h][e]=this.Ye}i.y=this.Ff(this.xn,i.x,i.z),this.Ge?.dI(this.xn,i.x,i.y,i.z,null,i,s,i.wI,60,i.yI)}else i.st=!1,i.y=this.Ff(this.xn,i.x,i.z),this.Ge?.AI(this.xn,i.x,i.y,i.z,i.pI,i.mI,i.II,i._I,null,i,s,i.wI)}}};$c=()=>{for(let t=0;t<this.yr;t++){const i=this.Ar[t],s=this.wr[i];s&&s.type&&this.sI(s)}};kf=()=>{for(let t=0;t<this.yr;t++){const i=this.wr[this.Ar[t]],s=536870912+(this.Ar[t]<<14)|0;if(!i||!i.isVisible())continue;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.A.Kn||e<0||e>=G.A.Kn)){if(1===i.size&&64==(127&i.x)&&64==(127&i.z)){if(this.Yn[h][e]===this.Ye)continue;this.Yn[h][e]=this.Ye}this.Ge?.dI(this.xn,i.x,this.Ff(this.xn,i.x,i.z),i.z,null,i,s,i.wI,64*(i.size-1)+60,i.yI)}}};xf=()=>{for(let t=this.pr.head();t;t=this.pr.next())if(t.level!==this.xn||this.Nt>t.gI)t.jy();else if(this.Nt>=t.EI){if(t.target>0){const i=this.wr[t.target-1];i&&t.CI(i.x,this.Ff(t.level,i.x,i.z)-t.offsetY,i.z,this.Nt)}if(t.target<0){const i=-t.target-1;let s;s=i===this.kr?this.Rr:this.er[i],s&&t.CI(s.x,this.Ff(t.level,s.x,s.z)-t.offsetY,s.z,this.Nt)}t.update(this.We),this.Ge?.dI(this.xn,0|t.x,0|t.y,0|t.z,null,t,-1,t.wI,60,!1)}};Df=()=>{for(let t=this.mr.head();t;t=this.mr.next())t.level!==this.xn||t.TI?t.jy():this.Nt>=t.EI&&(t.update(this.We),t.TI?t.jy():this.Ge?.dI(t.level,t.x,t.y,t.z,null,t,-1,0,60,!1))};Nf=()=>{for(let t=this.Ir.head();t;t=this.Ir.next()){let i=!1;if(t.cl+=this.We,-1===t.fl&&(t.fl=0,i=!0),t.OI.delay)for(;t.cl>t.OI.delay[t.fl];)if(t.cl-=t.OI.delay[t.fl]+1,t.fl++,i=!0,t.fl>=t.OI.ul&&(t.fl-=t.OI.dl,t.fl<0||t.fl>=t.OI.ul)){t.jy(),i=!1;break}if(i&&this.Ge){const i=t.Mp,s=t.Rp,h=t.Sp;let n=0;if(0===t.bI?n=this.Ge.od(i,s,h):1===t.bI?n=this.Ge.Ty(i,h,s):2===t.bI?n=this.Ge.md(i,s,h):3===t.bI&&(n=this.Ge.td(i,s,h)),this.Hn&&0!==n&&(n>>14&32767)===t.index){const r=this.Hn[i][s][h],o=this.Hn[i][s+1][h],l=this.Hn[i][s+1][h+1],a=this.Hn[i][s][h+1],c=e.A.get(t.index);let f=-1;if(-1!==t.fl&&t.OI.frames&&(f=t.OI.frames[t.fl]),2===t.bI){const t=this.Ge.ld(i,s,h,n);let e=31&t;const u=t>>6;e===P.A.jw.id&&(e=P.A.zw.id),this.Ge?.vI(i,s,h,c.oa(e,u,r,o,l,a,f))}else if(1===t.bI)this.Ge?.LI(i,s,h,c.oa(P.A.RI.id,0,r,o,l,a,f));else if(0===t.bI){const t=this.Ge.ld(i,s,h,n),e=31&t,u=t>>6;if(e===P.A.ud.id){const t=u+1&3;this.Ge?.SI(s,h,i,c.oa(P.A.ud.id,u+4,r,o,l,a,f),c.oa(P.A.ud.id,t,r,o,l,a,f))}else this.Ge?.MI(i,s,h,c.oa(e,u,r,o,l,a,f))}else if(3===t.bI){const t=this.Ge.ld(i,s,h,n)>>6;this.Ge?.kI(i,s,h,c.oa(P.A.Zw.id,t,r,o,l,a,f))}}else t.jy()}}};Jc=()=>{for(let t=-1;t<this.nr;t++){let i;i=-1===t?this.St:this.rr[t];const s=this.er[i];s&&s.cu>0&&(s.cu--,0===s.cu&&(s.nu=null))}for(let t=0;t<this.yr;t++){const i=this.Ar[t],s=this.wr[i];s&&s.cu>0&&(s.cu--,0===s.cu&&(s.nu=null))}};Qc=()=>{if(2===this.He){for(let t=this._r.head();t;t=this._r.next())this.Nt>=t.gI&&(this.gy(t.VA,t.x,t.z,t.kp,t.angle,t.shape,t.Ed),t.jy());$.K.wt++,$.K.wt>85&&($.K.wt=0,this.Ut.zc(O.A.xI))}};eI=t=>{const i=t.Au-this.Nt,s=128*t.Bm+64*t.size,h=128*t.Gm+64*t.size;t.x+=(s-t.x)/i|0,t.z+=(h-t.z)/i|0,t.DI=0,0===t.Ym&&(t.NI=1024),1===t.Ym&&(t.NI=1536),2===t.Ym&&(t.NI=0),3===t.Ym&&(t.NI=512)};nI=t=>{if(t.pu===this.Nt||-1===t.gu||0!==t.km||t.Mm+1>h.A.Lo[t.gu].delay[t.Sm]){const i=t.pu-t.Au,s=this.Nt-t.Au,h=128*t.Bm+64*t.size,e=128*t.Gm+64*t.size,n=128*t.Hm+64*t.size,r=128*t.Wm+64*t.size;t.x=(h*(i-s)+n*s)/i|0,t.z=(e*(i-s)+r*s)/i|0}t.DI=0,0===t.Ym&&(t.NI=1024),1===t.Ym&&(t.NI=1536),2===t.Ym&&(t.NI=0),3===t.Ym&&(t.NI=512),t.wI=t.NI};oI=t=>{if(-1!==t.Eu&&t.Eu<32768){const i=this.wr[t.Eu];if(i){const s=t.x-i.x,h=t.z-i.z;0===s&&0===h||(t.NI=325.949*Math.atan2(s,h)&2047)}}if(t.Eu>=32768){let i=t.Eu-32768;i===this.kr&&(i=this.St);const s=this.er[i];if(s){const i=t.x-s.x,h=t.z-s.z;0===i&&0===h||(t.NI=325.949*Math.atan2(i,h)&2047)}}if((0!==t.xm||0!==t.Dm)&&(0===t.pathLength||t.DI>0)){const i=t.x-64*(t.xm-this.Cn-this.Cn),s=t.z-64*(t.Dm-this.Tn-this.Tn);0===i&&0===s||(t.NI=325.949*Math.atan2(i,s)&2047),t.xm=0,t.Dm=0}const i=t.NI-t.wI&2047;if(0!==i&&(i<32||i>2016?t.wI=t.NI:i>1024?t.wI-=32:t.wI+=32,t.wI&=2047,t.aI===t.Ra&&t.wI!==t.NI)){if(-1!==t.FI)return void(t.aI=t.FI);t.aI=t.zm}};lI=t=>{let i;if(t.yI=!1,-1!==t.aI&&(i=h.A.Lo[t.aI],t.UI++,i.delay&&t.BI<i.ul&&t.UI>i.delay[t.BI]&&(t.UI=0,t.BI++),t.BI>=i.ul&&(t.UI=0,t.BI=0)),-1!==t.gu&&0===t.km){for(i=h.A.Lo[t.gu],t.Mm++;i.delay&&t.Sm<i.ul&&t.Mm>i.delay[t.Sm];)t.Mm-=i.delay[t.Sm],t.Sm++;t.Sm>=i.ul&&(t.Sm-=i.dl,t.Rm++,t.Rm>=i.GI&&(t.gu=-1),(t.Sm<0||t.Sm>=i.ul)&&(t.gu=-1)),t.yI=i.HI}if(t.km>0&&t.km--,-1!==t.Ou&&this.Nt>=t.Pm){for(t.Fm<0&&(t.Fm=0),i=l.A.Lo[t.Ou].OI,t.Um++;i&&i.delay&&t.Fm<i.ul&&t.Um>i.delay[t.Fm];)t.Um-=i.delay[t.Fm],t.Fm++;i&&t.Fm>=i.ul&&(t.Fm<0||t.Fm>=i.ul)&&(t.Ou=-1)}};rI=t=>{if(t.aI=t.Ra,0===t.pathLength)return void(t.DI=0);if(-1!==t.gu&&0===t.km){if(!h.A.Lo[t.gu].WI)return void t.DI++}const i=t.x,s=t.z,e=128*t.df[t.pathLength-1]+64*t.size,n=128*t.wf[t.pathLength-1]+64*t.size;if(e-i<=256&&e-i>=-256&&n-s<=256&&n-s>=-256){t.NI=i<e?s<n?1280:s>n?1792:1536:i>e?s<n?768:s>n?256:512:s<n?1024:0;let h=t.NI-t.wI&2047;h>1024&&(h-=2048);let r=t.Zm;h>=-256&&h<=256?r=t.zm:h>=256&&h<768?r=t.Qm:h>=-768&&h<=-256&&(r=t.$m),-1===r&&(r=t.zm),t.aI=r;let o=4;t.wI!==t.NI&&-1===t.Eu&&(o=2),t.pathLength>2&&(o=6),t.pathLength>3&&(o=8),t.DI>0&&t.pathLength>1&&(o=8,t.DI--),t.YI[t.pathLength-1]&&(o<<=1),o>=8&&t.aI===t.zm&&-1!==t.VI&&(t.aI=t.VI),i<e?(t.x+=o,t.x>e&&(t.x=e)):i>e&&(t.x-=o,t.x<e&&(t.x=e)),s<n?(t.z+=o,t.z>n&&(t.z=n)):s>n&&(t.z-=o,t.z<n&&(t.z=n)),t.x===e&&t.z===n&&t.pathLength--}else t.x=e,t.z=n};Hf=()=>{let t=3;if(this.cn<310&&this.Rr){let i=this.rn>>7,s=this.an>>7;const h=this.Rr.x>>7,e=this.Rr.z>>7;let n,r,o,l;if(this.Wn&&4&this.Wn[this.xn][i][s]&&(t=this.xn),n=h>i?h-i:i-h,r=e>s?e-s:s-e,n>r)for(o=65536*r/n|0,l=32768;i!==h;)i<h?i++:i>h&&i--,this.Wn&&4&this.Wn[this.xn][i][s]&&(t=this.xn),l+=o,l>=65536&&(l-=65536,s<e?s++:s>e&&s--,this.Wn&&4&this.Wn[this.xn][i][s]&&(t=this.xn));else for(o=65536*n/r|0,l=32768;s!==e;)s<e?s++:s>e&&s--,this.Wn&&4&this.Wn[this.xn][i][s]&&(t=this.xn),l+=o,l>=65536&&(l-=65536,i<h?i++:i>h&&i--,this.Wn&&4&this.Wn[this.xn][i][s]&&(t=this.xn))}return this.Rr&&this.Wn&&4&this.Wn[this.xn][this.Rr.x>>7][this.Rr.z>>7]&&(t=this.xn),t};Gf=()=>{if(!this.Wn)return 0;return this.Ff(this.xn,this.rn,this.an)-this.ln>=800||!(4&this.Wn[this.xn][this.rn>>7][this.an>>7])?3:this.xn};Ff=(t,i,s)=>{if(!this.Hn)return 0;const h=Math.min(i>>7,G.A.Kn-1),e=Math.min(s>>7,G.A.Kn-1);let n=t;t<3&&this.Wn&&!(2&~this.Wn[1][h][e])&&(n=t+1);const r=127&i,o=127&s;return(this.Hn[n][h][e]*(128-r)+this.Hn[n][h+1][e]*r>>7)*(128-o)+(this.Hn[n][h][e+1]*(128-r)+this.Hn[n][h+1][e+1]*r>>7)*o>>7};Pf=(t,i,s,h,e,n)=>{const r=2048-e&2047,o=2048-h&2047;let l,a,c,f=0,u=0,w=n;0!==r&&(l=d.A.sin[r],a=d.A.cos[r],c=u*a-n*l>>16,w=u*l+n*a>>16,u=c),0!==o&&(l=d.A.sin[o],a=d.A.cos[o],c=w*l+f*a>>16,w=w*a-f*l>>16,f=c),this.rn=t-f,this.ln=i-u,this.an=s-w,this.cn=e,this.fn=h};If=()=>{if(!this.Rr)return;const t=this.Rr.x+this.je,i=this.Rr.z+this.Ze;(this.Bn-t<-500||this.Bn-t>500||this.Gn-i<-500||this.Gn-i>500)&&(this.Bn=t,this.Gn=i),this.Bn!==t&&(this.Bn+=(t-this.Bn)/16|0),this.Gn!==i&&(this.Gn+=(i-this.Gn)/16|0),1===this.tf[1]?this.Fn+=(-this.Fn-24)/2|0:1===this.tf[2]?this.Fn+=(24-this.Fn)/2|0:this.Fn=this.Fn/2|0,1===this.tf[3]?this.Un+=(12-this.Un)/2|0:1===this.tf[4]?this.Un+=(-this.Un-12)/2|0:this.Un=this.Un/2|0,this.Pn=this.Pn+this.Fn/2&2047,this.Nn+=this.Un/2|0,this.Nn<128&&(this.Nn=128),this.Nn>383&&(this.Nn=383);const s=this.Bn>>7,h=this.Gn>>7,e=this.Ff(this.xn,this.Bn,this.Gn);let n=0;if(this.Hn&&s>3&&h>3&&s<100&&h<100)for(let t=s-4;t<=s+4;t++)for(let i=h-4;i<=h+4;i++){let s=this.xn;s<3&&this.Wn&&!(2&~this.Wn[1][t][i])&&s++;const h=e-this.Hn[s][t][i];h>n&&(n=h)}let r=192*n;r>98048&&(r=98048),r<32768&&(r=32768),r>this.un?this.un+=(r-this.un)/24|0:r<this.un&&(this.un+=(r-this.un)/80|0)};_f=()=>{let t=128*this.Qn+64,i=128*this.tr+64,s=this.Ff(this.xn,this.Qn,this.tr)-this.ir;this.rn<t&&(this.rn+=this.sr+((t-this.rn)*this.hr/1e3|0),this.rn>t&&(this.rn=t)),this.rn>t&&(this.rn-=this.sr+((this.rn-t)*this.hr/1e3|0),this.rn<t&&(this.rn=t)),this.ln<s&&(this.ln+=this.sr+((s-this.ln)*this.hr/1e3|0),this.ln>s&&(this.ln=s)),this.ln>s&&(this.ln-=this.sr+((this.ln-s)*this.hr/1e3|0),this.ln<s&&(this.ln=s)),this.an<i&&(this.an+=this.sr+((i-this.an)*this.hr/1e3|0),this.an>i&&(this.an=i)),this.an>i&&(this.an-=this.sr+((this.an-i)*this.hr/1e3|0),this.an<i&&(this.an=i)),t=128*this.jn+64,i=128*this.Zn+64,s=this.Ff(this.xn,this.jn,this.Zn)-this.qn;const h=t-this.rn,e=s-this.ln,n=i-this.an,r=0|Math.sqrt(h*h+n*n);let o=325.949*Math.atan2(e,r)&2047;const l=-325.949*Math.atan2(h,n)&2047;o<128&&(o=128),o>383&&(o=383),this.cn<o&&(this.cn+=this.$n+((o-this.cn)*this.Jn/1e3|0),this.cn>o&&(this.cn=o)),this.cn>o&&(this.cn-=this.$n+((this.cn-o)*this.Jn/1e3|0),this.cn<o&&(this.cn=o));let a=l-this.fn;a>1024&&(a-=2048),a<-1024&&(a+=2048),a>0&&(this.fn+=this.$n+(a*this.Jn/1e3|0),this.fn&=2047),a<0&&(this.fn-=this.$n+(-a*this.Jn/1e3|0),this.fn&=2047);let c=l-this.fn;c>1024&&(c-=2048),c<-1024&&(c+=2048),(c<0&&a>0||c>0&&a<0)&&(this.fn=l)};wA=(t,i)=>{const s=t.Hy;let n=this.In+(s>>4&7),r=this._n+(7&s);if(i===T.A.dA||i===T.A.uA){const s=t.Hy,h=s>>2,e=3&s,o=P.A.of(h).Ed;let l;if(l=i===T.A.uA?-1:t.Fy,n>=0&&r>=0&&n<G.A.Kn&&r<G.A.Kn){let t=null;for(let i=this.Cr.head();i;i=this.Cr.next())if(i.VA===this.xn&&i.x===n&&i.z===r&&i.Ed===o){t=i;break}if(!t&&this.Ge){let i=0,s=-1,h=0,e=0;if(o===N.A.Ey?i=this.Ge.od(this.xn,n,r):o===N.A.Cy?i=this.Ge.Ty(this.xn,r,n):o===N.A.Oy?i=this.Ge.md(this.xn,n,r):o===N.A.Zw&&(i=this.Ge.td(this.xn,n,r)),0!==i){const t=this.Ge.ld(this.xn,n,r,i);s=i>>14&32767,h=31&t,e=t>>6}t=new U.A(this.xn,o,n,r,0,F.A.dd,P.A.fd.id,s,e,h),this.Cr.KI(t)}t&&(t.kp=l,t.shape=h,t.angle=e),this.gy(this.xn,n,r,l,e,h,o)}}else if(i===T.A.fA){const i=t.Hy>>2,s=P.A.of(i).Ed,e=t.Fy;if(n>=0&&r>=0&&n<G.A.Kn&&r<G.A.Kn&&this.Ge){let t=0;if(s===N.A.Ey?t=this.Ge.od(this.xn,n,r):s===N.A.Cy?t=this.Ge.Ty(this.xn,r,n):s===N.A.Oy?t=this.Ge.md(this.xn,n,r):s===N.A.Zw&&(t=this.Ge.td(this.xn,n,r)),0!==t){const i=new K.A(t>>14&32767,this.xn,s,n,r,h.A.Lo[e],!1);this.Ir.KI(i)}}}else if(i===T.A.cA){const i=t.Fy,s=t.Fy;if(n>=0&&r>=0&&n<G.A.Kn&&r<G.A.Kn){const t=new V.A(i,s);this.gr[this.xn][n][r]||(this.gr[this.xn][n][r]=new S.A),this.gr[this.xn][n][r]?.KI(t),this.yy(n,r)}}else if(i===T.A.aA){const i=t.Fy;if(n>=0&&r>=0&&n<G.A.Kn&&r<G.A.Kn){const t=this.gr[this.xn][n][r];if(t){for(let s=t.head();s;s=t.next())if(s.index===(32767&i)){s.jy();break}t.head()||(this.gr[this.xn][n][r]=null),this.yy(n,r)}}}else if(i===T.A.lA){let i=n+t.By,s=r+t.By;const h=t.HA,e=t.Fy,o=t.Hy,l=t.Hy,a=t.Fy,c=t.Fy,f=t.Hy,u=t.Hy;if(n>=0&&r>=0&&n<G.A.Kn&&r<G.A.Kn&&i>=0&&s>=0&&i<G.A.Kn&&s<G.A.Kn){n=128*n+64,r=128*r+64,i=128*i+64,s=128*s+64;const t=new X.A(e,this.xn,n,this.Ff(this.xn,n,r)-o,r,a+this.Nt,c+this.Nt,f,u,h,l);t.CI(i,this.Ff(this.xn,i,s)-l,s,a+this.Nt),this.pr.KI(t)}}else if(i===T.A.oA){const i=t.Fy,s=t.Hy,h=t.Fy;if(n>=0&&r>=0&&n<G.A.Kn&&r<G.A.Kn){n=128*n+64,r=128*r+64;const t=new z.A(i,this.xn,n,r,this.Ff(this.xn,n,r)-s,this.Nt,h);this.mr.KI(t)}}else if(i===T.A.rA){const i=t.Fy,s=t.Fy,h=t.Fy;if(n>=0&&r>=0&&n<G.A.Kn&&r<G.A.Kn&&h!==this.kr){const t=new V.A(i,s);this.gr[this.xn][n][r]||(this.gr[this.xn][n][r]=new S.A),this.gr[this.xn][n][r]?.KI(t),this.yy(n,r)}}else if(i===T.A.nA){const i=t.Hy,s=i>>2,h=3&i,o=P.A.of(s).Ed,l=t.Fy,a=t.Fy,c=t.Fy,f=t.Fy;let u,d=t.By,w=t.By,y=t.By,A=t.By;if(u=f===this.kr?this.Rr:this.er[f],u&&this.Hn){const t=new B.A(this.xn,o,n,r,-1,h,s,a+this.Nt);this._r.KI(t);const i=new B.A(this.xn,o,n,r,l,h,s,c+this.Nt);this._r.KI(i);const f=this.Hn[this.xn][n][r],p=this.Hn[this.xn][n+1][r],m=this.Hn[this.xn][n+1][r+1],I=this.Hn[this.xn][n][r+1],_=e.A.get(l);u.fI=a+this.Nt,u.uI=c+this.Nt,u.cI=_.oa(s,h,f,p,m,I,-1);let g,E=_.width,C=_.length;h!==F.A.wd&&h!==F.A.Ad||(E=_.length,C=_.width),u.XI=128*n+64*E,u.zI=128*r+64*C,u.jI=this.Ff(this.xn,u.XI,u.zI),d>y&&(g=d,d=y,y=g),w>A&&(g=w,w=A,A=g),u.pI=n+d,u.II=n+y,u.mI=r+w,u._I=r+A}}else if(i===T.A.eA){const i=t.Fy,s=t.Fy,h=t.Fy;if(n>=0&&r>=0&&n<G.A.Kn&&r<G.A.Kn){const t=this.gr[this.xn][n][r];if(t){for(let e=t.head();e;e=t.next())if(e.index===(32767&i)&&e.count===s){e.count=h;break}this.yy(n,r)}}}};Zf=t=>{if(!$.K.st){if(d.A.ZI[17]>=t){const t=d.A.qI[17];if(!t)return;const i=t.width*t.height-1,s=t.width*this.We*2,h=t.ec,e=this.Sn;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.ec=e,this.Sn=h,d.A.$I(17)}if(d.A.ZI[24]>=t){const t=d.A.qI[24];if(!t)return;const i=t.width*t.height-1,s=t.width*this.We*2,h=t.ec,e=this.Sn;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.ec=e,this.Sn=h,d.A.$I(24)}}};mc=()=>{if(!(this.Ei&&this.Ci&&this.gi&&this.Li))return;for(let t=10;t<117;t++){(100*Math.random()|0)<50&&(this.Ei[t+32512]=255)}for(let t=0;t<100;t++){const t=2+(124*Math.random()|0)+(128+(128*Math.random()|0)<<7);this.Ei[t]=192}for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Ci[s]=(this.Ei[s-1]+this.Ei[s+1]+this.Ei[s-128]+this.Ei[s+128])/4|0}this.Ri+=128,this.Ri>this.gi.length&&(this.Ri-=this.gi.length,this.gc(this.Ai[12*Math.random()|0]));for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);let h=this.Ci[s+128]-(this.gi[s+this.Ri&this.gi.length-1]/5|0);h<0&&(h=0),this.Ei[s]=h}for(let t=0;t<255;t++)this.Li[t]=this.Li[t+1];if(this.Li[255]=16*Math.sin(this.Nt/14)+14*Math.sin(this.Nt/15)+12*Math.sin(this.Nt/16)|0,this.Si>0&&(this.Si-=4),this.Mi>0&&(this.Mi-=4),0===this.Si&&0===this.Mi){const t=2e3*Math.random()|0;0===t?this.Si=1024:1===t&&(this.Mi=1024)}};JI=(t,i,s)=>{const h=256-i;return((16711935&t)*h+(16711935&s)*i&4278255360)+((65280&t)*h+(65280&s)*i&16711680)>>8};Ic=()=>{if(!(this.Ti&&this.Oi&&this.bi&&this.vi&&this.Li&&this.Ei))return;const t=256;if(this.Si>0)for(let t=0;t<256;t++)this.Si>768?this.Ti[t]=this.JI(this.Oi[t],1024-this.Si,this.bi[t]):this.Si>256?this.Ti[t]=this.bi[t]:this.Ti[t]=this.JI(this.bi[t],256-this.Si,this.Oi[t]);else if(this.Mi>0)for(let t=0;t<256;t++)this.Mi>768?this.Ti[t]=this.JI(this.Oi[t],1024-this.Mi,this.vi[t]):this.Mi>256?this.Ti[t]=this.vi[t]:this.Ti[t]=this.JI(this.vi[t],256-this.Mi,this.Oi[t]);else for(let t=0;t<256;t++)this.Ti[t]=this.Oi[t];for(let t=0;t<33920;t++)this.si&&this.mi&&(this.si.ec[t]=this.mi.ec[t]);let i=0,s=1152;for(let h=1;h<255;h++){let e=(this.Li[h]*(t-h)/t|0)+22;e<0&&(e=0),i+=e;for(let t=e;t<128;t++){let t=this.Ei[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Ti[t],this.si){const e=this.si.ec[s];this.si.ec[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}s+=e}this.si?.draw(0,0);for(let t=0;t<33920;t++)this.hi&&this.Ii&&(this.hi.ec[t]=this.Ii.ec[t]);i=0,s=1176;for(let h=1;h<255;h++){const e=this.Li[h]*(t-h)/t|0,n=103-e;s+=e;for(let t=0;t<n;t++){let t=this.Ei[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Ti[t],this.hi){const e=this.hi.ec[s];this.hi.ec[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}i+=128-n,s+=128-n-e}this.hi?.draw(661,0)}}console.log(`RS2 user client - release #${$.K.tt}`),await(0,it.w)(),(new t).QI().then((()=>{})),i()}catch(t){i(t)}}),1)},7046:(t,i,s)=>{s.d(i,{A:()=>a});var h=s(1183),e=s(4583),n=s(9234),r=s(9091),o=s(2595),l=s(7854);class a{static getParameter(t){return new URLSearchParams(window.location.search).get(t)??''}static setParameter(t,i){const s=new URL(window.location.toString());s.searchParams.set(t,i),window.history.pushState(null,'',s.toString())}ku=0;t_=[];i_=0;So=null;state=0;s_=20;h_=1;e_=[];Su=0;n_=0;r_=[];o_=!0;l_=!1;a_=50;hasFocus=!0;lc=!1;Wc=0;sf=0;kl=0;xl=0;vc=0;Lc=0;Rc=0;tf=[];c_=[];f_=0;u_=0;input=null;d_=!1;w_=!1;y_=!1;time=-1;A_=0;p_=0;m_=0;I_=0;__=0;g_=0;constructor(t=!1){l.E_.tabIndex=-1,l.zo.fillStyle='black',l.zo.fillRect(0,0,l.E_.width,l.E_.height),this.l_=t,this.l_?this.resize(window.innerWidth,window.innerHeight):this.resize(l.E_.width,l.E_.height)}get width(){return l.E_.width}get height(){return l.E_.height}resize=(t,i)=>{l.E_.width=t,l.E_.height=i,this.So=new h.A(t,i),e.A.C_()};QI=async()=>{l.E_.addEventListener('resize',(()=>{this.l_&&this.resize(window.innerWidth,window.innerHeight)}),!1),l.E_.onmousedown=this.onmousedown,l.E_.onmouseup=this.onmouseup,l.E_.onmouseenter=this.onmouseenter,l.E_.onmouseleave=this.onmouseleave,l.E_.onmousemove=this.onmousemove,window.onbeforeunload=this.Oo,l.E_.onfocus=this.onfocus,l.E_.onblur=this.onblur,this.T_?(l.E_.ontouchstart=this.ontouchstart,l.E_.ontouchend=this.ontouchend,l.E_.ontouchmove=this.ontouchmove):(l.E_.onkeydown=this.onkeydown,l.E_.onkeyup=this.onkeyup),l.E_.oncontextmenu=t=>{t.preventDefault()},window.oncontextmenu=t=>{t.preventDefault()},this.T_&&'low'===a.getParameter('detail')&&(this.a_=30),await this.Bo(0,'Loading...'),await this.load();for(let t=0;t<10;t++)this.e_[t]=performance.now();let t,i=0,s=256,h=1,e=0;for(;this.state>=0;){if(this.state>0&&(this.state--,0===this.state))return void this.O_();const r=s,o=h;s=300,h=1,t=performance.now();const l=this.e_[i];if(0===l?(s=r,h=o):t>l&&(s=2560*this.s_/(t-l)|0),s<25?s=25:s>256&&(s=256,h=this.s_-(t-l)/10|0),this.e_[i]=t,i=(i+1)%10,h>1)for(let t=0;t<10;t++)0!==this.e_[t]&&(this.e_[t]+=h);for(h<this.h_&&(h=this.h_),await(0,n.Ho)(h);e<256;)await this.update(),this.vc=0,this.f_=this.u_,e+=s;e&=255,this.s_>0&&(this.Su=1e3*s/(256*this.s_)|0);const a=performance.now();if(this.o_&&this.refresh(),await this.draw(),this.r_[this.n_]=(performance.now()-a)/1e3,this.n_=(this.n_+1)%this.r_.length,this.a_<50){const i=1e3/this.a_-(performance.now()-t);i>0&&await(0,n.Ho)(i)}}-1===this.state&&this.O_()};O_=()=>{this.state=-2,this.Oo()};jo=t=>{this.s_=1e3/t|0};hy=t=>{this.a_=Math.max(Math.min(50,0|t),0)};start=()=>{this.state>=0&&(this.state=0)};stop=()=>{this.state>=0&&(this.state=4e3/this.s_|0)};destroy=()=>{this.state=-1};load=async()=>{};update=async()=>{};Oo=()=>{};draw=async()=>{};refresh=()=>{};async Bo(t,i){const s=this.width,h=this.height;this.o_&&(l.zo.fillStyle='black',l.zo.fillRect(0,0,s,h),this.o_=!1);const e=h/2-18;l.zo.fillStyle='rgb(140, 17, 17)',l.zo.rect((s/2|0)-152,e,304,34),l.zo.fillRect((s/2|0)-150,e+2,3*t,30),l.zo.fillStyle='black',l.zo.fillRect((s/2|0)-150+3*t,e+2,300-3*t,30),l.zo.font='bold 13px helvetica, sans-serif',l.zo.textAlign='center',l.zo.fillStyle='white',l.zo.fillText(i,s/2|0,e+22),await(0,n.Ho)(5)}Mc=()=>{let t=-1;return this.u_!==this.f_&&(t=this.c_[this.f_],this.f_=this.f_+1&127),t};get ms(){const t=this.r_.length;let i=0;for(let s=0;s<t;s++)i+=this.r_[s];const s=i/t;return s>this.ku&&(this.ku=s),this.t_[this.i_]=s,this.i_=(this.i_+1)%250,s}get Mu(){return this.t_.reduce(((t,i)=>t+i),0)/250}onkeydown=t=>{const i=t.key;r.p.includes(i)&&t.preventDefault(),this.Wc=0;const s=r.L[i];if(!s||0===t.code.length&&!t.isTrusted)return void console.warn(`Unhandled key: ${i}`);const h=s.code;let e=s.ch;t.ctrlKey&&(e>='A'.charCodeAt(0)&&e<=']'.charCodeAt(0)||e=='_'.charCodeAt(0)?e-='A'.charCodeAt(0)-1:e>='a'.charCodeAt(0)&&e<='z'.charCodeAt(0)&&(e-='a'.charCodeAt(0)-1)),e<30&&(e=0),h===r.L.ArrowLeft.code?e=1:h===r.L.ArrowRight.code?e=2:h===r.L.ArrowUp.code?e=3:h===r.L.ArrowDown.code?e=4:h===r.L.Control.code?e=5:h===r.L.Shift.code?e=6:h===r.L.Alt.code?e=7:h===r.L.Backspace.code||h===r.L.Delete.code?e=8:h===r.L.Tab.code?e=9:h===r.L.Enter.code?e=10:h>=r.L.F1.code&&h<=r.L.F12.code?e=h+1008-r.L.F1.code:h===r.L.Home.code?e=1e3:h===r.L.End.code?e=1001:h===r.L.PageUp.code?e=1002:h===r.L.PageDown.code&&(e=1003),e>0&&e<128&&(this.tf[e]=1),e>4&&(this.c_[this.u_]=e,this.u_=this.u_+1&127),o.A.enabled&&o.A.b_(e)};onkeyup=t=>{const i=t.key;r.p.includes(i)&&t.preventDefault(),this.Wc=0;const s=r.L[i];if(!s||0===t.code.length&&!t.isTrusted)return void console.warn(`Unhandled key: ${i}`);const h=s.code;let e=s.ch;e<30&&(e=0),h===r.L.ArrowLeft.code?e=1:h===r.L.ArrowRight.code?e=2:h===r.L.ArrowUp.code?e=3:h===r.L.ArrowDown.code?e=4:h===r.L.Control.code?e=5:h===r.L.Shift.code?e=6:h===r.L.Alt.code?e=7:h===r.L.Backspace.code||h===r.L.Delete.code?e=8:h===r.L.Tab.code?e=9:h===r.L.Enter.code?e=10:h>=r.L.F1.code&&h<=r.L.F12.code?e=h+1008-r.L.F1.code:h===r.L.Home.code?e=1e3:h===r.L.End.code?e=1001:h===r.L.PageUp.code?e=1002:h===r.L.PageDown.code&&(e=1003),e>0&&e<128&&(this.tf[e]=0),o.A.enabled&&o.A.v_(e)};onmousedown=t=>{if(this.d_=!1,(t.clientX>0||t.clientY>0)&&this.L_(t),this.Wc=0,this.Lc=this.kl,this.Rc=this.xl,this.T_&&!this.R_){if(this.S_()||this.M_()||this.k_())return this.vc=1,void(this.sf=1);t.timeStamp>=this.time+500?(this.vc=2,this.sf=2):(this.vc=1,this.sf=1)}else 2===t.button?(this.vc=2,this.sf=2):(this.vc=1,this.sf=1);o.A.enabled&&o.A.x_(this.Lc,this.Rc,t.buttons)};onmouseup=t=>{this.L_(t),this.Wc=0,this.sf=0,o.A.enabled&&o.A.D_(t.buttons)};onmouseenter=t=>{this.L_(t),o.A.enabled&&o.A.N_()};onmouseleave=t=>{this.L_(t),this.Wc=0,this.kl=-1,this.xl=-1,this.sf=0,this.Lc=-1,this.Rc=-1,o.A.enabled&&o.A.P_()};onmousemove=t=>{this.L_(t),this.Wc=0,o.A.enabled&&o.A.F_(this.kl,this.xl)};onfocus=t=>{this.hasFocus=!0,this.o_=!0,this.refresh(),o.A.enabled&&o.A.U_()};onblur=t=>{this.hasFocus=!1,o.A.enabled&&o.A.B_()};ontouchstart=t=>{if(!this.T_)return;null!==this.input&&(this.input.parentNode?.removeChild(this.input),this.input=null),this.d_=!0;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.A_=this.__=this.m_=0|i.screenX,this.p_=this.g_=this.I_=0|i.screenY,this.time=t.timeStamp,this.w_=this.G_(),this.y_=this.H_()};ontouchend=t=>{if(!this.T_||!this.d_)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;if(this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.__=0|i.screenX,this.g_=0|i.screenY,this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowLeft',code:'ArrowLeft'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowUp',code:'ArrowUp'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowRight',code:'ArrowRight'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowDown',code:'ArrowDown'})),this.w_&&!this.G_())return void(this.d_=!1);if(this.y_&&!this.H_())return void(this.d_=!1);if(this.S_()||this.W_()||this.M_()||this.k_()){null!==this.input&&(this.input.parentNode?.contains(this.input)&&this.input.parentNode?.removeChild(this.input),this.input=null);const t=document.createElement('input');return this.M_()?(t.setAttribute('id','username'),t.setAttribute('placeholder','Username')):this.k_()?(t.setAttribute('id','password'),t.setAttribute('placeholder','Password')):this.S_()?(t.setAttribute('id','chatinput'),t.setAttribute('placeholder','Chatinput')):this.W_()&&(t.setAttribute('id','chatpopup'),t.setAttribute('placeholder','Chatpopup')),this.Y_?t.setAttribute('type','password'):t.setAttribute('type',this.k_()?'password':'text'),t.setAttribute('autofocus','autofocus'),t.setAttribute('spellcheck','false'),t.setAttribute('autocomplete','off'),t.setAttribute('style',`position: fixed; left: ${s}px; top: ${h}px; width: 1px; height: 1px; opacity: 0;`),document.body.appendChild(t),t.focus(),t.click(),this.Y_&&(t.oninput=t=>{if(!(t instanceof InputEvent))return;const i=t,s=i.data;null!==s&&'insertText'===i.inputType&&this.onkeydown(new KeyboardEvent('keydown',{key:s,code:s}))}),t.onkeydown=t=>{this.Y_&&'Enter'!==t.key&&'Backspace'!==t.key||this.onkeydown(new KeyboardEvent('keydown',{key:t.key,code:t.key}))},t.onkeyup=t=>{this.Y_&&'Enter'!==t.key&&'Backspace'!==t.key||this.onkeyup(new KeyboardEvent('keyup',{key:t.key,code:t.key}))},t.onfocus=t=>{this.input?.parentNode?.removeChild(this.input),this.input=null,this.onfocus(t)},this.input=t,void(this.d_=!1)}const e=t.timeStamp>=this.time+500,n=Math.abs(this.A_-this.__)>16||Math.abs(this.p_-this.g_)>16;e&&!n?(this.d_=!0,this.onmousedown(new MouseEvent('mousedown',{buttons:2}))):(this.sf=0,this.d_=!1)};ontouchmove=t=>{if(!this.T_||!this.d_)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.__=0|i.screenX,this.g_=0|i.screenY,this.w_&&-1===this.No()?(this.m_-this.__>0?this.rotate(2):this.m_-this.__<0&&this.rotate(0),this.I_-this.g_>0?this.rotate(3):this.I_-this.g_<0&&this.rotate(1)):(this.y_||-1!==this.No())&&this.onmousedown(new MouseEvent('mousedown',{buttons:1})),this.m_=this.__,this.I_=this.g_};get T_(){return['Android','webOS','iPhone','iPad','iPod','BlackBerry','Windows Phone'].some((t=>navigator.userAgent.includes(t)))}get Y_(){return['Android'].some((t=>navigator.userAgent.includes(t)))}get R_(){return['Capacitor'].some((t=>navigator.userAgent.includes(t)))}G_=()=>this.lc&&this.kl>=8&&this.kl<=520&&this.xl>=11&&this.xl<=345;S_=()=>this.lc&&-1===this.Do()&&!this.ko()&&!this.xo()&&this.kl>=11&&this.kl<=506&&this.xl>=449&&this.xl<=482;W_=()=>this.lc&&(this.ko()||this.xo())&&this.kl>=11&&this.kl<=506&&this.xl>=383&&this.xl<=482;H_=()=>this.lc&&this.kl>=562&&this.kl<=752&&this.xl>=231&&this.xl<=492;M_=()=>!this.lc&&2===this.Mo()&&this.kl>=301&&this.kl<=562&&this.xl>=262&&this.xl<=279;k_=()=>!this.lc&&2===this.Mo()&&this.kl>=301&&this.kl<=562&&this.xl>=279&&this.xl<=296;rotate=t=>{0===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowRight',code:'ArrowRight'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowLeft',code:'ArrowLeft'}))):1===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowDown',code:'ArrowDown'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowUp',code:'ArrowUp'}))):2===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowLeft',code:'ArrowLeft'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowRight',code:'ArrowRight'}))):3===t&&(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowUp',code:'ArrowUp'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowDown',code:'ArrowDown'})))};V_=()=>null!==document.fullscreenElement;L_=t=>{if(this.V_()){const i=t.target.getBoundingClientRect(),s=window.innerHeight/l.E_.height,h=(window.innerWidth-l.E_.width*s)/2;this.kl=0|this.K_(t.clientX-i.left-h,0,l.E_.width*s,0,789),this.xl=0|this.K_(t.clientY-i.top,0,l.E_.height*s,0,532)}else{const i=l.E_.getBoundingClientRect(),s=l.E_.width/i.width,h=l.E_.height/i.height;this.kl=(t.clientX-i.left)*s|0,this.xl=(t.clientY-i.top)*h|0}this.kl<0&&(this.kl=0),this.xl<0&&(this.xl=0),this.kl>789&&(this.kl=789),this.xl>532&&(this.xl=532)};K_=(t,i,s,h,e)=>(t-i)*(e-h)/(s-i)+h}},2595:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1069);class e{static enabled=!1;static X_=null;static z_=null;static j_=0;static Z_=0;static q_=0;static J_=0;static Q_=0;static TA=()=>{this.X_=h.A.Ft(1),this.z_=null,this.j_=performance.now(),this.enabled=!0};static Hc=()=>{this.enabled=!1,this.X_=null};static flush=()=>{let t=null;return this.z_&&this.enabled&&(t=this.z_),this.z_=null,t};static stop=()=>{let t=null;return this.X_&&this.X_.Pc>0&&this.enabled&&(t=this.X_),this.Hc(),t};static x_=(t,i,s)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;this.Z_++;const h=performance.now();let e=(h-this.j_)/10|0;e>250&&(e=250),this.j_=h,this.tg(5),1===s?this.X_?.p1(1):this.X_?.p1(2),this.X_?.p1(e),this.X_?.p3(t+(i<<10))};static D_=t=>{if(!this.enabled)return;this.Z_++;const i=performance.now();let s=(i-this.j_)/10|0;s>250&&(s=250),this.j_=i,this.tg(2),1===t?this.X_?.p1(3):this.X_?.p1(4),this.X_?.p1(s)};static F_=(t,i)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;const s=performance.now();if(s-this.q_>=50){this.q_=s,this.Z_++;let h=(s-this.j_)/10|0;h>250&&(h=250),this.j_=s,t-this.J_<8&&t-this.J_>=-8&&i-this.Q_<8&&i-this.Q_>=-8?(this.tg(3),this.X_?.p1(5),this.X_?.p1(h),this.X_?.p1(t+(i-this.Q_+8<<4)+8-this.J_)):t-this.J_<128&&t-this.J_>=-128&&i-this.Q_<128&&i-this.Q_>=-128?(this.tg(4),this.X_?.p1(6),this.X_?.p1(h),this.X_?.p1(t+128-this.J_),this.X_?.p1(i+128-this.Q_)):(this.tg(5),this.X_?.p1(7),this.X_?.p1(h),this.X_?.p3(t+(i<<10))),this.J_=t,this.Q_=i}};static b_=t=>{if(!this.enabled)return;this.Z_++;const i=performance.now();let s=(i-this.j_)/10|0;s>250&&(s=250),this.j_=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.tg(3),this.X_?.p1(8),this.X_?.p1(s),this.X_?.p1(t)};static v_=t=>{if(!this.enabled)return;this.Z_++;const i=performance.now();let s=(i-this.j_)/10|0;s>250&&(s=250),this.j_=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.tg(3),this.X_?.p1(9),this.X_?.p1(s),this.X_?.p1(t)};static U_=()=>{if(!this.enabled)return;this.Z_++;const t=performance.now();let i=(t-this.j_)/10|0;i>250&&(i=250),this.j_=t,this.tg(2),this.X_?.p1(10),this.X_?.p1(i)};static B_=()=>{if(!this.enabled)return;this.Z_++;const t=performance.now();let i=(t-this.j_)/10|0;i>250&&(i=250),this.j_=t,this.tg(2),this.X_?.p1(11),this.X_?.p1(i)};static N_=()=>{if(!this.enabled)return;this.Z_++;const t=performance.now();let i=(t-this.j_)/10|0;i>250&&(i=250),this.j_=t,this.tg(2),this.X_?.p1(12),this.X_?.p1(i)};static P_=()=>{if(!this.enabled)return;this.Z_++;const t=performance.now();let i=(t-this.j_)/10|0;i>250&&(i=250),this.j_=t,this.tg(2),this.X_?.p1(13),this.X_?.p1(i)};static tg=t=>{if(this.X_&&this.X_.Pc+t>=500){const t=this.X_;this.X_=h.A.Ft(1),this.z_=t}}}},9091:(t,i,s)=>{s.d(i,{L:()=>h,p:()=>e});const h={'Backspace':{code:8,ch:8},'Enter':{code:10,ch:10},'Shift':{code:16,ch:65535},'Escape':{code:27,ch:27},'Tab':{code:9,ch:9},'CapsLock':{code:20,ch:65535},' ':{code:32,ch:32},'Control':{code:17,ch:65535},'Alt':{code:18,ch:65535},'Meta':{code:524,ch:65535},'ArrowLeft':{code:37,ch:65535},'ArrowRight':{code:39,ch:65535},'ArrowUp':{code:38,ch:65535},'ArrowDown':{code:40,ch:65535},'Insert':{code:155,ch:65535},'Home':{code:36,ch:65535},'PageUp':{code:33,ch:65535},'Delete':{code:127,ch:127},'End':{code:35,ch:65535},'PageDown':{code:34,ch:65535},'`':{code:192,ch:96},'~':{code:192,ch:126},'!':{code:49,ch:33},'@':{code:50,ch:64},'#':{code:51,ch:35},'$':{code:52,ch:36},'%':{code:53,ch:37},'^':{code:54,ch:94},'&':{code:55,ch:38},'*':{code:56,ch:42},'(':{code:57,ch:40},')':{code:48,ch:41},'-':{code:45,ch:45},'_':{code:45,ch:95},'=':{code:61,ch:61},'+':{code:61,ch:43},'[':{code:91,ch:91},'{':{code:91,ch:123},']':{code:93,ch:93},'}':{code:93,ch:125},'\\':{code:92,ch:92},'|':{code:92,ch:124},';':{code:59,ch:59},':':{code:59,ch:58},"'":{code:222,ch:39},'"':{code:222,ch:34},',':{code:44,ch:44},'<':{code:44,ch:60},'.':{code:46,ch:46},'>':{code:46,ch:62},'/':{code:47,ch:47},'?':{code:47,ch:63},'F1':{code:112,ch:65535},'F2':{code:113,ch:65535},'F3':{code:114,ch:65535},'F4':{code:115,ch:65535},'F5':{code:116,ch:65535},'F6':{code:117,ch:65535},'F7':{code:118,ch:65535},'F8':{code:119,ch:65535},'F9':{code:120,ch:65535},'F10':{code:121,ch:65535},'F11':{code:122,ch:65535},'F12':{code:123,ch:65535},0:{code:48,ch:48},1:{code:49,ch:49},2:{code:50,ch:50},3:{code:51,ch:51},4:{code:52,ch:52},5:{code:53,ch:53},6:{code:54,ch:54},7:{code:55,ch:55},8:{code:56,ch:56},9:{code:57,ch:57},'a':{code:65,ch:97},'b':{code:66,ch:98},'c':{code:67,ch:99},'d':{code:68,ch:100},'e':{code:69,ch:101},'f':{code:70,ch:102},'g':{code:71,ch:103},'h':{code:72,ch:104},'i':{code:73,ch:105},'j':{code:74,ch:106},'k':{code:75,ch:107},'l':{code:76,ch:108},'m':{code:77,ch:109},'n':{code:78,ch:110},'o':{code:79,ch:111},'p':{code:80,ch:112},'q':{code:81,ch:113},'r':{code:82,ch:114},'s':{code:83,ch:115},'t':{code:84,ch:116},'u':{code:85,ch:117},'v':{code:86,ch:118},'w':{code:87,ch:119},'x':{code:88,ch:120},'y':{code:89,ch:121},'z':{code:90,ch:122},'A':{code:65,ch:65},'B':{code:66,ch:66},'C':{code:67,ch:67},'D':{code:68,ch:68},'E':{code:69,ch:69},'F':{code:70,ch:70},'G':{code:71,ch:71},'H':{code:72,ch:72},'I':{code:73,ch:73},'J':{code:74,ch:74},'K':{code:75,ch:75},'L':{code:76,ch:76},'M':{code:77,ch:77},'N':{code:78,ch:78},'O':{code:79,ch:79},'P':{code:80,ch:80},'Q':{code:81,ch:81},'R':{code:82,ch:82},'S':{code:83,ch:83},'T':{code:84,ch:84},'U':{code:85,ch:85},'V':{code:86,ch:86},'W':{code:87,ch:87},'X':{code:88,ch:88},'Y':{code:89,ch:89},'Z':{code:90,ch:90}},e=['Tab','F1','F2','F3','F4','F5','F6','F7','F8','F9','F10','ArrowLeft','ArrowRight','ArrowUp','ArrowDown']},4818:(t,i,s)=>{s.d(i,{A:()=>c});var h=s(1069),e=s(8665),n=s(2679),r=s(2511),o=s(3819),l=s(3867),a=s(8950);class c{static Lo=[];static ig=null;static Ro=null;static El=0;static sg=1;static Tl=2;static Hl=3;static Yl=4;static ta=5;static ha=6;static fa=7;static Vp=1;static zp=2;static jp=3;static Zp=4;static qp=5;static jl=6;static wa=1;static ya=100;static Aa=101;static pa=200;static kw=201;static xw=202;static ma=203;static Dw=205;static Fw=300;static hg=301;static eg=302;static ng=303;static rg=304;static og=305;static lg=306;static ag=307;static cg=308;static fg=309;static ug=310;static dg=311;static wg=312;static Uw=313;static Bw=314;static yg=315;static Ag=316;static pg=317;static mg=318;static Ig=319;static _g=320;static gg=321;static Eg=322;static Gw=323;static xa=324;static Da=325;static Hw=326;static Ta=327;static Ia=401;static _a=500;static Nw=501;static Pw=502;static Ca=503;static Na=600;static Yw=601;static Cg=602;static Tg=603;static Og=604;static bg=605;static vg=606;static Lg=607;static Rg=608;static Sg=609;static Mg=610;static kg=611;static Vw=612;static Pa=613;static Fa=650;static Ga=651;static Ha=652;static Wa=653;static Ya=654;static Ua=655;static hc=(t,i,s)=>{this.ig=new n.A(5e4),this.Ro=new n.A(5e4);const e=new h.A(t.read('data'));let r=-1;for(e.Pc+=2;e.Pc<e.length;){let t=e.Fy;65535===t&&(r=e.Fy,t=e.Fy);const h=this.Lo[t]=new c;h.id=t,h.Ed=r,h.type=e.Hy,h.zl=e.Hy,h._l=e.Fy,h.width=e.Fy,h.height=e.Fy,h.Bp=e.Hy,0===h.Bp?h.Bp=-1:h.Bp=(h.Bp-1<<8)+e.Hy;const n=e.Hy;if(n>0){h.qo=new Uint8Array(n),h.Jo=new Uint16Array(n);for(let t=0;t<n;t++)h.qo[t]=e.Hy,h.Jo[t]=e.Fy}const o=e.Hy;if(o>0){h.scripts=new l.us(o,null);for(let t=0;t<o;t++){const i=e.Fy,s=new Uint16Array(i);h.scripts[t]=s;for(let t=0;t<i;t++)s[t]=e.Fy}}if(h.type===c.El){h.scroll=e.Fy,h.hide=1===e.Hy;const t=e.Hy;h.ol=new Array(t),h.Al=new Array(t),h.pl=new Array(t);for(let i=0;i<t;i++)h.ol[i]=e.Fy,h.Al[i]=e.HA,h.pl[i]=e.HA}if(h.type===c.sg&&(e.Pc+=3),h.type===c.Tl){h.vl=new Int32Array(h.width*h.height),h.Ll=new Int32Array(h.width*h.height),h.draggable=1===e.Hy,h.Gp=1===e.Hy,h.Wp=1===e.Hy,h.Rl=e.Hy,h.Sl=e.Hy,h.Ol=new Int16Array(20),h.bl=new Int16Array(20),h.Gl=new l.us(20,null);for(let t=0;t<20;t++)if(1===e.Hy){h.Ol[t]=e.HA,h.bl[t]=e.HA;const s=e.Qy;if(s.length>0){const e=s.lastIndexOf(',');h.Gl[t]=this.xg(i,s.substring(0,e),parseInt(s.substring(e+1),10))}}h.Yp=new l.us(5,null);for(let t=0;t<5;t++){const i=e.Qy;h.Yp[t]=i,0===i.length&&(h.Yp[t]=null)}}if(h.type===c.Hl&&(h.fill=1===e.Hy),h.type===c.Yl||h.type===c.sg){h.ql=1===e.Hy;const t=e.Hy;s&&(h.font=s[t]),h.Jl=1===e.Hy}if(h.type===c.Yl&&(h.text=e.Qy,h.Xl=e.Qy),h.type!==c.sg&&h.type!==c.Hl&&h.type!==c.Yl||(h.Wl=e.Vo),h.type!==c.Hl&&h.type!==c.Yl||(h.Kl=e.Vo,h.Vl=e.Vo),h.type===c.ta){const t=e.Qy;if(t.length>0){const s=t.lastIndexOf(',');h.sa=this.xg(i,t.substring(0,s),parseInt(t.substring(s+1),10))}const s=e.Qy;if(s.length>0){const t=s.lastIndexOf(',');h.ia=this.xg(i,s.substring(0,t),parseInt(s.substring(t+1),10))}}if(h.type===c.ha){const t=e.Hy;0!==t&&(h.model=this.oa((t-1<<8)+e.Hy));const i=e.Hy;0!==i&&(h.Dg=this.oa((i-1<<8)+e.Hy)),h.ll=e.Hy,0===h.ll?h.ll=-1:h.ll=(h.ll-1<<8)+e.Hy,h.al=e.Hy,0===h.al?h.al=-1:h.al=(h.al-1<<8)+e.Hy,h.zoom=e.Fy,h.ra=e.Fy,h.ca=e.Fy}if(h.type===c.fa){h.vl=new Int32Array(h.width*h.height),h.Ll=new Int32Array(h.width*h.height),h.ql=1===e.Hy;const t=e.Hy;s&&(h.font=s[t]),h.Jl=1===e.Hy,h.Wl=e.Vo,h.Rl=e.HA,h.Sl=e.HA,h.Gp=1===e.Hy,h.Yp=new l.us(5,null);for(let t=0;t<5;t++){const i=e.Qy;h.Yp[t]=i,0===i.length&&(h.Yp[t]=null)}}h.zl!==c.zp&&h.type!==c.Tl||(h.ow=e.Qy,h.action=e.Qy,h.rw=e.Fy),h.zl!==c.Vp&&h.zl!==c.Zp&&h.zl!==c.qp&&h.zl!==c.jl||(h.Xp=e.Qy,0===h.Xp.length&&(h.zl===c.Vp?h.Xp='Ok':h.zl===c.Zp||h.zl===c.qp?h.Xp='Select':h.zl===c.jl&&(h.Xp='Continue')))}this.ig=null,this.Ro=null};static xg=(t,i,s)=>{const h=o.A.Ng(i)<<8n|BigInt(s);if(this.ig){const t=this.ig.get(h);if(t)return t}let e;try{e=r.A.Xa(t,i,s),this.ig?.put(h,e)}catch(t){return null}return e};static oa=t=>{if(this.Ro){const i=this.Ro.get(BigInt(t));if(i)return i}const i=e.A.model(t);return this.Ro?.put(BigInt(t),i),i};id=-1;Ed=-1;type=-1;zl=-1;_l=0;width=0;height=0;Bp=-1;qo=null;Jo=null;scripts=null;scroll=0;hide=!1;draggable=!1;Gp=!1;Wp=!1;Rl=0;Sl=0;Ol=null;bl=null;Gl=null;Yp=null;fill=!1;ql=!1;font=null;Jl=!1;text=null;Xl=null;Wl=0;Kl=0;Vl=0;sa=null;ia=null;model=null;Dg=null;ll=-1;al=-1;zoom=0;ra=0;ca=0;ow=null;action=null;rw=-1;Xp=null;ol=null;Al=null;pl=null;x=0;y=0;Cl=0;vl=null;Ll=null;fl=0;cl=0;oa(t,i,s){let h=this.model;if(s&&(h=this.Dg),!h)return null;if(-1===t&&-1===i&&!h.Pg)return h;const n=e.A.Fg(h,!0,!0,!1);return-1===t&&-1===i||n.Sa(),-1!==t&&n.Ma(t),-1!==i&&n.Ma(i),n.ka(64,768,-50,-10,-50,!0),n}Ug(){if(this.Ed===this.id)return this.x;let t=c.Lo[this.Ed];if(!t.ol||!t.Al||!t.pl)return this.x;let i=t.ol.indexOf(this.id);if(-1===i)return this.x;let s=t.Al[i];for(;t.Ed!==t.id;){const h=c.Lo[t.Ed];h.ol&&h.Al&&h.pl&&(i=h.ol.indexOf(t.id),-1!==i&&(s+=h.Al[i])),t=h}return s}Bg(){if(this.Ed===this.id)return this.y;let t=c.Lo[this.Ed];if(!t.ol||!t.Al||!t.pl)return this.y;let i=t.ol.indexOf(this.id);if(-1===i)return this.y;let s=t.pl[i];for(;t.Ed!==t.id;){const h=c.Lo[t.Ed];h.ol&&h.Al&&h.pl&&(i=h.ol.indexOf(t.id),-1!==i&&(s+=h.pl[i])),t=h}return s}outline(t){const i=this.Ug(),s=this.Bg();a.A.ml(i,s,this.width,this.height,t)}move(t,i){if(this.Ed===this.id)return;this.x=0,this.y=0;const s=c.Lo[this.Ed];if(s.ol&&s.Al&&s.pl){const h=s.ol.indexOf(this.id);-1!==h&&(s.Al[h]=t,s.pl[h]=i)}}delete(){if(this.Ed===this.id)return;const t=c.Lo[this.Ed];if(t.ol&&t.Al&&t.pl){const i=t.ol.indexOf(this.id);-1!==i&&(t.ol.splice(i,1),t.Al.splice(i,1),t.pl.splice(i,1))}}}},6333:(t,i,s)=>{s.d(i,{$:()=>h});class h{id;Gg=null;constructor(t){this.id=t}Hg(t){for(;;){const i=t.Hy;if(0===i)break;this.decode(i,t)}return this}}},2164:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(6333);class n extends e.${static count=0;static Lo=[];static hc=t=>{const i=new h.A(t.read('flo.dat'));this.count=i.Fy;for(let t=0;t<this.count;t++)this.Lo[t]=new n(t).Hg(i)};static Wg=(t,i,s)=>(s>179&&(i=i/2|0),s>192&&(i=i/2|0),s>217&&(i=i/2|0),s>243&&(i=i/2|0),(t/4<<10)+(i/32<<7)+(s/2|0));static Yg=(t,i)=>-1===t?12345678:((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);static Vg=(t,i)=>-2===t?12345678:-1===t?(i<0?i=0:i>127&&(i=127),127-i):((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);Kg=0;texture=-1;Xg=!1;zg=!0;jg=0;Zg=0;qg=0;$g=0;Jg=0;Qg=0;decode(t,i){1===t?(this.Kg=i.tE,this.setColor(this.Kg)):2===t?this.texture=i.Hy:3===t?this.Xg=!0:5===t?this.zg=!1:6===t?this.Gg=i.Qy:console.log('Error unrecognised config code: ',t)}setColor(t){const i=(t>>16&255)/256,s=(t>>8&255)/256,h=(255&t)/256;let e=i;s<i&&(e=s),h<e&&(e=h);let r=i;s>i&&(r=s),h>r&&(r=h);let o=0,l=0;const a=(e+r)/2;e!==r&&(a<.5&&(l=(r-e)/(r+e)),a>=.5&&(l=(r-e)/(2-r-e)),i===r?o=(s-h)/(r-e):s===r?o=(h-i)/(r-e)+2:h===r&&(o=(i-s)/(r-e)+4)),o/=6,this.jg=256*o|0,this.Zg=256*l|0,this.qg=256*a|0,this.Zg<0?this.Zg=0:this.Zg>255&&(this.Zg=255),this.qg<0?this.qg=0:this.qg>255&&(this.qg=255),this.$g=a>.5?(1-a)*l*512|0:a*l*512|0,this.$g<1&&(this.$g=1),this.Jg=o*this.$g|0;let c=this.jg+(16*Math.random()|0)-8;c<0?c=0:c>255&&(c=255);let f=this.Zg+(48*Math.random()|0)-24;f<0?f=0:f>255&&(f=255);let u=this.qg+(48*Math.random()|0)-24;u<0?u=0:u>255&&(u=255),this.Qg=n.Wg(c,f,u)}}},8317:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(1069),e=s(6333),n=s(8665),r=s(3867);class o extends e.${static count=0;static Lo=[];static hc=t=>{const i=new h.A(t.read('idk.dat'));this.count=i.Fy;for(let t=0;t<this.count;t++)this.Lo[t]=new o(t).Hg(i)};type=-1;iE=null;sE=new Int32Array(5).fill(-1);hE=new Int32Array(6);eE=new Int32Array(6);disable=!1;decode(t,i){if(1===t)this.type=i.Hy;else if(2===t){const t=i.Hy;this.iE=new Int32Array(t);for(let s=0;s<t;s++)this.iE[s]=i.Fy}else if(3===t)this.disable=!0;else if(t>=40&&t<50)this.hE[t-40]=i.Fy;else if(t>=50&&t<60)this.eE[t-50]=i.Fy;else{if(!(t>=60&&t<70))throw new Error(`Unrecognized idk config code: ${t}`);this.sE[t-60]=i.Fy}}oa(){if(!this.iE)return null;const t=new r.us(this.iE.length,null);for(let i=0;i<this.iE.length;i++)t[i]=n.A.model(this.iE[i]);let i;i=1===t.length?t[0]:n.A.Oa(t,t.length);for(let t=0;t<6&&0!==this.hE[t];t++)i?.ba(this.hE[t],this.eE[t]);return i}qy(){let t=0;const i=new r.us(5,null);for(let s=0;s<5;s++)-1!==this.sE[s]&&(i[t++]=n.A.model(this.sE[s]));const s=n.A.Oa(i,t);for(let t=0;t<6&&0!==this.hE[t];t++)s.ba(this.hE[t],this.eE[t]);return s}}},5637:(t,i,s)=>{s.d(i,{A:()=>c});var h=s(6333),e=s(1069),n=s(2679),r=s(8665),o=s(1023),l=s(6169),a=s(3867);class c extends h.${static count=0;static cache=null;static nE=null;static rE=null;static oE=0;static Jf=new n.A(500);static Qf=new n.A(30);static hc=t=>{this.nE=new e.A(t.read('loc.dat'));const i=new e.A(t.read('loc.idx'));this.count=i.Fy,this.rE=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.rE[t]=s,s+=i.Fy;this.cache=new a.us(10,null);for(let t=0;t<10;t++)this.cache[t]=new c(-1)};static get=t=>{if(!this.cache||!this.rE||!this.nE)throw new Error('LocType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.oE=(this.oE+1)%10;const i=this.cache[this.oE];return this.nE.Pc=this.rE[t],i.id=t,i.reset(),i.Hg(this.nE),i.lE||(i.lE=new Int32Array(1)),-1===i.aE&&i.lE&&(i.active=i.lE.length>0&&i.lE[0]===o.A.zw.id,i.Qp&&(i.active=!0)),i};static Oo=()=>{this.Jf=null,this.Qf=null,this.rE=null,this.cache=null,this.nE=null};iE=null;lE=null;name=null;Yd=null;hE=null;eE=null;width=1;length=1;vy=!0;Ly=!0;active=!1;aE=-1;cE=!1;fE=!1;zg=!1;ll=-1;uE=!1;dE=16;wE=0;yE=0;Qp=null;sd=-1;ad=-1;AE=!1;pE=!0;mE=128;IE=128;_E=128;qw=0;gE=0;EE=0;CE=0;TE=!1;decode(t,i){if(1===t){const t=i.Hy;this.iE=new Int32Array(t),this.lE=new Int32Array(t);for(let s=0;s<t;s++)this.iE[s]=i.Fy,this.lE[s]=i.Hy}else if(2===t)this.name=i.Qy;else if(3===t)this.Yd=i.Qy;else if(14===t)this.width=i.Hy;else if(15===t)this.length=i.Hy;else if(17===t)this.vy=!1;else if(18===t)this.Ly=!1;else if(19===t)this.aE=i.Hy,1===this.aE&&(this.active=!0);else if(21===t)this.cE=!0;else if(22===t)this.fE=!0;else if(23===t)this.zg=!0;else if(24===t)this.ll=i.Fy,65535===this.ll&&(this.ll=-1);else if(25===t)this.uE=!0;else if(28===t)this.dE=i.Hy;else if(29===t)this.wE=i.By;else if(39===t)this.yE=i.By;else if(t>=30&&t<39)this.Qp||(this.Qp=new a.us(5,null)),this.Qp[t-30]=i.Qy,'hidden'===this.Qp[t-30]?.toLowerCase()&&(this.Qp[t-30]=null);else if(40===t){const t=i.Hy;this.hE=new Uint16Array(t),this.eE=new Uint16Array(t);for(let s=0;s<t;s++)this.hE[s]=i.Fy,this.eE[s]=i.Fy}else 60===t?this.sd=i.Fy:62===t?this.AE=!0:64===t?this.pE=!1:65===t?this.mE=i.Fy:66===t?this.IE=i.Fy:67===t?this._E=i.Fy:68===t?this.ad=i.Fy:69===t?this.qw=i.Hy:70===t?this.gE=i.HA:71===t?this.EE=i.HA:72===t?this.CE=i.HA:73===t&&(this.TE=!0)}oa(t,i,s,h,e,n,o){if(!this.lE)return null;let a=-1;for(let i=0;i<this.lE.length;i++)if(this.lE[i]===t){a=i;break}if(-1===a)return null;const f=BigInt(BigInt(this.id)<<6n)+BigInt(BigInt(a)<<3n)+BigInt(i)+BigInt(BigInt(o)+1n<<32n);let u=c.Qf?.get(f);if(u){if((this.cE||this.fE)&&(u=r.A.OE(u,this.cE,this.fE)),this.cE){const t=(s+h+e+n)/4|0;for(let i=0;i<u.bE;i++){const r=u.vE[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(u.LE[i]+64)/128|0);u.RE[i]+=l-t}u.SE()}return u}if(!this.iE)return null;if(a>=this.iE.length)return null;let d=this.iE[a];if(-1===d)return null;const w=this.AE!==i>3;w&&(d+=65536);let y=c.Jf?.get(BigInt(d));y||(y=r.A.model(65535&d),w&&y.ME(),c.Jf?.put(BigInt(d),y));const A=128!==this.mE||128!==this.IE||128!==this._E,p=0!==this.gE||0!==this.EE||0!==this.CE;let m=r.A.Fg(y,!this.hE,!this.uE,i===l.A.dd&&-1===o&&!A&&!p);for(-1!==o&&(m.Sa(),m.Ma(o),m.kE=null,m.xE=null);i-- >0;)m.DE();if(this.hE&&this.eE)for(let t=0;t<this.hE.length;t++)m.ba(this.hE[t],this.eE[t]);if(A&&m.scale(this.mE,this.IE,this._E),p&&m.translate(this.EE,this.gE,this.CE),m.ka(64+(255&this.wE),5*(255&this.yE)+768,-50,-10,-50,!this.fE),this.vy&&(m.NE=m.PE),c.Qf?.put(f,m),(this.cE||this.fE)&&(m=r.A.OE(m,this.cE,this.fE)),this.cE){const t=(s+h+e+n)/4|0;for(let i=0;i<m.bE;i++){const r=m.vE[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(m.LE[i]+64)/128|0);m.RE[i]+=l-t}m.SE()}return m}reset(){this.iE=null,this.lE=null,this.name=null,this.Yd=null,this.hE=null,this.eE=null,this.width=1,this.length=1,this.vy=!0,this.Ly=!0,this.active=!1,this.aE=-1,this.cE=!1,this.fE=!1,this.zg=!1,this.ll=-1,this.dE=16,this.wE=0,this.yE=0,this.Qp=null,this.uE=!1,this.sd=-1,this.ad=-1,this.AE=!1,this.pE=!0,this.mE=128,this.IE=128,this._E=128,this.qw=0,this.gE=0,this.EE=0,this.CE=0,this.TE=!1}}},6948:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(6333),e=s(1069),n=s(2679),r=s(8665),o=s(3867);class l extends h.${static count=0;static cache=null;static nE=null;static rE=null;static oE=0;static Ro=new n.A(30);static hc=t=>{this.nE=new e.A(t.read('npc.dat'));const i=new e.A(t.read('npc.idx'));this.count=i.Fy,this.rE=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.rE[t]=s,s+=i.Fy;this.cache=new o.us(20,null);for(let t=0;t<20;t++)this.cache[t]=new l(-1)};static get=t=>{if(!this.cache||!this.rE||!this.nE)throw new Error('NpcType not loaded!!!');for(let i=0;i<20;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.oE=(this.oE+1)%20;const i=this.cache[this.oE]=new l(t);return this.nE.Pc=this.rE[t],i.Hg(this.nE),i};static Oo=()=>{this.Ro=null,this.rE=null,this.cache=null,this.nE=null};name=null;Yd=null;size=1;iE=null;sE=null;uE=!1;iI=-1;jm=-1;qm=-1;Jm=-1;tI=-1;hE=null;eE=null;Qp=null;mE=-1;IE=-1;_E=-1;zu=!0;nm=-1;FE=128;UE=128;decode(t,i){if(1===t){const t=i.Hy;this.iE=new Uint16Array(t);for(let s=0;s<t;s++)this.iE[s]=i.Fy}else if(2===t)this.name=i.Qy;else if(3===t)this.Yd=i.Qy;else if(12===t)this.size=i.By;else if(13===t)this.iI=i.Fy;else if(14===t)this.jm=i.Fy;else if(16===t)this.uE=!0;else if(17===t)this.jm=i.Fy,this.qm=i.Fy,this.Jm=i.Fy,this.tI=i.Fy;else if(t>=30&&t<40)this.Qp||(this.Qp=new o.us(5,null)),this.Qp[t-30]=i.Qy,'hidden'===this.Qp[t-30]?.toLowerCase()&&(this.Qp[t-30]=null);else if(40===t){const t=i.Hy;this.hE=new Uint16Array(t),this.eE=new Uint16Array(t);for(let s=0;s<t;s++)this.hE[s]=i.Fy,this.eE[s]=i.Fy}else if(60===t){const t=i.Hy;this.sE=new Uint16Array(t);for(let s=0;s<t;s++)this.sE[s]=i.Fy}else 90===t?this.mE=i.Fy:91===t?this.IE=i.Fy:92===t?this._E=i.Fy:93===t?this.zu=!1:95===t?this.nm=i.Fy:97===t?this.FE=i.Fy:98===t&&(this.UE=i.Fy)}BE(t,i,s){let h=null,e=null;if(l.Ro&&(e=l.Ro.get(BigInt(this.id)),!e&&this.iE)){const t=new o.us(this.iE.length,null);for(let i=0;i<this.iE.length;i++)t[i]=r.A.model(this.iE[i]);if(e=1===t.length?t[0]:r.A.Oa(t,t.length),this.hE&&this.eE)for(let t=0;t<this.hE.length;t++)e?.ba(this.hE[t],this.eE[t]);e?.Sa(),e?.ka(64,850,-30,-50,-30,!0),e&&l.Ro.put(BigInt(this.id),e)}return e?(h=r.A.GE(e,!this.uE),-1!==t&&-1!==i?h.HE(t,i,s):-1!==t&&h.Ma(t),128===this.FE&&128===this.UE||h.scale(this.FE,this.UE,this.FE),h.WE(),h.kE=null,h.xE=null,1===this.size&&(h.YE=!0),h):null}qy(){if(!this.sE)return null;const t=new o.us(this.sE.length,null);for(let i=0;i<this.sE.length;i++)t[i]=r.A.model(this.sE[i]);let i;if(i=1===t.length?t[0]:r.A.Oa(t,t.length),this.hE&&this.eE)for(let t=0;t<this.hE.length;t++)i?.ba(this.hE[t],this.eE[t]);return i}}},1302:(t,i,s)=>{s.d(i,{A:()=>u});var h=s(6333),e=s(1069),n=s(2511),r=s(2679),o=s(8665),l=s(4583),a=s(8950),c=s(9298),f=s(3867);class u extends h.${static count=0;static cache=null;static nE=null;static rE=null;static oE=0;static VE=!0;static Ro=new r.A(50);static tu=new r.A(200);static hc=(t,i)=>{this.VE=i,this.nE=new e.A(t.read('obj.dat'));const s=new e.A(t.read('obj.idx'));this.count=s.Fy,this.rE=new Int32Array(this.count);let h=2;for(let t=0;t<this.count;t++)this.rE[t]=h,h+=s.Fy;this.cache=new f.us(10,null);for(let t=0;t<10;t++)this.cache[t]=new u(-1)};static get=t=>{if(!this.cache||!this.rE||!this.nE)throw new Error('ObjType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.oE=(this.oE+1)%10;const i=this.cache[this.oE];return this.nE.Pc=this.rE[t],i.id=t,i.reset(),i.Hg(this.nE),-1!==i.KE&&i.XE(),!this.VE&&i.members&&(i.name='Members Object',i.Yd="Login to a members' server to use this object.",i.Qp=null,i.Hp=null),i};static Oo=()=>{this.Ro=null,this.tu=null,this.rE=null,this.cache=null,this.nE=null};static Ml=(t,i)=>{if(u.tu){let s=u.tu.get(BigInt(t));if(s&&s.qu!==i&&-1!==s.qu&&(s.jy(),s=null),s)return s}let s=u.get(t);if(s.zE||(i=-1),s.zE&&s.jE&&i>1){let t=-1;for(let h=0;h<10;h++)i>=s.jE[h]&&0!==s.jE[h]&&(t=s.zE[h]);-1!==t&&(s=u.get(t))}const h=new n.A(32,32),e=l.A.ea,r=l.A.na,o=l.A.rc,f=a.A.ec,d=a.A.ZE,w=a.A.qE,y=a.A.left,A=a.A.right,p=a.A.top,m=a.A.bottom;l.A.$E=!1,a.A.bind(h.ec,32,32),a.A.fillRect(0,0,32,32,c.A.Ul),l.A.C_();const I=s.Iy(1),_=l.A.sin[s.hp]*s.np>>16,g=l.A.cos[s.hp]*s.np>>16;I.aa(0,s.ep,s.JE,s.hp,s.QE,_+(I.PE/2|0)+s.tC,g+s.tC);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.ec[t+32*i]&&(t>0&&h.ec[t+32*i-1]>1||i>0&&h.ec[t+32*(i-1)]>1||t<31&&h.ec[t+32*i+1]>1||i<31&&h.ec[t+32*(i+1)]>1)&&(h.ec[t+32*i]=1);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.ec[t+32*i]&&t>0&&i>0&&h.ec[t+32*(i-1)-1]>0&&(h.ec[t+32*i]=3153952);if(-1!==s.KE){const t=this.Ml(s.iC,10),i=t.Nl,h=t.qu;t.Nl=32,t.qu=32,t.sC(5,5,22,22),t.Nl=i,t.qu=h}return u.tu?.put(BigInt(t),h),a.A.bind(f,d,w),a.A.yl(y,p,A,m),l.A.ea=e,l.A.na=r,l.A.rc=o,l.A.$E=!0,s.ua?h.Nl=33:h.Nl=32,h.qu=i,h};model=0;name=null;Yd=null;hE=null;eE=null;np=2e3;hp=0;ep=0;JE=0;QE=0;tC=0;hC=!1;eC=-1;ua=!1;py=1;members=!1;Qp=null;Hp=null;nC=-1;rC=-1;oC=0;lC=-1;aC=-1;cC=0;fC=-1;uC=-1;dC=-1;wC=-1;yC=-1;AC=-1;zE=null;jE=null;iC=-1;KE=-1;decode(t,i){if(1===t)this.model=i.Fy;else if(2===t)this.name=i.Qy;else if(3===t)this.Yd=i.Qy;else if(4===t)this.np=i.Fy;else if(5===t)this.hp=i.Fy;else if(6===t)this.ep=i.Fy;else if(7===t)this.QE=i.HA,this.QE>32767&&(this.QE-=65536);else if(8===t)this.tC=i.HA,this.tC>32767&&(this.tC-=65536);else if(9===t)this.hC=!0;else if(10===t)this.eC=i.Fy;else if(11===t)this.ua=!0;else if(12===t)this.py=i.Vo;else if(16===t)this.members=!0;else if(23===t)this.nC=i.Fy,this.oC=i.By;else if(24===t)this.rC=i.Fy;else if(25===t)this.lC=i.Fy,this.cC=i.By;else if(26===t)this.aC=i.Fy;else if(t>=30&&t<35)this.Qp||(this.Qp=new f.us(5,null)),this.Qp[t-30]=i.Qy,'hidden'===this.Qp[t-30]?.toLowerCase()&&(this.Qp[t-30]=null);else if(t>=35&&t<40)this.Hp||(this.Hp=new f.us(5,null)),this.Hp[t-35]=i.Qy;else if(40===t){const t=i.Hy;this.hE=new Uint16Array(t),this.eE=new Uint16Array(t);for(let s=0;s<t;s++)this.hE[s]=i.Fy,this.eE[s]=i.Fy}else 78===t?this.fC=i.Fy:79===t?this.uC=i.Fy:90===t?this.dC=i.Fy:91===t?this.yC=i.Fy:92===t?this.wC=i.Fy:93===t?this.AC=i.Fy:95===t?this.JE=i.Fy:97===t?this.iC=i.Fy:98===t?this.KE=i.Fy:t>=100&&t<110&&(this.zE&&this.jE||(this.zE=new Uint16Array(10),this.jE=new Uint16Array(10)),this.zE[t-100]=i.Fy,this.jE[t-100]=i.Fy)}pC(t){let i=this.nC;if(1===t&&(i=this.lC),-1===i)return null;let s=this.rC,h=this.fC;1===t&&(s=this.aC,h=this.uC);let e=o.A.model(i);if(-1!==s){const t=o.A.model(s);if(-1===h){const i=[e,t];e=o.A.Oa(i,2)}else{const i=[e,t,o.A.model(h)];e=o.A.Oa(i,3)}}if(0===t&&0!==this.oC&&e.translate(this.oC,0,0),1===t&&0!==this.cC&&e.translate(this.cC,0,0),this.hE&&this.eE)for(let t=0;t<this.hE.length;t++)e.ba(this.hE[t],this.eE[t]);return e}qy(t){let i=this.dC;if(1===t&&(i=this.yC),-1===i)return null;let s=this.wC;1===t&&(s=this.AC);let h=o.A.model(i);if(-1!==s){const t=[h,o.A.model(s)];h=o.A.Oa(t,2)}if(this.hE&&this.eE)for(let t=0;t<this.hE.length;t++)h.ba(this.hE[t],this.eE[t]);return h}Iy(t){if(this.zE&&this.jE&&t>1){let i=-1;for(let s=0;s<10;s++)t>=this.jE[s]&&0!==this.jE[s]&&(i=this.zE[s]);if(-1!==i)return u.get(i).Iy(1)}if(u.Ro){const t=u.Ro.get(BigInt(this.id));if(t)return t}const i=o.A.model(this.model);if(this.hE&&this.eE)for(let t=0;t<this.hE.length;t++)i.ba(this.hE[t],this.eE[t]);return i.ka(64,768,-50,-10,-50,!0),i.YE=!0,u.Ro?.put(BigInt(this.id),i),i}XE(){const t=u.get(this.KE);this.model=t.model,this.np=t.np,this.hp=t.hp,this.ep=t.ep,this.JE=t.JE,this.QE=t.QE,this.tC=t.tC,this.hE=t.hE,this.eE=t.eE;const i=u.get(this.iC);this.name=i.name,this.members=i.members,this.py=i.py;let s='a';const h=(i.name||'').toLowerCase().charAt(0);'a'!==h&&'e'!==h&&'i'!==h&&'o'!==h&&'u'!==h||(s='an'),this.Yd=`Swap this note at any bank for ${s} ${i.name}.`,this.ua=!0}reset(){this.model=0,this.name=null,this.Yd=null,this.hE=null,this.eE=null,this.np=2e3,this.hp=0,this.ep=0,this.JE=0,this.QE=0,this.tC=0,this.hC=!1,this.eC=-1,this.ua=!1,this.py=1,this.members=!1,this.Qp=null,this.Hp=null,this.nC=-1,this.rC=-1,this.oC=0,this.lC=-1,this.aC=-1,this.cC=0,this.fC=-1,this.uC=-1,this.dC=-1,this.wC=-1,this.yC=-1,this.AC=-1,this.zE=null,this.jE=null,this.iC=-1,this.KE=-1}}},1312:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(6333),e=s(1069),n=s(7018);class r extends h.${static count=0;static Lo=[];static hc=t=>{const i=new e.A(t.read('seq.dat'));this.count=i.Fy;for(let t=0;t<this.count;t++){const s=new r(t).Hg(i);0===s.ul&&(s.ul=1,s.frames=new Int16Array(1),s.frames[0]=-1,s.la=new Int16Array(1),s.la[0]=-1,s.delay=new Int16Array(1),s.delay[0]=-1),this.Lo[t]=s}};ul=0;frames=null;la=null;delay=null;dl=-1;WI=null;HI=!1;priority=5;mC=-1;IC=-1;GI=99;duration=0;decode(t,i){if(1===t){this.ul=i.Hy,this.frames=new Int16Array(this.ul),this.la=new Int16Array(this.ul),this.delay=new Int16Array(this.ul);for(let t=0;t<this.ul;t++)this.frames[t]=i.Fy,this.la[t]=i.Fy,65535===this.la[t]&&(this.la[t]=-1),this.delay[t]=i.Fy,0===this.delay[t]&&(this.delay[t]=n.A.Lo[this.frames[t]].delay),0===this.delay[t]&&(this.delay[t]=1),this.duration+=this.delay[t]}else if(2===t)this.dl=i.Fy;else if(3===t){const t=i.Hy;this.WI=new Int32Array(t+1);for(let s=0;s<t;s++)this.WI[s]=i.Hy;this.WI[t]=9999999}else if(4===t)this.HI=!0;else if(5===t)this.priority=i.Hy;else if(6===t)this.mC=i.Fy;else if(7===t)this.IC=i.Fy;else{if(8!==t)throw new Error(`Unrecognized seq config code: ${t}`);this.GI=i.Hy}}}},8738:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(6333),e=s(1069),n=s(1312),r=s(8665),o=s(2679);class l extends h.${static count=0;static Lo=[];static Ro=new o.A(30);static hc=t=>{const i=new e.A(t.read('spotanim.dat'));this.count=i.Fy;for(let t=0;t<this.count;t++)this.Lo[t]=new l(t).Hg(i)};model=0;ll=-1;OI=null;uE=!1;hE=new Uint16Array(6);eE=new Uint16Array(6);FE=128;UE=128;orientation=0;wE=0;yE=0;decode(t,i){if(1===t)this.model=i.Fy;else if(2===t)this.ll=i.Fy,n.A.Lo&&(this.OI=n.A.Lo[this.ll]);else if(3===t)this.uE=!0;else if(4===t)this.FE=i.Fy;else if(5===t)this.UE=i.Fy;else if(6===t)this.orientation=i.Fy;else if(7===t)this.wE=i.Hy;else if(8===t)this.yE=i.Hy;else if(t>=40&&t<50)this.hE[t-40]=i.Fy;else{if(!(t>=50&&t<60))throw new Error(`Unrecognized spotanim config code: ${t}`);this.eE[t-50]=i.Fy}}oa(){let t=l.Ro?.get(BigInt(this.id));if(t)return t;t=r.A.model(this.model);for(let i=0;i<6;i++)0!==this.hE[0]&&t.ba(this.hE[i],this.eE[i]);return l.Ro?.put(BigInt(this.id),t),t}}},3764:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(6333),e=s(1069);class n extends h.${static count=0;static Lo=[];static _C=[];static gC=0;static hc=t=>{const i=new e.A(t.read('varp.dat'));this.count=i.Fy;for(let t=0;t<this.count;t++)this.Lo[t]=new n(t).Hg(i)};scope=0;type=0;_C=!1;EC=!0;xp=0;CC=0;TC=!1;OC=!1;decode(t,i){if(1===t)this.scope=i.Hy;else if(2===t)this.type=i.Hy;else if(3===t)this._C=!0,n._C[n.gC++]=this.id;else if(4===t)this.EC=!1;else if(5===t)this.xp=i.Fy;else if(6===t)this.TC=!0;else if(7===t)this.CC=i.Vo;else if(8===t)this.OC=!0;else{if(10!==t)throw new Error(`Error unrecognised config code: ${t}`);this.Gg=i.Qy}}}},9456:(t,i,s)=>{s.d(i,{A:()=>h});class h{static OPEN=0;static bC=1;static vC=2;static LC=4;static RC=8;static SC=h.bC<<4;static MC=h.vC<<4;static kC=h.LC<<4;static xC=h.RC<<4;static DC=256;static NC=512;static PC=1024;static FC=2048;static UC=4096;static BC=h.NC<<4;static GC=h.PC<<4;static HC=h.FC<<4;static WC=h.UC<<4;static YC=h.DC<<9;static VC=524288;static KC=2097152;static XC=h.KC|h.VC;static zC=h.DC|h.XC;static nd=h.vC|h.zC;static hd=h.RC|h.zC;static um=h.vC|h.LC|h.hd;static rd=h.MC|h.zC;static wm=h.RC|h.SC|h.rd;static ed=h.xC|h.zC;static dm=h.bC|h.vC|h.ed;static ym=h.MC|h.kC|h.ed;static jC=16777215}},670:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(9456),e=s(6169),n=s(1023),r=s(4909);class o{static kn=4;static Kn=104;static index=(t,i)=>t*o.Kn+i;offsetX;ZC;sizeX;sizeZ;flags;constructor(){this.offsetX=0,this.ZC=0,this.sizeX=o.Kn,this.sizeZ=o.Kn,this.flags=new Int32Array(this.sizeX*this.sizeZ),this.reset()}reset=()=>{for(let t=0;t<this.sizeX;t++)for(let i=0;i<this.sizeZ;i++){const s=o.index(t,i);0===t||0===i||t===this.sizeX-1||i===this.sizeZ-1?this.flags[s]=h.A.jC:this.flags[s]=h.A.OPEN}};qC=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.ZC)]|=h.A.KC};ky=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.ZC)]&=~h.A.KC};gy=(t,i,s,n,r,o)=>{let l=h.A.DC;o&&(l|=h.A.YC);const a=t-this.offsetX,c=i-this.ZC;if(r===e.A.wd||r===e.A.Ad){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.add(t,i,l)};Sy=(t,i,s,n,r,o)=>{let l=h.A.DC;o&&(l|=h.A.YC);const a=t-this.offsetX,c=i-this.ZC;if(r===e.A.wd||r===e.A.Ad){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.remove(t,i,l)};$C=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.ZC,c=o?h.A.WC:h.A.xC,f=o?h.A.UC:h.A.RC,u=o?h.A.PC:h.A.vC,d=o?h.A.GC:h.A.MC,w=o?h.A.NC:h.A.bC,y=o?h.A.BC:h.A.SC,A=o?h.A.FC:h.A.LC,p=o?h.A.HC:h.A.kC;s===n.A.fd.id?r===e.A.dd?(this.add(l,a,c),this.add(l-1,a,f)):r===e.A.wd?(this.add(l,a,u),this.add(l,a+1,d)):r===e.A.yd?(this.add(l,a,f),this.add(l+1,a,c)):r===e.A.Ad&&(this.add(l,a,d),this.add(l,a-1,u)):s===n.A.JC.id||s===n.A.pd.id?r===e.A.dd?(this.add(l,a,w),this.add(l-1,a+1,y)):r===e.A.wd?(this.add(l,a,A),this.add(l+1,a+1,p)):r===e.A.yd?(this.add(l,a,y),this.add(l+1,a-1,w)):r===e.A.Ad&&(this.add(l,a,p),this.add(l-1,a-1,A)):s===n.A.ud.id&&(r===e.A.dd?(this.add(l,a,u|c),this.add(l-1,a,f),this.add(l,a+1,d)):r===e.A.wd?(this.add(l,a,u|f),this.add(l,a+1,d),this.add(l+1,a,c)):r===e.A.yd?(this.add(l,a,d|f),this.add(l+1,a,c),this.add(l,a-1,u)):r===e.A.Ad&&(this.add(l,a,d|c),this.add(l,a-1,u),this.add(l-1,a,f))),o&&this.$C(t,i,s,r,!1)};by=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.ZC,c=o?h.A.WC:h.A.xC,f=o?h.A.UC:h.A.RC,u=o?h.A.PC:h.A.vC,d=o?h.A.GC:h.A.MC,w=o?h.A.NC:h.A.bC,y=o?h.A.BC:h.A.SC,A=o?h.A.FC:h.A.LC,p=o?h.A.HC:h.A.kC;s===n.A.fd.id?r===e.A.dd?(this.remove(l,a,c),this.remove(l-1,a,f)):r===e.A.wd?(this.remove(l,a,u),this.remove(l,a+1,d)):r===e.A.yd?(this.remove(l,a,f),this.remove(l+1,a,c)):r===e.A.Ad&&(this.remove(l,a,d),this.remove(l,a-1,u)):s===n.A.JC.id||s===n.A.pd.id?r===e.A.dd?(this.remove(l,a,w),this.remove(l-1,a+1,y)):r===e.A.wd?(this.remove(l,a,A),this.remove(l+1,a+1,p)):r===e.A.yd?(this.remove(l,a,y),this.remove(l+1,a-1,w)):r===e.A.Ad&&(this.remove(l,a,p),this.remove(l-1,a-1,A)):s===n.A.ud.id&&(r===e.A.dd?(this.remove(l,a,u|c),this.remove(l-1,a,f),this.remove(l,a+1,d)):r===e.A.wd?(this.remove(l,a,u|f),this.remove(l,a+1,d),this.remove(l+1,a,c)):r===e.A.yd?(this.remove(l,a,d|f),this.remove(l+1,a,c),this.remove(l,a-1,u)):r===e.A.Ad&&(this.remove(l,a,d|c),this.remove(l,a-1,u),this.remove(l-1,a,f))),o&&this.by(t,i,s,r,!1)};lm=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.ZC,u=s-this.offsetX,d=r-this.ZC,w=o.index(c,f);if(l===n.A.fd.id){if(a===e.A.dd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.rd)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.nd)===h.A.OPEN)return!0}else if(a===e.A.wd){if(c===u&&f===d+1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.hd)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.ed)===h.A.OPEN)return!0}else if(a===e.A.yd){if(c===u+1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.rd)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.nd)===h.A.OPEN)return!0}else if(a===e.A.Ad){if(c===u&&f===d-1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.hd)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.ed)===h.A.OPEN)return!0}}else if(l===n.A.ud.id){if(a===e.A.dd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.ed)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.nd)===h.A.OPEN)return!0}else if(a===e.A.wd){if(c===u-1&&f===d&&(this.flags[w]&h.A.hd)===h.A.OPEN)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.nd)===h.A.OPEN)return!0}else if(a===e.A.yd){if(c===u-1&&f===d&&(this.flags[w]&h.A.hd)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.rd)===h.A.OPEN)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1)return!0}else if(a===e.A.Ad){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.rd)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.ed)===h.A.OPEN)return!0;if(c===u&&f===d-1)return!0}}else if(l===n.A.Id.id){if(c===u&&f===d+1&&(this.flags[w]&h.A.MC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.vC)===h.A.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.RC)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.xC)===h.A.OPEN)return!0}return!1};am=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.ZC,u=s-this.offsetX,d=r-this.ZC,w=o.index(c,f);if(l===n.A.QC.id||l===n.A.tT.id){if(l===n.A.tT.id&&(a=a+2&3),a===e.A.dd){if(c===u+1&&f===d&&(this.flags[w]&h.A.xC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.vC)===h.A.OPEN)return!0}else if(a===e.A.wd){if(c===u-1&&f===d&&(this.flags[w]&h.A.RC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.vC)===h.A.OPEN)return!0}else if(a===e.A.yd){if(c===u-1&&f===d&&(this.flags[w]&h.A.RC)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.MC)===h.A.OPEN)return!0}else if(a===e.A.Ad){if(c===u+1&&f===d&&(this.flags[w]&h.A.xC)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.MC)===h.A.OPEN)return!0}}else if(l===n.A.iT.id){if(c===u&&f===d+1&&(this.flags[w]&h.A.MC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.vC)===h.A.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.RC)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.xC)===h.A.OPEN)return!0}return!1};fm=(t,i,s,e,n,l,a)=>{const c=s+n-1,f=e+l-1,u=o.index(t-this.offsetX,i-this.ZC);return t>=s&&t<=c&&i>=e&&i<=f||(t===s-1&&i>=e&&i<=f&&(this.flags[u]&h.A.RC)===h.A.OPEN&&(a&r.A.dd)===h.A.OPEN||(t===c+1&&i>=e&&i<=f&&(this.flags[u]&h.A.xC)===h.A.OPEN&&(a&r.A.yd)===h.A.OPEN||(i===e-1&&t>=s&&t<=c&&(this.flags[u]&h.A.vC)===h.A.OPEN&&(a&r.A.Ad)===h.A.OPEN||i===f+1&&t>=s&&t<=c&&(this.flags[u]&h.A.MC)===h.A.OPEN&&(a&r.A.wd)===h.A.OPEN)))};add=(t,i,s)=>{this.flags[o.index(t,i)]|=s};remove=(t,i,s)=>{this.flags[o.index(t,i)]&=h.A.jC-s}}},4909:(t,i,s)=>{s.d(i,{A:()=>h});class h{static wd=1;static yd=2;static Ad=4;static dd=8}},6169:(t,i,s)=>{s.d(i,{A:()=>h});class h{static dd=0;static wd=1;static yd=2;static Ad=3}},5599:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Ey=0;static Cy=1;static Oy=2;static Zw=3}},1023:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(5599);class e{static fd=new e(0,h.A.Ey);static JC=new e(1,h.A.Ey);static ud=new e(2,h.A.Ey);static pd=new e(3,h.A.Ey);static RI=new e(4,h.A.Cy);static om=new e(5,h.A.Cy);static QC=new e(6,h.A.Cy);static tT=new e(7,h.A.Cy);static iT=new e(8,h.A.Cy);static Id=new e(9,h.A.Oy);static zw=new e(10,h.A.Oy);static jw=new e(11,h.A.Oy);static sT=new e(12,h.A.Oy);static hT=new e(13,h.A.Oy);static eT=new e(14,h.A.Oy);static nT=new e(15,h.A.Oy);static rT=new e(16,h.A.Oy);static oT=new e(17,h.A.Oy);static lT=new e(18,h.A.Oy);static aT=new e(19,h.A.Oy);static cT=new e(20,h.A.Oy);static fT=new e(21,h.A.Oy);static Zw=new e(22,h.A.Zw);static values(){return[this.fd,this.JC,this.oT,this.nT,this.ud,this.eT,this.Id,this.pd,this.Zw,this.sT,this.jw,this.QC,this.cT,this.zw,this.om,this.hT,this.tT,this.RI,this.rT,this.iT,this.aT,this.fT,this.lT]}static of(t){const i=this.values();for(let s=0;s<i.length;s++){const h=i[s];if(h.id===t)return h}throw Error('shape not found')}id;Ed;constructor(t,i){this.id=t,this.Ed=i}}},818:(t,i,s)=>{s.d(i,{A:()=>A});var h=s(670),e=s(2164),n=s(1069),r=s(4583),o=s(3045),l=s(5637),a=s(4197),c=s(1312),f=s(1023),u=s(6169),d=s(9298),w=s(5518),y=s(3867);class A{static uT=Int8Array.of(1,2,4,8);static dT=Uint8Array.of(16,32,64,128);static wT=Int8Array.of(1,0,-1,0);static yT=Int8Array.of(0,-1,0,1);static AT=(17*Math.random()|0)-8;static pT=(33*Math.random()|0)-16;static st=!0;static gp=0;static mT=!1;static IT=(t,i)=>{let s=this._T(t+45365,i+91923,4)+(this._T(t+10294,i+37821,2)-128>>1)+(this._T(t,i,1)-128>>2)-128;return s=35+(.3*s|0),s<10?s=10:s>60&&(s=60),s};static _T=(t,i,s)=>{const h=t/s|0,e=t&s-1,n=i/s|0,r=i&s-1,o=this.gT(h,n),l=this.gT(h+1,n),a=this.gT(h,n+1),c=this.gT(h+1,n+1),f=this.ET(o,l,e,s),u=this.ET(a,c,e,s);return this.ET(f,u,r,s)};static ET=(t,i,s,h)=>{const e=65536-r.A.cos[1024*s/h|0]>>1;return(t*(65536-e)>>16)+(i*e>>16)};static gT=(t,i)=>((this.CT(t-1,i-1)+this.CT(t+1,i-1)+this.CT(t-1,i+1)+this.CT(t+1,i+1))/16|0)+((this.CT(t-1,i)+this.CT(t+1,i)+this.CT(t,i-1)+this.CT(t,i+1))/8|0)+(this.CT(t,i)/4|0);static CT=(t,i)=>{const s=t+57*i,h=BigInt(s<<13^s);return 255&Number((h*(h*h*15731n+789221n)+1376312589n&0x7fffffffn)>>19n)};static gy=(t,i,s,h,e,n,r,o,d,w,y)=>{const p=e[y][i][s],m=e[y][i+1][s],I=e[y][i+1][s+1],_=e[y][i][s+1],g=p+m+I+_>>2,E=l.A.get(o);let C=i+(s<<7)+(o<<14)+1073741824|0;E.active||(C+=-2147483648),C|=0;const T=(w<<6)+d<<24>>24;if(d===f.A.Zw.id)h?.TT(E.oa(f.A.Zw.id,w,p,m,I,_,-1),t,i,s,g,C,T),E.vy&&E.active&&r?.qC(i,s),-1!==E.ll&&n.KI(new a.A(o,t,3,i,s,c.A.Lo[E.ll],!0));else if(d===f.A.zw.id||d===f.A.jw.id){const e=E.oa(f.A.zw.id,w,p,m,I,_,-1);if(e){let n,r,o=0;d===f.A.jw.id&&(o+=256),w===u.A.wd||w===u.A.Ad?(n=E.length,r=E.width):(n=E.width,r=E.length),h?.gy(t,i,s,g,e,null,C,T,n,r,o)}E.vy&&r?.gy(i,s,E.width,E.length,w,E.Ly),-1!==E.ll&&n.KI(new a.A(o,t,2,i,s,c.A.Lo[E.ll],!0))}else if(d>=f.A.sT.id)h?.gy(t,i,s,g,E.oa(d,w,p,m,I,_,-1),null,C,T,1,1,0),E.vy&&r?.gy(i,s,E.width,E.length,w,E.Ly),-1!==E.ll&&n.KI(new a.A(o,t,2,i,s,c.A.Lo[E.ll],!0));else if(d===f.A.fd.id)h?.$C(t,i,s,g,A.uT[w],0,E.oa(f.A.fd.id,w,p,m,I,_,-1),null,C,T),E.vy&&r?.$C(i,s,d,w,E.Ly),-1!==E.ll&&n.KI(new a.A(o,t,0,i,s,c.A.Lo[E.ll],!0));else if(d===f.A.JC.id)h?.$C(t,i,s,g,A.dT[w],0,E.oa(f.A.JC.id,w,p,m,I,_,-1),null,C,T),E.vy&&r?.$C(i,s,d,w,E.Ly),-1!==E.ll&&n.KI(new a.A(o,t,0,i,s,c.A.Lo[E.ll],!0));else if(d===f.A.ud.id){const e=w+1&3;h?.$C(t,i,s,g,A.uT[w],A.uT[e],E.oa(f.A.ud.id,w+4,p,m,I,_,-1),E.oa(f.A.ud.id,e,p,m,I,_,-1),C,T),E.vy&&r?.$C(i,s,d,w,E.Ly),-1!==E.ll&&n.KI(new a.A(o,t,0,i,s,c.A.Lo[E.ll],!0))}else if(d===f.A.pd.id)h?.$C(t,i,s,g,A.dT[w],0,E.oa(f.A.pd.id,w,p,m,I,_,-1),null,C,T),E.vy&&r?.$C(i,s,d,w,E.Ly),-1!==E.ll&&n.KI(new a.A(o,t,0,i,s,c.A.Lo[E.ll],!0));else if(d===f.A.Id.id)h?.gy(t,i,s,g,E.oa(d,w,p,m,I,_,-1),null,C,T,1,1,0),E.vy&&r?.gy(i,s,E.width,E.length,w,E.Ly),-1!==E.ll&&n.KI(new a.A(o,t,2,i,s,c.A.Lo[E.ll],!0));else if(d===f.A.RI.id)h?.OT(t,i,s,g,0,0,C,E.oa(f.A.RI.id,u.A.dd,p,m,I,_,-1),T,512*w,A.uT[w]),-1!==E.ll&&n.KI(new a.A(o,t,1,i,s,c.A.Lo[E.ll],!0));else if(d===f.A.om.id){let e=16;if(h){const n=h.od(t,i,s);n>0&&(e=l.A.get(n>>14&32767).dE)}h?.OT(t,i,s,g,A.wT[w]*e,A.yT[w]*e,C,E.oa(f.A.RI.id,u.A.dd,p,m,I,_,-1),T,512*w,A.uT[w]),-1!==E.ll&&n.KI(new a.A(o,t,1,i,s,c.A.Lo[E.ll],!0))}else d===f.A.QC.id?(h?.OT(t,i,s,g,0,0,C,E.oa(f.A.RI.id,u.A.dd,p,m,I,_,-1),T,w,256),-1!==E.ll&&n.KI(new a.A(o,t,1,i,s,c.A.Lo[E.ll],!0))):d===f.A.tT.id?(h?.OT(t,i,s,g,0,0,C,E.oa(f.A.RI.id,u.A.dd,p,m,I,_,-1),T,w,512),-1!==E.ll&&n.KI(new a.A(o,t,1,i,s,c.A.Lo[E.ll],!0))):d===f.A.iT.id&&(h?.OT(t,i,s,g,0,0,C,E.oa(f.A.RI.id,u.A.dd,p,m,I,_,-1),T,w,768),-1!==E.ll&&n.KI(new a.A(o,t,1,i,s,c.A.Lo[E.ll],!0)))};II;_I;Hn;Wn;bT;vT;LT;RT;ST;MT;kT;xT;DT;NT;PT;FT;constructor(t,i,s,e){this.II=t,this._I=i,this.Hn=s,this.Wn=e,this.bT=new y.Za(h.A.kn,t,i),this.vT=new y.Za(h.A.kn,t,i),this.LT=new y.Za(h.A.kn,t,i),this.RT=new y.Za(h.A.kn,t,i),this.FT=new y.qa(h.A.kn,t+1,i+1),this.ST=new y.Za(h.A.kn,t+1,i+1),this.MT=new y.Vn(t+1,i+1),this.kT=new Int32Array(i),this.xT=new Int32Array(i),this.DT=new Int32Array(i),this.NT=new Int32Array(i),this.PT=new Int32Array(i)}Lp=(t,i)=>{for(let t=0;t<h.A.kn;t++)for(let s=0;s<h.A.Kn;s++)for(let e=0;e<h.A.Kn;e++)if(!(1&~this.Wn[t][s][e])){let h=t;2&~this.Wn[1][s][e]||h--,h>=0&&i[h]?.qC(s,e)}A.AT+=(5*Math.random()|0)-2,A.AT<-8?A.AT=-8:A.AT>8&&(A.AT=8),A.pT+=(5*Math.random()|0)-2,A.pT<-16?A.pT=-16:A.pT>16&&(A.pT=16);for(let i=0;i<h.A.kn;i++){const s=this.ST[i],h=96,n=-50,o=-10,l=-50,a=768*(0|Math.sqrt(n*n+o*o+l*l))>>8;for(let t=1;t<this._I-1;t++)for(let e=1;e<this.II-1;e++){const r=this.Hn[i][e+1][t]-this.Hn[i][e-1][t],c=this.Hn[i][e][t+1]-this.Hn[i][e][t-1],f=0|Math.sqrt(r*r+c*c+65536),u=h+((n*((r<<8)/f|0)+o*(65536/f|0)+l*((c<<8)/f|0))/a|0),d=(s[e-1][t]>>2)+(s[e+1][t]>>3)+(s[e][t-1]>>2)+(s[e][t+1]>>3)+(s[e][t]>>1);this.MT[e][t]=u-d}for(let t=0;t<this._I;t++)this.kT[t]=0,this.xT[t]=0,this.DT[t]=0,this.NT[t]=0,this.PT[t]=0;for(let s=-5;s<this.II+5;s++){for(let t=0;t<this._I;t++){const h=s+5;let n;if(h>=0&&h<this.II){const s=255&this.bT[i][h][t];if(s>0){const i=e.A.Lo[s-1];this.kT[t]+=i.Jg,this.xT[t]+=i.Zg,this.DT[t]+=i.qg,this.NT[t]+=i.$g,n=this.PT[t]++}}const r=s-5;if(r>=0&&r<this.II){const s=255&this.bT[i][r][t];if(s>0){const i=e.A.Lo[s-1];this.kT[t]-=i.Jg,this.xT[t]-=i.Zg,this.DT[t]-=i.qg,this.NT[t]-=i.$g,n=this.PT[t]--}}}if(s>=1&&s<this.II-1){let h=0,n=0,o=0,l=0,a=0;for(let c=-5;c<this._I+5;c++){const f=c+5;f>=0&&f<this._I&&(h+=this.kT[f],n+=this.xT[f],o+=this.DT[f],l+=this.NT[f],a+=this.PT[f]);const y=c-5;if(y>=0&&y<this._I&&(h-=this.kT[y],n-=this.xT[y],o-=this.DT[y],l-=this.NT[y],a-=this.PT[y]),c>=1&&c<this._I-1&&(!A.st||!(16&this.Wn[i][s][c])&&this.UT(i,s,c)===A.gp)){const f=255&this.bT[i][s][c],y=255&this.vT[i][s][c];if(f>0||y>0){const p=this.Hn[i][s][c],m=this.Hn[i][s+1][c],I=this.Hn[i][s+1][c+1],_=this.Hn[i][s][c+1],g=this.MT[s][c],E=this.MT[s+1][c],C=this.MT[s+1][c+1],T=this.MT[s][c+1];let O=-1,b=-1;if(f>0){const t=256*h/l|0,i=n/a|0;let s=o/a|0;O=e.A.Wg(t,i,s);const r=t+A.AT&255;s+=A.pT,s<0?s=0:s>255&&(s=255),b=e.A.Wg(r,i,s)}if(i>0){let t=0!==f||this.LT[i][s][c]===w.A.BT;y>0&&!e.A.Lo[y-1].zg&&(t=!1),t&&p===m&&p===I&&p===_&&(this.FT[i][s][c]|=2340)}let v=0;if(-1!==O&&(v=r.A.palette[e.A.Yg(b,96)]),0===y)t?.GT(i,s,c,w.A.BT,u.A.dd,-1,p,m,I,_,e.A.Yg(O,g),e.A.Yg(O,E),e.A.Yg(O,C),e.A.Yg(O,T),d.A.Ul,d.A.Ul,d.A.Ul,d.A.Ul,v,d.A.Ul);else{const h=this.LT[i][s][c]+1,n=this.RT[i][s][c],o=e.A.Lo[y-1];let l,a,f=o.texture;f>=0?(a=r.A.HT(f),l=-1):o.Kg===d.A.bc?(a=0,l=-2,f=-1):(l=e.A.Wg(o.jg,o.Zg,o.qg),a=r.A.palette[e.A.Vg(o.Qg,96)]),t?.GT(i,s,c,h,n,f,p,m,I,_,e.A.Yg(O,g),e.A.Yg(O,E),e.A.Yg(O,C),e.A.Yg(O,T),e.A.Vg(l,g),e.A.Vg(l,E),e.A.Vg(l,C),e.A.Vg(l,T),v,a)}}}}}}for(let s=1;s<this._I-1;s++)for(let h=1;h<this.II-1;h++)t?.WT(i,h,s,this.UT(i,h,s))}A.mT||t?.YT(64,768,-50,-10,-50);for(let i=0;i<this.II;i++)for(let s=0;s<this._I;s++)2&~this.Wn[1][i][s]||t?.VT(i,s);if(!A.mT){let t=1,i=2,s=4;for(let e=0;e<h.A.kn;e++){e>0&&(t<<=3,i<<=3,s<<=3);for(let h=0;h<=e;h++)for(let n=0;n<=this._I;n++)for(let r=0;r<=this.II;r++){if(this.FT[h][r][n]&t){let i=n,s=n,l=h,a=h;for(;i>0&&this.FT[h][r][i-1]&t;)i--;for(;s<this._I&&this.FT[h][r][s+1]&t;)s++;t:for(;l>0;){for(let h=i;h<=s;h++)if(!(this.FT[l-1][r][h]&t))break t;l--}t:for(;a<e;){for(let h=i;h<=s;h++)if(!(this.FT[a+1][r][h]&t))break t;a++}if((a+1-l)*(s+1-i)>=8){const h=this.Hn[a][r][i]-240,n=this.Hn[l][r][i];o.A.KT(e,1,128*r,h,128*i,128*r,n,128*s+128);for(let h=l;h<=a;h++)for(let e=i;e<=s;e++)this.FT[h][r][e]&=~t}}if(this.FT[h][r][n]&i){let t=r,s=r,l=h,a=h;for(;t>0&&this.FT[h][t-1][n]&i;)t--;for(;s<this.II&&this.FT[h][s+1][n]&i;)s++;t:for(;l>0;){for(let h=t;h<=s;h++)if(!(this.FT[l-1][h][n]&i))break t;l--}t:for(;a<e;){for(let h=t;h<=s;h++)if(!(this.FT[a+1][h][n]&i))break t;a++}if((a+1-l)*(s+1-t)>=8){const h=this.Hn[a][t][n]-240,r=this.Hn[l][t][n];o.A.KT(e,2,128*t,h,128*n,128*s+128,r,128*n);for(let h=l;h<=a;h++)for(let e=t;e<=s;e++)this.FT[h][e][n]&=~i}}if(this.FT[h][r][n]&s){let t=r,i=r,l=n,a=n;for(;l>0&&this.FT[h][r][l-1]&s;)l--;for(;a<this._I&&this.FT[h][r][a+1]&s;)a++;t:for(;t>0;){for(let i=l;i<=a;i++)if(!(this.FT[h][t-1][i]&s))break t;t--}t:for(;i<this.II;){for(let t=l;t<=a;t++)if(!(this.FT[h][i+1][t]&s))break t;i++}if((i+1-t)*(a+1-l)>=4){const n=this.Hn[h][t][l];o.A.KT(e,4,128*t,n,128*l,128*i+128,n,128*a+128);for(let e=t;e<=i;e++)for(let t=l;t<=a;t++)this.FT[h][e][t]&=~s}}}}}};bp=(t,i,s,n)=>{let r=0;for(let t=0;t<e.A.count;t++)if('water'===e.A.Lo[t].Gg?.toLowerCase()){r=t+1<<24>>24;break}for(let e=t;e<t+s;e++)for(let t=i;t<i+n;t++)if(t>=0&&t<this.II&&e>=0&&e<this._I){this.vT[0][t][e]=r;for(let i=0;i<h.A.kn;i++)this.Hn[i][t][e]=0,this.Wn[i][t][e]=0}};Op=(t,i,s,e,r)=>{const o=new n.A(new Uint8Array(r));for(let n=0;n<h.A.kn;n++)for(let r=0;r<64;r++)for(let l=0;l<64;l++){const a=r+s,c=l+e;let f;if(a>=0&&a<h.A.Kn&&c>=0&&c<h.A.Kn)for(this.Wn[n][a][c]=0;;){if(f=o.Hy,0===f){0===n?this.Hn[0][a][c]=8*-A.IT(a+t+932731,c+556238+i):this.Hn[n][a][c]=this.Hn[n-1][a][c]-240;break}if(1===f){let t=o.Hy;1===t&&(t=0),0===n?this.Hn[0][a][c]=8*-t:this.Hn[n][a][c]=this.Hn[n-1][a][c]-8*t;break}f<=49?(this.vT[n][a][c]=o.By,this.LT[n][a][c]=(f-2)/4<<24>>24,this.RT[n][a][c]=(f-2&3)<<24>>24):f<=81?this.Wn[n][a][c]=f-49<<24>>24:this.bT[n][a][c]=f-81<<24>>24}else for(;f=o.Hy,0!==f;){if(1===f){o.Hy;break}f<=49&&o.Hy}}};vp=(t,i,s,e,r,o)=>{const l=new n.A(new Uint8Array(e));let a=-1;for(;;){const e=l.XT;if(0===e)return;a+=e;let n=0;for(;;){const e=l.XT;if(0===e)break;n+=e-1;const c=63&n,f=n>>6&63,u=n>>12,d=l.Hy,w=d>>2,y=3&d,A=f+r,p=c+o;if(A>0&&p>0&&A<h.A.Kn-1&&p<h.A.Kn-1){let h=u;2&~this.Wn[1][A][p]||(h=u-1);let e=null;h>=0&&(e=s[h]),this.gy(u,A,p,t,i,e,a,w,y)}}}};gy=(t,i,s,h,e,n,r,o,d)=>{if(A.st){if(16&this.Wn[t][i][s])return;if(this.UT(t,i,s)!==A.gp)return}const w=this.Hn[t][i][s],y=this.Hn[t][i+1][s],p=this.Hn[t][i+1][s+1],m=this.Hn[t][i][s+1],I=w+y+p+m>>2,_=l.A.get(r);let g=i+(s<<7)+(r<<14)+1073741824|0;_.active||(g+=-2147483648),g|=0;const E=(d<<6)+o<<24>>24;if(o===f.A.Zw.id)(!A.st||_.active||_.TE)&&(h?.TT(_.oa(f.A.Zw.id,d,w,y,p,m,-1),t,i,s,I,g,E),_.vy&&_.active&&n?.qC(i,s),-1!==_.ll&&e.KI(new a.A(r,t,3,i,s,c.A.Lo[_.ll],!0)));else if(o===f.A.zw.id||o===f.A.jw.id){const l=_.oa(f.A.zw.id,d,w,y,p,m,-1);if(l){let e,n,r=0;if(o===f.A.jw.id&&(r+=256),d===u.A.wd||d===u.A.Ad?(e=_.length,n=_.width):(e=_.width,n=_.length),h?.gy(t,i,s,I,l,null,g,E,e,n,r)&&_.pE)for(let h=0;h<=e;h++)for(let e=0;e<=n;e++){let n=l.zT/4|0;n>30&&(n=30),n>this.ST[t][i+h][s+e]&&(this.ST[t][i+h][s+e]=n<<24>>24)}}_.vy&&n?.gy(i,s,_.width,_.length,d,_.Ly),-1!==_.ll&&e.KI(new a.A(r,t,2,i,s,c.A.Lo[_.ll],!0))}else if(o>=f.A.sT.id)h?.gy(t,i,s,I,_.oa(o,d,w,y,p,m,-1),null,g,E,1,1,0),o>=f.A.sT.id&&o<=f.A.oT.id&&o!==f.A.hT.id&&t>0&&(this.FT[t][i][s]|=2340),_.vy&&n?.gy(i,s,_.width,_.length,d,_.Ly),-1!==_.ll&&e.KI(new a.A(r,t,2,i,s,c.A.Lo[_.ll],!0));else if(o===f.A.fd.id)h?.$C(t,i,s,I,A.uT[d],0,_.oa(f.A.fd.id,d,w,y,p,m,-1),null,g,E),d===u.A.dd?(_.pE&&(this.ST[t][i][s]=50,this.ST[t][i][s+1]=50),_.zg&&(this.FT[t][i][s]|=585)):d===u.A.wd?(_.pE&&(this.ST[t][i][s+1]=50,this.ST[t][i+1][s+1]=50),_.zg&&(this.FT[t][i][s+1]|=1170)):d===u.A.yd?(_.pE&&(this.ST[t][i+1][s]=50,this.ST[t][i+1][s+1]=50),_.zg&&(this.FT[t][i+1][s]|=585)):d===u.A.Ad&&(_.pE&&(this.ST[t][i][s]=50,this.ST[t][i+1][s]=50),_.zg&&(this.FT[t][i][s]|=1170)),_.vy&&n?.$C(i,s,o,d,_.Ly),-1!==_.ll&&e.KI(new a.A(r,t,0,i,s,c.A.Lo[_.ll],!0)),16!==_.dE&&h?.jT(t,i,s,_.dE);else if(o===f.A.JC.id)h?.$C(t,i,s,I,A.dT[d],0,_.oa(f.A.JC.id,d,w,y,p,m,-1),null,g,E),_.pE&&(d===u.A.dd?this.ST[t][i][s+1]=50:d===u.A.wd?this.ST[t][i+1][s+1]=50:d===u.A.yd?this.ST[t][i+1][s]=50:d===u.A.Ad&&(this.ST[t][i][s]=50)),_.vy&&n?.$C(i,s,o,d,_.Ly),-1!==_.ll&&e.KI(new a.A(r,t,0,i,s,c.A.Lo[_.ll],!0));else if(o===f.A.ud.id){const l=d+1&3;h?.$C(t,i,s,I,A.uT[d],A.uT[l],_.oa(f.A.ud.id,d+4,w,y,p,m,-1),_.oa(f.A.ud.id,l,w,y,p,m,-1),g,E),_.zg&&(d===u.A.dd?(this.FT[t][i][s]|=265,this.FT[t][i][s+1]|=1170):d===u.A.wd?(this.FT[t][i][s+1]|=1170,this.FT[t][i+1][s]|=585):d===u.A.yd?(this.FT[t][i+1][s]|=585,this.FT[t][i][s]|=1170):d===u.A.Ad&&(this.FT[t][i][s]|=1170,this.FT[t][i][s]|=585)),_.vy&&n?.$C(i,s,o,d,_.Ly),-1!==_.ll&&e.KI(new a.A(r,t,0,i,s,c.A.Lo[_.ll],!0)),16!==_.dE&&h?.jT(t,i,s,_.dE)}else if(o===f.A.pd.id)h?.$C(t,i,s,I,A.dT[d],0,_.oa(f.A.pd.id,d,w,y,p,m,-1),null,g,E),_.pE&&(d===u.A.dd?this.ST[t][i][s+1]=50:d===u.A.wd?this.ST[t][i+1][s+1]=50:d===u.A.yd?this.ST[t][i+1][s]=50:d===u.A.Ad&&(this.ST[t][i][s]=50)),_.vy&&n?.$C(i,s,o,d,_.Ly),-1!==_.ll&&e.KI(new a.A(r,t,0,i,s,c.A.Lo[_.ll],!0));else if(o===f.A.Id.id)h?.gy(t,i,s,I,_.oa(o,d,w,y,p,m,-1),null,g,E,1,1,0),_.vy&&n?.gy(i,s,_.width,_.length,d,_.Ly),-1!==_.ll&&e.KI(new a.A(r,t,2,i,s,c.A.Lo[_.ll],!0));else if(o===f.A.RI.id)h?.OT(t,i,s,I,0,0,g,_.oa(f.A.RI.id,u.A.dd,w,y,p,m,-1),E,512*d,A.uT[d]),-1!==_.ll&&e.KI(new a.A(r,t,1,i,s,c.A.Lo[_.ll],!0));else if(o===f.A.om.id){let n=16;if(h){const e=h.od(t,i,s);e>0&&(n=l.A.get(e>>14&32767).dE)}h?.OT(t,i,s,I,A.wT[d]*n,A.yT[d]*n,g,_.oa(f.A.RI.id,u.A.dd,w,y,p,m,-1),E,512*d,A.uT[d]),-1!==_.ll&&e.KI(new a.A(r,t,1,i,s,c.A.Lo[_.ll],!0))}else o===f.A.QC.id?(h?.OT(t,i,s,I,0,0,g,_.oa(f.A.RI.id,u.A.dd,w,y,p,m,-1),E,d,256),-1!==_.ll&&e.KI(new a.A(r,t,1,i,s,c.A.Lo[_.ll],!0))):o===f.A.tT.id?(h?.OT(t,i,s,I,0,0,g,_.oa(f.A.RI.id,u.A.dd,w,y,p,m,-1),E,d,512),-1!==_.ll&&e.KI(new a.A(r,t,1,i,s,c.A.Lo[_.ll],!0))):o===f.A.iT.id&&(h?.OT(t,i,s,I,0,0,g,_.oa(f.A.RI.id,u.A.dd,w,y,p,m,-1),E,d,768),-1!==_.ll&&e.KI(new a.A(r,t,1,i,s,c.A.Lo[_.ll],!0)))};UT=(t,i,s)=>8&this.Wn[t][i][s]?0:t<=0||!(2&this.Wn[1][i][s])?t:t-1}},3045:(t,i,s)=>{s.d(i,{A:()=>I});var h=s(4583),e=s(1161),n=s(3795),r=s(8256),o=s(670),l=s(9222),a=s(6855),c=s(7441),f=s(6666),u=s(5748),d=s(3479),w=s(8950),y=s(2771),A=s(5518),p=s(6169),m=s(3867);class I{static ZT=new m.qT(8,32,51,51,!1);static $T=new m.us(100,null);static xu=new Int32Array(o.A.kn);static JT=new m.QT(o.A.kn,500,null);static tO=new m.us(500,null);static iO=new f.A;static Wf=0;static sO=0;static hO=0;static eO=0;static nO=0;static rO=0;static oO=0;static lO=0;static aO=0;static cO=0;static fO=0;static uO=0;static dO=0;static wO=0;static yO=0;static AO=0;static pO=0;static mO=0;static IO=0;static _O=0;static Du=0;static gO=0;static EO=!1;static CO=null;static TO=Uint8Array.of(19,55,38,155,255,110,137,205,76);static OO=Uint8Array.of(160,192,80,96,0,144,80,48,160);static bO=Uint8Array.of(76,8,137,4,0,1,38,2,19);static vO=Int8Array.of(0,0,2,0,0,2,1,1,0);static LO=Int8Array.of(2,0,0,2,0,0,0,4,4);static RO=Int8Array.of(0,4,4,8,0,0,8,0,0);static SO=Int8Array.of(1,1,0,0,0,8,0,0,8);static MO=Int8Array.of(53,-53,-53,53);static kO=Int8Array.of(-53,-53,53,53);static xO=Int8Array.of(-45,45,45,-45);static DO=Int8Array.of(45,45,-45,-45);static NO=[new Int8Array(16),Int8Array.of(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),Int8Array.of(1,0,0,0,1,1,0,0,1,1,1,0,1,1,1,1),Int8Array.of(1,1,0,0,1,1,0,0,1,0,0,0,1,0,0,0),Int8Array.of(0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,1),Int8Array.of(0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1),Int8Array.of(1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1),Int8Array.of(1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0),Int8Array.of(0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0),Int8Array.of(1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,1),Int8Array.of(1,1,1,1,1,1,0,0,1,0,0,0,1,0,0,0),Int8Array.of(0,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1),Int8Array.of(0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1)];static PO=[Int8Array.of(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15),Int8Array.of(12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3),Int8Array.of(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0),Int8Array.of(3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12)];static FO=Int32Array.of(41,39248,41,4643,41,41,41,41,41,41,41,41,41,41,41,43086,41,41,41,41,41,41,41,8602,41,28992,41,41,41,41,41,5056,41,41,41,41,41,41,41,41,41,41,41,41,41,41,3131,41,41,41);static Nu=0;static kl=0;static xl=0;static cf=-1;static ff=-1;static st=!0;static init=(t,i,s,e,n)=>{this.sO=0,this.hO=0,this.eO=t,this.nO=i,this.rO=t/2|0,this.oO=i/2|0;const r=new m.qT(9,32,53,53,!1);for(let t=128;t<=384;t+=32)for(let i=0;i<2048;i+=64){this.lO=h.A.sin[t],this.aO=h.A.cos[t],this.cO=h.A.sin[i],this.fO=h.A.cos[i];const o=(t-128)/32|0,l=i/64|0;for(let t=-26;t<=26;t++)for(let i=-26;i<=26;i++){const h=128*t,a=128*i;let c=!1;for(let t=-s;t<=e;t+=128)if(this.UO(h,a,n[o]+t)){c=!0;break}r[o][l][t+25+1][i+25+1]=c}}for(let t=0;t<8;t++)for(let i=0;i<32;i++)for(let s=-25;s<25;s++)for(let h=-25;h<25;h++){let e=!1;t:for(let n=-1;n<=1;n++)for(let o=-1;o<=1;o++){if(r[t][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}}this.ZT[t][i][s+25][h+25]=e}};static Oo=()=>{this.$T=null,this.xu=null,this.JT=null,this.iO=null,this.ZT=null,this.tO=null,this.CO=null,console.log('World3D unloaded!')};static KT=(t,i,s,h,e,n,o,l)=>{I.JT[t][I.xu[t]++]=new r.A(s/128|0,n/128|0,e/128|0,l/128|0,i,s,n,e,l,h,o)};static UO=(t,i,s)=>{const h=i*this.cO+t*this.fO>>16,e=i*this.fO-t*this.cO>>16,n=s*this.lO+e*this.aO>>16,r=s*this.aO-e*this.lO>>16;if(n<50||n>3500)return!1;const o=this.rO+((h<<9)/n|0),l=this.oO+((r<<9)/n|0);return o>=this.sO&&o<=this.eO&&l>=this.hO&&l<=this.nO};BO;II;_I;GO;HO;_r;WO;YO;VO;KO=0;XO=0;zO=0;constructor(t,i,s,h){this.BO=s,this.II=h,this._I=i,this.HO=new m.Er(s,h,i,null),this.WO=new m.qa(s,h+1,i+1),this.GO=t,this._r=new m.us(5e3,null),this.YO=new Int32Array(1e4),this.VO=new Int32Array(1e4),this.reset()}reset=()=>{for(let t=0;t<this.BO;t++)for(let i=0;i<this.II;i++)for(let s=0;s<this._I;s++)this.HO[t][i][s]=null;for(let t=0;t<o.A.kn;t++){for(let i=0;i<I.xu[t];i++)I.JT[t][i]=null;I.xu[t]=0}for(let t=0;t<this.KO;t++)this._r[t]=null;this.KO=0,I.$T.fill(null)};Tp=t=>{this.XO=t;for(let i=0;i<this.II;i++)for(let s=0;s<this._I;s++)this.HO[t][i][s]=new n.A(t,i,s)};VT=(t,i)=>{const s=this.HO[0][t][i];for(let s=0;s<3;s++){this.HO[s][t][i]=this.HO[s+1][t][i];const h=this.HO[s][t][i];h&&h.level--}this.HO[0][t][i]||(this.HO[0][t][i]=new n.A(0,t,i));const h=this.HO[0][t][i];h&&(h.jO=s),this.HO[3][t][i]=null};WT=(t,i,s,h)=>{const e=this.HO[t][i][s];e&&(e.ZO=h)};GT=(t,i,s,h,e,r,o,l,a,c,f,u,w,p,m,I,_,g,E,C)=>{if(h===A.A.BT){for(let h=t;h>=0;h--)this.HO[h][i][s]||(this.HO[h][i][s]=new n.A(h,i,s));const h=this.HO[t][i][s];h&&(h.qO=new d.A(f,u,w,p,-1,E,!1))}else if(h===A.A.$O){for(let h=t;h>=0;h--)this.HO[h][i][s]||(this.HO[h][i][s]=new n.A(h,i,s));const h=this.HO[t][i][s];h&&(h.qO=new d.A(m,I,_,g,r,C,o===l&&o===a&&o===c))}else{for(let h=t;h>=0;h--)this.HO[h][i][s]||(this.HO[h][i][s]=new n.A(h,i,s));const d=this.HO[t][i][s];d&&(d.JO=new y.A(i,h,I,l,w,e,f,c,C,m,r,g,E,a,_,p,o,s,u))}};TT=(t,i,s,h,e,r,o)=>{this.HO[i][s][h]||(this.HO[i][s][h]=new n.A(i,s,h));const a=this.HO[i][s][h];a&&(a.QO=new l.A(e,128*s+64,128*h+64,t,r,o))};My=(t,i,s)=>{const h=this.HO[t][i][s];h&&(h.QO=null)};_y=(t,i,s,h,e,r,o,l)=>{let a=0;const c=this.HO[h][t][i];if(c)for(let t=0;t<c.tb;t++){const i=c.ib[t];if(!i||!i.model)continue;const s=i.model.NE;s>a&&(a=s)}else this.HO[h][t][i]=new n.A(h,t,i);const f=this.HO[h][t][i];f&&(f.sb=new u.A(s,128*t+64,128*i+64,r,o,l,e,a))};Ay=(t,i,s)=>{const h=this.HO[t][i][s];h&&(h.sb=null)};$C=(t,i,s,h,e,r,o,l,c,f)=>{if(!o&&!l)return;for(let h=t;h>=0;h--)this.HO[h][i][s]||(this.HO[h][i][s]=new n.A(h,i,s));const u=this.HO[t][i][s];u&&(u.hb=new a.A(h,128*i+64,128*s+64,e,r,o,l,c,f))};by=(t,i,s,h)=>{const e=this.HO[t][i][s];1===h&&e&&(e.hb=null)};OT=(t,i,s,h,e,r,o,l,a,f,u)=>{if(!l)return;for(let h=t;h>=0;h--)this.HO[h][i][s]||(this.HO[h][i][s]=new n.A(h,i,s));const d=this.HO[t][i][s];d&&(d.eb=new c.A(h,128*i+e+64,128*s+r+64,u,f,l,o,a))};Ry=(t,i,s)=>{const h=this.HO[t][i][s];h&&(h.eb=null)};jT=(t,i,s,h)=>{const e=this.HO[t][i][s];if(!e)return;const n=e.eb;if(!n)return;const r=128*i+64,o=128*s+64;n.x=r+((n.x-r)*h/16|0),n.z=o+((n.z-o)*h/16|0)};LI=(t,i,s,h)=>{if(!h)return;const e=this.HO[t][i][s];if(!e)return;const n=e.eb;n&&(n.model=h)};kI=(t,i,s,h)=>{if(!h)return;const e=this.HO[t][i][s];if(!e)return;const n=e.QO;n&&(n.model=h)};MI=(t,i,s,h)=>{if(!h)return;const e=this.HO[t][i][s];if(!e)return;const n=e.hb;n&&(n.nb=h)};SI=(t,i,s,h,e)=>{if(!h)return;const n=this.HO[s][t][i];if(!n)return;const r=n.hb;r&&(r.nb=h,r.rb=e)};gy=(t,i,s,h,e,n,r,o,l,a,c)=>{if(!e&&!n)return!0;const f=128*i+64*l,u=128*s+64*a;return this.ob(f,u,h,t,i,s,l,a,e,n,r,o,c,!1)};dI=(t,i,s,h,e,n,r,o,l,a)=>{if(!e&&!n)return!0;let c=i-l,f=h-l,u=i+l,d=h+l;return a&&(o>640&&o<1408&&(d+=128),o>1152&&o<1920&&(u+=128),(o>1664||o<384)&&(f-=128),o>128&&o<896&&(c-=128)),c=c/128|0,f=f/128|0,u=u/128|0,d=d/128|0,this.ob(i,h,s,t,c,f,u+1-c,d-f+1,e,n,r,0,o,!0)};AI=(t,i,s,h,e,n,r,o,l,a,c,f)=>!l&&!a||this.ob(i,h,s,t,e,n,r+1-e,o-n+1,l,a,c,0,f,!0);Sy=(t,i,s)=>{const h=this.HO[t][i][s];if(h)for(let t=0;t<h.tb;t++){const e=h.ib[t];if(e&&2==(e.lb>>29&3)&&e.ab===i&&e.cb===s)return void this.fb(e)}};vI=(t,i,s,h)=>{if(!h)return;const e=this.HO[t][i][s];if(e)for(let t=0;t<e.tb;t++){const i=e.ib[t];if(i&&2==(i.lb>>29&3))return void(i.model=h)}};Kf=()=>{for(let t=0;t<this.KO;t++){const i=this._r[t];i&&this.fb(i),this._r[t]=null}this.KO=0};od=(t,i,s)=>{const h=this.HO[t][i][s];return h&&h.hb?h.hb.lb:0};Ty=(t,i,s)=>{const h=this.HO[t][s][i];return h&&h.eb?h.eb.lb:0};md=(t,i,s)=>{const h=this.HO[t][i][s];if(!h)return 0;for(let t=0;t<h.tb;t++){const e=h.ib[t];if(e&&2==(e.lb>>29&3)&&e.ab===i&&e.cb===s)return e.lb}return 0};td=(t,i,s)=>{const h=this.HO[t][i][s];return h&&h.QO?h.QO.lb:0};ld=(t,i,s,h)=>{const e=this.HO[t][i][s];if(e){if(e.hb&&e.hb.lb===h)return 255&e.hb.info;if(e.eb&&e.eb.lb===h)return 255&e.eb.info;if(e.QO&&e.QO.lb===h)return 255&e.QO.info;for(let t=0;t<e.tb;t++){const i=e.ib[t];if(i&&i.lb===h)return 255&i.info}return-1}return-1};YT=(t,i,s,h,e)=>{const n=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;for(let i=0;i<this.BO;i++)for(let r=0;r<this.II;r++)for(let o=0;o<this._I;o++){const l=this.HO[i][r][o];if(!l)continue;const a=l.hb;a&&a.nb&&a.nb.ub&&(this.wb(i,r,o,1,1,a.nb),a.rb&&a.rb.ub&&(this.wb(i,r,o,1,1,a.rb),this.yb(a.nb,a.rb,0,0,0,!1),a.rb.Ab(t,n,s,h,e)),a.nb.Ab(t,n,s,h,e));for(let a=0;a<l.tb;a++){const c=l.ib[a];c&&c.model&&c.model.ub&&(this.wb(i,r,o,c.pb+1-c.ab,c.mb-c.cb+1,c.model),c.model.Ab(t,n,s,h,e))}const c=l.QO;c&&c.model&&c.model.ub&&(this.Ib(i,r,o,c.model),c.model.Ab(t,n,s,h,e))}};Ib=(t,i,s,h)=>{if(i<this.II){const e=this.HO[t][i+1][s];e&&e.QO&&e.QO.model&&e.QO.model.ub&&this.yb(h,e.QO.model,128,0,0,!0)}if(s<this.II){const e=this.HO[t][i][s+1];e&&e.QO&&e.QO.model&&e.QO.model.ub&&this.yb(h,e.QO.model,0,0,128,!0)}if(i<this.II&&s<this._I){const e=this.HO[t][i+1][s+1];e&&e.QO&&e.QO.model&&e.QO.model.ub&&this.yb(h,e.QO.model,128,0,128,!0)}if(i<this.II&&s>0){const e=this.HO[t][i+1][s-1];e&&e.QO&&e.QO.model&&e.QO.model.ub&&this.yb(h,e.QO.model,128,0,-128,!0)}};wb=(t,i,s,h,e,n)=>{let r=!0,o=i;const l=i+h,a=s-1,c=s+e;for(let f=t;f<=t+1;f++)if(f!==this.BO){for(let u=o;u<=l;u++)if(!(u<0||u>=this.II))for(let o=a;o<=c;o++){if(o<0||o>=this._I||r&&u<l&&o<c&&(o>=s||u===i))continue;const a=this.HO[f][u][o];if(!a)continue;const d=128*(u-i)+64*(1-h),w=128*(o-s)+64*(1-e),y=((this.GO[f][u][o]+this.GO[f][u+1][o]+this.GO[f][u][o+1]+this.GO[f][u+1][o+1])/4|0)-((this.GO[t][i][s]+this.GO[t][i+1][s]+this.GO[t][i][s+1]+this.GO[t][i+1][s+1])/4|0),A=a.hb;A&&A.nb&&A.nb.ub&&this.yb(n,A.nb,d,y,w,r),A&&A.rb&&A.rb.ub&&this.yb(n,A.rb,d,y,w,r);for(let t=0;t<a.tb;t++){const o=a.ib[t];if(!o||!o.model||!o.model.ub)continue;const l=o.pb+1-o.ab,c=o.mb+1-o.cb;this.yb(n,o.model,128*(o.ab-i)+64*(l-h),y,128*(o.cb-s)+64*(c-e),r)}}o--,r=!1}};yb=(t,i,s,h,e,n)=>{this.zO++;let r=0;const o=i.vE,l=i.bE;if(t.ub&&t._b)for(let n=0;n<t.bE;n++){const a=t.ub[n],c=t._b[n];if(c&&0!==c.w){const f=t.RE[n]-h;if(f>i.gb)continue;const u=t.vE[n]-s;if(u<i.Eb||u>i.Cb)continue;const d=t.LE[n]-e;if(d<i.Tb||d>i.Ob)continue;if(i.ub&&i._b)for(let t=0;t<l;t++){const s=i.ub[t],h=i._b[t];u!==o[t]||d!==i.LE[t]||f!==i.RE[t]||h&&0===h.w||(a&&s&&h&&(a.x+=h.x,a.y+=h.y,a.z+=h.z,a.w+=h.w,s.x+=c.x,s.y+=c.y,s.z+=c.z,s.w+=c.w,r++),this.YO[n]=this.zO,this.VO[t]=this.zO)}}}if(!(r<3)&&n){if(t.bb)for(let i=0;i<t.vb;i++)this.YO[t.Lb[i]]===this.zO&&this.YO[t.Rb[i]]===this.zO&&this.YO[t.Sb[i]]===this.zO&&(t.bb[i]=-1);if(i.bb)for(let t=0;t<i.vb;t++)this.VO[i.Lb[t]]===this.zO&&this.VO[i.Rb[t]]===this.zO&&this.VO[i.Sb[t]]===this.zO&&(i.bb[t]=-1)}};Ju=(t,i,s,h,e,n)=>{const r=this.HO[t][i][s];if(!r)return;const o=r.qO;if(o){const t=o.color;if(0!==t)for(let i=0;i<4;i++)h[e]=t,h[e+1]=t,h[e+2]=t,h[e+3]=t,e+=n;return}const l=r.JO;if(!l)return;const a=l.shape,c=l.angle,f=l.Mb,u=l.kb,d=I.NO[a],w=I.PO[c];let y=0;if(0===f)for(let t=0;t<4;t++)0!==d[w[y++]]&&(h[e]=u),0!==d[w[y++]]&&(h[e+1]=u),0!==d[w[y++]]&&(h[e+2]=u),0!==d[w[y++]]&&(h[e+3]=u),e+=n;else for(let t=0;t<4;t++)h[e]=0===d[w[y++]]?f:u,h[e+1]=0===d[w[y++]]?f:u,h[e+2]=0===d[w[y++]]?f:u,h[e+3]=0===d[w[y++]]?f:u,e+=n};click=(t,i)=>{I.EO=!0,I.kl=t,I.xl=i,I.cf=-1,I.ff=-1};draw=(t,i,s,e,n,r,o)=>{t<0?t=0:t>=128*this.II&&(t=128*this.II-1),s<0?s=0:s>=128*this._I&&(s=128*this._I-1),I.Wf++,I.lO=h.A.sin[r],I.aO=h.A.cos[r],I.cO=h.A.sin[n],I.fO=h.A.cos[n],I.CO=I.ZT[(r-128)/32|0][n/64|0],I.uO=t,I.dO=i,I.wO=s,I.yO=t/128|0,I.AO=s/128|0,I.Du=e,I.pO=I.yO-25,I.pO<0&&(I.pO=0),I.IO=I.AO-25,I.IO<0&&(I.IO=0),I.mO=I.yO+25,I.mO>this.II&&(I.mO=this.II),I._O=I.AO+25,I._O>this._I&&(I._O=this._I),this.xb(),I.gO=0;for(let t=this.XO;t<this.BO;t++){const s=this.HO[t];for(let h=I.pO;h<I.mO;h++)for(let n=I.IO;n<I._O;n++){const r=s[h][n];r&&(r.ZO<=e&&(I.CO[h+25-I.yO][n+25-I.AO]||this.GO[t][h][n]-i>=2e3)?(r.visible=!0,r.update=!0,r.Db=r.tb>0,I.gO++):(r.visible=!1,r.update=!1,r.Nb=0))}}for(let t=this.XO;t<this.BO;t++){const i=this.HO[t];for(let t=-25;t<=0;t++){const s=I.yO+t,h=I.yO-t;if(!(s<I.pO&&h>=I.mO))for(let t=-25;t<=0;t++){const e=I.AO+t,n=I.AO-t;let r;if(s>=I.pO&&(e>=I.IO&&(r=i[s][e],r&&r.visible&&this.Pb(r,!0,o)),n<I._O&&(r=i[s][n],r&&r.visible&&this.Pb(r,!0,o))),h<I.mO&&(e>=I.IO&&(r=i[h][e],r&&r.visible&&this.Pb(r,!0,o)),n<I._O&&(r=i[h][n],r&&r.visible&&this.Pb(r,!0,o))),0===I.gO)return void(I.EO=!1)}}}for(let t=this.XO;t<this.BO;t++){const i=this.HO[t];for(let t=-25;t<=0;t++){const s=I.yO+t,h=I.yO-t;if(!(s<I.pO&&h>=I.mO))for(let t=-25;t<=0;t++){const e=I.AO+t,n=I.AO-t;let r;if(s>=I.pO&&(e>=I.IO&&(r=i[s][e],r&&r.visible&&this.Pb(r,!1,o)),n<I._O&&(r=i[s][n],r&&r.visible&&this.Pb(r,!1,o))),h<I.mO&&(e>=I.IO&&(r=i[h][e],r&&r.visible&&this.Pb(r,!1,o)),n<I._O&&(r=i[h][n],r&&r.visible&&this.Pb(r,!1,o))),0===I.gO)return void(I.EO=!1)}}}};ob=(t,i,s,h,r,o,l,a,c,f,u,d,w,y)=>{if(!c&&!f)return!1;for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){if(t<0||i<0||t>=this.II||i>=this._I)return!1;const s=this.HO[h][t][i];if(s&&s.tb>=5)return!1}const A=new e.A(h,s,t,i,c,f,w,r,r+l-1,o,o+a-1,u,d);for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){let s=0;t>r&&(s|=1),t<r+l-1&&(s+=4),i>o&&(s+=8),i<o+a-1&&(s+=2);for(let s=h;s>=0;s--)this.HO[s][t][i]||(this.HO[s][t][i]=new n.A(s,t,i));const e=this.HO[h][t][i];e&&(e.ib[e.tb]=A,e.Fb[e.tb]=s,e.Ub|=s,e.tb++)}return y&&(this._r[this.KO++]=A),!0};fb=t=>{for(let i=t.ab;i<=t.pb;i++)for(let s=t.cb;s<=t.mb;s++){const h=this.HO[t.level][i][s];if(h){for(let i=0;i<h.tb;i++)if(h.ib[i]===t){h.tb--;for(let t=i;t<h.tb;t++)h.ib[t]=h.ib[t+1],h.Fb[t]=h.Fb[t+1];h.ib[h.tb]=null;break}h.Ub=0;for(let t=0;t<h.tb;t++)h.Ub|=h.Fb[t]}}};xb=()=>{const t=I.xu[I.Du],i=I.JT[I.Du];I.Nu=0;for(let s=0;s<t;s++){const t=i[s];if(!t)continue;let h,e,n,r;if(1===t.type){if(h=t.pI+25-I.yO,h>=0&&h<=50){e=t.mI+25-I.AO,e<0&&(e=0),n=t._I+25-I.AO,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.CO&&I.CO[h][e++]){i=!0;break}if(i){if(r=I.uO-t.Eb,r>32)t.mode=1;else{if(r>=-32)continue;t.mode=2,r=-r}t.Bb=(t.Tb-I.wO<<8)/r|0,t.Gb=(t.Ob-I.wO<<8)/r|0,t.Hb=(t.gb-I.dO<<8)/r|0,t.Wb=(t.PE-I.dO<<8)/r|0,I.tO[I.Nu++]=t}}}else if(2===t.type){if(h=t.mI+25-I.AO,h>=0&&h<=50){e=t.pI+25-I.yO,e<0&&(e=0),n=t.II+25-I.yO,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.CO&&I.CO[e++][h]){i=!0;break}if(i){if(r=I.wO-t.Tb,r>32)t.mode=3;else{if(r>=-32)continue;t.mode=4,r=-r}t.Yb=(t.Eb-I.uO<<8)/r|0,t.Vb=(t.Cb-I.uO<<8)/r|0,t.Hb=(t.gb-I.dO<<8)/r|0,t.Wb=(t.PE-I.dO<<8)/r|0,I.tO[I.Nu++]=t}}}else if(4===t.type&&(h=t.gb-I.dO,h>128&&(e=t.mI+25-I.AO,e<0&&(e=0),n=t._I+25-I.AO,n>50&&(n=50),e<=n))){let i=t.pI+25-I.yO;i<0&&(i=0),r=t.II+25-I.yO,r>50&&(r=50);let s=!1;t:for(let t=i;t<=r;t++)for(let i=e;i<=n;i++)if(I.CO&&I.CO[t][i]){s=!0;break t}s&&(t.mode=5,t.Yb=(t.Eb-I.uO<<8)/h|0,t.Vb=(t.Cb-I.uO<<8)/h|0,t.Bb=(t.Tb-I.wO<<8)/h|0,t.Gb=(t.Ob-I.wO<<8)/h|0,I.tO[I.Nu++]=t)}}};Pb=(t,i,s)=>{for(I.iO.KI(t);;){let t;do{if(t=I.iO.Kb(),!t)return}while(!t.update);const h=t.x,e=t.z,n=t.level,r=t.Xb,o=this.HO[n];if(t.visible){if(i){if(n>0){const t=this.HO[n-1][h][e];if(t&&t.update)continue}if(h<=I.yO&&h>I.pO){const i=o[h-1][e];if(i&&i.update&&(i.visible||!(1&t.Ub)))continue}if(h>=I.yO&&h<I.mO-1){const i=o[h+1][e];if(i&&i.update&&(i.visible||!(4&t.Ub)))continue}if(e<=I.AO&&e>I.IO){const i=o[h][e-1];if(i&&i.update&&(i.visible||!(8&t.Ub)))continue}if(e>=I.AO&&e<I._O-1){const i=o[h][e+1];if(i&&i.update&&(i.visible||!(2&t.Ub)))continue}}else i=!0;if(t.visible=!1,t.jO){const i=t.jO;i.qO?this.zb(0,h,e)||this.jb(i.qO,0,h,e,I.lO,I.aO,I.cO,I.fO):i.JO&&!this.zb(0,h,e)&&this.Zb(h,e,i.JO,I.lO,I.aO,I.cO,I.fO);const n=i.hb;n&&n.nb?.draw(0,I.lO,I.aO,I.cO,I.fO,n.x-I.uO,n.y-I.dO,n.z-I.wO,n.lb);for(let t=0;t<i.tb;t++){const h=i.ib[t];if(h){let t=h.model;t||(t=h.qb?.draw(s)??null),t?.draw(h.wI,I.lO,I.aO,I.cO,I.fO,h.x-I.uO,h.y-I.dO,h.z-I.wO,h.lb)}}}let l=!1;t.qO?this.zb(r,h,e)||(l=!0,this.jb(t.qO,r,h,e,I.lO,I.aO,I.cO,I.fO)):t.JO&&!this.zb(r,h,e)&&(l=!0,this.Zb(h,e,t.JO,I.lO,I.aO,I.cO,I.fO));let a=0,c=0;const f=t.hb,u=t.eb;if((f||u)&&(I.yO===h?a+=1:I.yO<h&&(a+=2),I.AO===e?a+=3:I.AO>e&&(a+=6),c=I.TO[a],t.$b=I.bO[a]),f&&(f.Jb&I.OO[a]?16===f.Jb?(t.Nb=3,t.Qb=I.vO[a],t.tv=3-t.Qb):32===f.Jb?(t.Nb=6,t.Qb=I.LO[a],t.tv=6-t.Qb):64===f.Jb?(t.Nb=12,t.Qb=I.RO[a],t.tv=12-t.Qb):(t.Nb=9,t.Qb=I.SO[a],t.tv=9-t.Qb):t.Nb=0,f.Jb&c&&!this.iv(r,h,e,f.Jb)&&f.nb?.draw(0,I.lO,I.aO,I.cO,I.fO,f.x-I.uO,f.y-I.dO,f.z-I.wO,f.lb),f.sv&c&&!this.iv(r,h,e,f.sv)&&f.rb?.draw(0,I.lO,I.aO,I.cO,I.fO,f.x-I.uO,f.y-I.dO,f.z-I.wO,f.lb)),u&&!this.visible(r,h,e,u.model.PE))if(u.type&c)u.model.draw(u.angle,I.lO,I.aO,I.cO,I.fO,u.x-I.uO,u.y-I.dO,u.z-I.wO,u.lb);else if(768&u.type){const t=u.x-I.uO,i=u.y-I.dO,s=u.z-I.wO,h=u.angle;let e,n;if(e=h===p.A.wd||h===p.A.yd?-t:t,n=h===p.A.yd||h===p.A.Ad?-s:s,256&u.type&&n<e){const e=t+I.MO[h],n=s+I.kO[h];u.model.draw(512*h+256,I.lO,I.aO,I.cO,I.fO,e,i,n,u.lb)}if(512&u.type&&n>e){const e=t+I.xO[h],n=s+I.DO[h];u.model.draw(512*h+1280&2047,I.lO,I.aO,I.cO,I.fO,e,i,n,u.lb)}}if(l){const i=t.QO;i&&i.model?.draw(0,I.lO,I.aO,I.cO,I.fO,i.x-I.uO,i.y-I.dO,i.z-I.wO,i.lb);const s=t.sb;s&&0===s.offset&&(s.hv&&s.hv.draw(0,I.lO,I.aO,I.cO,I.fO,s.x-I.uO,s.y-I.dO,s.z-I.wO,s.lb),s.ev&&s.ev.draw(0,I.lO,I.aO,I.cO,I.fO,s.x-I.uO,s.y-I.dO,s.z-I.wO,s.lb),s.nv&&s.nv.draw(0,I.lO,I.aO,I.cO,I.fO,s.x-I.uO,s.y-I.dO,s.z-I.wO,s.lb))}const d=t.Ub;if(0!==d){if(h<I.yO&&4&d){const t=o[h+1][e];t&&t.update&&I.iO.KI(t)}if(e<I.AO&&2&d){const t=o[h][e+1];t&&t.update&&I.iO.KI(t)}if(h>I.yO&&1&d){const t=o[h-1][e];t&&t.update&&I.iO.KI(t)}if(e>I.AO&&8&d){const t=o[h][e-1];t&&t.update&&I.iO.KI(t)}}}if(0!==t.Nb){let i=!0;for(let s=0;s<t.tb;s++){const h=t.ib[s];if(h&&(h.Wf!==I.Wf&&(t.Fb[s]&t.Nb)===t.Qb)){i=!1;break}}if(i){const i=t.hb;i&&!this.iv(r,h,e,i.Jb)&&i.nb?.draw(0,I.lO,I.aO,I.cO,I.fO,i.x-I.uO,i.y-I.dO,i.z-I.wO,i.lb),t.Nb=0}}if(t.Db){const i=t.tb;t.Db=!1;let n=0;t:for(let s=0;s<i;s++){const i=t.ib[s];if(!i||i.Wf===I.Wf)continue;for(let s=i.ab;s<=i.pb;s++)for(let h=i.cb;h<=i.mb;h++){const e=o[s][h];if(e){if(!e.visible){if(0===e.Nb)continue;let n=0;if(s>i.ab&&(n+=1),s<i.pb&&(n+=4),h>i.cb&&(n+=8),h<i.mb&&(n+=2),(n&e.Nb)!==t.tv)continue}t.Db=!0;continue t}}I.$T[n++]=i;let h=I.yO-i.ab;const e=i.pb-I.yO;e>h&&(h=e);const r=I.AO-i.cb,l=i.mb-I.AO;i.rv=l>r?h+l:h+r}for(;;){let t=-50,i=-1;for(let s=0;s<n;s++){const h=I.$T[s];h&&(h.Wf!==I.Wf&&h.rv>t&&(t=h.rv,i=s))}if(-1===i)break;const l=I.$T[i];if(l){l.Wf=I.Wf;let t=l.model;t||(t=l.qb?.draw(s)??null),t&&!this.ov(r,l.ab,l.pb,l.cb,l.mb,t.PE)&&t.draw(l.wI,I.lO,I.aO,I.cO,I.fO,l.x-I.uO,l.y-I.dO,l.z-I.wO,l.lb);for(let t=l.ab;t<=l.pb;t++)for(let i=l.cb;i<=l.mb;i++){const s=o[t][i];s&&(0!==s.Nb?I.iO.KI(s):t===h&&i===e||!s.update||I.iO.KI(s))}}}if(t.Db)continue}if(!t.update||0!==t.Nb)continue;if(h<=I.yO&&h>I.pO){const t=o[h-1][e];if(t&&t.update)continue}if(h>=I.yO&&h<I.mO-1){const t=o[h+1][e];if(t&&t.update)continue}if(e<=I.AO&&e>I.IO){const t=o[h][e-1];if(t&&t.update)continue}if(e>=I.AO&&e<I._O-1){const t=o[h][e+1];if(t&&t.update)continue}t.update=!1,I.gO--;const l=t.sb;if(l&&0!==l.offset&&(l.hv&&l.hv.draw(0,I.lO,I.aO,I.cO,I.fO,l.x-I.uO,l.y-I.dO-l.offset,l.z-I.wO,l.lb),l.ev&&l.ev.draw(0,I.lO,I.aO,I.cO,I.fO,l.x-I.uO,l.y-I.dO-l.offset,l.z-I.wO,l.lb),l.nv&&l.nv.draw(0,I.lO,I.aO,I.cO,I.fO,l.x-I.uO,l.y-I.dO-l.offset,l.z-I.wO,l.lb)),0!==t.$b){const i=t.eb;if(i&&!this.visible(r,h,e,i.model.PE))if(i.type&t.$b)i.model.draw(i.angle,I.lO,I.aO,I.cO,I.fO,i.x-I.uO,i.y-I.dO,i.z-I.wO,i.lb);else if(768&i.type){const t=i.x-I.uO,s=i.y-I.dO,h=i.z-I.wO,e=i.angle;let n,r;if(n=e===p.A.wd||e===p.A.yd?-t:t,r=e===p.A.yd||e===p.A.Ad?-h:h,256&i.type&&r>=n){const n=t+I.MO[e],r=h+I.kO[e];i.model.draw(512*e+256,I.lO,I.aO,I.cO,I.fO,n,s,r,i.lb)}if(512&i.type&&r<=n){const n=t+I.xO[e],r=h+I.DO[e];i.model.draw(512*e+1280&2047,I.lO,I.aO,I.cO,I.fO,n,s,r,i.lb)}}const s=t.hb;s&&(s.sv&t.$b&&!this.iv(r,h,e,s.sv)&&s.rb?.draw(0,I.lO,I.aO,I.cO,I.fO,s.x-I.uO,s.y-I.dO,s.z-I.wO,s.lb),s.Jb&t.$b&&!this.iv(r,h,e,s.Jb)&&s.nb?.draw(0,I.lO,I.aO,I.cO,I.fO,s.x-I.uO,s.y-I.dO,s.z-I.wO,s.lb))}if(n<this.BO-1){const t=this.HO[n+1][h][e];t&&t.update&&I.iO.KI(t)}if(h<I.yO){const t=o[h+1][e];t&&t.update&&I.iO.KI(t)}if(e<I.AO){const t=o[h][e+1];t&&t.update&&I.iO.KI(t)}if(h>I.yO){const t=o[h-1][e];t&&t.update&&I.iO.KI(t)}if(e>I.AO){const t=o[h][e-1];t&&t.update&&I.iO.KI(t)}}};jb=(t,i,s,e,n,r,o,l)=>{let a,c,f,u,d=a=(s<<7)-I.uO,y=c=(e<<7)-I.wO,A=f=d+128,p=u=y+128,m=this.GO[i][s][e]-I.dO,_=this.GO[i][s+1][e]-I.dO,g=this.GO[i][s+1][e+1]-I.dO,E=this.GO[i][s][e+1]-I.dO,C=y*o+d*l>>16;if(y=y*l-d*o>>16,d=C,C=m*r-y*n>>16,y=m*n+y*r>>16,m=C,y<50)return;if(C=c*o+A*l>>16,c=c*l-A*o>>16,A=C,C=_*r-c*n>>16,c=_*n+c*r>>16,_=C,c<50)return;if(C=p*o+f*l>>16,p=p*l-f*o>>16,f=C,C=g*r-p*n>>16,p=g*n+p*r>>16,g=C,p<50)return;if(C=u*o+a*l>>16,u=u*l-a*o>>16,a=C,C=E*r-u*n>>16,u=E*n+u*r>>16,E=C,u<50)return;const T=h.A.ea+((d<<9)/y|0),O=h.A.na+((m<<9)/y|0),b=h.A.ea+((A<<9)/c|0),v=h.A.na+((_<<9)/c|0),L=h.A.ea+((f<<9)/p|0),R=h.A.na+((g<<9)/p|0),S=h.A.ea+((a<<9)/u|0),M=h.A.na+((E<<9)/u|0);if(h.A.alpha=0,(L-S)*(v-M)-(R-M)*(b-S)>0)if(h.A.lv=L<0||S<0||b<0||L>w.A.av||S>w.A.av||b>w.A.av,I.EO&&this.cv(I.kl,I.xl,R,M,v,L,S,b)&&(I.cf=s,I.ff=e),-1===t.fv)12345678!==t.uv&&h.A.dv(L,S,b,R,M,v,t.uv,t.wv,t.yv);else if(I.st){const i=I.FO[t.fv];h.A.dv(L,S,b,R,M,v,this.Av(i,t.uv),this.Av(i,t.wv),this.Av(i,t.yv))}else t.flat?h.A.pv(L,S,b,R,M,v,t.uv,t.wv,t.yv,d,m,y,A,a,_,E,c,u,t.fv):h.A.pv(L,S,b,R,M,v,t.uv,t.wv,t.yv,f,g,p,a,A,E,_,u,c,t.fv);if(!((T-b)*(M-v)-(O-v)*(S-b)<=0))if(h.A.lv=T<0||b<0||S<0||T>w.A.av||b>w.A.av||S>w.A.av,I.EO&&this.cv(I.kl,I.xl,O,v,M,T,b,S)&&(I.cf=s,I.ff=e),-1!==t.fv){if(!I.st)return void h.A.pv(T,b,S,O,v,M,t.mv,t.yv,t.wv,d,m,y,A,a,_,E,c,u,t.fv);const i=I.FO[t.fv];h.A.dv(T,b,S,O,v,M,this.Av(i,t.mv),this.Av(i,t.yv),this.Av(i,t.wv))}else 12345678!==t.mv&&h.A.dv(T,b,S,O,v,M,t.mv,t.yv,t.wv)};Zb=(t,i,s,e,n,r,o)=>{let l=s.vE.length;for(let t=0;t<l;t++){let i=s.vE[t]-I.uO,l=s.RE[t]-I.dO,a=s.LE[t]-I.wO,c=a*r+i*o>>16;if(a=a*o-i*r>>16,i=c,c=l*n-a*e>>16,a=l*e+a*n>>16,l=c,a<50)return;s.Iv&&(y.A._v[t]=i,y.A.gv[t]=l,y.A.Ev[t]=a),y.A.Cv[t]=h.A.ea+((i<<9)/a|0),y.A.Tv[t]=h.A.na+((l<<9)/a|0)}h.A.alpha=0,l=s.Ov.length;for(let e=0;e<l;e++){const n=s.Ov[e],r=s.bv[e],o=s.vv[e],l=y.A.Cv[n],a=y.A.Cv[r],c=y.A.Cv[o],f=y.A.Tv[n],u=y.A.Tv[r],d=y.A.Tv[o];if((l-a)*(d-u)-(f-u)*(c-a)>0)if(h.A.lv=l<0||a<0||c<0||l>w.A.av||a>w.A.av||c>w.A.av,I.EO&&this.cv(I.kl,I.xl,f,u,d,l,a,c)&&(I.cf=t,I.ff=i),s.Iv&&-1!==s.Iv[e])if(I.st){const t=I.FO[s.Iv[e]];h.A.dv(l,a,c,f,u,d,this.Av(t,s.Lv[e]),this.Av(t,s.Rv[e]),this.Av(t,s.Sv[e]))}else s.flat?h.A.pv(l,a,c,f,u,d,s.Lv[e],s.Rv[e],s.Sv[e],y.A._v[0],y.A.gv[0],y.A.Ev[0],y.A._v[1],y.A._v[3],y.A.gv[1],y.A.gv[3],y.A.Ev[1],y.A.Ev[3],s.Iv[e]):h.A.pv(l,a,c,f,u,d,s.Lv[e],s.Rv[e],s.Sv[e],y.A._v[n],y.A.gv[n],y.A.Ev[n],y.A._v[r],y.A._v[o],y.A.gv[r],y.A.gv[o],y.A.Ev[r],y.A.Ev[o],s.Iv[e]);else 12345678!==s.Lv[e]&&h.A.dv(l,a,c,f,u,d,s.Lv[e],s.Rv[e],s.Sv[e])}};zb=(t,i,s)=>{const h=this.WO[t][i][s];if(h===-I.Wf)return!1;if(h===I.Wf)return!0;{const h=i<<7,e=s<<7;return this.Mv(h+1,this.GO[t][i][s],e+1)&&this.Mv(h+128-1,this.GO[t][i+1][s],e+1)&&this.Mv(h+128-1,this.GO[t][i+1][s+1],e+128-1)&&this.Mv(h+1,this.GO[t][i][s+1],e+128-1)?(this.WO[t][i][s]=I.Wf,!0):(this.WO[t][i][s]=-I.Wf,!1)}};iv=(t,i,s,h)=>{if(!this.zb(t,i,s))return!1;const e=i<<7,n=s<<7,r=this.GO[t][i][s]-1,o=r-120,l=r-230,a=r-238;if(h<16){if(1===h){if(e>I.uO){if(!this.Mv(e,r,n))return!1;if(!this.Mv(e,r,n+128))return!1}if(t>0){if(!this.Mv(e,o,n))return!1;if(!this.Mv(e,o,n+128))return!1}return!!this.Mv(e,l,n)&&this.Mv(e,l,n+128)}if(2===h){if(n<I.wO){if(!this.Mv(e,r,n+128))return!1;if(!this.Mv(e+128,r,n+128))return!1}if(t>0){if(!this.Mv(e,o,n+128))return!1;if(!this.Mv(e+128,o,n+128))return!1}return!!this.Mv(e,l,n+128)&&this.Mv(e+128,l,n+128)}if(4===h){if(e<I.uO){if(!this.Mv(e+128,r,n))return!1;if(!this.Mv(e+128,r,n+128))return!1}if(t>0){if(!this.Mv(e+128,o,n))return!1;if(!this.Mv(e+128,o,n+128))return!1}return!!this.Mv(e+128,l,n)&&this.Mv(e+128,l,n+128)}if(8===h){if(n>I.wO){if(!this.Mv(e,r,n))return!1;if(!this.Mv(e+128,r,n))return!1}if(t>0){if(!this.Mv(e,o,n))return!1;if(!this.Mv(e+128,o,n))return!1}return!!this.Mv(e,l,n)&&this.Mv(e+128,l,n)}}return!!this.Mv(e+64,a,n+64)&&(16===h?this.Mv(e,l,n+128):32===h?this.Mv(e+128,l,n+128):64===h?this.Mv(e+128,l,n):128===h?this.Mv(e,l,n):(console.warn('Warning unsupported wall type!'),!0))};visible=(t,i,s,h)=>{if(this.zb(t,i,s)){const e=i<<7,n=s<<7;return this.Mv(e+1,this.GO[t][i][s]-h,n+1)&&this.Mv(e+128-1,this.GO[t][i+1][s]-h,n+1)&&this.Mv(e+128-1,this.GO[t][i+1][s+1]-h,n+128-1)&&this.Mv(e+1,this.GO[t][i][s+1]-h,n+128-1)}return!1};ov=(t,i,s,h,e,n)=>{let r,o;if(i!==s||h!==e){for(r=i;r<=s;r++)for(o=h;o<=e;o++)if(this.WO[t][r][o]===-I.Wf)return!1;o=1+(i<<7);const l=2+(h<<7),a=this.GO[t][i][h]-n;if(!this.Mv(o,a,l))return!1;const c=(s<<7)-1;if(!this.Mv(c,a,l))return!1;const f=(e<<7)-1;return!!this.Mv(o,a,f)&&this.Mv(c,a,f)}return!!this.zb(t,i,h)&&(r=i<<7,o=h<<7,this.Mv(r+1,this.GO[t][i][h]-n,o+1)&&this.Mv(r+128-1,this.GO[t][i+1][h]-n,o+1)&&this.Mv(r+128-1,this.GO[t][i+1][h+1]-n,o+128-1)&&this.Mv(r+1,this.GO[t][i][h+1]-n,o+128-1))};Mv=(t,i,s)=>{for(let h=0;h<I.Nu;h++){const e=I.tO[h];if(e)if(1===e.mode){const h=e.Eb-t;if(h>0){const t=e.Tb+(e.Bb*h>>8),n=e.Ob+(e.Gb*h>>8),r=e.gb+(e.Hb*h>>8),o=e.PE+(e.Wb*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(2===e.mode){const h=t-e.Eb;if(h>0){const t=e.Tb+(e.Bb*h>>8),n=e.Ob+(e.Gb*h>>8),r=e.gb+(e.Hb*h>>8),o=e.PE+(e.Wb*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(3===e.mode){const h=e.Tb-s;if(h>0){const s=e.Eb+(e.Yb*h>>8),n=e.Cb+(e.Vb*h>>8),r=e.gb+(e.Hb*h>>8),o=e.PE+(e.Wb*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(4===e.mode){const h=s-e.Tb;if(h>0){const s=e.Eb+(e.Yb*h>>8),n=e.Cb+(e.Vb*h>>8),r=e.gb+(e.Hb*h>>8),o=e.PE+(e.Wb*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(5===e.mode){const h=i-e.gb;if(h>0){const i=e.Eb+(e.Yb*h>>8),n=e.Cb+(e.Vb*h>>8),r=e.Tb+(e.Bb*h>>8),o=e.Ob+(e.Gb*h>>8);if(t>=i&&t<=n&&s>=r&&s<=o)return!0}}}return!1};cv=(t,i,s,h,e,n,r,o)=>{if(i<s&&i<h&&i<e)return!1;if(i>s&&i>h&&i>e)return!1;if(t<n&&t<r&&t<o)return!1;if(t>n&&t>r&&t>o)return!1;const l=(i-h)*(o-r)-(t-r)*(e-h);return((i-s)*(r-n)-(t-n)*(h-s))*l>0&&l*((i-e)*(n-o)-(t-o)*(s-e))>0};Av=(t,i)=>((i=(127-i)*(127&t)/160|0)<2?i=2:i>126&&(i=126),(65408&t)+i)}},7121:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{}},4197:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{Mp;bI;Rp;Sp;index;OI;fl;cl;constructor(t,i,s,h,e,n,r){super(),this.Mp=i,this.bI=s,this.Rp=h,this.Sp=e,this.index=t,this.OI=n,r&&-1!==n.dl&&this.OI.delay?(this.fl=Math.random()*this.OI.ul|0,this.cl=Math.random()*this.OI.delay[this.fl]|0):(this.fl=-1,this.cl=0)}}},8412:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(9418),e=s(8665),n=s(8738),r=s(1312);class o extends h.A{type=null;draw(t){if(!this.type)return null;if(-1===this.Ou||-1===this.Fm)return this.BE();const i=this.BE();if(!i)return null;const s=n.A.Lo[this.Ou],h=e.A.Fg(s.oa(),!0,!s.uE,!1);h.translate(-this.Nm,0,0),h.Sa(),s.OI&&s.OI.frames&&h.Ma(s.OI.frames[this.Fm]),h.kE=null,h.xE=null,128===s.FE&&128===s.UE||h.scale(s.FE,s.UE,s.FE),h.ka(64+s.wE,850+s.yE,-30,-50,-30,!0);const r=[i,h],o=e.A.kv(r,2);return 1===this.type.size&&(o.YE=!0),o}isVisible(){return null!==this.type}BE(){if(!this.type)return null;if(this.gu>=0&&0===this.km){const t=r.A.Lo[this.gu].frames;if(t){const i=t[this.Sm];let s=-1;if(this.aI>=0&&this.aI!==this.Ra){const t=r.A.Lo[this.aI].frames;t&&(s=t[this.BI])}return this.type.BE(i,s,r.A.Lo[this.gu].WI)}}let t=-1;if(this.aI>=0){const i=r.A.Lo[this.aI].frames;i&&(t=i[this.BI])}const i=this.type.BE(t,-1,null);return i?(this.height=i.PE,i):null}}},3606:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{index;count;constructor(t,i){super(),this.index=t,this.count=i}}},9418:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(7121),e=s(1312),n=s(3867);class r extends h.A{x=0;z=0;wI=0;yI=!1;size=1;Ra=-1;FI=-1;zm=-1;Zm=-1;$m=-1;Qm=-1;VI=-1;nu=null;cu=100;lu=0;au=0;yu=0;wu=0;fu=-1e3;uu=0;du=0;Eu=-1;xm=0;Dm=0;aI=-1;BI=0;UI=0;gu=-1;Sm=0;Mm=0;km=0;Rm=0;Ou=-1;Fm=0;Um=0;Pm=0;Nm=0;Bm=0;Hm=0;Gm=0;Wm=0;Au=0;pu=0;Ym=0;Wf=0;height=0;NI=0;pathLength=0;df=new Int32Array(10);wf=new Int32Array(10);YI=new n.us(10,!1);DI=0;Iu=-1;_u=-1;Cu=-1;Tu=-1;move(t,i,s){if(-1!==this.gu&&e.A.Lo[this.gu].priority<=1&&(this.gu=-1),!t){const t=i-this.df[0],h=s-this.wf[0];if(t>=-8&&t<=8&&h>=-8&&h<=8){this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.df[t]=this.df[t-1],this.wf[t]=this.wf[t-1],this.YI[t]=this.YI[t-1];return this.df[0]=i,this.wf[0]=s,void(this.YI[0]=!1)}}this.pathLength=0,this.DI=0,this.df[0]=i,this.wf[0]=s,this.x=128*this.df[0]+64*this.size,this.z=128*this.wf[0]+64*this.size}step(t,i){let s=this.df[0],h=this.wf[0];0===i?(s--,h++):1===i?h++:2===i?(s++,h++):3===i?s--:4===i?s++:5===i?(s--,h--):6===i?h--:7===i&&(s++,h--),-1!==this.gu&&e.A.Lo[this.gu].priority<=1&&(this.gu=-1),this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.df[t]=this.df[t-1],this.wf[t]=this.wf[t-1],this.YI[t]=this.YI[t-1];this.df[0]=s,this.wf[0]=h,this.YI[0]=t}}},8268:(t,i,s)=>{s.d(i,{A:()=>d});var h=s(9418),e=s(8665),n=s(2679),r=s(8738),o=s(1312),l=s(8317),a=s(1302),c=s(3819),f=s(3867),u=s(9298);class d extends h.A{static La=[u.A.xv,u.A.Dv,u.A.Nv,u.A.Pv,u.A.Fv,u.A.Uv,u.A.Bv,u.A.Gv,u.A.Hv,u.A.Wv,u.A.Yv,u.A.Vv,u.A.Kv,u.A.Xv,u.A.zv,u.A.jv];static va=[[u.A.Zv,u.A.qv,u.A.$v,u.A.Jv,u.A.Qv,u.A.tL,u.A.iL,u.A.sL,u.A.hL,u.A.eL,u.A.nL,u.A.rL],[u.A.oL,u.A.lL,u.A.aL,u.A.cL,u.A.fL,u.A.uL,u.A.dL,u.A.wL,u.A.yL,u.A.AL,u.A.pL,u.A.mL,u.A.IL,u.A._L,u.A.gL,u.A.EL],[u.A.EL-1,u.A.oL+1,u.A.lL,u.A.aL,u.A.cL,u.A.fL,u.A.uL,u.A.dL,u.A.wL,u.A.yL,u.A.AL,u.A.pL,u.A.mL,u.A.IL,u.A._L,u.A.gL],[u.A.CL,u.A.TL,u.A.OL,u.A.bL,u.A.vL,u.A.LL],[u.A.RL,u.A.SL,u.A.ML,u.A.kL,u.A.xL,u.A.DL,u.A.NL,u.A.PL]];static Ro=new n.A(200);name=null;visible=!1;FL=0;eu=0;UL=new Uint16Array(12);BL=new Uint16Array(5);Va=0;GL=0n;y=0;fI=0;uI=0;XI=0;jI=0;zI=0;cI=null;pI=0;mI=0;II=0;_I=0;st=!1;draw(t){if(!this.visible)return null;let i=this.BE();if(this.height=i.PE,i.YE=!0,this.st)return i;if(-1!==this.Ou&&-1!==this.Fm){const t=r.A.Lo[this.Ou],s=e.A.Fg(t.oa(),!0,!t.uE,!1);s.translate(-this.Nm,0,0),s.Sa(),t.OI&&t.OI.frames&&s.Ma(t.OI.frames[this.Fm]),s.kE=null,s.xE=null,128===t.FE&&128===t.UE||s.scale(t.FE,t.UE,t.FE),s.ka(t.wE+64,t.yE+850,-30,-50,-30,!0);const h=[i,s];i=e.A.kv(h,2)}if(this.cI&&(t>=this.uI&&(this.cI=null),t>=this.fI&&t<this.uI)){const t=this.cI;if(t){t.translate(this.jI-this.y,this.XI-this.x,this.zI-this.z),512===this.NI?(t.DE(),t.DE(),t.DE()):1024===this.NI?(t.DE(),t.DE()):1536===this.NI&&t.DE();const s=[i,t];i=e.A.kv(s,2),512===this.NI?t.DE():1024===this.NI?(t.DE(),t.DE()):1536===this.NI&&(t.DE(),t.DE(),t.DE()),t.translate(this.y-this.jI,this.x-this.XI,this.z-this.zI)}}return i.YE=!0,i}isVisible(){return this.visible}read(t){t.Pc=0,this.FL=t.Hy,this.eu=t.Hy;for(let i=0;i<12;i++){const s=t.Hy;this.UL[i]=0===s?0:(s<<8)+t.Hy}for(let i=0;i<5;i++){let s=t.Hy;(s<0||s>=d.va[i].length)&&(s=0),this.BL[i]=s}this.Ra=t.Fy,65535===this.Ra&&(this.Ra=-1),this.FI=t.Fy,65535===this.FI&&(this.FI=-1),this.zm=t.Fy,65535===this.zm&&(this.zm=-1),this.Zm=t.Fy,65535===this.Zm&&(this.Zm=-1),this.$m=t.Fy,65535===this.$m&&(this.$m=-1),this.Qm=t.Fy,65535===this.Qm&&(this.Qm=-1),this.VI=t.Fy,65535===this.VI&&(this.VI=-1),this.name=c.A.ga(c.A.Ea(t.Fc)),this.Va=t.Hy,this.visible=!0,this.GL=0n;for(let t=0;t<12;t++)this.GL<<=0x4n,this.UL[t]>=256&&(this.GL+=BigInt(this.UL[t])-256n);this.UL[0]>=256&&(this.GL+=BigInt(this.UL[0])-256n>>4n),this.UL[1]>=256&&(this.GL+=BigInt(this.UL[1])-256n>>8n);for(let t=0;t<5;t++)this.GL<<=0x3n,this.GL+=BigInt(this.BL[t]);this.GL<<=0x1n,this.GL+=BigInt(this.FL)}qy(){if(!this.visible)return null;const t=new f.us(12,null);let i=0;for(let s=0;s<12;s++){const h=this.UL[s];if(h>=256&&h<512&&(t[i++]=l.A.Lo[h-256].qy()),h>=512){const s=a.A.get(h-512).qy(this.FL);s&&(t[i++]=s)}}const s=e.A.Oa(t,i);for(let t=0;t<5;t++)0!==this.BL[t]&&(s.ba(d.va[t][0],d.va[t][this.BL[t]]),1===t&&s.ba(d.La[0],d.La[this.BL[t]]));return s}BE(){let t=this.GL,i=-1,s=-1,h=-1,n=-1;if(this.gu>=0&&0===this.km){const e=o.A.Lo[this.gu];if(e.frames&&(i=e.frames[this.Sm]),this.aI>=0&&this.aI!==this.Ra){const t=o.A.Lo[this.aI].frames;t&&(s=t[this.BI])}e.mC>=0&&(h=e.mC,t+=BigInt(h-this.UL[5])<<8n),e.IC>=0&&(n=e.IC,t+=BigInt(n-this.UL[3])<<16n)}else if(this.aI>=0){const t=o.A.Lo[this.aI].frames;t&&(i=t[this.BI])}let r=d.Ro?.get(t);if(!r){const i=new f.us(12,null);let s=0;for(let t=0;t<12;t++){let e=this.UL[t];if(n>=0&&3===t&&(e=n),h>=0&&5===t&&(e=h),e>=256&&e<512){const t=l.A.Lo[e-256].oa();t&&(i[s++]=t)}if(e>=512){const t=a.A.get(e-512).pC(this.FL);t&&(i[s++]=t)}}r=e.A.Oa(i,s);for(let t=0;t<5;t++)0!==this.BL[t]&&(r.ba(d.va[t][0],d.va[t][this.BL[t]]),1===t&&r.ba(d.La[0],d.La[this.BL[t]]));r.Sa(),r.ka(64,850,-30,-50,-30,!0),d.Ro?.put(t,r)}if(this.st)return r;const c=e.A.GE(r,!0);return-1!==i&&-1!==s?c.HE(i,s,o.A.Lo[this.gu].WI):-1!==i&&c.Ma(i),c.WE(),c.kE=null,c.xE=null,c}}},254:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8738),e=s(7121),n=s(8665);class r extends e.A{HL;level;WL;YL;VL;offsetY;EI;gI;KL;arc;target;mobile=!1;x=0;z=0;y=0;velocityX=0;XL=0;zL=0;velocityY=0;jL=0;wI=0;pitch=0;fl=0;cl=0;constructor(t,i,s,e,n,r,o,l,a,c,f){super(),this.HL=h.A.Lo[t],this.level=i,this.WL=s,this.YL=n,this.VL=e,this.EI=r,this.gI=o,this.KL=l,this.arc=a,this.target=c,this.offsetY=f}CI(t,i,s,h){if(!this.mobile){const i=t-this.WL,h=s-this.YL,e=Math.sqrt(i*i+h*h);this.x=this.WL+i*this.arc/e,this.z=this.YL+h*this.arc/e,this.y=this.VL}const e=this.gI+1-h;this.velocityX=(t-this.x)/e,this.XL=(s-this.z)/e,this.zL=Math.sqrt(this.velocityX*this.velocityX+this.XL*this.XL),this.mobile||(this.velocityY=-this.zL*Math.tan(.02454369*this.KL)),this.jL=2*(i-this.y-this.velocityY*e)/(e*e)}update(t){if(this.mobile=!0,this.x+=this.velocityX*t,this.z+=this.XL*t,this.y+=this.velocityY*t+.5*this.jL*t*t,this.velocityY+=this.jL*t,this.wI=325.949*Math.atan2(this.velocityX,this.XL)+1024&2047,this.pitch=325.949*Math.atan2(this.velocityY,this.zL)&2047,this.HL.OI&&this.HL.OI.delay)for(this.cl+=t;this.cl>this.HL.OI.delay[this.fl];)this.cl-=this.HL.OI.delay[this.fl]+1,this.fl++,this.fl>=this.HL.OI.ul&&(this.fl=0)}draw(){const t=this.HL.oa(),i=n.A.Fg(t,!0,!this.HL.uE,!1);return this.HL.OI&&this.HL.OI.frames&&(i.Sa(),i.Ma(this.HL.OI.frames[this.fl]),i.kE=null,i.xE=null),128===this.HL.FE&&128===this.HL.UE||i.scale(this.HL.FE,this.HL.UE,this.HL.FE),i.ZL(this.pitch),i.ka(64+this.HL.wE,850+this.HL.yE,-30,-50,-30,!0),i}}},7628:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(7121),e=s(8738),n=s(8665);class r extends h.A{type;level;x;z;y;EI;TI=!1;fl=0;cl=0;constructor(t,i,s,h,n,r,o){super(),this.type=e.A.Lo[t],this.level=i,this.x=s,this.z=h,this.y=n,this.EI=r+o}update(t){if(this.type.OI&&this.type.OI.delay)for(this.cl+=t;this.cl>this.type.OI.delay[this.fl];)this.cl-=this.type.OI.delay[this.fl]+1,this.fl++,this.fl>=this.type.OI.ul&&(this.fl=0,this.TI=!0)}draw(){const t=this.type.oa(),i=n.A.Fg(t,!0,!this.type.uE,!1);return!this.TI&&this.type.OI&&this.type.OI.frames&&(i.Sa(),i.Ma(this.type.OI.frames[this.fl]),i.kE=null,i.xE=null),128===this.type.FE&&128===this.type.UE||i.scale(this.type.FE,this.type.UE,this.type.FE),0!==this.type.orientation&&(90===this.type.orientation?i.DE():180===this.type.orientation?(i.DE(),i.DE()):270===this.type.orientation&&(i.DE(),i.DE(),i.DE())),i.ka(64+this.type.wE,850+this.type.yE,-30,-50,-30,!0),i}}},9222:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;model;lb;info;constructor(t,i,s,h,e,n){this.y=t,this.x=i,this.z=s,this.model=h,this.lb=e,this.info=n}}},1161:(t,i,s)=>{s.d(i,{A:()=>h});class h{level;y;x;z;model;qb;wI;ab;pb;cb;mb;lb;info;rv=0;Wf=0;constructor(t,i,s,h,e,n,r,o,l,a,c,f,u){this.level=t,this.y=i,this.x=s,this.z=h,this.model=e,this.qb=n,this.wI=r,this.ab=o,this.pb=l,this.cb=a,this.mb=c,this.lb=f,this.info=u}}},5327:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{VA;Ed;x;z;kp;angle;shape;gI;constructor(t,i,s,h,e,n,r,o){super(),this.VA=t,this.Ed=i,this.x=s,this.z=h,this.kp=e,this.angle=n,this.shape=r,this.gI=o}}},2630:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{VA;Ed;x;z;kp;angle;shape;KA;XA;zA;constructor(t,i,s,h,e,n,r,o,l,a){super(),this.VA=t,this.Ed=i,this.x=s,this.z=h,this.kp=e,this.angle=n,this.shape=r,this.KA=o,this.XA=l,this.zA=a}}},5748:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;nv;ev;hv;lb;offset;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.nv=h,this.ev=e,this.hv=n,this.lb=r,this.offset=o}}},8256:(t,i,s)=>{s.d(i,{A:()=>h});class h{pI;II;mI;_I;type;Eb;Cb;Tb;Ob;gb;PE;mode=0;Yb=0;Vb=0;Bb=0;Gb=0;Hb=0;Wb=0;constructor(t,i,s,h,e,n,r,o,l,a,c){this.pI=t,this.II=i,this.mI=s,this._I=h,this.type=e,this.Eb=n,this.Cb=r,this.Tb=o,this.Ob=l,this.gb=a,this.PE=c}}},3795:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1982),e=s(3867);class n extends h.A{level;x;z;Xb;ib;Fb;qO=null;JO=null;hb=null;eb=null;QO=null;sb=null;jO=null;tb=0;Ub=0;ZO=0;visible=!1;update=!1;Db=!1;Nb=0;Qb=0;tv=0;$b=0;constructor(t,i,s){super(),this.Xb=this.level=t,this.x=i,this.z=s,this.ib=new e.us(5,null),this.Fb=new Int32Array(5)}}},2771:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Cv=new Int32Array(6);static Tv=new Int32Array(6);static _v=new Int32Array(6);static gv=new Int32Array(6);static Ev=new Int32Array(6);static qL=[Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,2,6),Int8Array.of(1,3,5,7,2,8),Int8Array.of(1,3,5,7,2,8),Int8Array.of(1,3,5,7,11,12),Int8Array.of(1,3,5,7,11,12),Int8Array.of(1,3,5,7,13,14)];static $L=[Int8Array.of(0,1,2,3,0,0,1,3),Int8Array.of(1,1,2,3,1,0,1,3),Int8Array.of(0,1,2,3,1,0,1,3),Int8Array.of(0,0,1,2,0,0,2,4,1,0,4,3),Int8Array.of(0,0,1,4,0,0,4,3,1,1,2,4),Int8Array.of(0,0,4,3,1,0,1,2,1,0,2,4),Int8Array.of(0,1,2,4,1,0,1,4,1,0,4,3),Int8Array.of(0,4,1,2,0,4,2,5,1,0,4,5,1,0,5,3),Int8Array.of(0,4,1,2,0,4,2,3,0,4,3,5,1,0,4,5),Int8Array.of(0,0,4,5,1,4,1,2,1,4,2,3,1,4,3,5),Int8Array.of(0,0,1,5,0,1,4,5,0,1,2,4,1,0,5,3,1,5,4,3,1,4,2,3),Int8Array.of(1,0,1,5,1,1,4,5,1,1,2,4,0,0,5,3,0,5,4,3,0,4,2,3),Int8Array.of(1,0,5,4,1,0,1,5,0,0,4,3,0,4,5,3,0,5,2,3,0,1,2,5)];static JL=128;static QL=this.JL/2|0;static tR=this.JL/4|0;static iR=3*this.JL/4|0;vE;RE;LE;Lv;Rv;Sv;Ov;bv;vv;Iv;flat;shape;angle;Mb;kb;constructor(t,i,s,e,n,r,o,l,a,c,f,u,d,w,y,A,p,m,I){this.flat=!(p!==e||p!==w||p!==l),this.shape=i,this.angle=r,this.Mb=d,this.kb=a;const _=h.qL[i],g=_.length;this.vE=new Int32Array(g),this.RE=new Int32Array(g),this.LE=new Int32Array(g);const E=new Int32Array(g),C=new Int32Array(g),T=t*h.JL,O=m*h.JL;for(let t=0;t<g;t++){let i,a,f,d,m,g=_[t];!(1&g)&&g<=8&&(g=1+(g-r-r-1&7)),g>8&&g<=12&&(g=9+(g-r-9&3)),g>12&&g<=16&&(g=13+(g-r-13&3)),1===g?(i=T,a=O,f=p,d=o,m=c):2===g?(i=T+h.QL,a=O,f=p+e>>1,d=o+I>>1,m=c+s>>1):3===g?(i=T+h.JL,a=O,f=e,d=I,m=s):4===g?(i=T+h.JL,a=O+h.QL,f=e+w>>1,d=I+n>>1,m=s+y>>1):5===g?(i=T+h.JL,a=O+h.JL,f=w,d=n,m=y):6===g?(i=T+h.QL,a=O+h.JL,f=w+l>>1,d=n+A>>1,m=y+u>>1):7===g?(i=T,a=O+h.JL,f=l,d=A,m=u):8===g?(i=T,a=O+h.QL,f=l+p>>1,d=A+o>>1,m=u+c>>1):9===g?(i=T+h.QL,a=O+h.tR,f=p+e>>1,d=o+I>>1,m=c+s>>1):10===g?(i=T+h.iR,a=O+h.QL,f=e+w>>1,d=I+n>>1,m=s+y>>1):11===g?(i=T+h.QL,a=O+h.iR,f=w+l>>1,d=n+A>>1,m=y+u>>1):12===g?(i=T+h.tR,a=O+h.QL,f=l+p>>1,d=A+o>>1,m=u+c>>1):13===g?(i=T+h.tR,a=O+h.tR,f=p,d=o,m=c):14===g?(i=T+h.iR,a=O+h.tR,f=e,d=I,m=s):15===g?(i=T+h.iR,a=O+h.iR,f=w,d=n,m=y):(i=T+h.tR,a=O+h.iR,f=l,d=A,m=u),this.vE[t]=i,this.RE[t]=f,this.LE[t]=a,E[t]=d,C[t]=m}const b=h.$L[i],v=b.length/4|0;this.Ov=new Int32Array(v),this.bv=new Int32Array(v),this.vv=new Int32Array(v),this.Lv=new Int32Array(v),this.Rv=new Int32Array(v),this.Sv=new Int32Array(v),this.Iv=-1!==f?new Int32Array(v):null;let L=0;for(let t=0;t<v;t++){const i=b[L];let s=b[L+1],h=b[L+2],e=b[L+3];L+=4,s<4&&(s=s-r&3),h<4&&(h=h-r&3),e<4&&(e=e-r&3),this.Ov[t]=s,this.bv[t]=h,this.vv[t]=e,0===i?(this.Lv[t]=E[s],this.Rv[t]=E[h],this.Sv[t]=E[e],this.Iv&&(this.Iv[t]=-1)):(this.Lv[t]=C[s],this.Rv[t]=C[h],this.Sv[t]=C[e],this.Iv&&(this.Iv[t]=f))}}}},5518:(t,i,s)=>{s.d(i,{A:()=>h});class h{static BT=0;static $O=1;static sR=2;static hR=3;static eR=4;static nR=5;static QL=6;static tR=7;static iR=8;static rR=9;static oR=10;static lR=11}},3479:(t,i,s)=>{s.d(i,{A:()=>h});class h{mv;yv;uv;wv;fv;color;flat;constructor(t,i,s,h,e,n,r){this.mv=t,this.yv=i,this.uv=s,this.wv=h,this.fv=e,this.color=n,this.flat=r}}},6855:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;Jb;sv;nb;rb;lb;info;constructor(t,i,s,h,e,n,r,o,l){this.y=t,this.x=i,this.z=s,this.Jb=h,this.sv=e,this.nb=n,this.rb=r,this.lb=o,this.info=l}}},7441:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;type;angle;model;lb;info;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.type=h,this.angle=e,this.model=n,this.lb=r,this.info=o}}},7536:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e{aR;cR;constructor(t){this.cR=[],this.aR=t;for(let i=0;i<t;i++)this.cR[i]=new h.A}get(t){const i=this.cR[Number(t&BigInt(this.aR-1))];if(!i.next)return null;for(let s=i.next;s!==i;s=s.next)if(s&&s.key===t)return s;return null}put(t,i){i.hm&&i.jy();const s=this.cR[Number(t&BigInt(this.aR-1))];i.hm=s.hm,i.next=s,i.hm&&(i.hm.next=i),i.next.hm=i,i.key=t}}},4474:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{fR;uR;constructor(){super(),this.fR=this,this.uR=this}dR(){this.uR&&this.fR&&(this.uR.fR=this.fR,this.fR.uR=this.uR,this.fR=null,this.uR=null)}}},3819:(t,i,s)=>{s.d(i,{A:()=>h});class h{static wR=['_','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9'];static ju=t=>{t=t.trim();let i=0n;for(let s=0;s<t.length&&s<12;s++){const h=t.charCodeAt(s);i*=37n,h>=65&&h<=90?i+=BigInt(h+1-65):h>=97&&h<=122?i+=BigInt(h+1-97):h>=48&&h<=57&&(i+=BigInt(h+27-48))}return i};static Ea=t=>{if(t<0n||t>=6582952005840035281n)return'invalid_name';if(t%37n===0n)return'invalid_name';let i=0;const s=Array(12);for(;0n!==t;){const h=t;t/=37n,s[11-i++]=this.wR[Number(h-37n*t)]}return s.slice(12-i).join('')};static ty=t=>{const i=[...t.toLowerCase()];let s=!0;for(let t=0;t<i.length;t++){const h=i[t];s&&h>='a'&&h<='z'&&(i[t]=h.toUpperCase(),s=!1),'.'!==h&&'!'!==h||(s=!0)}return i.join('')};static xc=t=>{let i='';for(let s=0;s<t.length;s++)i+='*';return i};static Ba=t=>(t>>24&255)+'.'+(t>>16&255)+'.'+(t>>8&255)+'.'+(255&t);static ga=t=>{if(0===t.length)return t;const i=[...t];for(let t=0;t<i.length;t++)'_'===i[t]&&(i[t]=' ',t+1<i.length&&i[t+1]>='a'&&i[t+1]<='z'&&(i[t+1]=String.fromCharCode(i[t+1].charCodeAt(0)+'A'.charCodeAt(0)-97)));return i[0]>='a'&&i[0]<='z'&&(i[0]=String.fromCharCode(i[0].charCodeAt(0)+'A'.charCodeAt(0)-97)),i.join('')};static Ng=t=>{const i=t.toUpperCase();let s=0n;for(let t=0;t<i.length;t++)s=61n*s+BigInt(i.charCodeAt(t))-32n,s=s+(s>>56n)&0xffffffffffffffn;return s}}},6666:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e{yR;cursor=null;constructor(){const t=new h.A;t.next=t,t.hm=t,this.yR=t}KI(t){t.hm&&t.jy(),t.hm=this.yR.hm,t.next=this.yR,t.hm&&(t.hm.next=t),t.next.hm=t}my(t){t.hm&&t.jy(),t.hm=this.yR,t.next=this.yR.next,t.hm.next=t,t.next&&(t.next.hm=t)}Kb(){const t=this.yR.next;return t===this.yR?null:(t?.jy(),t)}head(){const t=this.yR.next;return t===this.yR?(this.cursor=null,null):(this.cursor=t?.next||null,t)}sm(){const t=this.yR.hm;return t===this.yR?(this.cursor=null,null):(this.cursor=t?.hm||null,t)}next(){const t=this.cursor;return t===this.yR?(this.cursor=null,null):(this.cursor=t?.next||null,t)}hm(){const t=this.cursor;return t===this.yR?(this.cursor=null,null):(this.cursor=t?.hm||null,t)}clear(){for(;;){const t=this.yR.next;if(t===this.yR)return;t?.jy()}}}},1982:(t,i,s)=>{s.d(i,{A:()=>h});class h{key;next;hm;constructor(){this.key=0n,this.next=this,this.hm=this}jy(){this.hm&&this.next&&(this.hm.next=this.next,this.next.hm=this.hm,this.next=null,this.hm=null)}}},2679:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(2512),e=s(7536);class n{AR;pR;history;available;constructor(t){this.AR=t,this.available=t,this.pR=new e.A(1024),this.history=new h.A}get(t){const i=this.pR.get(t);return i&&this.history.push(i),i}put(t,i){if(0===this.available){const t=this.history.pop();t?.jy(),t?.dR()}else this.available--;this.pR.put(t,i),this.history.push(i)}clear(){const t=this.history.pop();t?(t.jy(),t.dR()):this.available=this.AR}}},2512:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(4474);class e{head;constructor(){this.head=new h.A}push(t){t.uR&&t.dR(),t.uR=this.head.uR,t.fR=this.head,t.uR&&(t.uR.fR=t),t.fR.uR=t}pop(){const t=this.head.fR;return t===this.head?null:(t?.dR(),t)}}},7854:(t,i,s)=>{s.d(i,{E_:()=>h,zo:()=>e,mR:()=>o,IR:()=>r,_R:()=>n});const h=document.getElementById('canvas'),e=h.getContext('2d',{willReadFrequently:!0}),n=document.createElement('canvas'),r=document.createElement('img'),o=n.getContext('2d',{willReadFrequently:!0})},9298:(t,i,s)=>{s.d(i,{A:()=>h});class h{static RED=16711680;static GREEN=65280;static BLUE=255;static Bl=16776960;static Oc=65535;static bc=16711935;static Il=16777215;static Ul=0;static gR=16748608;static Wu=8388608;static Hu=128;static ER=16756736;static CR=16740352;static TR=16723968;static OR=12648192;static bR=8453888;static vR=4259584;static yc=9179409;static gd=6116423;static tl=2301979;static il=5063219;static hl=7759444;static nl=3353893;static Yu=8388736;static Vu=13350793;static bu=Int32Array.of(h.Bl,h.RED,h.GREEN,h.Oc,h.bc,h.Il);static Zv=6798;static qv=107;static $v=10283;static Jv=16;static Qv=4797;static tL=7744;static iL=5799;static sL=4634;static hL=33697;static eL=22433;static nL=2983;static rL=54193;static oL=8741;static lL=12;static aL=64030;static cL=43162;static fL=7735;static uL=8404;static dL=1701;static wL=38430;static yL=24094;static AL=10153;static pL=56621;static mL=4783;static IL=1341;static _L=16578;static gL=35003;static EL=25239;static xv=9104;static Dv=10275;static Nv=7595;static Pv=3610;static Fv=7975;static Uv=8526;static Bv=918;static Gv=38802;static Hv=24466;static Wv=10145;static Yv=58654;static Vv=5027;static Kv=1457;static Xv=16565;static zv=34991;static jv=25486;static CL=4626;static TL=11146;static OL=6439;static bL=12;static vL=4758;static LL=10270;static PL=4574;static RL=4550;static SL=4537;static ML=5681;static kL=5673;static xL=5790;static DL=6806;static NL=8076}},8950:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(4474);class e extends h.A{static ec=new Int32Array;static ZE=0;static qE=0;static top=0;static bottom=0;static left=0;static right=0;static av=0;static LR=0;static RR=0;static bind=(t,i,s)=>{this.ec=t,this.ZE=i,this.qE=s,this.yl(0,0,i,s)};static Lu=()=>{this.left=0,this.top=0,this.right=this.ZE,this.bottom=this.qE,this.av=this.right-1,this.LR=this.right/2|0};static yl=(t,i,s,h)=>{t<0&&(t=0),i<0&&(i=0),s>this.ZE&&(s=this.ZE),h>this.qE&&(h=this.qE),this.top=i,this.bottom=h,this.left=t,this.right=s,this.av=this.right-1,this.LR=this.right/2|0,this.RR=this.bottom/2|0};static clear=()=>{const t=this.ZE*this.qE;for(let i=0;i<t;i++)this.ec[i]=0};static ml=(t,i,s,h,e)=>{this.el(t,i,e,s),this.el(t,i+h-1,e,s),this.sl(t,i,e,h),this.sl(t+s-1,i,e,h)};static el=(t,i,s,h)=>{if(i<this.top||i>=this.bottom)return;t<this.left&&(h-=this.left-t,t=this.left),t+h>this.right&&(h=this.right-t);const e=t+i*this.ZE;for(let t=0;t<h;t++)this.ec[e+t]=s};static sl=(t,i,s,h)=>{if(t<this.left||t>=this.right)return;i<this.top&&(h-=this.top-i,i=this.top),i+h>this.bottom&&(h=this.bottom-i);const e=t+i*this.ZE;for(let t=0;t<h;t++)this.ec[e+t*this.ZE]=s};static Pu=(t,i,s,h,e)=>{const n=Math.abs(s-t),r=Math.abs(h-i),o=t<s?1:-1,l=i<h?1:-1;let a=n-r;for(;t>=this.left&&t<this.right&&i>=this.top&&i<this.bottom&&(this.ec[t+i*this.ZE]=e),t!==s||i!==h;){const s=2*a;s>-r&&(a-=r,t+=o),s<n&&(a+=n,i+=l)}};static fillRect=(t,i,s,h,e)=>{t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const n=this.ZE-s;let r=t+i*this.ZE;for(let t=-h;t<0;t++){for(let t=-s;t<0;t++)this.ec[r++]=e;r+=n}};static SR(t,i,s,h,e,n){t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const r=256-n,o=(e>>16&255)*n,l=(e>>8&255)*n,a=(255&e)*n,c=this.ZE-s;let f=t+i*this.ZE;for(let t=0;t<h;t++){for(let t=-s;t<0;t++){const t=(o+(this.ec[f]>>16&255)*r>>8<<16)+(l+(this.ec[f]>>8&255)*r>>8<<8)+(a+(255&this.ec[f])*r>>8);this.ec[f++]=t}f+=c}}static MR(t,i,s,h,e){const n=256-e,r=(h>>16&255)*e,o=(h>>8&255)*e,l=(255&h)*e;let a=i-s;a<0&&(a=0);let c=i+s;c>=this.qE&&(c=this.qE-1);for(let h=a;h<=c;h++){const e=h-i,a=0|Math.sqrt(s*s-e*e);let c=t-a;c<0&&(c=0);let f=t+a;f>=this.ZE&&(f=this.ZE-1);let u=c+h*this.ZE;for(let t=c;t<=f;t++){const t=(r+(this.ec[u]>>16&255)*n>>8<<16)+(o+(this.ec[u]>>8&255)*n>>8<<8)+(l+(255&this.ec[u])*n>>8);this.ec[u++]=t}}}static kR=(t,i,s)=>{t<this.left||t>=this.right||i<this.top||i>=this.bottom||(this.ec[t+i*this.ZE]=s)}}},4583:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8950),e=s(1673),n=s(3867);class r extends h.A{static st=!1;static xR=new Int32Array(512);static DR=new Int32Array(2048);static sin=new Int32Array(2048);static cos=new Int32Array(2048);static palette=new Int32Array(65536);static qI=new n.us(50,null);static NR=0;static rc=new Int32Array;static ea=0;static na=0;static $E=!0;static lv=!1;static alpha=0;static PR=null;static FR=new n.us(50,null);static UR=0;static Wf=0;static ZI=new Int32Array(50);static BR=new n.us(50,null);static GR=!1;static HR=new n.us(50,!1);static WR=new Int32Array(50);static{for(let t=1;t<512;t++)this.xR[t]=32768/t|0;for(let t=1;t<2048;t++)this.DR[t]=65536/t|0;for(let t=0;t<2048;t++)this.sin[t]=65536*Math.sin(.0030679615757712823*t)|0,this.cos[t]=65536*Math.cos(.0030679615757712823*t)|0}static Oo=()=>{this.xR=null,this.xR=null,this.sin=null,this.cos=null,this.rc=null,this.qI=null,this.HR=null,this.WR=null,this.PR=null,this.FR=null,this.ZI=null,this.palette=null,this.BR=null,console.log('Draw3D unloaded!')};static C_=()=>{this.rc=new Int32Array(this.qE);for(let t=0;t<this.qE;t++)this.rc[t]=this.ZE*t;this.ea=this.ZE/2|0,this.na=this.qE/2|0};static nc=(t,i)=>{this.rc=new Int32Array(i);for(let s=0;s<i;s++)this.rc[s]=t*s;this.ea=t/2|0,this.na=i/2|0};static Cp=()=>{this.PR=null,this.FR.fill(null)};static tc=t=>{this.NR=0;for(let i=0;i<50;i++)try{this.qI[i]=e.A.Xa(t,i.toString()),this.st&&128===this.qI[i]?.Nl?this.qI[i]?.YR():this.qI[i]?.sC(),this.NR++}catch(t){}};static HT=t=>{if(0!==this.WR[t])return this.WR[t];const i=this.BR[t];if(!i)return 0;let s=0,h=0,e=0;const n=i.length;for(let t=0;t<n;t++)s+=i[t]>>16&255,h+=i[t]>>8&255,e+=255&i[t];let r=(s/n<<16)+(h/n<<8)+(e/n|0);return r=this.VR(r,1.4),0===r&&(r=1),this.WR[t]=r,r};static ic=t=>{const i=t+.03*Math.random()-.015;let s=0;for(let t=0;t<512;t++){const h=(t/8|0)/64+.0078125,e=(7&t)/8+.0625;for(let t=0;t<128;t++){const n=t/128;let r=n,o=n,l=n;if(0!==e){let t;t=n<.5?n*(e+1):n+e-n*e;const i=2*n-t;let s=h+.3333333333333333;s>1&&s--;let a=h-.3333333333333333;a<0&&a++,r=6*s<1?i+6*(t-i)*s:2*s<1?t:3*s<2?i+(t-i)*(.6666666666666666-s)*6:i,o=6*h<1?i+6*(t-i)*h:2*h<1?t:3*h<2?i+(t-i)*(.6666666666666666-h)*6:i,l=6*a<1?i+6*(t-i)*a:2*a<1?t:3*a<2?i+(t-i)*(.6666666666666666-a)*6:i}const a=((256*r|0)<<16)+((256*o|0)<<8)+(256*l|0);this.palette[s++]=this.VR(a,i)}}for(let t=0;t<50;t++){const s=this.qI[t];if(!s)continue;const h=s.palette;this.BR[t]=new Int32Array(h.length);for(let s=0;s<h.length;s++){const e=this.BR[t];e&&(e[s]=this.VR(h[s],i))}}for(let t=0;t<50;t++)this.$I(t)};static VR=(t,i)=>{const s=(t>>16)/256,h=(t>>8&255)/256,e=(255&t)/256;return((256*Math.pow(s,i)|0)<<16)+((256*Math.pow(h,i)|0)<<8)+(256*Math.pow(e,i)|0)};static sc=t=>{this.PR||(this.UR=t,this.st?this.PR=new n.Vn(t,16384):this.PR=new n.Vn(t,65536),this.FR.fill(null))};static dv=(t,i,s,h,e,n,r,o,l)=>{let a=0,c=0;e!==h&&(a=(i-t<<16)/(e-h)|0,c=(o-r<<15)/(e-h)|0);let f=0,u=0;n!==e&&(f=(s-i<<16)/(n-e)|0,u=(l-o<<15)/(n-e)|0);let d=0,w=0;if(n!==h&&(d=(t-s<<16)/(h-n)|0,w=(r-l<<15)/(h-n)|0),h<=e&&h<=n){if(h<this.bottom)if(e>this.bottom&&(e=this.bottom),n>this.bottom&&(n=this.bottom),e<n)if(s=t<<=16,l=r<<=15,h<0&&(s-=d*h,t-=a*h,l-=w*h,r-=c*h,h=0),i<<=16,o<<=15,e<0&&(i-=f*e,o-=u*e,e=0),h!==e&&d<a||h===e&&d>f)for(n-=e,e-=h,h=this.rc[h];;){if(--e<0)for(;;){if(--n<0)return;this.KR(s>>16,i>>16,l>>7,o>>7,this.ec,h,0),s+=d,i+=f,l+=w,o+=u,h+=this.ZE}this.KR(s>>16,t>>16,l>>7,r>>7,this.ec,h,0),s+=d,t+=a,l+=w,r+=c,h+=this.ZE}else for(n-=e,e-=h,h=this.rc[h];;){if(--e<0)for(;;){if(--n<0)return;this.KR(i>>16,s>>16,o>>7,l>>7,this.ec,h,0),s+=d,i+=f,l+=w,o+=u,h+=this.ZE}this.KR(t>>16,s>>16,r>>7,l>>7,this.ec,h,0),s+=d,t+=a,l+=w,r+=c,h+=this.ZE}else if(i=t<<=16,o=r<<=15,h<0&&(i-=d*h,t-=a*h,o-=w*h,r-=c*h,h=0),s<<=16,l<<=15,n<0&&(s-=f*n,l-=u*n,n=0),h!==n&&d<a||h===n&&f>a)for(e-=n,n-=h,h=this.rc[h];;){if(--n<0)for(;;){if(--e<0)return;this.KR(s>>16,t>>16,l>>7,r>>7,this.ec,h,0),s+=f,t+=a,l+=u,r+=c,h+=this.ZE}this.KR(i>>16,t>>16,o>>7,r>>7,this.ec,h,0),i+=d,t+=a,o+=w,r+=c,h+=this.ZE}else for(e-=n,n-=h,h=this.rc[h];;){if(--n<0)for(;;){if(--e<0)return;this.KR(t>>16,s>>16,r>>7,l>>7,this.ec,h,0),s+=f,t+=a,l+=u,r+=c,h+=this.ZE}this.KR(t>>16,i>>16,r>>7,o>>7,this.ec,h,0),i+=d,t+=a,o+=w,r+=c,h+=this.ZE}}else if(e<=n){if(e<this.bottom)if(n>this.bottom&&(n=this.bottom),h>this.bottom&&(h=this.bottom),n<h)if(t=i<<=16,r=o<<=15,e<0&&(t-=a*e,i-=f*e,r-=c*e,o-=u*e,e=0),s<<=16,l<<=15,n<0&&(s-=d*n,l-=w*n,n=0),e!==n&&a<f||e===n&&a>d)for(h-=n,n-=e,e=this.rc[e];;){if(--n<0)for(;;){if(--h<0)return;this.KR(t>>16,s>>16,r>>7,l>>7,this.ec,e,0),t+=a,s+=d,r+=c,l+=w,e+=this.ZE}this.KR(t>>16,i>>16,r>>7,o>>7,this.ec,e,0),t+=a,i+=f,r+=c,o+=u,e+=this.ZE}else for(h-=n,n-=e,e=this.rc[e];;){if(--n<0)for(;;){if(--h<0)return;this.KR(s>>16,t>>16,l>>7,r>>7,this.ec,e,0),t+=a,s+=d,r+=c,l+=w,e+=this.ZE}this.KR(i>>16,t>>16,o>>7,r>>7,this.ec,e,0),t+=a,i+=f,r+=c,o+=u,e+=this.ZE}else if(s=i<<=16,l=o<<=15,e<0&&(s-=a*e,i-=f*e,l-=c*e,o-=u*e,e=0),t<<=16,r<<=15,h<0&&(t-=d*h,r-=w*h,h=0),n-=h,h-=e,e=this.rc[e],a<f)for(;;){if(--h<0)for(;;){if(--n<0)return;this.KR(t>>16,i>>16,r>>7,o>>7,this.ec,e,0),t+=d,i+=f,r+=w,o+=u,e+=this.ZE}this.KR(s>>16,i>>16,l>>7,o>>7,this.ec,e,0),s+=a,i+=f,l+=c,o+=u,e+=this.ZE}else for(;;){if(--h<0)for(;;){if(--n<0)return;this.KR(i>>16,t>>16,o>>7,r>>7,this.ec,e,0),t+=d,i+=f,r+=w,o+=u,e+=this.ZE}this.KR(i>>16,s>>16,o>>7,l>>7,this.ec,e,0),s+=a,i+=f,l+=c,o+=u,e+=this.ZE}}else if(n<this.bottom)if(h>this.bottom&&(h=this.bottom),e>this.bottom&&(e=this.bottom),h<e)if(i=s<<=16,o=l<<=15,n<0&&(i-=f*n,s-=d*n,o-=u*n,l-=w*n,n=0),t<<=16,r<<=15,h<0&&(t-=a*h,r-=c*h,h=0),e-=h,h-=n,n=this.rc[n],f<d)for(;;){if(--h<0)for(;;){if(--e<0)return;this.KR(i>>16,t>>16,o>>7,r>>7,this.ec,n,0),i+=f,t+=a,o+=u,r+=c,n+=this.ZE}this.KR(i>>16,s>>16,o>>7,l>>7,this.ec,n,0),i+=f,s+=d,o+=u,l+=w,n+=this.ZE}else for(;;){if(--h<0)for(;;){if(--e<0)return;this.KR(t>>16,i>>16,r>>7,o>>7,this.ec,n,0),i+=f,t+=a,o+=u,r+=c,n+=this.ZE}this.KR(s>>16,i>>16,l>>7,o>>7,this.ec,n,0),i+=f,s+=d,o+=u,l+=w,n+=this.ZE}else if(t=s<<=16,r=l<<=15,n<0&&(t-=f*n,s-=d*n,r-=u*n,l-=w*n,n=0),i<<=16,o<<=15,e<0&&(i-=a*e,o-=c*e,e=0),h-=e,e-=n,n=this.rc[n],f<d)for(;;){if(--e<0)for(;;){if(--h<0)return;this.KR(i>>16,s>>16,o>>7,l>>7,this.ec,n,0),i+=a,s+=d,o+=c,l+=w,n+=this.ZE}this.KR(t>>16,s>>16,r>>7,l>>7,this.ec,n,0),t+=f,s+=d,r+=u,l+=w,n+=this.ZE}else for(;;){if(--e<0)for(;;){if(--h<0)return;this.KR(s>>16,i>>16,l>>7,o>>7,this.ec,n,0),i+=a,s+=d,o+=c,l+=w,n+=this.ZE}this.KR(s>>16,t>>16,l>>7,r>>7,this.ec,n,0),t+=f,s+=d,r+=u,l+=w,n+=this.ZE}};static KR=(t,i,s,h,e,n,r)=>{let o;if(this.$E){let l;if(this.lv){if(l=i-t>3?(h-s)/(i-t)|0:0,i>this.av&&(i=this.av),t<0&&(s-=t*l,t=0),t>=i)return;n+=t,r=i-t>>2,l<<=2}else{if(!(t<i))return;n+=t,l=(r=i-t>>2)>0?(h-s)*this.xR[r]>>15:0}if(0===this.alpha)for(;;){if(--r<0){if((r=i-t&3)>0){o=this.palette[s>>8];do{e[n++]=o,r--}while(r>0);return}break}o=this.palette[s>>8],s+=l,e[n++]=o,e[n++]=o,e[n++]=o,e[n++]=o}else{const h=this.alpha,a=256-this.alpha;for(;;){if(--r<0){if((r=i-t&3)>0){o=this.palette[s>>8],o=((16711935&o)*a>>8&16711935)+((65280&o)*a>>8&65280);do{e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),r--}while(r>0)}break}o=this.palette[s>>8],s+=l,o=((16711935&o)*a>>8&16711935)+((65280&o)*a>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280)}}}else if(t<i){const l=(h-s)/(i-t)|0;if(this.lv&&(i>this.av&&(i=this.av),t<0&&(s-=t*l,t=0),t>=i))return;if(n+=t,r=i-t,0===this.alpha)do{e[n++]=this.palette[s>>8],s+=l,r--}while(r>0);else{const t=this.alpha,i=256-this.alpha;do{o=this.palette[s>>8],s+=l,o=((16711935&o)*i>>8&16711935)+((65280&o)*i>>8&65280),e[n++]=o+((16711935&e[n])*t>>8&16711935)+((65280&e[n])*t>>8&65280),r--}while(r>0)}}};static XR=(t,i,s,h,e,n,r)=>{let o=0;e!==h&&(o=(i-t<<16)/(e-h)|0);let l=0;n!==e&&(l=(s-i<<16)/(n-e)|0);let a=0;if(n!==h&&(a=(t-s<<16)/(h-n)|0),h<=e&&h<=n){if(h<this.bottom)if(e>this.bottom&&(e=this.bottom),n>this.bottom&&(n=this.bottom),e<n)if(s=t<<=16,h<0&&(s-=a*h,t-=o*h,h=0),i<<=16,e<0&&(i-=l*e,e=0),h!==e&&a<o||h===e&&a>l)for(n-=e,e-=h,h=this.rc[h];;){if(--e<0)for(;;){if(--n<0)return;this.zR(s>>16,i>>16,this.ec,h,r),s+=a,i+=l,h+=this.ZE}this.zR(s>>16,t>>16,this.ec,h,r),s+=a,t+=o,h+=this.ZE}else for(n-=e,e-=h,h=this.rc[h];;){if(--e<0)for(;;){if(--n<0)return;this.zR(i>>16,s>>16,this.ec,h,r),s+=a,i+=l,h+=this.ZE}this.zR(t>>16,s>>16,this.ec,h,r),s+=a,t+=o,h+=this.ZE}else if(i=t<<=16,h<0&&(i-=a*h,t-=o*h,h=0),s<<=16,n<0&&(s-=l*n,n=0),h!==n&&a<o||h===n&&l>o)for(e-=n,n-=h,h=this.rc[h];;){if(--n<0)for(;;){if(--e<0)return;this.zR(s>>16,t>>16,this.ec,h,r),s+=l,t+=o,h+=this.ZE}this.zR(i>>16,t>>16,this.ec,h,r),i+=a,t+=o,h+=this.ZE}else for(e-=n,n-=h,h=this.rc[h];;){if(--n<0)for(;;){if(--e<0)return;this.zR(t>>16,s>>16,this.ec,h,r),s+=l,t+=o,h+=this.ZE}this.zR(t>>16,i>>16,this.ec,h,r),i+=a,t+=o,h+=this.ZE}}else if(e<=n){if(e<this.bottom)if(n>this.bottom&&(n=this.bottom),h>this.bottom&&(h=this.bottom),n<h)if(t=i<<=16,e<0&&(t-=o*e,i-=l*e,e=0),s<<=16,n<0&&(s-=a*n,n=0),e!==n&&o<l||e===n&&o>a)for(h-=n,n-=e,e=this.rc[e];;){if(--n<0)for(;;){if(--h<0)return;this.zR(t>>16,s>>16,this.ec,e,r),t+=o,s+=a,e+=this.ZE}this.zR(t>>16,i>>16,this.ec,e,r),t+=o,i+=l,e+=this.ZE}else for(h-=n,n-=e,e=this.rc[e];;){if(--n<0)for(;;){if(--h<0)return;this.zR(s>>16,t>>16,this.ec,e,r),t+=o,s+=a,e+=this.ZE}this.zR(i>>16,t>>16,this.ec,e,r),t+=o,i+=l,e+=this.ZE}else if(s=i<<=16,e<0&&(s-=o*e,i-=l*e,e=0),t<<=16,h<0&&(t-=a*h,h=0),o<l)for(n-=h,h-=e,e=this.rc[e];;){if(--h<0)for(;;){if(--n<0)return;this.zR(t>>16,i>>16,this.ec,e,r),t+=a,i+=l,e+=this.ZE}this.zR(s>>16,i>>16,this.ec,e,r),s+=o,i+=l,e+=this.ZE}else for(n-=h,h-=e,e=this.rc[e];;){if(--h<0)for(;;){if(--n<0)return;this.zR(i>>16,t>>16,this.ec,e,r),t+=a,i+=l,e+=this.ZE}this.zR(i>>16,s>>16,this.ec,e,r),s+=o,i+=l,e+=this.ZE}}else if(n<this.bottom)if(h>this.bottom&&(h=this.bottom),e>this.bottom&&(e=this.bottom),h<e)if(i=s<<=16,n<0&&(i-=l*n,s-=a*n,n=0),t<<=16,h<0&&(t-=o*h,h=0),l<a)for(e-=h,h-=n,n=this.rc[n];;){if(--h<0)for(;;){if(--e<0)return;this.zR(i>>16,t>>16,this.ec,n,r),i+=l,t+=o,n+=this.ZE}this.zR(i>>16,s>>16,this.ec,n,r),i+=l,s+=a,n+=this.ZE}else for(e-=h,h-=n,n=this.rc[n];;){if(--h<0)for(;;){if(--e<0)return;this.zR(t>>16,i>>16,this.ec,n,r),i+=l,t+=o,n+=this.ZE}this.zR(s>>16,i>>16,this.ec,n,r),i+=l,s+=a,n+=this.ZE}else if(t=s<<=16,n<0&&(t-=l*n,s-=a*n,n=0),i<<=16,e<0&&(i-=o*e,e=0),l<a)for(h-=e,e-=n,n=this.rc[n];;){if(--e<0)for(;;){if(--h<0)return;this.zR(i>>16,s>>16,this.ec,n,r),i+=o,s+=a,n+=this.ZE}this.zR(t>>16,s>>16,this.ec,n,r),t+=l,s+=a,n+=this.ZE}else for(h-=e,e-=n,n=this.rc[n];;){if(--e<0)for(;;){if(--h<0)return;this.zR(s>>16,i>>16,this.ec,n,r),i+=o,s+=a,n+=this.ZE}this.zR(s>>16,t>>16,this.ec,n,r),t+=l,s+=a,n+=this.ZE}};static pv=(t,i,s,h,e,n,r,o,l,a,c,f,u,d,w,y,A,p,m)=>{const I=this.jR(m);this.GR=!this.HR[m];const _=a-u,g=c-w,E=f-A,C=d-a,T=y-c,O=p-f;let b=C*c-T*a<<14;const v=T*f-O*c<<8,L=O*a-C*f<<5;let R=_*c-g*a<<14;const S=g*f-E*c<<8,M=E*a-_*f<<5;let k=g*C-_*T<<14;const x=E*T-g*O<<8,D=_*O-E*C<<5;let N=0,P=0;e!==h&&(N=(i-t<<16)/(e-h)|0,P=(o-r<<16)/(e-h)|0);let F=0,U=0;n!==e&&(F=(s-i<<16)/(n-e)|0,U=(l-o<<16)/(n-e)|0);let B=0,G=0;if(n!==h&&(B=(t-s<<16)/(h-n)|0,G=(r-l<<16)/(h-n)|0),h<=e&&h<=n){if(h<this.bottom)if(e>this.bottom&&(e=this.bottom),n>this.bottom&&(n=this.bottom),e<n){s=t<<=16,l=r<<=16,h<0&&(s-=B*h,t-=N*h,l-=G*h,r-=P*h,h=0),i<<=16,o<<=16,e<0&&(i-=F*e,o-=U*e,e=0);const a=h-this.na;if(b+=L*a,R+=M*a,k+=D*a,b|=0,R|=0,k|=0,h!==e&&B<N||h===e&&B>F)for(n-=e,e-=h,h=this.rc[h];;){if(--e<0)for(;;){if(--n<0)return;this.ZR(s>>16,i>>16,this.ec,h,I,0,0,b,R,k,v,S,x,l>>8,o>>8),s+=B,i+=F,l+=G,o+=U,h+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(s>>16,t>>16,this.ec,h,I,0,0,b,R,k,v,S,x,l>>8,r>>8),s+=B,t+=N,l+=G,r+=P,h+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}else for(n-=e,e-=h,h=this.rc[h];;){if(--e<0)for(;;){if(--n<0)return;this.ZR(i>>16,s>>16,this.ec,h,I,0,0,b,R,k,v,S,x,o>>8,l>>8),s+=B,i+=F,l+=G,o+=U,h+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(t>>16,s>>16,this.ec,h,I,0,0,b,R,k,v,S,x,r>>8,l>>8),s+=B,t+=N,l+=G,r+=P,h+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}}else{i=t<<=16,o=r<<=16,h<0&&(i-=B*h,t-=N*h,o-=G*h,r-=P*h,h=0),s<<=16,l<<=16,n<0&&(s-=F*n,l-=U*n,n=0);const a=h-this.na;if(b+=L*a,R+=M*a,k+=D*a,b|=0,R|=0,k|=0,(h===n||B>=N)&&(h!==n||F<=N))for(e-=n,n-=h,h=this.rc[h];;){if(--n<0)for(;;){if(--e<0)return;this.ZR(t>>16,s>>16,this.ec,h,I,0,0,b,R,k,v,S,x,r>>8,l>>8),s+=F,t+=N,l+=U,r+=P,h+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(t>>16,i>>16,this.ec,h,I,0,0,b,R,k,v,S,x,r>>8,o>>8),i+=B,t+=N,o+=G,r+=P,h+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}else for(e-=n,n-=h,h=this.rc[h];;){if(--n<0)for(;;){if(--e<0)return;this.ZR(s>>16,t>>16,this.ec,h,I,0,0,b,R,k,v,S,x,l>>8,r>>8),s+=F,t+=N,l+=U,r+=P,h+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(i>>16,t>>16,this.ec,h,I,0,0,b,R,k,v,S,x,o>>8,r>>8),i+=B,t+=N,o+=G,r+=P,h+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}}}else if(e<=n){if(e<this.bottom)if(n>this.bottom&&(n=this.bottom),h>this.bottom&&(h=this.bottom),n<h){t=i<<=16,r=o<<=16,e<0&&(t-=N*e,i-=F*e,r-=P*e,o-=U*e,e=0),s<<=16,l<<=16,n<0&&(s-=B*n,l-=G*n,n=0);const a=e-this.na;if(b+=L*a,R+=M*a,k+=D*a,b|=0,R|=0,k|=0,e!==n&&N<F||e===n&&N>B)for(h-=n,n-=e,e=this.rc[e];;){if(--n<0)for(;;){if(--h<0)return;this.ZR(t>>16,s>>16,this.ec,e,I,0,0,b,R,k,v,S,x,r>>8,l>>8),t+=N,s+=B,r+=P,l+=G,e+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(t>>16,i>>16,this.ec,e,I,0,0,b,R,k,v,S,x,r>>8,o>>8),t+=N,i+=F,r+=P,o+=U,e+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}else for(h-=n,n-=e,e=this.rc[e];;){if(--n<0)for(;;){if(--h<0)return;this.ZR(s>>16,t>>16,this.ec,e,I,0,0,b,R,k,v,S,x,l>>8,r>>8),t+=N,s+=B,r+=P,l+=G,e+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(i>>16,t>>16,this.ec,e,I,0,0,b,R,k,v,S,x,o>>8,r>>8),t+=N,i+=F,r+=P,o+=U,e+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}}else{s=i<<=16,l=o<<=16,e<0&&(s-=N*e,i-=F*e,l-=P*e,o-=U*e,e=0),t<<=16,r<<=16,h<0&&(t-=B*h,r-=G*h,h=0);const a=e-this.na;if(b+=L*a,R+=M*a,k+=D*a,b|=0,R|=0,k|=0,n-=h,h-=e,e=this.rc[e],N<F)for(;;){if(--h<0)for(;;){if(--n<0)return;this.ZR(t>>16,i>>16,this.ec,e,I,0,0,b,R,k,v,S,x,r>>8,o>>8),t+=B,i+=F,r+=G,o+=U,e+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(s>>16,i>>16,this.ec,e,I,0,0,b,R,k,v,S,x,l>>8,o>>8),s+=N,i+=F,l+=P,o+=U,e+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}else for(;;){if(--h<0)for(;;){if(--n<0)return;this.ZR(i>>16,t>>16,this.ec,e,I,0,0,b,R,k,v,S,x,o>>8,r>>8),t+=B,i+=F,r+=G,o+=U,e+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(i>>16,s>>16,this.ec,e,I,0,0,b,R,k,v,S,x,o>>8,l>>8),s+=N,i+=F,l+=P,o+=U,e+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}}}else if(n<this.bottom)if(h>this.bottom&&(h=this.bottom),e>this.bottom&&(e=this.bottom),h<e){i=s<<=16,o=l<<=16,n<0&&(i-=F*n,s-=B*n,o-=U*n,l-=G*n,n=0),t<<=16,r<<=16,h<0&&(t-=N*h,r-=P*h,h=0);const a=n-this.na;if(b+=L*a,R+=M*a,k+=D*a,b|=0,R|=0,k|=0,e-=h,h-=n,n=this.rc[n],F<B)for(;;){if(--h<0)for(;;){if(--e<0)return;this.ZR(i>>16,t>>16,this.ec,n,I,0,0,b,R,k,v,S,x,o>>8,r>>8),i+=F,t+=N,o+=U,r+=P,n+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(i>>16,s>>16,this.ec,n,I,0,0,b,R,k,v,S,x,o>>8,l>>8),i+=F,s+=B,o+=U,l+=G,n+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}else for(;;){if(--h<0)for(;;){if(--e<0)return;this.ZR(t>>16,i>>16,this.ec,n,I,0,0,b,R,k,v,S,x,r>>8,o>>8),i+=F,t+=N,o+=U,r+=P,n+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(s>>16,i>>16,this.ec,n,I,0,0,b,R,k,v,S,x,l>>8,o>>8),i+=F,s+=B,o+=U,l+=G,n+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}}else{t=s<<=16,r=l<<=16,n<0&&(t-=F*n,s-=B*n,r-=U*n,l-=G*n,n=0),i<<=16,o<<=16,e<0&&(i-=N*e,o-=P*e,e=0);const a=n-this.na;if(b+=L*a,R+=M*a,k+=D*a,b|=0,R|=0,k|=0,h-=e,e-=n,n=this.rc[n],F<B)for(;;){if(--e<0)for(;;){if(--h<0)return;this.ZR(i>>16,s>>16,this.ec,n,I,0,0,b,R,k,v,S,x,o>>8,l>>8),i+=N,s+=B,o+=P,l+=G,n+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(t>>16,s>>16,this.ec,n,I,0,0,b,R,k,v,S,x,r>>8,l>>8),t+=F,s+=B,r+=U,l+=G,n+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}else for(;;){if(--e<0)for(;;){if(--h<0)return;this.ZR(s>>16,i>>16,this.ec,n,I,0,0,b,R,k,v,S,x,l>>8,o>>8),i+=N,s+=B,o+=P,l+=G,n+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}this.ZR(s>>16,t>>16,this.ec,n,I,0,0,b,R,k,v,S,x,l>>8,r>>8),t+=F,s+=B,r+=U,l+=G,n+=this.ZE,b+=L,R+=M,k+=D,b|=0,R|=0,k|=0}}};static ZR=(t,i,s,h,e,n,r,o,l,a,c,f,u,d,w)=>{if(t>=i)return;let y,A,p,m,I,_,g,E,C;if(this.lv){if(y=(w-d)/(i-t)|0,i>this.av&&(i=this.av),t<0&&(d-=t*y,t=0),t>=i)return;A=i-t>>3,y<<=12}else i-t>7?(A=i-t>>3,y=(w-d)*this.xR[A]>>6):(A=0,y=0);if(d<<=9,h+=t,this.st&&e)if(p=0,m=0,_=t-this.ea,o+=(c>>3)*_,l+=(f>>3)*_,a+=(u>>3)*_,o|=0,l|=0,I=(a|=0)>>12,0!==I&&(r=l/I|0,(n=o/I|0)<0?n=0:n>4032&&(n=4032)),o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>12,0!==I&&(p=o/I|0,m=l/I|0,p<7?p=7:p>4032&&(p=4032)),g=p-n>>3,E=m-r>>3,n+=d>>3&786432,C=d>>23,this.GR){for(;A-- >0;)s[h++]=e[(4032&r)+(n>>6)]>>>C,n+=g,r+=E,s[h++]=e[(4032&r)+(n>>6)]>>>C,n+=g,r+=E,s[h++]=e[(4032&r)+(n>>6)]>>>C,n+=g,r+=E,s[h++]=e[(4032&r)+(n>>6)]>>>C,n+=g,r+=E,s[h++]=e[(4032&r)+(n>>6)]>>>C,n+=g,r+=E,s[h++]=e[(4032&r)+(n>>6)]>>>C,n+=g,r+=E,s[h++]=e[(4032&r)+(n>>6)]>>>C,n+=g,r+=E,s[h++]=e[(4032&r)+(n>>6)]>>>C,n=p,r=m,o+=c,l+=f,I=(a+=u)>>12,0!==I&&(p=o/I|0,m=l/I|0,p<7?p=7:p>4032&&(p=4032)),g=p-n>>3,E=m-r>>3,n+=(d+=y)>>3&786432,C=d>>23;for(A=i-t&7;A-- >0;)s[h++]=e[(4032&r)+(n>>6)]>>>C,n+=g,r+=E}else{for(;A-- >0;){let t;0!=(t=e[(4032&r)+(n>>6)]>>>C)&&(s[h]=t),h+=1,0!=(t=e[(4032&(r+=E))+((n+=g)>>6)]>>>C)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=E))+((n+=g)>>6)]>>>C)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=E))+((n+=g)>>6)]>>>C)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=E))+((n+=g)>>6)]>>>C)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=E))+((n+=g)>>6)]>>>C)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=E))+((n+=g)>>6)]>>>C)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=E))+((n+=g)>>6)]>>>C)&&(s[h]=t),h+=1,n=p,r=m,o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>12,0!==I&&(p=o/I|0,m=l/I|0,p<7?p=7:p>4032&&(p=4032)),g=p-n>>3,E=m-r>>3,n+=(d+=y)>>3&786432,C=d>>23}for(A=i-t&7;A-- >0;){let t;0!=(t=e[(4032&r)+(n>>6)]>>>C)&&(s[h]=t),h++,n+=g,r+=E}}else if(p=0,m=0,_=t-this.ea,o+=(c>>3)*_,l+=(f>>3)*_,a+=(u>>3)*_,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(r=l/I|0,(n=o/I|0)<0?n=0:n>16256&&(n=16256)),o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(p=o/I|0,m=l/I|0,p<7?p=7:p>16256&&(p=16256)),g=p-n>>3,E=m-r>>3,n+=6291456&d,C=d>>23,this.GR&&e){for(;A-- >0;)s[h++]=e[(16256&r)+(n>>7)]>>>C,n+=g,r+=E,s[h++]=e[(16256&r)+(n>>7)]>>>C,n+=g,r+=E,s[h++]=e[(16256&r)+(n>>7)]>>>C,n+=g,r+=E,s[h++]=e[(16256&r)+(n>>7)]>>>C,n+=g,r+=E,s[h++]=e[(16256&r)+(n>>7)]>>>C,n+=g,r+=E,s[h++]=e[(16256&r)+(n>>7)]>>>C,n+=g,r+=E,s[h++]=e[(16256&r)+(n>>7)]>>>C,n+=g,r+=E,s[h++]=e[(16256&r)+(n>>7)]>>>C,n=p,r=m,o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(p=o/I|0,m=l/I|0,p<7?p=7:p>16256&&(p=16256)),g=p-n>>3,E=m-r>>3,n+=6291456&(d+=y),C=d>>23;for(A=i-t&7;A-- >0;)s[h++]=e[(16256&r)+(n>>7)]>>>C,n+=g,r+=E}else{for(;A-- >0&&e;){let t;0!=(t=e[(16256&r)+(n>>7)]>>>C)&&(s[h]=t),h+=1,0!=(t=e[(16256&(r+=E))+((n+=g)>>7)]>>>C)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=E))+((n+=g)>>7)]>>>C)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=E))+((n+=g)>>7)]>>>C)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=E))+((n+=g)>>7)]>>>C)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=E))+((n+=g)>>7)]>>>C)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=E))+((n+=g)>>7)]>>>C)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=E))+((n+=g)>>7)]>>>C)&&(s[h]=t),h++,n=p,r=m,o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(p=o/I|0,m=l/I|0,p<7?p=7:p>16256&&(p=16256)),g=p-n>>3,E=m-r>>3,n+=6291456&(d+=y),C=d>>23}for(A=i-t&7;A-- >0&&e;){let t;0!=(t=e[(16256&r)+(n>>7)]>>>C)&&(s[h]=t),h++,n+=g,r+=E}}};static zR=(t,i,s,h,e)=>{if(this.lv&&(i>this.av&&(i=this.av),t<0&&(t=0)),t>=i)return;h+=t;let n=i-t>>2;if(0===this.alpha)for(;;){if(n--,n<0)for(n=i-t&3;;){if(n--,n<0)return;s[h++]=e}s[h++]=e,s[h++]=e,s[h++]=e,s[h++]=e}const r=this.alpha,o=256-this.alpha;for(e=((16711935&e)*o>>8&16711935)+((65280&e)*o>>8&65280);;){if(n--,n<0)for(n=i-t&3;;){if(n--,n<0)return;s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280)}s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280),s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280),s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280),s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280)}};static $I=t=>{this.FR[t]&&this.PR&&(this.PR[this.UR++]=this.FR[t],this.FR[t]=null)};static jR=t=>{if(this.ZI[t]=this.Wf++,this.FR[t])return this.FR[t];let i;if(this.UR>0&&this.PR)i=this.PR[--this.UR],this.PR[this.UR]=null;else{let t=0,s=-1;for(let i=0;i<this.NR;i++)this.FR[i]&&(this.ZI[i]<t||-1===s)&&(t=this.ZI[i],s=i);i=this.FR[s],this.FR[s]=null}this.FR[t]=i;const s=this.qI[t],h=this.BR[t];if(!i||!s||!h)return null;if(this.st){this.HR[t]=!1;for(let e=0;e<4096;e++){const n=i[e]=16316671&h[s.ec[e]];0===n&&(this.HR[t]=!0),i[e+4096]=n-(n>>>3)&16316671,i[e+8192]=n-(n>>>2)&16316671,i[e+12288]=n-(n>>>2)-(n>>>3)&16316671}}else{if(64===s.width)for(let t=0;t<128;t++)for(let e=0;e<128;e++)i[e+(t<<7)]=h[s.ec[(e>>1)+(t>>1<<6)]];else for(let t=0;t<16384;t++)i[t]=h[s.ec[t]];this.HR[t]=!1;for(let s=0;s<16384;s++){i[s]&=16316671;const h=i[s];0===h&&(this.HR[t]=!0),i[s+16384]=h-(h>>>3)&16316671,i[s+32768]=h-(h>>>2)&16316671,i[s+49152]=h-(h>>>2)-(h>>>3)&16316671}}return i}}},880:(t,i,s)=>{s.d(i,{r:()=>e});var h=s(7854);const e=async t=>{255!==t[0]&&(t[0]=255),URL.revokeObjectURL(h.IR.src),h.IR.src=URL.createObjectURL(new Blob([t],{type:'image/jpeg'})),await new Promise((t=>h.IR.onload=()=>t())),h.mR.clearRect(0,0,h._R.width,h._R.height);const i=h.IR.naturalWidth,s=h.IR.naturalHeight;return h._R.width=i,h._R.height=s,h.mR.drawImage(h.IR,0,0),h.mR.getImageData(0,0,i,s)}},8665:(t,i,s)=>{s.d(i,{A:()=>f});var h=s(1069),e=s(8950),n=s(4583),r=s(7018),o=s(4474),l=s(3867);class a{bE=0;vb=0;qR=0;$R=-1;JR=-1;QR=-1;tS=-1;iS=-1;sS=-1;hS=-1;eS=-1;nS=-1;rS=0;oS=-1;lS=-1;aS=-1;data=null}class c{x=0;y=0;z=0;w=0}class f extends o.A{static metadata=null;static head=null;static cS=null;static fS=null;static uS=null;static dS=null;static wS=null;static yS=null;static AS=null;static pS=null;static mS=null;static IS=null;static _S=null;static gS=null;static axis=null;static ES=new l.us(4096,!1);static CS=new l.us(4096,!1);static TS=new Int32Array(4096);static OS=new Int32Array(4096);static bS=new Int32Array(4096);static vS=new Int32Array(4096);static LS=new Int32Array(4096);static RS=new Int32Array(4096);static SS=new Int32Array(1500);static MS=new l.Vn(1500,512);static kS=new Int32Array(12);static xS=new l.Vn(12,2e3);static DS=new Int32Array(2e3);static NS=new Int32Array(2e3);static PS=new Int32Array(12);static FS=new Int32Array(10);static US=new Int32Array(10);static BS=new Int32Array(10);static In=0;static GS=0;static _n=0;static Yf=!1;static kl=0;static xl=0;static Vf=0;static Jp=new Int32Array(1e3);static HS=!1;static hc(t){try{f.head=new h.A(t.read('ob_head.dat')),f.cS=new h.A(t.read('ob_face1.dat')),f.fS=new h.A(t.read('ob_face2.dat')),f.uS=new h.A(t.read('ob_face3.dat')),f.dS=new h.A(t.read('ob_face4.dat')),f.wS=new h.A(t.read('ob_face5.dat')),f.yS=new h.A(t.read('ob_point1.dat')),f.AS=new h.A(t.read('ob_point2.dat')),f.pS=new h.A(t.read('ob_point3.dat')),f.mS=new h.A(t.read('ob_point4.dat')),f.IS=new h.A(t.read('ob_point5.dat')),f._S=new h.A(t.read('ob_vertex1.dat')),f.gS=new h.A(t.read('ob_vertex2.dat')),f.axis=new h.A(t.read('ob_axis.dat')),f.head.Pc=0,f.yS.Pc=0,f.AS.Pc=0,f.pS.Pc=0,f.mS.Pc=0,f._S.Pc=0,f.gS.Pc=0;const i=f.head.Fy;f.metadata=new l.us(i+100,null);let s=0,e=0,n=0,r=0,o=0,c=0,u=0;for(let t=0;t<i;t++){const t=f.head.Fy,i=new a;i.bE=f.head.Fy,i.vb=f.head.Fy,i.qR=f.head.Hy,i.$R=f.yS.Pc,i.JR=f.AS.Pc,i.QR=f.pS.Pc,i.tS=f.mS.Pc,i.sS=f._S.Pc,i.hS=f.gS.Pc;const h=f.head.Hy,l=f.head.Hy,d=f.head.Hy,w=f.head.Hy,y=f.head.Hy;for(let t=0;t<i.bE;t++){const t=f.yS.Hy;1&t&&f.AS.WS,2&t&&f.pS.WS,4&t&&f.mS.WS}for(let t=0;t<i.vb;t++){1===f.gS.Hy&&(f._S.WS,f._S.WS),f._S.WS}i.eS=n,n+=2*i.vb,1===h&&(i.nS=r,r+=i.vb),255===l?(i.rS=o,o+=i.vb):i.rS=-l-1,1===d&&(i.oS=c,c+=i.vb),1===w&&(i.lS=u,u+=i.vb),1===y&&(i.iS=e,e+=i.bE),i.aS=s,s+=i.qR,f.metadata[t]=i}}catch(t){console.log('Error loading model index'),console.error(t)}}static YS(t,i){if(null===f.metadata&&(f.metadata=[]),null===t){const t=new a;return t.bE=0,t.vb=0,t.qR=0,void(f.metadata[i]=t)}const s=new h.A(t);s.Pc=s.length-18;const e=new a;e.data=t,e.bE=s.Fy,e.vb=s.Fy,e.qR=s.Hy,f.metadata[i]=e;const n=s.Hy,r=s.Hy,o=s.Hy,l=s.Hy,c=s.Hy,u=s.Fy,d=s.Fy,w=s.Fy,y=s.Fy;let A=0;e.$R=A,A+=e.bE,e.hS=A,A+=e.vb,e.rS=A,255===r?A+=e.vb:e.rS=-r-1,e.lS=A,1===l?A+=e.vb:e.lS=-1,e.nS=A,1===n?A+=e.vb:e.nS=-1,e.iS=A,1===c?A+=e.bE:e.iS=-1,e.oS=A,1===o?A+=e.vb:e.oS=-1,e.sS=A,A+=y,e.eS=A,A+=2*e.vb,e.aS=A,A+=6*e.qR,e.JR=A,A+=u,e.QR=A,A+=d,e.tS=A,A+=w}static Oo(){f.metadata=null,f.head=null,f.cS=null,f.fS=null,f.uS=null,f.dS=null,f.wS=null,f.yS=null,f.AS=null,f.pS=null,f.mS=null,f.IS=null,f._S=null,f.gS=null,f.axis=null,f.ES=null,f.CS=null,f.TS=null,f.OS=null,f.bS=null,f.vS=null,f.LS=null,f.RS=null,f.SS=null,f.MS=null,f.kS=null,f.xS=null,f.DS=null,f.NS=null,f.PS=null}static VS(t,i,s){return 2&~s?((i=i*(127&t)>>7)<2?i=2:i>126&&(i=126),(65408&t)+i):(i<0?i=0:i>127&&(i=127),127-i)}static OE=(t,i,s)=>{const h=t.bE,e=t.vb,n=t.qR;let r,o,a,u,d;if(i){r=new Int32Array(h);for(let i=0;i<h;i++)r[i]=t.RE[i]}else r=t.RE;let w=null,y=null;if(s){o=new Int32Array(e),a=new Int32Array(e),u=new Int32Array(e);for(let i=0;i<e;i++)t.KS&&(o[i]=t.KS[i]),t.XS&&(a[i]=t.XS[i]),t.zS&&(u[i]=t.zS[i]);if(d=new Int32Array(e),t.bb)for(let i=0;i<e;i++)d[i]=t.bb[i];else for(let t=0;t<e;t++)d[t]=0;w=new l.us(h,null);for(let i=0;i<h;i++){const s=w[i]=new c;if(t.ub){const h=t.ub[i];h&&(s.x=h.x,s.y=h.y,s.z=h.z,s.w=h.w)}}y=t._b}else o=t.KS,a=t.XS,u=t.zS,d=t.bb;return new f({bE:h,vE:t.vE,RE:r,LE:t.LE,vb:e,Lb:t.Lb,Rb:t.Rb,Sb:t.Sb,KS:o,XS:a,zS:u,bb:d,jS:t.jS,ZS:t.ZS,Pg:t.Pg,priority:t.priority,qR:n,qS:t.qS,$S:t.$S,JS:t.JS,Eb:t.Eb,Cb:t.Cb,Tb:t.Tb,Ob:t.Ob,zT:t.zT,gb:t.gb,PE:t.PE,QS:t.QS,tM:t.tM,ub:w,_b:y})};static Fg=(t,i,s,h)=>{const e=t.bE,n=t.vb,r=t.qR;let o,l,a,c,u;if(h)o=t.vE,l=t.RE,a=t.LE;else{o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e);for(let i=0;i<e;i++)o[i]=t.vE[i],l[i]=t.RE[i],a[i]=t.LE[i]}if(i)c=t.Pg;else{c=new Int32Array(n);for(let i=0;i<n;i++)t.Pg&&(c[i]=t.Pg[i])}if(s)u=t.ZS;else if(u=new Int32Array(n),t.ZS)for(let i=0;i<n;i++)u[i]=t.ZS[i];else for(let t=0;t<n;t++)u[t]=0;return new f({bE:e,vE:o,RE:l,LE:a,vb:n,Lb:t.Lb,Rb:t.Rb,Sb:t.Sb,KS:null,XS:null,zS:null,bb:t.bb,jS:t.jS,ZS:u,Pg:c,priority:t.priority,qR:r,qS:t.qS,$S:t.$S,JS:t.JS,iM:t.iM,sM:t.sM})};static GE=(t,i)=>{const s=t.bE,h=t.vb,e=t.qR,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s);for(let i=0;i<s;i++)n[i]=t.vE[i],r[i]=t.RE[i],o[i]=t.LE[i];let l;if(i)l=t.ZS;else if(l=new Int32Array(h),t.ZS)for(let i=0;i<h;i++)l[i]=t.ZS[i];else for(let t=0;t<h;t++)l[t]=0;return new f({bE:s,vE:n,RE:r,LE:o,vb:h,Lb:t.Lb,Rb:t.Rb,Sb:t.Sb,KS:t.KS,XS:t.XS,zS:t.zS,bb:t.bb,jS:t.jS,ZS:l,Pg:t.Pg,priority:t.priority,qR:e,qS:t.qS,$S:t.$S,JS:t.JS,xE:t.xE,kE:t.kE})};static kv=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.bE,o+=i.vb,l+=i.qR,s||=null!==i.bb,i.jS?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.ZS,n||=null!==i.Pg)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(o),y=new Int32Array(o),A=new Int32Array(o),p=new Int32Array(o),m=new Int32Array(o),I=new Int32Array(o),_=new Int32Array(l),g=new Int32Array(l),E=new Int32Array(l);let C=null;s&&(C=new Int32Array(o));let T=null;h&&(T=new Int32Array(o));let O=null;e&&(O=new Int32Array(o));let b=null;n&&(b=new Int32Array(o)),r=0,o=0,l=0;for(let a=0;a<i;a++){const i=t[a];if(i){const t=r;for(let t=0;t<i.bE;t++)c[r]=i.vE[t],u[r]=i.RE[t],d[r]=i.LE[t],r++;for(let r=0;r<i.vb;r++)w[o]=i.Lb[r]+t,y[o]=i.Rb[r]+t,A[o]=i.Sb[r]+t,i.KS&&(p[o]=i.KS[r]),i.XS&&(m[o]=i.XS[r]),i.zS&&(I[o]=i.zS[r]),s&&(i.bb?C&&(C[o]=i.bb[r]):C&&(C[o]=0)),h&&(i.jS?T&&(T[o]=i.jS[r]):T&&(T[o]=i.priority)),e&&(i.ZS?O&&(O[o]=i.ZS[r]):O&&(O[o]=0)),n&&i.Pg&&b&&(b[o]=i.Pg[r]),o++;for(let s=0;s<i.qR;s++)_[l]=i.qS[s]+t,g[l]=i.$S[s]+t,E[l]=i.JS[s]+t,l++}}const v=new f({bE:r,vE:c,RE:u,LE:d,vb:o,Lb:w,Rb:y,Sb:A,KS:p,XS:m,zS:I,bb:C,jS:T,ZS:O,Pg:b,priority:a,qR:l,qS:_,$S:g,JS:E});return v.WE(),v};static Oa=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.bE,o+=i.vb,l+=i.qR,s||=null!==i.bb,i.jS?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.ZS,n||=null!==i.sM)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(r),y=new Int32Array(o),A=new Int32Array(o),p=new Int32Array(o),m=new Int32Array(l),I=new Int32Array(l),_=new Int32Array(l);let g=null;s&&(g=new Int32Array(o));let E=null;h&&(E=new Int32Array(o));let C=null;e&&(C=new Int32Array(o));let T=null;n&&(T=new Int32Array(o));const O=new Int32Array(o);r=0,o=0,l=0;const b=(t,i,s,h,e,n,r)=>{let o=-1;const l=t.vE[i],a=t.RE[i],c=t.LE[i];for(let t=0;t<r;t++)if(l===s[t]&&a===h[t]&&c===e[t]){o=t;break}return-1===o&&(s[r]=l,h[r]=a,e[r]=c,n&&t.iM&&(n[r]=t.iM[i]),o=r++),{vertex:o,bE:r}};for(let a=0;a<i;a++){const i=t[a];if(i){for(let t=0;t<i.vb;t++){s&&(i.bb?g&&(g[o]=i.bb[t]):g&&(g[o]=0)),h&&(i.jS?E&&(E[o]=i.jS[t]):E&&(E[o]=i.priority)),e&&(i.ZS?C&&(C[o]=i.ZS[t]):C&&(C[o]=0)),n&&i.sM&&T&&(T[o]=i.sM[t]),i.Pg&&(O[o]=i.Pg[t]);const l=b(i,i.Lb[t],c,u,d,w,r);r=l.bE;const a=b(i,i.Rb[t],c,u,d,w,r);r=a.bE;const f=b(i,i.Sb[t],c,u,d,w,r);r=f.bE,y[o]=l.vertex,A[o]=a.vertex,p[o]=f.vertex,o++}for(let t=0;t<i.qR;t++){const s=b(i,i.qS[t],c,u,d,w,r);r=s.bE;const h=b(i,i.$S[t],c,u,d,w,r);r=h.bE;const e=b(i,i.JS[t],c,u,d,w,r);r=e.bE,m[l]=s.vertex,I[l]=h.vertex,_[l]=e.vertex,l++}}}return new f({bE:r,vE:c,RE:u,LE:d,vb:o,Lb:y,Rb:A,Sb:p,KS:null,XS:null,zS:null,bb:g,jS:E,ZS:C,Pg:O,priority:a,qR:l,qS:m,$S:I,JS:_,iM:w,sM:T})};static model=t=>{if(!f.metadata)throw new Error('cant loading model metadata!!!!!');const i=f.metadata[t];if(!i)throw console.log(`Error model:${t} not found!`),new Error('cant loading model metadata!!!!!');if(!(f.head&&f.cS&&f.fS&&f.uS&&f.dS&&f.wS&&f.yS&&f.AS&&f.pS&&f.mS&&f.IS&&f._S&&f.gS&&f.axis))throw new Error('cant loading model!!!!!');const s=i.bE,h=i.vb,e=i.qR,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s),l=new Int32Array(h),a=new Int32Array(h),c=new Int32Array(h),u=new Int32Array(e),d=new Int32Array(e),w=new Int32Array(e);let y=null;i.iS>=0&&(y=new Int32Array(s));let A=null;i.nS>=0&&(A=new Int32Array(h));let p=null,m=0;i.rS>=0?p=new Int32Array(h):m=-i.rS-1;let I=null;i.oS>=0&&(I=new Int32Array(h));let _=null;i.lS>=0&&(_=new Int32Array(h));const g=new Int32Array(h);f.yS.Pc=i.$R,f.AS.Pc=i.JR,f.pS.Pc=i.QR,f.mS.Pc=i.tS,f.IS.Pc=i.iS;let E,C,T,O=0,b=0,v=0;for(let t=0;t<s;t++){const i=f.yS.Hy;E=0,1&i&&(E=f.AS.WS),C=0,2&i&&(C=f.pS.WS),T=0,4&i&&(T=f.mS.WS),n[t]=O+E,r[t]=b+C,o[t]=v+T,O=n[t],b=r[t],v=o[t],y&&(y[t]=f.IS.Hy)}f.cS.Pc=i.eS,f.fS.Pc=i.nS,f.uS.Pc=i.rS,f.dS.Pc=i.oS,f.wS.Pc=i.lS;for(let t=0;t<h;t++)g[t]=f.cS.Fy,A&&(A[t]=f.fS.Hy),p&&(p[t]=f.uS.Hy),I&&(I[t]=f.dS.Hy),_&&(_[t]=f.wS.Hy);f._S.Pc=i.sS,f.gS.Pc=i.hS,E=0,C=0,T=0;let L=0;for(let t=0;t<h;t++){const i=f.gS.Hy;if(1===i)E=f._S.WS+L,L=E,C=f._S.WS+L,L=C,T=f._S.WS+L,L=T;else if(2===i)C=T,T=f._S.WS+L,L=T;else if(3===i)E=T,T=f._S.WS+L,L=T;else if(4===i){const t=E;E=C,C=t,T=f._S.WS+L,L=T}l[t]=E,a[t]=C,c[t]=T}f.axis.Pc=6*i.aS;for(let t=0;t<e;t++)u[t]=f.axis.Fy,d[t]=f.axis.Fy,w[t]=f.axis.Fy;return new f({bE:s,vE:n,RE:r,LE:o,vb:h,Lb:l,Rb:a,Sb:c,KS:null,XS:null,zS:null,bb:A,jS:p,ZS:I,Pg:g,priority:m,qR:e,qS:u,$S:d,JS:w,iM:y,sM:_})};static hM=(t,i)=>{if(!f.metadata||!f.metadata[i])throw new Error('No model metadata');const s=f.metadata[i];if(s.data=t,!s.data.length)throw new Error('No model data');const e=s.bE,n=s.vb,r=s.qR,o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e),c=new Int32Array(n),u=new Int32Array(n),d=new Int32Array(n),w=new Int32Array(r),y=new Int32Array(r),A=new Int32Array(r);let p=null;s.iS>=0&&(p=new Int32Array(e));let m=null;s.nS>=0&&(m=new Int32Array(n));let I=null,_=0;s.rS>=0?I=new Int32Array(n):_=-s.rS-1;let g=null;s.oS>=0&&(g=new Int32Array(n));let E=null;s.lS>=0&&(E=new Int32Array(n));const C=new Int32Array(n),T=new h.A(s.data);T.Pc=s.$R;const O=new h.A(s.data);O.Pc=s.JR;const b=new h.A(s.data);b.Pc=s.QR;const v=new h.A(s.data);v.Pc=s.tS;const L=new h.A(s.data);L.Pc=s.iS;let R,S,M,k=0,x=0,D=0;for(let t=0;t<e;t++){const i=T.Hy;R=0,1&i&&(R=O.WS),S=0,2&i&&(S=b.WS),M=0,4&i&&(M=v.WS),o[t]=k+R,l[t]=x+S,a[t]=D+M,k=o[t],x=l[t],D=a[t],p&&(p[t]=L.Hy)}const N=new h.A(s.data);N.Pc=s.eS;const P=new h.A(s.data);P.Pc=s.nS;const F=new h.A(s.data);F.Pc=s.rS;const U=new h.A(s.data);U.Pc=s.oS;const B=new h.A(s.data);B.Pc=s.lS;for(let t=0;t<n;t++)C[t]=N.Fy,m&&(m[t]=P.Hy),I&&(I[t]=F.Hy),g&&(g[t]=U.Hy),E&&(E[t]=B.Hy);const G=new h.A(s.data);G.Pc=s.sS;const H=new h.A(s.data);H.Pc=s.hS,R=0,S=0,M=0;let W=0;for(let t=0;t<n;t++){const i=H.Hy;if(1===i)R=G.WS+W,W=R,S=G.WS+W,W=S,M=G.WS+W,W=M;else if(2===i)S=M,M=G.WS+W,W=M;else if(3===i)R=M,M=G.WS+W,W=M;else if(4===i){const t=R;R=S,S=t,M=G.WS+W,W=M}c[t]=R,u[t]=S,d[t]=M}const Y=new h.A(s.data);Y.Pc=6*s.aS;for(let t=0;t<r;t++)w[t]=Y.Fy,y[t]=Y.Fy,A[t]=Y.Fy;return new f({bE:e,vE:o,RE:l,LE:a,vb:n,Lb:c,Rb:u,Sb:d,KS:null,XS:null,zS:null,bb:m,jS:I,ZS:g,Pg:C,priority:_,qR:r,qS:w,$S:y,JS:A,iM:p,sM:E})};bE;vE;RE;LE;vb;Lb;Rb;Sb;KS;XS;zS;bb;jS;ZS;Pg;priority;qR;qS;$S;JS;Eb;Cb;Tb;Ob;zT;gb;PE;QS;tM;iM;sM;xE;kE;ub;_b;NE=0;YE=!1;eM=-1;nM=-1;constructor(t){super(),this.bE=t.bE,this.vE=t.vE,this.RE=t.RE,this.LE=t.LE,this.vb=t.vb,this.Lb=t.Lb,this.Rb=t.Rb,this.Sb=t.Sb,this.KS=t.KS,this.XS=t.XS,this.zS=t.zS,this.bb=t.bb,this.jS=t.jS,this.ZS=t.ZS,this.Pg=t.Pg,this.priority=t.priority,this.qR=t.qR,this.qS=t.qS,this.$S=t.$S,this.JS=t.JS,this.Eb=t.Eb??0,this.Cb=t.Cb??0,this.Tb=t.Tb??0,this.Ob=t.Ob??0,this.zT=t.zT??0,this.gb=t.gb??0,this.PE=t.PE??0,this.QS=t.QS??0,this.tM=t.tM??0,this.iM=t.iM??null,this.sM=t.sM??null,this.xE=t.xE??null,this.kE=t.kE??null,this.ub=t.ub??null,this._b=t._b??null}WE(){this.PE=0,this.zT=0,this.gb=0;for(let t=0;t<this.bE;t++){const i=this.vE[t],s=this.RE[t],h=this.LE[t];-s>this.PE&&(this.PE=-s),s>this.gb&&(this.gb=s);const e=i*i+h*h;e>this.zT&&(this.zT=e)}this.zT=Math.sqrt(this.zT)+.99|0,this.tM=Math.sqrt(this.zT*this.zT+this.PE*this.PE)+.99|0,this.QS=this.tM+(Math.sqrt(this.zT*this.zT+this.gb*this.gb)+.99|0)}SE(){this.PE=0,this.gb=0;for(let t=0;t<this.bE;t++){const i=this.RE[t];-i>this.PE&&(this.PE=-i),i>this.gb&&(this.gb=i)}this.tM=Math.sqrt(this.zT*this.zT+this.PE*this.PE)+.99|0,this.QS=this.tM+(Math.sqrt(this.zT*this.zT+this.gb*this.gb)+.99|0)}Sa(){if(this.iM){const t=new Int32Array(256);let i=0;for(let s=0;s<this.bE;s++){const h=this.iM[s];t[h]++,h>i&&(i=h)}this.xE=new l.us(i+1,null);for(let s=0;s<=i;s++)this.xE[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.bE;){const i=this.iM[s],h=this.xE[i];h&&(h[t[i]++]=s++)}this.iM=null}if(this.sM){const t=new Int32Array(256);let i=0;for(let s=0;s<this.vb;s++){const h=this.sM[s];t[h]++,h>i&&(i=h)}this.kE=new l.us(i+1,null);for(let s=0;s<=i;s++)this.kE[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.vb;){const i=this.sM[s],h=this.kE[i];h&&(h[t[i]++]=s++)}this.sM=null}}HE(t,i,s){if(-1!==t)if(s&&-1!==i){const h=r.A.Lo[t],e=r.A.Lo[i],n=h.rM;f.In=0,f.GS=0,f._n=0;let o=0,l=s[o++];for(let t=0;t<h.length;t++){if(!h.oM)continue;const i=h.oM[t];for(;i>l;)l=s[o++];n&&n.types&&h.x&&h.y&&h.z&&n.labels&&(i!==l||0===n.types[i])&&this.lM(h.x[t],h.y[t],h.z[t],n.labels[i],n.types[i])}f.In=0,f.GS=0,f._n=0,o=0,l=s[o++];for(let t=0;t<e.length;t++){if(!e.oM)continue;const i=e.oM[t];for(;i>l;)l=s[o++];n&&n.types&&e.x&&e.y&&e.z&&n.labels&&(i===l||0===n.types[i])&&this.lM(e.x[t],e.y[t],e.z[t],n.labels[i],n.types[i])}}else this.Ma(t)}Ma(t){if(!this.xE||-1===t||!r.A.Lo[t])return;const i=r.A.Lo[t],s=i.rM;f.In=0,f.GS=0,f._n=0;for(let t=0;t<i.length;t++){if(!(i.oM&&i.x&&i.y&&i.z&&s&&s.labels&&s.types))continue;const h=i.oM[t];this.lM(i.x[t],i.y[t],i.z[t],s.labels[h],s.types[h])}}DE(){for(let t=0;t<this.bE;t++){const i=this.vE[t];this.vE[t]=this.LE[t],this.LE[t]=-i}}ZL(t){const i=n.A.sin[t],s=n.A.cos[t];for(let t=0;t<this.bE;t++){const h=this.RE[t]*s-this.LE[t]*i>>16;this.LE[t]=this.RE[t]*i+this.LE[t]*s>>16,this.RE[t]=h}}translate(t,i,s){for(let h=0;h<this.bE;h++)this.vE[h]+=i,this.RE[h]+=t,this.LE[h]+=s}ba(t,i){if(this.Pg)for(let s=0;s<this.vb;s++)this.Pg[s]===t&&(this.Pg[s]=i)}ME(){for(let t=0;t<this.bE;t++)this.LE[t]=-this.LE[t];for(let t=0;t<this.vb;t++){const i=this.Lb[t];this.Lb[t]=this.Sb[t],this.Sb[t]=i}}scale(t,i,s){for(let h=0;h<this.bE;h++)this.vE[h]=this.vE[h]*t/128|0,this.RE[h]=this.RE[h]*i/128|0,this.LE[h]=this.LE[h]*s/128|0}ka(t,i,s,h,e,n){const r=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;if(this.KS&&this.XS&&this.zS||(this.KS=new Int32Array(this.vb),this.XS=new Int32Array(this.vb),this.zS=new Int32Array(this.vb)),!this.ub){this.ub=new l.us(this.bE,null);for(let t=0;t<this.bE;t++)this.ub[t]=new c}for(let i=0;i<this.vb;i++){const n=this.Lb[i],o=this.Rb[i],l=this.Sb[i],a=this.vE[o]-this.vE[n],c=this.RE[o]-this.RE[n],u=this.LE[o]-this.LE[n],d=this.vE[l]-this.vE[n],w=this.RE[l]-this.RE[n],y=this.LE[l]-this.LE[n];let A=c*y-w*u,p=u*d-y*a,m=a*w-d*c;for(;A>8192||p>8192||m>8192||A<-8192||p<-8192||m<-8192;)A>>=1,p>>=1,m>>=1;let I=0|Math.sqrt(A*A+p*p+m*m);if(I<=0&&(I=1),A=256*A/I|0,p=256*p/I|0,m=256*m/I|0,this.bb&&1&this.bb[i]){const n=t+((s*A+h*p+e*m)/(r+(r/2|0))|0);this.Pg&&(this.KS[i]=f.VS(this.Pg[i],n,this.bb[i]))}else{let t=this.ub[n];t&&(t.x+=A,t.y+=p,t.z+=m,t.w++),t=this.ub[o],t&&(t.x+=A,t.y+=p,t.z+=m,t.w++),t=this.ub[l],t&&(t.x+=A,t.y+=p,t.z+=m,t.w++)}}if(n)this.Ab(t,r,s,h,e);else{this._b=new l.us(this.bE,null);for(let t=0;t<this.bE;t++){const i=this.ub[t],s=new c;i&&(s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w),this._b[t]=s}}n?this.WE():this.aM()}Ab(t,i,s,h,e){for(let n=0;n<this.vb;n++){const r=this.Lb[n],o=this.Rb[n],l=this.Sb[n];if(!this.bb&&this.Pg&&this.ub&&this.KS&&this.XS&&this.zS){const a=this.Pg[n],c=this.ub[r];c&&(this.KS[n]=f.VS(a,t+((s*c.x+h*c.y+e*c.z)/(i*c.w)|0),0));const u=this.ub[o];u&&(this.XS[n]=f.VS(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),0));const d=this.ub[l];d&&(this.zS[n]=f.VS(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),0))}else if(this.bb&&!(1&this.bb[n])&&this.Pg&&this.ub&&this.KS&&this.XS&&this.zS){const a=this.Pg[n],c=this.bb[n],u=this.ub[r];u&&(this.KS[n]=f.VS(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),c));const d=this.ub[o];d&&(this.XS[n]=f.VS(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),c));const w=this.ub[l];w&&(this.zS[n]=f.VS(a,t+((s*w.x+h*w.y+e*w.z)/(i*w.w)|0),c))}}if(this.ub=null,this._b=null,this.iM=null,this.sM=null,this.bb)for(let t=0;t<this.vb;t++)if(!(2&~this.bb[t]))return;this.Pg=null}aa(t,i,s,h,e,r,o){const l=n.A.sin[t],a=n.A.cos[t],c=n.A.sin[i],u=n.A.cos[i],d=n.A.sin[s],w=n.A.cos[s],y=n.A.sin[h],A=n.A.cos[h],p=r*y+o*A>>16;for(let h=0;h<this.bE;h++){let m,I=this.vE[h],_=this.RE[h],g=this.LE[h];0!==s&&(m=_*d+I*w>>16,_=_*w-I*d>>16,I=m),0!==t&&(m=_*a-g*l>>16,g=_*l+g*a>>16,_=m),0!==i&&(m=g*c+I*u>>16,g=g*u-I*c>>16,I=m),I+=e,_+=r,g+=o,m=_*A-g*y>>16,g=_*y+g*A>>16,_=m,f.TS&&f.OS&&f.bS&&(f.bS[h]=g-p,f.TS[h]=n.A.ea+((I<<9)/g|0),f.OS[h]=n.A.na+((_<<9)/g|0)),this.qR>0&&f.vS&&f.LS&&f.RS&&(f.vS[h]=I,f.LS[h]=_,f.RS[h]=g)}try{this.cM(!1,!1,0)}catch(t){}}draw(t,i,s,h,r,o,l,a,c){const u=a*r-o*h>>16,d=l*i+u*s>>16,w=this.zT*s>>16,y=d+w;if(y<=50||d>=3500)return;const A=a*h+o*r>>16;let p=A-this.zT<<9;if((p/y|0)>=e.A.LR)return;let m=A+this.zT<<9;if((m/y|0)<=-e.A.LR)return;const I=l*s-u*i>>16,_=this.zT*i>>16;let g=I+_<<9;if((g/y|0)<=-e.A.RR)return;let E=I-(_+(this.PE*s>>16))<<9;if((E/y|0)>=e.A.RR)return;let C=d-(w+(this.PE*i>>16))<=50,T=!1;if(c>0&&f.Yf){let t=d-w;t<=50&&(t=50),A>0?(p=p/y|0,m=m/t|0):(m=m/y|0,p=p/t|0),I>0?(E=E/y|0,g=g/t|0):(g=g/y|0,E=E/t|0);const i=f.kl-n.A.ea,s=f.xl-n.A.na;i>p&&i<m&&s>E&&s<g&&(this.YE?f.Jp[f.Vf++]=c:T=!0)}const O=n.A.ea,b=n.A.na;let v=0,L=0;0!==t&&(v=n.A.sin[t],L=n.A.cos[t]);for(let e=0;e<this.bE;e++){let n,c=this.vE[e],u=this.RE[e],w=this.LE[e];0!==t&&(n=w*v+c*L>>16,w=w*L-c*v>>16,c=n),c+=o,u+=l,w+=a,n=w*h+c*r>>16,w=w*r-c*h>>16,c=n,n=u*s-w*i>>16,w=u*i+w*s>>16,u=n,f.bS&&(f.bS[e]=w-d),w>=50&&f.TS&&f.OS?(f.TS[e]=O+((c<<9)/w|0),f.OS[e]=b+((u<<9)/w|0)):f.TS&&(f.TS[e]=-5e3,C=!0),(C||this.qR>0)&&f.vS&&f.LS&&f.RS&&(f.vS[e]=c,f.LS[e]=u,f.RS[e]=w)}try{this.cM(C,T,c)}catch(t){}}cM(t,i,s,h=!1){f.HS&&(this.eM=-1,this.nM=-1);for(let t=0;t<this.QS;t++)f.SS&&(f.SS[t]=0);for(let h=0;h<this.vb;h++)if((!this.bb||-1!==this.bb[h])&&f.TS&&f.OS&&f.bS&&f.MS&&f.SS){const n=this.Lb[h],r=this.Rb[h],o=this.Sb[h],l=f.TS[n],a=f.TS[r],c=f.TS[o],u=f.OS[n],d=f.OS[r],w=f.OS[o],y=f.bS[n],A=f.bS[r],p=f.bS[o];if(!t||-5e3!==l&&-5e3!==a&&-5e3!==c){i&&this.fM(f.kl,f.xl,u,d,w,l,a,c)&&(f.Jp[f.Vf++]=s,i=!1);if((l-a)*(w-d)-(u-d)*(c-a)<=0)continue;if(f.CS&&(f.CS[h]=!1),f.ES&&(f.ES[h]=l<0||a<0||c<0||l>e.A.av||a>e.A.av||c>e.A.av),f.MS&&f.SS){const t=((y+A+p)/3|0)+this.tM;f.MS[t][f.SS[t]++]=h,f.HS&&this.fM(f.kl,f.xl,u,d,w,l,a,c)&&this.nM<t&&(this.eM=h,this.nM=t)}}else if(f.CS&&(f.CS[h]=!0),f.MS&&f.SS){const t=((y+A+p)/3|0)+this.tM;f.MS[t][f.SS[t]++]=h}}if(!this.jS&&f.SS){for(let t=this.QS-1;t>=0;t--){const i=f.SS[t];if(!(i<=0)&&f.MS){const s=f.MS[t];for(let t=0;t<i;t++)this.uM(s[t],h)}}return}for(let t=0;t<12;t++)f.kS&&f.PS&&(f.kS[t]=0,f.PS[t]=0);if(f.SS)for(let t=this.QS-1;t>=0;t--){const i=f.SS[t];if(i>0&&f.MS){const s=f.MS[t];for(let h=0;h<i;h++)if(this.jS&&f.kS&&f.xS){const i=s[h],e=this.jS[i],n=f.kS[e]++;f.xS[e][n]=i,e<10&&f.PS?f.PS[e]+=t:10===e&&f.DS?f.DS[n]=t:f.NS&&(f.NS[n]=t)}}}let n=0;f.kS&&f.PS&&(f.kS[1]>0||f.kS[2]>0)&&(n=(f.PS[1]+f.PS[2])/(f.kS[1]+f.kS[2])|0);let r=0;f.kS&&f.PS&&(f.kS[3]>0||f.kS[4]>0)&&(r=(f.PS[3]+f.PS[4])/(f.kS[3]+f.kS[4])|0);let o=0;if(f.kS&&f.PS&&(f.kS[6]>0||f.kS[8]>0)&&(o=(f.PS[6]+f.PS[8])/(f.kS[6]+f.kS[8])|0),f.kS&&f.xS){let t,i=0,s=f.kS[10],e=f.xS[10],l=f.DS;i===s&&(i=0,s=f.kS[11],e=f.xS[11],l=f.NS),t=i<s&&l?l[i]:-1e3;for(let a=0;a<10;a++){for(;0===a&&t>n;)this.uM(e[i++],h),i===s&&e!==f.xS[11]&&(i=0,s=f.kS[11],e=f.xS[11],l=f.NS),t=i<s&&l?l[i]:-1e3;for(;3===a&&t>r;)this.uM(e[i++],h),i===s&&e!==f.xS[11]&&(i=0,s=f.kS[11],e=f.xS[11],l=f.NS),t=i<s&&l?l[i]:-1e3;for(;5===a&&t>o;)this.uM(e[i++],h),i===s&&e!==f.xS[11]&&(i=0,s=f.kS[11],e=f.xS[11],l=f.NS),t=i<s&&l?l[i]:-1e3;const c=f.kS[a],u=f.xS[a];for(let t=0;t<c;t++)this.uM(u[t],h)}for(;-1e3!==t;)this.uM(e[i++],h),i===s&&e!==f.xS[11]&&(i=0,e=f.xS[11],s=f.kS[11],l=f.NS),t=i<s&&l?l[i]:-1e3}}uM(t,i=!1){if(f.CS&&f.CS[t])return void this.dM(t,i);const s=this.Lb[t],h=this.Rb[t],e=this.Sb[t];let r;if(f.ES&&(n.A.lv=f.ES[t]),this.ZS?n.A.alpha=this.ZS[t]:n.A.alpha=0,r=this.bb?3&this.bb[t]:0,i&&f.TS&&f.OS&&this.KS&&this.XS&&this.zS)n.A.Pu(f.TS[s],f.OS[s],f.TS[h],f.OS[h],n.A.palette[this.KS[t]]),n.A.Pu(f.TS[h],f.OS[h],f.TS[e],f.OS[e],n.A.palette[this.XS[t]]),n.A.Pu(f.TS[e],f.OS[e],f.TS[s],f.OS[s],n.A.palette[this.zS[t]]);else if(0===r&&this.KS&&this.XS&&this.zS&&f.TS&&f.OS)n.A.dv(f.TS[s],f.TS[h],f.TS[e],f.OS[s],f.OS[h],f.OS[e],this.KS[t],this.XS[t],this.zS[t]);else if(1===r&&this.KS&&f.TS&&f.OS)n.A.XR(f.TS[s],f.TS[h],f.TS[e],f.OS[s],f.OS[h],f.OS[e],n.A.palette[this.KS[t]]);else if(2===r&&this.bb&&this.Pg&&this.KS&&this.XS&&this.zS&&f.TS&&f.OS&&f.vS&&f.LS&&f.RS){const i=this.bb[t]>>2,r=this.qS[i],o=this.$S[i],l=this.JS[i];n.A.pv(f.TS[s],f.TS[h],f.TS[e],f.OS[s],f.OS[h],f.OS[e],this.KS[t],this.XS[t],this.zS[t],f.vS[r],f.LS[r],f.RS[r],f.vS[o],f.vS[l],f.LS[o],f.LS[l],f.RS[o],f.RS[l],this.Pg[t])}else if(3===r&&this.bb&&this.Pg&&this.KS&&f.TS&&f.OS&&f.vS&&f.LS&&f.RS){const i=this.bb[t]>>2,r=this.qS[i],o=this.$S[i],l=this.JS[i];n.A.pv(f.TS[s],f.TS[h],f.TS[e],f.OS[s],f.OS[h],f.OS[e],this.KS[t],this.KS[t],this.KS[t],f.vS[r],f.LS[r],f.RS[r],f.vS[o],f.vS[l],f.LS[o],f.LS[l],f.RS[o],f.RS[l],this.Pg[t])}}dM(t,i=!1){let s=0;if(f.RS){const i=n.A.ea,h=n.A.na,e=this.Lb[t],r=this.Rb[t],o=this.Sb[t],l=f.RS[e],a=f.RS[r],c=f.RS[o];if(l>=50&&f.TS&&f.OS&&this.KS)f.FS[s]=f.TS[e],f.US[s]=f.OS[e],f.BS[s++]=this.KS[t];else if(f.vS&&f.LS&&this.KS){const u=f.vS[e],d=f.LS[e],w=this.KS[t];if(c>=50&&this.zS){const e=(50-l)*n.A.DR[c-l];f.FS[s]=i+((u+((f.vS[o]-u)*e>>16)<<9)/50|0),f.US[s]=h+((d+((f.LS[o]-d)*e>>16)<<9)/50|0),f.BS[s++]=w+((this.zS[t]-w)*e>>16)}if(a>=50&&this.XS){const e=(50-l)*n.A.DR[a-l];f.FS[s]=i+((u+((f.vS[r]-u)*e>>16)<<9)/50|0),f.US[s]=h+((d+((f.LS[r]-d)*e>>16)<<9)/50|0),f.BS[s++]=w+((this.XS[t]-w)*e>>16)}}if(a>=50&&f.TS&&f.OS&&this.XS)f.FS[s]=f.TS[r],f.US[s]=f.OS[r],f.BS[s++]=this.XS[t];else if(f.vS&&f.LS&&this.XS){const u=f.vS[r],d=f.LS[r],w=this.XS[t];if(l>=50&&this.KS){const r=(50-a)*n.A.DR[l-a];f.FS[s]=i+((u+((f.vS[e]-u)*r>>16)<<9)/50|0),f.US[s]=h+((d+((f.LS[e]-d)*r>>16)<<9)/50|0),f.BS[s++]=w+((this.KS[t]-w)*r>>16)}if(c>=50&&this.zS){const e=(50-a)*n.A.DR[c-a];f.FS[s]=i+((u+((f.vS[o]-u)*e>>16)<<9)/50|0),f.US[s]=h+((d+((f.LS[o]-d)*e>>16)<<9)/50|0),f.BS[s++]=w+((this.zS[t]-w)*e>>16)}}if(c>=50&&f.TS&&f.OS&&this.zS)f.FS[s]=f.TS[o],f.US[s]=f.OS[o],f.BS[s++]=this.zS[t];else if(f.vS&&f.LS&&this.zS){const u=f.vS[o],d=f.LS[o],w=this.zS[t];if(a>=50&&this.XS){const e=(50-c)*n.A.DR[a-c];f.FS[s]=i+((u+((f.vS[r]-u)*e>>16)<<9)/50|0),f.US[s]=h+((d+((f.LS[r]-d)*e>>16)<<9)/50|0),f.BS[s++]=w+((this.XS[t]-w)*e>>16)}if(l>=50&&this.KS){const r=(50-c)*n.A.DR[l-c];f.FS[s]=i+((u+((f.vS[e]-u)*r>>16)<<9)/50|0),f.US[s]=h+((d+((f.LS[e]-d)*r>>16)<<9)/50|0),f.BS[s++]=w+((this.KS[t]-w)*r>>16)}}}const h=f.FS[0],r=f.FS[1],o=f.FS[2],l=f.US[0],a=f.US[1],c=f.US[2];if(!((h-r)*(c-a)-(l-a)*(o-r)<=0))if(n.A.lv=!1,3===s){let s;if((h<0||r<0||o<0||h>e.A.av||r>e.A.av||o>e.A.av)&&(n.A.lv=!0),s=this.bb?3&this.bb[t]:0,i)n.A.Pu(h,r,l,a,f.BS[0]),n.A.Pu(r,o,a,c,f.BS[1]),n.A.Pu(o,h,c,l,f.BS[2]);else if(0===s)n.A.dv(h,r,o,l,a,c,f.BS[0],f.BS[1],f.BS[2]);else if(1===s&&this.KS)n.A.XR(h,r,o,l,a,c,n.A.palette[this.KS[t]]);else if(2===s&&this.bb&&this.Pg&&f.vS&&f.LS&&f.RS){const i=this.bb[t]>>2,s=this.qS[i],e=this.$S[i],u=this.JS[i];n.A.pv(h,r,o,l,a,c,f.BS[0],f.BS[1],f.BS[2],f.vS[s],f.LS[s],f.RS[s],f.vS[e],f.vS[u],f.LS[e],f.LS[u],f.RS[e],f.RS[u],this.Pg[t])}else if(3===s&&this.bb&&this.Pg&&this.KS&&f.vS&&f.LS&&f.RS){const i=this.bb[t]>>2,s=this.qS[i],e=this.$S[i],u=this.JS[i];n.A.pv(h,r,o,l,a,c,this.KS[t],this.KS[t],this.KS[t],f.vS[s],f.LS[s],f.RS[s],f.vS[e],f.vS[u],f.LS[e],f.LS[u],f.RS[e],f.RS[u],this.Pg[t])}}else if(4===s){let s;if((h<0||r<0||o<0||h>e.A.av||r>e.A.av||o>e.A.av||f.FS[3]<0||f.FS[3]>e.A.av)&&(n.A.lv=!0),s=this.bb?3&this.bb[t]:0,i)n.A.Pu(h,r,l,a,f.BS[0]),n.A.Pu(r,o,a,c,f.BS[1]),n.A.Pu(o,f.FS[3],c,f.US[3],f.BS[2]),n.A.Pu(f.FS[3],h,f.US[3],l,f.BS[3]);else if(0===s)n.A.dv(h,r,o,l,a,c,f.BS[0],f.BS[1],f.BS[2]),n.A.dv(h,o,f.FS[3],l,c,f.US[3],f.BS[0],f.BS[2],f.BS[3]);else if(1===s){if(this.KS){const i=n.A.palette[this.KS[t]];n.A.XR(h,r,o,l,a,c,i),n.A.XR(h,o,f.FS[3],l,c,f.US[3],i)}}else if(2===s&&this.bb&&this.Pg&&f.vS&&f.LS&&f.RS){const i=this.bb[t]>>2,s=this.qS[i],e=this.$S[i],u=this.JS[i];n.A.pv(h,r,o,l,a,c,f.BS[0],f.BS[1],f.BS[2],f.vS[s],f.LS[s],f.RS[s],f.vS[e],f.vS[u],f.LS[e],f.LS[u],f.RS[e],f.RS[u],this.Pg[t]),n.A.pv(h,o,f.FS[3],l,c,f.US[3],f.BS[0],f.BS[2],f.BS[3],f.vS[s],f.LS[s],f.RS[s],f.vS[e],f.vS[u],f.LS[e],f.LS[u],f.RS[e],f.RS[u],this.Pg[t])}else if(3===s&&this.bb&&this.Pg&&this.KS&&f.vS&&f.LS&&f.RS){const i=this.bb[t]>>2,s=this.qS[i],e=this.$S[i],u=this.JS[i];n.A.pv(h,r,o,l,a,c,this.KS[t],this.KS[t],this.KS[t],f.vS[s],f.LS[s],f.RS[s],f.vS[e],f.vS[u],f.LS[e],f.LS[u],f.RS[e],f.RS[u],this.Pg[t]),n.A.pv(h,o,f.FS[3],l,c,f.US[3],this.KS[t],this.KS[t],this.KS[t],f.vS[s],f.LS[s],f.RS[s],f.vS[e],f.vS[u],f.LS[e],f.LS[u],f.RS[e],f.RS[u],this.Pg[t])}}}lM(t,i,s,h,e){if(!h)return;const r=h.length;if(0===e){let e=0;f.In=0,f.GS=0,f._n=0;for(let t=0;t<r;t++){if(!this.xE)continue;const i=h[t];if(i<this.xE.length){const t=this.xE[i];if(t)for(let i=0;i<t.length;i++){const s=t[i];f.In+=this.vE[s],f.GS+=this.RE[s],f._n+=this.LE[s],e++}}}e>0?(f.In=(f.In/e|0)+t,f.GS=(f.GS/e|0)+i,f._n=(f._n/e|0)+s):(f.In=t,f.GS=i,f._n=s)}else if(1===e)for(let e=0;e<r;e++){const n=h[e];if(!this.xE||n>=this.xE.length)continue;const r=this.xE[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.vE[e]+=t,this.RE[e]+=i,this.LE[e]+=s}}else if(2===e)for(let e=0;e<r;e++){const r=h[e];if(!this.xE||r>=this.xE.length)continue;const o=this.xE[r];if(o)for(let h=0;h<o.length;h++){const e=o[h];this.vE[e]-=f.In,this.RE[e]-=f.GS,this.LE[e]-=f._n;const r=8*(255&t),l=8*(255&i),a=8*(255&s);let c,u;if(0!==a){c=n.A.sin[a],u=n.A.cos[a];const t=this.RE[e]*c+this.vE[e]*u>>16;this.RE[e]=this.RE[e]*u-this.vE[e]*c>>16,this.vE[e]=t}if(0!==r){c=n.A.sin[r],u=n.A.cos[r];const t=this.RE[e]*u-this.LE[e]*c>>16;this.LE[e]=this.RE[e]*c+this.LE[e]*u>>16,this.RE[e]=t}if(0!==l){c=n.A.sin[l],u=n.A.cos[l];const t=this.LE[e]*c+this.vE[e]*u>>16;this.LE[e]=this.LE[e]*u-this.vE[e]*c>>16,this.vE[e]=t}this.vE[e]+=f.In,this.RE[e]+=f.GS,this.LE[e]+=f._n}}else if(3===e)for(let e=0;e<r;e++){const n=h[e];if(!this.xE||n>=this.xE.length)continue;const r=this.xE[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.vE[e]-=f.In,this.RE[e]-=f.GS,this.LE[e]-=f._n,this.vE[e]=this.vE[e]*t/128|0,this.RE[e]=this.RE[e]*i/128|0,this.LE[e]=this.LE[e]*s/128|0,this.vE[e]+=f.In,this.RE[e]+=f.GS,this.LE[e]+=f._n}}else if(5===e&&this.kE&&this.ZS)for(let i=0;i<r;i++){const s=h[i];if(s>=this.kE.length)continue;const e=this.kE[s];if(e)for(let i=0;i<e.length;i++){const s=e[i];this.ZS[s]+=8*t,this.ZS[s]<0&&(this.ZS[s]=0),this.ZS[s]>255&&(this.ZS[s]=255)}}}aM(){this.PE=0,this.zT=0,this.gb=0,this.Eb=999999,this.Cb=-999999,this.Ob=-99999,this.Tb=99999;for(let t=0;t<this.bE;t++){const i=this.vE[t],s=this.RE[t],h=this.LE[t];i<this.Eb&&(this.Eb=i),i>this.Cb&&(this.Cb=i),h<this.Tb&&(this.Tb=h),h>this.Ob&&(this.Ob=h),-s>this.PE&&(this.PE=-s),s>this.gb&&(this.gb=s);const e=i*i+h*h;e>this.zT&&(this.zT=e)}this.zT=0|Math.sqrt(this.zT),this.tM=0|Math.sqrt(this.zT*this.zT+this.PE*this.PE),this.QS=this.tM+(0|Math.sqrt(this.zT*this.zT+this.gb*this.gb))}fM(t,i,s,h,e,n,r,o){return!(i<s&&i<h&&i<e)&&(!(i>s&&i>h&&i>e)&&(!(t<n&&t<r&&t<o)&&(t<=n||t<=r||t<=o)))}wM(t){if(!(f.TS&&f.OS&&this.KS&&this.XS&&this.zS))return;const i=this.Lb[t],s=this.Rb[t],h=this.Sb[t];n.A.Pu(f.TS[i],f.OS[i],f.TS[s],f.OS[s],n.A.palette[1e3]),n.A.Pu(f.TS[s],f.OS[s],f.TS[h],f.OS[h],n.A.palette[1e3]),n.A.Pu(f.TS[h],f.OS[h],f.TS[i],f.OS[i],n.A.palette[1e3])}}},2511:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(8950),e=s(1069),n=s(4474),r=s(880);class o extends n.A{ec;width;height;Ec;Cc;Nl;qu;constructor(t,i){super(),this.ec=new Int32Array(t*i),this.width=this.Nl=t,this.height=this.qu=i,this.Ec=this.Cc=0}static _c=async(t,i)=>{const s=t.read(i+'.dat');if(!s)throw new Error(`${i} jpeg not found!`);const h=await(0,r.r)(s),e=new o(h.width,h.height),n=new Uint32Array(h.data.buffer),l=e.ec;for(let t=0;t<l.length;t++){const i=n[t];l[t]=(i>>24&255)<<24|(255&i)<<16|(i>>8&255)<<8|i>>16&255}return e};static Xa=(t,i,s=0)=>{const h=new e.A(t.read(i+'.dat')),n=new e.A(t.read('index.dat'));n.Pc=h.Fy;const r=n.Fy,l=n.Fy,a=[],c=n.Hy-1;for(let t=0;t<c;t++)a[t+1]=n.tE,0===a[t+1]&&(a[t+1]=1);for(let t=0;t<s;t++)n.Pc+=2,h.Pc+=n.Fy*n.Fy,n.Pc+=1;if(h.Pc>h.length||n.Pc>n.length)throw new Error;const f=n.Hy,u=n.Hy,d=n.Fy,w=n.Fy,y=new o(d,w);y.Ec=f,y.Cc=u,y.Nl=r,y.qu=l;const A=n.Hy;if(0===A){const t=y.width*y.height;for(let i=0;i<t;i++)y.ec[i]=a[h.Hy]}else if(1===A){const t=y.width;for(let i=0;i<t;i++){const s=y.height;for(let e=0;e<s;e++)y.ec[i+e*t]=a[h.Hy]}}return y};bind(){h.A.bind(this.ec,this.width,this.height)}draw(t,i){t|=0,i|=0;let s=(t+=this.Ec)+(i+=this.Cc)*h.A.ZE,e=0,n=this.height,r=this.width,o=h.A.ZE-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.ZE}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.yM(r,n,this.ec,e,l,h.A.ec,s,o)}Dl(t,i,s){i|=0,s|=0;let e=(i+=this.Ec)+(s+=this.Cc)*h.A.ZE,n=0,r=this.height,o=this.width,l=h.A.ZE-o,a=0;if(s<h.A.top){const t=h.A.top-s;r-=t,s=h.A.top,n+=t*o,e+=t*h.A.ZE}if(s+r>h.A.bottom&&(r-=s+r-h.A.bottom),i<h.A.left){const t=h.A.left-i;o-=t,i=h.A.left,n+=t,e+=t,a+=t,l+=t}if(i+o>h.A.right){const t=i+o-h.A.right;o-=t,a+=t,l+=t}o>0&&r>0&&this.AM(o,r,this.ec,n,a,h.A.ec,e,l,t)}Qa(t,i){t|=0,i|=0;let s=(t+=this.Ec)+(i+=this.Cc)*h.A.ZE,e=0,n=this.height,r=this.width,o=h.A.ZE-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.ZE}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.pM(r,n,this.ec,e,l,h.A.ec,s,o)}$a(){const t=this.ec,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}}Ja(){const t=this.ec,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}}translate(t,i,s){for(let h=0;h<this.ec.length;h++){const e=this.ec[h];if(0!==e){let n=e>>16&255;n+=t,n<1?n=1:n>255&&(n=255);let r=e>>8&255;r+=i,r<1?r=1:r>255&&(r=255);let o=255&e;o+=s,o<1?o=1:o>255&&(o=255),this.ec[h]=(n<<16)+(r<<8)+o}}}sC(t,i,s,e){t|=0,i|=0,s|=0,e|=0;try{const n=this.width;let r=0,o=0;const l=this.Nl,a=this.qu,c=(l<<16)/s|0,f=(a<<16)/e|0;t+=(this.Ec*s+l-1)/l|0,i+=(this.Cc*e+a-1)/a|0,this.Ec*s%l!=0&&(r=(l-this.Ec*s%l<<16)/s|0),this.Cc*e%a!=0&&(o=(a-this.Cc*e%a<<16)/e|0),s=s*(this.width-(r>>16))/l|0,e=e*(this.height-(o>>16))/a|0;let u=t+i*h.A.ZE,d=h.A.ZE-s;if(i<h.A.top){const t=h.A.top-i;e-=t,i=0,u+=t*h.A.ZE,o+=f*t}if(i+e>h.A.bottom&&(e-=i+e-h.A.bottom),t<h.A.left){const i=h.A.left-t;s-=i,t=0,u+=i,r+=c*i,d+=i}if(t+s>h.A.right){const i=t+s-h.A.right;s-=i,d+=i}this.scale(s,e,this.ec,r,o,h.A.ec,d,u,n,c,f)}catch(t){console.error('error in sprite clipping routine')}}Ku(t,i,s,e,n,r,o,l,a,c){t|=0,i|=0,s|=0,e|=0;try{const f=-s/2|0,u=-e/2|0,d=65536*Math.sin(a/326.11)|0,w=65536*Math.cos(a/326.11)|0,y=d*c>>8,A=w*c>>8;let p=(o<<16)+u*y+f*A,m=u*A-f*y+(l<<16),I=t+i*h.A.ZE;for(let t=0;t<e;t++){const i=n[t];let s=I+i,e=p+A*i,o=m-y*i;for(let i=-r[t];i<0;i++)h.A.ec[s++]=this.ec[(e>>16)+(o>>16)*this.width],e+=A,o-=y;p+=y,m+=A,I+=h.A.ZE}}catch(t){}}Zu(t,i,s){t|=0,i|=0;let e=(t+=this.Ec)+(i+=this.Cc)*h.A.ZE,n=0,r=this.height,o=this.width,l=h.A.ZE-o,a=0;if(i<h.A.top){const t=h.A.top-i;r-=t,i=h.A.top,n+=t*o,e+=t*h.A.ZE}if(i+r>h.A.bottom&&(r-=i+r-h.A.bottom),t<h.A.left){const i=h.A.left-t;o-=i,t=h.A.left,n+=i,e+=i,a+=i,l+=i}if(t+o>h.A.right){const i=t+o-h.A.right;o-=i,a+=i,l+=i}o>0&&r>0&&this.mM(o,r,this.ec,a,n,h.A.ec,e,l,s.ec)}scale(t,i,s,h,e,n,r,o,l,a,c){try{const f=h;for(let u=-i;u<0;u++){const i=(e>>16)*l;for(let e=-t;e<0;e++){const t=s[(h>>16)+i];0===t?o++:n[o++]=t,h+=a}e+=c,h=f,o+=r}}catch(t){console.error('error in plot_scale')}}pM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++)n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++];for(let i=t;i<0;i++)n[r++]=s[h++];r+=o,h+=e}}AM(t,i,s,h,e,n,r,o,l){const a=256-l;for(let c=-i;c<0;c++){for(let i=-t;i<0;i++){const t=s[h++];if(0===t)r++;else{const i=n[r];n[r++]=((16711935&t)*l+(16711935&i)*a&4278255360)+((65280&t)*l+(65280&i)*a&16711680)>>8}}r+=o,h+=e}}yM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=t}r+=o,h+=e}}mM(t,i,s,h,e,n,r,o,l){const a=-(t>>2);t=-(3&t);for(let c=-i;c<0;c++){for(let t=a;t<0;t++){let t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++}for(let i=t;i<0;i++){const t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++}r+=o,e+=h}}}},1673:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8950),e=s(1069),n=s(4474);class r extends n.A{ec;width;height;Ec;Cc;Nl;qu;palette;constructor(t,i,s){super(),this.ec=new Int8Array(t*i),this.width=this.Nl=t,this.height=this.qu=i,this.Ec=this.Cc=0,this.palette=s}static Xa=(t,i,s=0)=>{const h=new e.A(t.read(i+'.dat')),n=new e.A(t.read('index.dat'));n.Pc=h.Fy;const o=n.Fy,l=n.Fy,a=n.Hy,c=new Int32Array(a);for(let t=1;t<a;t++)c[t]=n.tE,0===c[t]&&(c[t]=1);for(let t=0;t<s;t++)n.Pc+=2,h.Pc+=n.Fy*n.Fy,n.Pc+=1;if(h.Pc>h.length||n.Pc>n.length)throw new Error;const f=n.Hy,u=n.Hy,d=n.Fy,w=n.Fy,y=new r(d,w,c);y.Ec=f,y.Cc=u,y.Nl=o,y.qu=l;const A=y.ec,p=n.Hy;if(0===p){const t=y.width*y.height;for(let i=0;i<t;i++)A[i]=h.By}else if(1===p){const t=y.width,i=y.height;for(let s=0;s<t;s++)for(let e=0;e<i;e++)A[s+e*t]=h.By}return y};draw(t,i){t|=0,i|=0;let s=(t+=this.Ec)+(i+=this.Cc)*h.A.ZE,e=0,n=this.height,r=this.width,o=h.A.ZE-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.ZE}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.IM(r,n,this.ec,e,l,h.A.ec,s,o)}$a(){const t=this.ec,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}}Ja(){const t=this.ec,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}}translate(t,i,s){for(let h=0;h<this.palette.length;h++){let e=this.palette[h]>>16&255;e+=t,e<0?e=0:e>255&&(e=255);let n=this.palette[h]>>8&255;n+=i,n<0?n=0:n>255&&(n=255);let r=255&this.palette[h];r+=s,r<0?r=0:r>255&&(r=255),this.palette[h]=(e<<16)+(n<<8)+r}}YR(){this.Nl|=0,this.qu|=0,this.Nl/=2,this.qu/=2,this.Nl|=0,this.qu|=0;const t=new Int8Array(this.Nl*this.qu);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[(h+this.Ec>>1)+(s+this.Cc>>1)*this.Nl]=this.ec[i++];this.ec=t,this.width=this.Nl,this.height=this.qu,this.Ec=0,this.Cc=0}sC(){if(this.width===this.Nl&&this.height===this.qu)return;const t=new Int8Array(this.Nl*this.qu);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[h+this.Ec+(s+this.Cc)*this.Nl]=this.ec[i++];this.ec=t,this.width=this.Nl,this.height=this.qu,this.Ec=0,this.Cc=0}IM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t]}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=this.palette[255&t]}r+=o,h+=e}}clip(t,i,s,e){try{const n=this.width;this.height;let r=0,o=0;const l=this.Nl,a=this.qu,c=(l<<16)/s|0,f=(a<<16)/e|0;t=t+(this.Ec*s+l-1)/l|0,i=i+(this.Cc*e+a-1)/a|0,this.Ec*s%l!=0&&(r=(l-this.Ec*s%l<<16)/s|0),this.Cc*e%a!=0&&(o=(a-this.Cc*e%a<<16)/e|0),s=s*(this.width-(r>>16))/l|0,e=e*(this.height-(o>>16))/a|0;let u,d=t+i*h.A.ZE,w=h.A.ZE-s;i<h.A.top&&(u=h.A.top-i,e-=u,i=0,d+=u*h.A.ZE,o+=f*u),i+e>h.A.bottom&&(e-=i+e-h.A.bottom),t<h.A.left&&(u=h.A.left-t,s-=u,t=0,d+=u,r+=c*u,w+=u),t+s>h.A.right&&(u=t+s-h.A.right,s-=u,w+=u),this._M(h.A.ec,this.ec,this.palette,r,o,d,w,s,e,c,f,n)}catch(t){console.log('error in sprite clipping routine')}}_M(t,i,s,h,e,n,r,o,l,a,c,f){try{const u=h;for(let d=-l;d<0;d++){const l=(e>>16)*f;for(let e=-o;e<0;e++){const e=i[(h>>16)+l];0==e?n++:t[n++]=s[255&e],h+=a}e+=c,h=u,n+=r}}catch(t){console.log('error in plot_scale')}}}},2682:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(8950),e=s(1069),n=s(4474);class r{seed;constructor(t){this.seed=(0x5deece66dn^t)&(1n<<48n)-1n}gM(t){this.seed=(0x5deece66dn^t)&(1n<<48n)-1n}Ny(){return this.next(32)}next(t){return this.seed=0x5deece66dn*this.seed+0xbn&(1n<<48n)-1n,Number(this.seed)>>>48-t}}var o=s(9298);class l extends n.A{static kc='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!"£$%^&*()-_=+[{]};:\'@#~,<.>/?\\| ';static EM=[];static{const t=navigator.userAgent.includes('Capacitor');for(let i=0;i<256;i++){let s=l.kc.indexOf(String.fromCharCode(i));t&&s>=63&&s--,-1===s&&(s=74),l.EM[i]=s}}CM=[];TM=new Int32Array(94);OM=new Int32Array(94);bM=new Int32Array(94);vM=new Int32Array(94);LM=new Int32Array(95);RM=new Int32Array(256);random=new r(BigInt(Date.now()));height=0;static Xa=(t,i)=>{const s=new e.A(t.read(i+'.dat')),h=new e.A(t.read('index.dat'));h.Pc=s.Fy+4;const n=h.Hy;n>0&&(h.Pc+=3*(n-1));const r=new l;for(let t=0;t<94;t++){r.bM[t]=h.Hy,r.vM[t]=h.Hy;const i=r.TM[t]=h.Fy,e=r.OM[t]=h.Fy,n=h.Hy,o=i*e;if(r.CM[t]=new Int8Array(o),0===n)for(let h=0;h<i*e;h++)r.CM[t][h]=s.By;else if(1===n)for(let h=0;h<i;h++)for(let n=0;n<e;n++)r.CM[t][h+n*i]=s.By;e>r.height&&(r.height=e),r.bM[t]=1,r.LM[t]=i+2;{let s=0;for(let h=e/7|0;h<e;h++)s+=r.CM[t][h*i];s<=(e/7|0)&&(r.LM[t]--,r.bM[t]=0)}{let s=0;for(let h=e/7|0;h<e;h++)s+=r.CM[t][i+h*i-1];s<=(e/7|0)&&r.LM[t]--}}r.LM[94]=r.LM[8];for(let t=0;t<256;t++)r.RM[t]=r.LM[l.EM[t]];return r};Pl(t,i,s,h){if(!s)return;t|=0,i|=0;const e=s.length;i-=this.height;for(let n=0;n<e;n++){const e=l.EM[s.charCodeAt(n)];94!==e&&this.SM(this.CM[e],t+this.bM[e],i+this.vM[e],this.TM[e],this.OM[e],h),t+=this.LM[e]}}Ql(t,i,s,h,e){t|=0,i|=0;const n=s.length;i-=this.height;for(let r=0;r<n;r++)if('@'===s.charAt(r)&&r+4<n&&'@'===s.charAt(r+4))h=this.MM(s.substring(r+1,r+4)),r+=4;else{const n=l.EM[s.charCodeAt(r)];94!==n&&(e&&this.SM(this.CM[n],t+this.bM[n]+1,i+this.vM[n]+1,this.TM[n],this.OM[n],o.A.Ul),this.SM(this.CM[n],t+this.bM[n],i+this.vM[n],this.TM[n],this.OM[n],h)),t+=this.LM[n]}}ou(t){if(!t)return 0;const i=t.length;let s=0;for(let h=0;h<i;h++)'@'===t.charAt(h)&&h+4<i&&'@'===t.charAt(h+4)?h+=4:s+=this.RM[t.charCodeAt(h)];return s}$l(t,i,s,h,e){t|=0,i|=0,this.Ql(t-this.ou(s)/2,i,s,h,e)}wc(t,i,s,h){s&&(t|=0,i|=0,this.Pl(t-this.ou(s)/2,i,s,h))}_d(t,i,s,h,e,n){t|=0,i|=0,this.random.gM(BigInt(n));const r=192+(31&this.random.Ny()),a=i-this.height;for(let i=0;i<s.length;i++)if('@'===s.charAt(i)&&i+4<s.length&&'@'===s.charAt(i+4))h=this.MM(s.substring(i+1,i+4)),i+=4;else{const n=l.EM[s.charCodeAt(i)];94!==n&&(e&&this.kM(t+this.bM[n]+1,a+this.vM[n]+1,this.TM[n],this.OM[n],o.A.Ul,192,this.CM[n]),this.kM(t+this.bM[n],a+this.vM[n],this.TM[n],this.OM[n],h,r,this.CM[n])),t+=this.LM[n],3&this.random.Ny()||t++}}Ru(t,i,s,h,e=!0){t|=0,i|=0,e&&this.Pl(t-this.ou(s)+1,i+1,s,o.A.Ul),this.Pl(t-this.ou(s),i,s,h)}vu(t,i,s,h,e){if(!s)return;t|=0,i|=0,t-=this.ou(s)/2|0;const n=i-this.height;for(let i=0;i<s.length;i++){const r=l.EM[s.charCodeAt(i)];94!=r&&this.SM(this.CM[r],t+this.bM[r],n+this.vM[r]+(5*Math.sin(i/2+e/5)|0),this.TM[r],this.OM[r],h),t+=this.LM[r]}}SM(t,i,s,e,n,r){e|=0,n|=0;let o=(i|=0)+(s|=0)*h.A.ZE,l=h.A.ZE-e,a=0,c=0;if(s<h.A.top){const t=h.A.top-s;n-=t,s=h.A.top,c+=t*e,o+=t*h.A.ZE}if(s+n>=h.A.bottom&&(n-=s+n+1-h.A.bottom),i<h.A.left){const t=h.A.left-i;e-=t,i=h.A.left,c+=t,o+=t,a+=t,l+=t}if(i+e>=h.A.right){const t=i+e+1-h.A.right;e-=t,a+=t,l+=t}e>0&&n>0&&this.xM(e,n,t,c,a,h.A.ec,o,l,r)}kM(t,i,s,e,n,r,o){s|=0,e|=0;let l=(t|=0)+(i|=0)*h.A.ZE,a=h.A.ZE-s,c=0,f=0;if(i<h.A.top){const t=h.A.top-i;e-=t,i=h.A.top,f+=t*s,l+=t*h.A.ZE}if(i+e>=h.A.bottom&&(e-=i+e+1-h.A.bottom),t<h.A.left){const i=h.A.left-t;s-=i,t=h.A.left,f+=i,l+=i,c+=i,a+=i}if(t+s>=h.A.right){const i=t+s+1-h.A.right;s-=i,c+=i,a+=i}s>0&&e>0&&this.DM(s,e,h.A.ec,l,a,o,f,c,n,r)}xM(t,i,s,h,e,n,r,o,l){const a=-((t|=0)>>2);t=-(3&t);for(let c=-(i|=0);c<0;c++){for(let t=a;t<0;t++)0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l;for(let i=t;i<0;i++)0===s[h++]?r++:n[r++]=l;r+=o,h+=e}}DM(t,i,s,h,e,n,r,o,l,a){t|=0;const c=((16711935&l)*a&4278255360)+((65280&l)*a&16711680)>>8,f=256-a;for(let l=-(i|=0);l<0;l++){for(let i=-t;i<0;i++)if(0===n[r++])h++;else{const t=s[h];s[h++]=(((16711935&t)*f&4278255360)+((65280&t)*f&16711680)>>8)+c}h+=e,r+=o}}MM(t){return'red'===t?o.A.RED:'gre'===t?o.A.GREEN:'blu'===t?o.A.BLUE:'yel'===t?o.A.Bl:'cya'===t?o.A.Oc:'mag'===t?o.A.bc:'whi'===t?o.A.Il:'bla'===t?o.A.Ul:'lre'===t?o.A.gR:'dre'===t?o.A.Wu:'dbl'===t?o.A.Hu:'or1'===t?o.A.ER:'or2'===t?o.A.CR:'or3'===t?o.A.TR:'gr1'===t?o.A.OR:'gr2'===t?o.A.bR:'gr3'===t?o.A.vR:o.A.Ul}split(t,i){if(0===t.length)return[t];const s=[];for(;t.length>0;){if(this.ou(t)<=i&&-1===t.indexOf('|')){s.push(t);break}let h=t.length;for(let s=0;s<t.length;s++)if(' '===t[s]){if(this.ou(t.substring(0,s))>i)break;h=s}else if('|'===t[s]){h=s;break}s.push(t.substring(0,h)),t=t.substring(h+1)}return s}}},1183:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(8950),e=s(7854);class n{NM;width;height;PM;FM;ec;constructor(t,i,s=e.zo){this.PM=s,this.NM=this.PM.getImageData(0,0,t,i),this.FM=new Uint32Array(this.NM.data.buffer),this.ec=new Int32Array(t*i),this.width=t,this.height=i,this.bind()}clear(){this.ec.fill(0)}bind(){h.A.bind(this.ec,this.width,this.height)}draw(t,i){this.#t(),this.PM.putImageData(this.NM,t,i)}#t(){const t=this.ec.length,i=this.ec,s=this.FM;for(let h=0;h<t;h++){const t=i[h];s[h]=t>>16&255|(t>>8&255)<<8|(255&t)<<16|4278190080}}}},182:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(3867);class n{static Lo=[];static hc=t=>{const i=new h.A(t.read('base_head.dat')),s=new h.A(t.read('base_type.dat')),r=new h.A(t.read('base_label.dat')),o=i.Fy;i.Pc+=2;for(let t=0;t<o;t++){const t=i.Fy,h=i.Hy,o=new Uint8Array(h),l=new e.us(h,null);for(let t=0;t<h;t++){o[t]=s.Hy;const i=r.Hy,h=new Uint8Array(i);for(let t=0;t<i;t++)h[t]=r.Hy;l[t]=h}this.Lo[t]=new n,this.Lo[t].length=h,this.Lo[t].types=o,this.Lo[t].labels=l}};length=0;types=null;labels=null}},7018:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(182),e=s(1069);class n{static Lo=[];static hc=t=>{const i=new e.A(t.read('frame_head.dat')),s=new e.A(t.read('frame_tran1.dat')),r=new e.A(t.read('frame_tran2.dat')),o=new e.A(t.read('frame_del.dat')),l=i.Fy;i.Pc+=2;const a=new Int32Array(500),c=new Int32Array(500),f=new Int32Array(500),u=new Int32Array(500);for(let t=0;t<l;t++){const t=i.Fy,e=this.Lo[t]=new n;e.delay=o.Hy;const l=i.Fy,d=h.A.Lo[l];e.rM=d;const w=i.Hy;let y=-1,A=0;for(let t=0;t<w;t++){if(!d.types)throw new Error('SeqBase not loaded!!!');const i=s.Hy;if(i>0){if(0!==d.types[t])for(let i=t-1;i>y;i--)if(0===d.types[i]){a[A]=i,c[A]=0,f[A]=0,u[A]=0,A++;break}a[A]=t;let s=0;3===d.types[a[A]]&&(s=128),c[A]=1&i?r.WS:s,f[A]=2&i?r.WS:s,u[A]=4&i?r.WS:s,y=t,A++}}e.length=A,e.oM=new Int32Array(A),e.x=new Int32Array(A),e.y=new Int32Array(A),e.z=new Int32Array(A);for(let t=0;t<A;t++)e.oM[t]=a[t],e.x[t]=c[t],e.y[t]=f[t],e.z[t]=u[t]}};delay=0;rM=null;length=0;oM=null;x=null;y=null;z=null}},3955:(t,i,s)=>{s.d(i,{A:()=>h});class h{static zy=150;static Ef=70;static Tf=108;static jc=81;static if=189;static pw=7;static Pd=88;static kd=30;static Gd=176;static Ld=220;static _w=66;static fw=17;static Zd=2;static ww=238;static $w=233;static Uf=146;static af=215;static Cf=236;static xI=85;static hI=219;static tw=140;static ew=40;static hw=200;static iw=178;static sw=247;static Iw=138;static Wd=239;static Bd=194;static Nd=8;static Fd=27;static Ud=113;static Hd=100;static Jd=134;static jd=202;static Vd=245;static nw=172;static Ew=96;static mw=97;static gw=116;static Qd=9;static vd=75;static Td=164;static qd=53;static $d=185;static Cd=206;static Mw=177;static Ow=248;static xd=195;static Dd=71;static Md=133;static Rd=157;static Sd=211;static Xd=48;static Kd=130;static dw=31;static Aw=59;static cw=212;static yw=38;static uw=6;static aw=155;static zd=235;static xy=231;static sy=237;static Sf=175;static Im=93;static Kw=190;static pm=165;static ef=159;static wy=171;static uy=79;static Ww=52;static iy=244;static Jw=148;static ly=11;static oy=118;static ey=4;static ny=158;static Am=181}},3554:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(6666),e=s(1982);class n{UM;BM;GM;closed=!1;HM=!1;static Dc=async t=>await new Promise(((i,s)=>{const h=t.host.startsWith('https'),e=h?'wss':'ws',n=t.host.substring(t.host.indexOf('//')+2),r=h?t.port+2:t.port+1,o=new WebSocket(`${e}://${n}:${r}`,'binary');o.addEventListener('open',(()=>{console.log('connection open!'),i(o)})),o.addEventListener('error',(()=>{console.log('connection error!'),s(o)}))}));constructor(t){t.onclose=this.onclose,t.onerror=this.onerror,this.BM=new l(t,5e3),this.GM=new r(t,5e3),this.UM=t}get host(){return this.UM.url.split('/')[2]}get port(){return parseInt(this.UM.url.split(':')[2],10)}get available(){return this.closed?0:this.BM.available}write(t,i){this.GM.write(t,i)}async read(){return this.closed?0:this.BM.WM()??await this.BM.YM()}async Nc(t,i,s){if(!this.closed)for(;s>0;){const h=this.BM.VM(t,i,s)??await this.BM.KM(t,i,s);if(h.length<=0)throw new Error('EOF');i+=h.length,s-=h.length}}close(){this.closed=!0,this.UM.close(),this.BM.close(),this.GM.close(),console.log('connection close!'),this.HM&&console.log('connection error!')}onclose=t=>{this.closed||this.close()};onerror=t=>{this.closed||(this.HM=!0,this.close())}}class r{UM;XM;closed=!1;HM=!1;constructor(t,i){this.UM=t,this.XM=i}write(t,i){if(!this.closed){if(this.HM)throw this.HM=!1,new Error('Error in writer thread');if(i>this.XM||t.length>this.XM)throw new Error('buffer overflow');try{this.UM.send(t.subarray(0,i))}catch(t){this.HM=!0}}}close(){this.closed=!0}}class o extends e.A{vm;position;constructor(t){super(),this.vm=t,this.position=0}get available(){return this.vm.length-this.position}get read(){return this.vm[this.position++]}get zM(){return this.vm.length}}class l{XM;queue=new h.A;event=null;jM=null;total=0;closed=!1;constructor(t,i){this.XM=i,t.binaryType='arraybuffer',t.onmessage=this.onmessage}get available(){return this.total}onmessage=t=>{if(this.closed)throw new Error('WebSocketReader is closed!');const i=new o(new Uint8Array(t.data));if(this.event?this.queue.KI(i):this.event=i,this.total+=i.zM,this.jM&&(this.jM(this.event),this.jM=null,this.total>this.XM))throw new Error('buffer overflow')};ZM(){return this.event&&this.event.available>0?this.event.read:null}async qM(t){for(this.event=this.queue.Kb();this.total<t;)await new Promise((t=>this.jM=t));return this.event?this.event.read:this.qM(t)}VM(t,i,s){if(this.closed)throw new Error('WebSocketReader is closed!');if(!(this.event&&this.event.available>=s))return null;for(;s>0;){const h=this.ZM();if(null===h)throw new Error('EOF - tried to read a fast byte when there was not enough immediate bytes.');t[i++]=h,this.total--,s--}return t}async KM(t,i,s){if(this.closed)throw new Error('WebSocketReader is closed!');for(;s>0;)t[i++]=this.ZM()??await this.qM(s),this.total--,s--;return t}WM(){if(this.closed)throw new Error('WebSocketReader is closed!');const t=this.ZM();return null===t?null:(this.total--,t)}async YM(){if(this.closed)throw new Error('WebSocketReader is closed!');const t=await this.qM(1);return this.total--,t}close(){this.closed=!0,this.jM=null,this.total=0,this.event=null,this.queue.clear()}}},4544:(t,i,s)=>{s.d(i,{A:()=>h});class h{db;constructor(t){t.onerror=this.onerror,t.onclose=this.onclose,this.db=t}static openDatabase=async()=>await new Promise(((t,i)=>{const s=indexedDB.open('lostcity',1);s.onsuccess=i=>{const s=i.target;console.log('database success!'),t(s.result)},s.onupgradeneeded=t=>{t.target.result.createObjectStore('cache')},s.onerror=t=>{const s=t.target;console.error('database error!: ',s.error),i(s.result)}}));Fo=async t=>await new Promise((i=>{const s=this.db.transaction('cache','readonly').objectStore('cache').get(t);s.onsuccess=()=>{i(s.result)},s.onerror=t=>{i(void 0)}}));Wo=async(t,i)=>await new Promise(((s,h)=>{const e=this.db.transaction('cache','readwrite').objectStore('cache').put(i,t);e.onsuccess=()=>{s()},e.onerror=t=>{h()}}));onclose=t=>{console.log('database close!')};onerror=t=>{console.log('database error!')};$M=t=>{const i=t.trim();let s=0;for(let t=0;t<i.length&&t<12;t++){const h=i.charAt(t);s*=37,h>='A'&&h<='Z'?s+=h.charCodeAt(0)+1-65:h>='a'&&h<='z'?s+=h.charCodeAt(0)+1-97:h>='0'&&h<='9'&&(s+=h.charCodeAt(0)+27-48)}return s}}},2634:(t,i,s)=>{s.d(i,{A:()=>h});class h{count=0;JM=new Int32Array(256);QM=new Int32Array(256);a=0;b=0;c=0;constructor(t){for(let i=0;i<t.length;i++)this.JM[i]=t[i];this.init()}get Ny(){return 0==this.count--&&(this.tk(),this.count=255),this.JM[this.count]}init(){let t=2654435769,i=2654435769,s=2654435769,h=2654435769,e=2654435769,n=2654435769,r=2654435769,o=2654435769;for(let l=0;l<4;l++)t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i;for(let l=0;l<256;l+=8)t+=this.JM[l],i+=this.JM[l+1],s+=this.JM[l+2],h+=this.JM[l+3],e+=this.JM[l+4],n+=this.JM[l+5],r+=this.JM[l+6],o+=this.JM[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.QM[l]=t,this.QM[l+1]=i,this.QM[l+2]=s,this.QM[l+3]=h,this.QM[l+4]=e,this.QM[l+5]=n,this.QM[l+6]=r,this.QM[l+7]=o;for(let l=0;l<256;l+=8)t+=this.QM[l],i+=this.QM[l+1],s+=this.QM[l+2],h+=this.QM[l+3],e+=this.QM[l+4],n+=this.QM[l+5],r+=this.QM[l+6],o+=this.QM[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.QM[l]=t,this.QM[l+1]=i,this.QM[l+2]=s,this.QM[l+3]=h,this.QM[l+4]=e,this.QM[l+5]=n,this.QM[l+6]=r,this.QM[l+7]=o;this.tk(),this.count=256}tk(){this.c++,this.b+=this.c;for(let t=0;t<256;t++){const i=this.QM[t],s=3&t;let h;0===s?this.a^=this.a<<13:1===s?this.a^=this.a>>>6:2===s?this.a^=this.a<<2:3===s&&(this.a^=this.a>>>16),this.a+=this.QM[t+128&255],this.QM[t]=h=this.QM[i>>>2&255]+this.a+this.b,this.JM[t]=this.b=this.QM[h>>>8>>>2&255]+i}}}},2901:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(1908);class n{static $M=t=>{let i=0;t=t.toUpperCase();for(let s=0;s<t.length;s++)i=61*i+t.charCodeAt(s)-32|0;return i};buffer;ik;sk;hk;ek;nk;rk;lk=[];constructor(t){t instanceof Uint8Array&&(t=new Int8Array(t));let i=new h.A(new Uint8Array(t));const s=i.tE,n=i.tE;s===n?(this.buffer=t,this.ik=!1):(this.buffer=e.A.read(s,t,n,6),i=new h.A(new Uint8Array(this.buffer)),this.ik=!0),this.sk=i.Fy,this.hk=[],this.ek=[],this.nk=[],this.rk=[];let r=i.Pc+10*this.sk;for(let t=0;t<this.sk;t++)this.hk.push(i.Vo),this.ek.push(i.tE),this.nk.push(i.tE),this.rk.push(r),r+=this.nk[t]}read(t){const i=n.$M(t),s=this.hk.indexOf(i);return-1===s?null:this.ak(s)}ak(t){if(t<0||t>=this.sk)return null;if(this.lk[t])return this.lk[t];const i=this.rk[t],s=i+this.nk[t];if(this.ik){const h=Uint8Array.from(this.buffer.subarray(i,i+s));return this.lk[t]=h,h}{const i=Uint8Array.from(e.A.read(this.ek[t],this.buffer,this.nk[t],this.rk[t]));return this.lk[t]=i,i}}}},1069:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(9234),e=s(6666),n=s(4474);class r extends n.A{static ck=3988292384;static fk=new Int32Array(256);static uk=new Uint32Array(33);static dk=new e.A;static wk=new e.A;static yk=new e.A;static Ak=0;static pk=0;static mk=0;static{for(let t=0;t<32;t++)r.uk[t]=(1<<t)-1;r.uk[32]=4294967295;for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)1&~i?i>>>=1:i=i>>>1^r.ck;r.fk[t]=i}}static Uo=t=>{let i=4294967295;for(let s=0;s<t.length;s++)i=i>>>8^r.fk[255&(i^t[s])];return~i};view;data;Pc=0;bm=0;random=null;constructor(t){if(!t)throw new Error('Input src packet array was null!');super(),t instanceof Int8Array?this.data=new Uint8Array(t):this.data=t,this.view=new DataView(this.data.buffer)}get length(){return this.view.byteLength}get available(){return this.length-this.Pc}static Ft=t=>{let i=null;return 0===t&&r.Ak>0?(r.Ak--,i=r.dk.Kb()):1===t&&r.pk>0?(r.pk--,i=r.wk.Kb()):2===t&&r.mk>0&&(r.mk--,i=r.yk.Kb()),i?(i.Pc=0,i):new r(0===t?new Uint8Array(100):1===t?new Uint8Array(5e3):new Uint8Array(3e4))};release(){this.Pc=0,100===this.view.byteLength&&r.Ak<1e3?(r.dk.KI(this),r.Ak++):5e3===this.view.byteLength&&r.pk<250?(r.wk.KI(this),r.pk++):3e4===this.view.byteLength&&r.mk<50&&(r.yk.KI(this),r.mk++)}get Hy(){return this.view.getUint8(this.Pc++)}get By(){return this.view.getInt8(this.Pc++)}get Fy(){const t=this.view.getUint16(this.Pc);return this.Pc+=2,t}get HA(){const t=this.view.getInt16(this.Pc);return this.Pc+=2,t}get tE(){const t=this.view.getUint8(this.Pc++)<<16|this.view.getUint16(this.Pc);return this.Pc+=2,t}get Vo(){const t=this.view.getInt32(this.Pc);return this.Pc+=4,t}get Fc(){const t=this.view.getBigInt64(this.Pc);return this.Pc+=8,t}get WS(){return this.view.getUint8(this.Pc)<128?this.Hy-64:this.Fy-49152}get XT(){return this.view.getUint8(this.Pc)<128?this.Hy:this.Fy-32768}get Qy(){const t=this.view,i=t.byteLength;let s,h='';for(;10!==(s=t.getUint8(this.Pc++))&&this.Pc<i;)h+=String.fromCharCode(s);return h}_A(t,i,s){const h=this.view,e=i+t;for(let t=i;t<e;t++)s[t]=h.getUint8(this.Pc++)}zc(t){this.view.setUint8(this.Pc++,t+(this.random?.Ny??0)&255)}p1(t){this.view.setUint8(this.Pc++,t)}p2(t){this.view.setUint16(this.Pc,t),this.Pc+=2}Ik(t){this.view.setUint16(this.Pc,t,!0),this.Pc+=2}p3(t){this.view.setUint8(this.Pc++,t>>16),this.view.setUint16(this.Pc,t),this.Pc+=2}p4(t){this.view.setInt32(this.Pc,t),this.Pc+=4}_k(t){this.view.setInt32(this.Pc,t,!0),this.Pc+=4}Xw(t){this.view.setBigInt64(this.Pc,t),this.Pc+=8}Uc(t){const i=this.view,s=t.length;for(let h=0;h<s;h++)i.setUint8(this.Pc++,t.charCodeAt(h));i.setUint8(this.Pc++,10)}Gc(t,i,s){const h=this.view,e=s+i;for(let i=s;i<e;i++)h.setUint8(this.Pc++,t[i])}Bf(t){this.view.setUint8(this.Pc-t-1,t)}Tm(){this.bm=8*this.Pc}vm(){this.Pc=(this.bm+7)/8|0}Om(t){let i=this.bm>>>3,s=8-(7&this.bm),h=0;for(this.bm+=t;t>s;s=8)h+=(this.view.getUint8(i++)&r.uk[s])<<t-s,t-=s;return h+=t===s?this.view.getUint8(i)&r.uk[s]:this.view.getUint8(i)>>>s-t&r.uk[t],h}Bc(t,i){const s=this.Pc;this.Pc=0;const e=new Uint8Array(s);this._A(s,0,e);const n=(0,h.gk)(e),r=(0,h.Ek)(n,i,t),o=(0,h.Ck)(r);this.Pc=0,this.p1(o.length),this.Gc(o,o.length,0)}}},353:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Tk=[95,218,67,50,253,222,194,60,101,128,8,251,92,111,24,33,223,66,232,59,227,113,153,105,126,98,167,102,177,238,62,190,147,23,150,151,156,144,193,155,81,0,198,22,137,210,179,16,168,170,32,181,248,141,58,87,208,106,180,191,221,241,40,176,196,154,65,145,230,78,30,161,188,41,14,129,18,199,47,247,225,34,51,10,159,75,12,56,61,31,39,91,46,242,134,5,122,123,209,228,104,195,21,3,11,44,107,172,6,186,110,215,205,103,27,185,124,77,252,117,86,115,127,207,52,79,43,97,219,116,169,7,118,162,108,36,20,233,88,135,80,19,42,237,57,152,71,9,250,17,4,119,234,130,26,200,189,163,254,245,197,171,220,235,140,244,184,94,211,231,99,246,121,212,112,204,63,148,83,178,1,255,131,13,183,142,236,45,55,35,243,136,37,85,100,160,38,224,146,174,82,48,109,132,125,90,143,138,240,173,165,164,192,175,29,74,28,114,213,73,64,206,76,139,96,2,229,15,93,25,239,202,49,70,214,201,72,203,68,89,69,157,216,217,249,120,226,84,149,187,54,53,158,166,182,133,0];static Py=[0,-2,4,6,-1,0,0,2,0,0,0,0,5,4,2,2,0,0,0,0,2,-2,2,14,0,6,3,0,4,0,0,0,3,0,0,0,0,0,0,0,0,-1,4,2,6,0,6,0,0,3,7,0,0,0,-1,0,0,0,0,4,0,0,0,0,0,0,0,0,1,15,0,0,0,0,6,0,2,0,0,0,2,0,0,0,1,0,0,4,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,-2,0,0,2,0,0,0,2,9,0,0,0,0,0,4,0,0,0,3,7,9,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,3,2,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,-2,2,0,0,0,0,0,6,0,0,0,2,0,2,0,0,0,-2,0,0,4,0,0,0,0,6,0,0,-2,-2,0,0,0,0,0,0,-2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0]}},2215:(t,i,s)=>{s.d(i,{A:()=>h});class h{static BA=14;static yA=28;static up=129;static mA=167;static rp=168;static FA=195;static op=2;static ap=26;static sp=46;static tp=84;static qA=87;static NA=103;static pA=146;static Zy=197;static dp=201;static xA=204;static GA=209;static LA=126;static $A=185;static bA=15;static EA=98;static mp=213;static WA=3;static pp=13;static QA=74;static fp=239;static Vy=1;static Ip=184;static gA=133;static CA=226;static ip=4;static cp=21;static PA=32;static Jw=41;static Gy=152;static sA=19;static Ap=22;static $y=25;static Wy=43;static wp=44;static JA=68;static lp=136;static hA=139;static vA=140;static tA=142;static OA=243;static SA=254;static iA=20;static Yy=80;static jA=132;static IA=220;static Xy=237;static Uy=150;static AA=175;static ZA=193;static MA=12;static Jy=54;static RA=212;static DA=7;static YA=135;static yp=162;static nA=23;static fA=42;static aA=49;static rA=50;static dA=59;static lA=69;static uA=76;static eA=151;static oA=191;static cA=223}},3937:(t,i,s)=>{s.d(i,{A:()=>o});class h{start=0;end=0;form=0;length=0;Ok=null;bk=null;threshold=0;position=0;delta=0;amplitude=0;vk=0;read(t){this.form=t.Hy,this.start=t.Vo,this.end=t.Vo,this.length=t.Hy,this.Ok=new Int32Array(this.length),this.bk=new Int32Array(this.length);for(let i=0;i<this.length;i++)this.Ok[i]=t.Fy,this.bk[i]=t.Fy}reset(){this.threshold=0,this.position=0,this.delta=0,this.amplitude=0,this.vk=0}evaluate(t){return this.vk>=this.threshold&&this.bk&&this.Ok&&(this.amplitude=this.bk[this.position++]<<15,this.position>=this.length&&(this.position=this.length-1),this.threshold=this.Ok[this.position]/65536*t|0,this.threshold>this.vk&&(this.delta=((this.bk[this.position]<<15)-this.amplitude)/(this.threshold-this.vk)|0)),this.amplitude+=this.delta,this.vk++,this.amplitude-this.delta>>15}}class e{static buffer=null;static CT=null;static sin=null;static Lk=new Int32Array(5);static Rk=new Int32Array(5);static Sk=new Int32Array(5);static Mk=new Int32Array(5);static kk=new Int32Array(5);xk=null;Dk=null;Nk=null;Pk=null;Fk=null;Uk=null;release=null;attack=null;Bk=new Int32Array(5);Gk=new Int32Array(5);Hk=new Int32Array(5);start=0;length=500;Wk=100;Yk=0;static init=()=>{this.CT=new Int32Array(32768);for(let t=0;t<32768;t++)Math.random()>.5?this.CT[t]=1:this.CT[t]=-1;this.sin=new Int32Array(32768);for(let t=0;t<32768;t++)this.sin[t]=16384*Math.sin(t/5215.1903)|0;this.buffer=new Int32Array(220500)};Kc(t,i){for(let i=0;i<t;i++)e.buffer[i]=0;if(i<10)return e.buffer;const s=t/i|0;this.xk?.reset(),this.Dk?.reset();let h=0,n=0,r=0;this.Nk&&this.Pk&&(this.Nk.reset(),this.Pk.reset(),h=32.768*(this.Nk.end-this.Nk.start)/s|0,n=32.768*this.Nk.start/s|0);let o=0,l=0,a=0;this.Fk&&this.Uk&&(this.Fk.reset(),this.Uk.reset(),o=32.768*(this.Fk.end-this.Fk.start)/s|0,l=32.768*this.Fk.start/s|0);for(let t=0;t<5;t++)this.xk&&0!==this.Bk[t]&&(e.Lk[t]=0,e.Rk[t]=this.Hk[t]*s,e.Sk[t]=(this.Bk[t]<<14)/100|0,e.Mk[t]=32.768*(this.xk.end-this.xk.start)*Math.pow(1.0057929410678534,this.Gk[t])/s|0,e.kk[t]=32.768*this.xk.start/s|0);if(this.xk&&this.Dk)for(let i=0;i<t;i++){let s=this.xk.evaluate(t),c=this.Dk.evaluate(t);if(this.Nk&&this.Pk){const i=this.Nk.evaluate(t),e=this.Pk.evaluate(t);s+=this.Vk(e,r,this.Nk.form)>>1,r+=(i*h>>16)+n}if(this.Fk&&this.Uk){const i=this.Fk.evaluate(t),s=this.Uk.evaluate(t);c=c*(32768+(this.Vk(s,a,this.Fk.form)>>1))>>15,a+=(i*o>>16)+l}for(let h=0;h<5;h++)if(0!==this.Bk[h]){const n=i+e.Rk[h];n<t&&(e.buffer[n]+=this.Vk(c*e.Sk[h]>>15,e.Lk[h],this.xk.form),e.Lk[h]+=(s*e.Mk[h]>>16)+e.kk[h])}}if(this.release&&this.attack){this.release.reset(),this.attack.reset();let i=0,s=!0;for(let h=0;h<t;h++){const n=this.release.evaluate(t),r=this.attack.evaluate(t);let o;o=s?this.release.start+((this.release.end-this.release.start)*n>>8):this.release.start+((this.release.end-this.release.start)*r>>8),i+=256,i>=o&&(i=0,s=!s),s&&(e.buffer[h]=0)}}if(this.Yk>0&&this.Wk>0){const i=this.Yk*s;for(let s=i;s<t;s++)e.buffer[s]+=e.buffer[s-i]*this.Wk/100|0,e.buffer[s]|=0}for(let i=0;i<t;i++)e.buffer[i]<-32768&&(e.buffer[i]=-32768),e.buffer[i]>32767&&(e.buffer[i]=32767);return e.buffer}Vk(t,i,s){return 1===s?(32767&i)<16384?t:-t:2===s?e.sin[32767&i]*t>>14:3===s?((32767&i)*t>>14)-t:4===s?e.CT[i/2607&32767]*t:0}read(t){this.xk=new h,this.xk.read(t),this.Dk=new h,this.Dk.read(t),0!==t.Hy&&(t.Pc--,this.Nk=new h,this.Nk.read(t),this.Pk=new h,this.Pk.read(t)),0!==t.Hy&&(t.Pc--,this.Fk=new h,this.Fk.read(t),this.Uk=new h,this.Uk.read(t)),0!==t.Hy&&(t.Pc--,this.release=new h,this.release.read(t),this.attack=new h,this.attack.read(t));for(let i=0;i<10;i++){const s=t.XT;if(0===s)break;this.Bk[i]=s,this.Gk[i]=t.WS,this.Hk[i]=t.XT}this.Yk=t.XT,this.Wk=t.XT,this.length=t.Fy,this.start=t.Fy}}var n=s(1069),r=s(3867);class o{static kA=new Int32Array(1e3);static Kk=null;static Xk=null;static zk=new r.us(1e3,null);jk=new r.us(10,null);Zk=0;loopEnd=0;static hc=t=>{const i=new n.A(t.read('sounds.dat'));for(this.Kk=new Uint8Array(441e3),this.Xk=new n.A(this.Kk),e.init();;){const t=i.Fy;if(65535===t)break;const s=new o;s.read(i),this.zk[t]=s,this.kA[t]=s.trim()}};static Kc=(t,i)=>{if(!this.zk[t])return null;const s=this.zk[t];return s?.qk(i)??null};read(t){for(let i=0;i<10;i++)0!==t.Hy&&(t.Pc--,this.jk[i]=new e,this.jk[i]?.read(t));this.Zk=t.Fy,this.loopEnd=t.Fy}trim(){let t=9999999;for(let i=0;i<10;i++)this.jk[i]&&(this.jk[i].start/20|0)<t&&(t=this.jk[i].start/20|0);if(this.Zk<this.loopEnd&&(this.Zk/20|0)<t&&(t=this.Zk/20|0),9999999===t||0===t)return 0;for(let i=0;i<10;i++)this.jk[i]&&(this.jk[i].start-=20*t);return this.Zk<this.loopEnd&&(this.Zk-=20*t,this.loopEnd-=20*t),t}qk(t){const i=this.Kc(t);return o.Xk.Pc=0,o.Xk?.p4(1380533830),o.Xk?._k(i+36),o.Xk?.p4(1463899717),o.Xk?.p4(1718449184),o.Xk?._k(16),o.Xk?.Ik(1),o.Xk?.Ik(1),o.Xk?._k(22050),o.Xk?._k(22050),o.Xk?.Ik(1),o.Xk?.Ik(8),o.Xk?.p4(1684108385),o.Xk?._k(i),o.Xk.Pc+=i,o.Xk}Kc(t){let i=0;for(let t=0;t<10;t++)this.jk[t]&&this.jk[t].length+this.jk[t].start>i&&(i=this.jk[t].length+this.jk[t].start);if(0===i)return 0;let s=22050*i/1e3|0,h=22050*this.Zk/1e3|0,e=22050*this.loopEnd/1e3|0;(h<0||e<0||e>s||h>=e)&&(t=0);let n=s+(e-h)*(t-1);for(let t=44;t<n+44;t++)o.Kk&&(o.Kk[t]=-128);for(let t=0;t<10;t++)if(this.jk[t]){const i=22050*this.jk[t].length/1e3|0,s=22050*this.jk[t].start/1e3|0,h=this.jk[t].Kc(i,this.jk[t].length);for(let t=0;t<i;t++)o.Kk&&(o.Kk[t+s+44]+=h[t]>>8<<24>>24)}if(t>1){h+=44,e+=44,s+=44,n+=44;const i=n-s;for(let t=s-1;t>=e;t--)o.Kk&&(o.Kk[t+i]=o.Kk[t]);for(let i=1;i<t;i++){const t=(e-h)*i;for(let i=h;i<e;i++)o.Kk&&(o.Kk[i+t]=o.Kk[i])}n-=44}return n}}},3867:(t,i,s)=>{s.d(i,{qa:()=>a,Za:()=>o,us:()=>h,QT:()=>e,Er:()=>n,qT:()=>r,Vn:()=>l});class h extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=i}}class e extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=s}}}class n extends Array{constructor(t,i,s,h){super(t);for(let e=0;e<t;e++){this[e]=new Array(i);for(let t=0;t<i;t++){this[e][t]=new Array(s);for(let i=0;i<s;i++)this[e][t][i]=h}}}}class r extends Array{constructor(t,i,s,h,e){super(t);for(let n=0;n<t;n++){this[n]=new Array(i);for(let t=0;t<i;t++){this[n][t]=new Array(s);for(let i=0;i<s;i++){this[n][t][i]=new Array(h);for(let s=0;s<h;s++)this[n][t][i][s]=e}}}}}class o extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Uint8Array(s)}}}class l extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=new Int32Array(i)}}class a extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Int32Array(s)}}}},9234:(t,i,s)=>{s.d(i,{Ck:()=>l,Go:()=>e,gk:()=>o,Ho:()=>h,Ka:()=>n,Tc:()=>r,Ek:()=>a});const h=async t=>new Promise((i=>setTimeout(i,t))),e=async t=>new Int8Array(await(await fetch(t)).arrayBuffer()),n=async t=>(await fetch(t)).text();function r(t,i,s,h,e){for(;e--;)s[h++]=t[i++]}function o(t){let i=0n;for(let s=0;s<t.length;s++)i=i<<8n|BigInt(t[s]);return i}function l(t){const i=[];for(;t>0n;)i.unshift(Number(0xffn&t)),t>>=8n;return 128&i[0]&&i.unshift(0),new Uint8Array(i)}function a(t,i,s){let h=1n;for(;i>0n;)i%2n===1n&&(h=h*t%s),t=t*t%s,i>>=1n;return h}},7953:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1069);class e{static $k=new Uint16Array(['d','o','t'].join('').split('').map((t=>t.charCodeAt(0))));static Jk=new Uint16Array(['(','a',')'].join('').split('').map((t=>t.charCodeAt(0))));static Qk=new Uint16Array(['s','l','a','s','h'].join('').split('').map((t=>t.charCodeAt(0))));static tx=['cook',"cook's",'cooks','seeks','sheet'];static ix=[];static sx=[];static hx=[];static nx=[];static ox=[];static lx=[];static hc=t=>{const i=new h.A(t.read('fragmentsenc.txt')),s=new h.A(t.read('badenc.txt')),e=new h.A(t.read('domainenc.txt')),n=new h.A(t.read('tldlist.txt'));this.read(s,e,i,n)};static filter=t=>{const i=[...t];this.format(i);const s=i.join('').trim(),h=s.toLowerCase(),e=[...h];this.ux(e),this.wx(e),this.yx(e),this.Ax(e);for(let t=0;t<this.tx.length;t++){let i=-1;for(;-1!==(i=h.indexOf(this.tx[t],i+1));){const s=[...this.tx[t]];for(let t=0;t<s.length;t++)e[t+i]=s[t]}}return this.mx(e,[...s]),this.Ix(e),e.join('').trim()};static read=(t,i,s,h)=>{this._x(t),this.gx(i),this.Ex(s),this.Cx(h)};static Cx=t=>{const i=t.Vo;for(let s=0;s<i;s++)this.sx[s]=t.Hy,this.ix[s]=new Uint16Array(t.Hy).map((()=>t.Hy))};static _x=t=>{const i=t.Vo;for(let s=0;s<i;s++){this.hx[s]=new Uint16Array(t.Hy).map((()=>t.Hy));const i=new Array(t.Hy).fill([]).map((()=>[t.By,t.By]));i.length>0&&(this.nx[s]=i)}};static gx=t=>{const i=t.Vo;for(let s=0;s<i;s++)this.ox[s]=new Uint16Array(t.Hy).map((()=>t.Hy))};static Ex=t=>{const i=t.Vo;for(let s=0;s<i;s++)this.lx[s]=t.Fy};static ux=t=>{const i=[...t],s=[...t];this.Tx(null,i,this.$k),this.Tx(null,s,this.Qk);for(let h=0;h<this.ix.length;h++)this.Ox(s,this.sx[h],t,this.ix[h],i)};static wx=t=>{for(let i=0;i<2;i++)for(let i=this.hx.length-1;i>=0;i--)this.Tx(this.nx[i],t,this.hx[i])};static yx=t=>{const i=[...t],s=[...t];this.Tx(null,i,this.Jk),this.Tx(null,s,this.$k);for(let h=this.ox.length-1;h>=0;h--)this.bx(s,i,this.ox[h],t)};static Ax=t=>{for(let i=0;i<t.length;){const s=this.vx(t,i);if(-1===s)return;let h=!1;for(let e=i;e>=0&&e<s&&!h;e++)this.Lx(t[e])||this.Rx(t[e])||(h=!0);let e=0;h&&(e=0),0===e&&(e=1,i=s);let n=0;for(let h=s;h<t.length&&h<i;h++)n=10*n+t[h].charCodeAt(0)-48;n<=255&&i-s<=8?e++:e=0,4===e&&(this.Sx(s,i,t),e=0),i=this.Mx(i,t)}};static kx=t=>{if(this.xx(t))return!0;const i=this.Dx(t),s=this.lx,h=s.length;if(i===s[0]||i===s[h-1])return!0;let e=0,n=h-1;for(;e<=n;){const t=(e+n)/2|0;if(i===s[t])return!0;i<s[t]?n=t-1:e=t+1}return!1};static Dx=t=>{if(t.length>6)return 0;let i=0;for(let s=0;s<t.length;s++){const h=t[t.length-s-1];if(this.Nx(h))i=38*i+h.charCodeAt(0)+1-'a'.charCodeAt(0);else if("'"===h)i=38*i+27;else if(this.Px(h))i=38*i+h.charCodeAt(0)+28-'0'.charCodeAt(0);else if('\0'!==h)return 0}return i};static vx=(t,i)=>{for(let s=i;s<t.length&&s>=0;s++)if(this.Px(t[s]))return s;return-1};static Mx=(t,i)=>{for(let s=t;s<i.length&&s>=0;s++)if(!this.Px(i[s]))return s;return i.length};static Fx=(t,i,s)=>i===s||'o'===i&&'0'===s?1:'o'===i&&'('===s&&')'===t?2:'c'!==i||'('!==s&&'<'!==s&&'['!==s?'e'===i&&'€'===s||'s'===i&&'$'===s||'l'===i&&'i'===s?1:0:1;static bx=(t,i,s,h)=>{const e=s.length,n=h.length;for(let r=0;r<=n-e;r++){const{Ux:e,Bx:n}=this.Gx(r,s,h);if(!e)continue;const o=this.Hx(r,h,3,i,['@']),l=this.Wx(n-1,h,3,t,['.',',']);(o>2||l>2)&&this.Sx(r,n,h)}};static Gx=(t,i,s)=>{const h=i.length;let e=t,n=0;for(;e<s.length&&n<h;){const r=s[e],o=e+1<s.length?s[e+1]:'\0',l=this.Fx(o,String.fromCharCode(i[n]),r);if(l>0)e+=l,n++;else{if(0===n)break;const s=this.Fx(o,String.fromCharCode(i[n-1]),r);if(s>0)e+=s,1===n&&t++;else{if(n>=h||!this.Lx(r))break;e++}}}return{Ux:n>=h,Bx:e}};static Tx=(t,i,s)=>{if(!(s.length>i.length))for(let h=0;h<=i.length-s.length;h++){let e=h;const{Bx:n,Yx:r,Vx:o,Kx:l,Xx:a}=this.zx(i,s,e);e=n;let c=i[e],f=e+1<i.length?i[e+1]:'\0';if(!(r>=s.length)||l&&a)continue;let u,d=!0;if(o){let t=!1,s=!1;if((h-1<0||this.Lx(i[h-1])&&"'"!==i[h-1])&&(t=!0),(e>=i.length||this.Lx(i[e])&&"'"!==i[e])&&(s=!0),!t||!s){let s=!1;for(u=h-2,t&&(u=h);!s&&u<e;){if(u>=0&&(!this.Lx(i[u])||"'"===i[u])){const t=[];let h;for(h=0;h<3&&u+h<i.length&&(!this.Lx(i[u+h])||"'"===i[u+h]);h++)t[h]=i[u+h];let e=!0;0===h&&(e=!1),h<3&&u-1>=0&&(!this.Lx(i[u-1])||"'"===i[u-1])&&(e=!1),e&&!this.kx(t)&&(s=!0)}u++}s||(d=!1)}}else{c=' ',h-1>=0&&(c=i[h-1]),f=' ',e<i.length&&(f=i[e]);const s=this.jx(c),n=this.jx(f);t&&this.Zx(s,t,n)&&(d=!1)}if(!d)continue;let w=0,y=0;for(let t=h;t<e;t++)this.Px(i[t])?w++:this.qx(i[t])&&y++;w<=y&&this.Sx(h,e,i)}};static zx=(t,i,s)=>{let h=s,e=0,n=0,r=!1,o=!1,l=!1;for(;h<t.length&&(!o||!l)&&!(h>=t.length||o&&l);){const a=t[h],c=h+1<t.length?t[h+1]:'\0';let f;if(e<i.length&&(f=this.$x(c,String.fromCharCode(i[e]),a))>0)1===f&&this.Px(a)&&(o=!0),2===f&&(this.Px(a)||this.Px(c))&&(o=!0),h+=f,e++;else{if(0===e)break;let t;if((t=this.$x(c,String.fromCharCode(i[e-1]),a))>0)h+=t;else{if(e>=i.length||!this.Rx(a))break;if(this.Lx(a)&&"'"!==a&&(r=!0),this.Px(a)&&(l=!0),h++,n++,(100*n/(h-s)|0)>90)break}}}return{Bx:h,Yx:e,Vx:r,Kx:o,Xx:l}};static $x=(t,i,s)=>{if(i===s)return 1;if(i>='a'&&i<='m'){if('a'===i)return'4'!==s&&'@'!==s&&'^'!==s?'/'===s&&'\\'===t?2:0:1;if('b'===i)return'6'!==s&&'8'!==s?'1'===s&&'3'===t?2:0:1;if('c'===i)return'('!==s&&'<'!==s&&'{'!==s&&'['!==s?0:1;if('d'===i)return'['===s&&')'===t?2:0;if('e'===i)return'3'!==s&&'€'!==s?0:1;if('f'===i)return'p'===s&&'h'===t?2:'£'===s?1:0;if('g'===i)return'9'!==s&&'6'!==s?0:1;if('h'===i)return'#'===s?1:0;if('i'===i)return'y'!==s&&'l'!==s&&'j'!==s&&'1'!==s&&'!'!==s&&':'!==s&&';'!==s&&'|'!==s?0:1;if('j'===i)return 0;if('k'===i)return 0;if('l'===i)return'1'!==s&&'|'!==s&&'i'!==s?0:1;if('m'===i)return 0}if(i>='n'&&i<='z'){if('n'===i)return 0;if('o'===i)return'0'!==s&&'*'!==s?'('===s&&')'===t||'['===s&&']'===t||'{'===s&&'}'===t||'<'===s&&'>'===t?2:0:1;if('p'===i)return 0;if('q'===i)return 0;if('r'===i)return 0;if('s'===i)return'5'!==s&&'z'!==s&&'$'!==s&&'2'!==s?0:1;if('t'===i)return'7'!==s&&'+'!==s?0:1;if('u'===i)return'v'===s?1:'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('v'===i)return'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('w'===i)return'v'===s&&'v'===t?2:0;if('x'===i)return')'===s&&'('===t||'}'===s&&'{'===t||']'===s&&'['===t||'>'===s&&'<'===t?2:0;if('y'===i)return 0;if('z'===i)return 0}return i>='0'&&i<='9'?'0'===i?'o'===s||'O'===s?1:'('===s&&')'===t||'{'===s&&'}'===t||'['===s&&']'===t?2:0:'1'===i&&'l'===s?1:0:','===i?'.'===s?1:0:'.'===i?','===s?1:0:'!'===i&&'i'===s?1:0};static Zx=(t,i,s)=>{let h=0,e=i.length-1;for(;h<=e;){const n=(h+e)/2|0;if(i[n][0]===t&&i[n][1]===s)return!0;t<i[n][0]||t===i[n][0]&&s<i[n][1]?e=n-1:h=n+1}return!1};static jx=t=>this.Nx(t)?t.charCodeAt(0)+1-'a'.charCodeAt(0):"'"===t?28:this.Px(t)?t.charCodeAt(0)+29-'0'.charCodeAt(0):27;static Ox=(t,i,s,h,e)=>{if(!(h.length>s.length))for(let n=0;n<=s.length-h.length;n++){const{Bx:r,Jx:o}=this.Qx(s,h,n);if(o<h.length)continue;let l=!1;const a=this.Hx(n,s,3,e,[',','.']),c=this.Wx(r-1,s,5,t,['\\','/']);if(1===i&&a>0&&c>0&&(l=!0),2===i&&(a>2&&c>0||a>0&&c>2)&&(l=!0),3===i&&a>0&&c>2&&(l=!0),!l)continue;let f,u=n,d=r-1,w=!1;if(a>2){if(4===a)for(w=!1,f=n-1;f>=0;f--)if(w){if('*'!==e[f])break;u=f}else'*'===e[f]&&(u=f,w=!0);for(w=!1,f=u-1;f>=0;f--)if(w){if(this.Lx(s[f]))break;u=f}else this.Lx(s[f])||(w=!0,u=f)}if(c>2){if(4===c)for(w=!1,f=d+1;f<s.length;f++)if(w){if('*'!==t[f])break;d=f}else'*'===t[f]&&(d=f,w=!0);for(w=!1,f=d+1;f<s.length;f++)if(w){if(this.Lx(s[f]))break;d=f}else this.Lx(s[f])||(w=!0,d=f)}this.Sx(u,d+1,s)}};static Qx=(t,i,s)=>{let h=0;for(;s<t.length&&h<i.length;){const e=t[s],n=s+1<t.length?t[s+1]:'\0';let r;if((r=this.Fx(n,String.fromCharCode(i[h]),e))>0)s+=r,h++;else{if(0===h)break;let t;if((t=this.Fx(n,String.fromCharCode(i[h-1]),e))>0)s+=t;else{if(!this.Lx(e))break;s++}}}return{Bx:s,Jx:h}};static Lx=t=>!this.qx(t)&&!this.Px(t);static Rx=t=>!this.Nx(t)||('v'===t||'x'===t||'j'===t||'q'===t||'z'===t);static qx=t=>this.Nx(t)||this.tD(t);static Px=t=>t>='0'&&t<='9';static Nx=t=>t>='a'&&t<='z';static tD=t=>t>='A'&&t<='Z';static xx=t=>{for(let i=0;i<t.length;i++)if(!this.Px(t[i])&&'\0'!==t[i])return!1;return!0};static Sx=(t,i,s)=>{for(let h=t;h<i;h++)s[h]='*'};static iD=(t,i)=>{let s=0;for(let h=i-1;h>=0&&this.Lx(t[h]);h--)'*'===t[h]&&s++;return s};static sD=(t,i)=>{let s=0;for(let h=i+1;h<t.length&&this.Lx(t[h]);h++)'*'===t[h]&&s++;return s};static hD=(t,i,s,h,e)=>(e?this.iD(i,s):this.sD(i,s))>=h?4:this.Lx(e?t[s-1]:t[s+1])?1:0;static Hx=(t,i,s,h,e)=>{if(0===t)return 2;for(let s=t-1;s>=0&&this.Lx(i[s]);s--)if(e.includes(i[s]))return 3;return this.hD(i,h,t,s,!0)};static Wx=(t,i,s,h,e)=>{if(t+1===i.length)return 2;for(let s=t+1;s<i.length&&this.Lx(i[s]);s++)if(e.includes(i[s]))return 3;return this.hD(i,h,t,s,!1)};static format=t=>{let i=0;for(let s=0;s<t.length;s++)this.eD(t[s])?t[i]=t[s]:t[i]=' ',0!==i&&' '===t[i]&&' '===t[i-1]||i++;for(let s=i;s<t.length;s++)t[s]=' '};static eD=t=>t>=' '&&t<=''||' '===t||'\n'===t||'\t'===t||'£'===t||'€'===t;static mx=(t,i)=>{for(let s=0;s<i.length;s++)'*'!==t[s]&&this.tD(i[s])&&(t[s]=i[s])};static Ix=t=>{let i=!0;for(let s=0;s<t.length;s++){const h=t[s];this.qx(h)?i?this.Nx(h)&&(i=!1):this.tD(h)&&(t[s]=String.fromCharCode(h.charCodeAt(0)+'a'.charCodeAt(0)-65)):i=!0}}}},2646:(t,i,s)=>{s.d(i,{A:()=>h});class h{static nD=[' ','e','t','a','o','i','h','n','s','r','d','l','u','m','w','c','y','f','g','p','b','v','k','x','j','q','z','0','1','2','3','4','5','6','7','8','9',' ','!','?','.',',',':',';','(',')','-','&','*','\\','\'','@','#','+','=','£','$','%','"','[',']'];static rD=[];static hc=(t,i)=>{let s,h=0,e=-1;for(let n=0;n<i&&h<100;n++){const i=t.Hy;s=i>>4&15,-1!==e?(this.rD[h++]=this.nD[(e<<4)+s-195],e=-1):s<13?this.rD[h++]=this.nD[s]:e=s,s=15&i,-1!==e?(this.rD[h++]=this.nD[(e<<4)+s-195],e=-1):s<13?this.rD[h++]=this.nD[s]:e=s}let n=!0;for(let t=0;t<h;t++){const i=this.rD[t];n&&i>='a'&&i<='z'&&(this.rD[t]=i.toUpperCase(),n=!1),'.'!==i&&'!'!==i||(n=!0)}return this.rD.slice(0,h).join('')};static Qw=(t,i)=>{i.length>80&&(i=i.substring(0,80)),i=i.toLowerCase();let s=-1;for(let h=0;h<i.length;h++){const e=i.charAt(h);let n=0;for(let t=0;t<this.nD.length;t++)if(e===this.nD[t]){n=t;break}n>12&&(n+=195),-1===s?n<13?s=n:t.p1(n):n<13?(t.p1((s<<4)+n),s=-1):(t.p1((s<<4)+(n>>4)),s=15&n)}-1!==s&&t.p1(s<<4)}}},1908:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(9763);class e{static oD=null;static load=async t=>{this.oD=await(0,h.F)(new WebAssembly.Module(t),{env:void 0})};static read=(t,i,s,h)=>{if(!this.oD)throw new Error('bz2 not found!!');return Int8Array.from(this.oD.read(t,i,s,h))}}},123:(t,i,s)=>{let h;async function e(t,i){n(i);try{const i=await window.audioContext.decodeAudioData(Uint8Array.from(t).buffer);let s=window.audioContext.createBufferSource();s.buffer=i,s.connect(h),s.start()}catch(t){console.log(t)}}function n(t){h||(h=window.audioContext.createGain(),h.connect(window.audioContext.destination)),h.gain.value=t/256}function r(t,i){window._tinyMidiPlay&&window._tinyMidiPlay(t,i/256)}function o(t){window._tinyMidiVolume&&window._tinyMidiVolume(t/256)}function l(){window._tinyMidiStop&&window._tinyMidiStop()}s.d(i,{Xc:()=>e,Ko:()=>r,Np:()=>n,bo:()=>l,Dp:()=>o})},9763:(t,i,s)=>{async function h(t,i={}){const s={env:Object.assign(Object.create(globalThis),i.env||{},{abort(t,i,s,h){t=r(t>>>0),i=r(i>>>0),s>>>=0,h>>>=0,(()=>{throw Error(`${t} in ${i}:${s}:${h}`)})()}})},{exports:h}=await WebAssembly.instantiate(t,s),e=h.memory||i.env.memory,n=Object.setPrototypeOf({read:(t,i,s,n)=>(i=function(t,i,s,n,r){if(null==n)return 0;const o=n.length,l=h.__pin(h.__new(o<<s,i))>>>0;if(r)new r(e.buffer,l,o).set(n);else for(let i=0;i<o;i++)t(l+(i<<s>>>0),n[i]);return h.__unpin(l),l}(l,6,0,i,Int8Array)||function(){throw TypeError("value must not be null")}(),function(t,i,s){if(!s)return null;const h=function(t){try{return o.getUint32(t,!0)}catch{return o=new DataView(e.buffer),o.getUint32(t,!0)}}(s-4)>>>i,n=new Array(h);for(let e=0;e<h;++e)n[e]=t(s+(e<<i>>>0));return n}(a,0,h.read(t,i,s,n)>>>0))},h);function r(t){if(!t)return null;const i=t+new Uint32Array(e.buffer)[t-4>>>2]>>>1,s=new Uint16Array(e.buffer);let h=t>>>1,n="";for(;i-h>1024;)n+=String.fromCharCode(...s.subarray(h,h+=1024));return n+String.fromCharCode(...s.subarray(h,i))}let o=new DataView(e.buffer);function l(t,i){try{o.setUint8(t,i,!0)}catch{o=new DataView(e.buffer),o.setUint8(t,i,!0)}}function a(t){try{return o.getInt8(t,!0)}catch{return o=new DataView(e.buffer),o.getInt8(t,!0)}}return n}s.d(i,{F:()=>h})},9896:(t,i,s)=>{var h=s(8151);!function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(window.audioContext=new window.AudioContext);var t=function(i){if(window.audioContext){var s=window.audioContext.createBuffer(1,1,22050),h=window.audioContext.createBufferSource();h.buffer=s,h.connect(window.audioContext.destination),h.start?h.start(0):h.play?h.play(0):h.noteOn&&h.noteOn(0)}document.removeEventListener('touchstart',t),document.removeEventListener('touchend',t),document.removeEventListener('click',t)};document.addEventListener('touchstart',t),document.addEventListener('touchend',t),document.addEventListener('click',t)}(),(async()=>{let t=new Float32Array,i=window.audioContext.createGain();i.gain.value=.1,i.connect(window.audioContext.destination);let s=window.audioContext.currentTime,e=[];const n=new h.A({lD:30,aD:i=>{let s=new Float32Array(i.buffer),h=new Float32Array(t.length+s.length);h.set(t,0),h.set(s,t.length),t=h},cD:t=>{},bufferSize:102400});await n.init();const r=await fetch('./SCC1_Florestan.sf2'),o=new Uint8Array(await r.arrayBuffer());function l(){if(!window.audioContext||!t.length)return;let h=window.audioContext.createBufferSource();const n=t.length/2,r=window.audioContext.createBuffer(2,n,44100);for(let i=0;i<2;i++){const s=r.getChannelData(i);let h=i;for(let i=0;i<n;i++)s[i]=t[h],h+=2}s<window.audioContext.currentTime&&(s=window.audioContext.currentTime),h.buffer=r,h.connect(i),h.start(s),e.push(h),s+=r.duration,t=new Float32Array}let a;n.fD(o),window._tinyMidiStop=async()=>{if(a&&clearInterval(a),t=new Float32Array,e.length){let t=i.gain.value;i.gain.value=0,e.forEach((t=>{t.stop(window.audioContext.currentTime)})),e=[],i.gain.value=t}},window._tinyMidiVolume=(t=1)=>{i.gain.value=t},window._tinyMidiPlay=async(t,i=1)=>{t&&(await window._tinyMidiStop(),-1!=i&&window._tinyMidiVolume(i),s=window.audioContext.currentTime,a=setInterval(l,250),n.uD(t))}})()},8151:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(5473);const e=class{constructor(t={}){this.dD=void 0,this.wD=0,this.yD=0,this.AD=0,this.lD=t.lD||100,this.sampleRate=t.sampleRate||44100,this.pD=t.pD||2,this.gain=t.gain||0,t.bufferSize?this.bufferSize=t.bufferSize:this.mD(1),this.aD=t.aD||(()=>{}),this.cD=t.cD||(()=>{}),this.ID=void 0,this.test=0}async init(){if(!this.dD){if('undefined'!=typeof process){const{_D:t}=await import('path'),{gD:i}=await import('module');globalThis.__dirname=t("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js"),globalThis.require=i("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js")}this.dD=await(0,h.A)(),this.ED=this.dD._malloc(this.bufferSize),this.CD=this.dD._malloc(8)}}mD(t){this.bufferSize=4*this.sampleRate*this.pD*t}TD(){if(!this.dD)throw new Error(`${this.constructor.name} not initalized. call .init()`)}fD(t){this.TD();const{_malloc:i,_free:s,_tsf_load_memory:h,_tsf_set_output:e,_tsf_channel_set_bank_preset:n,_tsf_set_max_voices:r,_tsf_channel_set_presetnumber:o}=this.dD;s(this.wD),this.wD=i(t.length),this.dD.HEAPU8.set(t,this.wD),this.yD=h(this.wD,t.length),e(this.yD,2===this.pD?0:2,this.sampleRate,this.gain)}OD(){this.TD();const t=new Uint8Array(this.bufferSize);return t.set(this.dD.HEAPU8.subarray(this.ED,this.ED+this.bufferSize)),t}bD(t){const{_malloc:i,_free:s,_tml_load_memory:h}=this.dD;return s(this.AD),this.AD=i(t.length),this.dD.HEAPU8.set(t,this.AD),h(this.AD,t.length)}vD(t){const{_midi_render:i}=this.dD;return i(this.yD,t,this.pD,this.sampleRate,this.ED,this.bufferSize,this.CD)}uD(t){if(this.TD(),!this.yD)throw new Error('no soundfont buffer set. call .setSoundfont');window.clearTimeout(this.ID);const{setValue:i,getValue:s}=this.dD;i(this.CD,0,'double'),this.dD._tsf_reset(this.yD),this.dD._tsf_channel_set_bank_preset(this.yD,9,128,0),t[0]==='R'.charCodeAt(0)&&(t=t.slice(20));let h=this.bD(t);const e=()=>{h=this.vD(h);const t=this.OD();this.aD(t),h?this.ID=setTimeout(e,this.lD):this.cD(s(this.CD,'double'))};this.ID=setTimeout(e,16)}}},8227:(t,i,s)=>{t.exports=s.p+"9f86b5397894e28b5ae2.wasm"},5473:(t,i,s)=>{var h;s.d(i,{A:()=>e});const e=(h="file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/tinymidipcm.mjs",function(t){var i,e,n=void 0!==(t=t||{})?t:{};n.ready=new Promise((function(t,s){i=t,e=s})),["_tsf_load_memory","_tsf_set_output","_tsf_channel_set_bank_preset","_tsf_set_max_voices","_tsf_channel_set_presetnumber","_tsf_reset","_tsf_close","_tml_load_memory","_midi_render","_malloc","_realloc","_free","_fflush","onRuntimeInitialized"].forEach((t=>{Object.getOwnPropertyDescriptor(n.ready,t)||Object.defineProperty(n.ready,t,{get:()=>z('You are getting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),set:()=>z('You are setting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js')})}));var r=Object.assign({},n),o=[],l='object'==typeof window,a='function'==typeof importScripts,c='object'==typeof process&&'object'==typeof process.versions&&'string'==typeof process.versions.node,f=!l&&!c&&!a;if(n.ENVIRONMENT)throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');var u,d,w,y='';if(c){if('undefined'==typeof process||!process.release||'node'!==process.release.name)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');var A,p;y=a?require('path')._D(y)+'/':__dirname+'/';var m=()=>{p||(A=require('fs'),p=require('path'))};u=(t,i)=>(m(),t=p.normalize(t),A.LD(t,i?void 0:'utf8')),w=t=>{var i=u(t,!0);return i.buffer||(i=new Uint8Array(i)),D(i.buffer),i},d=(t,i,s)=>{m(),t=p.normalize(t),A.RD(t,(function(t,h){t?s(t):i(h.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,'/'),o=process.argv.slice(2),process.on('uncaughtException',(function(t){if(!(t instanceof et))throw t})),process.on('unhandledRejection',(function(t){throw t})),n.inspect=function(){return'[Emscripten Module object]'}}else if(f){if('object'==typeof process&&'function'==typeof require||'object'==typeof window||'function'==typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');'undefined'!=typeof read&&(u=function(t){return read(t)}),w=function(t){let i;return'function'==typeof readbuffer?new Uint8Array(readbuffer(t)):(i=read(t,'binary'),D('object'==typeof i),i)},d=function(t,i,s){setTimeout((()=>i(w(t))),0)},'undefined'!=typeof scriptArgs?o=scriptArgs:void 0!==arguments&&(o=arguments),'undefined'!=typeof print&&('undefined'==typeof console&&(console={}),console.log=print,console.warn=console.error='undefined'!=typeof printErr?printErr:print)}else{if(!l&&!a)throw new Error('environment detection error');if(a?y=self.location.href:'undefined'!=typeof document&&document.currentScript&&(y=document.currentScript.src),h&&(y=h),y=0!==y.indexOf('blob:')?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf('/')+1):'','object'!=typeof window&&'function'!=typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');u=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.send(null),i.responseText},a&&(w=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.responseType='arraybuffer',i.send(null),new Uint8Array(i.response)}),d=(t,i,s)=>{var h=new XMLHttpRequest;h.open('GET',t,!0),h.responseType='arraybuffer',h.onload=()=>{200==h.status||0==h.status&&h.response?i(h.response):s()},h.onerror=s,h.send(null)}}n.print||console.log.bind(console);var I,_,g=n.printErr||console.warn.bind(console);function E(t,i){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){z('Module.'+t+' has been replaced with plain '+i+' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)')}})}function C(t){return'FS_createPath'===t||'FS_createDataFile'===t||'FS_createPreloadedFile'===t||'FS_unlink'===t||'addRunDependency'===t||'FS_createLazyFile'===t||'FS_createDevice'===t||'removeRunDependency'===t}Object.assign(n,r),r=null,I='fetchSettings',Object.getOwnPropertyDescriptor(n,I)&&z('`Module.'+I+'` was supplied but `'+I+'` not included in INCOMING_MODULE_JS_API'),n.arguments&&(o=n.arguments),E('arguments','arguments_'),n.thisProgram&&n.thisProgram,E('thisProgram','thisProgram'),n.quit&&n.quit,E('quit','quit_'),D(void 0===n.memoryInitializerPrefixURL,'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.pthreadMainPrefixURL,'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.cdInitializerPrefixURL,'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.filePackagePrefixURL,'Module.filePackagePrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.read,'Module.read option was removed (modify read_ in JS)'),D(void 0===n.readAsync,'Module.readAsync option was removed (modify readAsync in JS)'),D(void 0===n.readBinary,'Module.readBinary option was removed (modify readBinary in JS)'),D(void 0===n.setWindowTitle,'Module.setWindowTitle option was removed (modify setWindowTitle in JS)'),D(void 0===n.TOTAL_MEMORY,'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY'),E('read','read_'),E('readAsync','readAsync'),E('readBinary','readBinary'),E('setWindowTitle','setWindowTitle'),D(!f,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),n.wasmBinary&&(_=n.wasmBinary),E('wasmBinary','wasmBinary');var T;n.noExitRuntime;E('noExitRuntime','noExitRuntime'),'object'!=typeof WebAssembly&&z('no native wasm support detected');var O,b,v,L,R,S,M,k,x=!1;function D(t,i){t||z('Assertion failed'+(i?': '+i:''))}function N(t){O=t,n.HEAP8=b=new Int8Array(t),n.HEAP16=L=new Int16Array(t),n.HEAP32=R=new Int32Array(t),n.HEAPU8=v=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=S=new Uint32Array(t),n.HEAPF32=M=new Float32Array(t),n.HEAPF64=k=new Float64Array(t)}'undefined'!=typeof TextDecoder&&new TextDecoder('utf8');var P=5242880;n.TOTAL_STACK&&D(P===n.TOTAL_STACK,'the stack size can no longer be determined at runtime');var F=n.INITIAL_MEMORY||16777216;function U(){if(!x){var t=ft(),i=S[t>>2],s=S[t+4>>2];34821223==i&&2310721022==s||z('Stack overflow! Stack cookie has been overwritten at 0x'+t.toString(16)+', expected hex dwords 0x89BACDFE and 0x2135467, but received 0x'+s.toString(16)+' 0x'+i.toString(16)),1668509029!==S[0]&&z('Runtime error: The application has corrupted its heap memory area (address zero)!')}}E('INITIAL_MEMORY','INITIAL_MEMORY'),D(F>=P,'INITIAL_MEMORY should be larger than TOTAL_STACK, was '+F+'! (TOTAL_STACK='+P+')'),D('undefined'!=typeof Int32Array&&'undefined'!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,'JS engine does not provide full typed array support'),D(!n.wasmMemory,'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally'),D(16777216==F,'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically'),function(){var t=new Int16Array(1),i=new Int8Array(t.buffer);if(t[0]=25459,115!==i[0]||99!==i[1])throw'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)'}();var B=[],G=[],H=[],W=!1;D(Math.imul,'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.fround,'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.clz32,'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.trunc,'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');var Y=0,V=null,K=null,X={};function z(t){n.onAbort&&n.onAbort(t),g(t='Aborted('+t+')'),x=!0;var i=new WebAssembly.RuntimeError(t);throw e(i),i}var j={error:function(){z('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM')},init:function(){j.error()},SD:function(){j.error()},MD:function(){j.error()},kD:function(){j.error()},open:function(){j.error()},xD:function(){j.error()},DD:function(){j.error()},ND:function(){j.error()},PD:function(){j.error()},FD:function(){j.error()}};n.FS_createDataFile=j.SD,n.FS_createPreloadedFile=j.MD;var Z,q,$,J,Q='data:application/octet-stream;base64,';function tt(t){return t.startsWith(Q)}function it(t){return t.startsWith('file://')}function st(t,i){return function(){var s=t,h=i;return i||(h=n.asm),D(W,'native function `'+s+'` called before runtime initialization'),h[t]||D(h[t],'exported native function `'+s+'` not found'),h[t].apply(null,arguments)}}function ht(t){try{if(t==Z&&_)return new Uint8Array(_);if(w)return w(t);throw"both async and sync fetching of the wasm failed"}catch(t){z(t)}}function et(t){this.name='ExitStatus',this.message='Program terminated with exit('+t+')',this.status=t}function nt(t){for(;t.length>0;)t.shift()(n)}function rt(t){rt.UD||(rt.UD={}),rt.UD[t]||(rt.UD[t]=1,c&&(t='warning: '+t),g(t))}function ot(t){try{return T.BD(t-O.byteLength+65535>>>16),N(T.buffer),1}catch(i){g('emscripten_realloc_buffer: Attempted to grow heap from '+O.byteLength+' bytes to '+t+' bytes, but got error: '+i)}}n.locateFile?tt(Z='tinymidipcm.wasm')||(q=Z,Z=n.locateFile?n.locateFile(q,y):y+q):Z=new URL(s(8227),s.b).toString();var lt,at={"emscripten_memcpy_big":function(t,i,s){v.copyWithin(t,i,i+s)},"emscripten_resize_heap":function(t){var i=v.length;D((t>>>=0)>i);var s,h,e=2147483648;if(t>e)return g('Cannot enlarge memory, asked to go up to '+t+' bytes, but the limit is '+e+' bytes!'),!1;for(var n=1;n<=4;n*=2){var r=i*(1+.2/n);r=Math.min(r,t+100663296);var o=Math.min(e,(s=Math.max(t,r))+((h=65536)-s%h)%h);if(ot(o))return!0}return g('Failed to grow the heap from '+i+' bytes to '+o+' bytes, not enough memory!'),!1}},ct=(function(){var t,i={'env':at,'wasi_snapshot_preview1':at};function s(t,i){var s,h=t.exports;n.asm=h,D(T=n.asm.memory,"memory not found in wasm exports"),N(T.buffer),D(n.asm.__indirect_function_table,"table not found in wasm exports"),s=n.asm.__wasm_call_ctors,G.unshift(s),function(t){if(Y--,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(D(X[t]),delete X[t]):g('warning: run dependency removed without ID'),0==Y&&(null!==V&&(clearInterval(V),V=null),K)){var i=K;K=null,i()}}('wasm-instantiate')}t='wasm-instantiate',Y++,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(D(!X[t]),X[t]=1,null===V&&'undefined'!=typeof setInterval&&(V=setInterval((function(){if(x)return clearInterval(V),void(V=null);var t=!1;for(var i in X)t||(t=!0,g('still waiting on run dependencies:')),g('dependency: '+i);t&&g('(end of list)')}),1e4))):g('warning: run dependency added without ID');var h=n;function r(t){D(n===h,'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?'),h=null,s(t.instance)}function o(t){return function(){if(!_&&(l||a)){if('function'==typeof fetch&&!it(Z))return fetch(Z,{credentials:'same-origin'}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Z+"'";return t.arrayBuffer()})).catch((function(){return ht(Z)}));if(d)return new Promise((function(t,i){d(Z,(function(i){t(new Uint8Array(i))}),i)}))}return Promise.resolve().then((function(){return ht(Z)}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){g('failed to asynchronously prepare wasm: '+t),it(Z)&&g('warning: Loading from a file URI ('+Z+') is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing'),z(t)}))}if(n.instantiateWasm)try{return n.instantiateWasm(i,s)}catch(t){g('Module.instantiateWasm callback failed with error: '+t),e(t)}(_||'function'!=typeof WebAssembly.instantiateStreaming||tt(Z)||it(Z)||c||'function'!=typeof fetch?o(r):fetch(Z,{credentials:'same-origin'}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(r,(function(t){return g('wasm streaming compile failed: '+t),g('falling back to ArrayBuffer instantiation'),o(r)}))}))).catch(e)}(),n.___wasm_call_ctors=st("__wasm_call_ctors"),n._malloc=st("malloc"),n._free=st("free"),n._tsf_load_memory=st("tsf_load_memory"),n._tsf_close=st("tsf_close"),n._tsf_reset=st("tsf_reset"),n._tsf_set_output=st("tsf_set_output"),n._tsf_set_max_voices=st("tsf_set_max_voices"),n._realloc=st("realloc"),n._tsf_channel_set_presetnumber=st("tsf_channel_set_presetnumber"),n._tsf_channel_set_bank_preset=st("tsf_channel_set_bank_preset"),n._tml_load_memory=st("tml_load_memory"),n._midi_render=st("midi_render"),n.___errno_location=st("__errno_location"),n._fflush=st("fflush"),n._emscripten_stack_init=function(){return(ct=n._emscripten_stack_init=n.asm.emscripten_stack_init).apply(null,arguments)}),ft=(n._emscripten_stack_get_free=function(){return(n._emscripten_stack_get_free=n.asm.emscripten_stack_get_free).apply(null,arguments)},n._emscripten_stack_get_base=function(){return(n._emscripten_stack_get_base=n.asm.emscripten_stack_get_base).apply(null,arguments)},n._emscripten_stack_get_end=function(){return(ft=n._emscripten_stack_get_end=n.asm.emscripten_stack_get_end).apply(null,arguments)});function ut(){var t;ct(),D(!(3&(t=ft()))),S[t>>2]=34821223,S[t+4>>2]=2310721022,S[0]=1668509029}function dt(t){function s(){lt||(lt=!0,n.calledRun=!0,x||(D(!W),W=!0,U(),nt(G),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),D(!n._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(U(),n.postRun)for('function'==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)t=n.postRun.shift(),H.unshift(t);var t;nt(H)}()))}t=t||o,Y>0||(ut(),function(){if(n.preRun)for('function'==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)t=n.preRun.shift(),B.unshift(t);var t;nt(B)}(),Y>0||(n.setStatus?(n.setStatus('Running...'),setTimeout((function(){setTimeout((function(){n.setStatus('')}),1),s()}),1)):s(),U()))}if(n.stackSave=st("stackSave"),n.stackRestore=st("stackRestore"),n.stackAlloc=st("stackAlloc"),n.setValue=function(t,i,s="i8"){switch(s.endsWith('*')&&(s='*'),s){case'i1':case'i8':b[0|t]=i;break;case'i16':L[t>>1]=i;break;case'i32':R[t>>2]=i;break;case'i64':J=[i>>>0,($=i,+Math.abs($)>=1?$>0?(0|Math.min(+Math.floor($/4294967296),4294967295))>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],R[t>>2]=J[0],R[t+4>>2]=J[1];break;case'float':M[t>>2]=i;break;case'double':k[t>>3]=i;break;case'*':S[t>>2]=i;break;default:z('invalid type for setValue: '+s)}},n.getValue=function(t,i="i8"){switch(i.endsWith('*')&&(i='*'),i){case'i1':case'i8':return b[0|t];case'i16':return L[t>>1];case'i32':case'i64':return R[t>>2];case'float':return M[t>>2];case'double':return k[t>>3];case'*':return S[t>>2];default:z('invalid type for getValue: '+i)}return null},['run','UTF8ArrayToString','UTF8ToString','stringToUTF8Array','stringToUTF8','lengthBytesUTF8','addOnPreRun','addOnInit','addOnPreMain','addOnExit','addOnPostRun','addRunDependency','removeRunDependency','FS_createFolder','FS_createPath','FS_createDataFile','FS_createPreloadedFile','FS_createLazyFile','FS_createLink','FS_createDevice','FS_unlink','getLEB','getFunctionTables','alignFunctionTables','registerFunctions','prettyPrint','getCompilerSetting','print','printErr','callMain','abort','keepRuntimeAlive','wasmMemory','stackAlloc','stackSave','stackRestore','getTempRet0','setTempRet0','writeStackCookie','checkStackCookie','ptrToString','zeroMemory','stringToNewUTF8','exitJS','getHeapMax','emscripten_realloc_buffer','ENV','ERRNO_CODES','ERRNO_MESSAGES','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','DNS','getHostByName','Protocols','Sockets','getRandomDevice','warnOnce','traverseStack','UNWIND_CACHE','convertPCtoSourceLocation','readAsmConstArgsArray','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','handleException','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','freeTableIndexes','functionsInTableMap','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','PATH','PATH_FS','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16Decoder','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeArrayToMemory','writeAsciiToMemory','SYSCALLS','getSocketFromFD','getSocketAddress','JSEvents','registerKeyEventCallback','specialHTMLTargets','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','currentFullscreenStrategy','restoreOldWindowedStyle','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','demangle','demangleAll','jsStackTrace','stackTrace','ExitStatus','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','dlopenMissingError','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','uncaughtExceptionCount','exceptionLast','exceptionCaught','ExceptionInfo','exception_addRef','exception_decRef','Browser','setMainLoop','wget','FS','MEMFS','TTY','PIPEFS','SOCKFS','_setNetworkCallback','tempFixedLengthArray','miniTempWebGLFloatBuffers','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','GL','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','AL','SDL_unicode','SDL_ttfContext','SDL_audio','SDL','SDL_gfx','GLUT','EGL','GLFW_Window','GLFW','GLEW','IDBStore','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){var i="'"+t+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";C(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),z(i)}})})),['ptrToString','zeroMemory','stringToNewUTF8','exitJS','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','getHostByName','getRandomDevice','traverseStack','convertPCtoSourceLocation','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeAsciiToMemory','getSocketFromFD','getSocketAddress','registerKeyEventCallback','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','ExceptionInfo','exception_addRef','exception_decRef','setMainLoop','_setNetworkCallback','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','SDL_unicode','SDL_ttfContext','SDL_audio','GLFW_Window','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){'undefined'==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{configurable:!0,get:function(){var i='`'+t+'` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line';C(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),rt(i)}})})),K=function t(){lt||dt(),lt||(K=t)},n.preInit)for('function'==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return dt(),t.ready})}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,r),s.exports}r.m=e,t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",i="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",h=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},r.a=(e,n,r)=>{var o;r&&((o=[]).d=-1);var l,a,c,f=new Set,u=e.exports,d=new Promise(((t,i)=>{c=i,a=t}));d[i]=u,d[t]=t=>(o&&t(o),f.forEach(t),d.catch((t=>{}))),e.exports=d,n((e=>{var n;l=(e=>e.map((e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var n=[];n.d=0,e.then((t=>{r[i]=t,h(n)}),(t=>{r[s]=t,h(n)}));var r={};return r[t]=t=>t(n),r}}var o={};return o[t]=t=>{},o[i]=e,o})))(e);var r=()=>l.map((t=>{if(t[s])throw t[s];return t[i]})),a=new Promise((i=>{(n=()=>i(r)).r=0;var s=t=>t!==o&&!f.has(t)&&(f.add(t),t&&!t.d&&(n.r++,t.push(n)));l.map((i=>i[t](s)))}));return n.r?a:r()}),(t=>(t?c(d[s]=t):a(u),h(o)))),o&&o.d<0&&(o.d=0)},r.d=(t,i)=>{for(var s in i)r.o(i,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},r.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r.p="/Client2/",r.b=document.baseURI||self.location.href;r(7906)})();