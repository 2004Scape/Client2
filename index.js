(()=>{"use strict";var t,i,s,h,e={3099:(t,i,s)=>{s.d(i,{t:()=>M});var h=s(2790),e=s(8078),n=s(2028),r=s(2383),o=s(1995),l=(s(1527),s(9080)),a=s(7221),c=s(3909),f=s(3693),u=s(4191),d=s(9345),w=s(6121),y=s(2991),m=s(1840),p=s(312),A=s(9178),I=s(8067),g=s(8934),_=s(8809),C=s(1519),E=s(5810),T=s(3584),b=s(7958),v=s(2441),O=s(8056),L=s(551),S=s(1089),k=s(2157),R=s(8762);class M extends o.i{static h=225;static o=10;static portOffset=0;static l=!0;static u=!1;static m='';static p='';static A=!1;static I='https://raw.githubusercontent.com/2004scape/Server/main';static exponent=58778699976184461502525193738213253649000149147835990136706041084440742975821n;static _=7162900525229798032761816791230527296329313291232324290237849263501208207972894053929065636522363163621000728841182238772712427862772219676577293600221789n;static C=0;static T=0;static v=0;static O=0;static L=0;static S=0;static k=0;static R=0;static M=0;static N=0;static P=0;static D=0;static F=0;static U=0;static B=0;static G=()=>{a.i.u=!1,e.i.u=!1,M.u=!1,c.i.u=!1};static H=()=>{a.i.u=!0,e.i.u=!0,M.u=!0,c.i.u=!0};W=2048;Y=2047;Z=!1;V=!1;X=!1;j=!1;db=null;q=0;$=[];stream=null;in=r.i.K(1);J=r.i.K(1);tt=r.i.K(1);it=0n;st=0;ht=0;et=0;nt=null;rt=0;packetSize=0;ot=0;lt=0;ct=0;ft=null;ut=!0;dt=0;wt=0;yt=null;At=null;It=null;gt=null;_t=null;Ct=null;Et=null;Tt=null;bt=null;vt=null;Ot=null;Lt='';St='';username='';password='';kt=null;Rt=null;Mt=null;xt=null;Nt=[];Pt=!1;Dt=null;Ft=null;Ut=null;Bt=null;Gt=null;Ht=null;Wt=null;Yt=null;Zt=null;Vt=null;Xt=new Int32Array(256);zt=0;jt=0;qt=0;$t=null;Kt=null;Jt=null;Qt=null;ti=null;ii=null;si=null;hi=null;ei=null;ni=null;ri=null;oi=null;li=null;ai=null;ci=null;fi=null;ui=null;di=null;wi=null;yi=null;mi=null;pi=new Int32Array(33);Ai=new Int32Array(33);Ii=new Int32Array(151);gi=new Int32Array(151);_i=null;Ci=null;Ei=null;Ti=null;bi=null;vi=null;Oi=new d.to(13,null);Li=null;Si=null;ki=new d.to(50,null);Ri=new d.to(50,null);Mi=new d.to(20,null);xi=new d.to(20,null);Ni=null;Pi=new d.to(8,null);Di=null;Fi=null;Ui=null;Bi=null;Gi=null;Hi=null;Wi=null;Yi=null;Zi=null;Vi=null;Xi=null;zi=null;ji=null;qi=null;$i=null;Ki=null;Ji=null;Qi=null;ts=new d.to(1e3,null);ss=!1;hs=!1;es=!1;ns=!1;rs=-1;os=0;ls=0;cs=0;fs=0;us=0;ds=0;ws=!1;ys=0;ps=0;As=0;Is=0;gs=0;_s=0;Cs=[];Es=-1;Ts=-1;bs=new h.i;vs=78;Os=0;Ls=0;Ss=[];ks=0;Rs=0;Ms=0;xs=0;Ns=0;Ps=0;Ds=0;Fs=0;Us=[];Bs=[];Gs=[];Hs=[];Ws=null;Ys=-1;Zs=3;Vs=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];Xs=0;zs=0;js=0;qs=!1;$s=0;Ks=!1;Js='';Qs='';th=0;ih='';sh=!1;hh=-1;eh=new d.to(100,null);nh=new d.to(100,null);messageType=new Int32Array(100);rh=new Int32Array(100);oh=0;lh=0;ah=0;fh='';uh=0;dh=0;wh=0;yh=0;mh=0;ph=0;Ah=0;Ih=0;gh=0;_h=!1;Ch=0;Eh=0;Th=0;bh=0;Oh=null;Lh=0;Sh=0;kh=0;Rh=0;Mh=!1;xh=[];Nh=[];Ph=0;Dh=0;Fh=0;Uh=null;Bh=0;Gh=new Int32Array(500);Hh=new Int32Array(500);Wh=new Int32Array(500);Yh=new Int32Array(500);Zh=0;Vh=0;Xh=0;zh='';jh=!1;qh=-1;$h=0;Kh=0;Jh=0;Qh=0;te=0;ie=new Int32Array(1e3);se=new Int32Array(1e3);he=null;ee=0;ne=0;re=0;oe=0;le=0;ae=!1;ce=0;fe=0;ue=0;de=0;we=2;ye=2;me=1;pe=new Int32Array(5);Ae=new d.to(5,!1);Ie=new Int32Array(5);ge=new Int32Array(5);_e=new Int32Array(5);Ce=0;Ee=0;Te=0;be=0;ve=0;Oe=0;Le=0;Se=0;ke=0;Re=1;Me=2;xe=-1;Ne=0;Pe=0;De=0;Fe=0;Ue=0;Be=0;Ge=null;He=null;We=null;Ye=0;Ze=0;Ve=new Int8Array(16384);Xe=new d.to(f.i.ze,null);je=0;qe=0;$e=128;Ke=0;Je=0;Qe=0;tn=0;sn=0;hn=null;en=null;nn=new d.rn(f.i.ln,f.i.ln);an=0;cn=0;fn=0;un=0;dn=0;wn=0;yn=0;mn=0;pn=0;An=0;In=0;gn=0;_n=new d.to(this.W,null);Cn=0;En=new Int32Array(this.W);Tn=0;bn=0;vn=new Int32Array(this.W);On=new Int32Array(1e3);Ln=new d.to(this.W,null);Sn=new d.to(8192,null);kn=0;Rn=new Int32Array(8192);Mn=new l.i;xn=new l.i;Nn=new l.i;Pn=new l.i;Dn=new d.Fn(f.i.ze,f.i.ln,f.i.ln,null);Un=new l.i;Bn=new Int32Array(4e3);Gn=new Int32Array(4e3);Hn=new Int32Array(f.i.ln*f.i.ln);Wn=new Int32Array(f.i.ln*f.i.ln);Yn=0;Zn=null;Vn=0;Xn=0;zn=-1;jn=0;qn=0;$n=0;Kn=0;Jn=!1;Qn=!0;tr=!1;ir=new Int32Array(7);sr=new Int32Array(5);hr=0;er=0;static nr=50;rr=new Int32Array(M.nr);lr=new Int32Array(M.nr);ar=new Int32Array(M.nr);cr=new Int32Array(M.nr);ur=new Int32Array(M.nr);dr=new Int32Array(M.nr);wr=new Int32Array(M.nr);yr=new d.to(M.nr,null);mr=new d.to(100,null);pr=new BigInt64Array(100);Ar=new Int32Array(100);Ir=null;gr=0;_r=!0;Cr=new Int32Array(50);Er=new Int32Array(50);Tr=new Int32Array(50);br=192;vr=-1;Or=-1;Lr=0;Sr=0;kr=0;Rr=!0;Mr=null;Nr=0;Pr=0;Dr=192;Fr=()=>{try{this.stream&&this.stream.close()}catch(t){}this.stream=null,(0,T.Ur)(),this.J=null,this.tt=null,this.in=null,this.We=null,this.Ge=null,this.He=null,this.hn=null,this.en=null,this.he=null,this.Xe=null,this.Hn=null,this.Wn=null,this.Bn=null,this.Gn=null,this.Ve=null,this.Kt=null,this.Jt=null,this.Qt=null,this.ti=null,this.ii=null,this.si=null,this.hi=null,this.ei=null,this.ni=null,this.ri=null,this.oi=null,this.li=null,this.ai=null,this.ci=null,this.fi=null,this.ui=null,this.di=null,this._i=null,this.Ei=null,this.Ci=null,this.Ti=null,this.bi=null,this.vi=null,this.Oi=null,this.Wi=null,this.Yi=null,this.Zi=null,this.Vi=null,this.Xi=null,this.zi=null,this.ji=null,this.qi=null,this.$i=null,this.Ki=null,this.Si=null,this.Mi=null,this.xi=null,this.Pi=null,this.Di=null,this.Fi=null,this.Ui=null,this.Bi=null,this.ki=null,this.Ri=null,this.nn=null,this._n=null,this.En=null,this.vn=null,this.Ln=null,this.On=null,this.Sn=null,this.Rn=null,this.Dn=null,this.Un=null,this.Pn=null,this.Mn=null,this.xn=null,this.Nn=null,this.Wh=null,this.Yh=null,this.Gh=null,this.Hh=null,this.Cs=null,this.xh=null,this.ie=null,this.se=null,this.ts=null,this.Li=null,this.mr=null,this.pr=null,this.Ar=null,this.gt=null,this._t=null,this.yt=null,this.At=null,this.It=null,this.Ct=null,this.Et=null,this.Tt=null,this.bt=null,this.Br(),b.i.Fr(),v.i.Fr(),m.i.Fr(),O.i.Gr=null,_.i.Gr=null,h.i.Gr=null,I.i.Gr=null,L.i.Gr=null,L.i.Hr=null,S.i.Gr=null,this.Wr=null,u.i.Hr=null,e.i.Fr(),a.i.Fr(),A.i.Fr(),k.i.Gr=[],R.i.Gr=[]};Yr(){return this.dt}Zr(){return this.sh}Vr(){return this.Ks}Xr(){return this.Ts}zr(){return this.rs}Br=()=>{this.Pt=!1,this.$t&&(clearInterval(this.$t),this.$t=null),this.vt=null,this.Ot=null,this.Nt=[],this.Wt=null,this.Yt=null,this.Zt=null,this.Vt=null,this.Bt=null,this.Ut=null,this.Gt=null,this.Ht=null,this.Dt=null,this.Ft=null};jr=async(t,i,s,h)=>{let e=5,o=await(this.db?.qr(t));if(o&&r.i.$r(o)!==s&&(o=void 0),o)return new n.i(o);for(;!o;){await this.Kr(h,`Requesting ${i}`);try{o=await(0,C.Jr)(`${M.p}/${t}${s}`)}catch(t){o=void 0;for(let t=e;t>0;t--)await this.Kr(h,`Error loading - Will retry in ${t} secs.`),await(0,C.Qr)(1e3);e*=2,e>60&&(e=60)}}return await(this.db?.io(t,o)),new n.i(o)};so=async(t,i,s)=>{let h=await(this.db?.qr(t+'.mid'));if(h&&12345678!==i&&r.i.$r(h)!==i&&(h=void 0),!h)try{h=await(0,C.Jr)(`${M.p}/${t}_${i}.mid`),s!==h.length&&(h=h.slice(0,s))}catch(t){}if(!h)return;await(this.db?.io(t+'.mid',h));const e=new r.i(Uint8Array.from(h)).ho,n=E.i.read(e,h,s,4);(0,T.eo)(n,this.Dr)};no=()=>{if(w.ro.fillStyle='black',w.ro.fillRect(0,0,this.width,this.height),this.oo(1),this.X){this.Pt=!1,w.ro.font='bold 16px helvetica, sans-serif',w.ro.textAlign='left',w.ro.fillStyle='yellow';let t=35;w.ro.fillText('Sorry, an error has occured whilst loading RuneScape',30,t),t+=50,w.ro.fillStyle='white',w.ro.fillText('To fix this try the following (in order):',30,t),t+=50,w.ro.font='bold 12px helvetica, sans-serif',w.ro.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.ro.fillText('2: Try clearing your web-browsers cache from tools->internet options',30,t),t+=30,w.ro.fillText('3: Try using a different game-world',30,t),t+=30,w.ro.fillText('4: Try rebooting your computer',30,t),t+=30,w.ro.fillText('5: Try selecting a different version of Java from the play-game menu',30,t)}if(this.j&&(this.Pt=!1,w.ro.font='bold 20px helvetica, sans-serif',w.ro.textAlign='left',w.ro.fillStyle='white',w.ro.fillText('Error - unable to load game!',50,50),w.ro.fillText('To play RuneScape make sure you play from',50,100),w.ro.fillText('https://2004scape.org',50,150)),this.V){this.Pt=!1,w.ro.font='bold 13px helvetica, sans-serif',w.ro.textAlign='left',w.ro.fillStyle='yellow';let t=35;w.ro.fillText('Error a copy of RuneScape already appears to be loaded',30,t),t+=50,w.ro.fillStyle='white',w.ro.fillText('To fix this try the following (in order):',30,t),t+=50,w.ro.font='bold 12px helvetica, sans-serif',w.ro.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.ro.fillText('2: Try rebooting your computer, and reloading',30,t)}};lo=t=>{if(!t.ao)return!1;for(let i=0;i<t.ao.length;i++){const s=this.co(t,i);if(!t.fo)return!1;const h=t.fo[i];if(2===t.ao[i]){if(s>=h)return!1}else if(3===t.ao[i]){if(s<=h)return!1}else if(4===t.ao[i]){if(s===h)return!1}else if(s!==h)return!1}return!0};uo=(t,i,s,h,e)=>{this.Gi?.draw(t,i),this.Hi?.draw(t,i+e-16),y.i.fillRect(t,i+16,16,e-32,p.i.do);let n=(e-32)*e/h|0;n<8&&(n=8);const r=(e-n-32)*s/(h-e)|0;y.i.fillRect(t,i+r+16,16,n,p.i.wo),y.i.yo(t,i+r+16,p.i.mo,n),y.i.yo(t+1,i+r+16,p.i.mo,n),y.i.po(t,i+r+16,p.i.mo,16),y.i.po(t,i+r+17,p.i.mo,16),y.i.yo(t+15,i+r+16,p.i.Ao,n),y.i.yo(t+14,i+r+17,p.i.Ao,n-1),y.i.po(t,i+r+n+15,p.i.Ao,16),y.i.po(t+1,i+r+n+14,p.i.Ao,15)};Io=(t,i)=>{let s=!1;const e=h.i.Gr[t];if(!e._o)return!1;for(let t=0;t<e._o.length&&-1!==e._o[t];t++){const n=h.i.Gr[e._o[t]];if(1===n.type&&(s||=this.Io(n.id,i)),6===n.type&&(-1!==n.Co||-1!==n.Eo)){let t;if(t=this.lo(n)?n.Eo:n.Co,-1!==t){const h=I.i.Gr[t];if(n.To+=i,h.delay)for(;n.To>h.delay[n.bo];)n.To-=h.delay[n.bo]+1,n.bo++,n.bo>=h.vo&&(n.bo-=h.Oo,(n.bo<0||n.bo>=h.vo)&&(n.bo=0)),s=!0}}}return s};Lo=(t,i,s,n,r=!1)=>{if(0!==t.type||!t._o||t.hide&&this.uh!==t.id&&this.dh!==t.id&&this.wh!==t.id)return;const o=y.i.left,l=y.i.top,a=y.i.right,c=y.i.bottom;y.i.So(i,s,i+t.width,s+t.height);const f=t._o.length;for(let o=0;o<f;o++){if(!t.ko||!t.Ro)continue;let l=t.ko[o]+i,a=t.Ro[o]+s-n;const c=h.i.Gr[t._o[o]];if(l+=c.x,a+=c.y,r&&y.i.Mo(l,a,c.width,c.height,p.i.xo),c.No>0&&this.Po(c),c.type===h.i.Do)c.Fo>c.scroll-c.height&&(c.Fo=c.scroll-c.height),c.Fo<0&&(c.Fo=0),this.Lo(c,l,a,c.Fo,r),c.scroll>c.height&&this.uo(l+c.width,a,c.Fo,c.scroll,c.height);else if(c.type===h.i.Uo){let t=0;for(let i=0;i<c.height;i++)for(let s=0;s<c.width;s++){if(!(c.Bo&&c.Go&&c.Ho&&c.Wo))continue;let h=l+s*(c.Yo+32),e=a+i*(c.Zo+32);if(t<20&&(h+=c.Bo[t],e+=c.Go[t]),c.Ho[t]>0){let i=0,s=0;const n=c.Ho[t]-1;if(h>=-32&&h<=512&&e>=-32&&e<=334||0!==this.ph&&this.mh===t){const r=m.i.Vo(n,c.Wo[t]);if(0!==this.ph&&this.mh===t&&this.yh===c.id?(i=this.Xo-this.Ah,s=this.zo-this.Ih,i<5&&i>-5&&(i=0),s<5&&s>-5&&(s=0),this.gh<5&&(i=0,s=0),r.jo(128,h+i,e+s)):0!==this.Lh&&this.Sh===t&&this.kh===c.id?r.jo(128,h,e):r.draw(h,e),33===r.qo||1!==c.Wo[t]){const n=c.Wo[t];this.kt?.$o(h+i+1,e+10+s,this.Ko(n),p.i.Jo),this.kt?.$o(h+i,e+9+s,this.Ko(n),p.i.Qo)}}}else if(c.tl&&t<20){const i=c.tl[t];i?.draw(h,e)}t++}}else if(c.type===h.i.il)c.fill?y.i.fillRect(l,a,c.width,c.height,c.sl):y.i.Mo(l,a,c.width,c.height,c.sl);else if(c.type===h.i.hl){const t=c.font;let i=c.sl,s=c.text;if(this.wh!==c.id&&this.dh!==c.id&&this.uh!==c.id||0===c.el||(i=c.el),this.lo(c)&&(i=c.nl,c.rl&&c.rl.length>0&&(s=c.rl)),c.ol===h.i.ll&&this.Mh&&(s='Please wait...',i=c.sl),!t||!s)continue;for(let h=a+t.height;s.length>0;h+=t.height){if(-1!==s.indexOf('%')){for(;;){const t=s.indexOf('%1');if(-1===t)break;s=s.substring(0,t)+this.al(this.co(c,0))+s.substring(t+2)}for(;;){const t=s.indexOf('%2');if(-1===t)break;s=s.substring(0,t)+this.al(this.co(c,1))+s.substring(t+2)}for(;;){const t=s.indexOf('%3');if(-1===t)break;s=s.substring(0,t)+this.al(this.co(c,2))+s.substring(t+2)}for(;;){const t=s.indexOf('%4');if(-1===t)break;s=s.substring(0,t)+this.al(this.co(c,3))+s.substring(t+2)}for(;;){const t=s.indexOf('%5');if(-1===t)break;s=s.substring(0,t)+this.al(this.co(c,4))+s.substring(t+2)}}const e=s.indexOf('\\n');let n;-1!==e?(n=s.substring(0,e),s=s.substring(e+2)):(n=s,s=''),c.cl?t.fl(l+(c.width/2|0),h,n,i,c.ul):t.dl(l,h,n,i,c.ul)}}else if(c.type===h.i.wl){let t;t=this.lo(c)?c.yl:c.ml,t?.draw(l,a)}else if(c.type===h.i.pl){const t=e.i.Al,i=e.i.Il;e.i.Al=l+(c.width/2|0),e.i.Il=a+(c.height/2|0);const s=e.i.sin[c.gl]*c.zoom>>16,h=e.i.cos[c.gl]*c.zoom>>16,n=this.lo(c);let r;r=n?c.Eo:c.Co;let o=null;if(-1===r)o=c._l(-1,-1,n);else{const t=I.i.Gr[r];t.frames&&t.Cl&&(o=c._l(t.frames[c.bo],t.Cl[c.bo],n))}o&&o.El(0,c.Tl,0,c.gl,0,s,h),e.i.Al=t,e.i.Il=i}else if(c.type===h.i.bl){const t=c.font;if(!t||!c.Ho||!c.Wo)continue;let i=0;for(let s=0;s<c.height;s++)for(let h=0;h<c.width;h++){if(c.Ho[i]>0){const e=m.i.get(c.Ho[i]-1);let n=e.name;if((e.vl||1!==c.Wo[i])&&(n=n+' x'+this.Ol(c.Wo[i])),!n)continue;const r=l+h*(c.Yo+115),o=a+s*(c.Zo+12);c.cl?t.fl(r+(c.width/2|0),o,n,c.sl,c.ul):t.dl(r,o,n,c.sl,c.ul)}i++}}}y.i.So(o,l,a,c)};Po=t=>{let i=t.No;if(i>=h.i.Ll&&i<=h.i.Sl)i--,i>=this.hr?(t.text='',t.ol=0):(t.text=this.mr[i],t.ol=1);else if(i>=h.i.kl&&i<=h.i.Rl)i-=h.i.kl,i>=this.hr?(t.text='',t.ol=0):(0===this.Ar[i]?t.text='@red@Offline':this.Ar[i]===M.o?t.text='@gre@World-'+(this.Ar[i]-9):t.text='@yel@World-'+(this.Ar[i]-9),t.ol=1);else if(i===h.i.Ml)t.scroll=15*this.hr+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i>=h.i.xl&&i<=h.i.Nl)i-=h.i.xl,i>=this.Ls?(t.text='',t.ol=0):(t.text=g.i.Pl(g.i.Dl(this.Ss[i])),t.ol=1);else if(i===h.i.Fl)t.scroll=15*this.Ls+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i===h.i.Ul){if(t.gl=150,t.Tl=2047&(256*Math.sin(this.q/40)|0),this.tr){this.tr=!1;const i=new d.to(7,null);let s=0;for(let t=0;t<7;t++){const h=this.ir[t];h>=0&&(i[s++]=_.i.Gr[h]._l())}const h=A.i.Bl(i,s);for(let t=0;t<5;t++)0!==this.sr[t]&&(h.Gl(u.i.Hl[t][0],u.i.Hl[t][this.sr[t]]),1===t&&h.Gl(u.i.Wl[0],u.i.Wl[this.sr[t]]));if(this.Zn){const i=I.i.Gr[this.Zn.Yl].frames;i&&(h.Zl(),h.Vl(i[0]),h.Xl(64,850,-30,-50,-30,!0),t.model=h)}}}else if(i===h.i.zl)this.Ji||(this.Ji=t.ml,this.Qi=t.yl),this.Qn?t.ml=this.Qi:t.ml=this.Ji;else if(i===h.i.jl)this.Ji||(this.Ji=t.ml,this.Qi=t.yl),this.Qn?t.ml=this.Ji:t.ml=this.Qi;else if(i===h.i.ql)t.text=this.zh,this.q%20<10?t.text=t.text+'|':t.text=t.text+' ';else if(i===h.i.$l)this.Jn?this.jh?(t.sl=p.i.RED,t.text='Moderator option: Mute player for 48 hours: <ON>'):(t.sl=p.i.xo,t.text='Moderator option: Mute player for 48 hours: <OFF>'):t.text='';else if(i===h.i.Kl||i===h.i.Jl)if(0===this.$h)t.text='';else{let i;i=0===this.Kh?'earlier today':1===this.Kh?'yesterday':this.Kh+' days ago',t.text='You last logged in '+i+' from: '+g.i.Ql(this.$h)}else if(i===h.i.ta)0===this.Qh&&(t.text='0 unread messages',t.sl=p.i.Qo),1===this.Qh&&(t.text='1 unread message',t.sl=p.i.GREEN),this.Qh>1&&(t.text=this.Qh+' unread messages',t.sl=p.i.GREEN);else if(i===h.i.ia)if(201===this.Jh)t.text='';else if(200===this.Jh)t.text='You have not yet set any password recovery questions.';else{let i;i=0===this.Jh?'Earlier today':1===this.Jh?'Yesterday':this.Jh+' days ago',t.text=i+' you changed your recovery questions'}else i===h.i.sa?201===this.Jh?t.text='':200===this.Jh?t.text='We strongly recommend you do so now to secure your account.':t.text='If you do not remember making this change then cancel it immediately':i===h.i.ha&&(201===this.Jh?t.text='':(this.Jh,t.text="Do this from the 'account management' area on our front webpage"))};co=(t,i)=>{if(!t.scripts||i>=t.scripts.length)return-2;try{const s=t.scripts[i];if(!s)return-1;let e=0,n=0;for(;;){const t=s[n++];if(0===t)return e;if(1===t)e+=this.Bs[s[n++]];else if(2===t)e+=this.Gs[s[n++]];else if(3===t)e+=this.Us[s[n++]];else if(4===t){const t=h.i.Gr[s[n++]],i=s[n++]+1;if(t.Ho&&t.Wo)for(let s=0;s<t.Ho.length;s++)t.Ho[s]===i&&(e+=t.Wo[s]);else e+=0}else if(5===t)e+=this.xh[s[n++]];else if(6===t)e+=this.Hs[this.Gs[s[n++]]-1];else if(7===t)e+=100*this.xh[s[n++]]/46875|0;else if(8===t)e+=this.Zn?.ea||0;else if(9===t)for(let t=0;t<19;t++)18===t&&(t=20),e+=this.Gs[t];else if(10===t){const t=h.i.Gr[s[n++]],i=s[n++]+1;for(let s=0;s<t.Ho.length;s++)if(t.Ho[s]===i){e+=999999999;break}}else if(11===t)e+=this.Vn;else if(12===t)e+=this.jn;else if(13===t){const t=this.xh[s[n++]];e+=0==(t&1<<s[n++])?0:1}}}catch(t){return-1}};al=t=>t<999999999?String(t):'*';Ol=t=>{let i=String(t);for(let t=i.length-3;t>0;t-=3)i=i.substring(0,t)+','+i.substring(t);return i.length>8?i='@gre@'+i.substring(0,i.length-8)+' million @whi@('+i+')':i.length>4&&(i='@cya@'+i.substring(0,i.length-4)+'K @whi@('+i+')'),' '+i};Ko=t=>t<1e5?String(t):t<1e7?(t/1e3|0)+'K':(t/1e6|0)+'M'}},1803:(t,i,s)=>{s.d(i,{na:()=>r});var h=s(1995),e=s(3099),n=s(1519);async function r(){const t=window.location.hostname,i=window.location.protocol.startsWith('https');0===h.i.getParameter('world').length&&h.i.setParameter('world','1'),0===h.i.getParameter('detail').length&&h.i.setParameter('detail','high'),0===h.i.getParameter('method').length&&h.i.setParameter('method','0'),'localhost'===t&&'0'===h.i.getParameter('world')?(e.t.m='http://localhost',e.t.p='http://localhost',e.t.portOffset=0):await async function(t){const i=await o(t,parseInt(h.i.getParameter('world'),10)),s=new URL(i.address);e.t.o=10+i.id-1,e.t.m=`${s.protocol}//${s.hostname}`,e.t.p=`${s.protocol}//${s.hostname}:${s.port}`,t||(e.t.m=e.t.m.replace('https:','http:'));e.t.portOffset=i.portOffset,e.t.l=!0===i?.l}(i),'low'===h.i.getParameter('detail')?e.t.H():e.t.G()}async function o(t,i,s=0){if(s>=10)throw new Error('could not find world to connect!');const h=t?'https:':'http:';let e;try{e=JSON.parse(await(0,n.ra)(`${h}//2004scape.org/api/v1/worldlist`))}catch(h){return await(0,n.Qr)(1e3),o(t,i,++s)}const r=e.find((t=>t.id===i));return r||o(t,i,10)}},1979:(t,i,s)=>{s.a(t,(async(t,i)=>{try{var h=s(8067),e=s(7958),n=s(1840),r=s(2441),o=s(8809),l=s(551),a=s(1089),c=s(2790),f=s(651),u=s(2991),d=s(8078),w=s(664),y=s(6542),m=s(4628),p=s(9178),A=s(312),I=s(2383),g=s(1812),_=s(741),C=s(7576),E=s(8432),T=s(9782),b=s(9995),v=s(9897),O=s(6054),L=s(6970),S=(s(1527),s(5810)),k=s(9080),R=s(8934),M=s(6884),x=s(7221),N=s(3909),P=s(3714),D=s(1908),F=s(5534),U=s(6150),B=s(7396),G=s(3693),H=s(8603),W=s(4191),Y=s(1353),Z=s(7973),V=s(682),X=s(1810),z=s(5659),j=s(3584),q=s(1519),$=s(9345),K=s(3099),J=s(2157),Q=s(8762),tt=s(8056),it=s(1803);class t extends K.t{load=async()=>{if(this.Z)this.V=!0;else{this.Z=!0;try{await this.Kr(10,'Connecting to fileserver'),await S.i.load(await(await fetch('bz2.wasm')).arrayBuffer()),this.db=new E.i(await E.i.openDatabase());const t=new I.i(new Uint8Array(await(0,q.Jr)(`${K.t.p}/crc`)));for(let i=0;i<9;i++)this.$[i]=t.ho;K.t.u||await this.so('scape_main',12345678,4e4);const i=await this.jr('title','title screen',this.$[1],10);this.ft=i,this.kt=m.i.oa(i,'p11'),this.Rt=m.i.oa(i,'p12'),this.Mt=m.i.oa(i,'b12'),this.xt=m.i.oa(i,'q8'),await this.la(),this.aa();const s=await this.jr('config','config',this.$[2],15),u=await this.jr('interface','interface',this.$[3],20),A=await this.jr('media','2d graphics',this.$[4],30),g=await this.jr('models','3d graphics',this.$[5],40),_=await this.jr('textures','textures',this.$[6],60),C=await this.jr('wordenc','chat system',this.$[7],65),T=await this.jr('sounds','sound effects',this.$[8],70);this.en=new $.ca(G.i.ze,G.i.ln,G.i.ln),this.hn=new $.fa(G.i.ze,G.i.ln+1,G.i.ln+1),this.hn&&(this.he=new x.i(this.hn,G.i.ln,G.i.ze,G.i.ln));for(let t=0;t<G.i.ze;t++)this.Xe[t]=new G.i;this.Li=new y.i(512,512),await this.Kr(75,'Unpacking media'),this._i=w.i.oa(A,'invback',0),this.Ci=w.i.oa(A,'chatback',0),this.Ei=w.i.oa(A,'mapback',0),this.Ti=w.i.oa(A,'backbase1',0),this.bi=w.i.oa(A,'backbase2',0),this.vi=w.i.oa(A,'backhmid1',0);for(let t=0;t<13;t++)this.Oi[t]=w.i.oa(A,'sideicons',t);this.Si=y.i.oa(A,'compass',0);try{for(let t=0;t<50;t++)22!==t&&(this.ki[t]=w.i.oa(A,'mapscene',t))}catch(t){}try{for(let t=0;t<50;t++)this.Ri[t]=y.i.oa(A,'mapfunction',t)}catch(t){}try{for(let t=0;t<20;t++)this.Mi[t]=y.i.oa(A,'hitmarks',t)}catch(t){}try{for(let t=0;t<20;t++)this.xi[t]=y.i.oa(A,'headicons',t)}catch(t){}this.Ni=y.i.oa(A,'mapflag',0);for(let t=0;t<8;t++)this.Pi[t]=y.i.oa(A,'cross',t);this.Di=y.i.oa(A,'mapdots',0),this.Fi=y.i.oa(A,'mapdots',1),this.Ui=y.i.oa(A,'mapdots',2),this.Bi=y.i.oa(A,'mapdots',3),this.Gi=w.i.oa(A,'scrollbar',0),this.Hi=w.i.oa(A,'scrollbar',1),this.Wi=w.i.oa(A,'redstone1',0),this.Yi=w.i.oa(A,'redstone2',0),this.Zi=w.i.oa(A,'redstone3',0),this.Vi=w.i.oa(A,'redstone1',0),this.Vi?.ua(),this.Xi=w.i.oa(A,'redstone2',0),this.Xi?.ua(),this.zi=w.i.oa(A,'redstone1',0),this.zi?.da(),this.ji=w.i.oa(A,'redstone2',0),this.ji?.da(),this.qi=w.i.oa(A,'redstone3',0),this.qi?.da(),this.$i=w.i.oa(A,'redstone1',0),this.$i?.ua(),this.$i?.da(),this.Ki=w.i.oa(A,'redstone2',0),this.Ki?.ua(),this.Ki?.da();const b=y.i.oa(A,'backleft1',0);this.ei=new f.i(b.width,b.height),b.wa(0,0);const O=y.i.oa(A,'backleft2',0);this.ni=new f.i(O.width,O.height),O.wa(0,0);const k=y.i.oa(A,'backright1',0);this.ri=new f.i(k.width,k.height),k.wa(0,0);const R=y.i.oa(A,'backright2',0);this.oi=new f.i(R.width,R.height),R.wa(0,0);const M=y.i.oa(A,'backtop1',0);this.li=new f.i(M.width,M.height),M.wa(0,0);const N=y.i.oa(A,'backtop2',0);this.ai=new f.i(N.width,N.height),N.wa(0,0);const P=y.i.oa(A,'backvmid1',0);this.ci=new f.i(P.width,P.height),P.wa(0,0);const D=y.i.oa(A,'backvmid2',0);this.fi=new f.i(D.width,D.height),D.wa(0,0);const F=y.i.oa(A,'backvmid3',0);this.ui=new f.i(F.width,F.height),F.wa(0,0);const U=y.i.oa(A,'backhmid2',0);this.di=new f.i(U.width,U.height),U.wa(0,0);const B=(21*Math.random()|0)-10,H=(21*Math.random()|0)-10,W=(21*Math.random()|0)-10,Y=(41*Math.random()|0)-20;for(let t=0;t<50;t++)this.Ri[t]&&this.Ri[t]?.translate(B+Y,H+Y,W+Y),this.ki[t]&&this.ki[t]?.translate(B+Y,H+Y,W+Y);await this.Kr(80,'Unpacking textures'),d.i.ya(_),d.i.ma(.8),d.i.pa(20),await this.Kr(83,'Unpacking models'),p.i.Aa(g),J.i.Aa(g),Q.i.Aa(g),await this.Kr(86,'Unpacking config'),h.i.Aa(s),e.i.Aa(s),tt.i.Aa(s),n.i.Aa(s,K.t.l),r.i.Aa(s),o.i.Aa(s),l.i.Aa(s),a.i.Aa(s),K.t.u||(await this.Kr(90,'Unpacking sounds'),L.i.Aa(T)),await this.Kr(92,'Unpacking interfaces'),c.i.Aa(u,A,[this.kt,this.Rt,this.Mt,this.xt]),await this.Kr(97,'Preparing game engine');for(let t=0;t<33;t++){let i=999,s=0;for(let h=0;h<35;h++)if(0===this.Ei.Ia[h+t*this.Ei.width])999===i&&(i=h);else if(999!==i){s=h;break}this.pi[t]=i,this.Ai[t]=s-i}for(let t=9;t<160;t++){let i=999,s=0;for(let h=10;h<168;h++)if(0===this.Ei.Ia[h+t*this.Ei.width]&&(h>34||t>34))999===i&&(i=h);else if(999!==i){s=h;break}this.Ii[t-9]=i-21,this.gi[t-9]=s-i}d.i.ga(479,96),this.wi=d.i._a,d.i.ga(190,261),this.yi=d.i._a,d.i.ga(512,334),this.mi=d.i._a;const Z=new Int32Array(9);for(let t=0;t<9;t++){const i=32*t+128+15,s=3*i+600,h=d.i.sin[i];Z[t]=s*h>>16}x.i.init(512,334,500,800,Z),v.i.Aa(C),this.Ca()}catch(t){console.error(t),this.X=!0}}};update=async()=>{this.V||this.X||this.j||(this.q++,this.Ea?await this.Ta():await this.ba())};draw=async()=>{this.V||this.X||this.j?this.no():(this.Ea?this.va():await this.Oa(),this.os=0)};refresh=()=>{this.ut=!0};Kr=async(t,i)=>{if(console.log(`${t}%: ${i}`),await this.La(),!this.ft)return void await super.Kr(t,i);this.It?.bind();this.Mt?.Sa(180,54,'RuneScape is loading - please wait...',A.i.xo);u.i.Mo(28,62,304,34,A.i.ka),u.i.Mo(29,63,302,32,A.i.Jo),u.i.fillRect(30,64,3*t,30,A.i.ka),u.i.fillRect(30+3*t,64,300-3*t,30,A.i.Jo),this.Mt?.Sa(180,85,i,A.i.xo),this.It?.draw(214,186),this.ut&&(this.ut=!1,this.Pt||(this.gt?.draw(0,0),this._t?.draw(661,0)),this.yt?.draw(128,0),this.At?.draw(214,386),this.Ct?.draw(0,265),this.Et?.draw(574,265),this.Tt?.draw(128,186),this.bt?.draw(574,186)),await(0,q.Qr)(5)};Ra=()=>{this.Pt&&(this.Ma(),this.Ma(),this.xa())};La=async()=>{this.yt||(this.Wr=null,this.ti=null,this.Jt=null,this.Kt=null,this.Qt=null,this.ii=null,this.si=null,this.hi=null,this.gt=new f.i(128,265),u.i.clear(),this._t=new f.i(128,265),u.i.clear(),this.yt=new f.i(533,186),u.i.clear(),this.At=new f.i(360,146),u.i.clear(),this.It=new f.i(360,200),u.i.clear(),this.Ct=new f.i(214,267),u.i.clear(),this.Et=new f.i(215,267),u.i.clear(),this.Tt=new f.i(86,79),u.i.clear(),this.bt=new f.i(87,79),u.i.clear(),this.ft&&(await this.la(),this.aa()),this.ut=!0)};la=async()=>{if(!this.ft)return;const t=await y.i.Na(this.ft,'title');this.gt?.bind(),t.wa(0,0),this._t?.bind(),t.wa(-661,0),this.yt?.bind(),t.wa(-128,0),this.At?.bind(),t.wa(-214,-386),this.It?.bind(),t.wa(-214,-186),this.Ct?.bind(),t.wa(0,-265),this.Et?.bind(),t.wa(-128,-186),this.Tt?.bind(),t.wa(-128,-186),this.bt?.bind(),t.wa(-574,-186),t.ua(),this.gt?.bind(),t.wa(394,0),this._t?.bind(),t.wa(-267,0),this.yt?.bind(),t.wa(266,0),this.At?.bind(),t.wa(180,-386),this.It?.bind(),t.wa(180,-186),this.Ct?.bind(),t.wa(394,-265),this.Et?.bind(),t.wa(-180,-265),this.Tt?.bind(),t.wa(212,-186),this.bt?.bind(),t.wa(-180,-186);const i=y.i.oa(this.ft,'logo');this.yt?.bind(),i.draw((this.width/2|0)-(i.width/2|0)-128,18)};Pa=t=>{if(!this.Bt||!this.Ut)return;this.Bt.fill(0);for(let t=0;t<5e3;t++){const t=128*Math.random()*256|0;this.Bt[t]=256*Math.random()|0}for(let t=0;t<20;t++){for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Ut[s]=(this.Bt[s-1]+this.Bt[s+1]+this.Bt[s-128]+this.Bt[s+128])/4|0}const t=this.Bt;this.Bt=this.Ut,this.Ut=t}if(t){let i=0;for(let s=0;s<t.height;s++)for(let h=0;h<t.width;h++)if(0!==t.Ia[i++]){const i=h+t.Da+16+(s+t.Fa+16<<7);this.Bt[i]=0}}};aa=()=>{if(this.ft){this.vt=w.i.oa(this.ft,'titlebox'),this.Ot=w.i.oa(this.ft,'titlebutton');for(let t=0;t<12;t++)this.Nt[t]=w.i.oa(this.ft,'runes',t);this.Dt=new y.i(128,265),this.Ft=new y.i(128,265),this.gt&&(0,q.Ua)(this.gt.Ia,0,this.Dt.Ia,0,33920),this._t&&(0,q.Ua)(this._t.Ia,0,this.Ft.Ia,0,33920),this.Yt=new Int32Array(256);for(let t=0;t<64;t++)this.Yt[t]=262144*t;for(let t=0;t<64;t++)this.Yt[t+64]=1024*t+A.i.RED;for(let t=0;t<64;t++)this.Yt[t+128]=4*t+A.i.Qo;for(let t=0;t<64;t++)this.Yt[t+192]=A.i.xo;this.Zt=new Int32Array(256);for(let t=0;t<64;t++)this.Zt[t]=1024*t;for(let t=0;t<64;t++)this.Zt[t+64]=4*t+A.i.GREEN;for(let t=0;t<64;t++)this.Zt[t+128]=262144*t+A.i.Ba;for(let t=0;t<64;t++)this.Zt[t+192]=A.i.xo;this.Vt=new Int32Array(256);for(let t=0;t<64;t++)this.Vt[t]=4*t;for(let t=0;t<64;t++)this.Vt[t+64]=262144*t+A.i.BLUE;for(let t=0;t<64;t++)this.Vt[t+128]=1024*t+A.i.Ga;for(let t=0;t<64;t++)this.Vt[t+192]=A.i.xo;this.Wt=new Int32Array(256),this.Bt=new Int32Array(32768),this.Ut=new Int32Array(32768),this.Pa(null),this.Gt=new Int32Array(32768),this.Ht=new Int32Array(32768),this.Kr(10,'Connecting to fileserver').then((()=>{this.Pt||(this.Pt=!0,this.$t=setInterval(this.Ra,35))}))}};ba=async()=>{if(0===this.dt){let t=(this.width/2|0)-80,i=20+(this.height/2|0);i+=20,1===this.Ha&&this.Wa>=t-75&&this.Wa<=t+75&&this.Ya>=i-20&&this.Ya<=i+20&&(this.dt=3,this.wt=0),t=80+(this.width/2|0),1===this.Ha&&this.Wa>=t-75&&this.Wa<=t+75&&this.Ya>=i-20&&this.Ya<=i+20&&(this.Lt='',this.St='Enter your username & password.',this.dt=2,this.wt=0)}else if(2===this.dt){let t=(this.height/2|0)-40;t+=30,t+=25,1===this.Ha&&this.Ya>=t-15&&this.Ya<t&&(this.wt=0),t+=15,1===this.Ha&&this.Ya>=t-15&&this.Ya<t&&(this.wt=1);let i=(this.width/2|0)-80,s=50+(this.height/2|0);for(s+=20,1===this.Ha&&this.Wa>=i-75&&this.Wa<=i+75&&this.Ya>=s-20&&this.Ya<=s+20&&await this.Za(this.username,this.password,!1),i=80+(this.width/2|0),1===this.Ha&&this.Wa>=i-75&&this.Wa<=i+75&&this.Ya>=s-20&&this.Ya<=s+20&&(this.dt=0,this.username='',this.password='');;){const t=this.Va();if(-1===t)return;let i=!1;for(let s=0;s<m.i.Xa.length;s++)if(String.fromCharCode(t)===m.i.Xa.charAt(s)){i=!0;break}0===this.wt?(8===t&&this.username.length>0&&(this.username=this.username.substring(0,this.username.length-1)),9!==t&&10!==t&&13!==t||(this.wt=1),i&&(this.username=this.username+String.fromCharCode(t)),this.username.length>12&&(this.username=this.username.substring(0,12))):1===this.wt&&(8===t&&this.password.length>0&&(this.password=this.password.substring(0,this.password.length-1)),9!==t&&10!==t&&13!==t||(this.wt=0),i&&(this.password=this.password+String.fromCharCode(t)),this.password.length>20&&(this.password=this.password.substring(0,20)))}}else if(3===this.dt){const t=this.width/2|0;let i=50+(this.height/2|0);i+=20,1===this.Ha&&this.Wa>=t-75&&this.Wa<=t+75&&this.Ya>=i-20&&this.Ya<=i+20&&(this.dt=0)}};Oa=async()=>{await this.La(),this.It?.bind(),this.vt?.draw(0,0);if(0===this.dt){let t=180,i=80;this.Mt?.fl(t,i,'Welcome to RuneScape',A.i.Qo,!0),t=100,i=120,this.Ot?.draw(t-73,i-20),this.Mt?.fl(t,i+5,'New user',A.i.xo,!0),t=260,this.Ot?.draw(t-73,i-20),this.Mt?.fl(t,i+5,'Existing User',A.i.xo,!0)}else if(2===this.dt){let t=100,i=60;this.Lt.length>0?(this.Mt?.fl(180,i-15,this.Lt,A.i.Qo,!0),this.Mt?.fl(180,i,this.St,A.i.Qo,!0),i+=30):(this.Mt?.fl(180,i-7,this.St,A.i.Qo,!0),i+=30),this.Mt?.dl(90,i,`Username: ${this.username}${0===this.wt&&this.q%40<20?'@yel@|':''}`,A.i.xo,!0),i+=15,this.Mt?.dl(92,i,`Password: ${R.i.za(this.password)}${1===this.wt&&this.q%40<20?'@yel@|':''}`,A.i.xo,!0),i=150,this.Ot?.draw(t-73,i-20),this.Mt?.fl(t,i+5,'Login',A.i.xo,!0),t=260,this.Ot?.draw(t-73,i-20),this.Mt?.fl(t,i+5,'Cancel',A.i.xo,!0)}else if(3===this.dt){this.Mt?.fl(180,40,'Create a free account',A.i.Qo,!0);const t=180;let i=65;this.Mt?.fl(180,i,'To create a new account you need to',A.i.xo,!0),i+=15,this.Mt?.fl(180,i,'go back to the main RuneScape webpage',A.i.xo,!0),i+=15,this.Mt?.fl(180,i,"and choose the red 'create account'",A.i.xo,!0),i+=15,this.Mt?.fl(180,i,'button at the top right of that page.',A.i.xo,!0),i=150,this.Ot?.draw(t-73,i-20),this.Mt?.fl(t,i+5,'Cancel',A.i.xo,!0)}this.It?.draw(214,186),this.ut&&(this.ut=!1,this.yt?.draw(128,0),this.At?.draw(214,386),this.Ct?.draw(0,265),this.Et?.draw(574,265),this.Tt?.draw(128,186),this.bt?.draw(574,186))};Za=async(t,i,s)=>{try{s||(this.Lt='',this.St='Connecting to server...',await this.Oa()),this.stream=new g.i(await g.i.ja({host:K.t.m,port:43594+K.t.portOffset})),await(this.stream?.qa(this.in.data,0,8)),this.in.$a=0,this.it=this.in.Ka;const h=new Int32Array([Math.floor(99999999*Math.random()),Math.floor(99999999*Math.random()),Number(this.it>>32n),Number(this.it&BigInt(4294967295))]);this.J.$a=0,this.J.p1(10),this.J.p4(h[0]),this.J.p4(h[1]),this.J.p4(h[2]),this.J.p4(h[3]),this.J.p4(0),this.J.Ja(t),this.J.Ja(i),this.J.Qa(K.t._,K.t.exponent),this.tt.$a=0,s?this.tt.p1(18):this.tt.p1(16),this.tt.p1(this.J.$a+36+1+1),this.tt.p1(K.t.h),this.tt.p1(K.t.u?1:0);for(let t=0;t<9;t++)this.tt.p4(this.$[t]);this.tt.tc(this.J.data,this.J.$a,0),this.J.random=new C.i(h);for(let t=0;t<4;t++)h[t]+=50;this.nt=new C.i(h),this.stream?.write(this.tt.data,this.tt.$a);const e=await this.stream.read();if(1===e)return await(0,q.Qr)(2e3),void await this.Za(t,i,s);if(2===e||18===e){this.Jn=18===e,M.i.ic(),this.Ea=!0,this.J.$a=0,this.in.$a=0,this.rt=-1,this.ot=-1,this.lt=-1,this.ct=-1,this.packetSize=0,this.st=0,this.et=0,this.ht=0,this.ks=0,this._s=0,this.ws=!1,this.sc=0;for(let t=0;t<100;t++)this.eh[t]=null;this.Ch=0,this.Ph=0,this.ee=0,this.gr=0,this.fe=(100*Math.random()|0)-50,this.ue=(110*Math.random()|0)-55,this.de=(80*Math.random()|0)-40,this.Se=(120*Math.random()|0)-60,this.ke=(30*Math.random()|0)-20,this.Ke=(20*Math.random()|0)-10&2047,this.xe=-1,this.oe=0,this.le=0,this.Cn=0,this.kn=0;for(let t=0;t<this.W;t++)this._n[t]=null,this.Ln[t]=null;for(let t=0;t<8192;t++)this.Sn[t]=null;this.Zn=this._n[this.Y]=new W.i,this.Mn.clear(),this.xn.clear(),this.Pn.clear();for(let t=0;t<G.i.ze;t++)for(let i=0;i<G.i.ln;i++)for(let s=0;s<G.i.ln;s++)this.Dn[t][i][s]=null;this.Un=new k.i,this.hr=0,this.hh=-1,this.Ts=-1,this.rs=-1,this.Es=-1,this.Mh=!1,this.Zs=3,this.sh=!1,this.ws=!1,this.Ks=!1,this.Ws=null,this.Xn=0,this.Ys=-1,this.Qn=!0,this.hc();for(let t=0;t<5;t++)this.sr[t]=0;return K.t.L=0,K.t.N=0,K.t.R=0,K.t.S=0,K.t.O=0,K.t.M=0,K.t.U=0,K.t.D=0,K.t.P=0,void this.ec()}if(3===e)return this.Lt='',void(this.St='Invalid username or password.');if(4===e)return this.Lt='Your account has been disabled.',void(this.St='Please check your message-centre for details.');if(5===e)return this.Lt='Your account is already logged in.',void(this.St='Try again in 60 secs...');if(6===e)return this.Lt='RuneScape has been updated!',void(this.St='Please reload this page.');if(7===e)return this.Lt='This world is full.',void(this.St='Please use a different world.');if(8===e)return this.Lt='Unable to connect.',void(this.St='Login server offline.');if(9===e)return this.Lt='Login limit exceeded.',void(this.St='Too many connections from your address.');if(10===e)return this.Lt='Unable to connect.',void(this.St='Bad session id.');if(11===e)return this.St='Login server rejected session.',void(this.St='Please try again.');if(12===e)return this.Lt='You need a members account to login to this world.',void(this.St='Please subscribe, or use a different world.');if(13===e)return this.Lt='Could not complete login.',void(this.St='Please try using a different world.');if(14===e)return this.Lt='The server is being updated.',void(this.St='Please wait 1 minute and try again.');if(15===e)return this.Ea=!0,this.J.$a=0,this.in.$a=0,this.rt=-1,this.ot=-1,this.lt=-1,this.ct=-1,this.packetSize=0,this.st=0,this.et=0,this._s=0,void(this.ws=!1);if(16===e)return this.Lt='Login attempts exceeded.',void(this.St='Please wait 1 minute and try again.');17===e&&(this.Lt='You are standing in a members-only area.',this.St='To play on this world move to a free area first')}catch(t){console.log(t),this.Lt='',this.St='Error connecting to server.'}};Ta=async()=>{if(null!==this._n){this.et>1&&this.et--,this.ht>0&&this.ht--;for(let t=0;t<5&&await this.read();t++);if(this.Ea){for(let t=0;t<this.gr;t++)if(this.Tr[t]<=0){try{const i=L.i.nc(this.Cr[t],this.Er[t]);if(!i)throw new Error;Date.now()+(i.$a/22|0)>this.Sr+(this.Lr/22|0)&&(this.Lr=i.$a,this.Sr=Date.now(),this.vr=this.Cr[t],this.Or=this.Er[t],await(0,j.rc)(i.data.slice(0,i.$a),this.br))}catch(t){console.error(t)}this.gr--;for(let i=t;i<this.gr;i++)this.Cr[i]=this.Cr[i+1],this.Er[i]=this.Er[i+1],this.Tr[i]=this.Tr[i+1];t--}else this.Tr[t]--;this.kr>0&&(this.kr-=20,this.kr<0&&(this.kr=0),0===this.kr&&this.Rr&&!K.t.u&&this.Mr&&await this.so(this.Mr,this.Nr,this.Pr));const t=M.i.flush();if(t&&(this.J.oc(b.i.lc),this.J.p2(t.$a),this.J.tc(t.data,t.$a,0),t.release()),this.st++,this.st>750&&await this.ac(),this.cc(),this.fc(),this.uc(),this.dc(),(1===this.wc[1]||1===this.wc[2]||1===this.wc[3]||1===this.wc[4])&&this.qe++>5&&(this.qe=0,this.J.oc(b.i.yc),this.J.p2(this.$e),this.J.p2(this.Ke),this.J.p1(this.Se),this.J.p1(this.ke)),this.ne++,0!==this.ls&&(this.cs+=20,this.cs>=400&&(this.ls=0)),0!==this.Lh&&(this.Rh++,this.Rh>=15&&(2===this.Lh&&(this.ss=!0),3===this.Lh&&(this.hs=!0),this.Lh=0)),0!==this.ph&&(this.gh++,(this.Xo>this.Ah+5||this.Xo<this.Ah-5||this.zo>this.Ih+5||this.zo<this.Ih-5)&&(this._h=!0),0===this.mc)){if(2===this.ph&&(this.ss=!0),3===this.ph&&(this.hs=!0),this.ph=0,this._h&&this.gh>=5){if(this.Zh=-1,this.Ac(),this.Zh===this.yh&&this.Vh!==this.mh){const t=c.i.Gr[this.yh];if(t.Ho){const i=t.Ho[this.Vh];t.Ho[this.Vh]=t.Ho[this.mh],t.Ho[this.mh]=i}if(t.Wo){const i=t.Wo[this.Vh];t.Wo[this.Vh]=t.Wo[this.mh],t.Wo[this.mh]=i}this.J.oc(b.i.Ic),this.J.p2(this.yh),this.J.p2(this.mh),this.J.p2(this.Vh)}}else(1===this.Bh||this.gc(this._s-1))&&this._s>2?this._c():this._s>0&&await this.Cc(this._s-1);this.Rh=10,this.Ha=0}if(K.t.C++,K.t.C>127&&(K.t.C=0,this.J.oc(b.i.Ec),this.J.p3(4991788)),-1!==x.i.Tc&&this.Zn){const t=x.i.Tc,i=x.i.bc,s=this.vc(this.Zn.Oc[0],this.Zn.Lc[0],t,i,0,0,0,0,0,0,!0);x.i.Tc=-1,s&&(this.fs=this.Wa,this.us=this.Ya,this.ls=1,this.cs=0)}1===this.Ha&&this.Ws&&(this.Ws=null,this.hs=!0,this.Ha=0),await this.Sc(),this.kc(),this.Rc(),this.Mc(),1!==this.mc&&1!==this.Ha||this.os++,2===this.ee&&this.xc(),2===this.ee&&this.ae&&this.Nc();for(let t=0;t<5;t++)this.pe[t]++;if(await this.Pc(),this.sc++,this.sc>4500&&(this.ht=250,this.sc-=500,this.J.oc(b.i.Dc)),this.ce++,this.ce>500){this.ce=0;const t=8*Math.random()|0;1==(1&t)&&(this.fe+=this.we),2==(2&t)&&(this.ue+=this.ye),4==(4&t)&&(this.de+=this.me)}if(this.fe<-50&&(this.we=2),this.fe>50&&(this.we=-2),this.ue<-55&&(this.ye=2),this.ue>55&&(this.ye=-2),this.de<-40&&(this.me=1),this.de>40&&(this.me=-1),this.Le++,this.Le>500){this.Le=0;const t=8*Math.random()|0;1==(1&t)&&(this.Se+=this.Me),2==(2&t)&&(this.ke+=this.Re)}this.Se<-60&&(this.Me=2),this.Se>60&&(this.Me=-2),this.ke<-20&&(this.Re=1),this.ke>10&&(this.Re=-1),K.t.T++,K.t.T>110&&(K.t.T=0,this.J.oc(b.i.Fc),this.J.p4(0)),this.qn++,this.qn>50&&this.J.oc(b.i.Uc);try{this.stream&&this.J.$a>0&&(this.stream.write(this.J.data,this.J.$a),this.J.$a=0,this.qn=0)}catch(t){console.log(t),await this.ac()}}}};va=()=>{if(null===this._n)return;this.ut&&(this.ut=!1,this.ei?.draw(0,11),this.ni?.draw(0,375),this.ri?.draw(729,5),this.oi?.draw(752,231),this.li?.draw(0,0),this.ai?.draw(561,0),this.ci?.draw(520,11),this.fi?.draw(520,231),this.ui?.draw(501,375),this.di?.draw(0,345),this.ss=!0,this.hs=!0,this.es=!0,this.ns=!0,2!==this.ee&&(this.Qt?.draw(8,11),this.Jt?.draw(561,5))),2===this.ee&&this.Bc(),this.ws&&1===this.ys&&(this.ss=!0);let t=!1;if(-1!==this.Es&&(t=this.Io(this.Es,this.ne),t&&(this.ss=!0)),2===this.Lh&&(this.ss=!0),2===this.ph&&(this.ss=!0),this.ss&&(this.Gc(),this.ss=!1),-1===this.Ts){this.bs.Fo=this.vs-this.Os-77,this.Xo>453&&this.Xo<565&&this.zo>350&&this.Hc(this.Xo-22,this.zo-375,this.vs,77,!1,463,0,this.bs);let t=this.vs-this.bs.Fo-77;t<0&&(t=0),t>this.vs-77&&(t=this.vs-77),this.Os!==t&&(this.Os=t,this.hs=!0)}-1!==this.Ts&&(t=this.Io(this.Ts,this.ne),t&&(this.hs=!0)),3===this.Lh&&(this.hs=!0),3===this.ph&&(this.hs=!0),this.Ws&&(this.hs=!0),this.ws&&2===this.ys&&(this.hs=!0),this.hs&&(this.Wc(),this.hs=!1),2===this.ee&&(this.Yc(),this.Jt?.draw(561,5)),-1!==this.Ys&&(this.es=!0),this.es&&(-1!==this.Ys&&this.Ys===this.Zs&&(this.Ys=-1,this.J.oc(b.i.Zc),this.J.p1(this.Zs)),this.es=!1,this.hi?.bind(),this.vi?.draw(0,0),-1===this.Es&&(-1!==this.Vs[this.Zs]&&(0===this.Zs?this.Wi?.draw(29,30):1===this.Zs?this.Yi?.draw(59,29):2===this.Zs?this.Yi?.draw(87,29):3===this.Zs?this.Zi?.draw(115,29):4===this.Zs?this.Xi?.draw(156,29):5===this.Zs?this.Xi?.draw(184,29):6===this.Zs&&this.Vi?.draw(212,30)),-1!==this.Vs[0]&&(0!==this.Ys||this.q%20<10)&&this.Oi[0]?.draw(35,34),-1!==this.Vs[1]&&(1!==this.Ys||this.q%20<10)&&this.Oi[1]?.draw(59,32),-1!==this.Vs[2]&&(2!==this.Ys||this.q%20<10)&&this.Oi[2]?.draw(86,32),-1!==this.Vs[3]&&(3!==this.Ys||this.q%20<10)&&this.Oi[3]?.draw(121,33),-1!==this.Vs[4]&&(4!==this.Ys||this.q%20<10)&&this.Oi[4]?.draw(157,34),-1!==this.Vs[5]&&(5!==this.Ys||this.q%20<10)&&this.Oi[5]?.draw(185,32),-1!==this.Vs[6]&&(6!==this.Ys||this.q%20<10)&&this.Oi[6]?.draw(212,34)),this.hi?.draw(520,165),this.si?.bind(),this.bi?.draw(0,0),-1===this.Es&&(-1!==this.Vs[this.Zs]&&(7===this.Zs?this.zi?.draw(49,0):8===this.Zs?this.ji?.draw(81,0):9===this.Zs?this.ji?.draw(108,0):10===this.Zs?this.qi?.draw(136,1):11===this.Zs?this.Ki?.draw(178,0):12===this.Zs?this.Ki?.draw(205,0):13===this.Zs&&this.$i?.draw(233,0)),-1!==this.Vs[8]&&(8!==this.Ys||this.q%20<10)&&this.Oi[7]?.draw(80,2),-1!==this.Vs[9]&&(9!==this.Ys||this.q%20<10)&&this.Oi[8]?.draw(107,3),-1!==this.Vs[10]&&(10!==this.Ys||this.q%20<10)&&this.Oi[9]?.draw(142,4),-1!==this.Vs[11]&&(11!==this.Ys||this.q%20<10)&&this.Oi[10]?.draw(179,2),-1!==this.Vs[12]&&(12!==this.Ys||this.q%20<10)&&this.Oi[11]?.draw(206,2),-1!==this.Vs[13]&&(13!==this.Ys||this.q%20<10)&&this.Oi[12]?.draw(230,2)),this.si?.draw(501,492),this.Qt?.bind()),this.ns&&(this.ns=!1,this.ii?.bind(),this.Ti?.draw(0,0),this.Rt?.fl(57,33,'Public chat',A.i.xo,!0),0===this.Xs&&this.Rt?.fl(57,46,'On',A.i.GREEN,!0),1===this.Xs&&this.Rt?.fl(57,46,'Friends',A.i.Qo,!0),2===this.Xs&&this.Rt?.fl(57,46,'Off',A.i.RED,!0),3===this.Xs&&this.Rt?.fl(57,46,'Hide',A.i.Ba,!0),this.Rt?.fl(186,33,'Private chat',A.i.xo,!0),0===this.zs&&this.Rt?.fl(186,46,'On',A.i.GREEN,!0),1===this.zs&&this.Rt?.fl(186,46,'Friends',A.i.Qo,!0),2===this.zs&&this.Rt?.fl(186,46,'Off',A.i.RED,!0),this.Rt?.fl(326,33,'Trade/duel',A.i.xo,!0),0===this.js&&this.Rt?.fl(326,46,'On',A.i.GREEN,!0),1===this.js&&this.Rt?.fl(326,46,'Friends',A.i.Qo,!0),2===this.js&&this.Rt?.fl(326,46,'Off',A.i.RED,!0),this.Rt?.fl(462,38,'Report abuse',A.i.xo,!0),this.ii?.draw(0,471),this.Qt?.bind()),this.ne=0};Bc=()=>{if(this.re++,this.Vc(),this.Xc(),this.zc(),this.jc(),this.qc(),!this.ae){let t=this.$e;(this.Oe/256|0)>t&&(t=this.Oe/256|0),this.Ae[4]&&this.ge[4]+128>t&&(t=this.ge[4]+128);const i=this.Ke+this.de&2047;if(this.Zn&&this.$c(this.tn,this.Kc(this.je,this.Zn.x,this.Zn.z)-50,this.sn,i,t,3*t+600),K.t.k++,K.t.k>1802){K.t.k=0,this.J.oc(b.i.Jc),this.J.p1(0);const t=this.J.$a;this.J.p2(29711),this.J.p1(70),this.J.p1(256*Math.random()|0),this.J.p1(242),this.J.p1(186),this.J.p1(39),this.J.p1(61),0==(2*Math.random()|0)&&this.J.p1(13),0==(2*Math.random()|0)&&this.J.p2(57856),this.J.p2(65536*Math.random()|0),this.J.Qc(this.J.$a-t)}}let t;t=this.ae?this.tf():this.if();const i=this.Ce,s=this.Ee,h=this.Te,e=this.be,n=this.ve;let r;for(let t=0;t<5;t++)this.Ae[t]&&(r=Math.random()*(2*this.Ie[t]+1)-this.Ie[t]+Math.sin(this.pe[t]*(this._e[t]/100))*this.ge[t]|0,0===t&&(this.Ce+=r),1===t&&(this.Ee+=r),2===t&&(this.Te+=r),3===t&&(this.ve=this.ve+r&2047),4===t&&(this.be+=r,this.be<128&&(this.be=128),this.be>383&&(this.be=383)));r=d.i.sf,p.i.hf=!0,p.i.ef=0,p.i.Xo=this.Xo-8,p.i.zo=this.zo-11,u.i.clear(),this.he?.draw(this.Ce,this.Ee,this.Te,t,this.ve,this.be,this.q),this.he?.nf(),this.rf(),this.lf(),K.t.A&&this.af(),this.cf(r),this.ff(),this.Qt?.draw(8,11),this.Ce=i,this.Ee=s,this.Te=h,this.be=e,this.ve=n};uf=()=>{e.i.df?.clear(),e.i.wf?.clear(),r.i.Hr?.clear(),n.i.Hr?.clear(),n.i.yf?.clear(),W.i.Hr?.clear(),l.i.Hr?.clear()};mf=(t,i)=>{this.pf(t.x,i,t.z)};pf=(t,i,s)=>{if(t<128||s<128||t>13056||s>13056)return this.an=-1,void(this.cn=-1);const h=this.Kc(this.je,t,s)-i;this.Af(t,h,s)};Af=(t,i,s)=>{let h=t-this.Ce,e=i-this.Ee,n=s-this.Te;const r=d.i.sin[this.be],o=d.i.cos[this.be],l=d.i.sin[this.ve],a=d.i.cos[this.ve];let c=n*l+h*a>>16;n=n*a-h*l>>16,h=c,c=e*o-n*r>>16,n=e*r+n*o>>16,e=c,n>=50?(this.an=d.i.Al+((h<<9)/n|0),this.cn=d.i.Il+((e<<9)/n|0)):(this.an=-1,this.cn=-1)};rf=()=>{this.er=0;for(let t=-1;t<this.Cn+this.kn;t++){let i=null;if(i=-1===t?this.Zn:t<this.Cn?this._n[this.En[t]]:this.Sn[this.Rn[t-this.Cn]],i&&i.isVisible()){if(t<this.Cn){let s=30;const h=i;if(0!==h.If&&(this.mf(i,i.height+15),this.an>-1))for(let t=0;t<8;t++)0!=(h.If&1<<t)&&this.xi[t]&&(this.xi[t].draw(this.an-12,this.cn-s),s-=25);t>=0&&10===this.ks&&this.Ns===this.En[t]&&(this.mf(i,i.height+15),this.an>-1&&this.xi[7]&&this.xi[7].draw(this.an-12,this.cn-s))}else 1===this.ks&&this.Rs===this.Rn[t-this.Cn]&&this.q%20<10&&(this.mf(i,i.height+15),this.an>-1&&this.xi[2]&&this.xi[2].draw(this.an-12,this.cn-28));if(i.gf&&(t>=this.Cn||0===this.Xs||3===this.Xs||1===this.Xs&&this._f(i.name))&&(this.mf(i,i.height),this.an>-1&&this.er<K.t.nr&&this.Mt&&(this.cr[this.er]=this.Mt.Cf(i.gf)/2|0,this.ar[this.er]=this.Mt.height,this.rr[this.er]=this.an,this.lr[this.er]=this.cn,this.ur[this.er]=i.Ef,this.dr[this.er]=i.Tf,this.wr[this.er]=i.bf,this.yr[this.er++]=i.gf,0===this.ah&&1===i.Tf&&(this.ar[this.er]+=10,this.lr[this.er]+=5),0===this.ah&&2===i.Tf&&(this.cr[this.er]=60))),i.vf>this.q+100&&(this.mf(i,i.height+15),this.an>-1)){let t=30*i.Of/i.Lf|0;t>30&&(t=30),u.i.fillRect(this.an-15,this.cn-3,t,5,A.i.GREEN),u.i.fillRect(this.an-15+t,this.cn-3,30-t,5,A.i.RED)}i.vf>this.q+330&&(this.mf(i,i.height/2|0),this.an>-1&&this.Mi[i.Sf]&&(this.Mi[i.Sf].draw(this.an-12,this.cn-12),this.kt?.Sa(this.an,this.cn+4,i.kf.toString(),A.i.Jo),this.kt?.Sa(this.an-1,this.cn+3,i.kf.toString(),A.i.xo)))}}for(let t=0;t<this.er;t++){const i=this.rr[t];let s=this.lr[t];const h=this.cr[t],e=this.ar[t];let n=!0;for(;n;){n=!1;for(let r=0;r<t;r++)s+2>this.lr[r]-this.ar[r]&&s-e<this.lr[r]+2&&i-h<this.rr[r]+this.cr[r]&&i+h>this.rr[r]-this.cr[r]&&this.lr[r]-this.ar[r]<s&&(s=this.lr[r]-this.ar[r],n=!0)}this.an=this.rr[t],this.cn=this.lr[t]=s;const r=this.yr[t];if(0==this.ah){let i=A.i.Qo;if(this.ur[t]<6&&(i=A.i.Rf[this.ur[t]]),6==this.ur[t]&&(i=this.re%20<10?A.i.RED:A.i.Qo),7==this.ur[t]&&(i=this.re%20<10?A.i.BLUE:A.i.Ba),8==this.ur[t]&&(i=this.re%20<10?45056:8454016),9==this.ur[t]){const s=150-this.wr[t];s<50?i=1280*s+A.i.RED:s<100?i=A.i.Qo-327680*(s-50):s<150&&(i=5*(s-100)+A.i.GREEN)}if(10==this.ur[t]){const s=150-this.wr[t];s<50?i=5*s+A.i.RED:s<100?i=A.i.Ga-327680*(s-50):s<150&&(i=327680*(s-100)+A.i.BLUE-5*(s-100))}if(11==this.ur[t]){const s=150-this.wr[t];s<50?i=A.i.xo-327685*s:s<100?i=327685*(s-50)+A.i.GREEN:s<150&&(i=A.i.xo-327680*(s-100))}if(0==this.dr[t]&&(this.Mt?.Sa(this.an,this.cn+1,r,A.i.Jo),this.Mt?.Sa(this.an,this.cn,r,i)),1==this.dr[t]&&(this.Mt?.Mf(this.an,this.cn+1,r,A.i.Jo,this.re),this.Mt?.Mf(this.an,this.cn,r,i,this.re)),2==this.dr[t]){const s=this.Mt?.Cf(r)??0,h=(150-this.wr[t])*(s+100)/150;u.i.So(334,this.an+50,0,this.an-50),this.Mt?.$o(this.an+50-h,this.cn+1,r,A.i.Jo),this.Mt?.$o(this.an+50-h,this.cn,r,i),u.i.xf()}}else this.Mt?.Sa(this.an,this.cn+1,r,A.i.Jo),this.Mt?.Sa(this.an,this.cn,r,A.i.Qo)}};lf=()=>{2===this.ks&&this.xi[2]&&(this.pf((this.Ps-this.Ue<<7)+this.Ms,2*this.Fs,(this.Ds-this.Be<<7)+this.xs),this.an>-1&&this.q%20<10&&this.xi[2].draw(this.an-12,this.cn-28))};af=()=>{const t=507;let i=20;this.kt?.Nf(t,i,`FPS: ${this.Pf}`,A.i.Qo,!0),i+=13,this.kt?.Nf(t,i,`Speed: ${this.ms.toFixed(4)} ms`,A.i.Qo,!0),i+=13,this.kt?.Nf(t,i,`Average: ${this.Df.toFixed(4)} ms`,A.i.Qo,!0),i+=13,this.kt?.Nf(t,i,`Slowest: ${this.Ff.toFixed(4)} ms`,A.i.Qo,!0),i+=13,this.kt?.Nf(t,i,`Occluders: ${x.i.Uf}`,A.i.Qo,!0)};ff=()=>{if(this.Bf(),1===this.ls&&this.Pi[this.cs/100|0]?.draw(this.fs-8-8,this.us-8-11),2===this.ls&&this.Pi[4+(this.cs/100|0)]?.draw(this.fs-8-8,this.us-8-11),-1!==this.rs&&(this.Io(this.rs,this.ne),this.Lo(c.i.Gr[this.rs],0,0,0)),this.Gf(),this.ws?0===this.ys&&this.Hf():(this.Ac(),this.Wf()),1===this.Xn&&(this.$n>0||1===this.Kn?this.xi[1]?.draw(472,258):this.xi[1]?.draw(472,296)),this.$n>0&&(this.xi[0]?.draw(472,296),this.Rt?.Sa(484,329,'Level: '+this.$n,A.i.Qo)),1===this.Kn&&(this.xi[6]?.draw(472,296),this.Rt?.Sa(484,329,'Arena',A.i.Qo)),0!==this.et){let t=this.et/50|0;const i=t/60|0;t%=60,t<10?this.Rt?.$o(4,329,'System update in: '+i+':0'+t,A.i.Qo):this.Rt?.$o(4,329,'System update in: '+i+':'+t,A.i.Qo)}};Bf=()=>{if(0===this.lh)return;const t=this.Rt;let i=0;0!==this.et&&(i=1);for(let s=0;s<100;s++){if(!this.eh[s])continue;const h=this.messageType[s];let e;if((3===h||7===h)&&(7===h||0===this.zs||1===this.zs&&this._f(this.nh[s]))&&(e=329-13*i,t?.$o(4,e,'From '+this.nh[s]+': '+this.eh[s],A.i.Jo),t?.$o(4,e-1,'From '+this.nh[s]+': '+this.eh[s],A.i.Ba),i++,i>=5))return;if(5===h&&this.zs<2&&(e=329-13*i,t?.$o(4,e,this.eh[s],A.i.Jo),t?.$o(4,e-1,this.eh[s],A.i.Ba),i++,i>=5))return;if(6===h&&this.zs<2&&(e=329-13*i,t?.$o(4,e,'To '+this.nh[s]+': '+this.eh[s],A.i.Jo),t?.$o(4,e-1,'To '+this.nh[s]+': '+this.eh[s],A.i.Ba),i++,i>=5))return}};Gf=()=>{if(!this.Zn)return;const t=(this.Zn.x>>7)+this.Ue,i=(this.Zn.z>>7)+this.Be;if(this.$n=t>=2944&&t<3392&&i>=3520&&i<6400?1+((i-3520)/8|0):t>=2944&&t<3392&&i>=9920&&i<12800?1+((i-9920)/8|0):0,this.Kn=0,t>=3328&&t<3392&&i>=3200&&i<3264){const s=63&t,h=63&i;(s>=4&&s<=29&&h>=44&&h<=58||s>=36&&s<=61&&h>=44&&h<=58||s>=4&&s<=29&&h>=25&&h<=39||s>=36&&s<=61&&h>=25&&h<=39||s>=4&&s<=29&&h>=6&&h<=20||s>=36&&s<=61&&h>=6&&h<=20)&&(this.Kn=1)}0===this.Kn&&t>=3328&&t<=3393&&i>=3203&&i<=3325&&(this.Kn=2),this.ds=0,(t>=3053&&t<=3156&&i>=3056&&i<=3136||t>=3072&&t<=3118&&i>=9492&&i<=9535)&&(this.ds=1),1===this.ds&&t>=3139&&t<=3199&&i>=3008&&i<=3062&&(this.ds=0)};Gc=()=>{this.Kt?.bind(),this.yi&&(d.i._a=this.yi),this._i?.draw(0,0),-1!==this.Es?this.Lo(c.i.Gr[this.Es],0,0,0):-1!==this.Vs[this.Zs]&&this.Lo(c.i.Gr[this.Vs[this.Zs]],0,0,0),this.ws&&1===this.ys&&this.Hf(),this.Kt?.draw(562,231),this.Qt?.bind(),this.mi&&(d.i._a=this.mi)};Wc=()=>{if(this.ti?.bind(),this.wi&&(d.i._a=this.wi),this.Ci?.draw(0,0),this.Ks)this.Mt?.Sa(239,40,this.Js,A.i.Jo),this.Mt?.Sa(239,60,this.Qs+'*',A.i.Yf);else if(this.sh)this.Mt?.Sa(239,40,'Enter amount:',A.i.Jo),this.Mt?.Sa(239,60,this.ih+'*',A.i.Yf);else if(this.Ws)this.Mt?.Sa(239,40,this.Ws,A.i.Jo),this.Mt?.Sa(239,60,'Click to continue',A.i.Yf);else if(-1!==this.Ts)this.Lo(c.i.Gr[this.Ts],0,0,0);else if(-1===this.hh){const t=this.Rt;let i=0;u.i.So(0,0,463,77);for(let s=0;s<100;s++){const h=this.eh[s];if(!h)continue;const e=this.messageType[s],n=this.Os+70-14*i;0===e&&(n>0&&n<110&&t?.$o(4,n,h,A.i.Jo),i++),1===e&&(n>0&&n<110&&(t?.$o(4,n,this.nh[s]+':',A.i.xo),t?.$o(t.Cf(this.nh[s])+12,n,h,A.i.BLUE)),i++),2===e&&(0===this.Xs||1===this.Xs&&this._f(this.nh[s]))&&(n>0&&n<110&&(t?.$o(4,n,this.nh[s]+':',A.i.Jo),t?.$o(t.Cf(this.nh[s])+12,n,h,A.i.BLUE)),i++),3!==e&&7!==e||0!==this.lh||!(7===e||0===this.zs||1===this.zs&&this._f(this.nh[s]))||(n>0&&n<110&&(t?.$o(4,n,'From '+this.nh[s]+':',A.i.Jo),t?.$o(t.Cf('From '+this.nh[s])+12,n,h,A.i.Zf)),i++),4===e&&(0===this.js||1===this.js&&this._f(this.nh[s]))&&(n>0&&n<110&&t?.$o(4,n,this.nh[s]+' '+this.eh[s],A.i.Vf),i++),5===e&&0===this.lh&&this.zs<2&&(n>0&&n<110&&t?.$o(4,n,h,A.i.Zf),i++),6===e&&0===this.lh&&this.zs<2&&(n>0&&n<110&&(t?.$o(4,n,'To '+this.nh[s]+':',A.i.Jo),t?.$o(t.Cf('To '+this.nh[s])+12,n,h,A.i.Zf)),i++),8===e&&(0===this.js||1===this.js&&this._f(this.nh[s]))&&(n>0&&n<110&&t?.$o(4,n,this.nh[s]+' '+this.eh[s],A.i.Xf),i++)}u.i.xf(),this.vs=14*i+7,this.vs<78&&(this.vs=78),this.uo(463,0,this.vs-this.Os-77,this.vs,77),t?.$o(4,90,R.i.Pl(this.username)+':',A.i.Jo),t?.$o(t.Cf(this.username+': ')+6,90,this.fh+'*',A.i.BLUE),u.i.po(0,77,A.i.Jo,479)}else this.Lo(c.i.Gr[this.hh],0,0,0);this.ws&&2===this.ys&&this.Hf(),this.ti?.draw(22,375),this.Qt?.bind(),this.mi&&(d.i._a=this.mi)};Yc=()=>{if(this.Jt?.bind(),!this.Zn)return;const t=this.Ke+this.Se&2047;let i=48+(this.Zn.x/32|0),s=464-(this.Zn.z/32|0);this.Li?.zf(21,9,146,151,this.Ii,this.gi,i,s,t,this.ke+256),this.Si?.zf(0,0,33,33,this.pi,this.Ai,25,25,this.Ke,256);for(let t=0;t<this.te;t++)i=4*this.ie[t]+2-(this.Zn.x/32|0),s=4*this.se[t]+2-(this.Zn.z/32|0),this.jf(s,this.ts[t],i);for(let t=0;t<G.i.ln;t++)for(let h=0;h<G.i.ln;h++){this.Dn[this.je][t][h]&&(i=4*t+2-(this.Zn.x/32|0),s=4*h+2-(this.Zn.z/32|0),this.jf(s,this.Di,i))}for(let t=0;t<this.kn;t++){const h=this.Sn[this.Rn[t]];h&&h.isVisible()&&h.type&&h.type.qf&&(i=(h.x/32|0)-(this.Zn.x/32|0),s=(h.z/32|0)-(this.Zn.z/32|0),this.jf(s,this.Fi,i))}for(let t=0;t<this.Cn;t++){const h=this._n[this.En[t]];if(h&&h.isVisible()&&h.name){i=(h.x/32|0)-(this.Zn.x/32|0),s=(h.z/32|0)-(this.Zn.z/32|0);let t=!1;const e=R.i.$f(h.name);for(let i=0;i<this.hr;i++)if(e===this.pr[i]&&0!==this.Ar[i]){t=!0;break}t?this.jf(s,this.Bi,i):this.jf(s,this.Ui,i)}}0!==this.oe&&(i=4*this.oe+2-(this.Zn.x/32|0),s=4*this.le+2-(this.Zn.z/32|0),this.jf(s,this.Ni,i)),u.i.fillRect(93,82,3,3,A.i.xo),this.Qt?.bind()};jf=(t,i,s)=>{if(!i)return;const h=this.Ke+this.Se&2047,e=s*s+t*t;if(e>6400)return;let n=d.i.sin[h],r=d.i.cos[h];n=256*n/(this.ke+256)|0,r=256*r/(this.ke+256)|0;const o=t*n+s*r>>16,l=t*r-s*n>>16;e>2500&&this.Ei?i.Kf(o+94-(i.qo/2|0),83-l-(i.Jf/2|0),this.Ei):i.draw(o+94-(i.qo/2|0),83-l-(i.Jf/2|0))};Qf=t=>{if(!this.Li)return;const i=this.Li.Ia,s=i.length;for(let t=0;t<s;t++)i[t]=0;for(let s=1;s<G.i.ln-1;s++){let h=512*(G.i.ln-1-s)*4+24628;for(let e=1;e<G.i.ln-1;e++)this.en&&0==(24&this.en[t][e][s])&&this.he?.tu(t,e,s,i,h,512),t<3&&this.en&&0!=(8&this.en[t+1][e][s])&&this.he?.tu(t+1,e,s,i,h,512),h+=4}const h=(238+(20*Math.random()|0)-10<<16)+(238+(20*Math.random()|0)-10<<8)+(20*Math.random()|0)+238-10,n=238+(20*Math.random()|0)-10<<16;this.Li.bind();for(let i=1;i<G.i.ln-1;i++)for(let s=1;s<G.i.ln-1;s++)this.en&&0==(24&this.en[t][s][i])&&this.iu(s,i,t,h,n),t<3&&this.en&&0!=(8&this.en[t+1][s][i])&&this.iu(s,i,t+1,h,n);this.Qt?.bind(),this.te=0;for(let t=0;t<G.i.ln;t++)for(let i=0;i<G.i.ln;i++){let s=this.he?.su(this.je,t,i)??0;if(0===s)continue;s=s>>14&32767;const h=e.i.get(s).hu;if(h<0)continue;let n=t,r=i;if(22!==h&&29!==h&&34!==h&&36!==h&&46!==h&&47!==h&&48!==h){const s=G.i.ln,h=G.i.ln,e=this.Xe[this.je];if(e){const o=e.flags;for(let e=0;e<10;e++){const e=4*Math.random()|0;0===e&&n>0&&n>t-3&&(o[G.i.index(n-1,r)]&H.i.eu)===H.i.OPEN&&n--,1===e&&n<s-1&&n<t+3&&(o[G.i.index(n+1,r)]&H.i.nu)===H.i.OPEN&&n++,2===e&&r>0&&r>i-3&&(o[G.i.index(n,r-1)]&H.i.ru)===H.i.OPEN&&r--,3===e&&r<h-1&&r<i+3&&(o[G.i.index(n,r+1)]&H.i.ou)===H.i.OPEN&&r++}}}this.ts[this.te]=this.Ri[h],this.ie[this.te]=n,this.se[this.te]=r,this.te++}};iu=(t,i,s,h,n)=>{if(!this.he||!this.Li)return;let r=this.he.lu(s,t,i);if(0!==r){const o=this.he.au(s,t,i,r),l=o>>6&3,a=31&o;let c=h;r>0&&(c=n);const f=this.Li.Ia,u=4*t+512*(103-i)*4+24624,d=r>>14&32767,w=e.i.get(d);if(-1===w.cu)a!==D.i.fu.id&&a!==D.i.uu.id||(l===F.i.du?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.i.wu?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.i.yu?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.i.mu&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c)),a===D.i.pu.id&&(l===F.i.du?f[u]=c:l===F.i.wu?f[u+3]=c:l===F.i.yu?f[u+3+1536]=c:l===F.i.mu&&(f[u+1536]=c)),a===D.i.uu.id&&(l===F.i.mu?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.i.du?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.i.wu?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.i.yu&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c));else{const s=this.ki[w.cu];if(s){const h=(4*w.width-s.width)/2|0,e=(4*w.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.i.ln-i-w.length)+e+48)}}}if(r=this.he.Au(s,t,i),0!==r){const h=this.he.au(s,t,i,r),n=h>>6&3,o=31&h,l=r>>14&32767,a=e.i.get(l);if(-1!==a.cu){const s=this.ki[a.cu];if(s){const h=(4*a.width-s.width)/2|0,e=(4*a.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.i.ln-i-a.length)+e+48)}}else if(o===D.i.Iu.id){let s=15658734;r>0&&(s=15597568);const h=this.Li.Ia,e=4*t+512*(G.i.ln-1-i)*4+24624;n===F.i.du||n===F.i.yu?(h[e+1536]=s,h[e+1024+1]=s,h[e+512+2]=s,h[e+3]=s):(h[e]=s,h[e+512+1]=s,h[e+1024+2]=s,h[e+1536+3]=s)}}if(r=this.he.su(s,t,i),0!==r){const s=e.i.get(r>>14&32767);if(-1!==s.cu){const h=this.ki[s.cu];if(h){const e=(4*s.width-h.width)/2|0,n=(4*s.length-h.height)/2|0;h.draw(4*t+48+e,4*(G.i.ln-i-s.length)+n+48)}}}};Wf=()=>{if(this._s<2&&0===this.Ch&&0===this.Ph)return;let t;t=1===this.Ch&&this._s<2?'Use '+this.Oh+' with...':1===this.Ph&&this._s<2?this.Uh+'...':this.Cs[this._s-1],this._s>2&&(t=t+'@whi@ / '+(this._s-2)+' more options'),this.Mt?.gu(4,15,t,A.i.xo,!0,this.q/1e3|0)};Hf=()=>{const t=this.ps,i=this.As,s=this.Is,h=this.gs,e=A.i._u;u.i.fillRect(t,i,s,h,e),u.i.fillRect(t+1,i+1,s-2,16,A.i.Jo),u.i.Mo(t+1,i+18,s-2,h-19,A.i.Jo),this.Mt?.$o(t+3,i+14,'Choose Option',e);let n=this.Xo,r=this.zo;0===this.ys&&(n-=8,r-=11),1===this.ys&&(n-=562,r-=231),2===this.ys&&(n-=22,r-=375);for(let h=0;h<this._s;h++){const e=i+15*(this._s-1-h)+31;let o=A.i.xo;n>t&&n<t+s&&r>e-13&&r<e+3&&(o=A.i.Qo),this.Mt?.dl(t+3,e,this.Cs[h],o,!0)}};Sc=async()=>{if(0!==this.ph)return;let t=this.Ha;if(1===this.Ph&&this.Wa>=520&&this.Ya>=165&&this.Wa<=788&&this.Ya<=230&&(t=0),this.ws){if(1!==t){let t=this.Xo,i=this.zo;0===this.ys?(t-=8,i-=11):1===this.ys?(t-=562,i-=231):2===this.ys&&(t-=22,i-=375),(t<this.ps-10||t>this.ps+this.Is+10||i<this.As-10||i>this.As+this.gs+10)&&(this.ws=!1,1===this.ys&&(this.ss=!0),2===this.ys&&(this.hs=!0))}if(1===t){const t=this.ps,i=this.As,s=this.Is;let h=this.Wa,e=this.Ya;0===this.ys?(h-=8,e-=11):1===this.ys?(h-=562,e-=231):2===this.ys&&(h-=22,e-=375);let n=-1;for(let r=0;r<this._s;r++){const o=i+15*(this._s-1-r)+31;h>t&&h<t+s&&e>o-13&&e<o+3&&(n=r)}-1!==n&&await this.Cc(n),this.ws=!1,1===this.ys?this.ss=!0:2===this.ys&&(this.hs=!0)}}else{if(1===t&&this._s>0){const t=this.Gh[this._s-1];if(602===t||596===t||22===t||892===t||415===t||405===t||38===t||422===t||478===t||347===t||188===t){const t=this.Wh[this._s-1],i=this.Yh[this._s-1];if(c.i.Gr[i].draggable)return this._h=!1,this.gh=0,this.yh=i,this.mh=t,this.ph=2,this.Ah=this.Wa,this.Ih=this.Ya,c.i.Gr[i].Cu===this.rs&&(this.ph=1),void(c.i.Gr[i].Cu===this.Ts&&(this.ph=3))}}if(1===t&&(1===this.Bh||this.gc(this._s-1))&&this._s>2&&(t=2),1===t&&this._s>0&&await this.Cc(this._s-1),2!==t||this._s<=0)return;this._c()}};kc=()=>{if(1===this.Ha&&this.Zn){let t=this.Wa-21-561,i=this.Ya-9-5;if(t>=0&&i>=0&&t<146&&i<151){t-=73,i-=75;const s=this.Ke+this.Se&2047;let h=d.i.sin[s],e=d.i.cos[s];h=h*(this.ke+256)>>8,e=e*(this.ke+256)>>8;const n=i*h+t*e>>11,r=i*e-t*h>>11,o=this.Zn.x+n>>7,l=this.Zn.z-r>>7;this.vc(this.Zn.Oc[0],this.Zn.Lc[0],o,l,1,0,0,0,0,0,!0)&&(this.J.p1(t),this.J.p1(i),this.J.p2(this.Ke),this.J.p1(57),this.J.p1(this.Se),this.J.p1(this.ke),this.J.p1(89),this.J.p2(this.Zn.x),this.J.p2(this.Zn.z),this.J.p1(this.Yn),this.J.p1(63))}}};gc=t=>{if(t<0)return!1;let i=this.Gh[t];return i>=2e3&&(i-=2e3),406===i};Cc=async t=>{if(t<0)return;this.sh&&(this.sh=!1,this.hs=!0);let i=this.Gh[t];const s=this.Hh[t],h=this.Wh[t],r=this.Yh[t];if(i>=2e3&&(i-=2e3),903===i||363===i){let s=this.Cs[t];const h=s.indexOf('@whi@');if(-1!==h){s=s.substring(h+5).trim();const t=R.i.Pl(R.i.Dl(R.i.$f(s)));let e=!1;for(let s=0;s<this.Cn;s++){const h=this._n[this.En[s]];if(h&&h.name&&h.name.toLowerCase()===t.toLowerCase()&&this.Zn){this.vc(this.Zn.Oc[0],this.Zn.Lc[0],h.Oc[0],h.Lc[0],2,1,1,0,0,0,!1),903===i?this.J.oc(b.i.Eu):363===i&&this.J.oc(b.i.Tu),this.J.p2(this.En[s]),e=!0;break}}e||this.bu(0,'Unable to find '+t,'')}}else if(450===i&&this.vu(b.i.Ou,h,r,s))this.J.p2(this.bh),this.J.p2(this.Eh),this.J.p2(this.Th);else if(405===i||38===i||422===i||478===i||347===i)478===i?(0==(3&h)&&K.t.O++,K.t.O>=90&&this.J.oc(b.i.Lu),this.J.oc(b.i.Su)):347===i?this.J.oc(b.i.ku):422===i?this.J.oc(b.i.Ru):405===i?(K.t.R+=s,K.t.R>=97&&(this.J.oc(b.i.Mu),this.J.p3(14953816)),this.J.oc(b.i.xu)):38===i&&this.J.oc(b.i.Nu),this.J.p2(s),this.J.p2(h),this.J.p2(r),this.Rh=0,this.kh=r,this.Sh=h,this.Lh=2,c.i.Gr[r].Cu===this.rs&&(this.Lh=1),c.i.Gr[r].Cu===this.Ts&&(this.Lh=3);else if(728===i||542===i||6===i||963===i||245===i){const t=this.Sn[s];t&&this.Zn&&(this.vc(this.Zn.Oc[0],this.Zn.Lc[0],t.Oc[0],t.Lc[0],2,1,1,0,0,0,!1),this.fs=this.Wa,this.us=this.Ya,this.ls=2,this.cs=0,542===i?this.J.oc(b.i.Pu):6===i?(0==(3&s)&&K.t.N++,K.t.N>=124&&(this.J.oc(b.i.Du),this.J.p4(0)),this.J.oc(b.i.Fu)):963===i?this.J.oc(b.i.Uu):728===i?this.J.oc(b.i.Bu):245===i&&(0==(3&s)&&K.t.S++,K.t.S>=85&&(this.J.oc(b.i.Gu),this.J.p2(39596)),this.J.oc(b.i.Hu)),this.J.p2(s))}else if(217===i){if(this.Zn){this.vc(this.Zn.Oc[0],this.Zn.Lc[0],h,r,2,0,0,0,0,0,!1)||this.vc(this.Zn.Oc[0],this.Zn.Lc[0],h,r,2,1,1,0,0,0,!1),this.fs=this.Wa,this.us=this.Ya,this.ls=2,this.cs=0,this.J.oc(b.i.Wu),this.J.p2(h+this.Ue),this.J.p2(r+this.Be),this.J.p2(s),this.J.p2(this.bh),this.J.p2(this.Eh),this.J.p2(this.Th)}}else if(1175===i){const t=s>>14&32767,i=e.i.get(t);let h;h=i.Yu?i.Yu:"It's a "+i.name+'.',this.bu(0,h,'')}else if(285===i)this.vu(b.i.Zu,h,r,s);else if(881===i)this.J.oc(b.i.Vu),this.J.p2(s),this.J.p2(h),this.J.p2(r),this.J.p2(this.bh),this.J.p2(this.Eh),this.J.p2(this.Th),this.Rh=0,this.kh=r,this.Sh=h,this.Lh=2,c.i.Gr[r].Cu===this.rs&&(this.Lh=1),c.i.Gr[r].Cu===this.Ts&&(this.Lh=3);else if(391===i)this.J.oc(b.i.Xu),this.J.p2(s),this.J.p2(h),this.J.p2(r),this.J.p2(this.Dh),this.Rh=0,this.kh=r,this.Sh=h,this.Lh=2,c.i.Gr[r].Cu===this.rs&&(this.Lh=1),c.i.Gr[r].Cu===this.Ts&&(this.Lh=3);else if(660===i)this.ws?this.he?.click(h-8,r-11):this.he?.click(this.Wa-8,this.Ya-11);else{if(188===i)return this.Ch=1,this.Eh=h,this.Th=r,this.bh=s,this.Oh=n.i.get(s).name,void(this.Ph=0);if(44===i)this.Mh||(this.J.oc(b.i.zu),this.J.p2(r),this.Mh=!0);else if(1773===i){const t=n.i.get(s);let i;i=r>=1e5?r+' x '+t.name:t.Yu?t.Yu:"It's a "+t.name+'.',this.bu(0,i,'')}else if(900===i){const t=this.Sn[s];t&&this.Zn&&(this.vc(this.Zn.Oc[0],this.Zn.Lc[0],t.Oc[0],t.Lc[0],2,1,1,0,0,0,!1),this.fs=this.Wa,this.us=this.Ya,this.ls=2,this.cs=0,this.J.oc(b.i.ju),this.J.p2(s),this.J.p2(this.bh),this.J.p2(this.Eh),this.J.p2(this.Th))}else if(1373===i||1544===i||151===i||1101===i){const t=this._n[s];t&&this.Zn&&(this.vc(this.Zn.Oc[0],this.Zn.Lc[0],t.Oc[0],t.Lc[0],2,1,1,0,0,0,!1),this.fs=this.Wa,this.us=this.Ya,this.ls=2,this.cs=0,1101===i?this.J.oc(b.i.Tu):151===i?(K.t.D++,K.t.D>=90&&(this.J.oc(b.i.qu),this.J.p2(31114)),this.J.oc(b.i.$u)):1373===i?this.J.oc(b.i.Eu):1544===i&&this.J.oc(b.i.Ku),this.J.p2(s))}else if(265===i){const t=this.Sn[s];t&&this.Zn&&(this.vc(this.Zn.Oc[0],this.Zn.Lc[0],t.Oc[0],t.Lc[0],2,1,1,0,0,0,!1),this.fs=this.Wa,this.us=this.Ya,this.ls=2,this.cs=0,this.J.oc(b.i.Ju),this.J.p2(s),this.J.p2(this.Dh))}else if(679===i){const i=this.Cs[t],s=i.indexOf('@whi@');if(-1!==s){const t=R.i.$f(i.substring(s+5).trim());let h=-1;for(let i=0;i<this.hr;i++)if(this.pr[i]===t){h=i;break}-1!==h&&this.Ar[h]>0&&(this.hs=!0,this.sh=!1,this.Ks=!0,this.Qs='',this.th=3,this.Ir=this.pr[h],this.Js='Enter message to send to '+this.mr[h])}}else if(55===i)this.vu(b.i.Qu,h,r,s)&&this.J.p2(this.Dh);else if(224===i||993===i||99===i||746===i||877===i){if(this.Zn){this.vc(this.Zn.Oc[0],this.Zn.Lc[0],h,r,2,0,0,0,0,0,!1)||this.vc(this.Zn.Oc[0],this.Zn.Lc[0],h,r,2,1,1,0,0,0,!1),this.fs=this.Wa,this.us=this.Ya,this.ls=2,this.cs=0,224===i?this.J.oc(b.i.td):746===i?this.J.oc(b.i.sd):877===i?this.J.oc(b.i.hd):99===i?this.J.oc(b.i.ed):993===i&&this.J.oc(b.i.nd),this.J.p2(h+this.Ue),this.J.p2(r+this.Be),this.J.p2(s)}}else if(1607===i){const t=this.Sn[s];if(t&&t.type){let i;i=t.type.Yu?t.type.Yu:"It's a "+t.type.name+'.',this.bu(0,i,'')}}else if(504===i)this.vu(b.i.rd,h,r,s);else{if(930===i){const t=c.i.Gr[r];this.Ph=1,this.Dh=r,this.Fh=t.od,this.Ch=0;let i=t.ld;i&&-1!==i.indexOf(' ')&&(i=i.substring(0,i.indexOf(' ')));let s=t.ld;return s&&-1!==s.indexOf(' ')&&(s=s.substring(s.indexOf(' ')+1)),this.Uh=i+' '+t.action+' '+s,void(16===this.Fh&&(this.ss=!0,this.Zs=3,this.es=!0))}if(951===i){const t=c.i.Gr[r];let i=!0;t.No>0&&(i=this.ad(t)),i&&(this.J.oc(b.i.fd),this.J.p2(r))}else if(602===i||596===i||22===i||892===i||415===i)22===i?this.J.oc(b.i.ud):415===i?(0==(3&r)&&K.t.U++,K.t.U>=55&&(this.J.oc(b.i.dd),this.J.p4(0)),this.J.oc(b.i.wd)):602===i?this.J.oc(b.i.yd):892===i?(0==(3&h)&&K.t.P++,K.t.P>=130&&(this.J.oc(b.i.md),this.J.p1(177)),this.J.oc(b.i.pd)):596===i&&this.J.oc(b.i.Ad),this.J.p2(s),this.J.p2(h),this.J.p2(r),this.Rh=0,this.kh=r,this.Sh=h,this.Lh=2,c.i.Gr[r].Cu===this.rs&&(this.Lh=1),c.i.Gr[r].Cu===this.Ts&&(this.Lh=3);else if(581===i)0==(3&s)&&K.t.L++,K.t.L>=99&&(this.J.oc(b.i.Id),this.J.p4(0)),this.vu(b.i.gd,h,r,s);else if(965===i){if(this.Zn){this.vc(this.Zn.Oc[0],this.Zn.Lc[0],h,r,2,0,0,0,0,0,!1)||this.vc(this.Zn.Oc[0],this.Zn.Lc[0],h,r,2,1,1,0,0,0,!1),this.fs=this.Wa,this.us=this.Ya,this.ls=2,this.cs=0,this.J.oc(b.i._d),this.J.p2(h+this.Ue),this.J.p2(r+this.Be),this.J.p2(s),this.J.p2(this.Dh)}}else if(1501===i)K.t.M+=this.Be,K.t.M>=92&&(this.J.oc(b.i.Cd),this.J.p4(0)),this.vu(b.i.Ed,h,r,s);else if(364===i)this.vu(b.i.Td,h,r,s);else if(1102===i){const t=n.i.get(s);let i;i=t.Yu?t.Yu:"It's a "+t.name+'.',this.bu(0,i,'')}else if(960===i){this.J.oc(b.i.fd),this.J.p2(r);const t=c.i.Gr[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];t.fo&&this.xh[i]!==t.fo[0]&&(this.xh[i]=t.fo[0],await this.bd(i),this.ss=!0)}}else if(34===i){const i=this.Cs[t],s=i.indexOf('@whi@');if(-1!==s){this.vd(),this.zh=i.substring(s+5).trim(),this.jh=!1;for(let t=0;t<c.i.Gr.length;t++)if(c.i.Gr[t]&&c.i.Gr[t].No===c.i.ql){this.qh=this.rs=c.i.Gr[t].Cu;break}}}else if(947===i)this.vd();else if(367===i){const t=this._n[s];t&&this.Zn&&(this.vc(this.Zn.Oc[0],this.Zn.Lc[0],t.Oc[0],t.Lc[0],2,1,1,0,0,0,!1),this.fs=this.Wa,this.us=this.Ya,this.ls=2,this.cs=0,this.J.oc(b.i.Od),this.J.p2(s),this.J.p2(this.bh),this.J.p2(this.Eh),this.J.p2(this.Th))}else if(465===i){this.J.oc(b.i.fd),this.J.p2(r);const t=c.i.Gr[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];this.xh[i]=1-this.xh[i],await this.bd(i),this.ss=!0}}else if(406===i||436===i||557===i||556===i){const s=this.Cs[t],h=s.indexOf('@whi@');if(-1!==h){const t=R.i.$f(s.substring(h+5).trim());406===i?this.Ld(t):436===i?this.Sd(t):557===i?this.kd(t):556===i&&this.Rd(t)}}else if(651===i){const t=this._n[s];t&&this.Zn&&(this.vc(this.Zn.Oc[0],this.Zn.Lc[0],t.Oc[0],t.Lc[0],2,1,1,0,0,0,!1),this.fs=this.Wa,this.us=this.Ya,this.ls=2,this.cs=0,this.J.oc(b.i.Md),this.J.p2(s),this.J.p2(this.Dh))}}}this.Ch=0,this.Ph=0};ad=t=>{const i=t.No;if(i===c.i.xd&&(this.hs=!0,this.sh=!1,this.Ks=!0,this.Qs='',this.th=1,this.Js='Enter name of friend to add to list'),i===c.i.Nd&&(this.hs=!0,this.sh=!1,this.Ks=!0,this.Qs='',this.th=2,this.Js='Enter name of friend to delete from list'),i===c.i.Pd)return this.ht=250,!0;if(i===c.i.Dd&&(this.hs=!0,this.sh=!1,this.Ks=!0,this.Qs='',this.th=4,this.Js='Enter name of player to add to list'),i===c.i.Fd&&(this.hs=!0,this.sh=!1,this.Ks=!0,this.Qs='',this.th=5,this.Js='Enter name of player to delete from list'),i>=c.i.Ud&&i<=c.i.Bd){const t=(i-300)/2|0,s=1&i;let h=this.ir[t];if(-1!==h)for(;;)if(0===s&&(h--,h<0&&(h=o.i.count-1)),1===s&&(h++,h>=o.i.count&&(h=0)),!o.i.Gr[h].disable&&o.i.Gr[h].type===t+(this.Qn?0:7)){this.ir[t]=h,this.tr=!0;break}}if(i>=c.i.Gd&&i<=c.i.Hd){const t=(i-314)/2|0,s=1&i;let h=this.sr[t];0===s&&(h--,h<0&&(h=W.i.Hl[t].length-1)),1===s&&(h++,h>=W.i.Hl[t].length&&(h=0)),this.sr[t]=h,this.tr=!0}if(i!==c.i.zl||this.Qn||(this.Qn=!0,this.hc()),i===c.i.jl&&this.Qn&&(this.Qn=!1,this.hc()),i===c.i.Wd){this.J.oc(b.i.Yd),this.J.p1(this.Qn?0:1);for(let t=0;t<7;t++)this.J.p1(this.ir[t]);for(let t=0;t<5;t++)this.J.p1(this.sr[t]);return!0}return i===c.i.$l&&(this.jh=!this.jh),i>=c.i.Zd&&i<=c.i.Vd&&(this.vd(),this.zh.length>0&&(this.J.oc(b.i.Xd),this.J.zd(R.i.$f(this.zh)),this.J.p1(i-601),this.J.p1(this.jh?1:0))),!1};hc=()=>{this.tr=!0;for(let t=0;t<7;t++){this.ir[t]=-1;for(let i=0;i<o.i.count;i++)if(!o.i.Gr[i].disable&&o.i.Gr[i].type===t+(this.Qn?0:7)){this.ir[t]=i;break}}};vu=(t,i,s,h)=>{if(!this.Zn||!this.he)return!1;const n=h>>14&32767,r=this.he.au(this.je,i,s,h);if(-1===r)return!1;const o=31&r,l=r>>6&3;if(o===D.i.jd.id||o===D.i.qd.id||o===D.i.$d.id){const t=e.i.get(n);let h,r;l===F.i.du||l===F.i.yu?(h=t.width,r=t.length):(h=t.length,r=t.width);let o=t.Kd;0!==l&&(o=(o<<l&15)+(o>>4-l)),this.vc(this.Zn.Oc[0],this.Zn.Lc[0],i,s,2,h,r,0,0,o,!1)}else this.vc(this.Zn.Oc[0],this.Zn.Lc[0],i,s,2,0,0,l,o+1,0,!1);return this.fs=this.Wa,this.us=this.Ya,this.ls=2,this.cs=0,this.J.oc(t),this.J.p2(i+this.Ue),this.J.p2(s+this.Be),this.J.p2(n),!0};Rc=()=>{1===this.Ha&&(this.Wa>=549&&this.Wa<=583&&this.Ya>=195&&this.Ya<231&&-1!==this.Vs[0]?(this.ss=!0,this.Zs=0,this.es=!0):this.Wa>=579&&this.Wa<=609&&this.Ya>=194&&this.Ya<231&&-1!==this.Vs[1]?(this.ss=!0,this.Zs=1,this.es=!0):this.Wa>=607&&this.Wa<=637&&this.Ya>=194&&this.Ya<231&&-1!==this.Vs[2]?(this.ss=!0,this.Zs=2,this.es=!0):this.Wa>=635&&this.Wa<=679&&this.Ya>=194&&this.Ya<229&&-1!==this.Vs[3]?(this.ss=!0,this.Zs=3,this.es=!0):this.Wa>=676&&this.Wa<=706&&this.Ya>=194&&this.Ya<231&&-1!==this.Vs[4]?(this.ss=!0,this.Zs=4,this.es=!0):this.Wa>=704&&this.Wa<=734&&this.Ya>=194&&this.Ya<231&&-1!==this.Vs[5]?(this.ss=!0,this.Zs=5,this.es=!0):this.Wa>=732&&this.Wa<=766&&this.Ya>=195&&this.Ya<231&&-1!==this.Vs[6]?(this.ss=!0,this.Zs=6,this.es=!0):this.Wa>=550&&this.Wa<=584&&this.Ya>=492&&this.Ya<528&&-1!==this.Vs[7]?(this.ss=!0,this.Zs=7,this.es=!0):this.Wa>=582&&this.Wa<=612&&this.Ya>=492&&this.Ya<529&&-1!==this.Vs[8]?(this.ss=!0,this.Zs=8,this.es=!0):this.Wa>=609&&this.Wa<=639&&this.Ya>=492&&this.Ya<529&&-1!==this.Vs[9]?(this.ss=!0,this.Zs=9,this.es=!0):this.Wa>=637&&this.Wa<=681&&this.Ya>=493&&this.Ya<528&&-1!==this.Vs[10]?(this.ss=!0,this.Zs=10,this.es=!0):this.Wa>=679&&this.Wa<=709&&this.Ya>=492&&this.Ya<529&&-1!==this.Vs[11]?(this.ss=!0,this.Zs=11,this.es=!0):this.Wa>=706&&this.Wa<=736&&this.Ya>=492&&this.Ya<529&&-1!==this.Vs[12]?(this.ss=!0,this.Zs=12,this.es=!0):this.Wa>=734&&this.Wa<=768&&this.Ya>=492&&this.Ya<528&&-1!==this.Vs[13]&&(this.ss=!0,this.Zs=13,this.es=!0),K.t.v++,K.t.v>150&&(K.t.v=0,this.J.oc(b.i.Jd),this.J.p1(43)))};Pc=async()=>{for(;;){let t;do{for(;;){if(t=this.Va(),-1===t)return;if(-1!==this.rs&&this.rs===this.qh){8===t&&this.zh.length>0&&(this.zh=this.zh.substring(0,this.zh.length-1));break}if(this.Ks){if(t>=32&&t<=122&&this.Qs.length<80&&(this.Qs=this.Qs+String.fromCharCode(t),this.hs=!0),8===t&&this.Qs.length>0&&(this.Qs=this.Qs.substring(0,this.Qs.length-1),this.hs=!0),13===t||10===t){let t;if(this.Ks=!1,this.hs=!0,1===this.th&&(t=R.i.$f(this.Qs),this.Ld(t)),2===this.th&&this.hr>0&&(t=R.i.$f(this.Qs),this.kd(t)),3===this.th&&this.Qs.length>0&&this.Ir){this.J.oc(b.i.Qd),this.J.p1(0);const t=this.J.$a;this.J.zd(this.Ir),O.i.tw(this.J,this.Qs),this.J.Qc(this.J.$a-t),this.Qs=R.i.iw(this.Qs),this.Qs=v.i.filter(this.Qs),this.bu(6,this.Qs,R.i.Pl(R.i.Dl(this.Ir))),2===this.zs&&(this.zs=1,this.ns=!0,this.J.oc(b.i.sw),this.J.p1(this.Xs),this.J.p1(this.zs),this.J.p1(this.js))}4===this.th&&this.Ls<100&&(t=R.i.$f(this.Qs),this.Sd(t)),5===this.th&&this.Ls>0&&(t=R.i.$f(this.Qs),this.Rd(t))}}else if(this.sh){if(t>=48&&t<=57&&this.ih.length<10&&(this.ih=this.ih+String.fromCharCode(t),this.hs=!0),8===t&&this.ih.length>0&&(this.ih=this.ih.substring(0,this.ih.length-1),this.hs=!0),13===t||10===t){if(this.ih.length>0){let t=0;try{t=parseInt(this.ih,10)}catch(t){}this.J.oc(b.i.hw),this.J.p4(t)}this.sh=!1,this.hs=!0}}else if(-1===this.Ts&&(t>=32&&t<=122&&this.fh.length<80&&(this.fh=this.fh+String.fromCharCode(t),this.hs=!0),8===t&&this.fh.length>0&&(this.fh=this.fh.substring(0,this.fh.length-1),this.hs=!0),(13===t||10===t)&&this.fh.length>0)){if('::clientdrop'===this.fh)await this.ac();else if(this.Jn&&'::noclip'===this.fh)for(let t=0;t<G.i.ze;t++)for(let i=1;i<G.i.ln-1;i++)for(let s=1;s<G.i.ln-1;s++){const h=this.Xe[t];h&&(h.flags[G.i.index(i,s)]=0)}else if('::debug'===this.fh)K.t.A=!K.t.A;else if(this.fh.startsWith('::fps '))try{this.ew(parseInt(this.fh.substring(6),10))}catch(t){}if(this.fh.startsWith('::'))this.J.oc(b.i.nw),this.J.p1(this.fh.length-1),this.J.Ja(this.fh.substring(2));else{let t=0;this.fh.startsWith('yellow:')?(t=0,this.fh=this.fh.substring(7)):this.fh.startsWith('red:')?(t=1,this.fh=this.fh.substring(4)):this.fh.startsWith('green:')?(t=2,this.fh=this.fh.substring(6)):this.fh.startsWith('cyan:')?(t=3,this.fh=this.fh.substring(5)):this.fh.startsWith('purple:')?(t=4,this.fh=this.fh.substring(7)):this.fh.startsWith('white:')?(t=5,this.fh=this.fh.substring(6)):this.fh.startsWith('flash1:')?(t=6,this.fh=this.fh.substring(7)):this.fh.startsWith('flash2:')?(t=7,this.fh=this.fh.substring(7)):this.fh.startsWith('flash3:')?(t=8,this.fh=this.fh.substring(7)):this.fh.startsWith('glow1:')?(t=9,this.fh=this.fh.substring(6)):this.fh.startsWith('glow2:')?(t=10,this.fh=this.fh.substring(6)):this.fh.startsWith('glow3:')&&(t=11,this.fh=this.fh.substring(6));let i=0;this.fh.startsWith('wave:')&&(i=1,this.fh=this.fh.substring(5)),this.fh.startsWith('scroll:')&&(i=2,this.fh=this.fh.substring(7)),this.J.oc(b.i.rw),this.J.p1(0);const s=this.J.$a;this.J.p1(t),this.J.p1(i),O.i.tw(this.J,this.fh),this.J.Qc(this.J.$a-s),this.fh=R.i.iw(this.fh),this.fh=v.i.filter(this.fh),this.Zn&&this.Zn.name&&(this.Zn.gf=this.fh,this.Zn.Ef=t,this.Zn.Tf=i,this.Zn.bf=150,this.bu(2,this.Zn.gf,this.Zn.name)),2===this.Xs&&(this.Xs=3,this.ns=!0,this.J.oc(b.i.sw),this.J.p1(this.Xs),this.J.p1(this.zs),this.J.p1(this.js))}this.fh='',this.hs=!0}}}while((t<97||t>122)&&(t<65||t>90)&&(t<48||t>57)&&32!==t);this.zh.length<12&&(this.zh=this.zh+String.fromCharCode(t))}};Mc=()=>{if(1===this.Ha)if(this.Wa>=8&&this.Wa<=108&&this.Ya>=490&&this.Ya<=522)this.Xs=(this.Xs+1)%4,this.ns=!0,this.hs=!0,this.J.oc(b.i.sw),this.J.p1(this.Xs),this.J.p1(this.zs),this.J.p1(this.js);else if(this.Wa>=137&&this.Wa<=237&&this.Ya>=490&&this.Ya<=522)this.zs=(this.zs+1)%3,this.ns=!0,this.hs=!0,this.J.oc(b.i.sw),this.J.p1(this.Xs),this.J.p1(this.zs),this.J.p1(this.js);else if(this.Wa>=275&&this.Wa<=375&&this.Ya>=490&&this.Ya<=522)this.js=(this.js+1)%3,this.ns=!0,this.hs=!0,this.J.oc(b.i.sw),this.J.p1(this.Xs),this.J.p1(this.zs),this.J.p1(this.js);else if(this.Wa>=416&&this.Wa<=516&&this.Ya>=490&&this.Ya<=522){this.vd(),this.zh='',this.jh=!1;for(let t=0;t<c.i.Gr.length;t++)if(c.i.Gr[t]&&600===c.i.Gr[t].No)return void(this.qh=this.rs=c.i.Gr[t].Cu)}};Hc=(t,i,s,h,e,n,r,o)=>{if(this.qs?this.$s=32:this.$s=0,this.qs=!1,t>=n&&t<n+16&&i>=r&&i<r+16)o.Fo-=4*this.os,e&&(this.ss=!0);else if(t>=n&&t<n+16&&i>=r+h-16&&i<r+h)o.Fo+=4*this.os,e&&(this.ss=!0);else if(t>=n-this.$s&&t<n+this.$s+16&&i>=r+16&&i<r+h-16&&this.os>0){let t=(h-32)*h/s|0;t<8&&(t=8);const n=i-r-(t/2|0)-16,l=h-t-32;o.Fo=(s-h)*n/l|0,e&&(this.ss=!0),this.qs=!0}};ec=()=>{this.ti||(this.Br(),this.Wr=null,this.yt=null,this.At=null,this.It=null,this.gt=null,this._t=null,this.Ct=null,this.Et=null,this.Tt=null,this.bt=null,this.ti=new f.i(479,96),this.Jt=new f.i(168,160),u.i.clear(),this.Ei?.draw(0,0),this.Kt=new f.i(190,261),this.Qt=new f.i(512,334),u.i.clear(),this.ii=new f.i(501,61),this.si=new f.i(288,40),this.hi=new f.i(269,66),this.ut=!0)};_f=t=>{if(!t)return!1;for(let i=0;i<this.hr;i++)if(t.toLowerCase()===this.mr[i]?.toLowerCase())return!0;return!!this.Zn&&t.toLowerCase()===this.Zn.name?.toLowerCase()};Ld=t=>{if(0n===t)return;if(this.hr>=100)return void this.bu(0,'Your friends list is full. Max of 100 hit','');const i=R.i.Pl(R.i.Dl(t));for(let s=0;s<this.hr;s++)if(this.pr[s]===t)return void this.bu(0,i+' is already on your friend list','');for(let s=0;s<this.Ls;s++)if(this.Ss[s]===t)return void this.bu(0,'Please remove '+i+' from your ignore list first','');this.Zn&&this.Zn.name&&i!==this.Zn.name&&(this.mr[this.hr]=i,this.pr[this.hr]=t,this.Ar[this.hr]=0,this.hr++,this.ss=!0,this.J.oc(b.i.ow),this.J.zd(t))};kd=t=>{if(0n!==t)for(let i=0;i<this.hr;i++)if(this.pr[i]===t){this.hr--,this.ss=!0;for(let t=i;t<this.hr;t++)this.mr[t]=this.mr[t+1],this.Ar[t]=this.Ar[t+1],this.pr[t]=this.pr[t+1];return this.J.oc(b.i.lw),void this.J.zd(t)}};Sd=t=>{if(0n===t)return;if(this.Ls>=100)return void this.bu(0,'Your ignore list is full. Max of 100 hit','');const i=R.i.Pl(R.i.Dl(t));for(let s=0;s<this.Ls;s++)if(this.Ss[s]===t)return void this.bu(0,i+' is already on your ignore list','');for(let s=0;s<this.hr;s++)if(this.pr[s]===t)return void this.bu(0,'Please remove '+i+' from your friend list first','');this.Ss[this.Ls++]=t,this.ss=!0,this.J.oc(b.i.aw),this.J.zd(t)};Rd=t=>{if(0n!==t)for(let i=0;i<this.Ls;i++)if(this.Ss[i]===t){this.Ls--,this.ss=!0;for(let t=i;t<this.Ls;t++)this.Ss[t]=this.Ss[t+1];return this.J.oc(b.i.cw),void this.J.zd(t)}};fw=(t,i)=>{const s=this.Dn[this.je][t][i];if(!s)return void this.he?.uw(this.je,t,i);let h=-99999999,e=null;for(let t=s.dw();t;t=s.ww()){const i=n.i.get(t.index);let s=i.yw;i.vl&&(s*=t.count+1),s>h&&(h=s,e=t)}if(!e)return;s.mw(e);let r=-1,o=-1,l=0,a=0;for(let t=s.dw();t;t=s.ww())t.index!==e.index&&-1===r&&(r=t.index,l=t.count),t.index!==e.index&&t.index!==r&&-1===o&&(o=t.index,a=t.count);let c=null;-1!==r&&(c=n.i.get(r).pw(l));let f=null;-1!==o&&(f=n.i.get(o).pw(a));const u=t+(i<<7)+1610612736|0,d=n.i.get(e.index);this.he?.Aw(t,i,this.Kc(this.je,128*t+64,128*i+64),this.je,u,d.pw(e.count),f,c)};Iw=(t,i,s,h,n,r,o)=>{if(i<1||s<1||i>102||s>102)return;if(K.t.u&&t!==this.je)return;if(!this.he)return;let l=0;if(o===P.i.gw&&(l=this.he.lu(t,i,s)),o===P.i._w&&(l=this.he.Cw(t,s,i)),o===P.i.Ew&&(l=this.he.Au(t,i,s)),o===P.i.$d&&(l=this.he.su(t,i,s)),0!==l){const h=this.he.au(t,i,s,l),n=l>>14&32767,r=31&h,a=h>>6;if(o===P.i.gw){this.he?.Tw(t,i,s,1);const h=e.i.get(n);h.bw&&this.Xe[t]?.Tw(i,s,r,a,h.Ow)}if(o===P.i._w&&this.he?.Lw(t,i,s),o===P.i.Ew){this.he.Sw(t,i,s);const h=e.i.get(n);if(i+h.width>G.i.ln-1||s+h.width>G.i.ln-1||i+h.length>G.i.ln-1||s+h.length>G.i.ln-1)return;h.bw&&this.Xe[t]?.Sw(i,s,h.width,h.length,a,h.Ow)}if(o===P.i.$d){this.he?.kw(t,i,s);const h=e.i.get(n);h.bw&&h.active&&this.Xe[t]?.Rw(i,s)}}if(h>=0){let e=t;this.en&&t<3&&2==(2&this.en[1][i][s])&&(e=t+1),N.i.Iw(t,i,s,this.he,this.hn,this.Nn,this.Xe[t],h,r,n,e)}};vd=()=>{this.J.oc(b.i.Mw),-1!==this.Es&&(this.Es=-1,this.ss=!0,this.Mh=!1,this.es=!0),-1!==this.Ts&&(this.Ts=-1,this.hs=!0,this.Mh=!1),this.rs=-1};ac=async()=>{this.ht>0?await this.xw():(this.Qt?.bind(),this.Rt?.Sa(257,144,'Connection lost',A.i.Jo),this.Rt?.Sa(256,143,'Connection lost',A.i.xo),this.Rt?.Sa(257,159,'Please wait - attempting to reestablish',A.i.Jo),this.Rt?.Sa(256,158,'Please wait - attempting to reestablish',A.i.xo),this.Qt?.draw(8,11),this.oe=0,this.stream?.close(),this.Ea=!1,await this.Za(this.username,this.password,!0),this.Ea||await this.xw())};xw=async()=>{this.stream&&this.stream.close(),this.stream=null,this.Ea=!1,this.dt=0,this.username='',this.password='',M.i.ic(),this.uf(),this.he?.reset();for(let t=0;t<G.i.ze;t++)this.Xe[t]?.reset();(0,j.Ur)(),this.Mr=null,this.kr=0,K.t.u||await this.so('scape_main',12345678,4e4)};read=async()=>{if(!this.stream)return!1;try{let t=this.stream.available;if(0===t)return!1;if(-1===this.rt&&(await this.stream.qa(this.in.data,0,1),this.rt=255&this.in.data[0],this.nt&&(this.rt=this.rt-this.nt.Nw&255),this.packetSize=_.i.Pw[this.rt],t--),-1===this.packetSize){if(t<=0)return!1;await this.stream.qa(this.in.data,0,1),this.packetSize=255&this.in.data[0],t--}if(-2===this.packetSize){if(t<=1)return!1;await this.stream.qa(this.in.data,0,2),this.in.$a=0,this.packetSize=this.in.Dw,t-=2}if(t<this.packetSize)return!1;if(this.in.$a=0,await this.stream.qa(this.in.data,0,this.packetSize),this.st=0,this.ct=this.lt,this.lt=this.ot,this.ot=this.rt,this.rt===T.i.Fw){const t=this.in.Dw,i=this.in.Uw;return this.Nh[t]=i,this.xh[t]!==i&&(this.xh[t]=i,await this.bd(t),this.ss=!0,-1!==this.hh&&(this.hs=!0)),this.rt=-1,!0}if(this.rt===T.i.Bw){const t=this.in.Ka,i=this.in.Gw;let s=R.i.Pl(R.i.Dl(t));for(let h=0;h<this.hr;h++)if(t===this.pr[h]){this.Ar[h]!==i&&(this.Ar[h]=i,this.ss=!0,i>0&&this.bu(5,s+' has logged in.',''),0===i&&this.bu(5,s+' has logged out.','')),s=null;break}s&&this.hr<100&&(this.pr[this.hr]=t,this.mr[this.hr]=s,this.Ar[this.hr]=i,this.hr++,this.ss=!0);let h=!1;for(;!h;){h=!0;for(let t=0;t<this.hr-1;t++)if(this.Ar[t]!==K.t.o&&this.Ar[t+1]===K.t.o||0===this.Ar[t]&&0!==this.Ar[t+1]){const i=this.Ar[t];this.Ar[t]=this.Ar[t+1],this.Ar[t+1]=i;const s=this.mr[t];this.mr[t]=this.mr[t+1],this.mr[t+1]=s;const e=this.pr[t];this.pr[t]=this.pr[t+1],this.pr[t+1]=e,this.ss=!0,h=!1}}return this.rt=-1,!0}if(this.rt===T.i.Hw)return this.et=30*this.in.Dw,this.rt=-1,!0;if(this.rt===T.i.Ww){const t=this.in.Gw,i=this.in.Gw;let s=-1;if(this.We)for(let h=0;h<this.We.length;h++)this.We[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.Ge;if(h){const e=h[s];-1!==s&&e&&(this.db?.io(`m${t}_${i}`,e),this.ee=1)}}return this.rt=-1,!0}if(this.rt===T.i.Yw)return this.Zw(this.in,this.packetSize),this.rt=-1,!0;if(this.rt===T.i.Vw){const t=this.in.Dw,i=this.in.Dw;if(this.De===t&&this.Fe===i&&0!==this.ee)return this.rt=-1,!0;this.De=t,this.Fe=i,this.Ue=8*(this.De-6),this.Be=8*(this.Fe-6),this.ee=1,this.Qt?.bind(),this.Rt?.Sa(257,151,'Loading - please wait.',A.i.Jo),this.Rt?.Sa(256,150,'Loading - please wait.',A.i.xo),this.Qt?.draw(8,11);const s=(this.packetSize-2)/10|0;this.Ge=new $.to(s,null),this.He=new $.to(s,null),this.We=new Int32Array(s),this.J.oc(b.i.Xw),this.J.p1(0);let h=0;for(let t=0;t<s;t++){const i=this.in.Gw,s=this.in.Gw,e=this.in.ho,n=this.in.ho;let r;this.We[t]=(i<<8)+s,0!==e&&(r=await(this.db?.qr(`m${i}_${s}`)),r&&I.i.$r(r)!==e&&(r=void 0),r?this.Ge[t]=r:(this.ee=0,this.J.p1(0),this.J.p1(i),this.J.p1(s),h+=3)),0!==n&&(r=await(this.db?.qr(`l${i}_${s}`)),r&&I.i.$r(r)!==n&&(r=void 0),r?this.He[t]=r:(this.ee=0,this.J.p1(1),this.J.p1(i),this.J.p1(s),h+=3))}this.J.Qc(h),this.Qt?.bind(),0===this.ee&&(this.Rt?.Sa(257,166,'Map area updated since last visit, so load will take longer this time only',A.i.Jo),this.Rt?.Sa(256,165,'Map area updated since last visit, so load will take longer this time only',A.i.xo)),this.Qt?.draw(8,11);const e=this.Ue-this.Ye,n=this.Be-this.Ze;this.Ye=this.Ue,this.Ze=this.Be;for(let t=0;t<8192;t++){const i=this.Sn[t];if(i){for(let t=0;t<10;t++)i.Oc[t]-=e,i.Lc[t]-=n;i.x-=128*e,i.z-=128*n}}for(let t=0;t<this.W;t++){const i=this._n[t];if(i){for(let t=0;t<10;t++)i.Oc[t]-=e,i.Lc[t]-=n;i.x-=128*e,i.z-=128*n}}let r=0,o=G.i.ln,l=1;e<0&&(r=G.i.ln-1,o=-1,l=-1);let a=0,c=G.i.ln,f=1;n<0&&(a=G.i.ln-1,c=-1,f=-1);for(let t=r;t!==o;t+=l)for(let i=a;i!==c;i+=f){const s=t+e,h=i+n;for(let e=0;e<G.i.ze;e++)s>=0&&h>=0&&s<G.i.ln&&h<G.i.ln?this.Dn[e][t][i]=this.Dn[e][s][h]:this.Dn[e][t][i]=null}for(let t=this.Un.dw();t;t=this.Un.ww())t.x-=e,t.z-=n,(t.x<0||t.z<0||t.x>=G.i.ln||t.z>=G.i.ln)&&t.zw();return 0!==this.oe&&(this.oe-=e,this.le-=n),this.ae=!1,this.rt=-1,!0}if(this.rt===T.i.jw)return c.i.Gr[this.in.Dw].model=this.Zn?.qw()||null,this.rt=-1,!0;if(this.rt===T.i.$w)return this.ks=this.in.Gw,1===this.ks&&(this.Rs=this.in.Dw),this.ks>=2&&this.ks<=6&&(2===this.ks&&(this.Ms=64,this.xs=64),3===this.ks&&(this.Ms=0,this.xs=64),4===this.ks&&(this.Ms=128,this.xs=64),5===this.ks&&(this.Ms=64,this.xs=0),6===this.ks&&(this.Ms=64,this.xs=128),this.ks=2,this.Ps=this.in.Dw,this.Ds=this.in.Dw,this.Fs=this.in.Gw),10===this.ks&&(this.Ns=this.in.Dw),this.rt=-1,!0;if(this.rt===T.i.Kw){const t=this.in.Jw,i=this.in.ho,s=this.in.ho;return t!==this.Mr&&this.Rr&&!K.t.u&&await this.so(t,i,s),this.Mr=t,this.Nr=i,this.Pr=s,this.kr=0,this.rt=-1,!0}if(this.rt===T.i.Qw)return await this.xw(),this.rt=-1,!1;if(this.rt===T.i.ty){const t=this.in.Gw,i=this.in.Gw;let s=-1;if(this.We)for(let h=0;h<this.We.length;h++)this.We[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.He;if(h){const e=h[s];-1!==s&&e&&(this.db?.io(`l${t}_${i}`,e),this.ee=1)}}return this.rt=-1,!0}if(this.rt===T.i.iy)return this.oe=0,this.rt=-1,!0;if(this.rt===T.i.sy)return this.zn=this.in.Dw,this.rt=-1,!0;if(this.rt===T.i.hy||this.rt===T.i.ey||this.rt===T.i.ny||this.rt===T.i.oy||this.rt===T.i.ly||this.rt===T.i.uy||this.rt===T.i.wy||this.rt===T.i.yy||this.rt===T.i.my||this.rt===T.i.py)return this.Ay(this.in,this.rt),this.rt=-1,!0;if(this.rt===T.i.Iy){const t=this.in.Dw,i=this.in.Dw;return-1!==this.Ts&&(this.Ts=-1,this.hs=!0),this.sh&&(this.sh=!1,this.hs=!0),this.rs=t,this.Es=i,this.ss=!0,this.es=!0,this.Mh=!1,this.rt=-1,!0}if(this.rt===T.i.gy){const t=this.in.Dw,i=this.in.ho;return this.Nh[t]=i,this.xh[t]!==i&&(this.xh[t]=i,await this.bd(t),this.ss=!0,-1!==this.hh&&(this.hs=!0)),this.rt=-1,!0}if(this.rt===T.i._y){const t=this.in.Dw;return c.i.Gr[t].Co=this.in.Dw,this.rt=-1,!0}if(this.rt===T.i.Cy){let t=this.in.Dw;const i=this.in.Gw;return 65535===t&&(t=-1),this.Vs[i]=t,this.ss=!0,this.es=!0,this.rt=-1,!0}if(this.rt===T.i.Ey){const t=this.in.Gw,i=this.in.Gw,s=this.in.Dw,h=this.in.Dw;let e=-1;if(this.We)for(let s=0;s<this.We.length;s++)this.We[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.He){this.He[e]&&this.He[e]?.length===h||(this.He[e]=new Int8Array(h));const t=this.He[e];t&&this.in.Ty(this.packetSize-6,s,t)}return this.rt=-1,!0}if(this.rt===T.i.by){const t=M.i.stop();return t&&(this.J.oc(b.i.lc),this.J.p2(t.$a),this.J.tc(t.data,t.$a,0),t.release()),this.rt=-1,!0}if(this.rt===T.i.vy){this.ss=!0;const t=this.in.Dw,i=c.i.Gr[t],s=this.in.Gw;if(i.Ho&&i.Wo){for(let t=0;t<s;t++){i.Ho[t]=this.in.Dw;let s=this.in.Gw;255===s&&(s=this.in.ho),i.Wo[t]=s}for(let t=s;t<i.Ho.length;t++)i.Ho[t]=0,i.Wo[t]=0}else for(let t=0;t<s;t++)this.in.Dw,255===this.in.Gw&&this.in.ho;return this.rt=-1,!0}if(this.rt===T.i.Oy)return M.i.Ly(),this.rt=-1,!0;if(this.rt===T.i.Sy)return this.Ks=!1,this.sh=!0,this.ih='',this.hs=!0,this.rt=-1,!0;if(this.rt===T.i.ky){const t=c.i.Gr[this.in.Dw];if(t.Ho)for(let i=0;i<t.Ho.length;i++)t.Ho[i]=-1,t.Ho[i]=0;return this.rt=-1,!0}if(this.rt===T.i.Ry){if(this.$h=this.in.ho,this.Kh=this.in.Dw,this.Jh=this.in.Gw,this.Qh=this.in.Dw,0!==this.$h&&-1===this.rs){this.vd();let t=650;201!==this.Jh&&(t=655),this.zh='',this.jh=!1;for(let i=0;i<c.i.Gr.length;i++)if(c.i.Gr[i]&&c.i.Gr[i].No===t){this.rs=c.i.Gr[i].Cu;break}}return this.rt=-1,!0}if(this.rt===T.i.My)return this.Ys=this.in.Gw,this.Ys===this.Zs&&(3===this.Ys?this.Zs=1:this.Zs=3,this.ss=!0),this.rt=-1,!0;if(this.rt===T.i.xy){if(this.Rr&&!K.t.u){const t=this.in.Dw,i=this.in.ho,s=this.packetSize-6,h=S.i.read(i,Int8Array.from(this.in.data),s,this.in.$a);(0,j.eo)(h,this.Dr),this.kr=t}return this.rt=-1,!0}if(this.rt===T.i.Ny)return this.Xn=this.in.Gw,this.rt=-1,!0;if(this.rt===T.i.Py){const t=this.in.Dw,i=this.in.Gw,s=this.in.Dw;return this._r&&!K.t.u&&this.gr<50&&(this.Cr[this.gr]=t,this.Er[this.gr]=i,this.Tr[this.gr]=s+L.i.Dy[t],this.gr++),this.rt=-1,!0}if(this.rt===T.i.Fy){const t=this.in.Dw,i=this.in.Dw,s=r.i.get(i);return c.i.Gr[t].model=s.qw(),this.rt=-1,!0}if(this.rt===T.i.Uy)return this.Ne=this.in.Gw,this.Pe=this.in.Gw,this.rt=-1,!0;if(this.rt===T.i.By){const t=this.in.Dw,i=this.in.Dw,s=this.in.Dw,h=c.i.Gr[t].model;return h?.Gl(i,s),this.rt=-1,!0}if(this.rt===T.i.Gy)return this.Xs=this.in.Gw,this.zs=this.in.Gw,this.js=this.in.Gw,this.ns=!0,this.hs=!0,this.rt=-1,!0;if(this.rt===T.i.Hy){const t=this.in.Dw;return this.Wy(t),-1!==this.Ts&&(this.Ts=-1,this.hs=!0),this.sh&&(this.sh=!1,this.hs=!0),this.Es=t,this.ss=!0,this.es=!0,this.rs=-1,this.Mh=!1,this.rt=-1,!0}if(this.rt===T.i.Yy){const t=this.in.Dw;return this.Wy(t),-1!==this.Es&&(this.Es=-1,this.ss=!0,this.es=!0),this.Ts=t,this.hs=!0,this.rs=-1,this.Mh=!1,this.rt=-1,!0}if(this.rt===T.i.Zy){const t=this.in.Dw,i=this.in.Vy,s=this.in.Vy,h=c.i.Gr[t];return h.x=i,h.y=s,this.rt=-1,!0}if(this.rt===T.i.Xy)return this.ae=!0,this.mn=this.in.Gw,this.pn=this.in.Gw,this.An=this.in.Dw,this.In=this.in.Gw,this.gn=this.in.Gw,this.gn>=100&&(this.Ce=128*this.mn+64,this.Te=128*this.pn+64,this.Ee=this.Kc(this.je,this.mn,this.pn)-this.An),this.rt=-1,!0;if(this.rt===T.i.zy){this.Ne=this.in.Gw,this.Pe=this.in.Gw;for(let t=this.Ne;t<this.Ne+8;t++)for(let i=this.Pe;i<this.Pe+8;i++)this.Dn[this.je][t][i]&&(this.Dn[this.je][t][i]=null,this.fw(t,i));for(let t=this.Un.dw();t;t=this.Un.ww())t.x>=this.Ne&&t.x<this.Ne+8&&t.z>=this.Pe&&t.z<this.Pe+8&&t.jy===this.je&&(this.Iw(t.jy,t.x,t.z,t.qy,t.$y,t.Ky,t.Cu),t.zw());return this.rt=-1,!0}if(this.rt===T.i.Jy){const t=this.in.Gw,i=this.in.Gw,s=this.in.Dw,h=this.in.Dw;let e=-1;if(this.We)for(let s=0;s<this.We.length;s++)this.We[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.Ge){this.Ge[e]&&this.Ge[e]?.length===h||(this.Ge[e]=new Int8Array(h));const t=this.Ge[e];t&&this.in.Ty(this.packetSize-6,s,t)}return this.rt=-1,!0}if(this.rt===T.i.Qd){const t=this.in.Ka,i=this.in.ho,s=this.in.Gw;let h=!1;for(let t=0;t<100;t++)if(this.rh[t]===i){h=!0;break}if(s<=1)for(let i=0;i<this.Ls;i++)if(this.Ss[i]===t){h=!0;break}if(!h&&0===this.ds)try{this.rh[this.oh]=i,this.oh=(this.oh+1)%100;const h=O.i.Aa(this.in,this.packetSize-13),e=v.i.filter(h);s>1?this.bu(7,e,R.i.Pl(R.i.Dl(t))):this.bu(3,e,R.i.Pl(R.i.Dl(t)))}catch(t){}return this.rt=-1,!0}if(this.rt===T.i.Qy){for(let t=0;t<this.xh.length;t++)this.xh[t]!==this.Nh[t]&&(this.xh[t]=this.Nh[t],await this.bd(t),this.ss=!0);return this.rt=-1,!0}if(this.rt===T.i.tm){const t=this.in.Dw,i=this.in.Dw;return c.i.Gr[t].model=p.i.model(i),this.rt=-1,!0}if(this.rt===T.i.im)return this.hh=this.in.Vy,this.hs=!0,this.rt=-1,!0;if(this.rt===T.i.sm)return 12===this.Zs&&(this.ss=!0),this.Vn=this.in.Gw,this.rt=-1,!0;if(this.rt===T.i.hm){if(this.ae=!0,this.fn=this.in.Gw,this.un=this.in.Gw,this.dn=this.in.Dw,this.wn=this.in.Gw,this.yn=this.in.Gw,this.yn>=100){const t=128*this.fn+64,i=128*this.un+64,s=this.Kc(this.je,this.fn,this.un)-this.dn,h=t-this.Ce,e=s-this.Ee,n=i-this.Te,r=0|Math.sqrt(h*h+n*n);this.be=2047&(325.949*Math.atan2(e,r)|0),this.ve=2047&(-325.949*Math.atan2(h,n)|0),this.be<128&&(this.be=128),this.be>383&&(this.be=383)}return this.rt=-1,!0}if(this.rt===T.i.nm)return this.Zs=this.in.Gw,this.ss=!0,this.es=!0,this.rt=-1,!0;if(this.rt===T.i.rm){const t=this.in.Jw;let i;if(t.endsWith(':tradereq:')){const s=t.substring(0,t.indexOf(':'));i=R.i.$f(s);let h=!1;for(let t=0;t<this.Ls;t++)if(this.Ss[t]===i){h=!0;break}h||0!==this.ds||this.bu(4,'wishes to trade with you.',s)}else if(t.endsWith(':duelreq:')){const s=t.substring(0,t.indexOf(':'));i=R.i.$f(s);let h=!1;for(let t=0;t<this.Ls;t++)if(this.Ss[t]===i){h=!0;break}h||0!==this.ds||this.bu(8,'wishes to duel with you.',s)}else this.bu(0,t,'');return this.rt=-1,!0}if(this.rt===T.i.om){const t=this.in.Dw,i=this.in.Dw,s=this.in.Dw,h=n.i.get(i);return c.i.Gr[t].model=h.pw(50),c.i.Gr[t].gl=h.lm,c.i.Gr[t].Tl=h.am,c.i.Gr[t].zoom=100*h.fm/s|0,this.rt=-1,!0}if(this.rt===T.i.um){const t=this.in.Dw;return this.Wy(t),-1!==this.Es&&(this.Es=-1,this.ss=!0,this.es=!0),-1!==this.Ts&&(this.Ts=-1,this.hs=!0),this.sh&&(this.sh=!1,this.hs=!0),this.rs=t,this.Mh=!1,this.rt=-1,!0}if(this.rt===T.i.dm){const t=this.in.Dw,i=this.in.Dw,s=i>>10&31,h=i>>5&31,e=31&i;return c.i.Gr[t].sl=(s<<19)+(h<<11)+(e<<3),this.rt=-1,!0}if(this.rt===T.i.wm){for(let t=0;t<this._n.length;t++){const i=this._n[t];i&&(i.ym=-1)}for(let t=0;t<this.Sn.length;t++){const i=this.Sn[t];i&&(i.ym=-1)}return this.rt=-1,!0}if(this.rt===T.i.pm){const t=this.in.Dw;return c.i.Gr[t].hide=1===this.in.Gw,this.rt=-1,!0}if(this.rt===T.i.Am){this.Ls=this.packetSize/8|0;for(let t=0;t<this.Ls;t++)this.Ss[t]=this.in.Ka;return this.rt=-1,!0}if(this.rt===T.i.Im){this.ae=!1;for(let t=0;t<5;t++)this.Ae[t]=!1;return this.rt=-1,!0}if(this.rt===T.i.gm)return-1!==this.Es&&(this.Es=-1,this.ss=!0,this.es=!0),-1!==this.Ts&&(this.Ts=-1,this.hs=!0),this.sh&&(this.sh=!1,this.hs=!0),this.rs=-1,this.Mh=!1,this.rt=-1,!0;if(this.rt===T.i._m){const t=this.in.Dw;return c.i.Gr[t].text=this.in.Jw,c.i.Gr[t].Cu===this.Vs[this.Zs]&&(this.ss=!0),this.rt=-1,!0}if(this.rt===T.i.Cm){this.ss=!0;const t=this.in.Gw,i=this.in.ho,s=this.in.Gw;this.Us[t]=i,this.Bs[t]=s,this.Gs[t]=1;for(let s=0;s<98;s++)i>=this.Hs[s]&&(this.Gs[t]=s+2);return this.rt=-1,!0}if(this.rt===T.i.Em){for(this.Ne=this.in.Gw,this.Pe=this.in.Gw;this.in.$a<this.packetSize;){const t=this.in.Gw;this.Ay(this.in,t)}return this.rt=-1,!0}if(this.rt===T.i.Tm)return 12===this.Zs&&(this.ss=!0),this.jn=this.in.Vy,this.rt=-1,!0;if(this.rt===T.i.bm){const t=this.in.Gw,i=this.in.Gw,s=this.in.Gw,h=this.in.Gw;return this.Ae[t]=!0,this.Ie[t]=i,this.ge[t]=s,this._e[t]=h,this.pe[t]=0,this.rt=-1,!0}if(this.rt===T.i.vm){this.ss=!0;const t=this.in.Dw,i=c.i.Gr[t];for(;this.in.$a<this.packetSize;){const t=this.in.Gw,s=this.in.Dw;let h=this.in.Gw;255===h&&(h=this.in.ho),i.Ho&&i.Wo&&t>=0&&t<i.Ho.length&&(i.Ho[t]=s,i.Wo[t]=h)}return this.rt=-1,!0}if(this.rt===T.i.Om)return this.Lm(this.in,this.packetSize),1===this.ee&&(this.ee=2,N.i.Sm=this.je,this.km()),K.t.u&&2===this.ee&&N.i.Sm!==this.je&&(this.Qt?.bind(),this.Rt?.Sa(257,151,'Loading - please wait.',A.i.Jo),this.Rt?.Sa(256,150,'Loading - please wait.',A.i.xo),this.Qt?.draw(8,11),N.i.Sm=this.je,this.km()),this.je!==this.xe&&2===this.ee&&(this.xe=this.je,this.Qf(this.je)),this.rt=-1,!0;await this.xw()}catch(t){console.log(t),await this.ac()}return!0};km=()=>{try{this.xe=-1,this.Pn.clear(),this.Nn.clear(),this.xn.clear(),this.Mn.clear(),d.i.Rm(),this.uf(),this.he?.reset();for(let t=0;t<G.i.ze;t++)this.Xe[t]?.reset();const t=new N.i(G.i.ln,G.i.ln,this.hn,this.en);N.i.u=K.t.u;const i=this.Ge?.length??0;if(this.We)for(let t=0;t<i;t++){const i=this.We[t]>>8,s=255&this.We[t];if(33===i&&s>=71&&s<=73){N.i.u=!1;break}}if(K.t.u?this.he?.Mm(this.je):this.he?.Mm(0),this.We&&this.Ge){this.J.oc(b.i.Uc);for(let s=0;s<i;s++){const i=64*(this.We[s]>>8)-this.Ue,h=64*(255&this.We[s])-this.Be,e=this.Ge[s];if(e){const s=new I.i(new Uint8Array(e)).ho,n=S.i.read(s,e,e.length-4,4);t.xm(8*(this.De-6),8*(this.Fe-6),i,h,n)}else this.Fe<800&&t.Nm(h,i,64,64)}}if(this.We&&this.He){this.J.oc(b.i.Uc);for(let s=0;s<i;s++){const i=this.He[s];if(i){const h=new I.i(new Uint8Array(i)).ho,e=S.i.read(h,i,i.length-4,4),n=64*(this.We[s]>>8)-this.Ue,r=64*(255&this.We[s])-this.Be;t.Pm(this.he,this.Nn,this.Xe,e,n,r)}}}this.J.oc(b.i.Uc),t.Dm(this.he,this.Xe),this.Qt?.bind(),this.J.oc(b.i.Uc);for(let t=this.Nn.dw();t;t=this.Nn.ww())2===(this.en&&2&this.en[1][t.Fm][t.Um])&&(t.Bm--,t.Bm<0&&t.zw());for(let t=0;t<G.i.ln;t++)for(let i=0;i<G.i.ln;i++)this.fw(t,i);for(let t=this.Un.dw();t;t=this.Un.ww())this.Iw(t.jy,t.x,t.z,t.Gm,t.angle,t.shape,t.Cu)}catch(t){}e.i.df?.clear(),d.i.pa(20)};Wy=t=>{const i=c.i.Gr[t];if(i._o)for(let t=0;t<i._o.length&&-1!==i._o[t];t++){const s=c.i.Gr[i._o[t]];1===s.type&&this.Wy(s.id),s.bo=0,s.To=0}};Ca=()=>{let t=0;for(let i=0;i<99;i++){const s=i+1;t+=s+300*Math.pow(2,s/7)|0,this.Hs[i]=t/4|0}};bu=(t,i,s)=>{0===t&&-1!==this.hh&&(this.Ws=i,this.Ha=0),-1===this.Ts&&(this.hs=!0);for(let t=99;t>0;t--)this.messageType[t]=this.messageType[t-1],this.nh[t]=this.nh[t-1],this.eh[t]=this.eh[t-1];this.messageType[0]=t,this.nh[0]=s,this.eh[0]=i};bd=async t=>{const i=a.i.Gr[t].Hm;if(0!==i){const s=this.xh[t];if(1===i&&(1===s&&d.i.ma(.9),2===s&&d.i.ma(.8),3===s&&d.i.ma(.7),4===s&&d.i.ma(.6),n.i.yf?.clear(),this.ut=!0),3===i){const t=this.Rr;0===s&&(this.Dr=256,(0,j.Wm)(256),this.Rr=!0),1===s&&(this.Dr=192,(0,j.Wm)(192),this.Rr=!0),2===s&&(this.Dr=128,(0,j.Wm)(128),this.Rr=!0),3===s&&(this.Dr=64,(0,j.Wm)(64),this.Rr=!0),4===s&&(this.Rr=!1),this.Rr!==t&&(this.Rr&&this.Mr?await this.so(this.Mr,this.Nr,this.Pr):(0,j.Ur)(),this.kr=0)}4===i&&(0===s&&(this.br=256,(0,j.Ym)(256),this._r=!0),1===s&&(this.br=192,(0,j.Ym)(192),this._r=!0),2===s&&(this.br=128,(0,j.Ym)(128),this._r=!0),3===s&&(this.br=64,(0,j.Ym)(64),this._r=!0),4===s&&(this._r=!1)),5===i&&(this.Bh=s),6===i&&(this.ah=s),8===i&&(this.lh=s,this.hs=!0)}};Zm=(t,i)=>{let s=0;for(let t=0;t<100;t++){if(!this.eh[t])continue;const h=this.messageType[t],e=this.Os+70+4-14*s;if(e<-20)break;0===h&&s++,1!==h&&2!==h||!(1===h||0===this.Xs||1===this.Xs&&this._f(this.nh[t]))||(i>e-14&&i<=e&&this.Zn&&this.nh[t]!==this.Zn.name&&(this.Jn&&(this.Cs[this._s]='Report abuse @whi@'+this.nh[t],this.Gh[this._s]=34,this._s++),this.Cs[this._s]='Add ignore @whi@'+this.nh[t],this.Gh[this._s]=436,this._s++,this.Cs[this._s]='Add friend @whi@'+this.nh[t],this.Gh[this._s]=406,this._s++),s++),3!==h&&7!==h||0!==this.lh||!(7===h||0===this.zs||1===this.zs&&this._f(this.nh[t]))||(i>e-14&&i<=e&&(this.Jn&&(this.Cs[this._s]='Report abuse @whi@'+this.nh[t],this.Gh[this._s]=34,this._s++),this.Cs[this._s]='Add ignore @whi@'+this.nh[t],this.Gh[this._s]=436,this._s++,this.Cs[this._s]='Add friend @whi@'+this.nh[t],this.Gh[this._s]=406,this._s++),s++),4===h&&(0===this.js||1===this.js&&this._f(this.nh[t]))&&(i>e-14&&i<=e&&(this.Cs[this._s]='Accept trade @whi@'+this.nh[t],this.Gh[this._s]=903,this._s++),s++),(5===h||6===h)&&0===this.lh&&this.zs<2&&s++,8===h&&(0===this.js||1===this.js&&this._f(this.nh[t]))&&(i>e-14&&i<=e&&(this.Cs[this._s]='Accept duel @whi@'+this.nh[t],this.Gh[this._s]=363,this._s++),s++)}};Vm=t=>{if(0==this.lh)return;let i=0;0!=this.et&&(i=1);for(let s=0;s<100;s++)if(null!=this.eh[s]){const h=this.messageType[s];if((3==h||7==h)&&(7==h||0==this.zs||1==this.zs&&this._f(this.nh[s]))){const h=329-13*i;if(this.Xo>8&&this.Xo<520&&t-11>h-10&&t-11<=h+3&&(this.Jn&&(this.Cs[this._s]='Report abuse @whi@'+this.nh[s],this.Gh[this._s]=2034,this._s++),this.Cs[this._s]='Add ignore @whi@'+this.nh[s],this.Gh[this._s]=2436,this._s++,this.Cs[this._s]='Add friend @whi@'+this.nh[s],this.Gh[this._s]=2406,this._s++),i++,i>=5)return}if((5==h||6==h)&&this.zs<2&&(i++,i>=5))return}};Xm=(t,i,s,h,e,r)=>{if(0!==t.type||!t._o||t.hide||i<h||s<e||i>h+t.width||s>e+t.height||!t.ko||!t.Ro)return;const o=t._o.length;for(let l=0;l<o;l++){let o=t.ko[l]+h,a=t.Ro[l]+e-r;const f=c.i.Gr[t._o[l]];if(o+=f.x,a+=f.y,(f.zm>=0||0!==f.el)&&i>=o&&s>=a&&i<o+f.width&&s<a+f.height&&(f.zm>=0?this.Xh=f.zm:this.Xh=f.id),0===f.type)this.Xm(f,i,s,o,a,f.Fo),f.scroll>f.height&&this.Hc(i,s,f.scroll,f.height,!0,o+f.width,a,f);else if(2===f.type){let t=0;for(let h=0;h<f.height;h++)for(let e=0;e<f.width;e++){let r=o+e*(f.Yo+32),l=a+h*(f.Zo+32);if(t<20&&f.Bo&&f.Go&&(r+=f.Bo[t],l+=f.Go[t]),i<r||s<l||i>=r+32||s>=l+32){t++;continue}if(this.Vh=t,this.Zh=f.id,!f.Ho||f.Ho[t]<=0){t++;continue}const c=n.i.get(f.Ho[t]-1);if(1===this.Ch&&f.jm)f.id===this.Th&&t===this.Eh||(this.Cs[this._s]='Use '+this.Oh+' with @lre@'+c.name,this.Gh[this._s]=881,this.Hh[this._s]=c.index,this.Wh[this._s]=t,this.Yh[this._s]=f.id,this._s++);else if(1===this.Ph&&f.jm)16==(16&this.Fh)&&(this.Cs[this._s]=this.Uh+' @lre@'+c.name,this.Gh[this._s]=391,this.Hh[this._s]=c.index,this.Wh[this._s]=t,this.Yh[this._s]=f.id,this._s++);else{if(f.jm)for(let i=4;i>=3;i--)c.qm&&c.qm[i]?(this.Cs[this._s]=c.qm[i]+' @lre@'+c.name,3===i?this.Gh[this._s]=478:4===i&&(this.Gh[this._s]=347),this.Hh[this._s]=c.index,this.Wh[this._s]=t,this.Yh[this._s]=f.id,this._s++):4===i&&(this.Cs[this._s]='Drop @lre@'+c.name,this.Gh[this._s]=347,this.Hh[this._s]=c.index,this.Wh[this._s]=t,this.Yh[this._s]=f.id,this._s++);if(f.$m&&(this.Cs[this._s]='Use @lre@'+c.name,this.Gh[this._s]=188,this.Hh[this._s]=c.index,this.Wh[this._s]=t,this.Yh[this._s]=f.id,this._s++),f.jm&&c.qm)for(let i=2;i>=0;i--)c.qm[i]&&(this.Cs[this._s]=c.qm[i]+' @lre@'+c.name,0===i?this.Gh[this._s]=405:1===i?this.Gh[this._s]=38:2===i&&(this.Gh[this._s]=422),this.Hh[this._s]=c.index,this.Wh[this._s]=t,this.Yh[this._s]=f.id,this._s++);if(f.qm)for(let i=4;i>=0;i--)f.qm[i]&&(this.Cs[this._s]=f.qm[i]+' @lre@'+c.name,0===i?this.Gh[this._s]=602:1===i?this.Gh[this._s]=596:2===i?this.Gh[this._s]=22:3===i?this.Gh[this._s]=892:4===i&&(this.Gh[this._s]=415),this.Hh[this._s]=c.index,this.Wh[this._s]=t,this.Yh[this._s]=f.id,this._s++);this.Cs[this._s]='Examine @lre@'+c.name,this.Gh[this._s]=1773,this.Hh[this._s]=c.index,f.Wo&&(this.Yh[this._s]=f.Wo[t]),this._s++}t++}}else if(i>=o&&s>=a&&i<o+f.width&&s<a+f.height)if(f.ol===c.i.Km){let t=!1;0!==f.No&&(t=this.Jm(f)),!t&&f.Qm&&(this.Cs[this._s]=f.Qm,this.Gh[this._s]=951,this.Yh[this._s]=f.id,this._s++)}else if(f.ol===c.i.tp&&0===this.Ph){let t=f.ld;t&&-1!==t.indexOf(' ')&&(t=t.substring(0,t.indexOf(' '))),this.Cs[this._s]=t+' @gre@'+f.action,this.Gh[this._s]=930,this.Yh[this._s]=f.id,this._s++}else f.ol===c.i.ip?(this.Cs[this._s]='Close',this.Gh[this._s]=947,this.Yh[this._s]=f.id,this._s++):f.ol===c.i.sp&&f.Qm?(this.Cs[this._s]=f.Qm,this.Gh[this._s]=465,this.Yh[this._s]=f.id,this._s++):f.ol===c.i.hp&&f.Qm?(this.Cs[this._s]=f.Qm,this.Gh[this._s]=960,this.Yh[this._s]=f.id,this._s++):f.ol===c.i.ll&&!this.Mh&&f.Qm&&(this.Cs[this._s]=f.Qm,this.Gh[this._s]=44,this.Yh[this._s]=f.id,this._s++)}};Jm=t=>{let i=t.No;return i>=c.i.Ll&&i<=c.i.Rl?(i>=c.i.kl?i-=c.i.kl:i--,this.Cs[this._s]='Remove @whi@'+this.mr[i],this.Gh[this._s]=557,this._s++,this.Cs[this._s]='Message @whi@'+this.mr[i],this.Gh[this._s]=679,this._s++,!0):i>=c.i.xl&&i<=c.i.Nl&&(this.Cs[this._s]='Remove @whi@'+t.text,this.Gh[this._s]=556,this._s++,!0)};ep=()=>{0===this.Ch&&0===this.Ph&&(this.Cs[this._s]='Walk here',this.Gh[this._s]=660,this.Wh[this._s]=this.Xo,this.Yh[this._s]=this.zo,this._s++);let t=-1;for(let i=0;i<p.i.ef;i++){const s=p.i.np[i],h=127&s,r=s>>7&127,o=s>>29&3,l=s>>14&32767;if(s!==t){if(t=s,2===o&&this.he&&this.he.au(this.je,h,r,s)>=0){const t=e.i.get(l);if(1===this.Ch)this.Cs[this._s]='Use '+this.Oh+' with @cya@'+t.name,this.Gh[this._s]=450,this.Hh[this._s]=s,this.Wh[this._s]=h,this.Yh[this._s]=r,this._s++;else if(1!==this.Ph){if(t.rp)for(let i=4;i>=0;i--)t.rp[i]&&(this.Cs[this._s]=t.rp[i]+' @cya@'+t.name,0===i&&(this.Gh[this._s]=285),1===i&&(this.Gh[this._s]=504),2===i&&(this.Gh[this._s]=364),3===i&&(this.Gh[this._s]=581),4===i&&(this.Gh[this._s]=1501),this.Hh[this._s]=s,this.Wh[this._s]=h,this.Yh[this._s]=r,this._s++);this.Cs[this._s]='Examine @cya@'+t.name,this.Gh[this._s]=1175,this.Hh[this._s]=s,this.Wh[this._s]=h,this.Yh[this._s]=r,this._s++}else 4==(4&this.Fh)&&(this.Cs[this._s]=this.Uh+' @cya@'+t.name,this.Gh[this._s]=55,this.Hh[this._s]=s,this.Wh[this._s]=h,this.Yh[this._s]=r,this._s++)}if(1===o){const t=this.Sn[l];if(t&&t.type&&1===t.type.size&&64==(127&t.x)&&64==(127&t.z))for(let i=0;i<this.kn;i++){const s=this.Sn[this.Rn[i]];s&&s!==t&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.op(s.type,this.Rn[i],h,r)}t&&t.type&&this.op(t.type,l,h,r)}if(0===o){const t=this._n[l];if(t&&64==(127&t.x)&&64==(127&t.z)){for(let i=0;i<this.kn;i++){const s=this.Sn[this.Rn[i]];s&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.op(s.type,this.Rn[i],h,r)}for(let i=0;i<this.Cn;i++){const s=this._n[this.En[i]];s&&s!==t&&s.x===t.x&&s.z===t.z&&this.lp(s,this.En[i],h,r)}}t&&this.lp(t,l,h,r)}if(3===o){const t=this.Dn[this.je][h][r];if(!t)continue;for(let i=t.ap();i;i=t.next()){const t=n.i.get(i.index);if(1===this.Ch)this.Cs[this._s]='Use '+this.Oh+' with @lre@'+t.name,this.Gh[this._s]=217,this.Hh[this._s]=i.index,this.Wh[this._s]=h,this.Yh[this._s]=r,this._s++;else if(1!==this.Ph){for(let s=4;s>=0;s--)t.rp&&t.rp[s]?(this.Cs[this._s]=t.rp[s]+' @lre@'+t.name,0===s&&(this.Gh[this._s]=224),1===s&&(this.Gh[this._s]=993),2===s&&(this.Gh[this._s]=99),3===s&&(this.Gh[this._s]=746),4===s&&(this.Gh[this._s]=877),this.Hh[this._s]=i.index,this.Wh[this._s]=h,this.Yh[this._s]=r,this._s++):2===s&&(this.Cs[this._s]='Take @lre@'+t.name,this.Gh[this._s]=99,this.Hh[this._s]=i.index,this.Wh[this._s]=h,this.Yh[this._s]=r,this._s++);this.Cs[this._s]='Examine @lre@'+t.name,this.Gh[this._s]=1102,this.Hh[this._s]=i.index,this.Wh[this._s]=h,this.Yh[this._s]=r,this._s++}else 1==(1&this.Fh)&&(this.Cs[this._s]=this.Uh+' @lre@'+t.name,this.Gh[this._s]=965,this.Hh[this._s]=i.index,this.Wh[this._s]=h,this.Yh[this._s]=r,this._s++)}}}}};op=(t,i,s,h)=>{if(this._s>=400)return;let e=t.name;if(0!==t.cp&&this.Zn&&(e=e+this.fp(this.Zn.ea,t.cp)+' (level-'+t.cp+')'),1===this.Ch)this.Cs[this._s]='Use '+this.Oh+' with @yel@'+e,this.Gh[this._s]=900,this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++;else if(1!==this.Ph){let n;if(t.rp)for(n=4;n>=0;n--)t.rp[n]&&'attack'!==t.rp[n]?.toLowerCase()&&(this.Cs[this._s]=t.rp[n]+' @yel@'+e,0===n?this.Gh[this._s]=728:1===n?this.Gh[this._s]=542:2===n?this.Gh[this._s]=6:3===n?this.Gh[this._s]=963:4===n&&(this.Gh[this._s]=245),this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++);if(t.rp)for(n=4;n>=0;n--)if(t.rp[n]&&'attack'===t.rp[n]?.toLowerCase()){let r=0;this.Zn&&t.cp>this.Zn.ea&&(r=2e3),this.Cs[this._s]=t.rp[n]+' @yel@'+e,0===n?this.Gh[this._s]=r+728:1===n?this.Gh[this._s]=r+542:2===n?this.Gh[this._s]=r+6:3===n?this.Gh[this._s]=r+963:4===n&&(this.Gh[this._s]=r+245),this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++}this.Cs[this._s]='Examine @yel@'+e,this.Gh[this._s]=1607,this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++}else 2==(2&this.Fh)&&(this.Cs[this._s]=this.Uh+' @yel@'+e,this.Gh[this._s]=265,this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++)};lp=(t,i,s,h)=>{if(t===this.Zn||this._s>=400)return;let e=null;this.Zn&&(e=t.name+this.fp(this.Zn.ea,t.ea)+' (level-'+t.ea+')'),1===this.Ch?(this.Cs[this._s]='Use '+this.Oh+' with @whi@'+e,this.Gh[this._s]=367,this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++):1!==this.Ph?(this.Cs[this._s]='Follow @whi@'+e,this.Gh[this._s]=1544,this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++,0===this.ds&&(this.Cs[this._s]='Trade with @whi@'+e,this.Gh[this._s]=1373,this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++),this.$n>0&&(this.Cs[this._s]='Attack @whi@'+e,this.Zn&&this.Zn.ea>=t.ea?this.Gh[this._s]=151:this.Gh[this._s]=2151,this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++),1===this.Kn&&(this.Cs[this._s]='Fight @whi@'+e,this.Gh[this._s]=151,this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++),2===this.Kn&&(this.Cs[this._s]='Duel-with @whi@'+e,this.Gh[this._s]=1101,this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++)):8==(8&this.Fh)&&(this.Cs[this._s]=this.Uh+' @whi@'+e,this.Gh[this._s]=651,this.Hh[this._s]=i,this.Wh[this._s]=s,this.Yh[this._s]=h,this._s++);for(let t=0;t<this._s;t++)if(660===this.Gh[t])return void(this.Cs[t]='Walk here @whi@'+e)};fp=(t,i)=>{const s=t-i;return s<-9?'@red@':s<-6?'@or3@':s<-3?'@or2@':s<0?'@or1@':s>9?'@gre@':s>6?'@gr3@':s>3?'@gr2@':s>0?'@gr1@':'@yel@'};Ac=()=>{if(0===this.ph){this.Cs[0]='Cancel',this.Gh[0]=1252,this._s=1,this.Vm(this.zo),this.Xh=0,this.Xo>8&&this.zo>11&&this.Xo<520&&this.zo<345&&(-1===this.rs?this.ep():this.Xm(c.i.Gr[this.rs],this.Xo,this.zo,8,11,0)),this.Xh!==this.uh&&(this.uh=this.Xh),this.Xh=0,this.Xo>562&&this.zo>231&&this.Xo<752&&this.zo<492&&(-1!==this.Es?this.Xm(c.i.Gr[this.Es],this.Xo,this.zo,562,231,0):-1!==this.Vs[this.Zs]&&this.Xm(c.i.Gr[this.Vs[this.Zs]],this.Xo,this.zo,562,231,0)),this.Xh!==this.dh&&(this.ss=!0,this.dh=this.Xh),this.Xh=0,this.Xo>22&&this.zo>375&&this.Xo<431&&this.zo<471&&(-1===this.Ts?this.Zm(this.Xo-22,this.zo-375):this.Xm(c.i.Gr[this.Ts],this.Xo,this.zo,22,375,0)),-1!==this.Ts&&this.Xh!==this.wh&&(this.hs=!0,this.wh=this.Xh);let t=!1;for(;!t;){t=!0;for(let i=0;i<this._s-1;i++)if(this.Gh[i]<1e3&&this.Gh[i+1]>1e3){const s=this.Cs[i];this.Cs[i]=this.Cs[i+1],this.Cs[i+1]=s;const h=this.Gh[i];this.Gh[i]=this.Gh[i+1],this.Gh[i+1]=h;const e=this.Wh[i];this.Wh[i]=this.Wh[i+1],this.Wh[i+1]=e;const n=this.Yh[i];this.Yh[i]=this.Yh[i+1],this.Yh[i+1]=n;const r=this.Hh[i];this.Hh[i]=this.Hh[i+1],this.Hh[i+1]=r,t=!1}}}};_c=()=>{let t=0;if(this.Mt){let i;t=this.Mt.Cf('Choose Option');for(let s=0;s<this._s;s++)i=this.Mt.Cf(this.Cs[s]),i>t&&(t=i)}t+=8;const i=15*this._s+21;let s,h;this.Wa>8&&this.Ya>11&&this.Wa<520&&this.Ya<345&&(s=this.Wa-(t/2|0)-8,s+t>512?s=512-t:s<0&&(s=0),h=this.Ya-11,h+i>334?h=334-i:h<0&&(h=0),this.ws=!0,this.ys=0,this.ps=s,this.As=h,this.Is=t,this.gs=15*this._s+22),this.Wa>562&&this.Ya>231&&this.Wa<752&&this.Ya<492&&(s=this.Wa-(t/2|0)-562,s<0?s=0:s+t>190&&(s=190-t),h=this.Ya-231,h<0?h=0:h+i>261&&(h=261-i),this.ws=!0,this.ys=1,this.ps=s,this.As=h,this.Is=t,this.gs=15*this._s+22),this.Wa>22&&this.Ya>375&&this.Wa<501&&this.Ya<471&&(s=this.Wa-(t/2|0)-22,s<0?s=0:s+t>479&&(s=479-t),h=this.Ya-375,h<0?h=0:h+i>96&&(h=96-i),this.ws=!0,this.ys=2,this.ps=s,this.As=h,this.Is=t,this.gs=15*this._s+22)};vc=(t,i,s,h,e,n,r,o,l,a,c)=>{const f=this.Xe[this.je];if(!f)return!1;const u=G.i.ln,d=G.i.ln;for(let t=0;t<u;t++)for(let i=0;i<d;i++){const s=G.i.index(t,i);this.Hn[s]=0,this.Wn[s]=99999999}let w=t,y=i;const m=G.i.index(t,i);this.Hn[m]=99,this.Wn[m]=0;let p=0,A=0;this.Bn[p]=t,this.Gn[p++]=i;let I=!1,g=this.Bn.length;const _=f.flags;for(;A!==p;){if(w=this.Bn[A],y=this.Gn[A],A=(A+1)%g,w===s&&y===h){I=!0;break}if(l!==D.i.fu.id){if((l<D.i.up.id||l===D.i.jd.id)&&f.dp(w,y,s,h,l-1,o)){I=!0;break}if(l<D.i.jd.id&&f.wp(w,y,s,h,l-1,o)){I=!0;break}}if(0!==n&&0!==r&&f.yp(w,y,s,h,n,r,a)){I=!0;break}const t=this.Wn[G.i.index(w,y)]+1;let i=G.i.index(w-1,y);w>0&&0===this.Hn[i]&&(_[i]&H.i.eu)===H.i.OPEN&&(this.Bn[p]=w-1,this.Gn[p]=y,p=(p+1)%g,this.Hn[i]=2,this.Wn[i]=t),i=G.i.index(w+1,y),w<u-1&&0===this.Hn[i]&&(_[i]&H.i.nu)===H.i.OPEN&&(this.Bn[p]=w+1,this.Gn[p]=y,p=(p+1)%g,this.Hn[i]=8,this.Wn[i]=t),i=G.i.index(w,y-1),y>0&&0===this.Hn[i]&&(_[i]&H.i.ru)===H.i.OPEN&&(this.Bn[p]=w,this.Gn[p]=y-1,p=(p+1)%g,this.Hn[i]=1,this.Wn[i]=t),i=G.i.index(w,y+1),y<d-1&&0===this.Hn[i]&&(_[i]&H.i.ou)===H.i.OPEN&&(this.Bn[p]=w,this.Gn[p]=y+1,p=(p+1)%g,this.Hn[i]=4,this.Wn[i]=t),i=G.i.index(w-1,y-1),w>0&&y>0&&0===this.Hn[i]&&0==(_[i]&H.i.mp)&&(_[G.i.index(w-1,y)]&H.i.eu)===H.i.OPEN&&(_[G.i.index(w,y-1)]&H.i.ru)===H.i.OPEN&&(this.Bn[p]=w-1,this.Gn[p]=y-1,p=(p+1)%g,this.Hn[i]=3,this.Wn[i]=t),i=G.i.index(w+1,y-1),w<u-1&&y>0&&0===this.Hn[i]&&0==(_[i]&H.i.pp)&&(_[G.i.index(w+1,y)]&H.i.nu)===H.i.OPEN&&(_[G.i.index(w,y-1)]&H.i.ru)===H.i.OPEN&&(this.Bn[p]=w+1,this.Gn[p]=y-1,p=(p+1)%g,this.Hn[i]=9,this.Wn[i]=t),i=G.i.index(w-1,y+1),w>0&&y<d-1&&0===this.Hn[i]&&0==(_[i]&H.i.Ap)&&(_[G.i.index(w-1,y)]&H.i.eu)===H.i.OPEN&&(_[G.i.index(w,y+1)]&H.i.ou)===H.i.OPEN&&(this.Bn[p]=w-1,this.Gn[p]=y+1,p=(p+1)%g,this.Hn[i]=6,this.Wn[i]=t),i=G.i.index(w+1,y+1),w<u-1&&y<d-1&&0===this.Hn[i]&&0==(_[i]&H.i.Ip)&&(_[G.i.index(w+1,y)]&H.i.nu)===H.i.OPEN&&(_[G.i.index(w,y+1)]&H.i.ou)===H.i.OPEN&&(this.Bn[p]=w+1,this.Gn[p]=y+1,p=(p+1)%g,this.Hn[i]=12,this.Wn[i]=t)}if(this.Yn=0,!I){if(c){let t=100;for(let i=1;i<2;i++){for(let e=s-i;e<=s+i;e++)for(let s=h-i;s<=h+i;s++){const i=G.i.index(e,s);e>=0&&s>=0&&e<G.i.ln&&s<G.i.ln&&this.Wn[i]<t&&(t=this.Wn[i],w=e,y=s,this.Yn=1,I=!0)}if(I)break}}if(!I)return!1}A=0,this.Bn[A]=w,this.Gn[A++]=y;let C=this.Hn[G.i.index(w,y)],E=C;for(;w!==t||y!==i;)E!==C&&(C=E,this.Bn[A]=w,this.Gn[A++]=y),0!=(2&E)?w++:0!=(8&E)&&w--,0!=(1&E)?y++:0!=(4&E)&&y--,E=this.Hn[G.i.index(w,y)];if(A>0){g=Math.min(A,25),A--;const t=this.Bn[A],i=this.Gn[A];0===e?(this.J.oc(b.i.gp),this.J.p1(g+g+3)):1===e?(this.J.oc(b.i._p),this.J.p1(g+g+3+14)):2===e&&(this.J.oc(b.i.Cp),this.J.p1(g+g+3)),1===this.wc[5]?this.J.p1(1):this.J.p1(0),this.J.p2(t+this.Ue),this.J.p2(i+this.Be),this.oe=this.Bn[0],this.le=this.Gn[0];for(let s=1;s<g;s++)A--,this.J.p1(this.Bn[A]-t),this.J.p1(this.Gn[A]-i);return!0}return 1!==e};Lm=(t,i)=>{this.bn=0,this.Tn=0,this.Ep(t),this.Tp(t),this.bp(t,i),this.vp(t);for(let t=0;t<this.bn;t++){const i=this.On[t],s=this._n[i];s&&(s.sf!==this.q&&(this._n[i]=null))}if(t.$a!==i)throw new Error(`eek! Error packet size mismatch in getplayer pos:${t.$a} psize:${i}`);for(let t=0;t<this.Cn;t++)if(!this._n[this.En[t]])throw new Error(`eek! ${this.username} null entry in pl list - pos:${t} size:${this.Cn}`)};Ep=t=>{t.Op();if(0!==t.Lp(1)){const i=t.Lp(2);if(0===i)this.vn[this.Tn++]=this.Y;else if(1===i){const i=t.Lp(3);this.Zn?.step(!1,i);1===t.Lp(1)&&(this.vn[this.Tn++]=this.Y)}else if(2===i){const i=t.Lp(3);this.Zn?.step(!0,i);const s=t.Lp(3);this.Zn?.step(!0,s);1===t.Lp(1)&&(this.vn[this.Tn++]=this.Y)}else if(3===i){this.je=t.Lp(2);const i=t.Lp(7),s=t.Lp(7),h=t.Lp(1);this.Zn?.move(1===h,i,s);1===t.Lp(1)&&(this.vn[this.Tn++]=this.Y)}}};Tp=t=>{const i=t.Lp(8);if(i<this.Cn)for(let t=i;t<this.Cn;t++)this.On[this.bn++]=this.En[t];if(i>this.Cn)throw new Error(`eek! ${this.username} Too many players`);this.Cn=0;for(let s=0;s<i;s++){const i=this.En[s],h=this._n[i];if(0===t.Lp(1))this.En[this.Cn++]=i,h&&(h.sf=this.q);else{const s=t.Lp(2);if(0===s)this.En[this.Cn++]=i,h&&(h.sf=this.q),this.vn[this.Tn++]=i;else if(1===s){this.En[this.Cn++]=i,h&&(h.sf=this.q);const s=t.Lp(3);h?.step(!1,s);1===t.Lp(1)&&(this.vn[this.Tn++]=i)}else if(2===s){this.En[this.Cn++]=i,h&&(h.sf=this.q);const s=t.Lp(3);h?.step(!0,s);const e=t.Lp(3);h?.step(!0,e);1===t.Lp(1)&&(this.vn[this.Tn++]=i)}else 3===s&&(this.On[this.bn++]=i)}}};bp=(t,i)=>{let s;for(;t.Sp+10<8*i&&(s=t.Lp(11),2047!==s);){if(!this._n[s]){this._n[s]=new W.i;const t=this.Ln[s];t&&this._n[s]?.read(t)}this.En[this.Cn++]=s;const i=this._n[s];i&&(i.sf=this.q);let h=t.Lp(5);h>15&&(h-=32);let e=t.Lp(5);e>15&&(e-=32);const n=t.Lp(1);this.Zn&&i?.move(1===n,this.Zn.Oc[0]+h,this.Zn.Lc[0]+e);1===t.Lp(1)&&(this.vn[this.Tn++]=s)}t.kp()};vp=t=>{for(let i=0;i<this.Tn;i++){const s=this.vn[i],h=this._n[s];if(!h)continue;let e=t.Gw;128==(128&e)&&(e+=t.Gw<<8),this.Rp(h,s,e,t)}};Rp=(t,i,s,e)=>{if(t.Mp=s,t.xp=this.q,1==(1&s)){const s=e.Gw,h=new Uint8Array(s),n=new I.i(h);e.Ty(s,0,h),this.Ln[i]=n,t.read(n)}if(2==(2&s)){let i=e.Dw;65535===i&&(i=-1),i===t.ym&&(t.Np=0);const s=e.Gw;(-1===i||-1===t.ym||h.i.Gr[i].priority>h.i.Gr[t.ym].priority||0===h.i.Gr[t.ym].priority)&&(t.ym=i,t.Pp=0,t.Dp=0,t.Fp=s,t.Np=0)}if(4==(4&s)&&(t.Up=e.Dw,65535===t.Up&&(t.Up=-1)),8==(8&s)&&(t.gf=e.Jw,t.Ef=0,t.Tf=0,t.bf=150,t.name&&this.bu(2,t.gf,t.name)),16==(16&s)&&(t.kf=e.Gw,t.Sf=e.Gw,t.vf=this.q+400,t.Of=e.Gw,t.Lf=e.Gw),32==(32&s)&&(t.Bp=e.Dw,t.Gp=e.Dw,t.Hp=t.Bp,t.Wp=t.Gp),64==(64&s)){const i=e.Dw,s=e.Gw,h=e.Gw,n=e.$a;if(t.name){const n=R.i.$f(t.name);let r=!1;if(s<=1)for(let t=0;t<this.Ls;t++)if(this.Ss[t]===n){r=!0;break}if(!r&&0===this.ds)try{const n=O.i.Aa(e,h),r=v.i.filter(n);t.gf=r,t.Ef=i>>8,t.Tf=255&i,t.bf=150,s>1?this.bu(1,r,t.name):this.bu(2,r,t.name)}catch(t){}}e.$a=n+h}if(256==(256&s)){t.Yp=e.Dw;const i=e.ho;t.Zp=i>>16,t.Vp=this.q+(65535&i),t.Xp=0,t.zp=0,t.Vp>this.q&&(t.Xp=-1),65535===t.Yp&&(t.Yp=-1)}512==(512&s)&&(t.jp=e.Gw,t.qp=e.Gw,t.$p=e.Gw,t.Kp=e.Gw,t.Jp=e.Dw+this.q,t.Qp=e.Dw+this.q,t.tA=e.Gw,t.pathLength=0,t.Oc[0]=t.$p,t.Lc[0]=t.Kp)};Zw=(t,i)=>{this.bn=0,this.Tn=0,this.iA(t),this.sA(t,i),this.hA(t);for(let t=0;t<this.bn;t++){const i=this.On[t],s=this.Sn[i];s&&(s.sf!==this.q&&(s.type=null,this.Sn[i]=null))}if(t.$a!==i)throw new Error(`eek! ${this.username} size mismatch in getnpcpos - pos:${t.$a} psize:${i}`);for(let t=0;t<this.kn;t++)if(!this.Sn[this.Rn[t]])throw new Error(`eek! ${this.username} null entry in npc list - pos:${t} size:${this.kn}`)};iA=t=>{t.Op();const i=t.Lp(8);if(i<this.kn)for(let t=i;t<this.kn;t++)this.On[this.bn++]=this.Rn[t];if(i>this.kn)throw new Error(`eek! ${this.username} Too many npc!`);this.kn=0;for(let s=0;s<i;s++){const i=this.Rn[s],h=this.Sn[i];if(0===t.Lp(1))this.Rn[this.kn++]=i,h&&(h.sf=this.q);else{const s=t.Lp(2);if(0===s)this.Rn[this.kn++]=i,h&&(h.sf=this.q),this.vn[this.Tn++]=i;else if(1===s){this.Rn[this.kn++]=i,h&&(h.sf=this.q);const s=t.Lp(3);h?.step(!1,s);1===t.Lp(1)&&(this.vn[this.Tn++]=i)}else if(2===s){this.Rn[this.kn++]=i,h&&(h.sf=this.q);const s=t.Lp(3);h?.step(!0,s);const e=t.Lp(3);h?.step(!0,e);1===t.Lp(1)&&(this.vn[this.Tn++]=i)}else 3===s&&(this.On[this.bn++]=i)}}};sA=(t,i)=>{for(;t.Sp+21<8*i;){const i=t.Lp(13);if(8191===i)break;this.Sn[i]||(this.Sn[i]=new Y.i);const s=this.Sn[i];this.Rn[this.kn++]=i,s?(s.sf=this.q,s.type=r.i.get(t.Lp(11)),s.size=s.type.size,s.eA=s.type.nA,s.rA=s.type.oA,s.lA=s.type.aA,s.cA=s.type.fA,s.Yl=s.type.uA):t.Lp(11);let h=t.Lp(5);h>15&&(h-=32);let e=t.Lp(5);e>15&&(e-=32),this.Zn&&s?.move(!1,this.Zn.Oc[0]+h,this.Zn.Lc[0]+e);1===t.Lp(1)&&(this.vn[this.Tn++]=i)}t.kp()};hA=t=>{for(let i=0;i<this.Tn;i++){const s=this.vn[i],e=this.Sn[s];if(!e)continue;const n=t.Gw;if(e.Mp=n,e.xp=this.q,2==(2&n)){let i=t.Dw;65535===i&&(i=-1),i===e.ym&&(e.Np=0);const s=t.Gw;(-1===i||-1===e.ym||h.i.Gr[i].priority>h.i.Gr[e.ym].priority||0===h.i.Gr[e.ym].priority)&&(e.ym=i,e.Pp=0,e.Dp=0,e.Fp=s,e.Np=0)}if(4==(4&n)&&(e.Up=t.Dw,65535===e.Up&&(e.Up=-1)),8==(8&n)&&(e.gf=t.Jw,e.bf=100),16==(16&n)&&(e.kf=t.Gw,e.Sf=t.Gw,e.vf=this.q+400,e.Of=t.Gw,e.Lf=t.Gw),32==(32&n)&&(e.type=r.i.get(t.Dw),e.eA=e.type.nA,e.rA=e.type.oA,e.lA=e.type.aA,e.cA=e.type.fA,e.Yl=e.type.uA),64==(64&n)){e.Yp=t.Dw;const i=t.ho;e.Zp=i>>16,e.Vp=this.q+(65535&i),e.Xp=0,e.zp=0,e.Vp>this.q&&(e.Xp=-1),65535===e.Yp&&(e.Yp=-1)}128==(128&n)&&(e.Bp=t.Dw,e.Gp=t.Dw,e.Hp=e.Bp,e.Wp=e.Gp)}};cc=()=>{for(let t=-1;t<this.Cn;t++){let i;i=-1===t?this.Y:this.En[t];const s=this._n[i];s&&this.dA(s)}if(K.t.F++,K.t.F>1406){K.t.F=0,this.J.oc(b.i.wA),this.J.p1(0);const t=this.J.$a;this.J.p1(162),this.J.p1(22),0==(2*Math.random()|0)&&this.J.p1(84),this.J.p2(31824),this.J.p2(13490),0==(2*Math.random()|0)&&this.J.p1(123),0==(2*Math.random()|0)&&this.J.p1(134),this.J.p1(100),this.J.p1(94),this.J.p2(35521),this.J.Qc(this.J.$a-t)}};dA=t=>{(t.x<128||t.z<128||t.x>=13184||t.z>=13184)&&(t.ym=-1,t.Yp=-1,t.Jp=0,t.Qp=0,t.x=128*t.Oc[0]+64*t.size,t.z=128*t.Lc[0]+64*t.size,t.pathLength=0),t===this.Zn&&(t.x<1536||t.z<1536||t.x>=11776||t.z>=11776)&&(t.ym=-1,t.Yp=-1,t.Jp=0,t.Qp=0,t.x=128*t.Oc[0]+64*t.size,t.z=128*t.Lc[0]+64*t.size,t.pathLength=0),t.Jp>this.q?this.yA(t):t.Qp>=this.q?this.mA(t):this.pA(t),this.AA(t),this.IA(t)};Vc=()=>{if(this.Zn){this.Zn.x>>7===this.oe&&this.Zn.z>>7===this.le&&(this.oe=0);for(let t=-1;t<this.Cn;t++){let i,s;if(-1===t?(i=this.Zn,s=this.Y<<14):(i=this._n[this.En[t]],s=this.En[t]<<14),!i||!i.isVisible())continue;i.u=(K.t.u&&this.Cn>50||this.Cn>200)&&-1!==t&&i.gA===i.Yl;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.i.ln||e<0||e>=G.i.ln))if(!i._A||this.q<i.CA||this.q>=i.EA){if(64==(127&i.x)&&64==(127&i.z)){if(this.nn[h][e]===this.re)continue;this.nn[h][e]=this.re}i.y=this.Kc(this.je,i.x,i.z),this.he?.TA(this.je,i.x,i.y,i.z,null,i,s,i.bA,60,i.vA)}else i.u=!1,i.y=this.Kc(this.je,i.x,i.z),this.he?.OA(this.je,i.x,i.y,i.z,i.LA,i.SA,i.kA,i.RA,null,i,s,i.bA)}}};fc=()=>{for(let t=0;t<this.kn;t++){const i=this.Rn[t],s=this.Sn[i];s&&s.type&&this.dA(s)}};Xc=()=>{for(let t=0;t<this.kn;t++){const i=this.Sn[this.Rn[t]],s=536870912+(this.Rn[t]<<14)|0;if(!i||!i.isVisible())continue;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.i.ln||e<0||e>=G.i.ln)){if(1===i.size&&64==(127&i.x)&&64==(127&i.z)){if(this.nn[h][e]===this.re)continue;this.nn[h][e]=this.re}this.he?.TA(this.je,i.x,this.Kc(this.je,i.x,i.z),i.z,null,i,s,i.bA,64*(i.size-1)+60,i.vA)}}};zc=()=>{for(let t=this.Mn.dw();t;t=this.Mn.ww())if(t.level!==this.je||this.q>t.MA)t.zw();else if(this.q>=t.xA){if(t.target>0){const i=this.Sn[t.target-1];i&&t.NA(i.x,this.Kc(t.level,i.x,i.z)-t.offsetY,i.z,this.q)}if(t.target<0){const i=-t.target-1;let s;s=i===this.zn?this.Zn:this._n[i],s&&t.NA(s.x,this.Kc(t.level,s.x,s.z)-t.offsetY,s.z,this.q)}t.update(this.ne),this.he?.TA(this.je,0|t.x,0|t.y,0|t.z,null,t,-1,t.bA,60,!1)}};jc=()=>{for(let t=this.xn.dw();t;t=this.xn.ww())t.level!==this.je||t.PA?t.zw():this.q>=t.xA&&(t.update(this.ne),t.PA?t.zw():this.he?.TA(t.level,t.x,t.y,t.z,null,t,-1,0,60,!1))};qc=()=>{for(let t=this.Nn.dw();t;t=this.Nn.ww()){let i=!1;if(t.To+=this.ne,-1===t.bo&&(t.bo=0,i=!0),t.DA.delay)for(;t.To>t.DA.delay[t.bo];)if(t.To-=t.DA.delay[t.bo]+1,t.bo++,i=!0,t.bo>=t.DA.vo&&(t.bo-=t.DA.Oo,t.bo<0||t.bo>=t.DA.vo)){t.zw(),i=!1;break}if(i&&this.he){const i=t.Bm,s=t.Fm,h=t.Um;let n=0;if(0===t.FA?n=this.he.lu(i,s,h):1===t.FA?n=this.he.Cw(i,h,s):2===t.FA?n=this.he.Au(i,s,h):3===t.FA&&(n=this.he.su(i,s,h)),this.hn&&0!==n&&(n>>14&32767)===t.index){const r=this.hn[i][s][h],o=this.hn[i][s+1][h],l=this.hn[i][s+1][h+1],a=this.hn[i][s][h+1],c=e.i.get(t.index);let f=-1;if(-1!==t.bo&&t.DA.frames&&(f=t.DA.frames[t.bo]),2===t.FA){const t=this.he.au(i,s,h,n);let e=31&t;const u=t>>6;e===D.i.qd.id&&(e=D.i.jd.id),this.he?.UA(i,s,h,c._l(e,u,r,o,l,a,f))}else if(1===t.FA)this.he?.BA(i,s,h,c._l(D.i.GA.id,0,r,o,l,a,f));else if(0===t.FA){const t=this.he.au(i,s,h,n),e=31&t,u=t>>6;if(e===D.i.uu.id){const t=u+1&3;this.he?.HA(s,h,i,c._l(D.i.uu.id,u+4,r,o,l,a,f),c._l(D.i.uu.id,t,r,o,l,a,f))}else this.he?.WA(i,s,h,c._l(e,u,r,o,l,a,f))}else if(3===t.FA){const t=this.he.au(i,s,h,n)>>6;this.he?.YA(i,s,h,c._l(D.i.$d.id,t,r,o,l,a,f))}}else t.zw()}}};uc=()=>{for(let t=-1;t<this.Cn;t++){let i;i=-1===t?this.Y:this.En[t];const s=this._n[i];s&&s.bf>0&&(s.bf--,0===s.bf&&(s.gf=null))}for(let t=0;t<this.kn;t++){const i=this.Rn[t],s=this.Sn[i];s&&s.bf>0&&(s.bf--,0===s.bf&&(s.gf=null))}};dc=()=>{if(2===this.ee){for(let t=this.Pn.dw();t;t=this.Pn.ww())this.q>=t.MA&&(this.Iw(t.jy,t.x,t.z,t.Gm,t.angle,t.shape,t.Cu),t.zw());K.t.B++,K.t.B>85&&(K.t.B=0,this.J.oc(b.i.ZA))}};yA=t=>{const i=t.Jp-this.q,s=128*t.jp+64*t.size,h=128*t.qp+64*t.size;t.x+=(s-t.x)/i|0,t.z+=(h-t.z)/i|0,t.VA=0,0==t.tA&&(t.XA=1024),1==t.tA&&(t.XA=1536),2==t.tA&&(t.XA=0),3==t.tA&&(t.XA=512)};mA=t=>{if(t.Qp==this.q||-1==t.ym||0!=t.Fp||t.Dp+1>h.i.Gr[t.ym].delay[t.Pp]){const i=t.Qp-t.Jp,s=this.q-t.Jp,h=128*t.jp+64*t.size,e=128*t.qp+64*t.size,n=128*t.$p+64*t.size,r=128*t.Kp+64*t.size;t.x=(h*(i-s)+n*s)/i|0,t.z=(e*(i-s)+r*s)/i|0}t.VA=0,0==t.tA&&(t.XA=1024),1==t.tA&&(t.XA=1536),2==t.tA&&(t.XA=0),3==t.tA&&(t.XA=512),t.bA=t.XA};AA=t=>{if(-1!==t.Up&&t.Up<32768){const i=this.Sn[t.Up];if(i){const s=t.x-i.x,h=t.z-i.z;0===s&&0===h||(t.XA=2047&(325.949*Math.atan2(s,h)|0))}}if(t.Up>=32768){let i=t.Up-32768;i===this.zn&&(i=this.Y);const s=this._n[i];if(s){const i=t.x-s.x,h=t.z-s.z;0===i&&0===h||(t.XA=2047&(325.949*Math.atan2(i,h)|0))}}if((0!==t.Bp||0!==t.Gp)&&(0===t.pathLength||t.VA>0)){const i=t.x-64*(t.Bp-this.Ue-this.Ue),s=t.z-64*(t.Gp-this.Be-this.Be);0===i&&0===s||(t.XA=2047&(325.949*Math.atan2(i,s)|0)),t.Bp=0,t.Gp=0}const i=t.XA-t.bA&2047;if(0!==i&&(i<32||i>2016?t.bA=t.XA:i>1024?t.bA-=32:t.bA+=32,t.bA&=2047,t.gA===t.Yl&&t.bA!==t.XA)){if(-1!==t.zA)return void(t.gA=t.zA);t.gA=t.eA}};IA=t=>{let i;if(t.vA=!1,-1!==t.gA&&(i=h.i.Gr[t.gA],t.jA++,i.delay&&t.qA<i.vo&&t.jA>i.delay[t.qA]&&(t.jA=0,t.qA++),t.qA>=i.vo&&(t.jA=0,t.qA=0)),-1!==t.ym&&0===t.Fp){for(i=h.i.Gr[t.ym],t.Dp++;i.delay&&t.Pp<i.vo&&t.Dp>i.delay[t.Pp];)t.Dp-=i.delay[t.Pp],t.Pp++;t.Pp>=i.vo&&(t.Pp-=i.Oo,t.Np++,t.Np>=i.$A&&(t.ym=-1),(t.Pp<0||t.Pp>=i.vo)&&(t.ym=-1)),t.vA=i.KA}if(t.Fp>0&&t.Fp--,-1!==t.Yp&&this.q>=t.Vp){for(t.Xp<0&&(t.Xp=0),i=l.i.Gr[t.Yp].DA,t.zp++;i&&i.delay&&t.Xp<i.vo&&t.zp>i.delay[t.Xp];)t.zp-=i.delay[t.Xp],t.Xp++;i&&t.Xp>=i.vo&&(t.Xp<0||t.Xp>=i.vo)&&(t.Yp=-1)}};pA=t=>{if(t.gA=t.Yl,0===t.pathLength)return void(t.VA=0);if(-1!==t.ym&&0===t.Fp){if(!h.i.Gr[t.ym].JA)return void t.VA++}const i=t.x,s=t.z,e=128*t.Oc[t.pathLength-1]+64*t.size,n=128*t.Lc[t.pathLength-1]+64*t.size;if(e-i<=256&&e-i>=-256&&n-s<=256&&n-s>=-256){t.XA=i<e?s<n?1280:s>n?1792:1536:i>e?s<n?768:s>n?256:512:s<n?1024:0;let h=t.XA-t.bA&2047;h>1024&&(h-=2048);let r=t.rA;h>=-256&&h<=256?r=t.eA:h>=256&&h<768?r=t.cA:h>=-768&&h<=-256&&(r=t.lA),-1===r&&(r=t.eA),t.gA=r;let o=4;t.bA!==t.XA&&-1===t.Up&&(o=2),t.pathLength>2&&(o=6),t.pathLength>3&&(o=8),t.VA>0&&t.pathLength>1&&(o=8,t.VA--),t.QA[t.pathLength-1]&&(o<<=1),o>=8&&t.gA===t.eA&&-1!==t.tI&&(t.gA=t.tI),i<e?(t.x+=o,t.x>e&&(t.x=e)):i>e&&(t.x-=o,t.x<e&&(t.x=e)),s<n?(t.z+=o,t.z>n&&(t.z=n)):s>n&&(t.z-=o,t.z<n&&(t.z=n)),t.x===e&&t.z===n&&t.pathLength--}else t.x=e,t.z=n};if=()=>{let t=3;if(this.be<310&&this.Zn){let i=this.Ce>>7,s=this.Te>>7;const h=this.Zn.x>>7,e=this.Zn.z>>7;let n,r,o,l;if(this.en&&0!=(4&this.en[this.je][i][s])&&(t=this.je),n=h>i?h-i:i-h,r=e>s?e-s:s-e,n>r)for(o=65536*r/n|0,l=32768;i!==h;)i<h?i++:i>h&&i--,this.en&&0!=(4&this.en[this.je][i][s])&&(t=this.je),l+=o,l>=65536&&(l-=65536,s<e?s++:s>e&&s--,this.en&&0!=(4&this.en[this.je][i][s])&&(t=this.je));else for(o=65536*n/r|0,l=32768;s!==e;)s<e?s++:s>e&&s--,this.en&&0!=(4&this.en[this.je][i][s])&&(t=this.je),l+=o,l>=65536&&(l-=65536,i<h?i++:i>h&&i--,this.en&&0!=(4&this.en[this.je][i][s])&&(t=this.je))}return this.Zn&&this.en&&0!=(4&this.en[this.je][this.Zn.x>>7][this.Zn.z>>7])&&(t=this.je),t};tf=()=>{if(!this.en)return 0;return this.Kc(this.je,this.Ce,this.Te)-this.Ee>=800||0==(4&this.en[this.je][this.Ce>>7][this.Te>>7])?3:this.je};Kc=(t,i,s)=>{if(!this.hn)return 0;const h=Math.min(i>>7,G.i.ln-1),e=Math.min(s>>7,G.i.ln-1);let n=t;t<3&&this.en&&2==(2&this.en[1][h][e])&&(n=t+1);const r=127&i,o=127&s;return(this.hn[n][h][e]*(128-r)+this.hn[n][h+1][e]*r>>7)*(128-o)+(this.hn[n][h][e+1]*(128-r)+this.hn[n][h+1][e+1]*r>>7)*o>>7};$c=(t,i,s,h,e,n)=>{const r=2048-e&2047,o=2048-h&2047;let l,a,c,f=0,u=0,w=n;0!==r&&(l=d.i.sin[r],a=d.i.cos[r],c=u*a-n*l>>16,w=u*l+n*a>>16,u=c),0!==o&&(l=d.i.sin[o],a=d.i.cos[o],c=w*l+f*a>>16,w=w*a-f*l>>16,f=c),this.Ce=t-f,this.Ee=i-u,this.Te=s-w,this.be=e,this.ve=h};xc=()=>{if(!this.Zn)return;const t=this.Zn.x+this.fe,i=this.Zn.z+this.ue;(this.tn-t<-500||this.tn-t>500||this.sn-i<-500||this.sn-i>500)&&(this.tn=t,this.sn=i),this.tn!==t&&(this.tn+=(t-this.tn)/16|0),this.sn!==i&&(this.sn+=(i-this.sn)/16|0),1===this.wc[1]?this.Je+=(-this.Je-24)/2|0:1===this.wc[2]?this.Je+=(24-this.Je)/2|0:this.Je=this.Je/2|0,1===this.wc[3]?this.Qe+=(12-this.Qe)/2|0:1===this.wc[4]?this.Qe+=(-this.Qe-12)/2|0:this.Qe=this.Qe/2|0,this.Ke=2047&(this.Ke+this.Je/2|0),this.$e+=this.Qe/2|0,this.$e<128&&(this.$e=128),this.$e>383&&(this.$e=383);const s=this.tn>>7,h=this.sn>>7,e=this.Kc(this.je,this.tn,this.sn);let n=0;if(this.hn&&s>3&&h>3&&s<100&&h<100)for(let t=s-4;t<=s+4;t++)for(let i=h-4;i<=h+4;i++){let s=this.je;s<3&&this.en&&2==(2&this.en[1][t][i])&&s++;const h=e-this.hn[s][t][i];h>n&&(n=h)}let r=192*n;r>98048&&(r=98048),r<32768&&(r=32768),r>this.Oe?this.Oe+=(r-this.Oe)/24|0:r<this.Oe&&(this.Oe+=(r-this.Oe)/80|0)};Nc=()=>{let t=128*this.mn+64,i=128*this.pn+64,s=this.Kc(this.je,this.mn,this.pn)-this.An;this.Ce<t&&(this.Ce+=this.In+((t-this.Ce)*this.gn/1e3|0),this.Ce>t&&(this.Ce=t)),this.Ce>t&&(this.Ce-=this.In+((this.Ce-t)*this.gn/1e3|0),this.Ce<t&&(this.Ce=t)),this.Ee<s&&(this.Ee+=this.In+((s-this.Ee)*this.gn/1e3|0),this.Ee>s&&(this.Ee=s)),this.Ee>s&&(this.Ee-=this.In+((this.Ee-s)*this.gn/1e3|0),this.Ee<s&&(this.Ee=s)),this.Te<i&&(this.Te+=this.In+((i-this.Te)*this.gn/1e3|0),this.Te>i&&(this.Te=i)),this.Te>i&&(this.Te-=this.In+((this.Te-i)*this.gn/1e3|0),this.Te<i&&(this.Te=i)),t=128*this.fn+64,i=128*this.un+64,s=this.Kc(this.je,this.fn,this.un)-this.dn;const h=t-this.Ce,e=s-this.Ee,n=i-this.Te,r=0|Math.sqrt(h*h+n*n);let o=2047&(325.949*Math.atan2(e,r)|0);const l=2047&(-325.949*Math.atan2(h,n)|0);o<128&&(o=128),o>383&&(o=383),this.be<o&&(this.be+=this.wn+((o-this.be)*this.yn/1e3|0),this.be>o&&(this.be=o)),this.be>o&&(this.be-=this.wn+((this.be-o)*this.yn/1e3|0),this.be<o&&(this.be=o));let a=l-this.ve;a>1024&&(a-=2048),a<-1024&&(a+=2048),a>0&&(this.ve+=this.wn+(a*this.yn/1e3|0),this.ve&=2047),a<0&&(this.ve-=this.wn+(-a*this.yn/1e3|0),this.ve&=2047);let c=l-this.ve;c>1024&&(c-=2048),c<-1024&&(c+=2048),(c<0&&a>0||c>0&&a<0)&&(this.ve=l)};Ay=(t,i)=>{const s=t.Gw;let n=this.Ne+(s>>4&7),r=this.Pe+(7&s);if(i===T.i.py||i===T.i.my){const s=t.Gw,h=s>>2,e=3&s,o=D.i.of(h).Cu;let l;if(l=i===T.i.my?-1:t.Dw,n>=0&&r>=0&&n<G.i.ln&&r<G.i.ln){let t=null;for(let i=this.Un.dw();i;i=this.Un.ww())if(i.jy===this.je&&i.x===n&&i.z===r&&i.Cu===o){t=i;break}if(!t&&this.he){let i=0,s=-1,h=0,e=0;if(o===P.i.gw?i=this.he.lu(this.je,n,r):o===P.i._w?i=this.he.Cw(this.je,r,n):o===P.i.Ew?i=this.he.Au(this.je,n,r):o===P.i.$d&&(i=this.he.su(this.je,n,r)),0!==i){const t=this.he.au(this.je,n,r,i);s=i>>14&32767,h=31&t,e=t>>6}t=new U.i(this.je,o,n,r,0,F.i.du,D.i.fu.id,s,e,h),this.Un.iI(t)}t&&(t.Gm=l,t.shape=h,t.angle=e),this.Iw(this.je,n,r,l,e,h,o)}}else if(i===T.i.yy){const i=t.Gw>>2,s=D.i.of(i).Cu,e=t.Dw;if(n>=0&&r>=0&&n<G.i.ln&&r<G.i.ln&&this.he){let t=0;if(s===P.i.gw?t=this.he.lu(this.je,n,r):s===P.i._w?t=this.he.Cw(this.je,r,n):s===P.i.Ew?t=this.he.Au(this.je,n,r):s===P.i.$d&&(t=this.he.su(this.je,n,r)),0!==t){const i=new V.i(t>>14&32767,this.je,s,n,r,h.i.Gr[e],!1);this.Nn.iI(i)}}}else if(i===T.i.wy){const i=t.Dw,s=t.Dw;if(n>=0&&r>=0&&n<G.i.ln&&r<G.i.ln){const t=new Z.i(i,s);this.Dn[this.je][n][r]||(this.Dn[this.je][n][r]=new k.i),this.Dn[this.je][n][r]?.iI(t),this.fw(n,r)}}else if(i===T.i.uy){const i=t.Dw;if(n>=0&&r>=0&&n<G.i.ln&&r<G.i.ln){const t=this.Dn[this.je][n][r];if(t){for(let s=t.dw();s;s=t.ww())if(s.index===(32767&i)){s.zw();break}t.dw()||(this.Dn[this.je][n][r]=null),this.fw(n,r)}}}else if(i===T.i.ly){let i=n+t.Uw,s=r+t.Uw;const h=t.Vy,e=t.Dw,o=t.Gw,l=t.Gw,a=t.Dw,c=t.Dw,f=t.Gw,u=t.Gw;if(n>=0&&r>=0&&n<G.i.ln&&r<G.i.ln&&i>=0&&s>=0&&i<G.i.ln&&s<G.i.ln){n=128*n+64,r=128*r+64,i=128*i+64,s=128*s+64;const t=new X.i(e,this.je,n,this.Kc(this.je,n,r)-o,r,a+this.q,c+this.q,f,u,h,l);t.NA(i,this.Kc(this.je,i,s)-l,s,a+this.q),this.Mn.iI(t)}}else if(i===T.i.oy){const i=t.Dw,s=t.Gw,h=t.Dw;if(n>=0&&r>=0&&n<G.i.ln&&r<G.i.ln){n=128*n+64,r=128*r+64;const t=new z.i(i,this.je,n,r,this.Kc(this.je,n,r)-s,this.q,h);this.xn.iI(t)}}else if(i===T.i.ny){const i=t.Dw,s=t.Dw,h=t.Dw;if(n>=0&&r>=0&&n<G.i.ln&&r<G.i.ln&&h!==this.zn){const t=new Z.i(i,s);this.Dn[this.je][n][r]||(this.Dn[this.je][n][r]=new k.i),this.Dn[this.je][n][r]?.iI(t),this.fw(n,r)}}else if(i===T.i.ey){const i=t.Gw,s=i>>2,h=3&i,o=D.i.of(s).Cu,l=t.Dw,a=t.Dw,c=t.Dw,f=t.Dw;let u,d=t.Uw,w=t.Uw,y=t.Uw,m=t.Uw;if(u=f===this.zn?this.Zn:this._n[f],u&&this.hn){const t=new B.i(this.je,o,n,r,-1,h,s,a+this.q);this.Pn.iI(t);const i=new B.i(this.je,o,n,r,l,h,s,c+this.q);this.Pn.iI(i);const f=this.hn[this.je][n][r],p=this.hn[this.je][n+1][r],A=this.hn[this.je][n+1][r+1],I=this.hn[this.je][n][r+1],g=e.i.get(l);u.CA=a+this.q,u.EA=c+this.q,u._A=g._l(s,h,f,p,A,I,-1);let _,C=g.width,E=g.length;h!==F.i.wu&&h!==F.i.mu||(C=g.length,E=g.width),u.sI=128*n+64*C,u.hI=128*r+64*E,u.eI=this.Kc(this.je,u.sI,u.hI),d>y&&(_=d,d=y,y=_),w>m&&(_=w,w=m,m=_),u.LA=n+d,u.kA=n+y,u.SA=r+w,u.RA=r+m}}else if(i===T.i.hy){const i=t.Dw,s=t.Dw,h=t.Dw;if(n>=0&&r>=0&&n<G.i.ln&&r<G.i.ln){const t=this.Dn[this.je][n][r];if(t){for(let e=t.dw();e;e=t.ww())if(e.index===(32767&i)&&e.count===s){e.count=h;break}this.fw(n,r)}}}};cf=t=>{if(!K.t.u){if(d.i.nI[17]>=t){const t=d.i.rI[17];if(!t)return;const i=t.width*t.height-1,s=t.width*this.ne*2,h=t.Ia,e=this.Ve;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.Ia=e,this.Ve=h,d.i.oI(17)}if(d.i.nI[24]>=t){const t=d.i.rI[24];if(!t)return;const i=t.width*t.height-1,s=t.width*this.ne*2,h=t.Ia,e=this.Ve;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.Ia=e,this.Ve=h,d.i.oI(24)}}};Ma=()=>{if(!(this.Gt&&this.Ht&&this.Bt&&this.Xt))return;for(let t=10;t<117;t++){(100*Math.random()|0)<50&&(this.Gt[t+32512]=255)}for(let t=0;t<100;t++){const t=2+(124*Math.random()|0)+(128+(128*Math.random()|0)<<7);this.Gt[t]=192}for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Ht[s]=(this.Gt[s-1]+this.Gt[s+1]+this.Gt[s-128]+this.Gt[s+128])/4|0}this.zt+=128,this.zt>this.Bt.length&&(this.zt-=this.Bt.length,this.Pa(this.Nt[12*Math.random()|0]));for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);let h=this.Ht[s+128]-(this.Bt[s+this.zt&this.Bt.length-1]/5|0);h<0&&(h=0),this.Gt[s]=h}for(let t=0;t<255;t++)this.Xt[t]=this.Xt[t+1];if(this.Xt[255]=16*Math.sin(this.q/14)+14*Math.sin(this.q/15)+12*Math.sin(this.q/16)|0,this.jt>0&&(this.jt-=4),this.qt>0&&(this.qt-=4),0===this.jt&&0===this.qt){const t=2e3*Math.random()|0;0===t?this.jt=1024:1===t&&(this.qt=1024)}};lI=(t,i,s)=>{const h=256-i;return((16711935&t)*h+(16711935&s)*i&4278255360)+((65280&t)*h+(65280&s)*i&16711680)>>8};xa=()=>{if(!(this.Wt&&this.Yt&&this.Zt&&this.Vt&&this.Xt&&this.Gt))return;const t=256;if(this.jt>0)for(let t=0;t<256;t++)this.jt>768?this.Wt[t]=this.lI(this.Yt[t],1024-this.jt,this.Zt[t]):this.jt>256?this.Wt[t]=this.Zt[t]:this.Wt[t]=this.lI(this.Zt[t],256-this.jt,this.Yt[t]);else if(this.qt>0)for(let t=0;t<256;t++)this.qt>768?this.Wt[t]=this.lI(this.Yt[t],1024-this.qt,this.Vt[t]):this.qt>256?this.Wt[t]=this.Vt[t]:this.Wt[t]=this.lI(this.Vt[t],256-this.qt,this.Yt[t]);else for(let t=0;t<256;t++)this.Wt[t]=this.Yt[t];for(let t=0;t<33920;t++)this.gt&&this.Dt&&(this.gt.Ia[t]=this.Dt.Ia[t]);let i=0,s=1152;for(let h=1;h<255;h++){let e=(this.Xt[h]*(t-h)/t|0)+22;e<0&&(e=0),i+=e;for(let t=e;t<128;t++){let t=this.Gt[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Wt[t],this.gt){const e=this.gt.Ia[s];this.gt.Ia[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}s+=e}this.gt?.draw(0,0);for(let t=0;t<33920;t++)this._t&&this.Ft&&(this._t.Ia[t]=this.Ft.Ia[t]);i=0,s=1176;for(let h=1;h<255;h++){const e=this.Xt[h]*(t-h)/t|0,n=103-e;s+=e;for(let t=0;t<n;t++){let t=this.Gt[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Wt[t],this._t){const e=this._t.Ia[s];this._t.Ia[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}i+=128-n,s+=128-n-e}this._t?.draw(661,0)}}console.log(`RS2 user client - release #${K.t.h}`),await(0,it.na)(),(new t).aI().then((()=>{})),i()}catch(t){i(t)}}),1)},1995:(t,i,s)=>{s.d(i,{i:()=>a});var h=s(651),e=s(8078),n=s(1519),r=s(9839),o=s(6884),l=s(6121);class a{static getParameter(t){return new URLSearchParams(window.location.search).get(t)??''}static setParameter(t,i){const s=new URL(window.location.toString());s.searchParams.set(t,i),window.history.pushState(null,'',s.toString())}Ff=0;cI=[];fI=0;Wr=null;state=0;uI=20;dI=1;wI=[];Pf=0;yI=0;mI=[];pI=!0;AI=!1;II=50;Ea=!1;sc=0;mc=0;Xo=0;zo=0;Ha=0;Wa=0;Ya=0;wc=[];gI=[];_I=0;CI=0;input=null;EI=!1;TI=!1;bI=!1;time=-1;vI=0;OI=0;LI=0;SI=0;kI=0;RI=0;constructor(t=!1){l.MI.tabIndex=-1,l.ro.fillStyle='black',l.ro.fillRect(0,0,l.MI.width,l.MI.height),this.AI=t,this.AI?this.resize(window.innerWidth,window.innerHeight):this.resize(l.MI.width,l.MI.height)}get width(){return l.MI.width}get height(){return l.MI.height}resize(t,i){l.MI.width=t,l.MI.height=i,this.Wr=new h.i(t,i),e.i.xI()}async aI(){l.MI.addEventListener('resize',(()=>{this.AI&&this.resize(window.innerWidth,window.innerHeight)}),!1),l.MI.onkeydown=this.NI,l.MI.onkeyup=this.DI,l.MI.onmousedown=this.FI,l.MI.onmouseup=this.UI,l.MI.onmouseenter=this.BI,l.MI.onmouseleave=this.GI,l.MI.onmousemove=this.HI,window.onbeforeunload=this.Fr,l.MI.onfocus=this.WI,l.MI.onblur=this.YI,l.MI.ontouchstart=this.ZI,l.MI.ontouchend=this.VI,l.MI.ontouchmove=this.XI,l.MI.oncontextmenu=t=>{t.preventDefault()},window.oncontextmenu=t=>{t.preventDefault()},this.zI&&'low'===a.getParameter('detail')&&(this.II=30),await this.Kr(0,'Loading...'),await this.load();for(let t=0;t<10;t++)this.wI[t]=performance.now();let t,i=0,s=256,h=1,e=0;for(;this.state>=0;){if(this.state>0&&(this.state--,0===this.state))return void this.jI();const r=s,o=h;s=300,h=1,t=performance.now();const l=this.wI[i];if(0===l?(s=r,h=o):t>l&&(s=2560*this.uI/(t-l)|0),s<25?s=25:s>256&&(s=256,h=this.uI-(t-l)/10|0),this.wI[i]=t,i=(i+1)%10,h>1)for(let t=0;t<10;t++)0!==this.wI[t]&&(this.wI[t]+=h);for(h<this.dI&&(h=this.dI),await(0,n.Qr)(h);e<256;)await this.update(),this.Ha=0,this._I=this.CI,e+=s;e&=255,this.uI>0&&(this.Pf=1e3*s/(256*this.uI)|0);const a=performance.now();if(this.pI&&this.refresh(),await this.draw(),this.mI[this.yI]=(performance.now()-a)/1e3,this.yI=(this.yI+1)%this.mI.length,this.II<50){const i=1e3/this.II-(performance.now()-t);i>0&&await(0,n.Qr)(i)}}-1===this.state&&this.jI()}jI(){this.state=-2,this.Fr()}oo(t){this.uI=1e3/t|0}ew(t){this.II=Math.max(Math.min(50,0|t),0)}start(){this.state>=0&&(this.state=0)}stop(){this.state>=0&&(this.state=4e3/this.uI|0)}destroy(){this.state=-1}async load(){}async update(){}Fr(){}async draw(){}refresh(){}async Kr(t,i){const s=this.width,h=this.height;this.pI&&(l.ro.fillStyle='black',l.ro.fillRect(0,0,s,h),this.pI=!1);const e=h/2-18;l.ro.fillStyle='rgb(140, 17, 17)',l.ro.rect((s/2|0)-152,e,304,34),l.ro.fillRect((s/2|0)-150,e+2,3*t,30),l.ro.fillStyle='black',l.ro.fillRect((s/2|0)-150+3*t,e+2,300-3*t,30),l.ro.font='bold 13px helvetica, sans-serif',l.ro.textAlign='center',l.ro.fillStyle='white',l.ro.fillText(i,s/2|0,e+22),await(0,n.Qr)(5)}Va=()=>{let t=-1;return this.CI!==this._I&&(t=this.gI[this._I],this._I=this._I+1&127),t};get ms(){const t=this.mI.length;let i=0;for(let s=0;s<t;s++)i+=this.mI[s];const s=i/t;return s>this.Ff&&(this.Ff=s),this.cI[this.fI]=s,this.fI=(this.fI+1)%250,s}get Df(){return this.cI.reduce(((t,i)=>t+i),0)/250}NI=t=>{const i=t.key;r.qI.includes(i)&&t.preventDefault(),this.sc=0;const s=r.n[i];if(!s)return void console.error(`Unhandled key ${i}`);const h=s.key;let e=s.ch;e<30&&(e=0),37===h?e=1:39===h?e=2:38===h?e=3:40===h?e=4:17===h?e=5:8===h||127===h?e=8:9===h?e=9:10===h?e=10:h>=112&&h<=123?e=h+1008-112:36===h?e=1e3:35===h?e=1001:33===h?e=1002:34===h&&(e=1003),e>0&&e<128&&(this.wc[e]=1),e>4&&(this.gI[this.CI]=e,this.CI=this.CI+1&127),o.i.enabled&&o.i.NI(e)};DI=t=>{const i=t.key;r.qI.includes(i)&&t.preventDefault(),this.sc=0;const s=r.n[i];if(!s)return void console.error(`Unhandled key ${i}`);const h=s.key;let e=s.ch;e<30&&(e=0),37===h?e=1:39===h?e=2:38===h?e=3:40===h?e=4:17===h?e=5:8===h||127===h?e=8:9===h?e=9:10===h?e=10:h>=112&&h<=123?e=h+1008-112:36===h?e=1e3:35===h?e=1001:33===h?e=1002:34===h&&(e=1003),e>0&&e<128&&(this.wc[e]=0),o.i.enabled&&o.i.DI(e)};FI=t=>{if(this.EI=!1,this.$I(t),this.sc=0,this.Wa=this.Xo,this.Ya=this.zo,this.zI){if(this.KI()||this.JI()||this.QI())return this.Ha=1,void(this.mc=1);t.timeStamp>=this.time+500?(this.Ha=2,this.mc=2):(this.Ha=1,this.mc=1)}else 2==t.buttons?(this.Ha=2,this.mc=2):(this.Ha=1,this.mc=1);o.i.enabled&&o.i.FI(this.Wa,this.Ya,t.buttons)};UI=t=>{this.$I(t),this.sc=0,this.mc=0,o.i.enabled&&o.i.UI(t.buttons)};BI=t=>{this.$I(t),o.i.enabled&&o.i.BI()};GI=t=>{this.$I(t),o.i.enabled&&o.i.GI()};HI=t=>{this.$I(t),this.sc=0,o.i.enabled&&o.i.HI(this.Xo,this.zo)};WI=t=>{this.pI=!0,this.refresh(),o.i.enabled&&o.i.WI()};YI=t=>{o.i.enabled&&o.i.YI()};ZI=t=>{if(!this.zI)return;null!==this.input&&(this.input.parentNode?.removeChild(this.input),this.input=null),this.EI=!0;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.HI(new MouseEvent('mousedown',{clientX:s,clientY:h})),this.vI=this.kI=this.LI=0|i.screenX,this.OI=this.RI=this.SI=0|i.screenY,this.time=t.timeStamp,this.TI=this.tg(),this.bI=this.ig()};VI=t=>{if(!this.zI||!this.EI)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;if(this.HI(new MouseEvent('mousedown',{clientX:s,clientY:h})),this.kI=0|i.screenX,this.RI=0|i.screenY,this.DI(new KeyboardEvent('ArrowLeft',{key:'ArrowLeft',code:'ArrowLeft'})),this.DI(new KeyboardEvent('ArrowUp',{key:'ArrowUp',code:'ArrowUp'})),this.DI(new KeyboardEvent('ArrowRight',{key:'ArrowRight',code:'ArrowRight'})),this.DI(new KeyboardEvent('ArrowDown',{key:'ArrowDown',code:'ArrowDown'})),this.TI&&!this.tg())return void(this.EI=!1);if(this.bI&&!this.ig())return void(this.EI=!1);if(this.KI()||this.sg()||this.JI()||this.QI())return null!==this.input&&(this.input.parentNode?.contains(this.input)&&this.input.parentNode?.removeChild(this.input),this.input=null),this.input=document.createElement('input'),this.JI()?(this.input.setAttribute('id','username'),this.input.setAttribute('placeholder','Username')):this.QI()&&(this.input.setAttribute('id','password'),this.input.setAttribute('placeholder','Password')),this.input.setAttribute('type',this.QI()?'password':'text'),this.input.setAttribute('autofocus','autofocus'),this.input.setAttribute('style',`position: fixed; left: ${s}px; top: ${h}px; width: 1px; height: 1px; opacity: 0;`),document.body.appendChild(this.input),this.input.focus(),this.input.click(),this.input.onkeydown=t=>{this.NI(t)},this.input.onkeyup=t=>{this.DI(t)},this.input.onfocus=t=>{this.input?.parentNode?.removeChild(this.input),this.input=null},void(this.EI=!1);const e=t.timeStamp>=this.time+500,n=Math.abs(this.vI-this.kI)>16||Math.abs(this.OI-this.RI)>16;e&&!n?(this.EI=!0,this.FI(new MouseEvent('e2',{buttons:2}))):(this.mc=0,this.EI=!1)};XI=t=>{if(!this.zI||!this.EI)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.HI(new MouseEvent('mousedown',{clientX:s,clientY:h})),this.kI=0|i.screenX,this.RI=0|i.screenY,this.TI&&-1===this.zr()?(this.LI-this.kI>0?this.rotate(2):this.LI-this.kI<0&&this.rotate(0),this.SI-this.RI>0?this.rotate(3):this.SI-this.RI<0&&this.rotate(1)):(this.bI||-1!==this.zr())&&this.FI(new MouseEvent('e2',{buttons:1})),this.LI=this.kI,this.SI=this.RI};get zI(){return['Android','webOS','iPhone','iPad','iPod','BlackBerry','Windows Phone'].some((t=>navigator.userAgent.includes(t)))}tg(){return this.Ea&&this.Xo>=8&&this.Xo<=520&&this.zo>=11&&this.zo<=345}KI(){return this.Ea&&-1==this.Xr()&&!this.Zr()&&!this.Vr()&&this.Xo>=11&&this.Xo<=506&&this.zo>=449&&this.zo<=482}sg(){return this.Ea&&(this.Zr()||this.Vr())&&this.Xo>=11&&this.Xo<=506&&this.zo>=383&&this.zo<=482}ig(){return this.Ea&&this.Xo>=562&&this.Xo<=752&&this.zo>=231&&this.zo<=492}JI(){return!this.Ea&&2==this.Yr()&&this.Xo>=301&&this.Xo<=562&&this.zo>=262&&this.zo<=279}QI(){return!this.Ea&&2==this.Yr()&&this.Xo>=301&&this.Xo<=562&&this.zo>=279&&this.zo<=296}rotate=t=>{0==t?(this.DI(new KeyboardEvent('ArrowRight',{key:'ArrowRight',code:'ArrowRight'})),this.NI(new KeyboardEvent('ArrowLeft',{key:'ArrowLeft',code:'ArrowLeft'}))):1==t?(this.DI(new KeyboardEvent('ArrowDown',{key:'ArrowDown',code:'ArrowDown'})),this.NI(new KeyboardEvent('ArrowUp',{key:'ArrowUp',code:'ArrowUp'}))):2==t?(this.DI(new KeyboardEvent('ArrowLeft',{key:'ArrowLeft',code:'ArrowLeft'})),this.NI(new KeyboardEvent('ArrowRight',{key:'ArrowRight',code:'ArrowRight'}))):3==t&&(this.DI(new KeyboardEvent('ArrowUp',{key:'ArrowUp',code:'ArrowUp'})),this.NI(new KeyboardEvent('ArrowDown',{key:'ArrowDown',code:'ArrowDown'})))};hg=()=>null!=document.fullscreenElement;$I=t=>{if(this.hg()){const i=t.target.getBoundingClientRect(),s=window.innerHeight/l.MI.height,h=(window.innerWidth-l.MI.width*s)/2;this.Xo=0|this.eg(t.clientX-i.left-h,0,l.MI.width*s,0,789),this.zo=0|this.eg(t.clientY-i.top,0,l.MI.height*s,0,532)}else{const i=l.MI.getBoundingClientRect(),s=l.MI.width/i.width,h=l.MI.height/i.height;this.Xo=(t.clientX-i.left)*s|0,this.zo=(t.clientY-i.top)*h|0}this.Xo<0&&(this.Xo=0),this.zo<0&&(this.zo=0),this.Xo>789&&(this.Xo=789),this.zo>532&&(this.zo=532)};eg=(t,i,s,h,e)=>(t-i)*(e-h)/(s-i)+h}},6884:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(2383);class e{static enabled=!1;static ng=null;static rg=null;static og=0;static lg=0;static ag=0;static cg=0;static fg=0;static Ly=()=>{this.ng=h.i.K(1),this.rg=null,this.og=performance.now(),this.enabled=!0};static ic=()=>{this.enabled=!1,this.ng=null};static flush=()=>{let t=null;return this.rg&&this.enabled&&(t=this.rg),this.rg=null,t};static stop=()=>{let t=null;return this.ng&&this.ng.$a>0&&this.enabled&&(t=this.ng),this.ic(),t};static FI=(t,i,s)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;this.lg++;const h=performance.now();let e=(h-this.og)/10|0;e>250&&(e=250),this.og=h,this.ug(5),1===s?this.ng?.p1(1):this.ng?.p1(2),this.ng?.p1(e),this.ng?.p3(t+(i<<10))};static UI=t=>{if(!this.enabled)return;this.lg++;const i=performance.now();let s=(i-this.og)/10|0;s>250&&(s=250),this.og=i,this.ug(2),1===t?this.ng?.p1(3):this.ng?.p1(4),this.ng?.p1(s)};static HI=(t,i)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;const s=performance.now();if(s-this.ag>=50){this.ag=s,this.lg++;let h=(s-this.og)/10|0;h>250&&(h=250),this.og=s,t-this.cg<8&&t-this.cg>=-8&&i-this.fg<8&&i-this.fg>=-8?(this.ug(3),this.ng?.p1(5),this.ng?.p1(h),this.ng?.p1(t+(i-this.fg+8<<4)+8-this.cg)):t-this.cg<128&&t-this.cg>=-128&&i-this.fg<128&&i-this.fg>=-128?(this.ug(4),this.ng?.p1(6),this.ng?.p1(h),this.ng?.p1(t+128-this.cg),this.ng?.p1(i+128-this.fg)):(this.ug(5),this.ng?.p1(7),this.ng?.p1(h),this.ng?.p3(t+(i<<10))),this.cg=t,this.fg=i}};static NI=t=>{if(!this.enabled)return;this.lg++;const i=performance.now();let s=(i-this.og)/10|0;s>250&&(s=250),this.og=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.ug(3),this.ng?.p1(8),this.ng?.p1(s),this.ng?.p1(t)};static DI=t=>{if(!this.enabled)return;this.lg++;const i=performance.now();let s=(i-this.og)/10|0;s>250&&(s=250),this.og=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.ug(3),this.ng?.p1(9),this.ng?.p1(s),this.ng?.p1(t)};static WI=()=>{if(!this.enabled)return;this.lg++;const t=performance.now();let i=(t-this.og)/10|0;i>250&&(i=250),this.og=t,this.ug(2),this.ng?.p1(10),this.ng?.p1(i)};static YI=()=>{if(!this.enabled)return;this.lg++;const t=performance.now();let i=(t-this.og)/10|0;i>250&&(i=250),this.og=t,this.ug(2),this.ng?.p1(11),this.ng?.p1(i)};static BI=()=>{if(!this.enabled)return;this.lg++;const t=performance.now();let i=(t-this.og)/10|0;i>250&&(i=250),this.og=t,this.ug(2),this.ng?.p1(12),this.ng?.p1(i)};static GI=()=>{if(!this.enabled)return;this.lg++;const t=performance.now();let i=(t-this.og)/10|0;i>250&&(i=250),this.og=t,this.ug(2),this.ng?.p1(13),this.ng?.p1(i)};static ug=t=>{if(this.ng&&this.ng.$a+t>=500){const t=this.ng;this.ng=h.i.K(1),this.rg=t}}}},9839:(t,i,s)=>{s.d(i,{n:()=>h,qI:()=>e});const h={dg:{key:8,ch:8},wg:{key:10,ch:10},yg:{key:16,ch:65535},mg:{key:27,ch:27},pg:{key:9,ch:9},Ag:{key:20,ch:65535},' ':{key:32,ch:32},Ig:{key:17,ch:65535},gg:{key:18,ch:65535},_g:{key:524,ch:65535},Cg:{key:37,ch:65535},Eg:{key:39,ch:65535},Tg:{key:38,ch:65535},bg:{key:40,ch:65535},vg:{key:155,ch:65535},Og:{key:36,ch:65535},Lg:{key:33,ch:65535},Sg:{key:127,ch:127},kg:{key:35,ch:65535},Rg:{key:34,ch:65535},'`':{key:192,ch:96},'~':{key:192,ch:126},'!':{key:49,ch:33},'@':{key:50,ch:64},'#':{key:51,ch:35},Mg:{key:52,ch:36},'%':{key:53,ch:37},'^':{key:54,ch:94},'&':{key:55,ch:38},'*':{key:56,ch:42},'(':{key:57,ch:40},')':{key:48,ch:41},'-':{key:45,ch:45},xg:{key:45,ch:95},'=':{key:61,ch:61},'+':{key:61,ch:43},'[':{key:91,ch:91},'{':{key:91,ch:123},']':{key:93,ch:93},'}':{key:93,ch:125},'\\':{key:92,ch:92},'|':{key:92,ch:124},';':{key:59,ch:59},':':{key:59,ch:58},"'":{key:222,ch:39},'"':{key:222,ch:34},',':{key:44,ch:44},'<':{key:44,ch:60},'.':{key:46,ch:46},'>':{key:46,ch:62},'/':{key:47,ch:47},'?':{key:47,ch:63},Ng:{key:112,ch:65535},Pg:{key:113,ch:65535},Dg:{key:114,ch:65535},Fg:{key:115,ch:65535},Ug:{key:116,ch:65535},Bg:{key:117,ch:65535},Gg:{key:118,ch:65535},Hg:{key:119,ch:65535},Wg:{key:120,ch:65535},Yg:{key:121,ch:65535},Zg:{key:122,ch:65535},Vg:{key:123,ch:65535},0:{key:48,ch:48},1:{key:49,ch:49},2:{key:50,ch:50},3:{key:51,ch:51},4:{key:52,ch:52},5:{key:53,ch:53},6:{key:54,ch:54},7:{key:55,ch:55},8:{key:56,ch:56},9:{key:57,ch:57},a:{key:65,ch:97},b:{key:66,ch:98},c:{key:67,ch:99},d:{key:68,ch:100},e:{key:69,ch:101},f:{key:70,ch:102},g:{key:71,ch:103},Xg:{key:72,ch:104},zg:{key:73,ch:105},jg:{key:74,ch:106},qg:{key:75,ch:107},$g:{key:76,ch:108},Kg:{key:77,ch:109},n:{key:78,ch:110},Jg:{key:79,ch:111},Qg:{key:80,ch:112},t_:{key:81,ch:113},r:{key:82,ch:114},s:{key:83,ch:115},i_:{key:84,ch:116},s_:{key:85,ch:117},qI:{key:86,ch:118},w:{key:87,ch:119},x:{key:88,ch:120},y:{key:89,ch:121},z:{key:90,ch:122},h_:{key:65,ch:65},e_:{key:66,ch:66},n_:{key:67,ch:67},r_:{key:68,ch:68},E:{key:69,ch:69},o_:{key:70,ch:70},l_:{key:71,ch:71},a_:{key:72,ch:72},c_:{key:73,ch:73},f_:{key:74,ch:74},t:{key:75,ch:75},u_:{key:76,ch:76},d_:{key:77,ch:77},w_:{key:78,ch:78},na:{key:79,ch:79},y_:{key:80,ch:80},Q:{key:81,ch:81},m_:{key:82,ch:82},p_:{key:83,ch:83},A_:{key:84,ch:84},I_:{key:85,ch:85},g_:{key:86,ch:86},__:{key:87,ch:87},C_:{key:88,ch:88},E_:{key:89,ch:89},i:{key:90,ch:90}},e=['Tab','F1','F2','F3','F4','F5','F6','F7','F8','F9','F10','ArrowLeft','ArrowRight','ArrowUp','ArrowDown']},2790:(t,i,s)=>{s.d(i,{i:()=>c});var h=s(2383),e=s(9178),n=s(5542),r=s(6542),o=s(8934),l=s(9345),a=s(2991);class c{static Gr=[];static T_=null;static Hr=null;static Do=0;static b_=1;static Uo=2;static il=3;static hl=4;static wl=5;static pl=6;static bl=7;static Km=1;static tp=2;static ip=3;static sp=4;static hp=5;static ll=6;static Ll=1;static Sl=100;static kl=101;static Rl=200;static xd=201;static Nd=202;static Ml=203;static Pd=205;static Ud=300;static v_=301;static O_=302;static L_=303;static S_=304;static k_=305;static R_=306;static M_=307;static x_=308;static N_=309;static P_=310;static D_=311;static F_=312;static Bd=313;static Gd=314;static U_=315;static B_=316;static G_=317;static H_=318;static W_=319;static Y_=320;static Z_=321;static V_=322;static Hd=323;static zl=324;static jl=325;static Wd=326;static Ul=327;static xl=401;static Nl=500;static Dd=501;static Fd=502;static Fl=503;static ql=600;static Zd=601;static X_=602;static z_=603;static j_=604;static q_=605;static K_=606;static J_=607;static Q_=608;static tC=609;static iC=610;static sC=611;static Vd=612;static $l=613;static Kl=650;static ta=651;static ia=652;static sa=653;static ha=654;static Jl=655;static Aa=(t,i,s)=>{this.T_=new n.i(5e4),this.Hr=new n.i(5e4);const e=new h.i(t.read('data'));let r=-1;for(e.$a+=2;e.$a<e.data.length;){let t=e.Dw;65535===t&&(r=e.Dw,t=e.Dw);const h=this.Gr[t]=new c;h.id=t,h.Cu=r,h.type=e.Gw,h.ol=e.Gw,h.No=e.Dw,h.width=e.Dw,h.height=e.Dw,h.zm=e.Gw,0===h.zm?h.zm=-1:h.zm=(h.zm-1<<8)+e.Gw;const n=e.Gw;if(n>0){h.ao=new Uint8Array(n),h.fo=new Uint16Array(n);for(let t=0;t<n;t++)h.ao[t]=e.Gw,h.fo[t]=e.Dw}const o=e.Gw;if(o>0){h.scripts=new l.to(o,null);for(let t=0;t<o;t++){const i=e.Dw,s=new Uint16Array(i);h.scripts[t]=s;for(let t=0;t<i;t++)s[t]=e.Dw}}if(h.type===c.Do){h.scroll=e.Dw,h.hide=1===e.Gw;const t=e.Gw;h._o=new Array(t),h.ko=new Array(t),h.Ro=new Array(t);for(let i=0;i<t;i++)h._o[i]=e.Dw,h.ko[i]=e.Vy,h.Ro[i]=e.Vy}if(h.type===c.b_&&(e.$a+=3),h.type===c.Uo){h.Ho=new Int32Array(h.width*h.height),h.Wo=new Int32Array(h.width*h.height),h.draggable=1===e.Gw,h.jm=1===e.Gw,h.$m=1===e.Gw,h.Yo=e.Gw,h.Zo=e.Gw,h.Bo=new Int16Array(20),h.Go=new Int16Array(20),h.tl=new l.to(20,null);for(let t=0;t<20;t++)if(1===e.Gw){h.Bo[t]=e.Vy,h.Go[t]=e.Vy;const s=e.Jw;if(s.length>0){const e=s.lastIndexOf(',');h.tl[t]=this.hC(i,s.substring(0,e),parseInt(s.substring(e+1),10))}}h.qm=new l.to(5,null);for(let t=0;t<5;t++){const i=e.Jw;h.qm[t]=i,0===i.length&&(h.qm[t]=null)}}if(h.type===c.il&&(h.fill=1===e.Gw),h.type===c.hl||h.type===c.b_){h.cl=1===e.Gw;const t=e.Gw;s&&(h.font=s[t]),h.ul=1===e.Gw}if(h.type===c.hl&&(h.text=e.Jw,h.rl=e.Jw),h.type!==c.b_&&h.type!==c.il&&h.type!==c.hl||(h.sl=e.ho),h.type!==c.il&&h.type!==c.hl||(h.nl=e.ho,h.el=e.ho),h.type===c.wl){const t=e.Jw;if(t.length>0){const s=t.lastIndexOf(',');h.ml=this.hC(i,t.substring(0,s),parseInt(t.substring(s+1),10))}const s=e.Jw;if(s.length>0){const t=s.lastIndexOf(',');h.yl=this.hC(i,s.substring(0,t),parseInt(s.substring(t+1),10))}}if(h.type===c.pl){const t=e.Gw;0!==t&&(h.model=this._l((t-1<<8)+e.Gw));const i=e.Gw;0!==i&&(h.eC=this._l((i-1<<8)+e.Gw)),h.Co=e.Gw,0===h.Co?h.Co=-1:h.Co=(h.Co-1<<8)+e.Gw,h.Eo=e.Gw,0===h.Eo?h.Eo=-1:h.Eo=(h.Eo-1<<8)+e.Gw,h.zoom=e.Dw,h.gl=e.Dw,h.Tl=e.Dw}if(h.type===c.bl){h.Ho=new Int32Array(h.width*h.height),h.Wo=new Int32Array(h.width*h.height),h.cl=1===e.Gw;const t=e.Gw;s&&(h.font=s[t]),h.ul=1===e.Gw,h.sl=e.ho,h.Yo=e.Vy,h.Zo=e.Vy,h.jm=1===e.Gw,h.qm=new l.to(5,null);for(let t=0;t<5;t++){const i=e.Jw;h.qm[t]=i,0===i.length&&(h.qm[t]=null)}}h.ol!==c.tp&&h.type!==c.Uo||(h.ld=e.Jw,h.action=e.Jw,h.od=e.Dw),h.ol!==c.Km&&h.ol!==c.sp&&h.ol!==c.hp&&h.ol!==c.ll||(h.Qm=e.Jw,0===h.Qm.length&&(h.ol===c.Km?h.Qm='Ok':h.ol===c.sp||h.ol===c.hp?h.Qm='Select':h.ol===c.ll&&(h.Qm='Continue')))}this.T_=null,this.Hr=null};static hC=(t,i,s)=>{const h=o.i.nC(i)<<8n|BigInt(s);if(this.T_){const t=this.T_.get(h);if(t)return t}let e;try{e=r.i.oa(t,i,s),this.T_?.put(h,e)}catch(t){return null}return e};static _l=t=>{if(this.Hr){const i=this.Hr.get(BigInt(t));if(i)return i}const i=e.i.model(t);return this.Hr?.put(BigInt(t),i),i};id=-1;Cu=-1;type=-1;ol=-1;No=0;width=0;height=0;zm=-1;ao=null;fo=null;scripts=null;scroll=0;hide=!1;draggable=!1;jm=!1;$m=!1;Yo=0;Zo=0;Bo=null;Go=null;tl=null;qm=null;fill=!1;cl=!1;font=null;ul=!1;text=null;rl=null;sl=0;nl=0;el=0;ml=null;yl=null;model=null;eC=null;Co=-1;Eo=-1;zoom=0;gl=0;Tl=0;ld=null;action=null;od=-1;Qm=null;_o=null;ko=null;Ro=null;x=0;y=0;Fo=0;Ho=null;Wo=null;bo=0;To=0;_l=(t,i,s)=>{let h=this.model;if(s&&(h=this.eC),!h)return null;if(-1===t&&-1===i&&!h.rC)return h;const n=e.i.oC(h,!0,!0,!1);return-1===t&&-1===i||n.Zl(),-1!==t&&n.Vl(t),-1!==i&&n.Vl(i),n.Xl(64,768,-50,-10,-50,!0),n};lC(){if(this.Cu===this.id)return this.x;let t=c.Gr[this.Cu];if(!t._o||!t.ko||!t.Ro)return this.x;let i=t._o.indexOf(this.id);if(-1===i)return this.x;let s=t.ko[i];for(;t.Cu!==t.id;){const h=c.Gr[t.Cu];h._o&&h.ko&&h.Ro&&(i=h._o.indexOf(t.id),-1!==i&&(s+=h.ko[i])),t=h}return s}aC(){if(this.Cu===this.id)return this.y;let t=c.Gr[this.Cu];if(!t._o||!t.ko||!t.Ro)return this.y;let i=t._o.indexOf(this.id);if(-1===i)return this.y;let s=t.Ro[i];for(;t.Cu!==t.id;){const h=c.Gr[t.Cu];h._o&&h.ko&&h.Ro&&(i=h._o.indexOf(t.id),-1!==i&&(s+=h.Ro[i])),t=h}return s}outline(t){const i=this.lC(),s=this.aC();a.i.Mo(i,s,this.width,this.height,t)}move(t,i){if(this.Cu===this.id)return;this.x=0,this.y=0;const s=c.Gr[this.Cu];if(s._o&&s.ko&&s.Ro){const h=s._o.indexOf(this.id);-1!==h&&(s.ko[h]=t,s.Ro[h]=i)}}delete(){if(this.Cu===this.id)return;const t=c.Gr[this.Cu];if(t._o&&t.ko&&t.Ro){const i=t._o.indexOf(this.id);-1!==i&&(t._o.splice(i,1),t.ko.splice(i,1),t.Ro.splice(i,1))}}}},8107:(t,i,s)=>{s.d(i,{r:()=>h});class h{id=-1;cC=null;fC=(t,i)=>{for(this.id=t;;){const s=i.Gw;if(0===s)break;this.decode(t,s,i)}}}},8056:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(2383),e=s(8107);class n extends e.r{static count=0;static Gr=[];static Aa=t=>{const i=new h.i(t.read('flo.dat'));this.count=i.Dw;for(let t=0;t<this.count;t++)this.Gr[t]=new n,this.Gr[t].fC(t,i)};static uC=(t,i,s)=>(s>179&&(i=i/2|0),s>192&&(i=i/2|0),s>217&&(i=i/2|0),s>243&&(i=i/2|0),((t/4|0)<<10)+((i/32|0)<<7)+(s/2|0));static dC=(t,i)=>-1===t?12345678:((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);static wC=(t,i)=>-2===t?12345678:-1===t?(i<0?i=0:i>127&&(i=127),127-i):((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);yC=0;texture=-1;mC=!1;pC=!0;name=null;AC=0;IC=0;gC=0;_C=0;CC=0;EC=0;decode=(t,i,s)=>{1===i?(this.yC=s.TC,this.setColor(this.yC)):2===i?this.texture=s.Gw:3===i?this.mC=!0:5===i?this.pC=!1:6===i?this.name=s.Jw:console.log('Error unrecognised config code: ',i)};setColor=t=>{const i=(t>>16&255)/256,s=(t>>8&255)/256,h=(255&t)/256;let e=i;s<i&&(e=s),h<e&&(e=h);let r=i;s>i&&(r=s),h>r&&(r=h);let o=0,l=0;const a=(e+r)/2;e!==r&&(a<.5&&(l=(r-e)/(r+e)),a>=.5&&(l=(r-e)/(2-r-e)),i===r?o=(s-h)/(r-e):s===r?o=(h-i)/(r-e)+2:h===r&&(o=(i-s)/(r-e)+4)),o/=6,this.AC=256*o|0,this.IC=256*l|0,this.gC=256*a|0,this.IC<0?this.IC=0:this.IC>255&&(this.IC=255),this.gC<0?this.gC=0:this.gC>255&&(this.gC=255),this._C=a>.5?(1-a)*l*512|0:a*l*512|0,this._C<1&&(this._C=1),this.CC=o*this._C|0;let c=this.AC+(16*Math.random()|0)-8;c<0?c=0:c>255&&(c=255);let f=this.IC+(48*Math.random()|0)-24;f<0?f=0:f>255&&(f=255);let u=this.gC+(48*Math.random()|0)-24;u<0?u=0:u>255&&(u=255),this.EC=n.uC(c,f,u)}}},8809:(t,i,s)=>{s.d(i,{i:()=>o});var h=s(2383),e=s(8107),n=s(9178),r=s(9345);class o extends e.r{static count=0;static Gr=[];static Aa=t=>{const i=new h.i(t.read('idk.dat'));this.count=i.Dw;for(let t=0;t<this.count;t++)this.Gr[t]=new o,this.Gr[t].fC(t,i)};type=-1;bC=null;vC=new Int32Array(5).fill(-1);OC=new Int32Array(6);LC=new Int32Array(6);disable=!1;decode=(t,i,s)=>{if(1===i)this.type=s.Gw;else if(2===i){const t=s.Gw;this.bC=new Int32Array(t);for(let i=0;i<t;i++)this.bC[i]=s.Dw}else if(3===i)this.disable=!0;else if(i>=40&&i<50)this.OC[i-40]=s.Dw;else if(i>=50&&i<60)this.LC[i-50]=s.Dw;else{if(!(i>=60&&i<70))throw new Error(`Unrecognized idk config code: ${i}`);this.vC[i-60]=s.Dw}};_l=()=>{if(!this.bC)return null;const t=new r.to(this.bC.length,null);for(let i=0;i<this.bC.length;i++)t[i]=n.i.model(this.bC[i]);let i;i=1===t.length?t[0]:n.i.Bl(t,t.length);for(let t=0;t<6&&0!==this.OC[t];t++)i?.Gl(this.OC[t],this.LC[t]);return i};qw=()=>{let t=0;const i=new r.to(5,null);for(let s=0;s<5;s++)-1!==this.vC[s]&&(i[t++]=n.i.model(this.vC[s]));const s=n.i.Bl(i,t);for(let t=0;t<6&&0!==this.OC[t];t++)s.Gl(this.OC[t],this.LC[t]);return s}}},7958:(t,i,s)=>{s.d(i,{i:()=>c});var h=s(8107),e=s(2383),n=s(5542),r=s(9178),o=s(1908),l=s(5534),a=s(9345);class c extends h.r{static count=0;static cache=null;static SC=null;static kC=null;static RC=0;static df=new n.i(500);static wf=new n.i(30);static Aa=t=>{this.SC=new e.i(t.read('loc.dat'));const i=new e.i(t.read('loc.idx'));this.count=i.Dw,this.kC=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.kC[t]=s,s+=i.Dw;this.cache=new a.to(10,null);for(let t=0;t<10;t++)this.cache[t]=new c};static get=t=>{if(!this.cache||!this.kC||!this.SC)throw new Error('LocType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.index===t)return s}this.RC=(this.RC+1)%10;const i=this.cache[this.RC];return this.SC.$a=this.kC[t],i.index=t,i.reset(),i.fC(t,this.SC),i.MC||(i.MC=new Int32Array(1)),-1===i.xC&&i.MC&&(i.active=i.MC.length>0&&i.MC[0]===o.i.jd.id,i.rp&&(i.active=!0)),i};static Fr=()=>{this.df=null,this.wf=null,this.kC=null,this.cache=null,this.SC=null};index=-1;bC=null;MC=null;name=null;Yu=null;OC=null;LC=null;width=1;length=1;bw=!0;Ow=!0;active=!1;xC=-1;NC=!1;PC=!1;pC=!1;Co=-1;DC=!1;FC=16;UC=0;BC=0;rp=null;hu=-1;cu=-1;GC=!1;HC=!0;WC=128;YC=128;ZC=128;Kd=0;VC=0;XC=0;zC=0;jC=!1;decode=(t,i,s)=>{if(1===i){const t=s.Gw;this.bC=new Int32Array(t),this.MC=new Int32Array(t);for(let i=0;i<t;i++)this.bC[i]=s.Dw,this.MC[i]=s.Gw}else if(2===i)this.name=s.Jw;else if(3===i)this.Yu=s.Jw;else if(14===i)this.width=s.Gw;else if(15===i)this.length=s.Gw;else if(17===i)this.bw=!1;else if(18===i)this.Ow=!1;else if(19===i)this.xC=s.Gw,1===this.xC&&(this.active=!0);else if(21===i)this.NC=!0;else if(22===i)this.PC=!0;else if(23===i)this.pC=!0;else if(24===i)this.Co=s.Dw,65535===this.Co&&(this.Co=-1);else if(25===i)this.DC=!0;else if(28===i)this.FC=s.Gw;else if(29===i)this.UC=s.Uw;else if(39===i)this.BC=s.Uw;else if(i>=30&&i<39)this.rp||(this.rp=new a.to(5,null)),this.rp[i-30]=s.Jw,'hidden'===this.rp[i-30]?.toLowerCase()&&(this.rp[i-30]=null);else if(40===i){const t=s.Gw;this.OC=new Uint16Array(t),this.LC=new Uint16Array(t);for(let i=0;i<t;i++)this.OC[i]=s.Dw,this.LC[i]=s.Dw}else 60===i?this.hu=s.Dw:62===i?this.GC=!0:64===i?this.HC=!1:65===i?this.WC=s.Dw:66===i?this.YC=s.Dw:67===i?this.ZC=s.Dw:68===i?this.cu=s.Dw:69===i?this.Kd=s.Gw:70===i?this.VC=s.Vy:71===i?this.XC=s.Vy:72===i?this.zC=s.Vy:73===i&&(this.jC=!0)};_l=(t,i,s,h,e,n,o)=>{if(!this.MC)return null;let a=-1;for(let i=0;i<this.MC.length;i++)if(this.MC[i]===t){a=i;break}if(-1===a)return null;const f=BigInt(BigInt(this.index)<<6n)+BigInt(BigInt(a)<<3n)+BigInt(i)+BigInt(BigInt(o)+1n<<32n);let u=c.wf?.get(f);if(u){if((this.NC||this.PC)&&(u=r.i.qC(u,this.NC,this.PC)),this.NC){const t=(s+h+e+n)/4|0;for(let i=0;i<u.$C;i++){const r=u.KC[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(u.JC[i]+64)/128|0);u.QC[i]+=l-t}u.tE()}return u}if(!this.bC)return null;if(a>=this.bC.length)return null;let d=this.bC[a];if(-1===d)return null;const w=this.GC!==i>3;w&&(d+=65536);let y=c.df?.get(BigInt(d));y||(y=r.i.model(65535&d),w&&y.iE(),c.df?.put(BigInt(d),y));const m=128!==this.WC||128!==this.YC||128!==this.ZC,p=0!==this.VC||0!==this.XC||0!==this.zC;let A=r.i.oC(y,!this.OC,!this.DC,i===l.i.du&&-1===o&&!m&&!p);for(-1!==o&&(A.Zl(),A.Vl(o),A.sE=null,A.hE=null);i-- >0;)A.eE();if(this.OC&&this.LC)for(let t=0;t<this.OC.length;t++)A.Gl(this.OC[t],this.LC[t]);if(m&&A.scale(this.WC,this.YC,this.ZC),p&&A.translate(this.XC,this.VC,this.zC),A.Xl(64+(255&this.UC),5*(255&this.BC)+768,-50,-10,-50,!this.PC),this.bw&&(A.nE=A.rE),c.wf?.put(f,A),(this.NC||this.PC)&&(A=r.i.qC(A,this.NC,this.PC)),this.NC){const t=(s+h+e+n)/4|0;for(let i=0;i<A.$C;i++){const r=A.KC[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(A.JC[i]+64)/128|0);A.QC[i]+=l-t}A.tE()}return A};reset=()=>{this.bC=null,this.MC=null,this.name=null,this.Yu=null,this.OC=null,this.LC=null,this.width=1,this.length=1,this.bw=!0,this.Ow=!0,this.active=!1,this.xC=-1,this.NC=!1,this.PC=!1,this.pC=!1,this.Co=-1,this.FC=16,this.UC=0,this.BC=0,this.rp=null,this.DC=!1,this.hu=-1,this.cu=-1,this.GC=!1,this.HC=!0,this.WC=128,this.YC=128,this.ZC=128,this.Kd=0,this.VC=0,this.XC=0,this.zC=0,this.jC=!1}}},2441:(t,i,s)=>{s.d(i,{i:()=>l});var h=s(8107),e=s(2383),n=s(5542),r=s(9178),o=s(9345);class l extends h.r{static count=0;static cache=null;static SC=null;static kC=null;static RC=0;static Hr=new n.i(30);static Aa=t=>{this.SC=new e.i(t.read('npc.dat'));const i=new e.i(t.read('npc.idx'));this.count=i.Dw,this.kC=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.kC[t]=s,s+=i.Dw;this.cache=new o.to(20,null);for(let t=0;t<20;t++)this.cache[t]=new l};static get=t=>{if(!this.cache||!this.kC||!this.SC)throw new Error('LocType not loaded!!!');for(let i=0;i<20;i++){const s=this.cache[i];if(s&&s.index===t)return s}this.RC=(this.RC+1)%20;const i=this.cache[this.RC]=new l;return this.SC.$a=this.kC[t],i.index=t,i.fC(t,this.SC),i};static Fr=()=>{this.Hr=null,this.kC=null,this.cache=null,this.SC=null};index=-1;name=null;Yu=null;size=1;bC=null;vC=null;DC=!1;uA=-1;nA=-1;oA=-1;aA=-1;fA=-1;oE=!1;OC=null;LC=null;rp=null;lE=-1;aE=-1;cE=-1;qf=!0;cp=-1;fE=128;uE=128;decode=(t,i,s)=>{if(1===i){const t=s.Gw;this.bC=new Uint16Array(t);for(let i=0;i<t;i++)this.bC[i]=s.Dw}else if(2===i)this.name=s.Jw;else if(3===i)this.Yu=s.Jw;else if(12===i)this.size=s.Uw;else if(13===i)this.uA=s.Dw;else if(14===i)this.nA=s.Dw;else if(16===i)this.DC=!0;else if(17===i)this.nA=s.Dw,this.oA=s.Dw,this.aA=s.Dw,this.fA=s.Dw;else if(i>=30&&i<40)this.rp||(this.rp=new o.to(5,null)),this.rp[i-30]=s.Jw,'hidden'===this.rp[i-30]?.toLowerCase()&&(this.rp[i-30]=null);else if(40===i){const t=s.Gw;this.OC=new Uint16Array(t),this.LC=new Uint16Array(t);for(let i=0;i<t;i++)this.OC[i]=s.Dw,this.LC[i]=s.Dw}else if(60===i){const t=s.Gw;this.vC=new Uint16Array(t);for(let i=0;i<t;i++)this.vC[i]=s.Dw}else 90===i?this.lE=s.Dw:91===i?this.aE=s.Dw:92===i?this.cE=s.Dw:93===i?this.qf=!1:95===i?this.cp=s.Dw:97===i?this.fE=s.Dw:98===i&&(this.uE=s.Dw)};dE=(t,i,s)=>{let h=null,e=null;if(l.Hr&&(e=l.Hr.get(BigInt(this.index)),!e&&this.bC)){const t=new o.to(this.bC.length,null);for(let i=0;i<this.bC.length;i++)t[i]=r.i.model(this.bC[i]);if(e=1===t.length?t[0]:r.i.Bl(t,t.length),this.OC&&this.LC)for(let t=0;t<this.OC.length;t++)e?.Gl(this.OC[t],this.LC[t]);e?.Zl(),e?.Xl(64,850,-30,-50,-30,!0),e&&l.Hr.put(BigInt(this.index),e)}return e?(h=r.i.wE(e,!this.DC),-1!==t&&-1!==i?h.yE(t,i,s):-1!==t&&h.Vl(t),128===this.fE&&128===this.uE||h.scale(this.fE,this.uE,this.fE),h.mE(),h.sE=null,h.hE=null,1===this.size&&(h.pE=!0),h):null};qw=()=>{if(!this.vC)return null;const t=new o.to(this.vC.length,null);for(let i=0;i<this.vC.length;i++)t[i]=r.i.model(this.vC[i]);let i;if(i=1===t.length?t[0]:r.i.Bl(t,t.length),this.OC&&this.LC)for(let t=0;t<this.OC.length;t++)i?.Gl(this.OC[t],this.LC[t]);return i}}},1840:(t,i,s)=>{s.d(i,{i:()=>u});var h=s(8107),e=s(2383),n=s(6542),r=s(5542),o=s(9178),l=s(8078),a=s(2991),c=s(312),f=s(9345);class u extends h.r{static count=0;static cache=null;static SC=null;static kC=null;static RC=0;static AE=!0;static Hr=new r.i(50);static yf=new r.i(200);static Aa=(t,i)=>{this.AE=i,this.SC=new e.i(t.read('obj.dat'));const s=new e.i(t.read('obj.idx'));this.count=s.Dw,this.kC=new Int32Array(this.count);let h=2;for(let t=0;t<this.count;t++)this.kC[t]=h,h+=s.Dw;this.cache=new f.to(10,null);for(let t=0;t<10;t++)this.cache[t]=new u};static get=t=>{if(!this.cache||!this.kC||!this.SC)throw new Error('ObjType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.index===t)return s}this.RC=(this.RC+1)%10;const i=this.cache[this.RC];return this.SC.$a=this.kC[t],i.index=t,i.reset(),i.fC(t,this.SC),-1!==i.IE&&i.gE(),!this.AE&&i.l&&(i.name='Members Object',i.Yu="Login to a members' server to use this object.",i.rp=null,i.qm=null),i};static Fr=()=>{this.Hr=null,this.yf=null,this.kC=null,this.cache=null,this.SC=null};static Vo=(t,i)=>{if(u.yf){let s=u.yf.get(BigInt(t));if(s&&s.Jf!==i&&-1!==s.Jf&&(s.zw(),s=null),s)return s}let s=u.get(t);if(s._E||(i=-1),s._E&&s.CE&&i>1){let t=-1;for(let h=0;h<10;h++)i>=s.CE[h]&&0!==s.CE[h]&&(t=s._E[h]);-1!==t&&(s=u.get(t))}const h=new n.i(32,32),e=l.i.Al,r=l.i.Il,o=l.i._a,f=a.i.Ia,d=a.i.EE,w=a.i.TE,y=a.i.left,m=a.i.right,p=a.i.top,A=a.i.bottom;l.i.bE=!1,a.i.bind(h.Ia,32,32),a.i.fillRect(0,0,32,32,c.i.Jo),l.i.xI();const I=s.pw(1),g=l.i.sin[s.lm]*s.fm>>16,_=l.i.cos[s.lm]*s.fm>>16;I.El(0,s.am,s.vE,s.lm,s.OE,g+(I.rE/2|0)+s.LE,_+s.LE);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.Ia[t+32*i]&&(t>0&&h.Ia[t+32*i-1]>1||i>0&&h.Ia[t+32*(i-1)]>1||t<31&&h.Ia[t+32*i+1]>1||i<31&&h.Ia[t+32*(i+1)]>1)&&(h.Ia[t+32*i]=1);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.Ia[t+32*i]&&t>0&&i>0&&h.Ia[t+32*(i-1)-1]>0&&(h.Ia[t+32*i]=3153952);if(-1!==s.IE){const t=this.Vo(s.SE,10),i=t.qo,h=t.Jf;t.qo=32,t.Jf=32,t.kE(5,5,22,22),t.qo=i,t.Jf=h}return u.yf?.put(BigInt(t),h),a.i.bind(f,d,w),a.i.So(y,p,m,A),l.i.Al=e,l.i.Il=r,l.i._a=o,l.i.bE=!0,s.vl?h.qo=33:h.qo=32,h.Jf=i,h};index=-1;model=0;name=null;Yu=null;OC=null;LC=null;fm=2e3;lm=0;am=0;vE=0;OE=0;LE=0;RE=!1;ME=-1;vl=!1;yw=1;l=!1;rp=null;qm=null;xE=-1;NE=-1;PE=0;DE=-1;FE=-1;UE=0;BE=-1;GE=-1;HE=-1;WE=-1;YE=-1;ZE=-1;_E=null;CE=null;SE=-1;IE=-1;decode=(t,i,s)=>{if(1===i)this.model=s.Dw;else if(2===i)this.name=s.Jw;else if(3===i)this.Yu=s.Jw;else if(4===i)this.fm=s.Dw;else if(5===i)this.lm=s.Dw;else if(6===i)this.am=s.Dw;else if(7===i)this.OE=s.Vy,this.OE>32767&&(this.OE-=65536);else if(8===i)this.LE=s.Vy,this.LE>32767&&(this.LE-=65536);else if(9===i)this.RE=!0;else if(10===i)this.ME=s.Dw;else if(11===i)this.vl=!0;else if(12===i)this.yw=s.ho;else if(16===i)this.l=!0;else if(23===i)this.xE=s.Dw,this.PE=s.Uw;else if(24===i)this.NE=s.Dw;else if(25===i)this.DE=s.Dw,this.UE=s.Uw;else if(26===i)this.FE=s.Dw;else if(i>=30&&i<35)this.rp||(this.rp=new f.to(5,null)),this.rp[i-30]=s.Jw,'hidden'===this.rp[i-30]?.toLowerCase()&&(this.rp[i-30]=null);else if(i>=35&&i<40)this.qm||(this.qm=new f.to(5,null)),this.qm[i-35]=s.Jw;else if(40===i){const t=s.Gw;this.OC=new Uint16Array(t),this.LC=new Uint16Array(t);for(let i=0;i<t;i++)this.OC[i]=s.Dw,this.LC[i]=s.Dw}else 78===i?this.BE=s.Dw:79===i?this.GE=s.Dw:90===i?this.HE=s.Dw:91===i?this.YE=s.Dw:92===i?this.WE=s.Dw:93===i?this.ZE=s.Dw:95===i?this.vE=s.Dw:97===i?this.SE=s.Dw:98===i?this.IE=s.Dw:i>=100&&i<110&&(this._E&&this.CE||(this._E=new Uint16Array(10),this.CE=new Uint16Array(10)),this._E[i-100]=s.Dw,this.CE[i-100]=s.Dw)};VE=t=>{let i=this.xE;if(1===t&&(i=this.DE),-1===i)return null;let s=this.NE,h=this.BE;1===t&&(s=this.FE,h=this.GE);let e=o.i.model(i);if(-1!==s){const t=o.i.model(s);if(-1===h){const i=[e,t];e=o.i.Bl(i,2)}else{const i=[e,t,o.i.model(h)];e=o.i.Bl(i,3)}}if(0===t&&0!==this.PE&&e.translate(this.PE,0,0),1===t&&0!==this.UE&&e.translate(this.UE,0,0),this.OC&&this.LC)for(let t=0;t<this.OC.length;t++)e.Gl(this.OC[t],this.LC[t]);return e};qw=t=>{let i=this.HE;if(1===t&&(i=this.YE),-1===i)return null;let s=this.WE;1===t&&(s=this.ZE);let h=o.i.model(i);if(-1!==s){const t=[h,o.i.model(s)];h=o.i.Bl(t,2)}if(this.OC&&this.LC)for(let t=0;t<this.OC.length;t++)h.Gl(this.OC[t],this.LC[t]);return h};pw=t=>{if(this._E&&this.CE&&t>1){let i=-1;for(let s=0;s<10;s++)t>=this.CE[s]&&0!==this.CE[s]&&(i=this._E[s]);if(-1!==i)return u.get(i).pw(1)}if(u.Hr){const t=u.Hr.get(BigInt(this.index));if(t)return t}const i=o.i.model(this.model);if(this.OC&&this.LC)for(let t=0;t<this.OC.length;t++)i.Gl(this.OC[t],this.LC[t]);return i.Xl(64,768,-50,-10,-50,!0),i.pE=!0,u.Hr?.put(BigInt(this.index),i),i};gE=()=>{const t=u.get(this.IE);this.model=t.model,this.fm=t.fm,this.lm=t.lm,this.am=t.am,this.vE=t.vE,this.OE=t.OE,this.LE=t.LE,this.OC=t.OC,this.LC=t.LC;const i=u.get(this.SE);this.name=i.name,this.l=i.l,this.yw=i.yw;let s='a';const h=(i.name||'').toLowerCase().charAt(0);'a'!==h&&'e'!==h&&'i'!==h&&'o'!==h&&'u'!==h||(s='an'),this.Yu=`Swap this note at any bank for ${s} ${i.name}.`,this.vl=!0};reset=()=>{this.model=0,this.name=null,this.Yu=null,this.OC=null,this.LC=null,this.fm=2e3,this.lm=0,this.am=0,this.vE=0,this.OE=0,this.LE=0,this.RE=!1,this.ME=-1,this.vl=!1,this.yw=1,this.l=!1,this.rp=null,this.qm=null,this.xE=-1,this.NE=-1,this.PE=0,this.DE=-1,this.FE=-1,this.UE=0,this.BE=-1,this.GE=-1,this.HE=-1,this.WE=-1,this.YE=-1,this.ZE=-1,this._E=null,this.CE=null,this.SE=-1,this.IE=-1}}},8067:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(8107),e=s(2383),n=s(8762);class r extends h.r{static count=0;static Gr=[];static Aa=t=>{const i=new e.i(t.read('seq.dat'));this.count=i.Dw;for(let t=0;t<this.count;t++)this.Gr[t]=new r,this.Gr[t].fC(t,i),0===this.Gr[t].vo&&(this.Gr[t].vo=1,this.Gr[t].frames=new Int16Array(1),this.Gr[t].frames[0]=-1,this.Gr[t].Cl=new Int16Array(1),this.Gr[t].Cl[0]=-1,this.Gr[t].delay=new Int16Array(1),this.Gr[t].delay[0]=-1)};vo=0;frames=null;Cl=null;delay=null;Oo=-1;JA=null;KA=!1;priority=5;XE=-1;zE=-1;$A=99;duration=0;decode=(t,i,s)=>{if(1===i){this.vo=s.Gw,this.frames=new Int16Array(this.vo),this.Cl=new Int16Array(this.vo),this.delay=new Int16Array(this.vo);for(let t=0;t<this.vo;t++)this.frames[t]=s.Dw,this.Cl[t]=s.Dw,65535===this.Cl[t]&&(this.Cl[t]=-1),this.delay[t]=s.Dw,0===this.delay[t]&&(this.delay[t]=n.i.Gr[this.frames[t]].delay),0===this.delay[t]&&(this.delay[t]=1),this.duration+=this.delay[t]}else if(2===i)this.Oo=s.Dw;else if(3===i){const t=s.Gw;this.JA=new Int32Array(t+1);for(let i=0;i<t;i++)this.JA[i]=s.Gw;this.JA[t]=9999999}else if(4===i)this.KA=!0;else if(5===i)this.priority=s.Gw;else if(6===i)this.XE=s.Dw;else if(7===i)this.zE=s.Dw;else{if(8!==i)throw new Error(`Unrecognized seq config code: ${i}`);this.$A=s.Gw}}}},551:(t,i,s)=>{s.d(i,{i:()=>l});var h=s(8107),e=s(2383),n=s(8067),r=s(9178),o=s(5542);class l extends h.r{static count=0;static Gr=[];static Hr=new o.i(30);static Aa=t=>{const i=new e.i(t.read('spotanim.dat'));this.count=i.Dw;for(let t=0;t<this.count;t++)this.Gr[t]=new l,this.Gr[t].index=t,this.Gr[t].fC(t,i)};index=0;model=0;Co=-1;DA=null;DC=!1;OC=new Uint16Array(6);LC=new Uint16Array(6);fE=128;uE=128;orientation=0;UC=0;BC=0;decode=(t,i,s)=>{if(1===i)this.model=s.Dw;else if(2===i)this.Co=s.Dw,n.i.Gr&&(this.DA=n.i.Gr[this.Co]);else if(3===i)this.DC=!0;else if(4===i)this.fE=s.Dw;else if(5===i)this.uE=s.Dw;else if(6===i)this.orientation=s.Dw;else if(7===i)this.UC=s.Gw;else if(8===i)this.BC=s.Gw;else if(i>=40&&i<50)this.OC[i-40]=s.Dw;else{if(!(i>=50&&i<60))throw new Error(`Unrecognized spotanim config code: ${i}`);this.LC[i-50]=s.Dw}};_l=()=>{let t=l.Hr?.get(BigInt(this.index));if(t)return t;t=r.i.model(this.model);for(let i=0;i<6;i++)0!==this.OC[0]&&t.Gl(this.OC[i],this.LC[i]);return l.Hr?.put(BigInt(this.index),t),t}}},1089:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(8107),e=s(2383);class n extends h.r{static count=0;static Gr=[];static jE=[];static qE=0;static Aa=t=>{const i=new e.i(t.read('varp.dat'));this.count=i.Dw;for(let t=0;t<this.count;t++)this.Gr[t]=new n,this.Gr[t].fC(t,i)};ME=null;$E=0;KE=0;JE=!1;QE=!0;Hm=0;tT=0;iT=!1;sT=!1;decode(t,i,s){if(1===i)this.$E=s.Gw;else if(2===i)this.KE=s.Gw;else if(3===i)this.JE=!0,n.jE[n.qE++]=t;else if(4===i)this.QE=!1;else if(5===i)this.Hm=s.Dw;else if(6===i)this.iT=!0;else if(7===i)this.tT=s.ho;else if(8===i)this.sT=!0;else{if(10!==i)throw new Error(`Error unrecognised config code: ${i}`);this.ME=s.Jw}}}},8603:(t,i,s)=>{s.d(i,{i:()=>h});class h{static OPEN=0;static hT=1;static eT=2;static nT=4;static rT=8;static oT=h.hT<<4;static lT=h.eT<<4;static aT=h.nT<<4;static cT=h.rT<<4;static fT=256;static uT=512;static dT=1024;static wT=2048;static yT=4096;static mT=h.uT<<4;static pT=h.dT<<4;static AT=h.wT<<4;static IT=h.yT<<4;static gT=h.fT<<9;static _T=524288;static CT=2097152;static ET=h.CT|h._T;static TT=h.fT|h.ET;static ru=h.eT|h.TT;static eu=h.rT|h.TT;static mp=h.eT|h.nT|h.eu;static ou=h.lT|h.TT;static Ap=h.rT|h.oT|h.ou;static nu=h.cT|h.TT;static pp=h.hT|h.eT|h.nu;static Ip=h.lT|h.aT|h.nu;static bT=16777215}},3693:(t,i,s)=>{s.d(i,{i:()=>o});var h=s(8603),e=s(5534),n=s(1908),r=s(6439);class o{static ze=4;static ln=104;static index=(t,i)=>t*o.ln+i;offsetX;vT;sizeX;sizeZ;flags;constructor(){this.offsetX=0,this.vT=0,this.sizeX=o.ln,this.sizeZ=o.ln,this.flags=new Int32Array(this.sizeX*this.sizeZ),this.reset()}reset=()=>{for(let t=0;t<this.sizeX;t++)for(let i=0;i<this.sizeZ;i++){const s=o.index(t,i);0===t||0===i||t===this.sizeX-1||i===this.sizeZ-1?this.flags[s]=h.i.bT:this.flags[s]=h.i.OPEN}};OT=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.vT)]|=h.i.CT};Rw=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.vT)]&=~h.i.CT};Iw=(t,i,s,n,r,o)=>{let l=h.i.fT;o&&(l|=h.i.gT);const a=t-this.offsetX,c=i-this.vT;if(r===e.i.wu||r===e.i.mu){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.add(t,i,l)};Sw=(t,i,s,n,r,o)=>{let l=h.i.fT;o&&(l|=h.i.gT);const a=t-this.offsetX,c=i-this.vT;if(r===e.i.wu||r===e.i.mu){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.remove(t,i,l)};LT=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.vT,c=o?h.i.IT:h.i.cT,f=o?h.i.yT:h.i.rT,u=o?h.i.dT:h.i.eT,d=o?h.i.pT:h.i.lT,w=o?h.i.uT:h.i.hT,y=o?h.i.mT:h.i.oT,m=o?h.i.wT:h.i.nT,p=o?h.i.AT:h.i.aT;s===n.i.fu.id?r===e.i.du?(this.add(l,a,c),this.add(l-1,a,f)):r===e.i.wu?(this.add(l,a,u),this.add(l,a+1,d)):r===e.i.yu?(this.add(l,a,f),this.add(l+1,a,c)):r===e.i.mu&&(this.add(l,a,d),this.add(l,a-1,u)):s===n.i.ST.id||s===n.i.pu.id?r===e.i.du?(this.add(l,a,w),this.add(l-1,a+1,y)):r===e.i.wu?(this.add(l,a,m),this.add(l+1,a+1,p)):r===e.i.yu?(this.add(l,a,y),this.add(l+1,a-1,w)):r===e.i.mu&&(this.add(l,a,p),this.add(l-1,a-1,m)):s===n.i.uu.id&&(r===e.i.du?(this.add(l,a,u|c),this.add(l-1,a,f),this.add(l,a+1,d)):r===e.i.wu?(this.add(l,a,u|f),this.add(l,a+1,d),this.add(l+1,a,c)):r===e.i.yu?(this.add(l,a,d|f),this.add(l+1,a,c),this.add(l,a-1,u)):r===e.i.mu&&(this.add(l,a,d|c),this.add(l,a-1,u),this.add(l-1,a,f))),o&&this.LT(t,i,s,r,!1)};Tw=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.vT,c=o?h.i.IT:h.i.cT,f=o?h.i.yT:h.i.rT,u=o?h.i.dT:h.i.eT,d=o?h.i.pT:h.i.lT,w=o?h.i.uT:h.i.hT,y=o?h.i.mT:h.i.oT,m=o?h.i.wT:h.i.nT,p=o?h.i.AT:h.i.aT;s===n.i.fu.id?r===e.i.du?(this.remove(l,a,c),this.remove(l-1,a,f)):r===e.i.wu?(this.remove(l,a,u),this.remove(l,a+1,d)):r===e.i.yu?(this.remove(l,a,f),this.remove(l+1,a,c)):r===e.i.mu&&(this.remove(l,a,d),this.remove(l,a-1,u)):s===n.i.ST.id||s===n.i.pu.id?r===e.i.du?(this.remove(l,a,w),this.remove(l-1,a+1,y)):r===e.i.wu?(this.remove(l,a,m),this.remove(l+1,a+1,p)):r===e.i.yu?(this.remove(l,a,y),this.remove(l+1,a-1,w)):r===e.i.mu&&(this.remove(l,a,p),this.remove(l-1,a-1,m)):s===n.i.uu.id&&(r===e.i.du?(this.remove(l,a,u|c),this.remove(l-1,a,f),this.remove(l,a+1,d)):r===e.i.wu?(this.remove(l,a,u|f),this.remove(l,a+1,d),this.remove(l+1,a,c)):r===e.i.yu?(this.remove(l,a,d|f),this.remove(l+1,a,c),this.remove(l,a-1,u)):r===e.i.mu&&(this.remove(l,a,d|c),this.remove(l,a-1,u),this.remove(l-1,a,f))),o&&this.Tw(t,i,s,r,!1)};dp=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.vT,u=s-this.offsetX,d=r-this.vT,w=o.index(c,f);if(l===n.i.fu.id){if(a===e.i.du){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.ou)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.ru)===h.i.OPEN)return!0}else if(a===e.i.wu){if(c===u&&f===d+1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.i.eu)===h.i.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.nu)===h.i.OPEN)return!0}else if(a===e.i.yu){if(c===u+1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.ou)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.ru)===h.i.OPEN)return!0}else if(a===e.i.mu){if(c===u&&f===d-1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.i.eu)===h.i.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.nu)===h.i.OPEN)return!0}}else if(l===n.i.uu.id){if(a===e.i.du){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.nu)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.ru)===h.i.OPEN)return!0}else if(a===e.i.wu){if(c===u-1&&f===d&&(this.flags[w]&h.i.eu)===h.i.OPEN)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.ru)===h.i.OPEN)return!0}else if(a===e.i.yu){if(c===u-1&&f===d&&(this.flags[w]&h.i.eu)===h.i.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.ou)===h.i.OPEN)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1)return!0}else if(a===e.i.mu){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.ou)===h.i.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.nu)===h.i.OPEN)return!0;if(c===u&&f===d-1)return!0}}else if(l===n.i.Iu.id){if(c===u&&f===d+1&&(this.flags[w]&h.i.lT)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.eT)===h.i.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.i.rT)===h.i.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.cT)===h.i.OPEN)return!0}return!1};wp=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.vT,u=s-this.offsetX,d=r-this.vT,w=o.index(c,f);if(l===n.i.kT.id||l===n.i.RT.id){if(l===n.i.RT.id&&(a=a+2&3),a===e.i.du){if(c===u+1&&f===d&&(this.flags[w]&h.i.cT)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.eT)===h.i.OPEN)return!0}else if(a===e.i.wu){if(c===u-1&&f===d&&(this.flags[w]&h.i.rT)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.eT)===h.i.OPEN)return!0}else if(a===e.i.yu){if(c===u-1&&f===d&&(this.flags[w]&h.i.rT)===h.i.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.lT)===h.i.OPEN)return!0}else if(a===e.i.mu){if(c===u+1&&f===d&&(this.flags[w]&h.i.cT)===h.i.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.lT)===h.i.OPEN)return!0}}else if(l===n.i.MT.id){if(c===u&&f===d+1&&(this.flags[w]&h.i.lT)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.eT)===h.i.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.i.rT)===h.i.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.cT)===h.i.OPEN)return!0}return!1};yp=(t,i,s,e,n,l,a)=>{const c=s+n-1,f=e+l-1,u=o.index(t-this.offsetX,i-this.vT);return t>=s&&t<=c&&i>=e&&i<=f||(t===s-1&&i>=e&&i<=f&&(this.flags[u]&h.i.rT)===h.i.OPEN&&(a&r.i.du)===h.i.OPEN||(t===c+1&&i>=e&&i<=f&&(this.flags[u]&h.i.cT)===h.i.OPEN&&(a&r.i.yu)===h.i.OPEN||(i===e-1&&t>=s&&t<=c&&(this.flags[u]&h.i.eT)===h.i.OPEN&&(a&r.i.mu)===h.i.OPEN||i===f+1&&t>=s&&t<=c&&(this.flags[u]&h.i.lT)===h.i.OPEN&&(a&r.i.wu)===h.i.OPEN)))};add=(t,i,s)=>{this.flags[o.index(t,i)]|=s};remove=(t,i,s)=>{this.flags[o.index(t,i)]&=h.i.bT-s}}},6439:(t,i,s)=>{s.d(i,{i:()=>h});class h{static wu=1;static yu=2;static mu=4;static du=8;static xT=h.du|h.mu;static NT=h.du|h.wu;static PT=h.yu|h.mu;static DT=h.yu|h.wu}},5534:(t,i,s)=>{s.d(i,{i:()=>h});class h{static du=0;static wu=1;static yu=2;static mu=3}},3714:(t,i,s)=>{s.d(i,{i:()=>h});class h{static gw=0;static _w=1;static Ew=2;static $d=3}},1908:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3714);class e{static fu=new e(0,h.i.gw);static ST=new e(1,h.i.gw);static uu=new e(2,h.i.gw);static pu=new e(3,h.i.gw);static GA=new e(4,h.i._w);static up=new e(5,h.i._w);static kT=new e(6,h.i._w);static RT=new e(7,h.i._w);static MT=new e(8,h.i._w);static Iu=new e(9,h.i.Ew);static jd=new e(10,h.i.Ew);static qd=new e(11,h.i.Ew);static FT=new e(12,h.i.Ew);static UT=new e(13,h.i.Ew);static BT=new e(14,h.i.Ew);static GT=new e(15,h.i.Ew);static HT=new e(16,h.i.Ew);static WT=new e(17,h.i.Ew);static YT=new e(18,h.i.Ew);static ZT=new e(19,h.i.Ew);static VT=new e(20,h.i.Ew);static XT=new e(21,h.i.Ew);static $d=new e(22,h.i.$d);static values(){return[this.fu,this.ST,this.WT,this.GT,this.uu,this.BT,this.Iu,this.pu,this.$d,this.FT,this.qd,this.kT,this.VT,this.jd,this.up,this.UT,this.RT,this.GA,this.HT,this.MT,this.ZT,this.XT,this.YT]}static of(t){if(t>=0&&t<this.values().length)return this.values()[t];throw Error('shape not found')}id;Cu;constructor(t,i){this.id=t,this.Cu=i}}},3909:(t,i,s)=>{s.d(i,{i:()=>m});var h=s(3693),e=s(8056),n=s(2383),r=s(8078),o=s(7221),l=s(7958),a=s(682),c=s(8067),f=s(1908),u=s(5534),d=s(312),w=s(9190),y=s(9345);class m{static zT=Int32Array.of(1,2,4,8);static jT=Int32Array.of(16,32,64,128);static qT=Int32Array.of(1,0,-1,0);static $T=Int32Array.of(0,-1,0,1);static KT=(17*Math.random()|0)-8;static JT=(33*Math.random()|0)-16;static u=!0;static Sm=0;static QT=!1;static tb=(t,i)=>{let s=this.ib(t+45365,i+91923,4)+(this.ib(t+10294,i+37821,2)-128>>1)+(this.ib(t,i,1)-128>>2)-128;return s=35+(.3*s|0),s<10?s=10:s>60&&(s=60),s};static ib=(t,i,s)=>{const h=t/s|0,e=t&s-1,n=i/s|0,r=i&s-1,o=this.sb(h,n),l=this.sb(h+1,n),a=this.sb(h,n+1),c=this.sb(h+1,n+1),f=this.hb(o,l,e,s),u=this.hb(a,c,e,s);return this.hb(f,u,r,s)};static hb=(t,i,s,h)=>{const e=65536-r.i.cos[1024*s/h|0]>>1;return(t*(65536-e)>>16)+(i*e>>16)};static sb=(t,i)=>((this.eb(t-1,i-1)+this.eb(t+1,i-1)+this.eb(t-1,i+1)+this.eb(t+1,i+1))/16|0)+((this.eb(t-1,i)+this.eb(t+1,i)+this.eb(t,i-1)+this.eb(t,i+1))/8|0)+(this.eb(t,i)/4|0);static eb=(t,i)=>{const s=t+57*i,h=s<<13^s,e=BigInt(h)*(BigInt(h)*BigInt(h)*15731n+789221n)+1376312589n&0x7fffffffn;return 255&Number(e>>19n)};static Iw=(t,i,s,h,e,n,r,o,d,w,y)=>{const p=e[y][i][s],A=e[y][i+1][s],I=e[y][i+1][s+1],g=e[y][i][s+1],_=p+A+I+g>>2,C=l.i.get(o);let E=i+(s<<7)+(o<<14)+1073741824|0;C.active||(E+=-2147483648),E|=0;const T=((w<<6)+d|0)<<24>>24;if(d===f.i.$d.id)h?.nb(C._l(f.i.$d.id,w,p,A,I,g,-1),t,i,s,_,E,T),C.bw&&C.active&&r.OT(i,s),-1!==C.Co&&n.iI(new a.i(o,t,3,i,s,c.i.Gr[C.Co],!0));else if(d===f.i.jd.id||d===f.i.qd.id){const e=C._l(f.i.jd.id,w,p,A,I,g,-1);if(e){let n,r,o=0;d===f.i.qd.id&&(o+=256),w===u.i.wu||w===u.i.mu?(n=C.length,r=C.width):(n=C.width,r=C.length),h?.Iw(t,i,s,_,e,null,E,T,n,r,o)}C.bw&&r.Iw(i,s,C.width,C.length,w,C.Ow),-1!==C.Co&&n.iI(new a.i(o,t,2,i,s,c.i.Gr[C.Co],!0))}else if(d>=f.i.FT.id)h?.Iw(t,i,s,_,C._l(d,w,p,A,I,g,-1),null,E,T,1,1,0),C.bw&&r.Iw(i,s,C.width,C.length,w,C.Ow),-1!==C.Co&&n.iI(new a.i(o,t,2,i,s,c.i.Gr[C.Co],!0));else if(d===f.i.fu.id)h?.LT(t,i,s,_,m.zT[w],0,C._l(f.i.fu.id,w,p,A,I,g,-1),null,E,T),C.bw&&r.LT(i,s,d,w,C.Ow),-1!==C.Co&&n.iI(new a.i(o,t,0,i,s,c.i.Gr[C.Co],!0));else if(d===f.i.ST.id)h?.LT(t,i,s,_,m.jT[w],0,C._l(f.i.ST.id,w,p,A,I,g,-1),null,E,T),C.bw&&r.LT(i,s,d,w,C.Ow),-1!==C.Co&&n.iI(new a.i(o,t,0,i,s,c.i.Gr[C.Co],!0));else if(d===f.i.uu.id){const e=w+1&3;h?.LT(t,i,s,_,m.zT[w],m.zT[e],C._l(f.i.uu.id,w+4,p,A,I,g,-1),C._l(f.i.uu.id,e,p,A,I,g,-1),E,T),C.bw&&r.LT(i,s,d,w,C.Ow),-1!==C.Co&&n.iI(new a.i(o,t,0,i,s,c.i.Gr[C.Co],!0))}else if(d===f.i.pu.id)h?.LT(t,i,s,_,m.jT[w],0,C._l(f.i.pu.id,w,p,A,I,g,-1),null,E,T),C.bw&&r.LT(i,s,d,w,C.Ow),-1!==C.Co&&n.iI(new a.i(o,t,0,i,s,c.i.Gr[C.Co],!0));else if(d===f.i.Iu.id)h?.Iw(t,i,s,_,C._l(d,w,p,A,I,g,-1),null,E,T,1,1,0),C.bw&&r.Iw(i,s,C.width,C.length,w,C.Ow),-1!==C.Co&&n.iI(new a.i(o,t,2,i,s,c.i.Gr[C.Co],!0));else if(d===f.i.GA.id)h?.rb(t,i,s,_,0,0,E,C._l(f.i.GA.id,u.i.du,p,A,I,g,-1),T,512*w,m.zT[w]),-1!==C.Co&&n.iI(new a.i(o,t,1,i,s,c.i.Gr[C.Co],!0));else if(d===f.i.up.id){let e=16;if(h){const n=h.lu(t,i,s);n>0&&(e=l.i.get(n>>14&32767).FC)}h?.rb(t,i,s,_,m.qT[w]*e,m.$T[w]*e,E,C._l(f.i.GA.id,u.i.du,p,A,I,g,-1),T,512*w,m.zT[w]),-1!==C.Co&&n.iI(new a.i(o,t,1,i,s,c.i.Gr[C.Co],!0))}else d===f.i.kT.id?(h?.rb(t,i,s,_,0,0,E,C._l(f.i.GA.id,u.i.du,p,A,I,g,-1),T,w,256),-1!==C.Co&&n.iI(new a.i(o,t,1,i,s,c.i.Gr[C.Co],!0))):d===f.i.RT.id?(h?.rb(t,i,s,_,0,0,E,C._l(f.i.GA.id,u.i.du,p,A,I,g,-1),T,w,512),-1!==C.Co&&n.iI(new a.i(o,t,1,i,s,c.i.Gr[C.Co],!0))):d===f.i.MT.id&&(h?.rb(t,i,s,_,0,0,E,C._l(f.i.GA.id,u.i.du,p,A,I,g,-1),T,w,768),-1!==C.Co&&n.iI(new a.i(o,t,1,i,s,c.i.Gr[C.Co],!0)))};kA;RA;hn;en;ob;lb;ab;cb;fb;ub;wb;yb;mb;pb;Ab;Ib;constructor(t,i,s,e){this.kA=t,this.RA=i,this.hn=s,this.en=e,this.ob=new y.ca(h.i.ze,t,i),this.lb=new y.ca(h.i.ze,t,i),this.ab=new y.ca(h.i.ze,t,i),this.cb=new y.ca(h.i.ze,t,i),this.Ib=new y.fa(h.i.ze,t+1,i+1),this.fb=new y.ca(h.i.ze,t+1,i+1),this.ub=new y.rn(t+1,i+1),this.wb=new Int32Array(i),this.yb=new Int32Array(i),this.mb=new Int32Array(i),this.pb=new Int32Array(i),this.Ab=new Int32Array(i)}Dm=(t,i)=>{for(let t=0;t<h.i.ze;t++)for(let s=0;s<h.i.ln;s++)for(let e=0;e<h.i.ln;e++)if(1==(1&this.en[t][s][e])){let h=t;2==(2&this.en[1][s][e])&&h--,h>=0&&i[h]?.OT(s,e)}m.KT+=(5*Math.random()|0)-2,m.KT<-8?m.KT=-8:m.KT>8&&(m.KT=8),m.JT+=(5*Math.random()|0)-2,m.JT<-16?m.JT=-16:m.JT>16&&(m.JT=16);for(let i=0;i<h.i.ze;i++){const s=this.fb[i],h=96,n=-50,o=-10,l=-50,a=768*(0|Math.sqrt(n*n+o*o+l*l))>>8;for(let t=1;t<this.RA-1;t++)for(let e=1;e<this.kA-1;e++){const r=this.hn[i][e+1][t]-this.hn[i][e-1][t],c=this.hn[i][e][t+1]-this.hn[i][e][t-1],f=0|Math.sqrt(r*r+c*c+65536),u=h+((n*((r<<8)/f|0)+o*(65536/f|0)+l*((c<<8)/f|0))/a|0),d=(s[e-1][t]>>2)+(s[e+1][t]>>3)+(s[e][t-1]>>2)+(s[e][t+1]>>3)+(s[e][t]>>1);this.ub[e][t]=u-d}for(let t=0;t<this.RA;t++)this.wb[t]=0,this.yb[t]=0,this.mb[t]=0,this.pb[t]=0,this.Ab[t]=0;for(let s=-5;s<this.kA+5;s++){for(let t=0;t<this.RA;t++){const h=s+5;let n;if(h>=0&&h<this.kA){const s=255&this.ob[i][h][t];if(s>0){const i=e.i.Gr[s-1];this.wb[t]+=i.CC,this.yb[t]+=i.IC,this.mb[t]+=i.gC,this.pb[t]+=i._C,n=this.Ab[t]++}}const r=s-5;if(r>=0&&r<this.kA){const s=255&this.ob[i][r][t];if(s>0){const i=e.i.Gr[s-1];this.wb[t]-=i.CC,this.yb[t]-=i.IC,this.mb[t]-=i.gC,this.pb[t]-=i._C,n=this.Ab[t]--}}}if(s>=1&&s<this.kA-1){let h=0,n=0,o=0,l=0,a=0;for(let c=-5;c<this.RA+5;c++){const f=c+5;f>=0&&f<this.RA&&(h+=this.wb[f],n+=this.yb[f],o+=this.mb[f],l+=this.pb[f],a+=this.Ab[f]);const y=c-5;if(y>=0&&y<this.RA&&(h-=this.wb[y],n-=this.yb[y],o-=this.mb[y],l-=this.pb[y],a-=this.Ab[y]),c>=1&&c<this.RA-1&&(!m.u||0==(16&this.en[i][s][c])&&this.gb(i,s,c)===m.Sm)){const f=255&this.ob[i][s][c],y=255&this.lb[i][s][c];if(f>0||y>0){const p=this.hn[i][s][c],A=this.hn[i][s+1][c],I=this.hn[i][s+1][c+1],g=this.hn[i][s][c+1],_=this.ub[s][c],C=this.ub[s+1][c],E=this.ub[s+1][c+1],T=this.ub[s][c+1];let b=-1,v=-1;if(f>0){const t=256*h/l|0,i=n/a|0;let s=o/a|0;b=e.i.uC(t,i,s);const r=t+m.KT&255;s+=m.JT,s<0?s=0:s>255&&(s=255),v=e.i.uC(r,i,s)}if(i>0){let t=0!==f||this.ab[i][s][c]===w.i._b;y>0&&!e.i.Gr[y-1].pC&&(t=!1),t&&p===A&&p===I&&p===g&&(this.Ib[i][s][c]|=2340)}let O=0;if(-1!==b&&(O=r.i.palette[e.i.dC(v,96)]),0===y)t?.Cb(i,s,c,w.i._b,u.i.du,-1,p,A,I,g,e.i.dC(b,_),e.i.dC(b,C),e.i.dC(b,E),e.i.dC(b,T),d.i.Jo,d.i.Jo,d.i.Jo,d.i.Jo,O,d.i.Jo);else{const h=this.ab[i][s][c]+1,n=this.cb[i][s][c],o=e.i.Gr[y-1];let l,a,f=o.texture;f>=0?(a=r.i.Eb(f),l=-1):o.yC===d.i.Ga?(a=0,l=-2,f=-1):(l=e.i.uC(o.AC,o.IC,o.gC),a=r.i.palette[e.i.wC(o.EC,96)]),t?.Cb(i,s,c,h,n,f,p,A,I,g,e.i.dC(b,_),e.i.dC(b,C),e.i.dC(b,E),e.i.dC(b,T),e.i.wC(l,_),e.i.wC(l,C),e.i.wC(l,E),e.i.wC(l,T),O,a)}}}}}}for(let s=1;s<this.RA-1;s++)for(let h=1;h<this.kA-1;h++)t?.Tb(i,h,s,this.gb(i,h,s))}m.QT||t?.bb(64,768,-50,-10,-50);for(let i=0;i<this.kA;i++)for(let s=0;s<this.RA;s++)2==(2&this.en[1][i][s])&&t?.vb(i,s);if(!m.QT){let t=1,i=2,s=4;for(let e=0;e<h.i.ze;e++){e>0&&(t<<=3,i<<=3,s<<=3);for(let h=0;h<=e;h++)for(let n=0;n<=this.RA;n++)for(let r=0;r<=this.kA;r++){if(0!=(this.Ib[h][r][n]&t)){let i=n,s=n,l=h,a=h;for(;i>0&&0!=(this.Ib[h][r][i-1]&t);)i--;for(;s<this.RA&&0!=(this.Ib[h][r][s+1]&t);)s++;t:for(;l>0;){for(let h=i;h<=s;h++)if(0==(this.Ib[l-1][r][h]&t))break t;l--}t:for(;a<e;){for(let h=i;h<=s;h++)if(0==(this.Ib[a+1][r][h]&t))break t;a++}if((a+1-l)*(s+1-i)>=8){const h=this.hn[a][r][i]-240,n=this.hn[l][r][i];o.i.Ob(e,1,128*r,h,128*i,128*r,n,128*s+128);for(let h=l;h<=a;h++)for(let e=i;e<=s;e++)this.Ib[h][r][e]&=~t}}if(0!=(this.Ib[h][r][n]&i)){let t=r,s=r,l=h,a=h;for(;t>0&&0!=(this.Ib[h][t-1][n]&i);)t--;for(;s<this.kA&&0!=(this.Ib[h][s+1][n]&i);)s++;t:for(;l>0;){for(let h=t;h<=s;h++)if(0==(this.Ib[l-1][h][n]&i))break t;l--}t:for(;a<e;){for(let h=t;h<=s;h++)if(0==(this.Ib[a+1][h][n]&i))break t;a++}if((a+1-l)*(s+1-t)>=8){const h=this.hn[a][t][n]-240,r=this.hn[l][t][n];o.i.Ob(e,2,128*t,h,128*n,128*s+128,r,128*n);for(let h=l;h<=a;h++)for(let e=t;e<=s;e++)this.Ib[h][e][n]&=~i}}if(0!=(this.Ib[h][r][n]&s)){let t=r,i=r,l=n,a=n;for(;l>0&&0!=(this.Ib[h][r][l-1]&s);)l--;for(;a<this.RA&&0!=(this.Ib[h][r][a+1]&s);)a++;t:for(;t>0;){for(let i=l;i<=a;i++)if(0==(this.Ib[h][t-1][i]&s))break t;t--}t:for(;i<this.kA;){for(let t=l;t<=a;t++)if(0==(this.Ib[h][i+1][t]&s))break t;i++}if((i+1-t)*(a+1-l)>=4){const n=this.hn[h][t][l];o.i.Ob(e,4,128*t,n,128*l,128*i+128,n,128*a+128);for(let e=t;e<=i;e++)for(let t=l;t<=a;t++)this.Ib[h][e][t]&=~s}}}}}};Nm=(t,i,s,n)=>{let r=0;for(let t=0;t<e.i.count;t++)if('water'===e.i.Gr[t].name?.toLowerCase()){r=t+1<<24>>24;break}for(let e=t;e<t+s;e++)for(let t=i;t<i+n;t++)if(t>=0&&t<this.kA&&e>=0&&e<this.RA){this.lb[0][t][e]=r;for(let i=0;i<h.i.ze;i++)this.hn[i][t][e]=0,this.en[i][t][e]=0}};xm=(t,i,s,e,r)=>{const o=new n.i(new Uint8Array(r));for(let n=0;n<h.i.ze;n++)for(let r=0;r<64;r++)for(let l=0;l<64;l++){const a=r+s,c=l+e;let f;if(a>=0&&a<h.i.ln&&c>=0&&c<h.i.ln)for(this.en[n][a][c]=0;;){if(f=o.Gw,0===f){0===n?this.hn[0][a][c]=8*-m.tb(a+t+932731,c+556238+i):this.hn[n][a][c]=this.hn[n-1][a][c]-240;break}if(1===f){let t=o.Gw;1===t&&(t=0),0===n?this.hn[0][a][c]=8*-t:this.hn[n][a][c]=this.hn[n-1][a][c]-8*t;break}f<=49?(this.lb[n][a][c]=o.Uw,this.ab[n][a][c]=((f-2)/4|0)<<24>>24,this.cb[n][a][c]=(f-2&3)<<24>>24):f<=81?this.en[n][a][c]=f-49<<24>>24:this.ob[n][a][c]=f-81<<24>>24}else for(;f=o.Gw,0!==f;){if(1===f){o.Gw;break}f<=49&&o.Gw}}};Pm=(t,i,s,e,r,o)=>{const l=new n.i(new Uint8Array(e));let a=-1;for(;;){const e=l.Lb;if(0===e)return;a+=e;let n=0;for(;;){const e=l.Lb;if(0===e)break;n+=e-1;const c=63&n,f=n>>6&63,u=n>>12,d=l.Gw,w=d>>2,y=3&d,m=f+r,p=c+o;if(m>0&&p>0&&m<h.i.ln-1&&p<h.i.ln-1){let h=u;2==(2&this.en[1][m][p])&&(h=u-1);let e=null;h>=0&&(e=s[h]),this.Iw(u,m,p,t,i,e,a,w,y)}}}};Iw=(t,i,s,h,e,n,r,o,d)=>{if(m.u){if(0!=(16&this.en[t][i][s]))return;if(this.gb(t,i,s)!==m.Sm)return}const w=this.hn[t][i][s],y=this.hn[t][i+1][s],p=this.hn[t][i+1][s+1],A=this.hn[t][i][s+1],I=w+y+p+A>>2,g=l.i.get(r);let _=i+(s<<7)+(r<<14)+1073741824|0;g.active||(_+=-2147483648),_|=0;const C=((d<<6)+o|0)<<24>>24;if(o===f.i.$d.id)(!m.u||g.active||g.jC)&&(h?.nb(g._l(f.i.$d.id,d,w,y,p,A,-1),t,i,s,I,_,C),g.bw&&g.active&&n&&n.OT(i,s),-1!==g.Co&&e.iI(new a.i(r,t,3,i,s,c.i.Gr[g.Co],!0)));else if(o===f.i.jd.id||o===f.i.qd.id){const l=g._l(f.i.jd.id,d,w,y,p,A,-1);if(l){let e,n,r=0;if(o===f.i.qd.id&&(r+=256),d===u.i.wu||d===u.i.mu?(e=g.length,n=g.width):(e=g.width,n=g.length),h?.Iw(t,i,s,I,l,null,_,C,e,n,r)&&g.HC)for(let h=0;h<=e;h++)for(let e=0;e<=n;e++){let n=l.Sb/4|0;n>30&&(n=30),n>this.fb[t][i+h][s+e]&&(this.fb[t][i+h][s+e]=n<<24>>24)}}g.bw&&n&&n.Iw(i,s,g.width,g.length,d,g.Ow),-1!==g.Co&&e.iI(new a.i(r,t,2,i,s,c.i.Gr[g.Co],!0))}else if(o>=f.i.FT.id)h?.Iw(t,i,s,I,g._l(o,d,w,y,p,A,-1),null,_,C,1,1,0),o>=f.i.FT.id&&o<=f.i.WT.id&&o!==f.i.UT.id&&t>0&&(this.Ib[t][i][s]|=2340),g.bw&&n&&n.Iw(i,s,g.width,g.length,d,g.Ow),-1!==g.Co&&e.iI(new a.i(r,t,2,i,s,c.i.Gr[g.Co],!0));else if(o===f.i.fu.id)h?.LT(t,i,s,I,m.zT[d],0,g._l(f.i.fu.id,d,w,y,p,A,-1),null,_,C),d===u.i.du?(g.HC&&(this.fb[t][i][s]=50,this.fb[t][i][s+1]=50),g.pC&&(this.Ib[t][i][s]|=585)):d===u.i.wu?(g.HC&&(this.fb[t][i][s+1]=50,this.fb[t][i+1][s+1]=50),g.pC&&(this.Ib[t][i][s+1]|=1170)):d===u.i.yu?(g.HC&&(this.fb[t][i+1][s]=50,this.fb[t][i+1][s+1]=50),g.pC&&(this.Ib[t][i+1][s]|=585)):d===u.i.mu&&(g.HC&&(this.fb[t][i][s]=50,this.fb[t][i+1][s]=50),g.pC&&(this.Ib[t][i][s]|=1170)),g.bw&&n&&n.LT(i,s,o,d,g.Ow),-1!==g.Co&&e.iI(new a.i(r,t,0,i,s,c.i.Gr[g.Co],!0)),16!==g.FC&&h?.kb(t,i,s,g.FC);else if(o===f.i.ST.id)h?.LT(t,i,s,I,m.jT[d],0,g._l(f.i.ST.id,d,w,y,p,A,-1),null,_,C),g.HC&&(d===u.i.du?this.fb[t][i][s+1]=50:d===u.i.wu?this.fb[t][i+1][s+1]=50:d===u.i.yu?this.fb[t][i+1][s]=50:d===u.i.mu&&(this.fb[t][i][s]=50)),g.bw&&n&&n.LT(i,s,o,d,g.Ow),-1!==g.Co&&e.iI(new a.i(r,t,0,i,s,c.i.Gr[g.Co],!0));else if(o===f.i.uu.id){const l=d+1&3;h?.LT(t,i,s,I,m.zT[d],m.zT[l],g._l(f.i.uu.id,d+4,w,y,p,A,-1),g._l(f.i.uu.id,l,w,y,p,A,-1),_,C),g.pC&&(d===u.i.du?(this.Ib[t][i][s]|=265,this.Ib[t][i][s+1]|=1170):d===u.i.wu?(this.Ib[t][i][s+1]|=1170,this.Ib[t][i+1][s]|=585):d===u.i.yu?(this.Ib[t][i+1][s]|=585,this.Ib[t][i][s]|=1170):d===u.i.mu&&(this.Ib[t][i][s]|=1170,this.Ib[t][i][s]|=585)),g.bw&&n&&n.LT(i,s,o,d,g.Ow),-1!==g.Co&&e.iI(new a.i(r,t,0,i,s,c.i.Gr[g.Co],!0)),16!==g.FC&&h?.kb(t,i,s,g.FC)}else if(o===f.i.pu.id)h?.LT(t,i,s,I,m.jT[d],0,g._l(f.i.pu.id,d,w,y,p,A,-1),null,_,C),g.HC&&(d===u.i.du?this.fb[t][i][s+1]=50:d===u.i.wu?this.fb[t][i+1][s+1]=50:d===u.i.yu?this.fb[t][i+1][s]=50:d===u.i.mu&&(this.fb[t][i][s]=50)),g.bw&&n&&n.LT(i,s,o,d,g.Ow),-1!==g.Co&&e.iI(new a.i(r,t,0,i,s,c.i.Gr[g.Co],!0));else if(o===f.i.Iu.id)h?.Iw(t,i,s,I,g._l(o,d,w,y,p,A,-1),null,_,C,1,1,0),g.bw&&n&&n.Iw(i,s,g.width,g.length,d,g.Ow),-1!==g.Co&&e.iI(new a.i(r,t,2,i,s,c.i.Gr[g.Co],!0));else if(o===f.i.GA.id)h?.rb(t,i,s,I,0,0,_,g._l(f.i.GA.id,u.i.du,w,y,p,A,-1),C,512*d,m.zT[d]),-1!==g.Co&&e.iI(new a.i(r,t,1,i,s,c.i.Gr[g.Co],!0));else if(o===f.i.up.id){let n=16;if(h){const e=h.lu(t,i,s);e>0&&(n=l.i.get(e>>14&32767).FC)}h?.rb(t,i,s,I,m.qT[d]*n,m.$T[d]*n,_,g._l(f.i.GA.id,u.i.du,w,y,p,A,-1),C,512*d,m.zT[d]),-1!==g.Co&&e.iI(new a.i(r,t,1,i,s,c.i.Gr[g.Co],!0))}else o===f.i.kT.id?(h?.rb(t,i,s,I,0,0,_,g._l(f.i.GA.id,u.i.du,w,y,p,A,-1),C,d,256),-1!==g.Co&&e.iI(new a.i(r,t,1,i,s,c.i.Gr[g.Co],!0))):o===f.i.RT.id?(h?.rb(t,i,s,I,0,0,_,g._l(f.i.GA.id,u.i.du,w,y,p,A,-1),C,d,512),-1!==g.Co&&e.iI(new a.i(r,t,1,i,s,c.i.Gr[g.Co],!0))):o===f.i.MT.id&&(h?.rb(t,i,s,I,0,0,_,g._l(f.i.GA.id,u.i.du,w,y,p,A,-1),C,d,768),-1!==g.Co&&e.iI(new a.i(r,t,1,i,s,c.i.Gr[g.Co],!0)))};gb=(t,i,s)=>0==(8&this.en[t][i][s])?t<=0||0==(2&this.en[1][i][s])?t:t-1:0}},7221:(t,i,s)=>{s.d(i,{i:()=>I});var h=s(8078),e=s(6539),n=s(220),r=s(4138),o=s(3693),l=s(4155),a=s(3806),c=s(9118),f=s(9080),u=s(6711),d=s(9865),w=s(2991),y=s(8570),m=s(9190),p=s(5534),A=s(9345);class I{static Rb=new A.Mb(8,32,51,51,!1);static xb=new A.to(100,null);static Nb=new Int32Array(o.i.ze);static Pb=new A.Db(o.i.ze,500,null);static Fb=new A.to(500,null);static Ub=new f.i;static sf=0;static Bb=0;static Gb=0;static Hb=0;static Wb=0;static Yb=0;static Zb=0;static Vb=0;static Xb=0;static zb=0;static jb=0;static qb=0;static $b=0;static Kb=0;static Jb=0;static Qb=0;static tv=0;static iv=0;static sv=0;static hv=0;static ev=0;static nv=0;static rv=!1;static ov=null;static lv=Int32Array.of(19,55,38,155,255,110,137,205,76);static av=Int32Array.of(160,192,80,96,0,144,80,48,160);static cv=Int32Array.of(76,8,137,4,0,1,38,2,19);static fv=Int32Array.of(0,0,2,0,0,2,1,1,0);static uv=Int32Array.of(2,0,0,2,0,0,0,4,4);static dv=Int32Array.of(0,4,4,8,0,0,8,0,0);static wv=Int32Array.of(1,1,0,0,0,8,0,0,8);static yv=Int32Array.of(53,-53,-53,53);static mv=Int32Array.of(-53,-53,53,53);static pv=Int32Array.of(-45,45,45,-45);static Av=Int32Array.of(45,45,-45,-45);static Iv=[new Int32Array(16),Int32Array.of(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),Int32Array.of(1,0,0,0,1,1,0,0,1,1,1,0,1,1,1,1),Int32Array.of(1,1,0,0,1,1,0,0,1,0,0,0,1,0,0,0),Int32Array.of(0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,1),Int32Array.of(0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1),Int32Array.of(1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1),Int32Array.of(1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0),Int32Array.of(0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0),Int32Array.of(1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,1),Int32Array.of(1,1,1,1,1,1,0,0,1,0,0,0,1,0,0,0),Int32Array.of(0,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1),Int32Array.of(0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1)];static gv=[Int32Array.of(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15),Int32Array.of(12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3),Int32Array.of(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0),Int32Array.of(3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12)];static _v=Int32Array.of(41,39248,41,4643,41,41,41,41,41,41,41,41,41,41,41,43086,41,41,41,41,41,41,41,8602,41,28992,41,41,41,41,41,5056,41,41,41,41,41,41,41,41,41,41,41,41,41,41,3131,41,41,41);static Uf=0;static Xo=0;static zo=0;static Tc=-1;static bc=-1;static u=!0;static init=(t,i,s,e,n)=>{this.Bb=0,this.Gb=0,this.Hb=t,this.Wb=i,this.Yb=t/2|0,this.Zb=i/2|0;const r=new A.Mb(9,32,53,53,!1);for(let t=128;t<=384;t+=32)for(let i=0;i<2048;i+=64){this.Vb=h.i.sin[t],this.Xb=h.i.cos[t],this.zb=h.i.sin[i],this.jb=h.i.cos[i];const o=(t-128)/32|0,l=i/64|0;for(let t=-26;t<=26;t++)for(let i=-26;i<=26;i++){const h=128*t,a=128*i;let c=!1;for(let t=-s;t<=e;t+=128)if(this.Cv(h,a,n[o]+t)){c=!0;break}r[o][l][t+25+1][i+25+1]=c}}for(let t=0;t<8;t++)for(let i=0;i<32;i++)for(let s=-25;s<25;s++)for(let h=-25;h<25;h++){let e=!1;t:for(let n=-1;n<=1;n++)for(let o=-1;o<=1;o++){if(r[t][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}}this.Rb[t][i][s+25][h+25]=e}};static Fr=()=>{this.xb=null,this.Nb=null,this.Pb=null,this.Ub=null,this.Rb=null,this.Fb=null,this.ov=null,console.log('World3D unloaded!')};static Ob=(t,i,s,h,e,n,o,l)=>{I.Pb[t][I.Nb[t]++]=new r.i(s/128|0,n/128|0,e/128|0,l/128|0,i,s,n,e,l,h,o)};static Cv=(t,i,s)=>{const h=i*this.zb+t*this.jb>>16,e=i*this.jb-t*this.zb>>16,n=s*this.Vb+e*this.Xb>>16,r=s*this.Xb-e*this.Vb>>16;if(n<50||n>3500)return!1;const o=this.Yb+((h<<9)/n|0),l=this.Zb+((r<<9)/n|0);return o>=this.Bb&&o<=this.Hb&&l>=this.Gb&&l<=this.Wb};Ev;kA;RA;Tv;bv;Pn;vv;Ov;Lv;Sv=0;kv=0;Rv=0;constructor(t,i,s,h){this.Ev=s,this.kA=h,this.RA=i,this.bv=new A.Fn(s,h,i,null),this.vv=new A.fa(s,h+1,i+1),this.Tv=t,this.Pn=new A.to(5e3,null),this.Ov=new Int32Array(1e4),this.Lv=new Int32Array(1e4),this.reset()}reset=()=>{for(let t=0;t<this.Ev;t++)for(let i=0;i<this.kA;i++)for(let s=0;s<this.RA;s++)this.bv[t][i][s]=null;for(let t=0;t<o.i.ze;t++){for(let i=0;i<I.Nb[t];i++)I.Pb[t][i]=null;I.Nb[t]=0}for(let t=0;t<this.Sv;t++)this.Pn[t]=null;this.Sv=0,I.xb.fill(null)};Mm=t=>{this.kv=t;for(let i=0;i<this.kA;i++)for(let s=0;s<this.RA;s++)this.bv[t][i][s]=new n.i(t,i,s)};vb=(t,i)=>{const s=this.bv[0][t][i];for(let s=0;s<3;s++){this.bv[s][t][i]=this.bv[s+1][t][i];const h=this.bv[s][t][i];h&&h.level--}this.bv[0][t][i]||(this.bv[0][t][i]=new n.i(0,t,i));const h=this.bv[0][t][i];h&&(h.Mv=s),this.bv[3][t][i]=null};Tb=(t,i,s,h)=>{const e=this.bv[t][i][s];e&&(e.xv=h)};Cb=(t,i,s,h,e,r,o,l,a,c,f,u,w,p,A,I,g,_,C,E)=>{if(h===m.i._b){for(let h=t;h>=0;h--)this.bv[h][i][s]||(this.bv[h][i][s]=new n.i(h,i,s));const h=this.bv[t][i][s];h&&(h.Nv=new d.i(f,u,w,p,-1,C,!1))}else if(h===m.i.Pv){for(let h=t;h>=0;h--)this.bv[h][i][s]||(this.bv[h][i][s]=new n.i(h,i,s));const h=this.bv[t][i][s];h&&(h.Nv=new d.i(A,I,g,_,r,E,o===l&&o===a&&o===c))}else{for(let h=t;h>=0;h--)this.bv[h][i][s]||(this.bv[h][i][s]=new n.i(h,i,s));const d=this.bv[t][i][s];d&&(d.Dv=new y.i(i,h,I,l,w,e,f,c,E,A,r,_,C,a,g,p,o,s,u))}};nb=(t,i,s,h,e,r,o)=>{this.bv[i][s][h]||(this.bv[i][s][h]=new n.i(i,s,h));const a=this.bv[i][s][h];a&&(a.Fv=new l.i(e,128*s+64,128*h+64,t,r,o))};kw=(t,i,s)=>{const h=this.bv[t][i][s];h&&(h.Fv=null)};Aw=(t,i,s,h,e,r,o,l)=>{let a=0;const c=this.bv[h][t][i];if(c)for(let t=0;t<c.Uv;t++){const i=c.Bv[t];if(!i||!i.model)continue;const s=i.model.nE;s>a&&(a=s)}else this.bv[h][t][i]=new n.i(h,t,i);const f=this.bv[h][t][i];f&&(f.Gv=new u.i(s,128*t+64,128*i+64,r,o,l,e,a))};uw=(t,i,s)=>{const h=this.bv[t][i][s];h&&(h.Gv=null)};LT=(t,i,s,h,e,r,o,l,c,f)=>{if(!o&&!l)return;for(let h=t;h>=0;h--)this.bv[h][i][s]||(this.bv[h][i][s]=new n.i(h,i,s));const u=this.bv[t][i][s];u&&(u.Hv=new a.i(h,128*i+64,128*s+64,e,r,o,l,c,f))};Tw=(t,i,s,h)=>{const e=this.bv[t][i][s];1===h&&e&&(e.Hv=null)};rb=(t,i,s,h,e,r,o,l,a,f,u)=>{if(!l)return;for(let h=t;h>=0;h--)this.bv[h][i][s]||(this.bv[h][i][s]=new n.i(h,i,s));const d=this.bv[t][i][s];d&&(d.Wv=new c.i(h,128*i+e+64,128*s+r+64,u,f,l,o,a))};Lw=(t,i,s)=>{const h=this.bv[t][i][s];h&&(h.Wv=null)};kb=(t,i,s,h)=>{const e=this.bv[t][i][s];if(!e)return;const n=e.Wv;if(!n)return;const r=128*i+64,o=128*s+64;n.x=r+((n.x-r)*h/16|0),n.z=o+((n.z-o)*h/16|0)};BA=(t,i,s,h)=>{if(!h)return;const e=this.bv[t][i][s];if(!e)return;const n=e.Wv;n&&(n.model=h)};YA=(t,i,s,h)=>{if(!h)return;const e=this.bv[t][i][s];if(!e)return;const n=e.Fv;n&&(n.model=h)};WA=(t,i,s,h)=>{if(!h)return;const e=this.bv[t][i][s];if(!e)return;const n=e.Hv;n&&(n.Yv=h)};HA=(t,i,s,h,e)=>{if(!h)return;const n=this.bv[s][t][i];if(!n)return;const r=n.Hv;r&&(r.Yv=h,r.Zv=e)};Iw=(t,i,s,h,e,n,r,o,l,a,c)=>{if(!e&&!n)return!0;const f=128*i+64*l,u=128*s+64*a;return this.Vv(f,u,h,t,i,s,l,a,e,n,r,o,c,!1)};TA=(t,i,s,h,e,n,r,o,l,a)=>{if(!e&&!n)return!0;let c=i-l,f=h-l,u=i+l,d=h+l;return a&&(o>640&&o<1408&&(d+=128),o>1152&&o<1920&&(u+=128),(o>1664||o<384)&&(f-=128),o>128&&o<896&&(c-=128)),c=c/128|0,f=f/128|0,u=u/128|0,d=d/128|0,this.Vv(i,h,s,t,c,f,u+1-c,d-f+1,e,n,r,0,o,!0)};OA=(t,i,s,h,e,n,r,o,l,a,c,f)=>!l&&!a||this.Vv(i,h,s,t,e,n,r+1-e,o-n+1,l,a,c,0,f,!0);Sw=(t,i,s)=>{const h=this.bv[t][i][s];if(h)for(let t=0;t<h.Uv;t++){const e=h.Bv[t];if(e&&2==(e.Xv>>29&3)&&e.zv===i&&e.jv===s)return void this.qv(e)}};UA=(t,i,s,h)=>{if(!h)return;const e=this.bv[t][i][s];if(e)for(let t=0;t<e.Uv;t++){const i=e.Bv[t];if(i&&2==(i.Xv>>29&3))return void(i.model=h)}};nf=()=>{for(let t=0;t<this.Sv;t++){const i=this.Pn[t];i&&this.qv(i),this.Pn[t]=null}this.Sv=0};lu=(t,i,s)=>{const h=this.bv[t][i][s];return h&&h.Hv?h.Hv.Xv:0};Cw=(t,i,s)=>{const h=this.bv[t][s][i];return h&&h.Wv?h.Wv.Xv:0};Au=(t,i,s)=>{const h=this.bv[t][i][s];if(!h)return 0;for(let t=0;t<h.Uv;t++){const e=h.Bv[t];if(e&&2==(e.Xv>>29&3)&&e.zv===i&&e.jv===s)return e.Xv}return 0};su=(t,i,s)=>{const h=this.bv[t][i][s];return h&&h.Fv?h.Fv.Xv:0};au=(t,i,s,h)=>{const e=this.bv[t][i][s];if(e){if(e.Hv&&e.Hv.Xv===h)return 255&e.Hv.info;if(e.Wv&&e.Wv.Xv===h)return 255&e.Wv.info;if(e.Fv&&e.Fv.Xv===h)return 255&e.Fv.info;for(let t=0;t<e.Uv;t++){const i=e.Bv[t];if(i&&i.Xv===h)return 255&i.info}return-1}return-1};bb=(t,i,s,h,e)=>{const n=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;for(let i=0;i<this.Ev;i++)for(let r=0;r<this.kA;r++)for(let o=0;o<this.RA;o++){const l=this.bv[i][r][o];if(!l)continue;const a=l.Hv;a&&a.Yv&&a.Yv.$v&&(this.Kv(i,r,o,1,1,a.Yv),a.Zv&&a.Zv.$v&&(this.Kv(i,r,o,1,1,a.Zv),this.Jv(a.Yv,a.Zv,0,0,0,!1),a.Zv.Qv(t,n,s,h,e)),a.Yv.Qv(t,n,s,h,e));for(let a=0;a<l.Uv;a++){const c=l.Bv[a];c&&c.model&&c.model.$v&&(this.Kv(i,r,o,c.tO+1-c.zv,c.iO-c.jv+1,c.model),c.model.Qv(t,n,s,h,e))}const c=l.Fv;c&&c.model&&c.model.$v&&(this.sO(i,r,o,c.model),c.model.Qv(t,n,s,h,e))}};sO=(t,i,s,h)=>{if(i<this.kA){const e=this.bv[t][i+1][s];e&&e.Fv&&e.Fv.model&&e.Fv.model.$v&&this.Jv(h,e.Fv.model,128,0,0,!0)}if(s<this.kA){const e=this.bv[t][i][s+1];e&&e.Fv&&e.Fv.model&&e.Fv.model.$v&&this.Jv(h,e.Fv.model,0,0,128,!0)}if(i<this.kA&&s<this.RA){const e=this.bv[t][i+1][s+1];e&&e.Fv&&e.Fv.model&&e.Fv.model.$v&&this.Jv(h,e.Fv.model,128,0,128,!0)}if(i<this.kA&&s>0){const e=this.bv[t][i+1][s-1];e&&e.Fv&&e.Fv.model&&e.Fv.model.$v&&this.Jv(h,e.Fv.model,128,0,-128,!0)}};Kv=(t,i,s,h,e,n)=>{let r=!0,o=i;const l=i+h,a=s-1,c=s+e;for(let f=t;f<=t+1;f++)if(f!==this.Ev){for(let u=o;u<=l;u++)if(!(u<0||u>=this.kA))for(let o=a;o<=c;o++){if(o<0||o>=this.RA||r&&u<l&&o<c&&(o>=s||u===i))continue;const a=this.bv[f][u][o];if(!a)continue;const d=128*(u-i)+64*(1-h),w=128*(o-s)+64*(1-e),y=((this.Tv[f][u][o]+this.Tv[f][u+1][o]+this.Tv[f][u][o+1]+this.Tv[f][u+1][o+1])/4|0)-((this.Tv[t][i][s]+this.Tv[t][i+1][s]+this.Tv[t][i][s+1]+this.Tv[t][i+1][s+1])/4|0),m=a.Hv;m&&m.Yv&&m.Yv.$v&&this.Jv(n,m.Yv,d,y,w,r),m&&m.Zv&&m.Zv.$v&&this.Jv(n,m.Zv,d,y,w,r);for(let t=0;t<a.Uv;t++){const o=a.Bv[t];if(!o||!o.model||!o.model.$v)continue;const l=o.tO+1-o.zv,c=o.iO+1-o.jv;this.Jv(n,o.model,128*(o.zv-i)+64*(l-h),y,128*(o.jv-s)+64*(c-e),r)}}o--,r=!1}};Jv=(t,i,s,h,e,n)=>{this.Rv++;let r=0;const o=i.KC,l=i.$C;if(t.$v&&t.hO)for(let n=0;n<t.$C;n++){const a=t.$v[n],c=t.hO[n];if(c&&0!==c.w){const f=t.QC[n]-h;if(f>i.eO)continue;const u=t.KC[n]-s;if(u<i.nO||u>i.rO)continue;const d=t.JC[n]-e;if(d<i.oO||d>i.lO)continue;if(i.$v&&i.hO)for(let t=0;t<l;t++){const s=i.$v[t],h=i.hO[t];u!==o[t]||d!==i.JC[t]||f!==i.QC[t]||h&&0===h.w||(a&&s&&h&&(a.x+=h.x,a.y+=h.y,a.z+=h.z,a.w+=h.w,s.x+=c.x,s.y+=c.y,s.z+=c.z,s.w+=c.w,r++),this.Ov[n]=this.Rv,this.Lv[t]=this.Rv)}}}if(!(r<3)&&n){if(t.aO)for(let i=0;i<t.cO;i++)this.Ov[t.fO[i]]===this.Rv&&this.Ov[t.uO[i]]===this.Rv&&this.Ov[t.dO[i]]===this.Rv&&(t.aO[i]=-1);if(i.aO)for(let t=0;t<i.cO;t++)this.Lv[i.fO[t]]===this.Rv&&this.Lv[i.uO[t]]===this.Rv&&this.Lv[i.dO[t]]===this.Rv&&(i.aO[t]=-1)}};tu=(t,i,s,h,e,n)=>{const r=this.bv[t][i][s];if(!r)return;const o=r.Nv;if(o){const t=o.color;if(0!==t)for(let i=0;i<4;i++)h[e]=t,h[e+1]=t,h[e+2]=t,h[e+3]=t,e+=n;return}const l=r.Dv;if(!l)return;const a=l.shape,c=l.rotation,f=l.wO,u=l.yO,d=I.Iv[a],w=I.gv[c];let y=0;if(0===f)for(let t=0;t<4;t++)0!==d[w[y++]]&&(h[e]=u),0!==d[w[y++]]&&(h[e+1]=u),0!==d[w[y++]]&&(h[e+2]=u),0!==d[w[y++]]&&(h[e+3]=u),e+=n;else for(let t=0;t<4;t++)h[e]=0===d[w[y++]]?f:u,h[e+1]=0===d[w[y++]]?f:u,h[e+2]=0===d[w[y++]]?f:u,h[e+3]=0===d[w[y++]]?f:u,e+=n};click=(t,i)=>{I.rv=!0,I.Xo=t,I.zo=i,I.Tc=-1,I.bc=-1};draw=(t,i,s,e,n,r,o)=>{t<0?t=0:t>=128*this.kA&&(t=128*this.kA-1),s<0?s=0:s>=128*this.RA&&(s=128*this.RA-1),I.sf++,I.Vb=h.i.sin[r],I.Xb=h.i.cos[r],I.zb=h.i.sin[n],I.jb=h.i.cos[n],I.ov=I.Rb[(r-128)/32|0][n/64|0],I.qb=t,I.$b=i,I.Kb=s,I.Jb=t/128|0,I.Qb=s/128|0,I.ev=e,I.tv=I.Jb-25,I.tv<0&&(I.tv=0),I.sv=I.Qb-25,I.sv<0&&(I.sv=0),I.iv=I.Jb+25,I.iv>this.kA&&(I.iv=this.kA),I.hv=I.Qb+25,I.hv>this.RA&&(I.hv=this.RA),this.mO(),I.nv=0;for(let t=this.kv;t<this.Ev;t++){const s=this.bv[t];for(let h=I.tv;h<I.iv;h++)for(let n=I.sv;n<I.hv;n++){const r=s[h][n];r&&(r.xv<=e&&(I.ov[h+25-I.Jb][n+25-I.Qb]||this.Tv[t][h][n]-i>=2e3)?(r.visible=!0,r.update=!0,r.pO=r.Uv>0,I.nv++):(r.visible=!1,r.update=!1,r.AO=0))}}for(let t=this.kv;t<this.Ev;t++){const i=this.bv[t];for(let t=-25;t<=0;t++){const s=I.Jb+t,h=I.Jb-t;if(!(s<I.tv&&h>=I.iv))for(let t=-25;t<=0;t++){const e=I.Qb+t,n=I.Qb-t;let r;if(s>=I.tv&&(e>=I.sv&&(r=i[s][e],r&&r.visible&&this.IO(r,!0,o)),n<I.hv&&(r=i[s][n],r&&r.visible&&this.IO(r,!0,o))),h<I.iv&&(e>=I.sv&&(r=i[h][e],r&&r.visible&&this.IO(r,!0,o)),n<I.hv&&(r=i[h][n],r&&r.visible&&this.IO(r,!0,o))),0===I.nv)return void(I.rv=!1)}}}for(let t=this.kv;t<this.Ev;t++){const i=this.bv[t];for(let t=-25;t<=0;t++){const s=I.Jb+t,h=I.Jb-t;if(!(s<I.tv&&h>=I.iv))for(let t=-25;t<=0;t++){const e=I.Qb+t,n=I.Qb-t;let r;if(s>=I.tv&&(e>=I.sv&&(r=i[s][e],r&&r.visible&&this.IO(r,!1,o)),n<I.hv&&(r=i[s][n],r&&r.visible&&this.IO(r,!1,o))),h<I.iv&&(e>=I.sv&&(r=i[h][e],r&&r.visible&&this.IO(r,!1,o)),n<I.hv&&(r=i[h][n],r&&r.visible&&this.IO(r,!1,o))),0===I.nv)return void(I.rv=!1)}}}};Vv=(t,i,s,h,r,o,l,a,c,f,u,d,w,y)=>{if(!c&&!f)return!1;for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){if(t<0||i<0||t>=this.kA||i>=this.RA)return!1;const s=this.bv[h][t][i];if(s&&s.Uv>=5)return!1}const m=new e.i(h,s,t,i,c,f,w,r,r+l-1,o,o+a-1,u,d);for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){let s=0;t>r&&(s|=1),t<r+l-1&&(s+=4),i>o&&(s+=8),i<o+a-1&&(s+=2);for(let s=h;s>=0;s--)this.bv[s][t][i]||(this.bv[s][t][i]=new n.i(s,t,i));const e=this.bv[h][t][i];e&&(e.Bv[e.Uv]=m,e.gO[e.Uv]=s,e._O|=s,e.Uv++)}return y&&(this.Pn[this.Sv++]=m),!0};qv=t=>{for(let i=t.zv;i<=t.tO;i++)for(let s=t.jv;s<=t.iO;s++){const h=this.bv[t.level][i][s];if(h){for(let i=0;i<h.Uv;i++)if(h.Bv[i]===t){h.Uv--;for(let t=i;t<h.Uv;t++)h.Bv[t]=h.Bv[t+1],h.gO[t]=h.gO[t+1];h.Bv[h.Uv]=null;break}h._O=0;for(let t=0;t<h.Uv;t++)h._O|=h.gO[t]}}};mO=()=>{const t=I.Nb[I.ev],i=I.Pb[I.ev];I.Uf=0;for(let s=0;s<t;s++){const t=i[s];if(!t)continue;let h,e,n,r;if(1===t.type){if(h=t.LA+25-I.Jb,h>=0&&h<=50){e=t.SA+25-I.Qb,e<0&&(e=0),n=t.RA+25-I.Qb,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.ov&&I.ov[h][e++]){i=!0;break}if(i){if(r=I.qb-t.nO,r>32)t.mode=1;else{if(r>=-32)continue;t.mode=2,r=-r}t.CO=(t.oO-I.Kb<<8)/r|0,t.EO=(t.lO-I.Kb<<8)/r|0,t.TO=(t.eO-I.$b<<8)/r|0,t.bO=(t.rE-I.$b<<8)/r|0,I.Fb[I.Uf++]=t}}}else if(2===t.type){if(h=t.SA+25-I.Qb,h>=0&&h<=50){e=t.LA+25-I.Jb,e<0&&(e=0),n=t.kA+25-I.Jb,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.ov&&I.ov[e++][h]){i=!0;break}if(i){if(r=I.Kb-t.oO,r>32)t.mode=3;else{if(r>=-32)continue;t.mode=4,r=-r}t.vO=(t.nO-I.qb<<8)/r|0,t.OO=(t.rO-I.qb<<8)/r|0,t.TO=(t.eO-I.$b<<8)/r|0,t.bO=(t.rE-I.$b<<8)/r|0,I.Fb[I.Uf++]=t}}}else if(4===t.type&&(h=t.eO-I.$b,h>128&&(e=t.SA+25-I.Qb,e<0&&(e=0),n=t.RA+25-I.Qb,n>50&&(n=50),e<=n))){let i=t.LA+25-I.Jb;i<0&&(i=0),r=t.kA+25-I.Jb,r>50&&(r=50);let s=!1;t:for(let t=i;t<=r;t++)for(let i=e;i<=n;i++)if(I.ov&&I.ov[t][i]){s=!0;break t}s&&(t.mode=5,t.vO=(t.nO-I.qb<<8)/h|0,t.OO=(t.rO-I.qb<<8)/h|0,t.CO=(t.oO-I.Kb<<8)/h|0,t.EO=(t.lO-I.Kb<<8)/h|0,I.Fb[I.Uf++]=t)}}};IO=(t,i,s)=>{for(I.Ub.iI(t);;){let t;do{if(t=I.Ub.LO(),!t)return}while(!t.update);const h=t.x,e=t.z,n=t.level,r=t.SO,o=this.bv[n];if(t.visible){if(i){if(n>0){const t=this.bv[n-1][h][e];if(t&&t.update)continue}if(h<=I.Jb&&h>I.tv){const i=o[h-1][e];if(i&&i.update&&(i.visible||0==(1&t._O)))continue}if(h>=I.Jb&&h<I.iv-1){const i=o[h+1][e];if(i&&i.update&&(i.visible||0==(4&t._O)))continue}if(e<=I.Qb&&e>I.sv){const i=o[h][e-1];if(i&&i.update&&(i.visible||0==(8&t._O)))continue}if(e>=I.Qb&&e<I.hv-1){const i=o[h][e+1];if(i&&i.update&&(i.visible||0==(2&t._O)))continue}}else i=!0;if(t.visible=!1,t.Mv){const i=t.Mv;i.Nv?this.kO(0,h,e)||this.RO(i.Nv,0,h,e,I.Vb,I.Xb,I.zb,I.jb):i.Dv&&!this.kO(0,h,e)&&this.MO(h,e,i.Dv,I.Vb,I.Xb,I.zb,I.jb);const n=i.Hv;n&&n.Yv?.draw(0,I.Vb,I.Xb,I.zb,I.jb,n.x-I.qb,n.y-I.$b,n.z-I.Kb,n.Xv);for(let t=0;t<i.Uv;t++){const h=i.Bv[t];if(h){let t=h.model;t||(t=h.xO?.draw(s)??null),t?.draw(h.bA,I.Vb,I.Xb,I.zb,I.jb,h.x-I.qb,h.y-I.$b,h.z-I.Kb,h.Xv)}}}let l=!1;t.Nv?this.kO(r,h,e)||(l=!0,this.RO(t.Nv,r,h,e,I.Vb,I.Xb,I.zb,I.jb)):t.Dv&&!this.kO(r,h,e)&&(l=!0,this.MO(h,e,t.Dv,I.Vb,I.Xb,I.zb,I.jb));let a=0,c=0;const f=t.Hv,u=t.Wv;if((f||u)&&(I.Jb===h?a+=1:I.Jb<h&&(a+=2),I.Qb===e?a+=3:I.Qb>e&&(a+=6),c=I.lv[a],t.NO=I.cv[a]),f&&(0==(f.PO&I.av[a])?t.AO=0:16===f.PO?(t.AO=3,t.DO=I.fv[a],t.FO=3-t.DO):32===f.PO?(t.AO=6,t.DO=I.uv[a],t.FO=6-t.DO):64===f.PO?(t.AO=12,t.DO=I.dv[a],t.FO=12-t.DO):(t.AO=9,t.DO=I.wv[a],t.FO=9-t.DO),0==(f.PO&c)||this.UO(r,h,e,f.PO)||f.Yv?.draw(0,I.Vb,I.Xb,I.zb,I.jb,f.x-I.qb,f.y-I.$b,f.z-I.Kb,f.Xv),0==(f.BO&c)||this.UO(r,h,e,f.BO)||f.Zv?.draw(0,I.Vb,I.Xb,I.zb,I.jb,f.x-I.qb,f.y-I.$b,f.z-I.Kb,f.Xv)),u&&!this.visible(r,h,e,u.model.rE))if(0!=(u.type&c))u.model.draw(u.angle,I.Vb,I.Xb,I.zb,I.jb,u.x-I.qb,u.y-I.$b,u.z-I.Kb,u.Xv);else if(0!=(768&u.type)){const t=u.x-I.qb,i=u.y-I.$b,s=u.z-I.Kb,h=u.angle;let e,n;if(e=h===p.i.wu||h===p.i.yu?-t:t,n=h===p.i.yu||h===p.i.mu?-s:s,0!=(256&u.type)&&n<e){const e=t+I.yv[h],n=s+I.mv[h];u.model.draw(512*h+256,I.Vb,I.Xb,I.zb,I.jb,e,i,n,u.Xv)}if(0!=(512&u.type)&&n>e){const e=t+I.pv[h],n=s+I.Av[h];u.model.draw(512*h+1280&2047,I.Vb,I.Xb,I.zb,I.jb,e,i,n,u.Xv)}}if(l){const i=t.Fv;i&&i.model?.draw(0,I.Vb,I.Xb,I.zb,I.jb,i.x-I.qb,i.y-I.$b,i.z-I.Kb,i.Xv);const s=t.Gv;s&&0===s.offset&&(s.GO&&s.GO.draw(0,I.Vb,I.Xb,I.zb,I.jb,s.x-I.qb,s.y-I.$b,s.z-I.Kb,s.Xv),s.HO&&s.HO.draw(0,I.Vb,I.Xb,I.zb,I.jb,s.x-I.qb,s.y-I.$b,s.z-I.Kb,s.Xv),s.WO&&s.WO.draw(0,I.Vb,I.Xb,I.zb,I.jb,s.x-I.qb,s.y-I.$b,s.z-I.Kb,s.Xv))}const d=t._O;if(0!==d){if(h<I.Jb&&0!=(4&d)){const t=o[h+1][e];t&&t.update&&I.Ub.iI(t)}if(e<I.Qb&&0!=(2&d)){const t=o[h][e+1];t&&t.update&&I.Ub.iI(t)}if(h>I.Jb&&0!=(1&d)){const t=o[h-1][e];t&&t.update&&I.Ub.iI(t)}if(e>I.Qb&&0!=(8&d)){const t=o[h][e-1];t&&t.update&&I.Ub.iI(t)}}}if(0!==t.AO){let i=!0;for(let s=0;s<t.Uv;s++){const h=t.Bv[s];if(h&&(h.sf!==I.sf&&(t.gO[s]&t.AO)===t.DO)){i=!1;break}}if(i){const i=t.Hv;i&&!this.UO(r,h,e,i.PO)&&i.Yv?.draw(0,I.Vb,I.Xb,I.zb,I.jb,i.x-I.qb,i.y-I.$b,i.z-I.Kb,i.Xv),t.AO=0}}if(t.pO){const i=t.Uv;t.pO=!1;let n=0;t:for(let s=0;s<i;s++){const i=t.Bv[s];if(!i||i.sf===I.sf)continue;for(let s=i.zv;s<=i.tO;s++)for(let h=i.jv;h<=i.iO;h++){const e=o[s][h];if(e){if(!e.visible){if(0===e.AO)continue;let n=0;if(s>i.zv&&(n+=1),s<i.tO&&(n+=4),h>i.jv&&(n+=8),h<i.iO&&(n+=2),(n&e.AO)!==t.FO)continue}t.pO=!0;continue t}}I.xb[n++]=i;let h=I.Jb-i.zv;const e=i.tO-I.Jb;e>h&&(h=e);const r=I.Qb-i.jv,l=i.iO-I.Qb;i.YO=l>r?h+l:h+r}for(;;){let t=-50,i=-1;for(let s=0;s<n;s++){const h=I.xb[s];h&&(h.sf!==I.sf&&h.YO>t&&(t=h.YO,i=s))}if(-1===i)break;const l=I.xb[i];if(l){l.sf=I.sf;let t=l.model;t||(t=l.xO?.draw(s)??null),t&&!this.ZO(r,l.zv,l.tO,l.jv,l.iO,t.rE)&&t.draw(l.bA,I.Vb,I.Xb,I.zb,I.jb,l.x-I.qb,l.y-I.$b,l.z-I.Kb,l.Xv);for(let t=l.zv;t<=l.tO;t++)for(let i=l.jv;i<=l.iO;i++){const s=o[t][i];s&&(0!==s.AO?I.Ub.iI(s):t===h&&i===e||!s.update||I.Ub.iI(s))}}}if(t.pO)continue}if(!t.update||0!==t.AO)continue;if(h<=I.Jb&&h>I.tv){const t=o[h-1][e];if(t&&t.update)continue}if(h>=I.Jb&&h<I.iv-1){const t=o[h+1][e];if(t&&t.update)continue}if(e<=I.Qb&&e>I.sv){const t=o[h][e-1];if(t&&t.update)continue}if(e>=I.Qb&&e<I.hv-1){const t=o[h][e+1];if(t&&t.update)continue}t.update=!1,I.nv--;const l=t.Gv;if(l&&0!==l.offset&&(l.GO&&l.GO.draw(0,I.Vb,I.Xb,I.zb,I.jb,l.x-I.qb,l.y-I.$b-l.offset,l.z-I.Kb,l.Xv),l.HO&&l.HO.draw(0,I.Vb,I.Xb,I.zb,I.jb,l.x-I.qb,l.y-I.$b-l.offset,l.z-I.Kb,l.Xv),l.WO&&l.WO.draw(0,I.Vb,I.Xb,I.zb,I.jb,l.x-I.qb,l.y-I.$b-l.offset,l.z-I.Kb,l.Xv)),0!==t.NO){const i=t.Wv;if(i&&!this.visible(r,h,e,i.model.rE))if(0!=(i.type&t.NO))i.model.draw(i.angle,I.Vb,I.Xb,I.zb,I.jb,i.x-I.qb,i.y-I.$b,i.z-I.Kb,i.Xv);else if(0!=(768&i.type)){const t=i.x-I.qb,s=i.y-I.$b,h=i.z-I.Kb,e=i.angle;let n,r;if(n=e===p.i.wu||e===p.i.yu?-t:t,r=e===p.i.yu||e===p.i.mu?-h:h,0!=(256&i.type)&&r>=n){const n=t+I.yv[e],r=h+I.mv[e];i.model.draw(512*e+256,I.Vb,I.Xb,I.zb,I.jb,n,s,r,i.Xv)}if(0!=(512&i.type)&&r<=n){const n=t+I.pv[e],r=h+I.Av[e];i.model.draw(512*e+1280&2047,I.Vb,I.Xb,I.zb,I.jb,n,s,r,i.Xv)}}const s=t.Hv;s&&(0==(s.BO&t.NO)||this.UO(r,h,e,s.BO)||s.Zv?.draw(0,I.Vb,I.Xb,I.zb,I.jb,s.x-I.qb,s.y-I.$b,s.z-I.Kb,s.Xv),0==(s.PO&t.NO)||this.UO(r,h,e,s.PO)||s.Yv?.draw(0,I.Vb,I.Xb,I.zb,I.jb,s.x-I.qb,s.y-I.$b,s.z-I.Kb,s.Xv))}if(n<this.Ev-1){const t=this.bv[n+1][h][e];t&&t.update&&I.Ub.iI(t)}if(h<I.Jb){const t=o[h+1][e];t&&t.update&&I.Ub.iI(t)}if(e<I.Qb){const t=o[h][e+1];t&&t.update&&I.Ub.iI(t)}if(h>I.Jb){const t=o[h-1][e];t&&t.update&&I.Ub.iI(t)}if(e>I.Qb){const t=o[h][e-1];t&&t.update&&I.Ub.iI(t)}}};RO=(t,i,s,e,n,r,o,l)=>{let a,c,f,u,d=a=(s<<7)-I.qb,y=c=(e<<7)-I.Kb,m=f=d+128,p=u=y+128,A=this.Tv[i][s][e]-I.$b,g=this.Tv[i][s+1][e]-I.$b,_=this.Tv[i][s+1][e+1]-I.$b,C=this.Tv[i][s][e+1]-I.$b,E=y*o+d*l>>16;if(y=y*l-d*o>>16,d=E,E=A*r-y*n>>16,y=A*n+y*r>>16,A=E,y<50)return;if(E=c*o+m*l>>16,c=c*l-m*o>>16,m=E,E=g*r-c*n>>16,c=g*n+c*r>>16,g=E,c<50)return;if(E=p*o+f*l>>16,p=p*l-f*o>>16,f=E,E=_*r-p*n>>16,p=_*n+p*r>>16,_=E,p<50)return;if(E=u*o+a*l>>16,u=u*l-a*o>>16,a=E,E=C*r-u*n>>16,u=C*n+u*r>>16,C=E,u<50)return;const T=h.i.Al+((d<<9)/y|0),b=h.i.Il+((A<<9)/y|0),v=h.i.Al+((m<<9)/c|0),O=h.i.Il+((g<<9)/c|0),L=h.i.Al+((f<<9)/p|0),S=h.i.Il+((_<<9)/p|0),k=h.i.Al+((a<<9)/u|0),R=h.i.Il+((C<<9)/u|0);if(h.i.alpha=0,(L-k)*(O-R)-(S-R)*(v-k)>0)if(h.i.VO=L<0||k<0||v<0||L>w.i.XO||k>w.i.XO||v>w.i.XO,I.rv&&this.zO(I.Xo,I.zo,S,R,O,L,k,v)&&(I.Tc=s,I.bc=e),-1===t.jO)12345678!==t.qO&&h.i.$O(L,k,v,S,R,O,t.qO,t.KO,t.JO);else if(I.u){const i=I._v[t.jO];h.i.$O(L,k,v,S,R,O,this.QO(i,t.qO),this.QO(i,t.KO),this.QO(i,t.JO))}else t.flat?h.i.tL(L,k,v,S,R,O,t.qO,t.KO,t.JO,d,A,y,m,a,g,C,c,u,t.jO):h.i.tL(L,k,v,S,R,O,t.qO,t.KO,t.JO,f,_,p,a,m,C,g,u,c,t.jO);if(!((T-v)*(R-O)-(b-O)*(k-v)<=0))if(h.i.VO=T<0||v<0||k<0||T>w.i.XO||v>w.i.XO||k>w.i.XO,I.rv&&this.zO(I.Xo,I.zo,b,O,R,T,v,k)&&(I.Tc=s,I.bc=e),-1!==t.jO){if(!I.u)return void h.i.tL(T,v,k,b,O,R,t.iL,t.JO,t.KO,d,A,y,m,a,g,C,c,u,t.jO);const i=I._v[t.jO];h.i.$O(T,v,k,b,O,R,this.QO(i,t.iL),this.QO(i,t.JO),this.QO(i,t.KO))}else 12345678!==t.iL&&h.i.$O(T,v,k,b,O,R,t.iL,t.JO,t.KO)};MO=(t,i,s,e,n,r,o)=>{let l=s.KC.length;for(let t=0;t<l;t++){let i=s.KC[t]-I.qb,l=s.QC[t]-I.$b,a=s.JC[t]-I.Kb,c=a*r+i*o>>16;if(a=a*o-i*r>>16,i=c,c=l*n-a*e>>16,a=l*e+a*n>>16,l=c,a<50)return;s.sL&&(y.i.hL[t]=i,y.i.eL[t]=l,y.i.nL[t]=a),y.i.rL[t]=h.i.Al+((i<<9)/a|0),y.i.oL[t]=h.i.Il+((l<<9)/a|0)}h.i.alpha=0,l=s.lL.length;for(let e=0;e<l;e++){const n=s.lL[e],r=s.aL[e],o=s.cL[e],l=y.i.rL[n],a=y.i.rL[r],c=y.i.rL[o],f=y.i.oL[n],u=y.i.oL[r],d=y.i.oL[o];if((l-a)*(d-u)-(f-u)*(c-a)>0)if(h.i.VO=l<0||a<0||c<0||l>w.i.XO||a>w.i.XO||c>w.i.XO,I.rv&&this.zO(I.Xo,I.zo,f,u,d,l,a,c)&&(I.Tc=t,I.bc=i),s.sL&&-1!==s.sL[e])if(I.u){const t=I._v[s.sL[e]];h.i.$O(l,a,c,f,u,d,this.QO(t,s.fL[e]),this.QO(t,s.uL[e]),this.QO(t,s.dL[e]))}else s.flat?h.i.tL(l,a,c,f,u,d,s.fL[e],s.uL[e],s.dL[e],y.i.hL[0],y.i.eL[0],y.i.nL[0],y.i.hL[1],y.i.hL[3],y.i.eL[1],y.i.eL[3],y.i.nL[1],y.i.nL[3],s.sL[e]):h.i.tL(l,a,c,f,u,d,s.fL[e],s.uL[e],s.dL[e],y.i.hL[n],y.i.eL[n],y.i.nL[n],y.i.hL[r],y.i.hL[o],y.i.eL[r],y.i.eL[o],y.i.nL[r],y.i.nL[o],s.sL[e]);else 12345678!==s.fL[e]&&h.i.$O(l,a,c,f,u,d,s.fL[e],s.uL[e],s.dL[e])}};kO=(t,i,s)=>{const h=this.vv[t][i][s];if(h===-I.sf)return!1;if(h===I.sf)return!0;{const h=i<<7,e=s<<7;return this.wL(h+1,this.Tv[t][i][s],e+1)&&this.wL(h+128-1,this.Tv[t][i+1][s],e+1)&&this.wL(h+128-1,this.Tv[t][i+1][s+1],e+128-1)&&this.wL(h+1,this.Tv[t][i][s+1],e+128-1)?(this.vv[t][i][s]=I.sf,!0):(this.vv[t][i][s]=-I.sf,!1)}};UO=(t,i,s,h)=>{if(!this.kO(t,i,s))return!1;const e=i<<7,n=s<<7,r=this.Tv[t][i][s]-1,o=r-120,l=r-230,a=r-238;if(h<16){if(1===h){if(e>I.qb){if(!this.wL(e,r,n))return!1;if(!this.wL(e,r,n+128))return!1}if(t>0){if(!this.wL(e,o,n))return!1;if(!this.wL(e,o,n+128))return!1}return!!this.wL(e,l,n)&&this.wL(e,l,n+128)}if(2===h){if(n<I.Kb){if(!this.wL(e,r,n+128))return!1;if(!this.wL(e+128,r,n+128))return!1}if(t>0){if(!this.wL(e,o,n+128))return!1;if(!this.wL(e+128,o,n+128))return!1}return!!this.wL(e,l,n+128)&&this.wL(e+128,l,n+128)}if(4===h){if(e<I.qb){if(!this.wL(e+128,r,n))return!1;if(!this.wL(e+128,r,n+128))return!1}if(t>0){if(!this.wL(e+128,o,n))return!1;if(!this.wL(e+128,o,n+128))return!1}return!!this.wL(e+128,l,n)&&this.wL(e+128,l,n+128)}if(8===h){if(n>I.Kb){if(!this.wL(e,r,n))return!1;if(!this.wL(e+128,r,n))return!1}if(t>0){if(!this.wL(e,o,n))return!1;if(!this.wL(e+128,o,n))return!1}return!!this.wL(e,l,n)&&this.wL(e+128,l,n)}}return!!this.wL(e+64,a,n+64)&&(16===h?this.wL(e,l,n+128):32===h?this.wL(e+128,l,n+128):64===h?this.wL(e+128,l,n):128===h?this.wL(e,l,n):(console.warn('Warning unsupported wall type!'),!0))};visible=(t,i,s,h)=>{if(this.kO(t,i,s)){const e=i<<7,n=s<<7;return this.wL(e+1,this.Tv[t][i][s]-h,n+1)&&this.wL(e+128-1,this.Tv[t][i+1][s]-h,n+1)&&this.wL(e+128-1,this.Tv[t][i+1][s+1]-h,n+128-1)&&this.wL(e+1,this.Tv[t][i][s+1]-h,n+128-1)}return!1};ZO=(t,i,s,h,e,n)=>{let r,o;if(i!==s||h!==e){for(r=i;r<=s;r++)for(o=h;o<=e;o++)if(this.vv[t][r][o]===-I.sf)return!1;o=1+(i<<7);const l=2+(h<<7),a=this.Tv[t][i][h]-n;if(!this.wL(o,a,l))return!1;const c=(s<<7)-1;if(!this.wL(c,a,l))return!1;const f=(e<<7)-1;return!!this.wL(o,a,f)&&this.wL(c,a,f)}return!!this.kO(t,i,h)&&(r=i<<7,o=h<<7,this.wL(r+1,this.Tv[t][i][h]-n,o+1)&&this.wL(r+128-1,this.Tv[t][i+1][h]-n,o+1)&&this.wL(r+128-1,this.Tv[t][i+1][h+1]-n,o+128-1)&&this.wL(r+1,this.Tv[t][i][h+1]-n,o+128-1))};wL=(t,i,s)=>{for(let h=0;h<I.Uf;h++){const e=I.Fb[h];if(e)if(1===e.mode){const h=e.nO-t;if(h>0){const t=e.oO+(e.CO*h>>8),n=e.lO+(e.EO*h>>8),r=e.eO+(e.TO*h>>8),o=e.rE+(e.bO*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(2===e.mode){const h=t-e.nO;if(h>0){const t=e.oO+(e.CO*h>>8),n=e.lO+(e.EO*h>>8),r=e.eO+(e.TO*h>>8),o=e.rE+(e.bO*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(3===e.mode){const h=e.oO-s;if(h>0){const s=e.nO+(e.vO*h>>8),n=e.rO+(e.OO*h>>8),r=e.eO+(e.TO*h>>8),o=e.rE+(e.bO*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(4===e.mode){const h=s-e.oO;if(h>0){const s=e.nO+(e.vO*h>>8),n=e.rO+(e.OO*h>>8),r=e.eO+(e.TO*h>>8),o=e.rE+(e.bO*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(5===e.mode){const h=i-e.eO;if(h>0){const i=e.nO+(e.vO*h>>8),n=e.rO+(e.OO*h>>8),r=e.oO+(e.CO*h>>8),o=e.lO+(e.EO*h>>8);if(t>=i&&t<=n&&s>=r&&s<=o)return!0}}}return!1};zO=(t,i,s,h,e,n,r,o)=>{if(i<s&&i<h&&i<e)return!1;if(i>s&&i>h&&i>e)return!1;if(t<n&&t<r&&t<o)return!1;if(t>n&&t>r&&t>o)return!1;const l=(i-h)*(o-r)-(t-r)*(e-h);return((i-s)*(r-n)-(t-n)*(h-s))*l>0&&l*((i-e)*(n-o)-(t-o)*(s-e))>0};QO=(t,i)=>((i=(127-i)*(127&t)/160|0)<2?i=2:i>126&&(i=126),(65408&t)+i)}},9129:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{}},682:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{Bm;FA;Fm;Um;index;DA;bo;To;constructor(t,i,s,h,e,n,r){super(),this.Bm=i,this.FA=s,this.Fm=h,this.Um=e,this.index=t,this.DA=n,r&&-1!==n.Oo&&this.DA.delay?(this.bo=Math.random()*this.DA.vo|0,this.To=Math.random()*this.DA.delay[this.bo]|0):(this.bo=-1,this.To=0)}}},1353:(t,i,s)=>{s.d(i,{i:()=>o});var h=s(8839),e=s(9178),n=s(551),r=s(8067);class o extends h.i{type=null;draw=()=>{if(!this.type)return null;if(-1===this.Yp||-1===this.Xp)return this.dE();const t=this.dE();if(!t)return null;const i=n.i.Gr[this.Yp],s=e.i.oC(i._l(),!0,!i.DC,!1);s.translate(-this.Zp,0,0),s.Zl(),i.DA&&i.DA.frames&&s.Vl(i.DA.frames[this.Xp]),s.sE=null,s.hE=null,128===i.fE&&128===i.uE||s.scale(i.fE,i.uE,i.fE),s.Xl(64+i.UC,850+i.BC,-30,-50,-30,!0);const h=[t,s],r=e.i.yL(h,2);return 1===this.type.size&&(r.pE=!0),r};isVisible=()=>null!==this.type;dE=()=>{if(!this.type)return null;if(this.ym>=0&&0===this.Fp){const t=r.i.Gr[this.ym].frames;if(t){const i=t[this.Pp];let s=-1;if(this.gA>=0&&this.gA!==this.Yl){const t=r.i.Gr[this.gA].frames;t&&(s=t[this.qA])}return this.type.dE(i,s,r.i.Gr[this.ym].JA)}}let t=-1;if(this.gA>=0){const i=r.i.Gr[this.gA].frames;i&&(t=i[this.qA])}const i=this.type.dE(t,-1,null);return i?(this.height=i.rE,i):null}}},7973:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{index;count;constructor(t,i){super(),this.index=t,this.count=i}}},8839:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(9129),e=s(8067),n=s(9345);class r extends h.i{x=0;z=0;bA=0;vA=!1;size=1;Yl=-1;zA=-1;eA=-1;rA=-1;lA=-1;cA=-1;tI=-1;gf=null;bf=100;Ef=0;Tf=0;kf=0;Sf=0;vf=-1e3;Of=0;Lf=0;Up=-1;Bp=0;Gp=0;gA=-1;qA=0;jA=0;ym=-1;Pp=0;Dp=0;Fp=0;Np=0;Yp=-1;Xp=0;zp=0;Vp=0;Zp=0;jp=0;$p=0;qp=0;Kp=0;Jp=0;Qp=0;tA=0;sf=0;height=0;XA=0;pathLength=0;Oc=new Int32Array(10);Lc=new Int32Array(10);QA=new n.to(10,!1);VA=0;Mp=-1;xp=-1;Hp=-1;Wp=-1;move=(t,i,s)=>{if(-1!==this.ym&&e.i.Gr[this.ym].priority<=1&&(this.ym=-1),!t){const t=i-this.Oc[0],h=s-this.Lc[0];if(t>=-8&&t<=8&&h>=-8&&h<=8){this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.Oc[t]=this.Oc[t-1],this.Lc[t]=this.Lc[t-1],this.QA[t]=this.QA[t-1];return this.Oc[0]=i,this.Lc[0]=s,void(this.QA[0]=!1)}}this.pathLength=0,this.VA=0,this.Oc[0]=i,this.Lc[0]=s,this.x=128*this.Oc[0]+64*this.size,this.z=128*this.Lc[0]+64*this.size};step=(t,i)=>{let s=this.Oc[0],h=this.Lc[0];0===i?(s--,h++):1===i?h++:2===i?(s++,h++):3===i?s--:4===i?s++:5===i?(s--,h--):6===i?h--:7===i&&(s++,h--),-1!==this.ym&&e.i.Gr[this.ym].priority<=1&&(this.ym=-1),this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.Oc[t]=this.Oc[t-1],this.Lc[t]=this.Lc[t-1],this.QA[t]=this.QA[t-1];this.Oc[0]=s,this.Lc[0]=h,this.QA[0]=t}}},4191:(t,i,s)=>{s.d(i,{i:()=>u});var h=s(8839),e=s(9178),n=s(5542),r=s(551),o=s(8067),l=s(8809),a=s(1840),c=s(8934),f=s(9345);class u extends h.i{static Wl=[9104,10275,7595,3610,7975,8526,918,38802,24466,10145,58654,5027,1457,16565,34991,25486];static Hl=[[6798,107,10283,16,4797,7744,5799,4634,33697,22433,2983,54193],[8741,12,64030,43162,7735,8404,1701,38430,24094,10153,56621,4783,1341,16578,35003,25239],[25238,8742,12,64030,43162,7735,8404,1701,38430,24094,10153,56621,4783,1341,16578,35003],[4626,11146,6439,12,4758,10270],[4550,4537,5681,5673,5790,6806,8076,4574]];static Hr=new n.i(200);name=null;visible=!1;mL=0;If=0;pL=new Uint16Array(12);AL=new Uint16Array(5);ea=0;IL=0n;y=0;CA=0;EA=0;sI=0;eI=0;hI=0;_A=null;LA=0;SA=0;kA=0;RA=0;u=!1;draw(t){if(!this.visible)return null;let i=this.dE();if(this.height=i.rE,i.pE=!0,this.u)return i;if(-1!==this.Yp&&-1!==this.Xp){const t=r.i.Gr[this.Yp],s=e.i.oC(t._l(),!0,!t.DC,!1);s.translate(-this.Zp,0,0),s.Zl(),t.DA&&t.DA.frames&&s.Vl(t.DA.frames[this.Xp]),s.sE=null,s.hE=null,128===t.fE&&128===t.uE||s.scale(t.fE,t.uE,t.fE),s.Xl(t.UC+64,t.BC+850,-30,-50,-30,!0);const h=[i,s];i=e.i.yL(h,2)}if(this._A&&(t>=this.EA&&(this._A=null),t>=this.CA&&t<this.EA)){const t=this._A;if(t){t.translate(this.eI-this.y,this.sI-this.x,this.hI-this.z),512===this.XA?(t.eE(),t.eE(),t.eE()):1024===this.XA?(t.eE(),t.eE()):1536===this.XA&&t.eE();const s=[i,t];i=e.i.yL(s,2),512===this.XA?t.eE():1024===this.XA?(t.eE(),t.eE()):1536===this.XA&&(t.eE(),t.eE(),t.eE()),t.translate(this.y-this.eI,this.x-this.sI,this.z-this.hI)}}return i.pE=!0,i}isVisible=()=>this.visible;read=t=>{t.$a=0,this.mL=t.Gw,this.If=t.Gw;for(let i=0;i<12;i++){const s=t.Gw;this.pL[i]=0===s?0:(s<<8)+t.Gw}for(let i=0;i<5;i++){let s=t.Gw;(s<0||s>=u.Hl[i].length)&&(s=0),this.AL[i]=s}this.Yl=t.Dw,65535===this.Yl&&(this.Yl=-1),this.zA=t.Dw,65535===this.zA&&(this.zA=-1),this.eA=t.Dw,65535===this.eA&&(this.eA=-1),this.rA=t.Dw,65535===this.rA&&(this.rA=-1),this.lA=t.Dw,65535===this.lA&&(this.lA=-1),this.cA=t.Dw,65535===this.cA&&(this.cA=-1),this.tI=t.Dw,65535===this.tI&&(this.tI=-1),this.name=c.i.Pl(c.i.Dl(t.Ka)),this.ea=t.Gw,this.visible=!0,this.IL=0n;for(let t=0;t<12;t++)this.IL<<=0x4n,this.pL[t]>=256&&(this.IL+=BigInt(this.pL[t])-256n);this.pL[0]>=256&&(this.IL+=BigInt(this.pL[0])-256n>>4n),this.pL[1]>=256&&(this.IL+=BigInt(this.pL[1])-256n>>8n);for(let t=0;t<5;t++)this.IL<<=0x3n,this.IL+=BigInt(this.AL[t]);this.IL<<=0x1n,this.IL+=BigInt(this.mL)};qw=()=>{if(!this.visible)return null;const t=new f.to(12,null);let i=0;for(let s=0;s<12;s++){const h=this.pL[s];if(h>=256&&h<512&&(t[i++]=l.i.Gr[h-256].qw()),h>=512){const s=a.i.get(h-512).qw(this.mL);s&&(t[i++]=s)}}const s=e.i.Bl(t,i);for(let t=0;t<5;t++)0!==this.AL[t]&&(s.Gl(u.Hl[t][0],u.Hl[t][this.AL[t]]),1===t&&s.Gl(u.Wl[0],u.Wl[this.AL[t]]));return s};dE=()=>{let t=this.IL,i=-1,s=-1,h=-1,n=-1;if(this.ym>=0&&0===this.Fp){const e=o.i.Gr[this.ym];if(e.frames&&(i=e.frames[this.Pp]),this.gA>=0&&this.gA!==this.Yl){const t=o.i.Gr[this.gA].frames;t&&(s=t[this.qA])}e.XE>=0&&(h=e.XE,t+=BigInt(h-this.pL[5])<<8n),e.zE>=0&&(n=e.zE,t+=BigInt(n-this.pL[3])<<16n)}else if(this.gA>=0){const t=o.i.Gr[this.gA].frames;t&&(i=t[this.qA])}let r=u.Hr?.get(t);if(!r){const i=new f.to(12,null);let s=0;for(let t=0;t<12;t++){let e=this.pL[t];if(n>=0&&3===t&&(e=n),h>=0&&5===t&&(e=h),e>=256&&e<512){const t=l.i.Gr[e-256]._l();t&&(i[s++]=t)}if(e>=512){const t=a.i.get(e-512).VE(this.mL);t&&(i[s++]=t)}}r=e.i.Bl(i,s);for(let t=0;t<5;t++)0!==this.AL[t]&&(r.Gl(u.Hl[t][0],u.Hl[t][this.AL[t]]),1===t&&r.Gl(u.Wl[0],u.Wl[this.AL[t]]));r.Zl(),r.Xl(64,850,-30,-50,-30,!0),u.Hr?.put(t,r)}if(this.u)return r;const c=e.i.wE(r,!0);return-1!==i&&-1!==s?c.yE(i,s,o.i.Gr[this.ym].JA):-1!==i&&c.Vl(i),c.mE(),c.sE=null,c.hE=null,c}}},1810:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(551),e=s(9129),n=s(9178);class r extends e.i{gL;level;_L;CL;EL;offsetY;xA;MA;TL;arc;target;mobile=!1;x=0;z=0;y=0;velocityX=0;bL=0;vL=0;velocityY=0;OL=0;bA=0;pitch=0;bo=0;To=0;constructor(t,i,s,e,n,r,o,l,a,c,f){super(),this.gL=h.i.Gr[t],this.level=i,this._L=s,this.CL=n,this.EL=e,this.xA=r,this.MA=o,this.TL=l,this.arc=a,this.target=c,this.offsetY=f}NA=(t,i,s,h)=>{if(!this.mobile){const i=t-this._L,h=s-this.CL,e=Math.sqrt(i*i+h*h);this.x=this._L+i*this.arc/e,this.z=this.CL+h*this.arc/e,this.y=this.EL}const e=this.MA+1-h;this.velocityX=(t-this.x)/e,this.bL=(s-this.z)/e,this.vL=Math.sqrt(this.velocityX*this.velocityX+this.bL*this.bL),this.mobile||(this.velocityY=-this.vL*Math.tan(.02454369*this.TL)),this.OL=2*(i-this.y-this.velocityY*e)/(e*e)};update=t=>{if(this.mobile=!0,this.x+=this.velocityX*t,this.z+=this.bL*t,this.y+=this.velocityY*t+.5*this.OL*t*t,this.velocityY+=this.OL*t,this.bA=2047&(325.949*Math.atan2(this.velocityX,this.bL)+1024|0),this.pitch=2047&(325.949*Math.atan2(this.velocityY,this.vL)|0),this.gL.DA&&this.gL.DA.delay)for(this.To+=t;this.To>this.gL.DA.delay[this.bo];)this.To-=this.gL.DA.delay[this.bo]+1,this.bo++,this.bo>=this.gL.DA.vo&&(this.bo=0)};draw=()=>{const t=this.gL._l(),i=n.i.oC(t,!0,!this.gL.DC,!1);return this.gL.DA&&this.gL.DA.frames&&(i.Zl(),i.Vl(this.gL.DA.frames[this.bo]),i.sE=null,i.hE=null),128===this.gL.fE&&128===this.gL.uE||i.scale(this.gL.fE,this.gL.uE,this.gL.fE),i.LL(this.pitch),i.Xl(64+this.gL.UC,850+this.gL.BC,-30,-50,-30,!0),i}}},5659:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(9129),e=s(551),n=s(9178);class r extends h.i{type;level;x;z;y;xA;PA=!1;bo=0;To=0;constructor(t,i,s,h,n,r,o){super(),this.type=e.i.Gr[t],this.level=i,this.x=s,this.z=h,this.y=n,this.xA=r+o}update=t=>{if(this.type.DA&&this.type.DA.delay)for(this.To+=t;this.To>this.type.DA.delay[this.bo];)this.To-=this.type.DA.delay[this.bo]+1,this.bo++,this.bo>=this.type.DA.vo&&(this.bo=0,this.PA=!0)};draw=()=>{const t=this.type._l(),i=n.i.oC(t,!0,!this.type.DC,!1);return!this.PA&&this.type.DA&&this.type.DA.frames&&(i.Zl(),i.Vl(this.type.DA.frames[this.bo]),i.sE=null,i.hE=null),128===this.type.fE&&128===this.type.uE||i.scale(this.type.fE,this.type.uE,this.type.fE),0!==this.type.orientation&&(90===this.type.orientation?i.eE():180===this.type.orientation?(i.eE(),i.eE()):270===this.type.orientation&&(i.eE(),i.eE(),i.eE())),i.Xl(64+this.type.UC,850+this.type.BC,-30,-50,-30,!0),i}}},4155:(t,i,s)=>{s.d(i,{i:()=>h});class h{y;x;z;model;Xv;info;constructor(t,i,s,h,e,n){this.y=t,this.x=i,this.z=s,this.model=h,this.Xv=e,this.info=n}}},6539:(t,i,s)=>{s.d(i,{i:()=>h});class h{level;y;x;z;model;xO;bA;zv;tO;jv;iO;Xv;info;YO=0;sf=0;constructor(t,i,s,h,e,n,r,o,l,a,c,f,u){this.level=t,this.y=i,this.x=s,this.z=h,this.model=e,this.xO=n,this.bA=r,this.zv=o,this.tO=l,this.jv=a,this.iO=c,this.Xv=f,this.info=u}}},7396:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{jy;Cu;x;z;Gm;angle;shape;MA;constructor(t,i,s,h,e,n,r,o){super(),this.jy=t,this.Cu=i,this.x=s,this.z=h,this.Gm=e,this.angle=n,this.shape=r,this.MA=o}}},6150:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{jy;Cu;x;z;Gm;angle;shape;qy;$y;Ky;constructor(t,i,s,h,e,n,r,o,l,a){super(),this.jy=t,this.Cu=i,this.x=s,this.z=h,this.Gm=e,this.angle=n,this.shape=r,this.qy=o,this.$y=l,this.Ky=a}}},6711:(t,i,s)=>{s.d(i,{i:()=>h});class h{y;x;z;WO;HO;GO;Xv;offset;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.WO=h,this.HO=e,this.GO=n,this.Xv=r,this.offset=o}}},4138:(t,i,s)=>{s.d(i,{i:()=>h});class h{LA;kA;SA;RA;type;nO;rO;oO;lO;eO;rE;mode=0;vO=0;OO=0;CO=0;EO=0;TO=0;bO=0;constructor(t,i,s,h,e,n,r,o,l,a,c){this.LA=t,this.kA=i,this.SA=s,this.RA=h,this.type=e,this.nO=n,this.rO=r,this.oO=o,this.lO=l,this.eO=a,this.rE=c}}},220:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(3064),e=s(9345);class n extends h.i{level;x;z;SO;Bv;gO;Nv=null;Dv=null;Hv=null;Wv=null;Fv=null;Gv=null;Mv=null;Uv=0;_O=0;xv=0;visible=!1;update=!1;pO=!1;AO=0;DO=0;FO=0;NO=0;constructor(t,i,s){super(),this.SO=this.level=t,this.x=i,this.z=s,this.Bv=new e.to(5,null),this.gO=new Int32Array(5)}}},8570:(t,i,s)=>{s.d(i,{i:()=>h});class h{static rL=new Int32Array(6);static oL=new Int32Array(6);static hL=new Int32Array(6);static eL=new Int32Array(6);static nL=new Int32Array(6);static SL=[Int32Array.of(1,3,5,7),Int32Array.of(1,3,5,7),Int32Array.of(1,3,5,7),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,2,6),Int32Array.of(1,3,5,7,2,8),Int32Array.of(1,3,5,7,2,8),Int32Array.of(1,3,5,7,11,12),Int32Array.of(1,3,5,7,11,12),Int32Array.of(1,3,5,7,13,14)];static kL=[Int32Array.of(0,1,2,3,0,0,1,3),Int32Array.of(1,1,2,3,1,0,1,3),Int32Array.of(0,1,2,3,1,0,1,3),Int32Array.of(0,0,1,2,0,0,2,4,1,0,4,3),Int32Array.of(0,0,1,4,0,0,4,3,1,1,2,4),Int32Array.of(0,0,4,3,1,0,1,2,1,0,2,4),Int32Array.of(0,1,2,4,1,0,1,4,1,0,4,3),Int32Array.of(0,4,1,2,0,4,2,5,1,0,4,5,1,0,5,3),Int32Array.of(0,4,1,2,0,4,2,3,0,4,3,5,1,0,4,5),Int32Array.of(0,0,4,5,1,4,1,2,1,4,2,3,1,4,3,5),Int32Array.of(0,0,1,5,0,1,4,5,0,1,2,4,1,0,5,3,1,5,4,3,1,4,2,3),Int32Array.of(1,0,1,5,1,1,4,5,1,1,2,4,0,0,5,3,0,5,4,3,0,4,2,3),Int32Array.of(1,0,5,4,1,0,1,5,0,0,4,3,0,4,5,3,0,5,2,3,0,1,2,5)];static RL=128;static ML=this.RL/2|0;static xL=this.RL/4|0;static NL=3*this.RL/4|0;KC;QC;JC;fL;uL;dL;lL;aL;cL;sL;flat;shape;rotation;wO;yO;constructor(t,i,s,e,n,r,o,l,a,c,f,u,d,w,y,m,p,A,I){this.flat=!(p!==e||p!==w||p!==l),this.shape=i,this.rotation=r,this.wO=d,this.yO=a;const g=h.SL[i],_=g.length;this.KC=new Int32Array(_),this.QC=new Int32Array(_),this.JC=new Int32Array(_);const C=new Int32Array(_),E=new Int32Array(_),T=t*h.RL,b=A*h.RL;for(let t=0;t<_;t++){let i,a,f,d,A,_=g[t];0==(1&_)&&_<=8&&(_=1+(_-r-r-1&7)),_>8&&_<=12&&(_=9+(_-r-9&3)),_>12&&_<=16&&(_=13+(_-r-13&3)),1===_?(i=T,a=b,f=p,d=o,A=c):2===_?(i=T+h.ML,a=b,f=p+e>>1,d=o+I>>1,A=c+s>>1):3===_?(i=T+h.RL,a=b,f=e,d=I,A=s):4===_?(i=T+h.RL,a=b+h.ML,f=e+w>>1,d=I+n>>1,A=s+y>>1):5===_?(i=T+h.RL,a=b+h.RL,f=w,d=n,A=y):6===_?(i=T+h.ML,a=b+h.RL,f=w+l>>1,d=n+m>>1,A=y+u>>1):7===_?(i=T,a=b+h.RL,f=l,d=m,A=u):8===_?(i=T,a=b+h.ML,f=l+p>>1,d=m+o>>1,A=u+c>>1):9===_?(i=T+h.ML,a=b+h.xL,f=p+e>>1,d=o+I>>1,A=c+s>>1):10===_?(i=T+h.NL,a=b+h.ML,f=e+w>>1,d=I+n>>1,A=s+y>>1):11===_?(i=T+h.ML,a=b+h.NL,f=w+l>>1,d=n+m>>1,A=y+u>>1):12===_?(i=T+h.xL,a=b+h.ML,f=l+p>>1,d=m+o>>1,A=u+c>>1):13===_?(i=T+h.xL,a=b+h.xL,f=p,d=o,A=c):14===_?(i=T+h.NL,a=b+h.xL,f=e,d=I,A=s):15===_?(i=T+h.NL,a=b+h.NL,f=w,d=n,A=y):(i=T+h.xL,a=b+h.NL,f=l,d=m,A=u),this.KC[t]=i,this.QC[t]=f,this.JC[t]=a,C[t]=d,E[t]=A}const v=h.kL[i],O=v.length/4|0;this.lL=new Int32Array(O),this.aL=new Int32Array(O),this.cL=new Int32Array(O),this.fL=new Int32Array(O),this.uL=new Int32Array(O),this.dL=new Int32Array(O),this.sL=-1!==f?new Int32Array(O):null;let L=0;for(let t=0;t<O;t++){const i=v[L];let s=v[L+1],h=v[L+2],e=v[L+3];L+=4,s<4&&(s=s-r&3),h<4&&(h=h-r&3),e<4&&(e=e-r&3),this.lL[t]=s,this.aL[t]=h,this.cL[t]=e,0===i?(this.fL[t]=C[s],this.uL[t]=C[h],this.dL[t]=C[e],this.sL&&(this.sL[t]=-1)):(this.fL[t]=E[s],this.uL[t]=E[h],this.dL[t]=E[e],this.sL&&(this.sL[t]=f))}}}},9190:(t,i,s)=>{s.d(i,{i:()=>h});class h{static _b=0;static Pv=1;static PL=2;static DL=3;static FL=4;static UL=5;static ML=6;static xL=7;static NL=8;static BL=9;static GL=10;static HL=11}},9865:(t,i,s)=>{s.d(i,{i:()=>h});class h{iL;JO;qO;KO;jO;color;flat;constructor(t,i,s,h,e,n,r){this.iL=t,this.JO=i,this.qO=s,this.KO=h,this.jO=e,this.color=n,this.flat=r}}},3806:(t,i,s)=>{s.d(i,{i:()=>h});class h{y;x;z;PO;BO;Yv;Zv;Xv;info;constructor(t,i,s,h,e,n,r,o,l){this.y=t,this.x=i,this.z=s,this.PO=h,this.BO=e,this.Yv=n,this.Zv=r,this.Xv=o,this.info=l}}},9118:(t,i,s)=>{s.d(i,{i:()=>h});class h{y;x;z;type;angle;model;Xv;info;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.type=h,this.angle=e,this.model=n,this.Xv=r,this.info=o}}},3832:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e{size;WL;constructor(t){this.size=t,this.WL=[];for(let i=0;i<t;i++)this.WL[i]=new h.i}get=t=>{const i=this.WL[Number(t&BigInt(this.size-1))];if(!i.ww)return null;for(let s=i.ww;s!==i;s=s.ww)if(s&&s.id===t)return s;return null};put=(t,i)=>{i.next&&i.zw();const s=this.WL[Number(t&BigInt(this.size-1))];i.next=s.next,i.ww=s,i.next&&(i.next.ww=i),i.ww.next=i,i.id=t}}},6327:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{YL;ZL;constructor(){super(),this.YL=this,this.ZL=this}VL=()=>{this.ZL&&this.YL&&(this.ZL.YL=this.YL,this.YL.ZL=this.ZL,this.YL=null,this.ZL=null)}}},8934:(t,i,s)=>{s.d(i,{i:()=>h});class h{static XL=['_','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9'];static $f=t=>{t=t.trim();let i=0n;for(let s=0;s<t.length&&s<12;s++){const h=t.charCodeAt(s);i*=37n,h>=65&&h<=90?i+=BigInt(h+1-65):h>=97&&h<=122?i+=BigInt(h+1-97):h>=48&&h<=57&&(i+=BigInt(h+27-48))}return i};static Dl=t=>{if(t<0n||t>=6582952005840035281n)return'invalid_name';if(t%37n===0n)return'invalid_name';let i=0;const s=Array(12);for(;0n!==t;){const h=t;t/=37n,s[11-i++]=this.XL[Number(h-37n*t)]}return s.slice(12-i).join('')};static iw=t=>{const i=[...t.toLowerCase()];let s=!0;for(let t=0;t<i.length;t++){const h=i[t];s&&h>='a'&&h<='z'&&(i[t]=h.toUpperCase(),s=!1),'.'!==h&&'!'!==h||(s=!0)}return i.join('')};static za=t=>{let i='';for(let s=0;s<t.length;s++)i+='*';return i};static Ql=t=>(t>>24&255)+'.'+(t>>16&255)+'.'+(t>>8&255)+'.'+(255&t);static Pl=t=>{if(0===t.length)return t;const i=[...t];for(let t=0;t<i.length;t++)'_'===i[t]&&(i[t]=' ',t+1<i.length&&i[t+1]>='a'&&i[t+1]<='z'&&(i[t+1]=String.fromCharCode(i[t+1].charCodeAt(0)+'A'.charCodeAt(0)-97)));return i[0]>='a'&&i[0]<='z'&&(i[0]=String.fromCharCode(i[0].charCodeAt(0)+'A'.charCodeAt(0)-97)),i.join('')};static nC=t=>{const i=t.toUpperCase();let s=0n;for(let t=0;t<i.length;t++)s=61n*s+BigInt(i.charCodeAt(t))-32n,s=s+(s>>56n)&0xffffffffffffffn;return s}}},9080:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e{head;zL=null;constructor(){const t=new h.i;t.ww=t,t.next=t,this.head=t}iI=t=>{t.next&&t.zw(),t.next=this.head.next,t.ww=this.head,t.next&&(t.next.ww=t),t.ww.next=t};mw=t=>{t.next&&t.zw(),t.next=this.head,t.ww=this.head.ww,t.next.ww=t,t.ww&&(t.ww.next=t)};LO=()=>{const t=this.head.ww;return t===this.head?null:(t?.zw(),t)};dw=()=>{const t=this.head.ww;return t===this.head?(this.zL=null,null):(this.zL=t?.ww||null,t)};ap=()=>{const t=this.head.next;return t===this.head?(this.zL=null,null):(this.zL=t?.next||null,t)};ww=()=>{const t=this.zL;return t===this.head?(this.zL=null,null):(this.zL=t?.ww||null,t)};next=()=>{const t=this.zL;return t===this.head?(this.zL=null,null):(this.zL=t?.next||null,t)};clear=()=>{for(;;){const t=this.head.ww;if(t===this.head)return;t?.zw()}}}},3064:(t,i,s)=>{s.d(i,{i:()=>h});class h{id;ww;next;constructor(){this.id=0n,this.ww=this,this.next=this}zw=()=>{this.next&&this.ww&&(this.next.ww=this.ww,this.ww.next=this.next,this.ww=null,this.next=null)}}},5542:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(8329),e=s(3832);class n{jL;qL;history;available;constructor(t){this.jL=t,this.available=t,this.qL=new e.i(1024),this.history=new h.i}get=t=>{const i=this.qL.get(t);return i&&this.history.push(i),i};put=(t,i)=>{if(0===this.available){const t=this.history.pop();t?.zw(),t?.VL()}else this.available--;this.qL.put(t,i),this.history.push(i)};clear=()=>{const t=this.history.pop();t?(t.zw(),t.VL()):this.available=this.jL}}},8329:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(6327);class e{head;constructor(){this.head=new h.i}push=t=>{t.ZL&&t.VL(),t.ZL=this.head.ZL,t.YL=this.head,t.ZL&&(t.ZL.YL=t),t.YL.ZL=t};pop=()=>{const t=this.head.YL;return t===this.head?null:(t?.VL(),t)}}},6121:(t,i,s)=>{s.d(i,{ro:()=>e,$L:()=>r,MI:()=>h,KL:()=>n,JL:()=>o});const h=document.getElementById('canvas'),e=h.getContext('2d',{willReadFrequently:!0}),n=document.createElement('canvas'),r=document.createElement('img'),o=n.getContext('2d',{willReadFrequently:!0})},312:(t,i,s)=>{s.d(i,{i:()=>h});class h{static RED=16711680;static GREEN=65280;static BLUE=255;static Qo=16776960;static Ba=65535;static Ga=16711935;static xo=16777215;static Jo=0;static QL=16748608;static Zf=8388608;static Yf=128;static tS=16756736;static iS=16740352;static sS=16723968;static hS=12648192;static eS=8453888;static nS=4259584;static ka=9179409;static _u=6116423;static do=2301979;static wo=5063219;static mo=7759444;static Ao=3353893;static Vf=8388736;static Xf=13350793;static Rf=Int32Array.of(h.Qo,h.RED,h.GREEN,h.Ba,h.Ga,h.xo)}},2991:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(6327);class e extends h.i{static Ia=new Int32Array;static EE=0;static TE=0;static top=0;static bottom=0;static left=0;static right=0;static XO=0;static rS=0;static oS=0;static bind=(t,i,s)=>{this.Ia=t,this.EE=i,this.TE=s,this.So(0,0,i,s)};static xf=()=>{this.left=0,this.top=0,this.right=this.EE,this.bottom=this.TE,this.XO=this.right-1,this.rS=this.right/2|0};static So=(t,i,s,h)=>{t<0&&(t=0),i<0&&(i=0),s>this.EE&&(s=this.EE),h>this.TE&&(h=this.TE),this.top=i,this.bottom=h,this.left=t,this.right=s,this.XO=this.right-1,this.rS=this.right/2|0,this.oS=this.bottom/2|0};static clear=()=>{const t=this.EE*this.TE;for(let i=0;i<t;i++)this.Ia[i]=0};static Mo=(t,i,s,h,e)=>{this.po(t,i,e,s),this.po(t,i+h-1,e,s),this.yo(t,i,e,h),this.yo(t+s-1,i,e,h)};static po=(t,i,s,h)=>{if(i<this.top||i>=this.bottom)return;t<this.left&&(h-=this.left-t,t=this.left),t+h>this.right&&(h=this.right-t);const e=t+i*this.EE;for(let t=0;t<h;t++)this.Ia[e+t]=s};static yo=(t,i,s,h)=>{if(t<this.left||t>=this.right)return;i<this.top&&(h-=this.top-i,i=this.top),i+h>this.bottom&&(h=this.bottom-i);const e=t+i*this.EE;for(let t=0;t<h;t++)this.Ia[e+t*this.EE]=s};static lS=(t,i,s,h,e)=>{const n=Math.abs(s-t),r=Math.abs(h-i),o=t<s?1:-1,l=i<h?1:-1;let a=n-r;for(;t>=this.left&&t<this.right&&i>=this.top&&i<this.bottom&&(this.Ia[t+i*this.EE]=e),t!==s||i!==h;){const s=2*a;s>-r&&(a-=r,t+=o),s<n&&(a+=n,i+=l)}};static fillRect=(t,i,s,h,e)=>{t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const n=this.EE-s;let r=t+i*this.EE;for(let t=-h;t<0;t++){for(let t=-s;t<0;t++)this.Ia[r++]=e;r+=n}};static aS=(t,i,s)=>{t<this.left||t>=this.right||i<this.top||i>=this.bottom||(this.Ia[t+i*this.EE]=s)}}},8078:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(2991),e=s(664),n=s(9345);class r extends h.i{static u=!1;static cS=new Int32Array(512);static fS=new Int32Array(2048);static sin=new Int32Array(2048);static cos=new Int32Array(2048);static palette=new Int32Array(65536);static rI=new n.to(50,null);static uS=0;static _a=new Int32Array;static Al=0;static Il=0;static bE=!0;static VO=!1;static alpha=0;static dS=null;static wS=new n.to(50,null);static yS=0;static sf=0;static nI=new Int32Array(50);static mS=new n.to(50,null);static pS=!1;static AS=new n.to(50,!1);static IS=new Int32Array(50);static{for(let t=1;t<512;t++)this.cS[t]=32768/t|0;for(let t=1;t<2048;t++)this.fS[t]=65536/t|0;for(let t=0;t<2048;t++)this.sin[t]=65536*Math.sin(.0030679615757712823*t)|0,this.cos[t]=65536*Math.cos(.0030679615757712823*t)|0}static Fr=()=>{this.cS=null,this.cS=null,this.sin=null,this.cos=null,this._a=null,this.rI=null,this.AS=null,this.IS=null,this.dS=null,this.wS=null,this.nI=null,this.palette=null,this.mS=null,console.log('Draw3D unloaded!')};static xI=()=>{this._a=new Int32Array(this.TE);for(let t=0;t<this.TE;t++)this._a[t]=this.EE*t;this.Al=this.EE/2|0,this.Il=this.TE/2|0};static ga=(t,i)=>{this._a=new Int32Array(i);for(let s=0;s<i;s++)this._a[s]=t*s;this.Al=t/2|0,this.Il=i/2|0};static Rm=()=>{this.dS=null,this.wS.fill(null)};static ya=t=>{this.uS=0;for(let i=0;i<50;i++)try{this.rI[i]=e.i.oa(t,i.toString()),this.u&&128===this.rI[i]?.qo?this.rI[i]?.gS():this.rI[i]?.kE(),this.uS++}catch(t){}};static Eb=t=>{if(0!==this.IS[t])return this.IS[t];const i=this.mS[t];if(!i)return 0;let s=0,h=0,e=0;const n=i.length;for(let t=0;t<n;t++)s+=i[t]>>16&255,h+=i[t]>>8&255,e+=255&i[t];let r=((s/n|0)<<16)+((h/n|0)<<8)+(e/n|0);return r=this._S(r,1.4),0===r&&(r=1),this.IS[t]=r,r};static ma=t=>{const i=t+.03*Math.random()-.015;let s=0;for(let t=0;t<512;t++){const h=(t/8|0)/64+.0078125,e=(7&t)/8+.0625;for(let t=0;t<128;t++){const n=t/128;let r=n,o=n,l=n;if(0!==e){let t;t=n<.5?n*(e+1):n+e-n*e;const i=2*n-t;let s=h+.3333333333333333;s>1&&s--;let a=h-.3333333333333333;a<0&&a++,r=6*s<1?i+6*(t-i)*s:2*s<1?t:3*s<2?i+(t-i)*(.6666666666666666-s)*6:i,o=6*h<1?i+6*(t-i)*h:2*h<1?t:3*h<2?i+(t-i)*(.6666666666666666-h)*6:i,l=6*a<1?i+6*(t-i)*a:2*a<1?t:3*a<2?i+(t-i)*(.6666666666666666-a)*6:i}const a=((256*r|0)<<16)+((256*o|0)<<8)+(256*l|0);this.palette[s++]=this._S(a,i)}}for(let t=0;t<50;t++){const s=this.rI[t];if(!s)continue;const h=s.palette;this.mS[t]=new Int32Array(h.length);for(let s=0;s<h.length;s++){const e=this.mS[t];e&&(e[s]=this._S(h[s],i))}}for(let t=0;t<50;t++)this.oI(t)};static _S=(t,i)=>{const s=(t>>16)/256,h=(t>>8&255)/256,e=(255&t)/256;return((256*Math.pow(s,i)|0)<<16)+((256*Math.pow(h,i)|0)<<8)+(256*Math.pow(e,i)|0)};static pa=t=>{this.dS||(this.yS=t,this.u?this.dS=new n.rn(t,16384):this.dS=new n.rn(t,65536),this.wS.fill(null))};static $O=(t,i,s,h,e,n,r,o,l)=>{let a=0,c=0;e!==h&&(a=(i-t<<16)/(e-h)|0,c=(o-r<<15)/(e-h)|0);let f=0,u=0;n!==e&&(f=(s-i<<16)/(n-e)|0,u=(l-o<<15)/(n-e)|0);let d=0,w=0;if(n!==h&&(d=(t-s<<16)/(h-n)|0,w=(r-l<<15)/(h-n)|0),h<=e&&h<=n){if(h<this.bottom)if(e>this.bottom&&(e=this.bottom),n>this.bottom&&(n=this.bottom),e<n)if(s=t<<=16,l=r<<=15,h<0&&(s-=d*h,t-=a*h,l-=w*h,r-=c*h,h=0),i<<=16,o<<=15,e<0&&(i-=f*e,o-=u*e,e=0),h!==e&&d<a||h===e&&d>f)for(n-=e,e-=h,h=this._a[h];;){if(--e<0)for(;;){if(--n<0)return;this.CS(s>>16,i>>16,l>>7,o>>7,this.Ia,h,0),s+=d,i+=f,l+=w,o+=u,h+=this.EE}this.CS(s>>16,t>>16,l>>7,r>>7,this.Ia,h,0),s+=d,t+=a,l+=w,r+=c,h+=this.EE}else for(n-=e,e-=h,h=this._a[h];;){if(--e<0)for(;;){if(--n<0)return;this.CS(i>>16,s>>16,o>>7,l>>7,this.Ia,h,0),s+=d,i+=f,l+=w,o+=u,h+=this.EE}this.CS(t>>16,s>>16,r>>7,l>>7,this.Ia,h,0),s+=d,t+=a,l+=w,r+=c,h+=this.EE}else if(i=t<<=16,o=r<<=15,h<0&&(i-=d*h,t-=a*h,o-=w*h,r-=c*h,h=0),s<<=16,l<<=15,n<0&&(s-=f*n,l-=u*n,n=0),h!==n&&d<a||h===n&&f>a)for(e-=n,n-=h,h=this._a[h];;){if(--n<0)for(;;){if(--e<0)return;this.CS(s>>16,t>>16,l>>7,r>>7,this.Ia,h,0),s+=f,t+=a,l+=u,r+=c,h+=this.EE}this.CS(i>>16,t>>16,o>>7,r>>7,this.Ia,h,0),i+=d,t+=a,o+=w,r+=c,h+=this.EE}else for(e-=n,n-=h,h=this._a[h];;){if(--n<0)for(;;){if(--e<0)return;this.CS(t>>16,s>>16,r>>7,l>>7,this.Ia,h,0),s+=f,t+=a,l+=u,r+=c,h+=this.EE}this.CS(t>>16,i>>16,r>>7,o>>7,this.Ia,h,0),i+=d,t+=a,o+=w,r+=c,h+=this.EE}}else if(e<=n){if(e<this.bottom)if(n>this.bottom&&(n=this.bottom),h>this.bottom&&(h=this.bottom),n<h)if(t=i<<=16,r=o<<=15,e<0&&(t-=a*e,i-=f*e,r-=c*e,o-=u*e,e=0),s<<=16,l<<=15,n<0&&(s-=d*n,l-=w*n,n=0),e!==n&&a<f||e===n&&a>d)for(h-=n,n-=e,e=this._a[e];;){if(--n<0)for(;;){if(--h<0)return;this.CS(t>>16,s>>16,r>>7,l>>7,this.Ia,e,0),t+=a,s+=d,r+=c,l+=w,e+=this.EE}this.CS(t>>16,i>>16,r>>7,o>>7,this.Ia,e,0),t+=a,i+=f,r+=c,o+=u,e+=this.EE}else for(h-=n,n-=e,e=this._a[e];;){if(--n<0)for(;;){if(--h<0)return;this.CS(s>>16,t>>16,l>>7,r>>7,this.Ia,e,0),t+=a,s+=d,r+=c,l+=w,e+=this.EE}this.CS(i>>16,t>>16,o>>7,r>>7,this.Ia,e,0),t+=a,i+=f,r+=c,o+=u,e+=this.EE}else if(s=i<<=16,l=o<<=15,e<0&&(s-=a*e,i-=f*e,l-=c*e,o-=u*e,e=0),t<<=16,r<<=15,h<0&&(t-=d*h,r-=w*h,h=0),n-=h,h-=e,e=this._a[e],a<f)for(;;){if(--h<0)for(;;){if(--n<0)return;this.CS(t>>16,i>>16,r>>7,o>>7,this.Ia,e,0),t+=d,i+=f,r+=w,o+=u,e+=this.EE}this.CS(s>>16,i>>16,l>>7,o>>7,this.Ia,e,0),s+=a,i+=f,l+=c,o+=u,e+=this.EE}else for(;;){if(--h<0)for(;;){if(--n<0)return;this.CS(i>>16,t>>16,o>>7,r>>7,this.Ia,e,0),t+=d,i+=f,r+=w,o+=u,e+=this.EE}this.CS(i>>16,s>>16,o>>7,l>>7,this.Ia,e,0),s+=a,i+=f,l+=c,o+=u,e+=this.EE}}else if(n<this.bottom)if(h>this.bottom&&(h=this.bottom),e>this.bottom&&(e=this.bottom),h<e)if(i=s<<=16,o=l<<=15,n<0&&(i-=f*n,s-=d*n,o-=u*n,l-=w*n,n=0),t<<=16,r<<=15,h<0&&(t-=a*h,r-=c*h,h=0),e-=h,h-=n,n=this._a[n],f<d)for(;;){if(--h<0)for(;;){if(--e<0)return;this.CS(i>>16,t>>16,o>>7,r>>7,this.Ia,n,0),i+=f,t+=a,o+=u,r+=c,n+=this.EE}this.CS(i>>16,s>>16,o>>7,l>>7,this.Ia,n,0),i+=f,s+=d,o+=u,l+=w,n+=this.EE}else for(;;){if(--h<0)for(;;){if(--e<0)return;this.CS(t>>16,i>>16,r>>7,o>>7,this.Ia,n,0),i+=f,t+=a,o+=u,r+=c,n+=this.EE}this.CS(s>>16,i>>16,l>>7,o>>7,this.Ia,n,0),i+=f,s+=d,o+=u,l+=w,n+=this.EE}else if(t=s<<=16,r=l<<=15,n<0&&(t-=f*n,s-=d*n,r-=u*n,l-=w*n,n=0),i<<=16,o<<=15,e<0&&(i-=a*e,o-=c*e,e=0),h-=e,e-=n,n=this._a[n],f<d)for(;;){if(--e<0)for(;;){if(--h<0)return;this.CS(i>>16,s>>16,o>>7,l>>7,this.Ia,n,0),i+=a,s+=d,o+=c,l+=w,n+=this.EE}this.CS(t>>16,s>>16,r>>7,l>>7,this.Ia,n,0),t+=f,s+=d,r+=u,l+=w,n+=this.EE}else for(;;){if(--e<0)for(;;){if(--h<0)return;this.CS(s>>16,i>>16,l>>7,o>>7,this.Ia,n,0),i+=a,s+=d,o+=c,l+=w,n+=this.EE}this.CS(s>>16,t>>16,l>>7,r>>7,this.Ia,n,0),t+=f,s+=d,r+=u,l+=w,n+=this.EE}};static CS=(t,i,s,h,e,n,r)=>{let o;if(this.bE){let l;if(this.VO){if(l=i-t>3?(h-s)/(i-t)|0:0,i>this.XO&&(i=this.XO),t<0&&(s-=t*l,t=0),t>=i)return;n+=t,r=i-t>>2,l<<=2}else{if(!(t<i))return;n+=t,l=(r=i-t>>2)>0?(h-s)*this.cS[r]>>15:0}if(0===this.alpha)for(;;){if(--r<0){if((r=i-t&3)>0){o=this.palette[s>>8];do{e[n++]=o,r--}while(r>0);return}break}o=this.palette[s>>8],s+=l,e[n++]=o,e[n++]=o,e[n++]=o,e[n++]=o}else{const h=this.alpha,a=256-this.alpha;for(;;){if(--r<0){if((r=i-t&3)>0){o=this.palette[s>>8],o=((16711935&o)*a>>8&16711935)+((65280&o)*a>>8&65280);do{e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),r--}while(r>0)}break}o=this.palette[s>>8],s+=l,o=((16711935&o)*a>>8&16711935)+((65280&o)*a>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280)}}}else if(t<i){const l=(h-s)/(i-t)|0;if(this.VO&&(i>this.XO&&(i=this.XO),t<0&&(s-=t*l,t=0),t>=i))return;if(n+=t,r=i-t,0===this.alpha)do{e[n++]=this.palette[s>>8],s+=l,r--}while(r>0);else{const t=this.alpha,i=256-this.alpha;do{o=this.palette[s>>8],s+=l,o=((16711935&o)*i>>8&16711935)+((65280&o)*i>>8&65280),e[n++]=o+((16711935&e[n])*t>>8&16711935)+((65280&e[n])*t>>8&65280),r--}while(r>0)}}};static ES=(t,i,s,h,e,n,r)=>{let o=0;e!==h&&(o=(i-t<<16)/(e-h)|0);let l=0;n!==e&&(l=(s-i<<16)/(n-e)|0);let a=0;if(n!==h&&(a=(t-s<<16)/(h-n)|0),h<=e&&h<=n){if(h<this.bottom)if(e>this.bottom&&(e=this.bottom),n>this.bottom&&(n=this.bottom),e<n)if(s=t<<=16,h<0&&(s-=a*h,t-=o*h,h=0),i<<=16,e<0&&(i-=l*e,e=0),h!==e&&a<o||h===e&&a>l)for(n-=e,e-=h,h=this._a[h];;){if(--e<0)for(;;){if(--n<0)return;this.TS(s>>16,i>>16,this.Ia,h,r),s+=a,i+=l,h+=this.EE}this.TS(s>>16,t>>16,this.Ia,h,r),s+=a,t+=o,h+=this.EE}else for(n-=e,e-=h,h=this._a[h];;){if(--e<0)for(;;){if(--n<0)return;this.TS(i>>16,s>>16,this.Ia,h,r),s+=a,i+=l,h+=this.EE}this.TS(t>>16,s>>16,this.Ia,h,r),s+=a,t+=o,h+=this.EE}else if(i=t<<=16,h<0&&(i-=a*h,t-=o*h,h=0),s<<=16,n<0&&(s-=l*n,n=0),h!==n&&a<o||h===n&&l>o)for(e-=n,n-=h,h=this._a[h];;){if(--n<0)for(;;){if(--e<0)return;this.TS(s>>16,t>>16,this.Ia,h,r),s+=l,t+=o,h+=this.EE}this.TS(i>>16,t>>16,this.Ia,h,r),i+=a,t+=o,h+=this.EE}else for(e-=n,n-=h,h=this._a[h];;){if(--n<0)for(;;){if(--e<0)return;this.TS(t>>16,s>>16,this.Ia,h,r),s+=l,t+=o,h+=this.EE}this.TS(t>>16,i>>16,this.Ia,h,r),i+=a,t+=o,h+=this.EE}}else if(e<=n){if(e<this.bottom)if(n>this.bottom&&(n=this.bottom),h>this.bottom&&(h=this.bottom),n<h)if(t=i<<=16,e<0&&(t-=o*e,i-=l*e,e=0),s<<=16,n<0&&(s-=a*n,n=0),e!==n&&o<l||e===n&&o>a)for(h-=n,n-=e,e=this._a[e];;){if(--n<0)for(;;){if(--h<0)return;this.TS(t>>16,s>>16,this.Ia,e,r),t+=o,s+=a,e+=this.EE}this.TS(t>>16,i>>16,this.Ia,e,r),t+=o,i+=l,e+=this.EE}else for(h-=n,n-=e,e=this._a[e];;){if(--n<0)for(;;){if(--h<0)return;this.TS(s>>16,t>>16,this.Ia,e,r),t+=o,s+=a,e+=this.EE}this.TS(i>>16,t>>16,this.Ia,e,r),t+=o,i+=l,e+=this.EE}else if(s=i<<=16,e<0&&(s-=o*e,i-=l*e,e=0),t<<=16,h<0&&(t-=a*h,h=0),o<l)for(n-=h,h-=e,e=this._a[e];;){if(--h<0)for(;;){if(--n<0)return;this.TS(t>>16,i>>16,this.Ia,e,r),t+=a,i+=l,e+=this.EE}this.TS(s>>16,i>>16,this.Ia,e,r),s+=o,i+=l,e+=this.EE}else for(n-=h,h-=e,e=this._a[e];;){if(--h<0)for(;;){if(--n<0)return;this.TS(i>>16,t>>16,this.Ia,e,r),t+=a,i+=l,e+=this.EE}this.TS(i>>16,s>>16,this.Ia,e,r),s+=o,i+=l,e+=this.EE}}else if(n<this.bottom)if(h>this.bottom&&(h=this.bottom),e>this.bottom&&(e=this.bottom),h<e)if(i=s<<=16,n<0&&(i-=l*n,s-=a*n,n=0),t<<=16,h<0&&(t-=o*h,h=0),l<a)for(e-=h,h-=n,n=this._a[n];;){if(--h<0)for(;;){if(--e<0)return;this.TS(i>>16,t>>16,this.Ia,n,r),i+=l,t+=o,n+=this.EE}this.TS(i>>16,s>>16,this.Ia,n,r),i+=l,s+=a,n+=this.EE}else for(e-=h,h-=n,n=this._a[n];;){if(--h<0)for(;;){if(--e<0)return;this.TS(t>>16,i>>16,this.Ia,n,r),i+=l,t+=o,n+=this.EE}this.TS(s>>16,i>>16,this.Ia,n,r),i+=l,s+=a,n+=this.EE}else if(t=s<<=16,n<0&&(t-=l*n,s-=a*n,n=0),i<<=16,e<0&&(i-=o*e,e=0),l<a)for(h-=e,e-=n,n=this._a[n];;){if(--e<0)for(;;){if(--h<0)return;this.TS(i>>16,s>>16,this.Ia,n,r),i+=o,s+=a,n+=this.EE}this.TS(t>>16,s>>16,this.Ia,n,r),t+=l,s+=a,n+=this.EE}else for(h-=e,e-=n,n=this._a[n];;){if(--e<0)for(;;){if(--h<0)return;this.TS(s>>16,i>>16,this.Ia,n,r),i+=o,s+=a,n+=this.EE}this.TS(s>>16,t>>16,this.Ia,n,r),t+=l,s+=a,n+=this.EE}};static tL=(t,i,s,h,e,n,r,o,l,a,c,f,u,d,w,y,m,p,A)=>{const I=this.bS(A);this.pS=!this.AS[A];const g=a-u,_=c-w,C=f-m,E=d-a,T=y-c,b=p-f;let v=E*c-T*a<<14;const O=T*f-b*c<<8,L=b*a-E*f<<5;let S=g*c-_*a<<14;const k=_*f-C*c<<8,R=C*a-g*f<<5;let M=_*E-g*T<<14;const x=C*T-_*b<<8,N=g*b-C*E<<5;let P=0,D=0;e!==h&&(P=(i-t<<16)/(e-h)|0,D=(o-r<<16)/(e-h)|0);let F=0,U=0;n!==e&&(F=(s-i<<16)/(n-e)|0,U=(l-o<<16)/(n-e)|0);let B=0,G=0;if(n!==h&&(B=(t-s<<16)/(h-n)|0,G=(r-l<<16)/(h-n)|0),h<=e&&h<=n){if(h<this.bottom)if(e>this.bottom&&(e=this.bottom),n>this.bottom&&(n=this.bottom),e<n){s=t<<=16,l=r<<=16,h<0&&(s-=B*h,t-=P*h,l-=G*h,r-=D*h,h=0),i<<=16,o<<=16,e<0&&(i-=F*e,o-=U*e,e=0);const a=h-this.Il;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,h!==e&&B<P||h===e&&B>F)for(n-=e,e-=h,h=this._a[h];;){if(--e<0)for(;;){if(--n<0)return;this.vS(s>>16,i>>16,this.Ia,h,I,0,0,v,S,M,O,k,x,l>>8,o>>8),s+=B,i+=F,l+=G,o+=U,h+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(s>>16,t>>16,this.Ia,h,I,0,0,v,S,M,O,k,x,l>>8,r>>8),s+=B,t+=P,l+=G,r+=D,h+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(n-=e,e-=h,h=this._a[h];;){if(--e<0)for(;;){if(--n<0)return;this.vS(i>>16,s>>16,this.Ia,h,I,0,0,v,S,M,O,k,x,o>>8,l>>8),s+=B,i+=F,l+=G,o+=U,h+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(t>>16,s>>16,this.Ia,h,I,0,0,v,S,M,O,k,x,r>>8,l>>8),s+=B,t+=P,l+=G,r+=D,h+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}else{i=t<<=16,o=r<<=16,h<0&&(i-=B*h,t-=P*h,o-=G*h,r-=D*h,h=0),s<<=16,l<<=16,n<0&&(s-=F*n,l-=U*n,n=0);const a=h-this.Il;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,(h===n||B>=P)&&(h!==n||F<=P))for(e-=n,n-=h,h=this._a[h];;){if(--n<0)for(;;){if(--e<0)return;this.vS(t>>16,s>>16,this.Ia,h,I,0,0,v,S,M,O,k,x,r>>8,l>>8),s+=F,t+=P,l+=U,r+=D,h+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(t>>16,i>>16,this.Ia,h,I,0,0,v,S,M,O,k,x,r>>8,o>>8),i+=B,t+=P,o+=G,r+=D,h+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(e-=n,n-=h,h=this._a[h];;){if(--n<0)for(;;){if(--e<0)return;this.vS(s>>16,t>>16,this.Ia,h,I,0,0,v,S,M,O,k,x,l>>8,r>>8),s+=F,t+=P,l+=U,r+=D,h+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(i>>16,t>>16,this.Ia,h,I,0,0,v,S,M,O,k,x,o>>8,r>>8),i+=B,t+=P,o+=G,r+=D,h+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}}else if(e<=n){if(e<this.bottom)if(n>this.bottom&&(n=this.bottom),h>this.bottom&&(h=this.bottom),n<h){t=i<<=16,r=o<<=16,e<0&&(t-=P*e,i-=F*e,r-=D*e,o-=U*e,e=0),s<<=16,l<<=16,n<0&&(s-=B*n,l-=G*n,n=0);const a=e-this.Il;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,e!==n&&P<F||e===n&&P>B)for(h-=n,n-=e,e=this._a[e];;){if(--n<0)for(;;){if(--h<0)return;this.vS(t>>16,s>>16,this.Ia,e,I,0,0,v,S,M,O,k,x,r>>8,l>>8),t+=P,s+=B,r+=D,l+=G,e+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(t>>16,i>>16,this.Ia,e,I,0,0,v,S,M,O,k,x,r>>8,o>>8),t+=P,i+=F,r+=D,o+=U,e+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(h-=n,n-=e,e=this._a[e];;){if(--n<0)for(;;){if(--h<0)return;this.vS(s>>16,t>>16,this.Ia,e,I,0,0,v,S,M,O,k,x,l>>8,r>>8),t+=P,s+=B,r+=D,l+=G,e+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(i>>16,t>>16,this.Ia,e,I,0,0,v,S,M,O,k,x,o>>8,r>>8),t+=P,i+=F,r+=D,o+=U,e+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}else{s=i<<=16,l=o<<=16,e<0&&(s-=P*e,i-=F*e,l-=D*e,o-=U*e,e=0),t<<=16,r<<=16,h<0&&(t-=B*h,r-=G*h,h=0);const a=e-this.Il;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,n-=h,h-=e,e=this._a[e],P<F)for(;;){if(--h<0)for(;;){if(--n<0)return;this.vS(t>>16,i>>16,this.Ia,e,I,0,0,v,S,M,O,k,x,r>>8,o>>8),t+=B,i+=F,r+=G,o+=U,e+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(s>>16,i>>16,this.Ia,e,I,0,0,v,S,M,O,k,x,l>>8,o>>8),s+=P,i+=F,l+=D,o+=U,e+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(;;){if(--h<0)for(;;){if(--n<0)return;this.vS(i>>16,t>>16,this.Ia,e,I,0,0,v,S,M,O,k,x,o>>8,r>>8),t+=B,i+=F,r+=G,o+=U,e+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(i>>16,s>>16,this.Ia,e,I,0,0,v,S,M,O,k,x,o>>8,l>>8),s+=P,i+=F,l+=D,o+=U,e+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}}else if(n<this.bottom)if(h>this.bottom&&(h=this.bottom),e>this.bottom&&(e=this.bottom),h<e){i=s<<=16,o=l<<=16,n<0&&(i-=F*n,s-=B*n,o-=U*n,l-=G*n,n=0),t<<=16,r<<=16,h<0&&(t-=P*h,r-=D*h,h=0);const a=n-this.Il;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,e-=h,h-=n,n=this._a[n],F<B)for(;;){if(--h<0)for(;;){if(--e<0)return;this.vS(i>>16,t>>16,this.Ia,n,I,0,0,v,S,M,O,k,x,o>>8,r>>8),i+=F,t+=P,o+=U,r+=D,n+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(i>>16,s>>16,this.Ia,n,I,0,0,v,S,M,O,k,x,o>>8,l>>8),i+=F,s+=B,o+=U,l+=G,n+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(;;){if(--h<0)for(;;){if(--e<0)return;this.vS(t>>16,i>>16,this.Ia,n,I,0,0,v,S,M,O,k,x,r>>8,o>>8),i+=F,t+=P,o+=U,r+=D,n+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(s>>16,i>>16,this.Ia,n,I,0,0,v,S,M,O,k,x,l>>8,o>>8),i+=F,s+=B,o+=U,l+=G,n+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}else{t=s<<=16,r=l<<=16,n<0&&(t-=F*n,s-=B*n,r-=U*n,l-=G*n,n=0),i<<=16,o<<=16,e<0&&(i-=P*e,o-=D*e,e=0);const a=n-this.Il;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,h-=e,e-=n,n=this._a[n],F<B)for(;;){if(--e<0)for(;;){if(--h<0)return;this.vS(i>>16,s>>16,this.Ia,n,I,0,0,v,S,M,O,k,x,o>>8,l>>8),i+=P,s+=B,o+=D,l+=G,n+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(t>>16,s>>16,this.Ia,n,I,0,0,v,S,M,O,k,x,r>>8,l>>8),t+=F,s+=B,r+=U,l+=G,n+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(;;){if(--e<0)for(;;){if(--h<0)return;this.vS(s>>16,i>>16,this.Ia,n,I,0,0,v,S,M,O,k,x,l>>8,o>>8),i+=P,s+=B,o+=D,l+=G,n+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.vS(s>>16,t>>16,this.Ia,n,I,0,0,v,S,M,O,k,x,l>>8,r>>8),t+=F,s+=B,r+=U,l+=G,n+=this.EE,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}};static vS=(t,i,s,h,e,n,r,o,l,a,c,f,u,d,w)=>{if(t>=i)return;let y,m,p,A,I,g,_,C,E;if(this.VO){if(y=(w-d)/(i-t)|0,i>this.XO&&(i=this.XO),t<0&&(d-=t*y,t=0),t>=i)return;m=i-t>>3,y<<=12}else i-t>7?(m=i-t>>3,y=(w-d)*this.cS[m]>>6):(m=0,y=0);if(d<<=9,h+=t,this.u&&e)if(p=0,A=0,g=t-this.Al,o+=(c>>3)*g,l+=(f>>3)*g,a+=(u>>3)*g,o|=0,l|=0,I=(a|=0)>>12,0!==I&&(r=l/I|0,(n=o/I|0)<0?n=0:n>4032&&(n=4032)),o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>12,0!==I&&(p=o/I|0,A=l/I|0,p<7?p=7:p>4032&&(p=4032)),_=p-n>>3,C=A-r>>3,n+=d>>3&786432,E=d>>23,this.pS){for(;m-- >0;)s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n=p,r=A,o+=c,l+=f,I=(a+=u)>>12,0!==I&&(p=o/I|0,A=l/I|0,p<7?p=7:p>4032&&(p=4032)),_=p-n>>3,C=A-r>>3,n+=(d+=y)>>3&786432,E=d>>23;for(m=i-t&7;m-- >0;)s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C}else{for(;m-- >0;){let t;0!=(t=e[(4032&r)+(n>>6)]>>>E)&&(s[h]=t),h+=1,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h+=1,n=p,r=A,o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>12,0!==I&&(p=o/I|0,A=l/I|0,p<7?p=7:p>4032&&(p=4032)),_=p-n>>3,C=A-r>>3,n+=(d+=y)>>3&786432,E=d>>23}for(m=i-t&7;m-- >0;){let t;0!=(t=e[(4032&r)+(n>>6)]>>>E)&&(s[h]=t),h++,n+=_,r+=C}}else if(p=0,A=0,g=t-this.Al,o+=(c>>3)*g,l+=(f>>3)*g,a+=(u>>3)*g,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(r=l/I|0,(n=o/I|0)<0?n=0:n>16256&&(n=16256)),o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(p=o/I|0,A=l/I|0,p<7?p=7:p>16256&&(p=16256)),_=p-n>>3,C=A-r>>3,n+=6291456&d,E=d>>23,this.pS&&e){for(;m-- >0;)s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n=p,r=A,o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(p=o/I|0,A=l/I|0,p<7?p=7:p>16256&&(p=16256)),_=p-n>>3,C=A-r>>3,n+=6291456&(d+=y),E=d>>23;for(m=i-t&7;m-- >0;)s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C}else{for(;m-- >0&&e;){let t;0!=(t=e[(16256&r)+(n>>7)]>>>E)&&(s[h]=t),h+=1,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,n=p,r=A,o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(p=o/I|0,A=l/I|0,p<7?p=7:p>16256&&(p=16256)),_=p-n>>3,C=A-r>>3,n+=6291456&(d+=y),E=d>>23}for(m=i-t&7;m-- >0&&e;){let t;0!=(t=e[(16256&r)+(n>>7)]>>>E)&&(s[h]=t),h++,n+=_,r+=C}}};static TS=(t,i,s,h,e)=>{if(this.VO&&(i>this.XO&&(i=this.XO),t<0&&(t=0)),t>=i)return;h+=t;let n=i-t>>2;if(0===this.alpha)for(;;){if(n--,n<0)for(n=i-t&3;;){if(n--,n<0)return;s[h++]=e}s[h++]=e,s[h++]=e,s[h++]=e,s[h++]=e}const r=this.alpha,o=256-this.alpha;for(e=((16711935&e)*o>>8&16711935)+((65280&e)*o>>8&65280);;){if(n--,n<0)for(n=i-t&3;;){if(n--,n<0)return;s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280)}s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280),s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280),s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280),s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280)}};static oI=t=>{this.wS[t]&&this.dS&&(this.dS[this.yS++]=this.wS[t],this.wS[t]=null)};static bS=t=>{if(this.nI[t]=this.sf++,this.wS[t])return this.wS[t];let i;if(this.yS>0&&this.dS)i=this.dS[--this.yS],this.dS[this.yS]=null;else{let t=0,s=-1;for(let i=0;i<this.uS;i++)this.wS[i]&&(this.nI[i]<t||-1===s)&&(t=this.nI[i],s=i);i=this.wS[s],this.wS[s]=null}this.wS[t]=i;const s=this.rI[t],h=this.mS[t];if(!i||!s||!h)return null;if(this.u){this.AS[t]=!1;for(let e=0;e<4096;e++){const n=i[e]=16316671&h[s.Ia[e]];0===n&&(this.AS[t]=!0),i[e+4096]=n-(n>>>3)&16316671,i[e+8192]=n-(n>>>2)&16316671,i[e+12288]=n-(n>>>2)-(n>>>3)&16316671}}else{if(64===s.width)for(let t=0;t<128;t++)for(let e=0;e<128;e++)i[e+(t<<7|0)]=h[s.Ia[(e>>1)+(t>>1<<6|0)]];else for(let t=0;t<16384;t++)i[t]=h[s.Ia[t]];this.AS[t]=!1;for(let s=0;s<16384;s++){i[s]&=16316671;const h=i[s];0===h&&(this.AS[t]=!0),i[s+16384]=h-(h>>>3)&16316671,i[s+32768]=h-(h>>>2)&16316671,i[s+49152]=h-(h>>>2)-(h>>>3)&16316671}}return i}}},5147:(t,i,s)=>{s.d(i,{E_:()=>e});var h=s(6121);const e=async t=>{255!==t[0]&&(t[0]=255),URL.revokeObjectURL(h.$L.src),h.$L.src=URL.createObjectURL(new Blob([t],{type:'image/jpeg'})),await new Promise((t=>h.$L.onload=()=>t())),h.JL.clearRect(0,0,h.KL.width,h.KL.height);const i=h.$L.naturalWidth,s=h.$L.naturalHeight;return h.KL.width=i,h.KL.height=s,h.JL.drawImage(h.$L,0,0),h.JL.getImageData(0,0,i,s)}},9178:(t,i,s)=>{s.d(i,{i:()=>f});var h=s(2383),e=s(2991),n=s(8078),r=s(8762),o=s(6327),l=s(9345);class a{$C=0;cO=0;OS=0;LS=-1;SS=-1;kS=-1;RS=-1;MS=-1;xS=-1;NS=-1;PS=-1;DS=-1;FS=0;US=-1;BS=-1;GS=-1;data=null}class c{x=0;y=0;z=0;w=0}class f extends o.i{static metadata=null;static head=null;static HS=null;static WS=null;static YS=null;static ZS=null;static VS=null;static XS=null;static zS=null;static jS=null;static qS=null;static $S=null;static KS=null;static JS=null;static axis=null;static QS=new l.to(4096,!1);static tk=new l.to(4096,!1);static ik=new Int32Array(4096);static sk=new Int32Array(4096);static hk=new Int32Array(4096);static ek=new Int32Array(4096);static nk=new Int32Array(4096);static rk=new Int32Array(4096);static lk=new Int32Array(1500);static ak=new l.rn(1500,512);static ck=new Int32Array(12);static fk=new l.rn(12,2e3);static uk=new Int32Array(2e3);static dk=new Int32Array(2e3);static wk=new Int32Array(12);static yk=new Int32Array(10);static mk=new Int32Array(10);static pk=new Int32Array(10);static Ne=0;static Ak=0;static Pe=0;static hf=!1;static Xo=0;static zo=0;static ef=0;static np=new Int32Array(1e3);static Ik=!1;static Aa(t){try{f.head=new h.i(t.read('ob_head.dat')),f.HS=new h.i(t.read('ob_face1.dat')),f.WS=new h.i(t.read('ob_face2.dat')),f.YS=new h.i(t.read('ob_face3.dat')),f.ZS=new h.i(t.read('ob_face4.dat')),f.VS=new h.i(t.read('ob_face5.dat')),f.XS=new h.i(t.read('ob_point1.dat')),f.zS=new h.i(t.read('ob_point2.dat')),f.jS=new h.i(t.read('ob_point3.dat')),f.qS=new h.i(t.read('ob_point4.dat')),f.$S=new h.i(t.read('ob_point5.dat')),f.KS=new h.i(t.read('ob_vertex1.dat')),f.JS=new h.i(t.read('ob_vertex2.dat')),f.axis=new h.i(t.read('ob_axis.dat')),f.head.$a=0,f.XS.$a=0,f.zS.$a=0,f.jS.$a=0,f.qS.$a=0,f.KS.$a=0,f.JS.$a=0;const i=f.head.Dw;f.metadata=new l.to(i+100,null);let s=0,e=0,n=0,r=0,o=0,c=0,u=0;for(let t=0;t<i;t++){const t=f.head.Dw,i=new a;i.$C=f.head.Dw,i.cO=f.head.Dw,i.OS=f.head.Gw,i.LS=f.XS.$a,i.SS=f.zS.$a,i.kS=f.jS.$a,i.RS=f.qS.$a,i.xS=f.KS.$a,i.NS=f.JS.$a;const h=f.head.Gw,l=f.head.Gw,d=f.head.Gw,w=f.head.Gw,y=f.head.Gw;for(let t=0;t<i.$C;t++){const t=f.XS.Gw;0!=(1&t)&&f.zS.gk,0!=(2&t)&&f.jS.gk,0!=(4&t)&&f.qS.gk}for(let t=0;t<i.cO;t++){1===f.JS.Gw&&(f.KS.gk,f.KS.gk),f.KS.gk}i.PS=n,n+=2*i.cO,1===h&&(i.DS=r,r+=i.cO),255===l?(i.FS=o,o+=i.cO):i.FS=-l-1,1===d&&(i.US=c,c+=i.cO),1===w&&(i.BS=u,u+=i.cO),1===y&&(i.MS=e,e+=i.$C),i.GS=s,s+=i.OS,f.metadata[t]=i}}catch(t){console.log('Error loading model index'),console.error(t)}}static _k(t,i){if(null===f.metadata&&(f.metadata=[]),null===t){const t=new a;return t.$C=0,t.cO=0,t.OS=0,void(f.metadata[i]=t)}const s=new h.i(t);s.$a=s.length-18;const e=new a;e.data=t,e.$C=s.Dw,e.cO=s.Dw,e.OS=s.Gw,f.metadata[i]=e;const n=s.Gw,r=s.Gw,o=s.Gw,l=s.Gw,c=s.Gw,u=s.Dw,d=s.Dw,w=s.Dw,y=s.Dw;let m=0;e.LS=m,m+=e.$C,e.NS=m,m+=e.cO,e.FS=m,255===r?m+=e.cO:e.FS=-r-1,e.BS=m,1===l?m+=e.cO:e.BS=-1,e.DS=m,1===n?m+=e.cO:e.DS=-1,e.MS=m,1===c?m+=e.$C:e.MS=-1,e.US=m,1===o?m+=e.cO:e.US=-1,e.xS=m,m+=y,e.PS=m,m+=2*e.cO,e.GS=m,m+=6*e.OS,e.SS=m,m+=u,e.kS=m,m+=d,e.RS=m,m+=w}static Fr(){f.metadata=null,f.head=null,f.HS=null,f.WS=null,f.YS=null,f.ZS=null,f.VS=null,f.XS=null,f.zS=null,f.jS=null,f.qS=null,f.$S=null,f.KS=null,f.JS=null,f.axis=null,f.QS=null,f.tk=null,f.ik=null,f.sk=null,f.hk=null,f.ek=null,f.nk=null,f.rk=null,f.lk=null,f.ak=null,f.ck=null,f.fk=null,f.uk=null,f.dk=null,f.wk=null}static Ck(t,i,s){return 2==(2&s)?(i<0?i=0:i>127&&(i=127),127-i):((i=i*(127&t)>>7)<2?i=2:i>126&&(i=126),(65408&t)+i)}static qC=(t,i,s)=>{const h=t.$C,e=t.cO,n=t.OS;let r,o,a,u,d;if(i){r=new Int32Array(h);for(let i=0;i<h;i++)r[i]=t.QC[i]}else r=t.QC;let w=null,y=null;if(s){o=new Int32Array(e),a=new Int32Array(e),u=new Int32Array(e);for(let i=0;i<e;i++)t.Ek&&(o[i]=t.Ek[i]),t.Tk&&(a[i]=t.Tk[i]),t.bk&&(u[i]=t.bk[i]);if(d=new Int32Array(e),t.aO)for(let i=0;i<e;i++)d[i]=t.aO[i];else for(let t=0;t<e;t++)d[t]=0;w=new l.to(h,null);for(let i=0;i<h;i++){const s=w[i]=new c;if(t.$v){const h=t.$v[i];h&&(s.x=h.x,s.y=h.y,s.z=h.z,s.w=h.w)}}y=t.hO}else o=t.Ek,a=t.Tk,u=t.bk,d=t.aO;return new f({$C:h,KC:t.KC,QC:r,JC:t.JC,cO:e,fO:t.fO,uO:t.uO,dO:t.dO,Ek:o,Tk:a,bk:u,aO:d,vk:t.vk,Ok:t.Ok,rC:t.rC,priority:t.priority,OS:n,Lk:t.Lk,Sk:t.Sk,kk:t.kk,nO:t.nO,rO:t.rO,oO:t.oO,lO:t.lO,Sb:t.Sb,eO:t.eO,rE:t.rE,Rk:t.Rk,Mk:t.Mk,$v:w,hO:y})};static oC=(t,i,s,h)=>{const e=t.$C,n=t.cO,r=t.OS;let o,l,a,c,u;if(h)o=t.KC,l=t.QC,a=t.JC;else{o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e);for(let i=0;i<e;i++)o[i]=t.KC[i],l[i]=t.QC[i],a[i]=t.JC[i]}if(i)c=t.rC;else{c=new Int32Array(n);for(let i=0;i<n;i++)t.rC&&(c[i]=t.rC[i])}if(s)u=t.Ok;else if(u=new Int32Array(n),t.Ok)for(let i=0;i<n;i++)u[i]=t.Ok[i];else for(let t=0;t<n;t++)u[t]=0;return new f({$C:e,KC:o,QC:l,JC:a,cO:n,fO:t.fO,uO:t.uO,dO:t.dO,Ek:null,Tk:null,bk:null,aO:t.aO,vk:t.vk,Ok:u,rC:c,priority:t.priority,OS:r,Lk:t.Lk,Sk:t.Sk,kk:t.kk,xk:t.xk,Nk:t.Nk})};static wE=(t,i)=>{const s=t.$C,h=t.cO,e=t.OS,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s);for(let i=0;i<s;i++)n[i]=t.KC[i],r[i]=t.QC[i],o[i]=t.JC[i];let l;if(i)l=t.Ok;else if(l=new Int32Array(h),t.Ok)for(let i=0;i<h;i++)l[i]=t.Ok[i];else for(let t=0;t<h;t++)l[t]=0;return new f({$C:s,KC:n,QC:r,JC:o,cO:h,fO:t.fO,uO:t.uO,dO:t.dO,Ek:t.Ek,Tk:t.Tk,bk:t.bk,aO:t.aO,vk:t.vk,Ok:l,rC:t.rC,priority:t.priority,OS:e,Lk:t.Lk,Sk:t.Sk,kk:t.kk,hE:t.hE,sE:t.sE})};static yL=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.$C,o+=i.cO,l+=i.OS,s||=null!==i.aO,i.vk?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.Ok,n||=null!==i.rC)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(o),y=new Int32Array(o),m=new Int32Array(o),p=new Int32Array(o),A=new Int32Array(o),I=new Int32Array(o),g=new Int32Array(l),_=new Int32Array(l),C=new Int32Array(l);let E=null;s&&(E=new Int32Array(o));let T=null;h&&(T=new Int32Array(o));let b=null;e&&(b=new Int32Array(o));let v=null;n&&(v=new Int32Array(o)),r=0,o=0,l=0;for(let a=0;a<i;a++){const i=t[a];if(i){const t=r;for(let t=0;t<i.$C;t++)c[r]=i.KC[t],u[r]=i.QC[t],d[r]=i.JC[t],r++;for(let r=0;r<i.cO;r++)w[o]=i.fO[r]+t,y[o]=i.uO[r]+t,m[o]=i.dO[r]+t,i.Ek&&(p[o]=i.Ek[r]),i.Tk&&(A[o]=i.Tk[r]),i.bk&&(I[o]=i.bk[r]),s&&(i.aO?E&&(E[o]=i.aO[r]):E&&(E[o]=0)),h&&(i.vk?T&&(T[o]=i.vk[r]):T&&(T[o]=i.priority)),e&&(i.Ok?b&&(b[o]=i.Ok[r]):b&&(b[o]=0)),n&&i.rC&&v&&(v[o]=i.rC[r]),o++;for(let s=0;s<i.OS;s++)g[l]=i.Lk[s]+t,_[l]=i.Sk[s]+t,C[l]=i.kk[s]+t,l++}}const O=new f({$C:r,KC:c,QC:u,JC:d,cO:o,fO:w,uO:y,dO:m,Ek:p,Tk:A,bk:I,aO:E,vk:T,Ok:b,rC:v,priority:a,OS:l,Lk:g,Sk:_,kk:C});return O.mE(),O};static Bl=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.$C,o+=i.cO,l+=i.OS,s||=null!==i.aO,i.vk?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.Ok,n||=null!==i.Nk)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(r),y=new Int32Array(o),m=new Int32Array(o),p=new Int32Array(o),A=new Int32Array(l),I=new Int32Array(l),g=new Int32Array(l);let _=null;s&&(_=new Int32Array(o));let C=null;h&&(C=new Int32Array(o));let E=null;e&&(E=new Int32Array(o));let T=null;n&&(T=new Int32Array(o));const b=new Int32Array(o);r=0,o=0,l=0;const v=(t,i,s,h,e,n,r)=>{let o=-1;const l=t.KC[i],a=t.QC[i],c=t.JC[i];for(let t=0;t<r;t++)if(l===s[t]&&a===h[t]&&c===e[t]){o=t;break}return-1===o&&(s[r]=l,h[r]=a,e[r]=c,n&&t.xk&&(n[r]=t.xk[i]),o=r++),{vertex:o,$C:r}};for(let a=0;a<i;a++){const i=t[a];if(i){for(let t=0;t<i.cO;t++){s&&(i.aO?_&&(_[o]=i.aO[t]):_&&(_[o]=0)),h&&(i.vk?C&&(C[o]=i.vk[t]):C&&(C[o]=i.priority)),e&&(i.Ok?E&&(E[o]=i.Ok[t]):E&&(E[o]=0)),n&&i.Nk&&T&&(T[o]=i.Nk[t]),i.rC&&(b[o]=i.rC[t]);const l=v(i,i.fO[t],c,u,d,w,r);r=l.$C;const a=v(i,i.uO[t],c,u,d,w,r);r=a.$C;const f=v(i,i.dO[t],c,u,d,w,r);r=f.$C,y[o]=l.vertex,m[o]=a.vertex,p[o]=f.vertex,o++}for(let t=0;t<i.OS;t++){const s=v(i,i.Lk[t],c,u,d,w,r);r=s.$C;const h=v(i,i.Sk[t],c,u,d,w,r);r=h.$C;const e=v(i,i.kk[t],c,u,d,w,r);r=e.$C,A[l]=s.vertex,I[l]=h.vertex,g[l]=e.vertex,l++}}}return new f({$C:r,KC:c,QC:u,JC:d,cO:o,fO:y,uO:m,dO:p,Ek:null,Tk:null,bk:null,aO:_,vk:C,Ok:E,rC:b,priority:a,OS:l,Lk:A,Sk:I,kk:g,xk:w,Nk:T})};static model=t=>{if(!f.metadata)throw new Error('cant loading model metadata!!!!!');const i=f.metadata[t];if(!i)throw console.log(`Error model:${t} not found!`),new Error('cant loading model metadata!!!!!');if(!(f.head&&f.HS&&f.WS&&f.YS&&f.ZS&&f.VS&&f.XS&&f.zS&&f.jS&&f.qS&&f.$S&&f.KS&&f.JS&&f.axis))throw new Error('cant loading model!!!!!');const s=i.$C,h=i.cO,e=i.OS,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s),l=new Int32Array(h),a=new Int32Array(h),c=new Int32Array(h),u=new Int32Array(e),d=new Int32Array(e),w=new Int32Array(e);let y=null;i.MS>=0&&(y=new Int32Array(s));let m=null;i.DS>=0&&(m=new Int32Array(h));let p=null,A=0;i.FS>=0?p=new Int32Array(h):A=-i.FS-1;let I=null;i.US>=0&&(I=new Int32Array(h));let g=null;i.BS>=0&&(g=new Int32Array(h));const _=new Int32Array(h);f.XS.$a=i.LS,f.zS.$a=i.SS,f.jS.$a=i.kS,f.qS.$a=i.RS,f.$S.$a=i.MS;let C,E,T,b=0,v=0,O=0;for(let t=0;t<s;t++){const i=f.XS.Gw;C=0,0!=(1&i)&&(C=f.zS.gk),E=0,0!=(2&i)&&(E=f.jS.gk),T=0,0!=(4&i)&&(T=f.qS.gk),n[t]=b+C,r[t]=v+E,o[t]=O+T,b=n[t],v=r[t],O=o[t],y&&(y[t]=f.$S.Gw)}f.HS.$a=i.PS,f.WS.$a=i.DS,f.YS.$a=i.FS,f.ZS.$a=i.US,f.VS.$a=i.BS;for(let t=0;t<h;t++)_[t]=f.HS.Dw,m&&(m[t]=f.WS.Gw),p&&(p[t]=f.YS.Gw),I&&(I[t]=f.ZS.Gw),g&&(g[t]=f.VS.Gw);f.KS.$a=i.xS,f.JS.$a=i.NS,C=0,E=0,T=0;let L=0;for(let t=0;t<h;t++){const i=f.JS.Gw;if(1===i)C=f.KS.gk+L,L=C,E=f.KS.gk+L,L=E,T=f.KS.gk+L,L=T;else if(2===i)E=T,T=f.KS.gk+L,L=T;else if(3===i)C=T,T=f.KS.gk+L,L=T;else if(4===i){const t=C;C=E,E=t,T=f.KS.gk+L,L=T}l[t]=C,a[t]=E,c[t]=T}f.axis.$a=6*i.GS;for(let t=0;t<e;t++)u[t]=f.axis.Dw,d[t]=f.axis.Dw,w[t]=f.axis.Dw;return new f({$C:s,KC:n,QC:r,JC:o,cO:h,fO:l,uO:a,dO:c,Ek:null,Tk:null,bk:null,aO:m,vk:p,Ok:I,rC:_,priority:A,OS:e,Lk:u,Sk:d,kk:w,xk:y,Nk:g})};static Pk=(t,i)=>{if(!f.metadata||!f.metadata[i])throw new Error('No model metadata');const s=f.metadata[i];if(s.data=t,!s.data.length)throw new Error('No model data');const e=s.$C,n=s.cO,r=s.OS,o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e),c=new Int32Array(n),u=new Int32Array(n),d=new Int32Array(n),w=new Int32Array(r),y=new Int32Array(r),m=new Int32Array(r);let p=null;s.MS>=0&&(p=new Int32Array(e));let A=null;s.DS>=0&&(A=new Int32Array(n));let I=null,g=0;s.FS>=0?I=new Int32Array(n):g=-s.FS-1;let _=null;s.US>=0&&(_=new Int32Array(n));let C=null;s.BS>=0&&(C=new Int32Array(n));const E=new Int32Array(n),T=new h.i(s.data);T.$a=s.LS;const b=new h.i(s.data);b.$a=s.SS;const v=new h.i(s.data);v.$a=s.kS;const O=new h.i(s.data);O.$a=s.RS;const L=new h.i(s.data);L.$a=s.MS;let S,k,R,M=0,x=0,N=0;for(let t=0;t<e;t++){const i=T.Gw;S=0,0!=(1&i)&&(S=b.gk),k=0,0!=(2&i)&&(k=v.gk),R=0,0!=(4&i)&&(R=O.gk),o[t]=M+S,l[t]=x+k,a[t]=N+R,M=o[t],x=l[t],N=a[t],p&&(p[t]=L.Gw)}const P=new h.i(s.data);P.$a=s.PS;const D=new h.i(s.data);D.$a=s.DS;const F=new h.i(s.data);F.$a=s.FS;const U=new h.i(s.data);U.$a=s.US;const B=new h.i(s.data);B.$a=s.BS;for(let t=0;t<n;t++)E[t]=P.Dw,A&&(A[t]=D.Gw),I&&(I[t]=F.Gw),_&&(_[t]=U.Gw),C&&(C[t]=B.Gw);const G=new h.i(s.data);G.$a=s.xS;const H=new h.i(s.data);H.$a=s.NS,S=0,k=0,R=0;let W=0;for(let t=0;t<n;t++){const i=H.Gw;if(1===i)S=G.gk+W,W=S,k=G.gk+W,W=k,R=G.gk+W,W=R;else if(2===i)k=R,R=G.gk+W,W=R;else if(3===i)S=R,R=G.gk+W,W=R;else if(4===i){const t=S;S=k,k=t,R=G.gk+W,W=R}c[t]=S,u[t]=k,d[t]=R}const Y=new h.i(s.data);Y.$a=6*s.GS;for(let t=0;t<r;t++)w[t]=Y.Dw,y[t]=Y.Dw,m[t]=Y.Dw;return new f({$C:e,KC:o,QC:l,JC:a,cO:n,fO:c,uO:u,dO:d,Ek:null,Tk:null,bk:null,aO:A,vk:I,Ok:_,rC:E,priority:g,OS:r,Lk:w,Sk:y,kk:m,xk:p,Nk:C})};$C;KC;QC;JC;cO;fO;uO;dO;Ek;Tk;bk;aO;vk;Ok;rC;priority;OS;Lk;Sk;kk;nO;rO;oO;lO;Sb;eO;rE;Rk;Mk;xk;Nk;hE;sE;$v;hO;nE=0;pE=!1;Dk=-1;Fk=-1;constructor(t){super(),this.$C=t.$C,this.KC=t.KC,this.QC=t.QC,this.JC=t.JC,this.cO=t.cO,this.fO=t.fO,this.uO=t.uO,this.dO=t.dO,this.Ek=t.Ek,this.Tk=t.Tk,this.bk=t.bk,this.aO=t.aO,this.vk=t.vk,this.Ok=t.Ok,this.rC=t.rC,this.priority=t.priority,this.OS=t.OS,this.Lk=t.Lk,this.Sk=t.Sk,this.kk=t.kk,this.nO=t.nO??0,this.rO=t.rO??0,this.oO=t.oO??0,this.lO=t.lO??0,this.Sb=t.Sb??0,this.eO=t.eO??0,this.rE=t.rE??0,this.Rk=t.Rk??0,this.Mk=t.Mk??0,this.xk=t.xk??null,this.Nk=t.Nk??null,this.hE=t.hE??null,this.sE=t.sE??null,this.$v=t.$v??null,this.hO=t.hO??null}mE=()=>{this.rE=0,this.Sb=0,this.eO=0;for(let t=0;t<this.$C;t++){const i=this.KC[t],s=this.QC[t],h=this.JC[t];-s>this.rE&&(this.rE=-s),s>this.eO&&(this.eO=s);const e=i*i+h*h;e>this.Sb&&(this.Sb=e)}this.Sb=Math.sqrt(this.Sb)+.99|0,this.Mk=Math.sqrt(this.Sb*this.Sb+this.rE*this.rE)+.99|0,this.Rk=this.Mk+(Math.sqrt(this.Sb*this.Sb+this.eO*this.eO)+.99|0)};tE=()=>{this.rE=0,this.eO=0;for(let t=0;t<this.$C;t++){const i=this.QC[t];-i>this.rE&&(this.rE=-i),i>this.eO&&(this.eO=i)}this.Mk=Math.sqrt(this.Sb*this.Sb+this.rE*this.rE)+.99|0,this.Rk=this.Mk+(Math.sqrt(this.Sb*this.Sb+this.eO*this.eO)+.99|0)};Zl=()=>{if(this.xk){const t=new Int32Array(256);let i=0;for(let s=0;s<this.$C;s++){const h=this.xk[s];t[h]++,h>i&&(i=h)}this.hE=new l.to(i+1,null);for(let s=0;s<=i;s++)this.hE[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.$C;){const i=this.xk[s],h=this.hE[i];h&&(h[t[i]++]=s++)}this.xk=null}if(this.Nk){const t=new Int32Array(256);let i=0;for(let s=0;s<this.cO;s++){const h=this.Nk[s];t[h]++,h>i&&(i=h)}this.sE=new l.to(i+1,null);for(let s=0;s<=i;s++)this.sE[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.cO;){const i=this.Nk[s],h=this.sE[i];h&&(h[t[i]++]=s++)}this.Nk=null}};yE=(t,i,s)=>{if(-1!==t)if(s&&-1!==i){const h=r.i.Gr[t],e=r.i.Gr[i],n=h.Uk;f.Ne=0,f.Ak=0,f.Pe=0;let o=0,l=s[o++];for(let t=0;t<h.length;t++){if(!h.Bk)continue;const i=h.Bk[t];for(;i>l;)l=s[o++];n&&n.types&&h.x&&h.y&&h.z&&n.labels&&(i!==l||0===n.types[i])&&this.Gk(h.x[t],h.y[t],h.z[t],n.labels[i],n.types[i])}f.Ne=0,f.Ak=0,f.Pe=0,o=0,l=s[o++];for(let t=0;t<e.length;t++){if(!e.Bk)continue;const i=e.Bk[t];for(;i>l;)l=s[o++];n&&n.types&&e.x&&e.y&&e.z&&n.labels&&(i===l||0===n.types[i])&&this.Gk(e.x[t],e.y[t],e.z[t],n.labels[i],n.types[i])}}else this.Vl(t)};Vl=t=>{if(!this.hE||-1===t||!r.i.Gr[t])return;const i=r.i.Gr[t],s=i.Uk;f.Ne=0,f.Ak=0,f.Pe=0;for(let t=0;t<i.length;t++){if(!(i.Bk&&i.x&&i.y&&i.z&&s&&s.labels&&s.types))continue;const h=i.Bk[t];this.Gk(i.x[t],i.y[t],i.z[t],s.labels[h],s.types[h])}};eE=()=>{for(let t=0;t<this.$C;t++){const i=this.KC[t];this.KC[t]=this.JC[t],this.JC[t]=-i}};LL=t=>{const i=n.i.sin[t],s=n.i.cos[t];for(let t=0;t<this.$C;t++){const h=this.QC[t]*s-this.JC[t]*i>>16;this.JC[t]=this.QC[t]*i+this.JC[t]*s>>16,this.QC[t]=h}};translate=(t,i,s)=>{for(let h=0;h<this.$C;h++)this.KC[h]+=i,this.QC[h]+=t,this.JC[h]+=s};Gl=(t,i)=>{if(this.rC)for(let s=0;s<this.cO;s++)this.rC[s]===t&&(this.rC[s]=i)};iE=()=>{for(let t=0;t<this.$C;t++)this.JC[t]=-this.JC[t];for(let t=0;t<this.cO;t++){const i=this.fO[t];this.fO[t]=this.dO[t],this.dO[t]=i}};scale=(t,i,s)=>{for(let h=0;h<this.$C;h++)this.KC[h]=this.KC[h]*t/128|0,this.QC[h]=this.QC[h]*i/128|0,this.JC[h]=this.JC[h]*s/128|0};Xl=(t,i,s,h,e,n)=>{const r=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;if(this.Ek&&this.Tk&&this.bk||(this.Ek=new Int32Array(this.cO),this.Tk=new Int32Array(this.cO),this.bk=new Int32Array(this.cO)),!this.$v){this.$v=new l.to(this.$C,null);for(let t=0;t<this.$C;t++)this.$v[t]=new c}for(let i=0;i<this.cO;i++){const n=this.fO[i],o=this.uO[i],l=this.dO[i],a=this.KC[o]-this.KC[n],c=this.QC[o]-this.QC[n],u=this.JC[o]-this.JC[n],d=this.KC[l]-this.KC[n],w=this.QC[l]-this.QC[n],y=this.JC[l]-this.JC[n];let m=c*y-w*u,p=u*d-y*a,A=a*w-d*c;for(;m>8192||p>8192||A>8192||m<-8192||p<-8192||A<-8192;)m>>=1,p>>=1,A>>=1;let I=0|Math.sqrt(m*m+p*p+A*A);if(I<=0&&(I=1),m=256*m/I|0,p=256*p/I|0,A=256*A/I|0,this.aO&&0!=(1&this.aO[i])){const n=t+((s*m+h*p+e*A)/(r+(r/2|0))|0);this.rC&&(this.Ek[i]=f.Ck(this.rC[i],n,this.aO[i]))}else{let t=this.$v[n];t&&(t.x+=m,t.y+=p,t.z+=A,t.w++),t=this.$v[o],t&&(t.x+=m,t.y+=p,t.z+=A,t.w++),t=this.$v[l],t&&(t.x+=m,t.y+=p,t.z+=A,t.w++)}}if(n)this.Qv(t,r,s,h,e);else{this.hO=new l.to(this.$C,null);for(let t=0;t<this.$C;t++){const i=this.$v[t],s=new c;i&&(s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w),this.hO[t]=s}}n?this.mE():this.Hk()};Qv=(t,i,s,h,e)=>{for(let n=0;n<this.cO;n++){const r=this.fO[n],o=this.uO[n],l=this.dO[n];if(!this.aO&&this.rC&&this.$v&&this.Ek&&this.Tk&&this.bk){const a=this.rC[n],c=this.$v[r];c&&(this.Ek[n]=f.Ck(a,t+((s*c.x+h*c.y+e*c.z)/(i*c.w)|0),0));const u=this.$v[o];u&&(this.Tk[n]=f.Ck(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),0));const d=this.$v[l];d&&(this.bk[n]=f.Ck(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),0))}else if(this.aO&&0==(1&this.aO[n])&&this.rC&&this.$v&&this.Ek&&this.Tk&&this.bk){const a=this.rC[n],c=this.aO[n],u=this.$v[r];u&&(this.Ek[n]=f.Ck(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),c));const d=this.$v[o];d&&(this.Tk[n]=f.Ck(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),c));const w=this.$v[l];w&&(this.bk[n]=f.Ck(a,t+((s*w.x+h*w.y+e*w.z)/(i*w.w)|0),c))}}if(this.$v=null,this.hO=null,this.xk=null,this.Nk=null,this.aO)for(let t=0;t<this.cO;t++)if(2==(2&this.aO[t]))return;this.rC=null};El=(t,i,s,h,e,r,o)=>{const l=n.i.sin[t],a=n.i.cos[t],c=n.i.sin[i],u=n.i.cos[i],d=n.i.sin[s],w=n.i.cos[s],y=n.i.sin[h],m=n.i.cos[h],p=r*y+o*m>>16;for(let h=0;h<this.$C;h++){let A,I=this.KC[h],g=this.QC[h],_=this.JC[h];0!==s&&(A=g*d+I*w>>16,g=g*w-I*d>>16,I=A),0!==t&&(A=g*a-_*l>>16,_=g*l+_*a>>16,g=A),0!==i&&(A=_*c+I*u>>16,_=_*u-I*c>>16,I=A),I+=e,g+=r,_+=o,A=g*m-_*y>>16,_=g*y+_*m>>16,g=A,f.ik&&f.sk&&f.hk&&(f.hk[h]=_-p,f.ik[h]=n.i.Al+((I<<9)/_|0),f.sk[h]=n.i.Il+((g<<9)/_|0)),this.OS>0&&f.ek&&f.nk&&f.rk&&(f.ek[h]=I,f.nk[h]=g,f.rk[h]=_)}try{this.Wk(!1,!1,0)}catch(t){}};draw=(t,i,s,h,r,o,l,a,c)=>{const u=a*r-o*h>>16,d=l*i+u*s>>16,w=this.Sb*s>>16,y=d+w;if(y<=50||d>=3500)return;const m=a*h+o*r>>16;let p=m-this.Sb<<9;if((p/y|0)>=e.i.rS)return;let A=m+this.Sb<<9;if((A/y|0)<=-e.i.rS)return;const I=l*s-u*i>>16,g=this.Sb*i>>16;let _=I+g<<9;if((_/y|0)<=-e.i.oS)return;let C=I-(g+(this.rE*s>>16))<<9;if((C/y|0)>=e.i.oS)return;let E=d-(w+(this.rE*i>>16))<=50,T=!1;if(c>0&&f.hf){let t=d-w;t<=50&&(t=50),m>0?(p=p/y|0,A=A/t|0):(A=A/y|0,p=p/t|0),I>0?(C=C/y|0,_=_/t|0):(_=_/y|0,C=C/t|0);const i=f.Xo-n.i.Al,s=f.zo-n.i.Il;i>p&&i<A&&s>C&&s<_&&(this.pE?f.np[f.ef++]=c:T=!0)}const b=n.i.Al,v=n.i.Il;let O=0,L=0;0!==t&&(O=n.i.sin[t],L=n.i.cos[t]);for(let e=0;e<this.$C;e++){let n,c=this.KC[e],u=this.QC[e],w=this.JC[e];0!==t&&(n=w*O+c*L>>16,w=w*L-c*O>>16,c=n),c+=o,u+=l,w+=a,n=w*h+c*r>>16,w=w*r-c*h>>16,c=n,n=u*s-w*i>>16,w=u*i+w*s>>16,u=n,f.hk&&(f.hk[e]=w-d),w>=50&&f.ik&&f.sk?(f.ik[e]=b+((c<<9)/w|0),f.sk[e]=v+((u<<9)/w|0)):f.ik&&(f.ik[e]=-5e3,E=!0),(E||this.OS>0)&&f.ek&&f.nk&&f.rk&&(f.ek[e]=c,f.nk[e]=u,f.rk[e]=w)}try{this.Wk(E,T,c)}catch(t){}};Wk=(t,i,s,h=!1)=>{f.Ik&&(this.Dk=-1,this.Fk=-1);for(let t=0;t<this.Rk;t++)f.lk&&(f.lk[t]=0);for(let h=0;h<this.cO;h++)if((!this.aO||-1!==this.aO[h])&&f.ik&&f.sk&&f.hk&&f.ak&&f.lk){const n=this.fO[h],r=this.uO[h],o=this.dO[h],l=f.ik[n],a=f.ik[r],c=f.ik[o],u=f.sk[n],d=f.sk[r],w=f.sk[o],y=f.hk[n],m=f.hk[r],p=f.hk[o];if(!t||-5e3!==l&&-5e3!==a&&-5e3!==c){i&&this.Yk(f.Xo,f.zo,u,d,w,l,a,c)&&(f.np[f.ef++]=s,i=!1);if((l-a)*(w-d)-(u-d)*(c-a)<=0)continue;if(f.tk&&(f.tk[h]=!1),f.QS&&(f.QS[h]=l<0||a<0||c<0||l>e.i.XO||a>e.i.XO||c>e.i.XO),f.ak&&f.lk){const t=((y+m+p)/3|0)+this.Mk;f.ak[t][f.lk[t]++]=h,f.Ik&&this.Yk(f.Xo,f.zo,u,d,w,l,a,c)&&this.Fk<t&&(this.Dk=h,this.Fk=t)}}else if(f.tk&&(f.tk[h]=!0),f.ak&&f.lk){const t=((y+m+p)/3|0)+this.Mk;f.ak[t][f.lk[t]++]=h}}if(!this.vk&&f.lk){for(let t=this.Rk-1;t>=0;t--){const i=f.lk[t];if(!(i<=0)&&f.ak){const s=f.ak[t];for(let t=0;t<i;t++)this.Zk(s[t],h)}}return}for(let t=0;t<12;t++)f.ck&&f.wk&&(f.ck[t]=0,f.wk[t]=0);if(f.lk)for(let t=this.Rk-1;t>=0;t--){const i=f.lk[t];if(i>0&&f.ak){const s=f.ak[t];for(let h=0;h<i;h++)if(this.vk&&f.ck&&f.fk){const i=s[h],e=this.vk[i],n=f.ck[e]++;f.fk[e][n]=i,e<10&&f.wk?f.wk[e]+=t:10===e&&f.uk?f.uk[n]=t:f.dk&&(f.dk[n]=t)}}}let n=0;f.ck&&f.wk&&(f.ck[1]>0||f.ck[2]>0)&&(n=(f.wk[1]+f.wk[2])/(f.ck[1]+f.ck[2])|0);let r=0;f.ck&&f.wk&&(f.ck[3]>0||f.ck[4]>0)&&(r=(f.wk[3]+f.wk[4])/(f.ck[3]+f.ck[4])|0);let o=0;if(f.ck&&f.wk&&(f.ck[6]>0||f.ck[8]>0)&&(o=(f.wk[6]+f.wk[8])/(f.ck[6]+f.ck[8])|0),f.ck&&f.fk){let t,i=0,s=f.ck[10],e=f.fk[10],l=f.uk;i===s&&(i=0,s=f.ck[11],e=f.fk[11],l=f.dk),t=i<s&&l?l[i]:-1e3;for(let a=0;a<10;a++){for(;0===a&&t>n;)this.Zk(e[i++],h),i===s&&e!==f.fk[11]&&(i=0,s=f.ck[11],e=f.fk[11],l=f.dk),t=i<s&&l?l[i]:-1e3;for(;3===a&&t>r;)this.Zk(e[i++],h),i===s&&e!==f.fk[11]&&(i=0,s=f.ck[11],e=f.fk[11],l=f.dk),t=i<s&&l?l[i]:-1e3;for(;5===a&&t>o;)this.Zk(e[i++],h),i===s&&e!==f.fk[11]&&(i=0,s=f.ck[11],e=f.fk[11],l=f.dk),t=i<s&&l?l[i]:-1e3;const c=f.ck[a],u=f.fk[a];for(let t=0;t<c;t++)this.Zk(u[t],h)}for(;-1e3!==t;)this.Zk(e[i++],h),i===s&&e!==f.fk[11]&&(i=0,e=f.fk[11],s=f.ck[11],l=f.dk),t=i<s&&l?l[i]:-1e3}};Zk=(t,i=!1)=>{if(f.tk&&f.tk[t])return void this.Vk(t,i);const s=this.fO[t],h=this.uO[t],e=this.dO[t];let r;if(f.QS&&(n.i.VO=f.QS[t]),this.Ok?n.i.alpha=this.Ok[t]:n.i.alpha=0,r=this.aO?3&this.aO[t]:0,i&&f.ik&&f.sk&&this.Ek&&this.Tk&&this.bk)n.i.lS(f.ik[s],f.sk[s],f.ik[h],f.sk[h],n.i.palette[this.Ek[t]]),n.i.lS(f.ik[h],f.sk[h],f.ik[e],f.sk[e],n.i.palette[this.Tk[t]]),n.i.lS(f.ik[e],f.sk[e],f.ik[s],f.sk[s],n.i.palette[this.bk[t]]);else if(0===r&&this.Ek&&this.Tk&&this.bk&&f.ik&&f.sk)n.i.$O(f.ik[s],f.ik[h],f.ik[e],f.sk[s],f.sk[h],f.sk[e],this.Ek[t],this.Tk[t],this.bk[t]);else if(1===r&&this.Ek&&f.ik&&f.sk)n.i.ES(f.ik[s],f.ik[h],f.ik[e],f.sk[s],f.sk[h],f.sk[e],n.i.palette[this.Ek[t]]);else if(2===r&&this.aO&&this.rC&&this.Ek&&this.Tk&&this.bk&&f.ik&&f.sk&&f.ek&&f.nk&&f.rk){const i=this.aO[t]>>2,r=this.Lk[i],o=this.Sk[i],l=this.kk[i];n.i.tL(f.ik[s],f.ik[h],f.ik[e],f.sk[s],f.sk[h],f.sk[e],this.Ek[t],this.Tk[t],this.bk[t],f.ek[r],f.nk[r],f.rk[r],f.ek[o],f.ek[l],f.nk[o],f.nk[l],f.rk[o],f.rk[l],this.rC[t])}else if(3===r&&this.aO&&this.rC&&this.Ek&&f.ik&&f.sk&&f.ek&&f.nk&&f.rk){const i=this.aO[t]>>2,r=this.Lk[i],o=this.Sk[i],l=this.kk[i];n.i.tL(f.ik[s],f.ik[h],f.ik[e],f.sk[s],f.sk[h],f.sk[e],this.Ek[t],this.Ek[t],this.Ek[t],f.ek[r],f.nk[r],f.rk[r],f.ek[o],f.ek[l],f.nk[o],f.nk[l],f.rk[o],f.rk[l],this.rC[t])}};Vk=(t,i=!1)=>{let s=0;if(f.rk){const i=n.i.Al,h=n.i.Il,e=this.fO[t],r=this.uO[t],o=this.dO[t],l=f.rk[e],a=f.rk[r],c=f.rk[o];if(l>=50&&f.ik&&f.sk&&this.Ek)f.yk[s]=f.ik[e],f.mk[s]=f.sk[e],f.pk[s++]=this.Ek[t];else if(f.ek&&f.nk&&this.Ek){const u=f.ek[e],d=f.nk[e],w=this.Ek[t];if(c>=50&&this.bk){const e=(50-l)*n.i.fS[c-l];f.yk[s]=i+((u+((f.ek[o]-u)*e>>16)<<9)/50|0),f.mk[s]=h+((d+((f.nk[o]-d)*e>>16)<<9)/50|0),f.pk[s++]=w+((this.bk[t]-w)*e>>16)}if(a>=50&&this.Tk){const e=(50-l)*n.i.fS[a-l];f.yk[s]=i+((u+((f.ek[r]-u)*e>>16)<<9)/50|0),f.mk[s]=h+((d+((f.nk[r]-d)*e>>16)<<9)/50|0),f.pk[s++]=w+((this.Tk[t]-w)*e>>16)}}if(a>=50&&f.ik&&f.sk&&this.Tk)f.yk[s]=f.ik[r],f.mk[s]=f.sk[r],f.pk[s++]=this.Tk[t];else if(f.ek&&f.nk&&this.Tk){const u=f.ek[r],d=f.nk[r],w=this.Tk[t];if(l>=50&&this.Ek){const r=(50-a)*n.i.fS[l-a];f.yk[s]=i+((u+((f.ek[e]-u)*r>>16)<<9)/50|0),f.mk[s]=h+((d+((f.nk[e]-d)*r>>16)<<9)/50|0),f.pk[s++]=w+((this.Ek[t]-w)*r>>16)}if(c>=50&&this.bk){const e=(50-a)*n.i.fS[c-a];f.yk[s]=i+((u+((f.ek[o]-u)*e>>16)<<9)/50|0),f.mk[s]=h+((d+((f.nk[o]-d)*e>>16)<<9)/50|0),f.pk[s++]=w+((this.bk[t]-w)*e>>16)}}if(c>=50&&f.ik&&f.sk&&this.bk)f.yk[s]=f.ik[o],f.mk[s]=f.sk[o],f.pk[s++]=this.bk[t];else if(f.ek&&f.nk&&this.bk){const u=f.ek[o],d=f.nk[o],w=this.bk[t];if(a>=50&&this.Tk){const e=(50-c)*n.i.fS[a-c];f.yk[s]=i+((u+((f.ek[r]-u)*e>>16)<<9)/50|0),f.mk[s]=h+((d+((f.nk[r]-d)*e>>16)<<9)/50|0),f.pk[s++]=w+((this.Tk[t]-w)*e>>16)}if(l>=50&&this.Ek){const r=(50-c)*n.i.fS[l-c];f.yk[s]=i+((u+((f.ek[e]-u)*r>>16)<<9)/50|0),f.mk[s]=h+((d+((f.nk[e]-d)*r>>16)<<9)/50|0),f.pk[s++]=w+((this.Ek[t]-w)*r>>16)}}}const h=f.yk[0],r=f.yk[1],o=f.yk[2],l=f.mk[0],a=f.mk[1],c=f.mk[2];if(!((h-r)*(c-a)-(l-a)*(o-r)<=0))if(n.i.VO=!1,3===s){let s;if((h<0||r<0||o<0||h>e.i.XO||r>e.i.XO||o>e.i.XO)&&(n.i.VO=!0),s=this.aO?3&this.aO[t]:0,i)n.i.lS(h,r,l,a,f.pk[0]),n.i.lS(r,o,a,c,f.pk[1]),n.i.lS(o,h,c,l,f.pk[2]);else if(0===s)n.i.$O(h,r,o,l,a,c,f.pk[0],f.pk[1],f.pk[2]);else if(1===s&&this.Ek)n.i.ES(h,r,o,l,a,c,n.i.palette[this.Ek[t]]);else if(2===s&&this.aO&&this.rC&&f.ek&&f.nk&&f.rk){const i=this.aO[t]>>2,s=this.Lk[i],e=this.Sk[i],u=this.kk[i];n.i.tL(h,r,o,l,a,c,f.pk[0],f.pk[1],f.pk[2],f.ek[s],f.nk[s],f.rk[s],f.ek[e],f.ek[u],f.nk[e],f.nk[u],f.rk[e],f.rk[u],this.rC[t])}else if(3===s&&this.aO&&this.rC&&this.Ek&&f.ek&&f.nk&&f.rk){const i=this.aO[t]>>2,s=this.Lk[i],e=this.Sk[i],u=this.kk[i];n.i.tL(h,r,o,l,a,c,this.Ek[t],this.Ek[t],this.Ek[t],f.ek[s],f.nk[s],f.rk[s],f.ek[e],f.ek[u],f.nk[e],f.nk[u],f.rk[e],f.rk[u],this.rC[t])}}else if(4===s){let s;if((h<0||r<0||o<0||h>e.i.XO||r>e.i.XO||o>e.i.XO||f.yk[3]<0||f.yk[3]>e.i.XO)&&(n.i.VO=!0),s=this.aO?3&this.aO[t]:0,i)n.i.lS(h,r,l,a,f.pk[0]),n.i.lS(r,o,a,c,f.pk[1]),n.i.lS(o,f.yk[3],c,f.mk[3],f.pk[2]),n.i.lS(f.yk[3],h,f.mk[3],l,f.pk[3]);else if(0===s)n.i.$O(h,r,o,l,a,c,f.pk[0],f.pk[1],f.pk[2]),n.i.$O(h,o,f.yk[3],l,c,f.mk[3],f.pk[0],f.pk[2],f.pk[3]);else if(1===s){if(this.Ek){const i=n.i.palette[this.Ek[t]];n.i.ES(h,r,o,l,a,c,i),n.i.ES(h,o,f.yk[3],l,c,f.mk[3],i)}}else if(2===s&&this.aO&&this.rC&&f.ek&&f.nk&&f.rk){const i=this.aO[t]>>2,s=this.Lk[i],e=this.Sk[i],u=this.kk[i];n.i.tL(h,r,o,l,a,c,f.pk[0],f.pk[1],f.pk[2],f.ek[s],f.nk[s],f.rk[s],f.ek[e],f.ek[u],f.nk[e],f.nk[u],f.rk[e],f.rk[u],this.rC[t]),n.i.tL(h,o,f.yk[3],l,c,f.mk[3],f.pk[0],f.pk[2],f.pk[3],f.ek[s],f.nk[s],f.rk[s],f.ek[e],f.ek[u],f.nk[e],f.nk[u],f.rk[e],f.rk[u],this.rC[t])}else if(3===s&&this.aO&&this.rC&&this.Ek&&f.ek&&f.nk&&f.rk){const i=this.aO[t]>>2,s=this.Lk[i],e=this.Sk[i],u=this.kk[i];n.i.tL(h,r,o,l,a,c,this.Ek[t],this.Ek[t],this.Ek[t],f.ek[s],f.nk[s],f.rk[s],f.ek[e],f.ek[u],f.nk[e],f.nk[u],f.rk[e],f.rk[u],this.rC[t]),n.i.tL(h,o,f.yk[3],l,c,f.mk[3],this.Ek[t],this.Ek[t],this.Ek[t],f.ek[s],f.nk[s],f.rk[s],f.ek[e],f.ek[u],f.nk[e],f.nk[u],f.rk[e],f.rk[u],this.rC[t])}}};Gk=(t,i,s,h,e)=>{if(!h)return;const r=h.length;if(0===e){let e=0;f.Ne=0,f.Ak=0,f.Pe=0;for(let t=0;t<r;t++){if(!this.hE)continue;const i=h[t];if(i<this.hE.length){const t=this.hE[i];if(t)for(let i=0;i<t.length;i++){const s=t[i];f.Ne+=this.KC[s],f.Ak+=this.QC[s],f.Pe+=this.JC[s],e++}}}e>0?(f.Ne=(f.Ne/e|0)+t,f.Ak=(f.Ak/e|0)+i,f.Pe=(f.Pe/e|0)+s):(f.Ne=t,f.Ak=i,f.Pe=s)}else if(1===e)for(let e=0;e<r;e++){const n=h[e];if(!this.hE||n>=this.hE.length)continue;const r=this.hE[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.KC[e]+=t,this.QC[e]+=i,this.JC[e]+=s}}else if(2===e)for(let e=0;e<r;e++){const r=h[e];if(!this.hE||r>=this.hE.length)continue;const o=this.hE[r];if(o)for(let h=0;h<o.length;h++){const e=o[h];this.KC[e]-=f.Ne,this.QC[e]-=f.Ak,this.JC[e]-=f.Pe;const r=8*(255&t),l=8*(255&i),a=8*(255&s);let c,u;if(0!==a){c=n.i.sin[a],u=n.i.cos[a];const t=this.QC[e]*c+this.KC[e]*u>>16;this.QC[e]=this.QC[e]*u-this.KC[e]*c>>16,this.KC[e]=t}if(0!==r){c=n.i.sin[r],u=n.i.cos[r];const t=this.QC[e]*u-this.JC[e]*c>>16;this.JC[e]=this.QC[e]*c+this.JC[e]*u>>16,this.QC[e]=t}if(0!==l){c=n.i.sin[l],u=n.i.cos[l];const t=this.JC[e]*c+this.KC[e]*u>>16;this.JC[e]=this.JC[e]*u-this.KC[e]*c>>16,this.KC[e]=t}this.KC[e]+=f.Ne,this.QC[e]+=f.Ak,this.JC[e]+=f.Pe}}else if(3===e)for(let e=0;e<r;e++){const n=h[e];if(!this.hE||n>=this.hE.length)continue;const r=this.hE[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.KC[e]-=f.Ne,this.QC[e]-=f.Ak,this.JC[e]-=f.Pe,this.KC[e]=this.KC[e]*t/128|0,this.QC[e]=this.QC[e]*i/128|0,this.JC[e]=this.JC[e]*s/128|0,this.KC[e]+=f.Ne,this.QC[e]+=f.Ak,this.JC[e]+=f.Pe}}else if(5===e&&this.sE&&this.Ok)for(let i=0;i<r;i++){const s=h[i];if(s>=this.sE.length)continue;const e=this.sE[s];if(e)for(let i=0;i<e.length;i++){const s=e[i];this.Ok[s]+=8*t,this.Ok[s]<0&&(this.Ok[s]=0),this.Ok[s]>255&&(this.Ok[s]=255)}}};Hk=()=>{this.rE=0,this.Sb=0,this.eO=0,this.nO=999999,this.rO=-999999,this.lO=-99999,this.oO=99999;for(let t=0;t<this.$C;t++){const i=this.KC[t],s=this.QC[t],h=this.JC[t];i<this.nO&&(this.nO=i),i>this.rO&&(this.rO=i),h<this.oO&&(this.oO=h),h>this.lO&&(this.lO=h),-s>this.rE&&(this.rE=-s),s>this.eO&&(this.eO=s);const e=i*i+h*h;e>this.Sb&&(this.Sb=e)}this.Sb=0|Math.sqrt(this.Sb),this.Mk=0|Math.sqrt(this.Sb*this.Sb+this.rE*this.rE),this.Rk=this.Mk+(0|Math.sqrt(this.Sb*this.Sb+this.eO*this.eO))};Yk=(t,i,s,h,e,n,r,o)=>!(i<s&&i<h&&i<e)&&(!(i>s&&i>h&&i>e)&&(!(t<n&&t<r&&t<o)&&(t<=n||t<=r||t<=o)));Xk=t=>{if(!(f.ik&&f.sk&&this.Ek&&this.Tk&&this.bk))return;const i=this.fO[t],s=this.uO[t],h=this.dO[t];n.i.lS(f.ik[i],f.sk[i],f.ik[s],f.sk[s],n.i.palette[1e3]),n.i.lS(f.ik[s],f.sk[s],f.ik[h],f.sk[h],n.i.palette[1e3]),n.i.lS(f.ik[h],f.sk[h],f.ik[i],f.sk[i],n.i.palette[1e3])}}},6542:(t,i,s)=>{s.d(i,{i:()=>o});var h=s(2991),e=s(2383),n=s(6327),r=s(5147);class o extends n.i{Ia;width;height;Da;Fa;qo;Jf;constructor(t,i){super(),this.Ia=new Int32Array(t*i),this.width=this.qo=t,this.height=this.Jf=i,this.Da=this.Fa=0}static Na=async(t,i)=>{const s=t.read(i+'.dat');if(!s)throw new Error(`${i} jpeg not found!`);const h=await(0,r.E_)(s),e=new o(h.width,h.height),n=e.Ia,l=h.data;for(let t=0;t<n.length;t++){const i=4*t;n[t]=l[i+3]<<24|l[i]<<16|l[i+1]<<8|l[i+2]<<0}return e};static oa=(t,i,s=0)=>{const h=new e.i(t.read(i+'.dat')),n=new e.i(t.read('index.dat'));n.$a=h.Dw;const r=n.Dw,l=n.Dw,a=[],c=n.Gw-1;for(let t=0;t<c;t++)a[t+1]=n.TC,0===a[t+1]&&(a[t+1]=1);for(let t=0;t<s;t++)n.$a+=2,h.$a+=n.Dw*n.Dw,n.$a+=1;if(h.$a>h.data.length||n.$a>n.data.length)throw new Error;const f=n.Gw,u=n.Gw,d=n.Dw,w=n.Dw,y=new o(d,w);y.Da=f,y.Fa=u,y.qo=r,y.Jf=l;const m=n.Gw;if(0===m){const t=y.width*y.height;for(let i=0;i<t;i++)y.Ia[i]=a[h.Gw]}else if(1===m){const t=y.width;for(let i=0;i<t;i++){const s=y.height;for(let e=0;e<s;e++)y.Ia[i+e*t]=a[h.Gw]}}return y};bind=()=>{h.i.bind(this.Ia,this.width,this.height)};draw=(t,i)=>{t|=0,i|=0;let s=(t+=this.Da)+(i+=this.Fa)*h.i.EE,e=0,n=this.height,r=this.width,o=h.i.EE-r,l=0;if(i<h.i.top){const t=h.i.top-i;n-=t,i=h.i.top,e+=t*r,s+=t*h.i.EE}if(i+n>h.i.bottom&&(n-=i+n-h.i.bottom),t<h.i.left){const i=h.i.left-t;r-=i,t=h.i.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.i.right){const i=t+r-h.i.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.zk(r,n,this.Ia,e,l,h.i.Ia,s,o)};jo=(t,i,s)=>{i|=0,s|=0;let e=(i+=this.Da)+(s+=this.Fa)*h.i.EE,n=0,r=this.height,o=this.width,l=h.i.EE-o,a=0;if(s<h.i.top){const t=h.i.top-s;r-=t,s=h.i.top,n+=t*o,e+=t*h.i.EE}if(s+r>h.i.bottom&&(r-=s+r-h.i.bottom),i<h.i.left){const t=h.i.left-i;o-=t,i=h.i.left,n+=t,e+=t,a+=t,l+=t}if(i+o>h.i.right){const t=i+o-h.i.right;o-=t,a+=t,l+=t}o>0&&r>0&&this.jk(o,r,this.Ia,n,a,h.i.Ia,e,l,t)};wa=(t,i)=>{t|=0,i|=0;let s=(t+=this.Da)+(i+=this.Fa)*h.i.EE,e=0,n=this.height,r=this.width,o=h.i.EE-r,l=0;if(i<h.i.top){const t=h.i.top-i;n-=t,i=h.i.top,e+=t*r,s+=t*h.i.EE}if(i+n>h.i.bottom&&(n-=i+n-h.i.bottom),t<h.i.left){const i=h.i.left-t;r-=i,t=h.i.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.i.right){const i=t+r-h.i.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.qk(r,n,this.Ia,e,l,h.i.Ia,s,o)};ua=()=>{const t=this.Ia,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}};da=()=>{const t=this.Ia,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}};translate=(t,i,s)=>{for(let h=0;h<this.Ia.length;h++){const e=this.Ia[h];if(0!==e){let n=e>>16&255;n+=t,n<1?n=1:n>255&&(n=255);let r=e>>8&255;r+=i,r<1?r=1:r>255&&(r=255);let o=255&e;o+=s,o<1?o=1:o>255&&(o=255),this.Ia[h]=(n<<16)+(r<<8)+o}}};kE=(t,i,s,e)=>{t|=0,i|=0,s|=0,e|=0;try{const n=this.width;let r=0,o=0;const l=this.qo,a=this.Jf,c=(l<<16)/s|0,f=(a<<16)/e|0;t+=(this.Da*s+l-1)/l|0,i+=(this.Fa*e+a-1)/a|0,this.Da*s%l!=0&&(r=(l-this.Da*s%l<<16)/s|0),this.Fa*e%a!=0&&(o=(a-this.Fa*e%a<<16)/e|0),s=s*(this.width-(r>>16))/l|0,e=e*(this.height-(o>>16))/a|0;let u=t+i*h.i.EE,d=h.i.EE-s;if(i<h.i.top){const t=h.i.top-i;e-=t,i=0,u+=t*h.i.EE,o+=f*t}if(i+e>h.i.bottom&&(e-=i+e-h.i.bottom),t<h.i.left){const i=h.i.left-t;s-=i,t=0,u+=i,r+=c*i,d+=i}if(t+s>h.i.right){const i=t+s-h.i.right;s-=i,d+=i}this.scale(s,e,this.Ia,r,o,h.i.Ia,d,u,n,c,f)}catch(t){console.error('error in sprite clipping routine')}};zf=(t,i,s,e,n,r,o,l,a,c)=>{t|=0,i|=0,s|=0,e|=0;try{const f=-s/2|0,u=-e/2|0,d=65536*Math.sin(a/326.11)|0,w=65536*Math.cos(a/326.11)|0,y=d*c>>8,m=w*c>>8;let p=(o<<16)+u*y+f*m,A=u*m-f*y+(l<<16),I=t+i*h.i.EE;for(let t=0;t<e;t++){const i=n[t];let s=I+i,e=p+m*i,o=A-y*i;for(let i=-r[t];i<0;i++)h.i.Ia[s++]=this.Ia[(e>>16)+(o>>16)*this.width],e+=m,o-=y;p+=y,A+=m,I+=h.i.EE}}catch(t){}};Kf=(t,i,s)=>{t|=0,i|=0;let e=(t+=this.Da)+(i+=this.Fa)*h.i.EE,n=0,r=this.height,o=this.width,l=h.i.EE-o,a=0;if(i<h.i.top){const t=h.i.top-i;r-=t,i=h.i.top,n+=t*o,e+=t*h.i.EE}if(i+r>h.i.bottom&&(r-=i+r-h.i.bottom),t<h.i.left){const i=h.i.left-t;o-=i,t=h.i.left,n+=i,e+=i,a+=i,l+=i}if(t+o>h.i.right){const i=t+o-h.i.right;o-=i,a+=i,l+=i}o>0&&r>0&&this.$k(o,r,this.Ia,a,n,h.i.Ia,e,l,s.Ia)};scale=(t,i,s,h,e,n,r,o,l,a,c)=>{try{const f=h;for(let u=-i;u<0;u++){const i=(e>>16)*l;for(let e=-t;e<0;e++){const t=s[(h>>16)+i];0===t?o++:n[o++]=t,h+=a}e+=c,h=f,o+=r}}catch(t){console.error('error in plot_scale')}};qk=(t,i,s,h,e,n,r,o)=>{const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++)n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++];for(let i=t;i<0;i++)n[r++]=s[h++];r+=o,h+=e}};jk=(t,i,s,h,e,n,r,o,l)=>{const a=256-l;for(let c=-i;c<0;c++){for(let i=-t;i<0;i++){const t=s[h++];if(0===t)r++;else{const i=n[r];n[r++]=((16711935&t)*l+(16711935&i)*a&4278255360)+((65280&t)*l+(65280&i)*a&16711680)>>8}}r+=o,h+=e}};zk=(t,i,s,h,e,n,r,o)=>{const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=t}r+=o,h+=e}};$k=(t,i,s,h,e,n,r,o,l)=>{const a=-(t>>2);t=-(3&t);for(let c=-i;c<0;c++){for(let t=a;t<0;t++){let t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++}for(let i=t;i<0;i++){const t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++}r+=o,e+=h}}}},664:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(2991),e=s(2383),n=s(6327);class r extends n.i{Ia;width;height;Da;Fa;qo;Jf;palette;constructor(t,i,s){super(),this.Ia=new Int8Array(t*i),this.width=this.qo=t,this.height=this.Jf=i,this.Da=this.Fa=0,this.palette=s}static oa=(t,i,s=0)=>{const h=new e.i(t.read(i+'.dat')),n=new e.i(t.read('index.dat'));n.$a=h.Dw;const o=n.Dw,l=n.Dw,a=n.Gw,c=new Int32Array(a);for(let t=1;t<a;t++)c[t]=n.TC,0===c[t]&&(c[t]=1);for(let t=0;t<s;t++)n.$a+=2,h.$a+=n.Dw*n.Dw,n.$a+=1;if(h.$a>h.data.length||n.$a>n.data.length)throw new Error;const f=n.Gw,u=n.Gw,d=n.Dw,w=n.Dw,y=new r(d,w,c);y.Da=f,y.Fa=u,y.qo=o,y.Jf=l;const m=y.Ia,p=n.Gw;if(0===p){const t=y.width*y.height;for(let i=0;i<t;i++)m[i]=h.Uw}else if(1===p){const t=y.width,i=y.height;for(let s=0;s<t;s++)for(let e=0;e<i;e++)m[s+e*t]=h.Uw}return y};draw=(t,i)=>{t|=0,i|=0;let s=(t+=this.Da)+(i+=this.Fa)*h.i.EE,e=0,n=this.height,r=this.width,o=h.i.EE-r,l=0;if(i<h.i.top){const t=h.i.top-i;n-=t,i=h.i.top,e+=t*r,s+=t*h.i.EE}if(i+n>h.i.bottom&&(n-=i+n-h.i.bottom),t<h.i.left){const i=h.i.left-t;r-=i,t=h.i.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.i.right){const i=t+r-h.i.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.Kk(r,n,this.Ia,e,l,h.i.Ia,s,o)};ua=()=>{const t=this.Ia,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}};da=()=>{const t=this.Ia,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}};translate=(t,i,s)=>{for(let h=0;h<this.palette.length;h++){let e=this.palette[h]>>16&255;e+=t,e<0?e=0:e>255&&(e=255);let n=this.palette[h]>>8&255;n+=i,n<0?n=0:n>255&&(n=255);let r=255&this.palette[h];r+=s,r<0?r=0:r>255&&(r=255),this.palette[h]=(e<<16)+(n<<8)+r}};gS=()=>{this.qo|=0,this.Jf|=0,this.qo/=2,this.Jf/=2,this.qo|=0,this.Jf|=0;const t=new Int8Array(this.qo*this.Jf);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[(h+this.Da>>1)+(s+this.Fa>>1)*this.qo]=this.Ia[i++];this.Ia=t,this.width=this.qo,this.height=this.Jf,this.Da=0,this.Fa=0};kE=()=>{if(this.width===this.qo&&this.height===this.Jf)return;const t=new Int8Array(this.qo*this.Jf);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[h+this.Da+(s+this.Fa)*this.qo]=this.Ia[i++];this.Ia=t,this.width=this.qo,this.height=this.Jf,this.Da=0,this.Fa=0};Kk=(t,i,s,h,e,n,r,o)=>{const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t]}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=this.palette[255&t]}r+=o,h+=e}}}},4628:(t,i,s)=>{s.d(i,{i:()=>l});var h=s(2991),e=s(2383),n=s(6327);class r{seed;constructor(t){this.seed=(0x5deece66dn^t)&(1n<<48n)-1n}Jk=t=>{this.seed=(0x5deece66dn^t)&(1n<<48n)-1n};Nw=()=>this.next(32);next=t=>(this.seed=0x5deece66dn*this.seed+0xbn&(1n<<48n)-1n,Number(this.seed)>>>48-t)}var o=s(312);class l extends n.i{static Xa='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!"£$%^&*()-_=+[{]};:\'@#~,<.>/?\\| ';static Qk=[];static{for(let t=0;t<256;t++){let i=l.Xa.indexOf(String.fromCharCode(t));-1===i&&(i=74),l.Qk[t]=i}}tR=[];iR=new Int32Array(94);sR=new Int32Array(94);hR=new Int32Array(94);eR=new Int32Array(94);nR=new Int32Array(95);rR=new Int32Array(256);random=new r(BigInt(Date.now()));height=0;static oa=(t,i)=>{const s=new e.i(t.read(i+'.dat')),h=new e.i(t.read('index.dat'));h.$a=s.Dw+4;const n=h.Gw;n>0&&(h.$a+=3*(n-1));const r=new l;for(let t=0;t<94;t++){r.hR[t]=h.Gw,r.eR[t]=h.Gw;const i=r.iR[t]=h.Dw,e=r.sR[t]=h.Dw,n=h.Gw,o=i*e;if(r.tR[t]=new Int8Array(o),0===n)for(let h=0;h<i*e;h++)r.tR[t][h]=s.Uw;else if(1===n)for(let h=0;h<i;h++)for(let n=0;n<e;n++)r.tR[t][h+n*i]=s.Uw;e>r.height&&(r.height=e),r.hR[t]=1,r.nR[t]=i+2;{let s=0;for(let h=e/7|0;h<e;h++)s+=r.tR[t][h*i];s<=(e/7|0)&&(r.nR[t]--,r.hR[t]=0)}{let s=0;for(let h=e/7|0;h<e;h++)s+=r.tR[t][i+h*i-1];s<=(e/7|0)&&r.nR[t]--}}r.nR[94]=r.nR[8];for(let t=0;t<256;t++)r.rR[t]=r.nR[l.Qk[t]];return r};$o=(t,i,s,h)=>{if(!s)return;t|=0,i|=0;const e=s.length;i-=this.height;for(let n=0;n<e;n++){const e=l.Qk[s.charCodeAt(n)];94!==e&&this.oR(this.tR[e],t+this.hR[e],i+this.eR[e],this.iR[e],this.sR[e],h),t+=this.nR[e]}};dl=(t,i,s,h,e)=>{t|=0,i|=0;const n=s.length;i-=this.height;for(let r=0;r<n;r++)if('@'===s.charAt(r)&&r+4<n&&'@'===s.charAt(r+4))h=this.lR(s.substring(r+1,r+4)),r+=4;else{const n=l.Qk[s.charCodeAt(r)];94!==n&&(e&&this.oR(this.tR[n],t+this.hR[n]+1,i+this.eR[n]+1,this.iR[n],this.sR[n],o.i.Jo),this.oR(this.tR[n],t+this.hR[n],i+this.eR[n],this.iR[n],this.sR[n],h)),t+=this.nR[n]}};Cf=t=>{if(!t)return 0;const i=t.length;let s=0;for(let h=0;h<i;h++)'@'===t.charAt(h)&&h+4<i&&'@'===t.charAt(h+4)?h+=4:s+=this.rR[t.charCodeAt(h)];return s};fl=(t,i,s,h,e)=>{t|=0,i|=0,this.dl(t-this.Cf(s)/2,i,s,h,e)};Sa=(t,i,s,h)=>{s&&(t|=0,i|=0,this.$o(t-this.Cf(s)/2,i,s,h))};gu=(t,i,s,h,e,n)=>{t|=0,i|=0,this.random.Jk(BigInt(n));const r=192+(31&this.random.Nw()),a=i-this.height;for(let i=0;i<s.length;i++)if('@'===s.charAt(i)&&i+4<s.length&&'@'===s.charAt(i+4))h=this.lR(s.substring(i+1,i+4)),i+=4;else{const n=l.Qk[s.charCodeAt(i)];94!==n&&(e&&this.aR(t+this.hR[n]+1,a+this.eR[n]+1,this.iR[n],this.sR[n],o.i.Jo,192,this.tR[n]),this.aR(t+this.hR[n],a+this.eR[n],this.iR[n],this.sR[n],h,r,this.tR[n])),t+=this.nR[n],0==(3&this.random.Nw())&&t++}};Nf=(t,i,s,h,e=!0)=>{t|=0,i|=0,e&&this.$o(t-this.Cf(s)+1,i+1,s,o.i.Jo),this.$o(t-this.Cf(s),i,s,h)};Mf=(t,i,s,h,e)=>{if(!s)return;t|=0,i|=0,t-=this.Cf(s)/2|0;const n=i-this.height;for(let i=0;i<s.length;i++){const r=l.Qk[s.charCodeAt(i)];94!=r&&this.oR(this.tR[r],t+this.hR[r],n+this.eR[r]+(5*Math.sin(i/2+e/5)|0),this.iR[r],this.sR[r],h),t+=this.nR[r]}};oR=(t,i,s,e,n,r)=>{e|=0,n|=0;let o=(i|=0)+(s|=0)*h.i.EE,l=h.i.EE-e,a=0,c=0;if(s<h.i.top){const t=h.i.top-s;n-=t,s=h.i.top,c+=t*e,o+=t*h.i.EE}if(s+n>=h.i.bottom&&(n-=s+n+1-h.i.bottom),i<h.i.left){const t=h.i.left-i;e-=t,i=h.i.left,c+=t,o+=t,a+=t,l+=t}if(i+e>=h.i.right){const t=i+e+1-h.i.right;e-=t,a+=t,l+=t}e>0&&n>0&&this.cR(e,n,t,c,a,h.i.Ia,o,l,r)};aR=(t,i,s,e,n,r,o)=>{s|=0,e|=0;let l=(t|=0)+(i|=0)*h.i.EE,a=h.i.EE-s,c=0,f=0;if(i<h.i.top){const t=h.i.top-i;e-=t,i=h.i.top,f+=t*s,l+=t*h.i.EE}if(i+e>=h.i.bottom&&(e-=i+e+1-h.i.bottom),t<h.i.left){const i=h.i.left-t;s-=i,t=h.i.left,f+=i,l+=i,c+=i,a+=i}if(t+s>=h.i.right){const i=t+s+1-h.i.right;s-=i,c+=i,a+=i}s>0&&e>0&&this.fR(s,e,h.i.Ia,l,a,o,f,c,n,r)};cR=(t,i,s,h,e,n,r,o,l)=>{const a=-((t|=0)>>2);t=-(3&t);for(let c=-(i|=0);c<0;c++){for(let t=a;t<0;t++)0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l;for(let i=t;i<0;i++)0===s[h++]?r++:n[r++]=l;r+=o,h+=e}};fR=(t,i,s,h,e,n,r,o,l,a)=>{t|=0;const c=((16711935&l)*a&4278255360)+((65280&l)*a&16711680)>>8,f=256-a;for(let l=-(i|=0);l<0;l++){for(let i=-t;i<0;i++)if(0===n[r++])h++;else{const t=s[h];s[h++]=(((16711935&t)*f&4278255360)+((65280&t)*f&16711680)>>8)+c}h+=e,r+=o}};lR=t=>'red'===t?o.i.RED:'gre'===t?o.i.GREEN:'blu'===t?o.i.BLUE:'yel'===t?o.i.Qo:'cya'===t?o.i.Ba:'mag'===t?o.i.Ga:'whi'===t?o.i.xo:'bla'===t?o.i.Jo:'lre'===t?o.i.QL:'dre'===t?o.i.Zf:'dbl'===t?o.i.Yf:'or1'===t?o.i.tS:'or2'===t?o.i.iS:'or3'===t?o.i.sS:'gr1'===t?o.i.hS:'gr2'===t?o.i.eS:'gr3'===t?o.i.nS:o.i.Jo;split(t,i){if(0===t.length)return[t];const s=[];for(;t.length>0;){if(this.Cf(t)<=i&&-1===t.indexOf('|')){s.push(t);break}let h=t.length;for(let s=0;s<t.length;s++)if(' '===t[s]){if(this.Cf(t.substring(0,s))>i)break;h=s}else if('|'===t[s]){h=s;break}s.push(t.substring(0,h)),t=t.substring(h+1)}return s}}},651:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(2991),e=s(6121);class n{uR;width;height;dR;Ia;constructor(t,i,s=e.ro){this.dR=s,this.uR=this.dR.getImageData(0,0,t,i),this.Ia=new Int32Array(t*i),this.width=t,this.height=i,this.bind()}clear=()=>{this.Ia.fill(0)};bind=()=>{h.i.bind(this.Ia,this.width,this.height)};draw=(t,i)=>{this.#t(),this.dR.putImageData(this.uR,t,i)};#t=()=>{const t=this.uR.data;for(let i=0;i<this.Ia.length;i++){const s=this.Ia[i],h=4*i;t[h]=s>>16&255,t[h+1]=s>>8&255,t[h+2]=s>>0&255,t[h+3]=255}}}},2157:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(2383),e=s(9345);class n{static Gr=[];static Aa=t=>{const i=new h.i(t.read('base_head.dat')),s=new h.i(t.read('base_type.dat')),r=new h.i(t.read('base_label.dat')),o=i.Dw;i.$a+=2;for(let t=0;t<o;t++){const t=i.Dw,h=i.Gw,o=new Uint8Array(h),l=new e.to(h,null);for(let t=0;t<h;t++){o[t]=s.Gw;const i=r.Gw,h=new Uint8Array(i);for(let t=0;t<i;t++)h[t]=r.Gw;l[t]=h}this.Gr[t]=new n,this.Gr[t].length=h,this.Gr[t].types=o,this.Gr[t].labels=l}};length=0;types=null;labels=null}},8762:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(2157),e=s(2383);class n{static Gr=[];static Aa=t=>{const i=new e.i(t.read('frame_head.dat')),s=new e.i(t.read('frame_tran1.dat')),r=new e.i(t.read('frame_tran2.dat')),o=new e.i(t.read('frame_del.dat')),l=i.Dw;i.$a+=2;const a=new Int32Array(500),c=new Int32Array(500),f=new Int32Array(500),u=new Int32Array(500);for(let t=0;t<l;t++){const t=i.Dw,e=this.Gr[t]=new n;e.delay=o.Gw;const l=i.Dw,d=h.i.Gr[l];e.Uk=d;const w=i.Gw;let y=-1,m=0;for(let t=0;t<w;t++){if(!d.types)throw new Error('SeqBase not loaded!!!');const i=s.Gw;if(i>0){if(0!==d.types[t])for(let i=t-1;i>y;i--)if(0===d.types[i]){a[m]=i,c[m]=0,f[m]=0,u[m]=0,m++;break}a[m]=t;let s=0;3===d.types[a[m]]&&(s=128),c[m]=0==(1&i)?s:r.gk,f[m]=0==(2&i)?s:r.gk,u[m]=0==(4&i)?s:r.gk,y=t,m++}}e.length=m,e.Bk=new Int32Array(m),e.x=new Int32Array(m),e.y=new Int32Array(m),e.z=new Int32Array(m);for(let t=0;t<m;t++)e.Bk[t]=a[t],e.x[t]=c[t],e.y[t]=f[t],e.z[t]=u[t]}};delay=0;Uk=null;length=0;Bk=null;x=null;y=null;z=null}},9995:(t,i,s)=>{s.d(i,{i:()=>h});class h{static Xw=150;static Dc=70;static Uc=108;static lc=81;static yc=189;static Id=7;static Du=88;static Mu=30;static Gu=176;static Lu=220;static Cd=66;static dd=17;static qu=2;static md=238;static Jd=233;static Jc=146;static Ec=215;static Fc=236;static ZA=85;static wA=219;static td=140;static nd=40;static ed=200;static sd=178;static hd=247;static _d=138;static Wu=239;static Bu=194;static Pu=8;static Fu=27;static Uu=113;static Hu=100;static Ju=134;static ju=202;static Zu=245;static rd=172;static Td=96;static gd=97;static Ed=116;static Qu=9;static Ou=75;static Tu=164;static $u=53;static Ku=185;static Eu=206;static Md=177;static Od=248;static xu=195;static Nu=71;static Ru=133;static Su=157;static ku=211;static Xu=48;static Vu=130;static yd=31;static Ad=59;static ud=212;static pd=38;static wd=6;static fd=155;static zu=235;static Mw=231;static hw=237;static Zc=175;static Cp=93;static Xd=190;static _p=165;static Ic=159;static cw=171;static aw=79;static Yd=52;static sw=244;static Qd=148;static lw=11;static ow=118;static nw=4;static rw=158;static gp=181}},1812:(t,i,s)=>{s.d(i,{i:()=>h});class h{wR;yR;mR;closed=!1;pR=!1;static ja=async t=>await new Promise(((i,s)=>{const h=t.host.startsWith('https'),e=h?'wss':'ws',n=t.host.substring(t.host.indexOf('//')+2),r=h?t.port+2:t.port+1,o=new WebSocket(`${e}://${n}:${r}`,'binary');o.addEventListener('open',(()=>{console.log('connection open!'),i(o)})),o.addEventListener('error',(()=>{console.log('connection error!'),s(o)}))}));constructor(t){t.onclose=this.onclose,t.onerror=this.onerror,this.yR=new n(t,5e3),this.mR=new e(t,5e3),this.wR=t}get host(){return this.wR.url.split('/')[2]}get port(){return parseInt(this.wR.url.split(':')[2],10)}get available(){return this.closed?0:this.yR.available}write=(t,i)=>{this.mR.write(t,i)};read=async()=>this.closed?0:await this.yR.read();qa=async(t,i,s)=>{if(!this.closed)for(;s>0;){const h=await this.yR.qa(t,i,s);if(h.length<=0)throw new Error('EOF');i+=h.length,s-=h.length}};close=()=>{this.closed=!0,this.wR.close(),this.yR.close(),this.mR.close(),console.log('connection close!'),this.pR&&console.log('connection error!')};onclose=t=>{this.closed||this.close()};onerror=t=>{this.closed||(this.pR=!0,this.close())}}class e{wR;AR;closed=!1;pR=!1;constructor(t,i){this.wR=t,this.AR=i}write=(t,i)=>{if(!this.closed){if(this.pR)throw this.pR=!1,new Error('Error in writer thread');if(i>this.AR||t.length>this.AR)throw new Error('buffer overflow');try{this.wR.send(t.subarray(0,i))}catch(t){this.pR=!0}}};close=()=>{this.closed=!0}}class n{AR;buffer=[];IR=null;closed=!1;constructor(t,i){this.AR=i,t.binaryType='arraybuffer',t.onmessage=this.onmessage}onmessage=t=>{if(this.closed)throw new Error('WebSocketReader is closed!');const i=new Uint8Array(t.data);if(this.buffer.push(...i),this.IR&&(this.IR(this.buffer),this.IR=null,this.buffer.length>this.AR))throw new Error('buffer overflow')};qa=async(t,i,s)=>{if(this.closed)throw new Error('WebSocketReader is closed!');for(;this.buffer.length<s;)await new Promise((t=>this.IR=t));for(;s--;)t[i++]=this.buffer.shift();return t};read=async()=>{if(this.closed)throw new Error('WebSocketReader is closed!');for(;this.buffer.length<1;)await new Promise((t=>this.IR=t));return this.buffer.shift()};get available(){return this.buffer.length}close=()=>{this.IR=null,this.buffer=[],this.closed=!0}}},8432:(t,i,s)=>{s.d(i,{i:()=>h});class h{db;constructor(t){t.onerror=this.onerror,t.onclose=this.onclose,this.db=t}static openDatabase=async()=>await new Promise(((t,i)=>{const s=indexedDB.open('lostcity',1);s.onsuccess=i=>{const s=i.target;console.log('database success!'),t(s.result)},s.onupgradeneeded=t=>{t.target.result.createObjectStore('cache')},s.onerror=t=>{const s=t.target;console.error('database error!: ',s.error),i(s.result)}}));qr=async t=>await new Promise((i=>{const s=this.db.transaction('cache','readonly').objectStore('cache').get(t);s.onsuccess=()=>{i(s.result)},s.onerror=t=>{i(void 0)}}));io=async(t,i)=>await new Promise(((s,h)=>{const e=this.db.transaction('cache','readwrite').objectStore('cache').put(i,t);e.onsuccess=()=>{s()},e.onerror=t=>{h()}}));onclose=t=>{console.log('database close!')};onerror=t=>{console.log('database error!')};gR=t=>{const i=t.trim();let s=0;for(let t=0;t<i.length&&t<12;t++){const h=i.charAt(t);s*=37,h>='A'&&h<='Z'?s+=h.charCodeAt(0)+1-65:h>='a'&&h<='z'?s+=h.charCodeAt(0)+1-97:h>='0'&&h<='9'&&(s+=h.charCodeAt(0)+27-48)}return s}}},7576:(t,i,s)=>{s.d(i,{i:()=>h});class h{count=0;_R=new Int32Array(256);CR=new Int32Array(256);a=0;b=0;c=0;constructor(t){for(let i=0;i<t.length;i++)this._R[i]=t[i];this.init()}get Nw(){return 0==this.count--&&(this.ER(),this.count=255),this._R[this.count]}init=()=>{let t=2654435769,i=2654435769,s=2654435769,h=2654435769,e=2654435769,n=2654435769,r=2654435769,o=2654435769;for(let l=0;l<4;l++)t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i;for(let l=0;l<256;l+=8)t+=this._R[l],i+=this._R[l+1],s+=this._R[l+2],h+=this._R[l+3],e+=this._R[l+4],n+=this._R[l+5],r+=this._R[l+6],o+=this._R[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.CR[l]=t,this.CR[l+1]=i,this.CR[l+2]=s,this.CR[l+3]=h,this.CR[l+4]=e,this.CR[l+5]=n,this.CR[l+6]=r,this.CR[l+7]=o;for(let l=0;l<256;l+=8)t+=this.CR[l],i+=this.CR[l+1],s+=this.CR[l+2],h+=this.CR[l+3],e+=this.CR[l+4],n+=this.CR[l+5],r+=this.CR[l+6],o+=this.CR[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.CR[l]=t,this.CR[l+1]=i,this.CR[l+2]=s,this.CR[l+3]=h,this.CR[l+4]=e,this.CR[l+5]=n,this.CR[l+6]=r,this.CR[l+7]=o;this.ER(),this.count=256};ER=()=>{this.c++,this.b+=this.c;for(let t=0;t<256;t++){const i=this.CR[t],s=3&t;let h;0===s?this.a^=this.a<<13:1===s?this.a^=this.a>>>6:2===s?this.a^=this.a<<2:3===s&&(this.a^=this.a>>>16),this.a+=this.CR[t+128&255],this.CR[t]=h=this.CR[i>>>2&255]+this.a+this.b,this._R[t]=this.b=this.CR[h>>>8>>>2&255]+i}}}},2028:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(2383),e=s(5810);class n{static gR=t=>{let i=0;t=t.toUpperCase();for(let s=0;s<t.length;s++)i=61*i+t.charCodeAt(s)-32|0;return i};buffer;TR;bR;vR;OR;LR;SR;kR=[];constructor(t){t instanceof Uint8Array&&(t=new Int8Array(t));let i=new h.i(new Uint8Array(t));const s=i.TC,n=i.TC;s===n?(this.buffer=t,this.TR=!1):(this.buffer=e.i.read(s,t,n,6),i=new h.i(new Uint8Array(this.buffer)),this.TR=!0),this.bR=i.Dw,this.vR=[],this.OR=[],this.LR=[],this.SR=[];let r=i.$a+10*this.bR;for(let t=0;t<this.bR;t++)this.vR.push(i.ho),this.OR.push(i.TC),this.LR.push(i.TC),this.SR.push(r),r+=this.LR[t]}read=t=>{const i=n.gR(t),s=this.vR.indexOf(i);return-1===s?null:this.RR(s)};RR=t=>{if(t<0||t>=this.bR)return null;if(this.kR[t])return this.kR[t];const i=this.SR[t],s=i+this.LR[t];if(this.TR){const h=Uint8Array.from(this.buffer.subarray(i,i+s));return this.kR[t]=h,h}{const i=Uint8Array.from(e.i.read(this.OR[t],this.buffer,this.LR[t],this.SR[t]));return this.kR[t]=i,i}}}},2383:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(1519),e=s(9080),n=s(6327);class r extends n.i{static MR=3988292384;static xR=new Int32Array(256);static NR=new Uint32Array(33);static PR=new e.i;static DR=new e.i;static FR=new e.i;static UR=0;static BR=0;static GR=0;static{for(let t=0;t<32;t++)r.NR[t]=(1<<t)-1;r.NR[32]=4294967295;for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)1==(1&i)?i=i>>>1^r.MR:i>>>=1;r.xR[t]=i}}static $r=t=>{let i=4294967295;for(let s=0;s<t.length;s++)i=i>>>8^r.xR[255&(i^t[s])];return~i};data;$a;Sp=0;random=null;constructor(t){if(!t)throw new Error('Input src packet array was null!');super(),t instanceof Int8Array?this.data=new Uint8Array(t):this.data=t,this.$a=0}get length(){return this.data.length}get available(){return this.data.length-this.$a}static K=t=>{let i=null;return 0===t&&r.UR>0?(r.UR--,i=r.PR.LO()):1===t&&r.BR>0?(r.BR--,i=r.DR.LO()):2===t&&r.GR>0&&(r.GR--,i=r.FR.LO()),i?(i.$a=0,i):new r(0===t?new Uint8Array(100):1===t?new Uint8Array(5e3):new Uint8Array(3e4))};release=()=>{this.$a=0,100===this.data.length&&r.UR<1e3?(r.PR.iI(this),r.UR++):5e3===this.data.length&&r.BR<250?(r.DR.iI(this),r.BR++):3e4===this.data.length&&r.GR<50&&(r.FR.iI(this),r.GR++)};get Gw(){return this.data[this.$a++]}get Uw(){return this.data[this.$a++]<<24>>24}get Dw(){return this.data[this.$a++]<<8|this.data[this.$a++]}get Vy(){let t=this.data[this.$a++]<<8|this.data[this.$a++];return t>32767&&(t-=65536),t}get TC(){return this.data[this.$a++]<<16|this.data[this.$a++]<<8|this.data[this.$a++]}get ho(){return this.data[this.$a++]<<24|this.data[this.$a++]<<16|this.data[this.$a++]<<8|this.data[this.$a++]}get Ka(){return(0xffffffffn&BigInt(this.ho))<<32n|0xffffffffn&BigInt(this.ho)}get gk(){return this.data[this.$a]<128?this.Gw-64:this.Dw-49152}get Lb(){return this.data[this.$a]<128?this.Gw:this.Dw-32768}get Jw(){let t='';for(;10!==this.data[this.$a]&&this.$a<this.data.length;)t+=String.fromCharCode(this.data[this.$a++]);return this.$a++,t}Ty=(t,i,s)=>{for(let h=i;h<i+t;h++)s[h]=this.data[this.$a++]};oc=t=>{this.data[this.$a++]=t+(this.random?.Nw??0)&255};p1=t=>{this.data[this.$a++]=t};p2=t=>{this.data[this.$a++]=t>>>8,this.data[this.$a++]=t};HR=t=>{this.data[this.$a++]=t,this.data[this.$a++]=t>>>8};p3=t=>{this.data[this.$a++]=t>>>16,this.data[this.$a++]=t>>>8,this.data[this.$a++]=t};p4=t=>{this.data[this.$a++]=t>>>24,this.data[this.$a++]=t>>>16,this.data[this.$a++]=t>>>8,this.data[this.$a++]=t};WR=t=>{this.data[this.$a++]=t,this.data[this.$a++]=t>>>8,this.data[this.$a++]=t>>>16,this.data[this.$a++]=t>>>24};zd=t=>{this.p4(Number(t>>32n)),this.p4(Number(0xffffffffn&t))};Ja=t=>{for(let i=0;i<t.length;i++)this.data[this.$a++]=t.charCodeAt(i);this.data[this.$a++]=10};tc=(t,i,s)=>{for(let h=s;h<s+i;h++)this.data[this.$a++]=t[h]};Qc=t=>{this.data[this.$a-t-1]=t};Op=()=>{this.Sp=8*this.$a};kp=()=>{this.$a=(this.Sp+7)/8|0};Lp=t=>{let i=this.Sp>>>3,s=8-(7&this.Sp),h=0;for(this.Sp+=t;t>s;s=8)h+=(this.data[i++]&r.NR[s])<<t-s,t-=s;return h+=t===s?this.data[i]&r.NR[s]:this.data[i]>>>s-t&r.NR[t],h};Qa=(t,i)=>{const s=new Uint8Array(this.$a);(0,h.Ua)(this.data,0,s,0,this.$a);const e=(0,h.YR)(s),n=(0,h.ZR)(e,i,t),r=(0,h.VR)(n);this.$a=0,this.p1(r.length),this.tc(r,r.length,0)}}},741:(t,i,s)=>{s.d(i,{i:()=>h});class h{static XR=[95,218,67,50,253,222,194,60,101,128,8,251,92,111,24,33,223,66,232,59,227,113,153,105,126,98,167,102,177,238,62,190,147,23,150,151,156,144,193,155,81,0,198,22,137,210,179,16,168,170,32,181,248,141,58,87,208,106,180,191,221,241,40,176,196,154,65,145,230,78,30,161,188,41,14,129,18,199,47,247,225,34,51,10,159,75,12,56,61,31,39,91,46,242,134,5,122,123,209,228,104,195,21,3,11,44,107,172,6,186,110,215,205,103,27,185,124,77,252,117,86,115,127,207,52,79,43,97,219,116,169,7,118,162,108,36,20,233,88,135,80,19,42,237,57,152,71,9,250,17,4,119,234,130,26,200,189,163,254,245,197,171,220,235,140,244,184,94,211,231,99,246,121,212,112,204,63,148,83,178,1,255,131,13,183,142,236,45,55,35,243,136,37,85,100,160,38,224,146,174,82,48,109,132,125,90,143,138,240,173,165,164,192,175,29,74,28,114,213,73,64,206,76,139,96,2,229,15,93,25,239,202,49,70,214,201,72,203,68,89,69,157,216,217,249,120,226,84,149,187,54,53,158,166,182,133,0];static Pw=[0,-2,4,6,-1,0,0,2,0,0,0,0,5,4,2,2,0,0,0,0,2,-2,2,14,0,6,3,0,4,0,0,0,3,0,0,0,0,0,0,0,0,-1,4,2,6,0,6,0,0,3,7,0,0,0,-1,0,0,0,0,4,0,0,0,0,0,0,0,0,1,15,0,0,0,0,6,0,2,0,0,0,2,0,0,0,1,0,0,4,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,-2,0,0,2,0,0,0,2,9,0,0,0,0,0,4,0,0,0,3,7,9,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,3,2,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,-2,2,0,0,0,0,0,6,0,0,0,2,0,2,0,0,0,-2,0,0,4,0,0,0,0,6,0,0,-2,-2,0,0,0,0,0,0,-2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0]}},9782:(t,i,s)=>{s.d(i,{i:()=>h});class h{static Yy=14;static Iy=28;static gm=129;static Cy=167;static um=168;static Hy=195;static dm=2;static pm=26;static om=46;static nm=84;static tm=87;static By=103;static _y=146;static jw=197;static _m=201;static Fy=204;static Zy=209;static My=126;static im=185;static ky=15;static vy=98;static vm=213;static Xy=3;static bm=13;static hm=74;static Im=239;static Yw=1;static Om=184;static by=133;static Oy=226;static rm=4;static Am=21;static Gy=32;static Qd=41;static Bw=152;static iy=19;static Tm=22;static $w=25;static Hw=43;static Cm=44;static sm=68;static wm=136;static sy=139;static Ry=140;static Qw=142;static Sy=243;static Ny=254;static ty=20;static Ww=80;static Jy=132;static Ey=220;static Vw=237;static Fw=150;static gy=175;static Qy=193;static Py=12;static Kw=54;static xy=212;static Uy=7;static zy=135;static Em=162;static ey=23;static yy=42;static uy=49;static ny=50;static py=59;static ly=69;static my=76;static hy=151;static oy=191;static wy=223}},6970:(t,i,s)=>{s.d(i,{i:()=>o});class h{start=0;end=0;form=0;length=0;zR=null;jR=null;threshold=0;position=0;delta=0;amplitude=0;qR=0;read=t=>{this.form=t.Gw,this.start=t.ho,this.end=t.ho,this.length=t.Gw,this.zR=new Int32Array(this.length),this.jR=new Int32Array(this.length);for(let i=0;i<this.length;i++)this.zR[i]=t.Dw,this.jR[i]=t.Dw};reset=()=>{this.threshold=0,this.position=0,this.delta=0,this.amplitude=0,this.qR=0};evaluate=t=>(this.qR>=this.threshold&&this.jR&&this.zR&&(this.amplitude=this.jR[this.position++]<<15,this.position>=this.length&&(this.position=this.length-1),this.threshold=this.zR[this.position]/65536*t|0,this.threshold>this.qR&&(this.delta=((this.jR[this.position]<<15)-this.amplitude)/(this.threshold-this.qR)|0)),this.amplitude+=this.delta,this.qR++,this.amplitude-this.delta>>15)}class e{static buffer=null;static eb=null;static sin=null;static $R=new Int32Array(5);static KR=new Int32Array(5);static JR=new Int32Array(5);static QR=new Int32Array(5);static tM=new Int32Array(5);iM=null;sM=null;hM=null;eM=null;nM=null;rM=null;release=null;attack=null;oM=new Int32Array(5);lM=new Int32Array(5);aM=new Int32Array(5);start=0;length=500;cM=100;fM=0;static init=()=>{this.eb=new Int32Array(32768);for(let t=0;t<32768;t++)Math.random()>.5?this.eb[t]=1:this.eb[t]=-1;this.sin=new Int32Array(32768);for(let t=0;t<32768;t++)this.sin[t]=16384*Math.sin(t/5215.1903)|0;this.buffer=new Int32Array(220500)};nc=(t,i)=>{for(let i=0;i<t;i++)e.buffer[i]=0;if(i<10)return e.buffer;const s=t/i|0;this.iM?.reset(),this.sM?.reset();let h=0,n=0,r=0;this.hM&&this.eM&&(this.hM.reset(),this.eM.reset(),h=32.768*(this.hM.end-this.hM.start)/s|0,n=32.768*this.hM.start/s|0);let o=0,l=0,a=0;this.nM&&this.rM&&(this.nM.reset(),this.rM.reset(),o=32.768*(this.nM.end-this.nM.start)/s|0,l=32.768*this.nM.start/s|0);for(let t=0;t<5;t++)this.iM&&0!==this.oM[t]&&(e.$R[t]=0,e.KR[t]=this.aM[t]*s,e.JR[t]=(this.oM[t]<<14)/100|0,e.QR[t]=32.768*(this.iM.end-this.iM.start)*Math.pow(1.0057929410678534,this.lM[t])/s|0,e.tM[t]=32.768*this.iM.start/s|0);if(this.iM&&this.sM)for(let i=0;i<t;i++){let s=this.iM.evaluate(t),c=this.sM.evaluate(t);if(this.hM&&this.eM){const i=this.hM.evaluate(t),e=this.eM.evaluate(t);s+=this.uM(e,r,this.hM.form)>>1,r+=(i*h>>16)+n}if(this.nM&&this.rM){const i=this.nM.evaluate(t),s=this.rM.evaluate(t);c=c*(32768+(this.uM(s,a,this.nM.form)>>1))>>15,a+=(i*o>>16)+l}for(let h=0;h<5;h++)if(0!==this.oM[h]){const n=i+e.KR[h];n<t&&(e.buffer[n]+=this.uM(c*e.JR[h]>>15,e.$R[h],this.iM.form),e.$R[h]+=(s*e.QR[h]>>16)+e.tM[h])}}if(this.release&&this.attack){this.release.reset(),this.attack.reset();let i=0,s=!0;for(let h=0;h<t;h++){const n=this.release.evaluate(t),r=this.attack.evaluate(t);let o;o=s?this.release.start+((this.release.end-this.release.start)*n>>8):this.release.start+((this.release.end-this.release.start)*r>>8),i+=256,i>=o&&(i=0,s=!s),s&&(e.buffer[h]=0)}}if(this.fM>0&&this.cM>0){const i=this.fM*s;for(let s=i;s<t;s++)e.buffer[s]+=e.buffer[s-i]*this.cM/100|0,e.buffer[s]|=0}for(let i=0;i<t;i++)e.buffer[i]<-32768&&(e.buffer[i]=-32768),e.buffer[i]>32767&&(e.buffer[i]=32767);return e.buffer};uM=(t,i,s)=>1===s?(32767&i)<16384?t:-t:2===s?e.sin[32767&i]*t>>14:3===s?((32767&i)*t>>14)-t:4===s?e.eb[32767&(i/2607|0)]*t:0;read=t=>{this.iM=new h,this.iM.read(t),this.sM=new h,this.sM.read(t),0!==t.Gw&&(t.$a--,this.hM=new h,this.hM.read(t),this.eM=new h,this.eM.read(t)),0!==t.Gw&&(t.$a--,this.nM=new h,this.nM.read(t),this.rM=new h,this.rM.read(t)),0!==t.Gw&&(t.$a--,this.release=new h,this.release.read(t),this.attack=new h,this.attack.read(t));for(let i=0;i<10;i++){const s=t.Lb;if(0===s)break;this.oM[i]=s,this.lM[i]=t.gk,this.aM[i]=t.Lb}this.fM=t.Lb,this.cM=t.Lb,this.length=t.Dw,this.start=t.Dw}}var n=s(2383),r=s(9345);class o{static Dy=new Int32Array(1e3);static dM=null;static wM=null;static yM=new r.to(1e3,null);mM=new r.to(10,null);pM=0;loopEnd=0;static Aa=t=>{const i=new n.i(t.read('sounds.dat'));for(this.dM=new Uint8Array(441e3),this.wM=new n.i(this.dM),e.init();;){const t=i.Dw;if(65535===t)break;const s=new o;s.read(i),this.yM[t]=s,this.Dy[t]=s.trim()}};static nc=(t,i)=>{if(!this.yM[t])return null;const s=this.yM[t];return s?.AM(i)??null};read=t=>{for(let i=0;i<10;i++)0!==t.Gw&&(t.$a--,this.mM[i]=new e,this.mM[i]?.read(t));this.pM=t.Dw,this.loopEnd=t.Dw};trim=()=>{let t=9999999;for(let i=0;i<10;i++)this.mM[i]&&(this.mM[i].start/20|0)<t&&(t=this.mM[i].start/20|0);if(this.pM<this.loopEnd&&(this.pM/20|0)<t&&(t=this.pM/20|0),9999999===t||0===t)return 0;for(let i=0;i<10;i++)this.mM[i]&&(this.mM[i].start-=20*t);return this.pM<this.loopEnd&&(this.pM-=20*t,this.loopEnd-=20*t),t};AM=t=>{const i=this.nc(t);return o.wM.$a=0,o.wM?.p4(1380533830),o.wM?.WR(i+36),o.wM?.p4(1463899717),o.wM?.p4(1718449184),o.wM?.WR(16),o.wM?.HR(1),o.wM?.HR(1),o.wM?.WR(22050),o.wM?.WR(22050),o.wM?.HR(1),o.wM?.HR(8),o.wM?.p4(1684108385),o.wM?.WR(i),o.wM.$a+=i,o.wM};nc=t=>{let i=0;for(let t=0;t<10;t++)this.mM[t]&&this.mM[t].length+this.mM[t].start>i&&(i=this.mM[t].length+this.mM[t].start);if(0===i)return 0;let s=22050*i/1e3|0,h=22050*this.pM/1e3|0,e=22050*this.loopEnd/1e3|0;(h<0||e<0||e>s||h>=e)&&(t=0);let n=s+(e-h)*(t-1);for(let t=44;t<n+44;t++)o.dM&&(o.dM[t]=-128);for(let t=0;t<10;t++)if(this.mM[t]){const i=22050*this.mM[t].length/1e3|0,s=22050*this.mM[t].start/1e3|0,h=this.mM[t].nc(i,this.mM[t].length);for(let t=0;t<i;t++)o.dM&&(o.dM[t+s+44]+=h[t]>>8<<24>>24)}if(t>1){h+=44,e+=44,s+=44,n+=44;const i=n-s;for(let t=s-1;t>=e;t--)o.dM&&(o.dM[t+i]=o.dM[t]);for(let i=1;i<t;i++){const t=(e-h)*i;for(let i=h;i<e;i++)o.dM&&(o.dM[i+t]=o.dM[i])}n-=44}return n}}},9345:(t,i,s)=>{s.d(i,{fa:()=>a,Db:()=>e,Fn:()=>n,rn:()=>l,Mb:()=>r,to:()=>h,ca:()=>o});class h extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=i}}class e extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=s}}}class n extends Array{constructor(t,i,s,h){super(t);for(let e=0;e<t;e++){this[e]=new Array(i);for(let t=0;t<i;t++){this[e][t]=new Array(s);for(let i=0;i<s;i++)this[e][t][i]=h}}}}class r extends Array{constructor(t,i,s,h,e){super(t);for(let n=0;n<t;n++){this[n]=new Array(i);for(let t=0;t<i;t++){this[n][t]=new Array(s);for(let i=0;i<s;i++){this[n][t][i]=new Array(h);for(let s=0;s<h;s++)this[n][t][i][s]=e}}}}}class o extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Uint8Array(s)}}}class l extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=new Int32Array(i)}}class a extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Int32Array(s)}}}},1519:(t,i,s)=>{s.d(i,{ra:()=>n,Jr:()=>e,Qr:()=>h,Ua:()=>r,VR:()=>l,YR:()=>o,ZR:()=>a});const h=async t=>new Promise((i=>setTimeout(i,t))),e=async t=>new Int8Array(await(await fetch(t)).arrayBuffer()),n=async t=>(await fetch(t)).text(),r=(t,i,s,h,e)=>{for(;e--;)s[h++]=t[i++]},o=t=>{let i=0n;for(let s=0;s<t.length;s++)i=(i<<8n)+BigInt(t[s]);return i},l=t=>{const i=[];for(;t>0n;)i.unshift(Number(255n&t)),t>>=8n;return new Uint8Array(i)},a=(t,i,s)=>{let h=1n;for(;i>0n;)i%2n===1n&&(h=h*t%s),t=t*t%s,i>>=1n;return h}},9897:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(2383);class e{static IM=new Uint16Array(['d','o','t'].join('').split('').map((t=>t.charCodeAt(0))));static gM=new Uint16Array(['(','a',')'].join('').split('').map((t=>t.charCodeAt(0))));static _M=new Uint16Array(['s','l','a','s','h'].join('').split('').map((t=>t.charCodeAt(0))));static CM=['cook',"cook's",'cooks','seeks','sheet'];static EM=[];static TM=[];static bM=[];static vM=[];static OM=[];static LM=[];static Aa=t=>{const i=new h.i(t.read('fragmentsenc.txt')),s=new h.i(t.read('badenc.txt')),e=new h.i(t.read('domainenc.txt')),n=new h.i(t.read('tldlist.txt'));this.read(s,e,i,n)};static filter=t=>{const i=[...t];this.format(i);const s=i.join('').trim(),h=s.toLowerCase(),e=[...h];this.SM(e),this.kM(e),this.RM(e),this.MM(e);for(let t=0;t<this.CM.length;t++){let i=-1;for(;-1!==(i=h.indexOf(this.CM[t],i+1));){const s=[...this.CM[t]];for(let t=0;t<s.length;t++)e[t+i]=s[t]}}return this.xM(e,[...s]),this.NM(e),e.join('').trim()};static read=(t,i,s,h)=>{this.PM(t),this.DM(i),this.FM(s),this.UM(h)};static UM=t=>{const i=t.ho;for(let s=0;s<i;s++)this.TM[s]=t.Gw,this.EM[s]=new Uint16Array(t.Gw).map((()=>t.Gw))};static PM=t=>{const i=t.ho;for(let s=0;s<i;s++){this.bM[s]=new Uint16Array(t.Gw).map((()=>t.Gw));const i=new Array(t.Gw).fill([]).map((()=>[t.Uw,t.Uw]));i.length>0&&(this.vM[s]=i)}};static DM=t=>{const i=t.ho;for(let s=0;s<i;s++)this.OM[s]=new Uint16Array(t.Gw).map((()=>t.Gw))};static FM=t=>{const i=t.ho;for(let s=0;s<i;s++)this.LM[s]=t.Dw};static SM=t=>{const i=[...t],s=[...t];this.BM(null,i,this.IM),this.BM(null,s,this._M);for(let h=0;h<this.EM.length;h++)this.GM(s,this.TM[h],t,this.EM[h],i)};static kM=t=>{for(let i=0;i<2;i++)for(let i=this.bM.length-1;i>=0;i--)this.BM(this.vM[i],t,this.bM[i])};static RM=t=>{const i=[...t],s=[...t];this.BM(null,i,this.gM),this.BM(null,s,this.IM);for(let h=this.OM.length-1;h>=0;h--)this.HM(s,i,this.OM[h],t)};static MM=t=>{for(let i=0;i<t.length;){const s=this.WM(t,i);if(-1===s)return;let h=!1;for(let e=i;e>=0&&e<s&&!h;e++)this.YM(t[e])||this.ZM(t[e])||(h=!0);let e=0;h&&(e=0),0===e&&(e=1,i=s);let n=0;for(let h=s;h<t.length&&h<i;h++)n=10*n+t[h].charCodeAt(0)-48;n<=255&&i-s<=8?e++:e=0,4===e&&(this.VM(s,i,t),e=0),i=this.XM(i,t)}};static zM=t=>{if(this.jM(t))return!0;const i=this.qM(t),s=this.LM,h=s.length;if(i===s[0]||i===s[h-1])return!0;let e=0,n=h-1;for(;e<=n;){const t=(e+n)/2|0;if(i===s[t])return!0;i<s[t]?n=t-1:e=t+1}return!1};static qM=t=>{if(t.length>6)return 0;let i=0;for(let s=0;s<t.length;s++){const h=t[t.length-s-1];if(this.$M(h))i=38*i+h.charCodeAt(0)+1-'a'.charCodeAt(0);else if("'"===h)i=38*i+27;else if(this.KM(h))i=38*i+h.charCodeAt(0)+28-'0'.charCodeAt(0);else if('\0'!==h)return 0}return i};static WM=(t,i)=>{for(let s=i;s<t.length&&s>=0;s++)if(this.KM(t[s]))return s;return-1};static XM=(t,i)=>{for(let s=t;s<i.length&&s>=0;s++)if(!this.KM(i[s]))return s;return i.length};static JM=(t,i,s)=>i===s||'o'===i&&'0'===s?1:'o'===i&&'('===s&&')'===t?2:'c'!==i||'('!==s&&'<'!==s&&'['!==s?'e'===i&&'€'===s||'s'===i&&'$'===s||'l'===i&&'i'===s?1:0:1;static HM=(t,i,s,h)=>{const e=s.length,n=h.length;for(let r=0;r<=n-e;r++){const{QM:e,tx:n}=this.ix(r,s,h);if(!e)continue;const o=this.sx(r,h,3,i,['@']),l=this.hx(n-1,h,3,t,['.',',']);(o>2||l>2)&&this.VM(r,n,h)}};static ix=(t,i,s)=>{const h=i.length;let e=t,n=0;for(;e<s.length&&n<h;){const r=s[e],o=e+1<s.length?s[e+1]:'\0',l=this.JM(o,String.fromCharCode(i[n]),r);if(l>0)e+=l,n++;else{if(0===n)break;const s=this.JM(o,String.fromCharCode(i[n-1]),r);if(s>0)e+=s,1===n&&t++;else{if(n>=h||!this.YM(r))break;e++}}}return{QM:n>=h,tx:e}};static BM=(t,i,s)=>{if(!(s.length>i.length))for(let h=0;h<=i.length-s.length;h++){let e=h;const{tx:n,nx:r,ox:o,lx:l,ux:a}=this.wx(i,s,e);e=n;let c=i[e],f=e+1<i.length?i[e+1]:'\0';if(!(r>=s.length)||l&&a)continue;let u,d=!0;if(o){let t=!1,s=!1;if((h-1<0||this.YM(i[h-1])&&"'"!==i[h-1])&&(t=!0),(e>=i.length||this.YM(i[e])&&"'"!==i[e])&&(s=!0),!t||!s){let s=!1;for(u=h-2,t&&(u=h);!s&&u<e;){if(u>=0&&(!this.YM(i[u])||"'"===i[u])){const t=[];let h;for(h=0;h<3&&u+h<i.length&&(!this.YM(i[u+h])||"'"===i[u+h]);h++)t[h]=i[u+h];let e=!0;0===h&&(e=!1),h<3&&u-1>=0&&(!this.YM(i[u-1])||"'"===i[u-1])&&(e=!1),e&&!this.zM(t)&&(s=!0)}u++}s||(d=!1)}}else{c=' ',h-1>=0&&(c=i[h-1]),f=' ',e<i.length&&(f=i[e]);const s=this.yx(c),n=this.yx(f);t&&this.mx(s,t,n)&&(d=!1)}if(!d)continue;let w=0,y=0;for(let t=h;t<e;t++)this.KM(i[t])?w++:this.Ax(i[t])&&y++;w<=y&&this.VM(h,e,i)}};static wx=(t,i,s)=>{let h=s,e=0,n=0,r=!1,o=!1,l=!1;for(;h<t.length&&(!o||!l)&&!(h>=t.length||o&&l);){const a=t[h],c=h+1<t.length?t[h+1]:'\0';let f;if(e<i.length&&(f=this.Ix(c,String.fromCharCode(i[e]),a))>0)1===f&&this.KM(a)&&(o=!0),2===f&&(this.KM(a)||this.KM(c))&&(o=!0),h+=f,e++;else{if(0===e)break;let t;if((t=this.Ix(c,String.fromCharCode(i[e-1]),a))>0)h+=t;else{if(e>=i.length||!this.ZM(a))break;if(this.YM(a)&&"'"!==a&&(r=!0),this.KM(a)&&(l=!0),h++,n++,(100*n/(h-s)|0)>90)break}}}return{tx:h,nx:e,ox:r,lx:o,ux:l}};static Ix=(t,i,s)=>{if(i===s)return 1;if(i>='a'&&i<='m'){if('a'===i)return'4'!==s&&'@'!==s&&'^'!==s?'/'===s&&'\\'===t?2:0:1;if('b'===i)return'6'!==s&&'8'!==s?'1'===s&&'3'===t?2:0:1;if('c'===i)return'('!==s&&'<'!==s&&'{'!==s&&'['!==s?0:1;if('d'===i)return'['===s&&')'===t?2:0;if('e'===i)return'3'!==s&&'€'!==s?0:1;if('f'===i)return'p'===s&&'h'===t?2:'£'===s?1:0;if('g'===i)return'9'!==s&&'6'!==s?0:1;if('h'===i)return'#'===s?1:0;if('i'===i)return'y'!==s&&'l'!==s&&'j'!==s&&'1'!==s&&'!'!==s&&':'!==s&&';'!==s&&'|'!==s?0:1;if('j'===i)return 0;if('k'===i)return 0;if('l'===i)return'1'!==s&&'|'!==s&&'i'!==s?0:1;if('m'===i)return 0}if(i>='n'&&i<='z'){if('n'===i)return 0;if('o'===i)return'0'!==s&&'*'!==s?'('===s&&')'===t||'['===s&&']'===t||'{'===s&&'}'===t||'<'===s&&'>'===t?2:0:1;if('p'===i)return 0;if('q'===i)return 0;if('r'===i)return 0;if('s'===i)return'5'!==s&&'z'!==s&&'$'!==s&&'2'!==s?0:1;if('t'===i)return'7'!==s&&'+'!==s?0:1;if('u'===i)return'v'===s?1:'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('v'===i)return'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('w'===i)return'v'===s&&'v'===t?2:0;if('x'===i)return')'===s&&'('===t||'}'===s&&'{'===t||']'===s&&'['===t||'>'===s&&'<'===t?2:0;if('y'===i)return 0;if('z'===i)return 0}return i>='0'&&i<='9'?'0'===i?'o'===s||'O'===s?1:'('===s&&')'===t||'{'===s&&'}'===t||'['===s&&']'===t?2:0:'1'===i&&'l'===s?1:0:','===i?'.'===s?1:0:'.'===i?','===s?1:0:'!'===i&&'i'===s?1:0};static mx=(t,i,s)=>{let h=0,e=i.length-1;for(;h<=e;){const n=(h+e)/2|0;if(i[n][0]===t&&i[n][1]===s)return!0;t<i[n][0]||t===i[n][0]&&s<i[n][1]?e=n-1:h=n+1}return!1};static yx=t=>this.$M(t)?t.charCodeAt(0)+1-'a'.charCodeAt(0):"'"===t?28:this.KM(t)?t.charCodeAt(0)+29-'0'.charCodeAt(0):27;static GM=(t,i,s,h,e)=>{if(!(h.length>s.length))for(let n=0;n<=s.length-h.length;n++){const{tx:r,gx:o}=this._x(s,h,n);if(o<h.length)continue;let l=!1;const a=this.sx(n,s,3,e,[',','.']),c=this.hx(r-1,s,5,t,['\\','/']);if(1===i&&a>0&&c>0&&(l=!0),2===i&&(a>2&&c>0||a>0&&c>2)&&(l=!0),3===i&&a>0&&c>2&&(l=!0),!l)continue;let f,u=n,d=r-1,w=!1;if(a>2){if(4===a)for(w=!1,f=n-1;f>=0;f--)if(w){if('*'!==e[f])break;u=f}else'*'===e[f]&&(u=f,w=!0);for(w=!1,f=u-1;f>=0;f--)if(w){if(this.YM(s[f]))break;u=f}else this.YM(s[f])||(w=!0,u=f)}if(c>2){if(4===c)for(w=!1,f=d+1;f<s.length;f++)if(w){if('*'!==t[f])break;d=f}else'*'===t[f]&&(d=f,w=!0);for(w=!1,f=d+1;f<s.length;f++)if(w){if(this.YM(s[f]))break;d=f}else this.YM(s[f])||(w=!0,d=f)}this.VM(u,d+1,s)}};static _x=(t,i,s)=>{let h=0;for(;s<t.length&&h<i.length;){const e=t[s],n=s+1<t.length?t[s+1]:'\0';let r;if((r=this.JM(n,String.fromCharCode(i[h]),e))>0)s+=r,h++;else{if(0===h)break;let t;if((t=this.JM(n,String.fromCharCode(i[h-1]),e))>0)s+=t;else{if(!this.YM(e))break;s++}}}return{tx:s,gx:h}};static YM=t=>!this.Ax(t)&&!this.KM(t);static ZM=t=>!this.$M(t)||('v'===t||'x'===t||'j'===t||'q'===t||'z'===t);static Ax=t=>this.$M(t)||this.Cx(t);static KM=t=>t>='0'&&t<='9';static $M=t=>t>='a'&&t<='z';static Cx=t=>t>='A'&&t<='Z';static jM=t=>{for(let i=0;i<t.length;i++)if(!this.KM(t[i])&&'\0'!==t[i])return!1;return!0};static VM=(t,i,s)=>{for(let h=t;h<i;h++)s[h]='*'};static Ex=(t,i)=>{let s=0;for(let h=i-1;h>=0&&this.YM(t[h]);h--)'*'===t[h]&&s++;return s};static Tx=(t,i)=>{let s=0;for(let h=i+1;h<t.length&&this.YM(t[h]);h++)'*'===t[h]&&s++;return s};static bx=(t,i,s,h,e)=>(e?this.Ex(i,s):this.Tx(i,s))>=h?4:this.YM(e?t[s-1]:t[s+1])?1:0;static sx=(t,i,s,h,e)=>{if(0===t)return 2;for(let s=t-1;s>=0&&this.YM(i[s]);s--)if(e.includes(i[s]))return 3;return this.bx(i,h,t,s,!0)};static hx=(t,i,s,h,e)=>{if(t+1===i.length)return 2;for(let s=t+1;s<i.length&&this.YM(i[s]);s++)if(e.includes(i[s]))return 3;return this.bx(i,h,t,s,!1)};static format=t=>{let i=0;for(let s=0;s<t.length;s++)this.vx(t[s])?t[i]=t[s]:t[i]=' ',0!==i&&' '===t[i]&&' '===t[i-1]||i++;for(let s=i;s<t.length;s++)t[s]=' '};static vx=t=>t>=' '&&t<=''||' '===t||'\n'===t||'\t'===t||'£'===t||'€'===t;static xM=(t,i)=>{for(let s=0;s<i.length;s++)'*'!==t[s]&&this.Cx(i[s])&&(t[s]=i[s])};static NM=t=>{let i=!0;for(let s=0;s<t.length;s++){const h=t[s];this.Ax(h)?i?this.$M(h)&&(i=!1):this.Cx(h)&&(t[s]=String.fromCharCode(h.charCodeAt(0)+'a'.charCodeAt(0)-65)):i=!0}}}},6054:(t,i,s)=>{s.d(i,{i:()=>h});class h{static Ox=[' ','e','t','a','o','i','h','n','s','r','d','l','u','m','w','c','y','f','g','p','b','v','k','x','j','q','z','0','1','2','3','4','5','6','7','8','9',' ','!','?','.',',',':',';','(',')','-','&','*','\\','\'','@','#','+','=','£','$','%','"','[',']'];static Lx=[];static Aa=(t,i)=>{let s,h=0,e=-1;for(let n=0;n<i&&h<100;n++){const i=t.Gw;s=i>>4&15,-1!==e?(this.Lx[h++]=this.Ox[(e<<4)+s-195],e=-1):s<13?this.Lx[h++]=this.Ox[s]:e=s,s=15&i,-1!==e?(this.Lx[h++]=this.Ox[(e<<4)+s-195],e=-1):s<13?this.Lx[h++]=this.Ox[s]:e=s}let n=!0;for(let t=0;t<h;t++){const i=this.Lx[t];n&&i>='a'&&i<='z'&&(this.Lx[t]=i.toUpperCase(),n=!1),'.'!==i&&'!'!==i||(n=!0)}return this.Lx.slice(0,h).join('')};static tw=(t,i)=>{i.length>80&&(i=i.substring(0,80)),i=i.toLowerCase();let s=-1;for(let h=0;h<i.length;h++){const e=i.charAt(h);let n=0;for(let t=0;t<this.Ox.length;t++)if(e===this.Ox[t]){n=t;break}n>12&&(n+=195),-1===s?n<13?s=n:t.p1(n):n<13?(t.p1((s<<4)+n),s=-1):(t.p1((s<<4)+(n>>4)),s=15&n)}-1!==s&&t.p1(s<<4)}}},5810:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(937);class e{static Sx=null;static state=null;static load=async t=>{const i=new WebAssembly.Module(t),s=await(0,h.xg)(i,{env:void 0});this.Sx=s,this.state=s.newBzip2State()};static read=(t,i,s,h)=>{if(!this.Sx||!this.state)throw new Error('bz2 not found!!');return this.Sx.read(t,i,s,h,this.state)}}},3584:(t,i,s)=>{let h;async function e(t,i){n(i);try{const i=await window.audioContext.decodeAudioData(Uint8Array.from(t).buffer);let s=window.audioContext.createBufferSource();s.buffer=i,s.connect(h),s.start()}catch(t){console.log(t)}}function n(t){h||(h=window.audioContext.createGain(),h.connect(window.audioContext.destination)),h.gain.value=t/256}function r(t,i){window._tinyMidiPlay&&window._tinyMidiPlay(t,i/256)}function o(t){window._tinyMidiVolume&&window._tinyMidiVolume(t/256)}function l(){window._tinyMidiStop&&window._tinyMidiStop()}s.d(i,{eo:()=>r,Ym:()=>n,Wm:()=>o,Ur:()=>l,rc:()=>e})},937:(t,i,s)=>{async function h(t,i={}){const s={env:Object.assign(Object.create(globalThis),i.env||{},{abort(t,i,s,h){t=r(t>>>0),i=r(i>>>0),s>>>=0,h>>>=0,(()=>{throw Error(`${t} in ${i}:${s}:${h}`)})()}})},{exports:h}=await WebAssembly.instantiate(t,s),e=h.memory||i.env.memory,n=Object.setPrototypeOf({newBzip2State(){return(t=h.newBzip2State()>>>0)?{stream:a(Int8Array,g(t+0)),kx:a(Int8Array,g(t+4)),Rx:I(t+8),Mx:I(t+12),xx:I(t+16),Nx:I(t+20),Px:I(t+24),Dx:I(t+28),Fx:I(t+32),Ux:I(t+36),Bx:A(t+40),Gx:I(t+44),Hx:0!=A(t+48),Wx:I(t+52),Yx:I(t+56),Zx:I(t+60),Vx:I(t+64),Xx:I(t+68),zx:I(t+72),jx:I(t+76),qx:I(t+80),$x:I(t+84),Kx:f(I,2,g(t+88)),Jx:f(I,2,g(t+92)),Qx:f(I,2,g(t+96)),tN:f((t=>0!=A(t)),0,g(t+100)),iN:f((t=>0!=A(t)),0,g(t+104)),sN:f(A,0,g(t+108)),hN:f(A,0,g(t+112)),eN:f(I,2,g(t+116)),selector:f(A,0,g(t+120)),nN:f(A,0,g(t+124)),rN:o((t=>f(A,0,g(t))),2,g(t+128)),AR:o((t=>f(I,2,g(t))),2,g(t+132)),Uk:o((t=>f(I,2,g(t))),2,g(t+136)),oN:o((t=>f(I,2,g(t))),2,g(t+140)),lN:f(I,2,g(t+144))}:null;var t},read(t,i,s,e,n){i=function(t){if(t){const i=d.get(t);i?d.set(t,i+1):d.set(h.__pin(t),1)}return t}(c(Int8Array,6,0,i)||w()),n=function(t){if(null==t)return 0;const i=h.__pin(h.__new(148,5));return p(i+0,c(Int8Array,6,0,t.stream)||w()),p(i+4,c(Int8Array,6,0,t.kx)||w()),p(i+8,t.Rx),p(i+12,t.Mx),p(i+16,t.xx),p(i+20,t.Nx),p(i+24,t.Px),p(i+28,t.Dx),p(i+32,t.Fx),p(i+36,t.Ux),m(i+40,t.Bx),p(i+44,t.Gx),m(i+48,t.Hx?1:0),p(i+52,t.Wx),p(i+56,t.Yx),p(i+60,t.Zx),p(i+64,t.Vx),p(i+68,t.Xx),p(i+72,t.zx),p(i+76,t.jx),p(i+80,t.qx),p(i+84,t.$x),p(i+88,u(p,4,2,t.Kx,Int32Array)||w()),p(i+92,u(p,4,2,t.Jx,Int32Array)||w()),p(i+96,u(p,4,2,t.Qx,Int32Array)||w()),p(i+100,u(m,7,0,t.tN,Uint8Array)||w()),p(i+104,u(m,7,0,t.iN,Uint8Array)||w()),p(i+108,u(m,8,0,t.sN,Uint8Array)||w()),p(i+112,u(m,8,0,t.hN,Uint8Array)||w()),p(i+116,u(p,4,2,t.eN,Int32Array)||w()),p(i+120,u(m,8,0,t.selector,Uint8Array)||w()),p(i+124,u(m,8,0,t.nN,Uint8Array)||w()),p(i+128,l(((t,i)=>{p(t,u(m,8,0,i,Uint8Array)||w())}),9,2,t.rN)||w()),p(i+132,l(((t,i)=>{p(t,u(p,4,2,i,Int32Array)||w())}),10,2,t.AR)||w()),p(i+136,l(((t,i)=>{p(t,u(p,4,2,i,Int32Array)||w())}),10,2,t.Uk)||w()),p(i+140,l(((t,i)=>{p(t,u(p,4,2,i,Int32Array)||w())}),10,2,t.oN)||w()),p(i+144,u(p,4,2,t.lN,Int32Array)||w()),h.__unpin(i),i}(n)||w();try{return a(Int8Array,h.read(t,i,s,e,n)>>>0)}finally{!function(t){if(t){const i=d.get(t);if(1===i)h.__unpin(t),d.delete(t);else{if(!i)throw Error(`invalid refcount '${i}' for reference '${t}'`);d.set(t,i-1)}}}(i)}}},h);function r(t){if(!t)return null;const i=t+new Uint32Array(e.buffer)[t-4>>>2]>>>1,s=new Uint16Array(e.buffer);let h=t>>>1,n="";for(;i-h>1024;)n+=String.fromCharCode(...s.subarray(h,h+=1024));return n+String.fromCharCode(...s.subarray(h,i))}function o(t,i,s){if(!s)return null;const h=g(s+4),e=y.getUint32(s+12,!0),n=new Array(e);for(let s=0;s<e;++s)n[s]=t(h+(s<<i>>>0));return n}function l(t,i,s,e){if(null==e)return 0;const n=e.length,r=h.__pin(h.__new(n<<s,1))>>>0,o=h.__pin(h.__new(16,i))>>>0;p(o+0,r),y.setUint32(o+4,r,!0),y.setUint32(o+8,n<<s,!0),y.setUint32(o+12,n,!0);for(let i=0;i<n;++i)t(r+(i<<s>>>0),e[i]);return h.__unpin(r),h.__unpin(o),o}function a(t,i){return i?new t(e.buffer,g(i+4),y.getUint32(i+8,!0)/t.BYTES_PER_ELEMENT).slice():null}function c(t,i,s,n){if(null==n)return 0;const r=n.length,o=h.__pin(h.__new(r<<s,1))>>>0,l=h.__new(12,i)>>>0;return p(l+0,o),y.setUint32(l+4,o,!0),y.setUint32(l+8,r<<s,!0),new t(e.buffer,o,r).set(n),h.__unpin(o),l}function f(t,i,s){if(!s)return null;const h=g(s-4)>>>i,e=new Array(h);for(let n=0;n<h;++n)e[n]=t(s+(n<<i>>>0));return e}function u(t,i,s,n,r){if(null==n)return 0;const o=n.length,l=h.__pin(h.__new(o<<s,i))>>>0;if(r)new r(e.buffer,l,o).set(n);else for(let i=0;i<o;i++)t(l+(i<<s>>>0),n[i]);return h.__unpin(l),l}const d=new Map;function w(){throw TypeError("value must not be null")}let y=new DataView(e.buffer);function m(t,i){try{y.setUint8(t,i,!0)}catch{y=new DataView(e.buffer),y.setUint8(t,i,!0)}}function p(t,i){try{y.setUint32(t,i,!0)}catch{y=new DataView(e.buffer),y.setUint32(t,i,!0)}}function A(t){try{return y.getUint8(t,!0)}catch{return y=new DataView(e.buffer),y.getUint8(t,!0)}}function I(t){try{return y.getInt32(t,!0)}catch{return y=new DataView(e.buffer),y.getInt32(t,!0)}}function g(t){try{return y.getUint32(t,!0)}catch{return y=new DataView(e.buffer),y.getUint32(t,!0)}}return n}s.d(i,{xg:()=>h})},1527:(t,i,s)=>{var h=s(1928);!function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(window.audioContext=new window.AudioContext);var t=function(i){if(window.audioContext){var s=window.audioContext.createBuffer(1,1,22050),h=window.audioContext.createBufferSource();h.buffer=s,h.connect(window.audioContext.destination),h.start?h.start(0):h.play?h.play(0):h.noteOn&&h.noteOn(0)}document.removeEventListener('touchstart',t),document.removeEventListener('touchend',t),document.removeEventListener('click',t)};document.addEventListener('touchstart',t),document.addEventListener('touchend',t),document.addEventListener('click',t)}(),(async()=>{let t=new Float32Array,i=window.audioContext.createGain();i.gain.value=.1,i.connect(window.audioContext.destination);let s=window.audioContext.currentTime,e=[];const n=new h.i({aN:30,cN:i=>{let s=new Float32Array(i.buffer),h=new Float32Array(t.length+s.length);h.set(t,0),h.set(s,t.length),t=h},fN:t=>{},bufferSize:102400});await n.init();const r=await fetch('./SCC1_Florestan.sf2'),o=new Uint8Array(await r.arrayBuffer());function l(){if(!window.audioContext||!t.length)return;let h=window.audioContext.createBufferSource();const n=t.length/2,r=window.audioContext.createBuffer(2,n,44100);for(let i=0;i<2;i++){const s=r.getChannelData(i);let h=i;for(let i=0;i<n;i++)s[i]=t[h],h+=2}s<window.audioContext.currentTime&&(s=window.audioContext.currentTime),h.buffer=r,h.connect(i),h.start(s),e.push(h),s+=r.duration,t=new Float32Array}let a;n.uN(o),window._tinyMidiStop=async()=>{if(a&&clearInterval(a),t=new Float32Array,e.length){let t=i.gain.value;i.gain.value=0,e.forEach((t=>{t.stop(window.audioContext.currentTime)})),e=[],i.gain.value=t}},window._tinyMidiVolume=(t=1)=>{i.gain.value=t},window._tinyMidiPlay=async(t,i=1)=>{t&&(await window._tinyMidiStop(),-1!=i&&window._tinyMidiVolume(i),s=window.audioContext.currentTime,a=setInterval(l,250),n.dN(t))}})()},1928:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(1885);const e=class{constructor(t={}){this.wN=void 0,this.yN=0,this.mN=0,this.pN=0,this.aN=t.aN||100,this.sampleRate=t.sampleRate||44100,this.AN=t.AN||2,this.gain=t.gain||0,t.bufferSize?this.bufferSize=t.bufferSize:this.IN(1),this.cN=t.cN||(()=>{}),this.fN=t.fN||(()=>{}),this.gN=void 0,this.test=0}async init(){if(!this.wN){if('undefined'!=typeof process){const{_N:t}=await import('path'),{CN:i}=await import('module');globalThis.__dirname=t("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js"),globalThis.require=i("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js")}this.wN=await(0,h.i)(),this.EN=this.wN._malloc(this.bufferSize),this.TN=this.wN._malloc(8)}}IN(t){this.bufferSize=4*this.sampleRate*this.AN*t}bN(){if(!this.wN)throw new Error(`${this.constructor.name} not initalized. call .init()`)}uN(t){this.bN();const{_malloc:i,_free:s,_tsf_load_memory:h,_tsf_set_output:e,_tsf_channel_set_bank_preset:n,_tsf_set_max_voices:r,_tsf_channel_set_presetnumber:o}=this.wN;s(this.yN),this.yN=i(t.length),this.wN.HEAPU8.set(t,this.yN),this.mN=h(this.yN,t.length),e(this.mN,2===this.AN?0:2,this.sampleRate,this.gain)}vN(){this.bN();const t=new Uint8Array(this.bufferSize);return t.set(this.wN.HEAPU8.subarray(this.EN,this.EN+this.bufferSize)),t}ON(t){const{_malloc:i,_free:s,_tml_load_memory:h}=this.wN;return s(this.pN),this.pN=i(t.length),this.wN.HEAPU8.set(t,this.pN),h(this.pN,t.length)}LN(t){const{_midi_render:i}=this.wN;return i(this.mN,t,this.AN,this.sampleRate,this.EN,this.bufferSize,this.TN)}dN(t){if(this.bN(),!this.mN)throw new Error('no soundfont buffer set. call .setSoundfont');window.clearTimeout(this.gN);const{setValue:i,getValue:s}=this.wN;i(this.TN,0,'double'),this.wN._tsf_reset(this.mN),this.wN._tsf_channel_set_bank_preset(this.mN,9,128,0),t[0]==='R'.charCodeAt(0)&&(t=t.slice(20));let h=this.ON(t);const e=()=>{h=this.LN(h);const t=this.vN();this.cN(t),h?this.gN=setTimeout(e,this.aN):this.fN(s(this.TN,'double'))};this.gN=setTimeout(e,16)}}},5621:(t,i,s)=>{t.exports=s.Qg+"9f86b5397894e28b5ae2.wasm"},1885:(t,i,s)=>{var h;s.d(i,{i:()=>e});const e=(h="file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/tinymidipcm.mjs",function(t){var i,e,n=void 0!==(t=t||{})?t:{};n.ready=new Promise((function(t,s){i=t,e=s})),["_tsf_load_memory","_tsf_set_output","_tsf_channel_set_bank_preset","_tsf_set_max_voices","_tsf_channel_set_presetnumber","_tsf_reset","_tsf_close","_tml_load_memory","_midi_render","_malloc","_realloc","_free","_fflush","onRuntimeInitialized"].forEach((t=>{Object.getOwnPropertyDescriptor(n.ready,t)||Object.defineProperty(n.ready,t,{get:()=>z('You are getting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),set:()=>z('You are setting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js')})}));var r=Object.assign({},n),o=[],l='object'==typeof window,a='function'==typeof importScripts,c='object'==typeof process&&'object'==typeof process.versions&&'string'==typeof process.versions.node,f=!l&&!c&&!a;if(n.ENVIRONMENT)throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');var u,d,w,y='';if(c){if('undefined'==typeof process||!process.release||'node'!==process.release.name)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');var m,p;y=a?require('path')._N(y)+'/':__dirname+'/';var A=()=>{p||(m=require('fs'),p=require('path'))};u=(t,i)=>(A(),t=p.normalize(t),m.SN(t,i?void 0:'utf8')),w=t=>{var i=u(t,!0);return i.buffer||(i=new Uint8Array(i)),N(i.buffer),i},d=(t,i,s)=>{A(),t=p.normalize(t),m.kN(t,(function(t,h){t?s(t):i(h.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,'/'),o=process.argv.slice(2),process.on('uncaughtException',(function(t){if(!(t instanceof et))throw t})),process.on('unhandledRejection',(function(t){throw t})),n.inspect=function(){return'[Emscripten Module object]'}}else if(f){if('object'==typeof process&&'function'==typeof require||'object'==typeof window||'function'==typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');'undefined'!=typeof read&&(u=function(t){return read(t)}),w=function(t){let i;return'function'==typeof readbuffer?new Uint8Array(readbuffer(t)):(i=read(t,'binary'),N('object'==typeof i),i)},d=function(t,i,s){setTimeout((()=>i(w(t))),0)},'undefined'!=typeof scriptArgs?o=scriptArgs:void 0!==arguments&&(o=arguments),'undefined'!=typeof print&&('undefined'==typeof console&&(console={}),console.log=print,console.warn=console.error='undefined'!=typeof printErr?printErr:print)}else{if(!l&&!a)throw new Error('environment detection error');if(a?y=self.location.href:'undefined'!=typeof document&&document.currentScript&&(y=document.currentScript.src),h&&(y=h),y=0!==y.indexOf('blob:')?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf('/')+1):'','object'!=typeof window&&'function'!=typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');u=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.send(null),i.responseText},a&&(w=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.responseType='arraybuffer',i.send(null),new Uint8Array(i.response)}),d=(t,i,s)=>{var h=new XMLHttpRequest;h.open('GET',t,!0),h.responseType='arraybuffer',h.onload=()=>{200==h.status||0==h.status&&h.response?i(h.response):s()},h.onerror=s,h.send(null)}}n.print||console.log.bind(console);var I,g,_=n.printErr||console.warn.bind(console);function C(t,i){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){z('Module.'+t+' has been replaced with plain '+i+' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)')}})}function E(t){return'FS_createPath'===t||'FS_createDataFile'===t||'FS_createPreloadedFile'===t||'FS_unlink'===t||'addRunDependency'===t||'FS_createLazyFile'===t||'FS_createDevice'===t||'removeRunDependency'===t}Object.assign(n,r),r=null,I='fetchSettings',Object.getOwnPropertyDescriptor(n,I)&&z('`Module.'+I+'` was supplied but `'+I+'` not included in INCOMING_MODULE_JS_API'),n.arguments&&(o=n.arguments),C('arguments','arguments_'),n.thisProgram&&n.thisProgram,C('thisProgram','thisProgram'),n.quit&&n.quit,C('quit','quit_'),N(void 0===n.memoryInitializerPrefixURL,'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.pthreadMainPrefixURL,'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.cdInitializerPrefixURL,'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.filePackagePrefixURL,'Module.filePackagePrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.read,'Module.read option was removed (modify read_ in JS)'),N(void 0===n.readAsync,'Module.readAsync option was removed (modify readAsync in JS)'),N(void 0===n.readBinary,'Module.readBinary option was removed (modify readBinary in JS)'),N(void 0===n.setWindowTitle,'Module.setWindowTitle option was removed (modify setWindowTitle in JS)'),N(void 0===n.TOTAL_MEMORY,'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY'),C('read','read_'),C('readAsync','readAsync'),C('readBinary','readBinary'),C('setWindowTitle','setWindowTitle'),N(!f,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),n.wasmBinary&&(g=n.wasmBinary),C('wasmBinary','wasmBinary');var T;n.noExitRuntime;C('noExitRuntime','noExitRuntime'),'object'!=typeof WebAssembly&&z('no native wasm support detected');var b,v,O,L,S,k,R,M,x=!1;function N(t,i){t||z('Assertion failed'+(i?': '+i:''))}function P(t){b=t,n.HEAP8=v=new Int8Array(t),n.HEAP16=L=new Int16Array(t),n.HEAP32=S=new Int32Array(t),n.HEAPU8=O=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=k=new Uint32Array(t),n.HEAPF32=R=new Float32Array(t),n.HEAPF64=M=new Float64Array(t)}'undefined'!=typeof TextDecoder&&new TextDecoder('utf8');var D=5242880;n.TOTAL_STACK&&N(D===n.TOTAL_STACK,'the stack size can no longer be determined at runtime');var F=n.INITIAL_MEMORY||16777216;function U(){if(!x){var t=ft(),i=k[t>>2],s=k[t+4>>2];34821223==i&&2310721022==s||z('Stack overflow! Stack cookie has been overwritten at 0x'+t.toString(16)+', expected hex dwords 0x89BACDFE and 0x2135467, but received 0x'+s.toString(16)+' 0x'+i.toString(16)),1668509029!==k[0]&&z('Runtime error: The application has corrupted its heap memory area (address zero)!')}}C('INITIAL_MEMORY','INITIAL_MEMORY'),N(F>=D,'INITIAL_MEMORY should be larger than TOTAL_STACK, was '+F+'! (TOTAL_STACK='+D+')'),N('undefined'!=typeof Int32Array&&'undefined'!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,'JS engine does not provide full typed array support'),N(!n.wasmMemory,'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally'),N(16777216==F,'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically'),function(){var t=new Int16Array(1),i=new Int8Array(t.buffer);if(t[0]=25459,115!==i[0]||99!==i[1])throw'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)'}();var B=[],G=[],H=[],W=!1;N(Math.imul,'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),N(Math.fround,'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),N(Math.clz32,'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),N(Math.trunc,'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');var Y=0,Z=null,V=null,X={};function z(t){n.onAbort&&n.onAbort(t),_(t='Aborted('+t+')'),x=!0;var i=new WebAssembly.RuntimeError(t);throw e(i),i}var j={error:function(){z('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM')},init:function(){j.error()},RN:function(){j.error()},MN:function(){j.error()},xN:function(){j.error()},open:function(){j.error()},NN:function(){j.error()},PN:function(){j.error()},DN:function(){j.error()},FN:function(){j.error()},UN:function(){j.error()}};n.FS_createDataFile=j.RN,n.FS_createPreloadedFile=j.MN;var q,$,K,J,Q='data:application/octet-stream;base64,';function tt(t){return t.startsWith(Q)}function it(t){return t.startsWith('file://')}function st(t,i){return function(){var s=t,h=i;return i||(h=n.asm),N(W,'native function `'+s+'` called before runtime initialization'),h[t]||N(h[t],'exported native function `'+s+'` not found'),h[t].apply(null,arguments)}}function ht(t){try{if(t==q&&g)return new Uint8Array(g);if(w)return w(t);throw"both async and sync fetching of the wasm failed"}catch(t){z(t)}}function et(t){this.name='ExitStatus',this.message='Program terminated with exit('+t+')',this.status=t}function nt(t){for(;t.length>0;)t.shift()(n)}function rt(t){rt.BN||(rt.BN={}),rt.BN[t]||(rt.BN[t]=1,c&&(t='warning: '+t),_(t))}function ot(t){try{return T.GN(t-b.byteLength+65535>>>16),P(T.buffer),1}catch(i){_('emscripten_realloc_buffer: Attempted to grow heap from '+b.byteLength+' bytes to '+t+' bytes, but got error: '+i)}}n.locateFile?tt(q='tinymidipcm.wasm')||($=q,q=n.locateFile?n.locateFile($,y):y+$):q=new URL(s(5621),s.b).toString();var lt,at={"emscripten_memcpy_big":function(t,i,s){O.copyWithin(t,i,i+s)},"emscripten_resize_heap":function(t){var i=O.length;N((t>>>=0)>i);var s,h,e=2147483648;if(t>e)return _('Cannot enlarge memory, asked to go up to '+t+' bytes, but the limit is '+e+' bytes!'),!1;for(var n=1;n<=4;n*=2){var r=i*(1+.2/n);r=Math.min(r,t+100663296);var o=Math.min(e,(s=Math.max(t,r))+((h=65536)-s%h)%h);if(ot(o))return!0}return _('Failed to grow the heap from '+i+' bytes to '+o+' bytes, not enough memory!'),!1}},ct=(function(){var t,i={'env':at,'wasi_snapshot_preview1':at};function s(t,i){var s,h=t.exports;n.asm=h,N(T=n.asm.memory,"memory not found in wasm exports"),P(T.buffer),N(n.asm.__indirect_function_table,"table not found in wasm exports"),s=n.asm.__wasm_call_ctors,G.unshift(s),function(t){if(Y--,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(N(X[t]),delete X[t]):_('warning: run dependency removed without ID'),0==Y&&(null!==Z&&(clearInterval(Z),Z=null),V)){var i=V;V=null,i()}}('wasm-instantiate')}t='wasm-instantiate',Y++,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(N(!X[t]),X[t]=1,null===Z&&'undefined'!=typeof setInterval&&(Z=setInterval((function(){if(x)return clearInterval(Z),void(Z=null);var t=!1;for(var i in X)t||(t=!0,_('still waiting on run dependencies:')),_('dependency: '+i);t&&_('(end of list)')}),1e4))):_('warning: run dependency added without ID');var h=n;function r(t){N(n===h,'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?'),h=null,s(t.instance)}function o(t){return function(){if(!g&&(l||a)){if('function'==typeof fetch&&!it(q))return fetch(q,{credentials:'same-origin'}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+q+"'";return t.arrayBuffer()})).catch((function(){return ht(q)}));if(d)return new Promise((function(t,i){d(q,(function(i){t(new Uint8Array(i))}),i)}))}return Promise.resolve().then((function(){return ht(q)}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){_('failed to asynchronously prepare wasm: '+t),it(q)&&_('warning: Loading from a file URI ('+q+') is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing'),z(t)}))}if(n.instantiateWasm)try{return n.instantiateWasm(i,s)}catch(t){_('Module.instantiateWasm callback failed with error: '+t),e(t)}(g||'function'!=typeof WebAssembly.instantiateStreaming||tt(q)||it(q)||c||'function'!=typeof fetch?o(r):fetch(q,{credentials:'same-origin'}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(r,(function(t){return _('wasm streaming compile failed: '+t),_('falling back to ArrayBuffer instantiation'),o(r)}))}))).catch(e)}(),n.___wasm_call_ctors=st("__wasm_call_ctors"),n._malloc=st("malloc"),n._free=st("free"),n._tsf_load_memory=st("tsf_load_memory"),n._tsf_close=st("tsf_close"),n._tsf_reset=st("tsf_reset"),n._tsf_set_output=st("tsf_set_output"),n._tsf_set_max_voices=st("tsf_set_max_voices"),n._realloc=st("realloc"),n._tsf_channel_set_presetnumber=st("tsf_channel_set_presetnumber"),n._tsf_channel_set_bank_preset=st("tsf_channel_set_bank_preset"),n._tml_load_memory=st("tml_load_memory"),n._midi_render=st("midi_render"),n.___errno_location=st("__errno_location"),n._fflush=st("fflush"),n._emscripten_stack_init=function(){return(ct=n._emscripten_stack_init=n.asm.emscripten_stack_init).apply(null,arguments)}),ft=(n._emscripten_stack_get_free=function(){return(n._emscripten_stack_get_free=n.asm.emscripten_stack_get_free).apply(null,arguments)},n._emscripten_stack_get_base=function(){return(n._emscripten_stack_get_base=n.asm.emscripten_stack_get_base).apply(null,arguments)},n._emscripten_stack_get_end=function(){return(ft=n._emscripten_stack_get_end=n.asm.emscripten_stack_get_end).apply(null,arguments)});function ut(){var t;ct(),N(0==(3&(t=ft()))),k[t>>2]=34821223,k[t+4>>2]=2310721022,k[0]=1668509029}function dt(t){function s(){lt||(lt=!0,n.calledRun=!0,x||(N(!W),W=!0,U(),nt(G),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),N(!n._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(U(),n.postRun)for('function'==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)t=n.postRun.shift(),H.unshift(t);var t;nt(H)}()))}t=t||o,Y>0||(ut(),function(){if(n.preRun)for('function'==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)t=n.preRun.shift(),B.unshift(t);var t;nt(B)}(),Y>0||(n.setStatus?(n.setStatus('Running...'),setTimeout((function(){setTimeout((function(){n.setStatus('')}),1),s()}),1)):s(),U()))}if(n.stackSave=st("stackSave"),n.stackRestore=st("stackRestore"),n.stackAlloc=st("stackAlloc"),n.setValue=function(t,i,s="i8"){switch(s.endsWith('*')&&(s='*'),s){case'i1':case'i8':v[t>>0]=i;break;case'i16':L[t>>1]=i;break;case'i32':S[t>>2]=i;break;case'i64':J=[i>>>0,(K=i,+Math.abs(K)>=1?K>0?(0|Math.min(+Math.floor(K/4294967296),4294967295))>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],S[t>>2]=J[0],S[t+4>>2]=J[1];break;case'float':R[t>>2]=i;break;case'double':M[t>>3]=i;break;case'*':k[t>>2]=i;break;default:z('invalid type for setValue: '+s)}},n.getValue=function(t,i="i8"){switch(i.endsWith('*')&&(i='*'),i){case'i1':case'i8':return v[t>>0];case'i16':return L[t>>1];case'i32':case'i64':return S[t>>2];case'float':return R[t>>2];case'double':return M[t>>3];case'*':return k[t>>2];default:z('invalid type for getValue: '+i)}return null},['run','UTF8ArrayToString','UTF8ToString','stringToUTF8Array','stringToUTF8','lengthBytesUTF8','addOnPreRun','addOnInit','addOnPreMain','addOnExit','addOnPostRun','addRunDependency','removeRunDependency','FS_createFolder','FS_createPath','FS_createDataFile','FS_createPreloadedFile','FS_createLazyFile','FS_createLink','FS_createDevice','FS_unlink','getLEB','getFunctionTables','alignFunctionTables','registerFunctions','prettyPrint','getCompilerSetting','print','printErr','callMain','abort','keepRuntimeAlive','wasmMemory','stackAlloc','stackSave','stackRestore','getTempRet0','setTempRet0','writeStackCookie','checkStackCookie','ptrToString','zeroMemory','stringToNewUTF8','exitJS','getHeapMax','emscripten_realloc_buffer','ENV','ERRNO_CODES','ERRNO_MESSAGES','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','DNS','getHostByName','Protocols','Sockets','getRandomDevice','warnOnce','traverseStack','UNWIND_CACHE','convertPCtoSourceLocation','readAsmConstArgsArray','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','handleException','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','freeTableIndexes','functionsInTableMap','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','PATH','PATH_FS','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16Decoder','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeArrayToMemory','writeAsciiToMemory','SYSCALLS','getSocketFromFD','getSocketAddress','JSEvents','registerKeyEventCallback','specialHTMLTargets','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','currentFullscreenStrategy','restoreOldWindowedStyle','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','demangle','demangleAll','jsStackTrace','stackTrace','ExitStatus','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','dlopenMissingError','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','uncaughtExceptionCount','exceptionLast','exceptionCaught','ExceptionInfo','exception_addRef','exception_decRef','Browser','setMainLoop','wget','FS','MEMFS','TTY','PIPEFS','SOCKFS','_setNetworkCallback','tempFixedLengthArray','miniTempWebGLFloatBuffers','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','GL','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','AL','SDL_unicode','SDL_ttfContext','SDL_audio','SDL','SDL_gfx','GLUT','EGL','GLFW_Window','GLFW','GLEW','IDBStore','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){var i="'"+t+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";E(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),z(i)}})})),['ptrToString','zeroMemory','stringToNewUTF8','exitJS','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','getHostByName','getRandomDevice','traverseStack','convertPCtoSourceLocation','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeAsciiToMemory','getSocketFromFD','getSocketAddress','registerKeyEventCallback','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','ExceptionInfo','exception_addRef','exception_decRef','setMainLoop','_setNetworkCallback','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','SDL_unicode','SDL_ttfContext','SDL_audio','GLFW_Window','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){'undefined'==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{configurable:!0,get:function(){var i='`'+t+'` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line';E(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),rt(i)}})})),V=function t(){lt||dt(),lt||(V=t)},n.preInit)for('function'==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return dt(),t.ready})}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,r),s.exports}r.Kg=e,t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",i="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",h=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},r.a=(e,n,r)=>{var o;r&&((o=[]).d=-1);var l,a,c,f=new Set,u=e.exports,d=new Promise(((t,i)=>{c=i,a=t}));d[i]=u,d[t]=t=>(o&&t(o),f.forEach(t),d.catch((t=>{}))),e.exports=d,n((e=>{var n;l=(e=>e.map((e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var n=[];n.d=0,e.then((t=>{r[i]=t,h(n)}),(t=>{r[s]=t,h(n)}));var r={};return r[t]=t=>t(n),r}}var o={};return o[t]=t=>{},o[i]=e,o})))(e);var r=()=>l.map((t=>{if(t[s])throw t[s];return t[i]})),a=new Promise((i=>{(n=()=>i(r)).r=0;var s=t=>t!==o&&!f.has(t)&&(f.add(t),t&&!t.d&&(n.r++,t.push(n)));l.map((i=>i[t](s)))}));return n.r?a:r()}),(t=>(t?c(d[s]=t):a(u),h(o)))),o&&o.d<0&&(o.d=0)},r.d=(t,i)=>{for(var s in i)r.Jg(i,s)&&!r.Jg(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},r.Jg=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r.Qg="/Client2/",r.b=document.baseURI||self.location.href;r(1979)})();