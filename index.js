(()=>{"use strict";var t,i,s,h,e={3099:(t,i,s)=>{s.d(i,{t:()=>M});var h=s(2790),e=s(8078),n=s(2028),r=s(2383),l=s(1995),o=(s(1527),s(9080)),a=s(7221),c=s(3909),f=s(3693),u=s(4191),d=s(9345),w=s(6121),y=s(2991),m=s(1840),p=s(312),A=s(9178),I=s(8067),g=s(8934),_=s(8809),C=s(1519),E=s(5810),T=s(3584),b=s(7958),v=s(2441),O=s(8056),L=s(551),S=s(1089),k=s(2157),R=s(8762);class M extends l.i{static h=225;static l=10;static o=0;static u=!0;static m=!1;static p='';static A='';static I=!1;static _='https://raw.githubusercontent.com/2004scape/Server/main';static exponent=58778699976184461502525193738213253649000149147835990136706041084440742975821n;static C=7162900525229798032761816791230527296329313291232324290237849263501208207972894053929065636522363163621000728841182238772712427862772219676577293600221789n;static T=0;static v=0;static O=0;static L=0;static S=0;static k=0;static R=0;static M=0;static N=0;static P=0;static D=0;static F=0;static U=0;static B=0;static G=0;static H=()=>{a.i.m=!1,e.i.m=!1,M.m=!1,c.i.m=!1};static W=()=>{a.i.m=!0,e.i.m=!0,M.m=!0,c.i.m=!0};Z=2048;Y=2047;V=!1;X=!1;j=!1;q=!1;db=null;$=0;K=!1;J=[];stream=null;in=r.i.tt(1);it=r.i.tt(1);st=r.i.tt(1);ht=0n;et=0;nt=0;rt=0;lt=null;ot=0;packetSize=0;ct=0;ft=0;ut=0;dt=null;wt=!0;yt=0;At=0;It=null;gt=null;_t=null;Ct=null;Et=null;Tt=null;bt=null;vt=null;Ot=null;Lt=null;St=null;kt='';Rt='';username='';password='';Mt=null;xt=null;Nt=null;Pt=null;Dt=[];Ft=!1;Ut=null;Bt=null;Gt=null;Ht=null;Wt=null;Zt=null;Yt=null;Vt=null;zt=null;Xt=null;jt=new Int32Array(256);qt=0;$t=0;Kt=0;Jt=null;Qt=null;ti=null;ii=null;si=null;hi=null;ei=null;ni=null;ri=null;li=null;oi=null;ai=null;ci=null;fi=null;ui=null;di=null;wi=null;yi=null;mi=null;pi=null;Ai=null;Ii=new Int32Array(33);gi=new Int32Array(33);_i=new Int32Array(151);Ci=new Int32Array(151);Ei=null;Ti=null;bi=null;vi=null;Oi=null;Li=null;Si=new d.to(13,null);ki=null;Ri=null;Mi=new d.to(50,null);xi=new d.to(50,null);Ni=new d.to(20,null);Pi=new d.to(20,null);Di=null;Fi=new d.to(8,null);Ui=null;Bi=null;Gi=null;Hi=null;Wi=null;Zi=null;Yi=null;Vi=null;zi=null;Xi=null;ji=null;qi=null;$i=null;Ki=null;Ji=null;Qi=null;ts=null;ss=null;hs=new d.to(1e3,null);es=!1;ns=!1;rs=!1;ls=!1;os=-1;cs=0;fs=0;us=0;ds=0;ws=0;ys=0;ps=!1;As=0;Is=0;gs=0;_s=0;Cs=0;Es=0;Ts=[];bs=-1;vs=-1;Os=new h.i;Ls=78;Ss=0;ks=0;Rs=[];Ms=0;xs=0;Ns=0;Ps=0;Ds=0;Fs=0;Us=0;Bs=0;Gs=[];Hs=[];Ws=[];Zs=[];Ys=null;Vs=-1;zs=3;Xs=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];js=0;qs=0;$s=0;Ks=!1;Js=0;Qs=!1;th='';ih='';sh=0;hh='';eh=!1;nh=-1;rh=new d.to(100,null);lh=new d.to(100,null);messageType=new Int32Array(100);oh=new Int32Array(100);ah=0;fh=0;uh=0;dh='';wh=0;yh=0;mh=0;ph=0;Ah=0;Ih=0;gh=0;_h=0;Ch=0;Eh=!1;Th=0;bh=0;Oh=0;Lh=0;Sh=null;kh=0;Rh=0;Mh=0;xh=0;Nh=!1;Ph=[];Dh=[];Fh=0;Uh=0;Bh=0;Gh=null;Hh=0;Wh=new Int32Array(500);Zh=new Int32Array(500);Yh=new Int32Array(500);Vh=new Int32Array(500);zh=0;Xh=0;jh=0;qh='';$h=!1;Kh=-1;Jh=0;Qh=0;te=0;ie=0;se=0;he=new Int32Array(1e3);ee=new Int32Array(1e3);ne=null;re=0;le=0;oe=0;ae=0;ce=0;fe=!1;ue=0;de=0;we=0;ye=0;me=2;pe=2;Ae=1;Ie=new Int32Array(5);ge=new d.to(5,!1);_e=new Int32Array(5);Ce=new Int32Array(5);Ee=new Int32Array(5);Te=0;be=0;ve=0;Oe=0;Le=0;Se=0;ke=0;Re=0;Me=0;xe=1;Ne=2;Pe=-1;De=0;Fe=0;Ue=0;Be=0;Ge=0;He=0;We=null;Ze=null;Ye=null;Ve=0;ze=0;Xe=new Int8Array(16384);je=new d.to(f.i.qe,null);$e=0;Ke=0;Je=128;Qe=0;tn=0;sn=0;hn=0;en=0;nn=null;rn=null;ln=new d.on(f.i.an,f.i.an);cn=0;fn=0;un=0;dn=0;wn=0;yn=0;mn=0;pn=0;An=0;In=0;gn=0;_n=0;Cn=new d.to(this.Z,null);En=0;Tn=new Int32Array(this.Z);bn=0;vn=0;On=new Int32Array(this.Z);Ln=new Int32Array(1e3);Sn=new d.to(this.Z,null);kn=new d.to(8192,null);Rn=0;Mn=new Int32Array(8192);xn=new o.i;Nn=new o.i;Pn=new o.i;Dn=new o.i;Fn=new d.Un(f.i.qe,f.i.an,f.i.an,null);Bn=new o.i;Gn=new Int32Array(4e3);Hn=new Int32Array(4e3);Wn=new Int32Array(f.i.an*f.i.an);Zn=new Int32Array(f.i.an*f.i.an);Yn=0;Vn=null;zn=0;Xn=0;jn=-1;qn=0;$n=0;Kn=0;Jn=0;Qn=!1;tr=!0;ir=!1;sr=new Int32Array(7);hr=new Int32Array(5);er=0;nr=0;static rr=50;lr=new Int32Array(M.rr);ar=new Int32Array(M.rr);cr=new Int32Array(M.rr);ur=new Int32Array(M.rr);dr=new Int32Array(M.rr);wr=new Int32Array(M.rr);yr=new Int32Array(M.rr);mr=new d.to(M.rr,null);pr=new d.to(100,null);Ar=new BigInt64Array(100);Ir=new Int32Array(100);gr=null;_r=0;Cr=!0;Er=new Int32Array(50);Tr=new Int32Array(50);br=new Int32Array(50);vr=192;Or=-1;Lr=-1;Sr=0;kr=0;Rr=0;Mr=!0;Nr=null;Pr=0;Dr=0;Fr=192;Ur=()=>{try{this.stream&&this.stream.close()}catch(t){}this.stream=null,(0,T.Br)(),this.it=null,this.st=null,this.in=null,this.Ye=null,this.We=null,this.Ze=null,this.nn=null,this.rn=null,this.ne=null,this.je=null,this.Wn=null,this.Zn=null,this.Gn=null,this.Hn=null,this.Xe=null,this.Qt=null,this.ti=null,this.ii=null,this.si=null,this.hi=null,this.ei=null,this.ni=null,this.ri=null,this.li=null,this.oi=null,this.ai=null,this.ci=null,this.fi=null,this.ui=null,this.di=null,this.wi=null,this.yi=null,this.Ei=null,this.bi=null,this.Ti=null,this.vi=null,this.Oi=null,this.Li=null,this.Si=null,this.Yi=null,this.Vi=null,this.zi=null,this.Xi=null,this.ji=null,this.qi=null,this.$i=null,this.Ki=null,this.Ji=null,this.Qi=null,this.Ri=null,this.Ni=null,this.Pi=null,this.Fi=null,this.Ui=null,this.Bi=null,this.Gi=null,this.Hi=null,this.Mi=null,this.xi=null,this.ln=null,this.Cn=null,this.Tn=null,this.On=null,this.Sn=null,this.Ln=null,this.kn=null,this.Mn=null,this.Fn=null,this.Bn=null,this.Dn=null,this.xn=null,this.Nn=null,this.Pn=null,this.Yh=null,this.Vh=null,this.Wh=null,this.Zh=null,this.Ts=null,this.Ph=null,this.he=null,this.ee=null,this.hs=null,this.ki=null,this.pr=null,this.Ar=null,this.Ir=null,this.Ct=null,this.Et=null,this.It=null,this.gt=null,this._t=null,this.Tt=null,this.bt=null,this.vt=null,this.Ot=null,this.Gr(),b.i.Ur(),v.i.Ur(),m.i.Ur(),O.i.Hr=null,_.i.Hr=null,h.i.Hr=null,I.i.Hr=null,L.i.Hr=null,L.i.Wr=null,S.i.Hr=null,this.Zr=null,u.i.Wr=null,e.i.Ur(),a.i.Ur(),A.i.Ur(),k.i.Hr=[],R.i.Hr=[]};Gr=()=>{this.Ft=!1,this.Jt&&(clearInterval(this.Jt),this.Jt=null),this.Lt=null,this.St=null,this.Dt=[],this.Yt=null,this.Vt=null,this.zt=null,this.Xt=null,this.Ht=null,this.Gt=null,this.Wt=null,this.Zt=null,this.Ut=null,this.Bt=null};Yr=async(t,i,s,h)=>{let e=5,l=await(this.db?.Vr(t));if(l&&r.i.zr(l)!==s&&(l=void 0),l)return new n.i(l);for(;!l;){await this.Xr(h,`Requesting ${i}`);try{l=await(0,C.jr)(`${M.A}/${t}${s}`)}catch(t){l=void 0;for(let t=e;t>0;t--)await this.Xr(h,`Error loading - Will retry in ${t} secs.`),await(0,C.qr)(1e3);e*=2,e>60&&(e=60)}}return await(this.db?.$r(t,l)),new n.i(l)};Kr=async(t,i,s)=>{let h=await(this.db?.Vr(t+'.mid'));if(h&&12345678!==i&&r.i.zr(h)!==i&&(h=void 0),!h)try{h=await(0,C.jr)(`${M.A}/${t}_${i}.mid`),s!==h.length&&(h=h.slice(0,s))}catch(t){}if(!h)return;await(this.db?.$r(t+'.mid',h));const e=new r.i(Uint8Array.from(h)).Jr,n=E.i.read(e,h,s,4);(0,T.Qr)(n,this.Fr)};tl=()=>{if(w.il.fillStyle='black',w.il.fillRect(0,0,this.width,this.height),this.sl(1),this.j){this.Ft=!1,w.il.font='bold 16px helvetica, sans-serif',w.il.textAlign='left',w.il.fillStyle='yellow';let t=35;w.il.fillText('Sorry, an error has occured whilst loading RuneScape',30,t),t+=50,w.il.fillStyle='white',w.il.fillText('To fix this try the following (in order):',30,t),t+=50,w.il.font='bold 12px helvetica, sans-serif',w.il.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.il.fillText('2: Try clearing your web-browsers cache from tools->internet options',30,t),t+=30,w.il.fillText('3: Try using a different game-world',30,t),t+=30,w.il.fillText('4: Try rebooting your computer',30,t),t+=30,w.il.fillText('5: Try selecting a different version of Java from the play-game menu',30,t)}if(this.q&&(this.Ft=!1,w.il.font='bold 20px helvetica, sans-serif',w.il.textAlign='left',w.il.fillStyle='white',w.il.fillText('Error - unable to load game!',50,50),w.il.fillText('To play RuneScape make sure you play from',50,100),w.il.fillText('https://2004scape.org',50,150)),this.X){this.Ft=!1,w.il.font='bold 13px helvetica, sans-serif',w.il.textAlign='left',w.il.fillStyle='yellow';let t=35;w.il.fillText('Error a copy of RuneScape already appears to be loaded',30,t),t+=50,w.il.fillStyle='white',w.il.fillText('To fix this try the following (in order):',30,t),t+=50,w.il.font='bold 12px helvetica, sans-serif',w.il.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.il.fillText('2: Try rebooting your computer, and reloading',30,t)}};hl=t=>{if(!t.el)return!1;for(let i=0;i<t.el.length;i++){const s=this.nl(t,i);if(!t.rl)return!1;const h=t.rl[i];if(2===t.el[i]){if(s>=h)return!1}else if(3===t.el[i]){if(s<=h)return!1}else if(4===t.el[i]){if(s===h)return!1}else if(s!==h)return!1}return!0};ll=(t,i,s,h,e)=>{this.Wi?.draw(t,i),this.Zi?.draw(t,i+e-16),y.i.fillRect(t,i+16,16,e-32,p.i.ol);let n=(e-32)*e/h|0;n<8&&(n=8);const r=(e-n-32)*s/(h-e)|0;y.i.fillRect(t,i+r+16,16,n,p.i.al),y.i.cl(t,i+r+16,p.i.fl,n),y.i.cl(t+1,i+r+16,p.i.fl,n),y.i.ul(t,i+r+16,p.i.fl,16),y.i.ul(t,i+r+17,p.i.fl,16),y.i.cl(t+15,i+r+16,p.i.dl,n),y.i.cl(t+14,i+r+17,p.i.dl,n-1),y.i.ul(t,i+r+n+15,p.i.dl,16),y.i.ul(t+1,i+r+n+14,p.i.dl,15)};wl=(t,i)=>{let s=!1;const e=h.i.Hr[t];if(!e.yl)return!1;for(let t=0;t<e.yl.length&&-1!==e.yl[t];t++){const n=h.i.Hr[e.yl[t]];if(1===n.type&&(s||=this.wl(n.id,i)),6===n.type&&(-1!==n.ml||-1!==n.pl)){let t;if(t=this.hl(n)?n.pl:n.ml,-1!==t){const h=I.i.Hr[t];if(n.Al+=i,h.delay)for(;n.Al>h.delay[n.Il];)n.Al-=h.delay[n.Il]+1,n.Il++,n.Il>=h.gl&&(n.Il-=h._l,(n.Il<0||n.Il>=h.gl)&&(n.Il=0)),s=!0}}}return s};Cl=(t,i,s,n,r=!1)=>{if(0!==t.type||!t.yl||t.hide&&this.wh!==t.id&&this.yh!==t.id&&this.mh!==t.id)return;const l=y.i.left,o=y.i.top,a=y.i.right,c=y.i.bottom;y.i.El(i,s,i+t.width,s+t.height);const f=t.yl.length;for(let l=0;l<f;l++){if(!t.Tl||!t.bl)continue;let o=t.Tl[l]+i,a=t.bl[l]+s-n;const c=h.i.Hr[t.yl[l]];if(o+=c.x,a+=c.y,r&&y.i.vl(o,a,c.width,c.height,p.i.Ol),c.Ll>0&&this.Sl(c),c.type===h.i.kl)c.Rl>c.scroll-c.height&&(c.Rl=c.scroll-c.height),c.Rl<0&&(c.Rl=0),this.Cl(c,o,a,c.Rl,r),c.scroll>c.height&&this.ll(o+c.width,a,c.Rl,c.scroll,c.height);else if(c.type===h.i.Ml){let t=0;for(let i=0;i<c.height;i++)for(let s=0;s<c.width;s++){if(!(c.xl&&c.Nl&&c.Pl&&c.Dl))continue;let h=o+s*(c.Fl+32),e=a+i*(c.Ul+32);if(t<20&&(h+=c.xl[t],e+=c.Nl[t]),c.Pl[t]>0){let i=0,s=0;const n=c.Pl[t]-1;if(h>=-32&&h<=512&&e>=-32&&e<=334||0!==this.Ih&&this.Ah===t){const r=m.i.Bl(n,c.Dl[t]);if(0!==this.Ih&&this.Ah===t&&this.ph===c.id?(i=this.Gl-this.gh,s=this.Hl-this._h,i<5&&i>-5&&(i=0),s<5&&s>-5&&(s=0),this.Ch<5&&(i=0,s=0),r.Wl(128,h+i,e+s)):0!==this.kh&&this.Rh===t&&this.Mh===c.id?r.Wl(128,h,e):r.draw(h,e),33===r.Zl||1!==c.Dl[t]){const n=c.Dl[t];this.Mt?.Yl(h+i+1,e+10+s,this.Vl(n),p.i.zl),this.Mt?.Yl(h+i,e+9+s,this.Vl(n),p.i.Xl)}}}else if(c.jl&&t<20){const i=c.jl[t];i?.draw(h,e)}t++}}else if(c.type===h.i.ql)c.fill?y.i.fillRect(o,a,c.width,c.height,c.$l):y.i.vl(o,a,c.width,c.height,c.$l);else if(c.type===h.i.Kl){const t=c.font;let i=c.$l,s=c.text;if(this.mh!==c.id&&this.yh!==c.id&&this.wh!==c.id||0===c.Jl||(i=c.Jl),this.hl(c)&&(i=c.Ql,c.io&&c.io.length>0&&(s=c.io)),c.so===h.i.ho&&this.Nh&&(s='Please wait...',i=c.$l),!t||!s)continue;for(let h=a+t.height;s.length>0;h+=t.height){if(-1!==s.indexOf('%')){for(;;){const t=s.indexOf('%1');if(-1===t)break;s=s.substring(0,t)+this.eo(this.nl(c,0))+s.substring(t+2)}for(;;){const t=s.indexOf('%2');if(-1===t)break;s=s.substring(0,t)+this.eo(this.nl(c,1))+s.substring(t+2)}for(;;){const t=s.indexOf('%3');if(-1===t)break;s=s.substring(0,t)+this.eo(this.nl(c,2))+s.substring(t+2)}for(;;){const t=s.indexOf('%4');if(-1===t)break;s=s.substring(0,t)+this.eo(this.nl(c,3))+s.substring(t+2)}for(;;){const t=s.indexOf('%5');if(-1===t)break;s=s.substring(0,t)+this.eo(this.nl(c,4))+s.substring(t+2)}}const e=s.indexOf('\\n');let n;-1!==e?(n=s.substring(0,e),s=s.substring(e+2)):(n=s,s=''),c.no?t.ro(o+(c.width/2|0),h,n,i,c.lo):t.oo(o,h,n,i,c.lo)}}else if(c.type===h.i.ao){let t;t=this.hl(c)?c.co:c.fo,t?.draw(o,a)}else if(c.type===h.i.uo){const t=e.i.do,i=e.i.wo;e.i.do=o+(c.width/2|0),e.i.wo=a+(c.height/2|0);const s=e.i.sin[c.yo]*c.zoom>>16,h=e.i.cos[c.yo]*c.zoom>>16,n=this.hl(c);let r;r=n?c.pl:c.ml;let l=null;if(-1===r)l=c.mo(-1,-1,n);else{const t=I.i.Hr[r];t.frames&&t.po&&(l=c.mo(t.frames[c.Il],t.po[c.Il],n))}l&&l.Ao(0,c.Io,0,c.yo,0,s,h),e.i.do=t,e.i.wo=i}else if(c.type===h.i._o){const t=c.font;if(!t||!c.Pl||!c.Dl)continue;let i=0;for(let s=0;s<c.height;s++)for(let h=0;h<c.width;h++){if(c.Pl[i]>0){const e=m.i.get(c.Pl[i]-1);let n=e.name;if((e.Co||1!==c.Dl[i])&&(n=n+' x'+this.Eo(c.Dl[i])),!n)continue;const r=o+h*(c.Fl+115),l=a+s*(c.Ul+12);c.no?t.ro(r+(c.width/2|0),l,n,c.$l,c.lo):t.oo(r,l,n,c.$l,c.lo)}i++}}}y.i.El(l,o,a,c)};Sl=t=>{let i=t.Ll;if(i>=h.i.To&&i<=h.i.bo)i--,i>=this.er?(t.text='',t.so=0):(t.text=this.pr[i],t.so=1);else if(i>=h.i.vo&&i<=h.i.Oo)i-=h.i.vo,i>=this.er?(t.text='',t.so=0):(0===this.Ir[i]?t.text='@red@Offline':this.Ir[i]===M.l?t.text='@gre@World-'+(this.Ir[i]-9):t.text='@yel@World-'+(this.Ir[i]-9),t.so=1);else if(i===h.i.Lo)t.scroll=15*this.er+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i>=h.i.So&&i<=h.i.ko)i-=h.i.So,i>=this.ks?(t.text='',t.so=0):(t.text=g.i.Ro(g.i.Mo(this.Rs[i])),t.so=1);else if(i===h.i.xo)t.scroll=15*this.ks+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i===h.i.No){if(t.yo=150,t.Io=2047&(256*Math.sin(this.$/40)|0),this.ir){this.ir=!1;const i=new d.to(7,null);let s=0;for(let t=0;t<7;t++){const h=this.sr[t];h>=0&&(i[s++]=_.i.Hr[h].mo())}const h=A.i.Po(i,s);for(let t=0;t<5;t++)0!==this.hr[t]&&(h.Do(u.i.Fo[t][0],u.i.Fo[t][this.hr[t]]),1===t&&h.Do(u.i.Uo[0],u.i.Uo[this.hr[t]]));if(this.Vn){const i=I.i.Hr[this.Vn.Bo].frames;i&&(h.Go(),h.Ho(i[0]),h.Wo(64,850,-30,-50,-30,!0),t.model=h)}}}else if(i===h.i.Zo)this.ts||(this.ts=t.fo,this.ss=t.co),this.tr?t.fo=this.ss:t.fo=this.ts;else if(i===h.i.Yo)this.ts||(this.ts=t.fo,this.ss=t.co),this.tr?t.fo=this.ts:t.fo=this.ss;else if(i===h.i.Vo)t.text=this.qh,this.$%20<10?t.text=t.text+'|':t.text=t.text+' ';else if(i===h.i.zo)this.Qn?this.$h?(t.$l=p.i.RED,t.text='Moderator option: Mute player for 48 hours: <ON>'):(t.$l=p.i.Ol,t.text='Moderator option: Mute player for 48 hours: <OFF>'):t.text='';else if(i===h.i.Xo||i===h.i.jo)if(0===this.Jh)t.text='';else{let i;i=0===this.Qh?'earlier today':1===this.Qh?'yesterday':this.Qh+' days ago',t.text='You last logged in '+i+' from: '+g.i.qo(this.Jh)}else if(i===h.i.$o)0===this.ie&&(t.text='0 unread messages',t.$l=p.i.Xl),1===this.ie&&(t.text='1 unread message',t.$l=p.i.GREEN),this.ie>1&&(t.text=this.ie+' unread messages',t.$l=p.i.GREEN);else if(i===h.i.Ko)if(201===this.te)t.text='';else if(200===this.te)t.text='You have not yet set any password recovery questions.';else{let i;i=0===this.te?'Earlier today':1===this.te?'Yesterday':this.te+' days ago',t.text=i+' you changed your recovery questions'}else i===h.i.Jo?201===this.te?t.text='':200===this.te?t.text='We strongly recommend you do so now to secure your account.':t.text='If you do not remember making this change then cancel it immediately':i===h.i.Qo&&(201===this.te?t.text='':(this.te,t.text="Do this from the 'account management' area on our front webpage"))};nl=(t,i)=>{if(!t.scripts||i>=t.scripts.length)return-2;try{const s=t.scripts[i];if(!s)return-1;let e=0,n=0;for(;;){const t=s[n++];if(0===t)return e;if(1===t)e+=this.Hs[s[n++]];else if(2===t)e+=this.Ws[s[n++]];else if(3===t)e+=this.Gs[s[n++]];else if(4===t){const t=h.i.Hr[s[n++]],i=s[n++]+1;if(t.Pl&&t.Dl)for(let s=0;s<t.Pl.length;s++)t.Pl[s]===i&&(e+=t.Dl[s]);else e+=0}else if(5===t)e+=this.Ph[s[n++]];else if(6===t)e+=this.Zs[this.Ws[s[n++]]-1];else if(7===t)e+=100*this.Ph[s[n++]]/46875|0;else if(8===t)e+=this.Vn?.ta||0;else if(9===t)for(let t=0;t<19;t++)18===t&&(t=20),e+=this.Ws[t];else if(10===t){const t=h.i.Hr[s[n++]],i=s[n++]+1;for(let s=0;s<t.Pl.length;s++)if(t.Pl[s]===i){e+=999999999;break}}else if(11===t)e+=this.zn;else if(12===t)e+=this.qn;else if(13===t){const t=this.Ph[s[n++]];e+=0==(t&1<<s[n++])?0:1}}}catch(t){return-1}};eo=t=>t<999999999?String(t):'*';Eo=t=>{let i=String(t);for(let t=i.length-3;t>0;t-=3)i=i.substring(0,t)+','+i.substring(t);return i.length>8?i='@gre@'+i.substring(0,i.length-8)+' million @whi@('+i+')':i.length>4&&(i='@cya@'+i.substring(0,i.length-4)+'K @whi@('+i+')'),' '+i};Vl=t=>t<1e5?String(t):t<1e7?(t/1e3|0)+'K':(t/1e6|0)+'M'}},1803:(t,i,s)=>{s.d(i,{ia:()=>r});var h=s(1995),e=s(3099),n=s(1519);async function r(){const t=window.location.hostname,i=window.location.protocol.startsWith('https');0===h.i.getParameter('world').length&&h.i.setParameter('world','1'),0===h.i.getParameter('detail').length&&h.i.setParameter('detail','high'),0===h.i.getParameter('method').length&&h.i.setParameter('method','0'),'localhost'===t&&'0'===h.i.getParameter('world')?(e.t.p='http://localhost',e.t.A='http://localhost',e.t.o=0):await async function(t){const i=await l(t,parseInt(h.i.getParameter('world'),10)),s=new URL(i.address);e.t.l=10+i.id-1,e.t.p=`${s.protocol}//${s.hostname}`,e.t.A=`${s.protocol}//${s.hostname}:${s.port}`,t||(e.t.p=e.t.p.replace('https:','http:'));e.t.o=i.o,e.t.u=!0===i?.u}(i),'low'===h.i.getParameter('detail')?e.t.W():e.t.H()}async function l(t,i,s=0){if(s>=10)throw new Error('could not find world to connect!');const h=t?'https:':'http:';let e;try{e=JSON.parse(await(0,n.sa)(`${h}//2004scape.org/api/v1/worldlist`))}catch(h){return await(0,n.qr)(1e3),l(t,i,++s)}const r=e.find((t=>t.id===i));return r||l(t,i,10)}},1979:(t,i,s)=>{s.a(t,(async(t,i)=>{try{var h=s(8067),e=s(7958),n=s(1840),r=s(2441),l=s(8809),o=s(551),a=s(1089),c=s(2790),f=s(651),u=s(2991),d=s(8078),w=s(664),y=s(6542),m=s(4628),p=s(9178),A=s(312),I=s(2383),g=s(1812),_=s(741),C=s(7576),E=s(8432),T=s(9782),b=s(9995),v=s(9897),O=s(6054),L=s(6970),S=(s(1527),s(5810)),k=s(9080),R=s(8934),M=s(6884),x=s(7221),N=s(3909),P=s(3714),D=s(1908),F=s(5534),U=s(6150),B=s(7396),G=s(3693),H=s(8603),W=s(4191),Z=s(1353),Y=s(7973),V=s(682),z=s(1810),X=s(5659),j=s(3584),q=s(1519),$=s(9345),K=s(3099),J=s(2157),Q=s(8762),tt=s(8056),it=s(1803);class t extends K.t{load=async()=>{if(this.V)this.X=!0;else{this.V=!0;try{await this.Xr(10,'Connecting to fileserver'),await S.i.load(await(await fetch('bz2.wasm')).arrayBuffer()),this.db=new E.i(await E.i.openDatabase());const t=new I.i(new Uint8Array(await(0,q.jr)(`${K.t.A}/crc`)));for(let i=0;i<9;i++)this.J[i]=t.Jr;K.t.m||await this.Kr('scape_main',12345678,4e4);const i=await this.Yr('title','title screen',this.J[1],10);this.dt=i,this.Mt=m.i.ha(i,'p11'),this.xt=m.i.ha(i,'p12'),this.Nt=m.i.ha(i,'b12'),this.Pt=m.i.ha(i,'q8'),await this.ea(),this.na();const s=await this.Yr('config','config',this.J[2],15),u=await this.Yr('interface','interface',this.J[3],20),A=await this.Yr('media','2d graphics',this.J[4],30),g=await this.Yr('models','3d graphics',this.J[5],40),_=await this.Yr('textures','textures',this.J[6],60),C=await this.Yr('wordenc','chat system',this.J[7],65),T=await this.Yr('sounds','sound effects',this.J[8],70);this.rn=new $.ra(G.i.qe,G.i.an,G.i.an),this.nn=new $.la(G.i.qe,G.i.an+1,G.i.an+1),this.nn&&(this.ne=new x.i(this.nn,G.i.an,G.i.qe,G.i.an));for(let t=0;t<G.i.qe;t++)this.je[t]=new G.i;this.ki=new y.i(512,512),await this.Xr(75,'Unpacking media'),this.Ei=w.i.ha(A,'invback',0),this.Ti=w.i.ha(A,'chatback',0),this.bi=w.i.ha(A,'mapback',0),this.vi=w.i.ha(A,'backbase1',0),this.Oi=w.i.ha(A,'backbase2',0),this.Li=w.i.ha(A,'backhmid1',0);for(let t=0;t<13;t++)this.Si[t]=w.i.ha(A,'sideicons',t);this.Ri=y.i.ha(A,'compass',0);try{for(let t=0;t<50;t++)this.Mi[t]=w.i.ha(A,'mapscene',t)}catch(t){}try{for(let t=0;t<50;t++)this.xi[t]=y.i.ha(A,'mapfunction',t)}catch(t){}try{for(let t=0;t<20;t++)this.Ni[t]=y.i.ha(A,'hitmarks',t)}catch(t){}try{for(let t=0;t<20;t++)this.Pi[t]=y.i.ha(A,'headicons',t)}catch(t){}this.Di=y.i.ha(A,'mapflag',0);for(let t=0;t<8;t++)this.Fi[t]=y.i.ha(A,'cross',t);this.Ui=y.i.ha(A,'mapdots',0),this.Bi=y.i.ha(A,'mapdots',1),this.Gi=y.i.ha(A,'mapdots',2),this.Hi=y.i.ha(A,'mapdots',3),this.Wi=w.i.ha(A,'scrollbar',0),this.Zi=w.i.ha(A,'scrollbar',1),this.Yi=w.i.ha(A,'redstone1',0),this.Vi=w.i.ha(A,'redstone2',0),this.zi=w.i.ha(A,'redstone3',0),this.Xi=w.i.ha(A,'redstone1',0),this.Xi?.oa(),this.ji=w.i.ha(A,'redstone2',0),this.ji?.oa(),this.qi=w.i.ha(A,'redstone1',0),this.qi?.aa(),this.$i=w.i.ha(A,'redstone2',0),this.$i?.aa(),this.Ki=w.i.ha(A,'redstone3',0),this.Ki?.aa(),this.Ji=w.i.ha(A,'redstone1',0),this.Ji?.oa(),this.Ji?.aa(),this.Qi=w.i.ha(A,'redstone2',0),this.Qi?.oa(),this.Qi?.aa();const b=y.i.ha(A,'backleft1',0);this.ri=new f.i(b.width,b.height),b.ca(0,0);const O=y.i.ha(A,'backleft2',0);this.li=new f.i(O.width,O.height),O.ca(0,0);const k=y.i.ha(A,'backright1',0);this.oi=new f.i(k.width,k.height),k.ca(0,0);const R=y.i.ha(A,'backright2',0);this.ai=new f.i(R.width,R.height),R.ca(0,0);const M=y.i.ha(A,'backtop1',0);this.ci=new f.i(M.width,M.height),M.ca(0,0);const N=y.i.ha(A,'backtop2',0);this.fi=new f.i(N.width,N.height),N.ca(0,0);const P=y.i.ha(A,'backvmid1',0);this.ui=new f.i(P.width,P.height),P.ca(0,0);const D=y.i.ha(A,'backvmid2',0);this.di=new f.i(D.width,D.height),D.ca(0,0);const F=y.i.ha(A,'backvmid3',0);this.wi=new f.i(F.width,F.height),F.ca(0,0);const U=y.i.ha(A,'backhmid2',0);this.yi=new f.i(U.width,U.height),U.ca(0,0);const B=(21*Math.random()|0)-10,H=(21*Math.random()|0)-10,W=(21*Math.random()|0)-10,Z=(41*Math.random()|0)-20;for(let t=0;t<50;t++)this.xi[t]&&this.xi[t]?.translate(B+Z,H+Z,W+Z),this.Mi[t]&&this.Mi[t]?.translate(B+Z,H+Z,W+Z);await this.Xr(80,'Unpacking textures'),d.i.fa(_),d.i.ua(.8),d.i.da(20),await this.Xr(83,'Unpacking models'),p.i.wa(g),J.i.wa(g),Q.i.wa(g),await this.Xr(86,'Unpacking config'),h.i.wa(s),e.i.wa(s),tt.i.wa(s),n.i.wa(s,K.t.u),r.i.wa(s),l.i.wa(s),o.i.wa(s),a.i.wa(s),K.t.m||(await this.Xr(90,'Unpacking sounds'),L.i.wa(T)),await this.Xr(92,'Unpacking interfaces'),c.i.wa(u,A,[this.Mt,this.xt,this.Nt,this.Pt]),await this.Xr(97,'Preparing game engine');for(let t=0;t<33;t++){let i=999,s=0;for(let h=0;h<35;h++)if(0===this.bi.ya[h+t*this.bi.width])999===i&&(i=h);else if(999!==i){s=h;break}this.Ii[t]=i,this.gi[t]=s-i}for(let t=9;t<160;t++){let i=999,s=0;for(let h=10;h<168;h++)if(0===this.bi.ya[h+t*this.bi.width]&&(h>34||t>34))999===i&&(i=h);else if(999!==i){s=h;break}this._i[t-9]=i-21,this.Ci[t-9]=s-i}d.i.ma(479,96),this.mi=d.i.pa,d.i.ma(190,261),this.pi=d.i.pa,d.i.ma(512,334),this.Ai=d.i.pa;const Y=new Int32Array(9);for(let t=0;t<9;t++){const i=32*t+128+15,s=3*i+600,h=d.i.sin[i];Y[t]=s*h>>16}x.i.init(512,334,500,800,Y),v.i.wa(C),this.Aa()}catch(t){console.error(t),this.j=!0}}};update=async()=>{this.X||this.j||this.q||(this.$++,this.K?await this.Ia():await this.ga())};draw=async()=>{this.X||this.j||this.q?this.tl():(this.K?this._a():await this.Ca(),this.cs=0)};refresh=()=>{this.wt=!0};Xr=async(t,i)=>{if(console.log(`${t}%: ${i}`),await this.Ea(),!this.dt)return void await super.Xr(t,i);this._t?.bind();this.Nt?.Ta(180,54,'RuneScape is loading - please wait...',A.i.Ol);u.i.vl(28,62,304,34,A.i.ba),u.i.vl(29,63,302,32,A.i.zl),u.i.fillRect(30,64,3*t,30,A.i.ba),u.i.fillRect(30+3*t,64,300-3*t,30,A.i.zl),this.Nt?.Ta(180,85,i,A.i.Ol),this._t?.draw(214,186),this.wt&&(this.wt=!1,this.Ft||(this.Ct?.draw(0,0),this.Et?.draw(661,0)),this.It?.draw(128,0),this.gt?.draw(214,386),this.Tt?.draw(0,265),this.bt?.draw(574,265),this.vt?.draw(128,186),this.Ot?.draw(574,186)),await(0,q.qr)(5)};va=()=>{this.Ft&&(this.Oa(),this.Oa(),this.La())};Ea=async()=>{this.It||(this.Zr=null,this.si=null,this.ti=null,this.Qt=null,this.ii=null,this.hi=null,this.ei=null,this.ni=null,this.Ct=new f.i(128,265),u.i.clear(),this.Et=new f.i(128,265),u.i.clear(),this.It=new f.i(533,186),u.i.clear(),this.gt=new f.i(360,146),u.i.clear(),this._t=new f.i(360,200),u.i.clear(),this.Tt=new f.i(214,267),u.i.clear(),this.bt=new f.i(215,267),u.i.clear(),this.vt=new f.i(86,79),u.i.clear(),this.Ot=new f.i(87,79),u.i.clear(),this.dt&&(await this.ea(),this.na()),this.wt=!0)};ea=async()=>{if(!this.dt)return;const t=await y.i.Sa(this.dt,'title');this.Ct?.bind(),t.ca(0,0),this.Et?.bind(),t.ca(-661,0),this.It?.bind(),t.ca(-128,0),this.gt?.bind(),t.ca(-214,-386),this._t?.bind(),t.ca(-214,-186),this.Tt?.bind(),t.ca(0,-265),this.bt?.bind(),t.ca(-128,-186),this.vt?.bind(),t.ca(-128,-186),this.Ot?.bind(),t.ca(-574,-186),t.oa(),this.Ct?.bind(),t.ca(394,0),this.Et?.bind(),t.ca(-267,0),this.It?.bind(),t.ca(266,0),this.gt?.bind(),t.ca(180,-386),this._t?.bind(),t.ca(180,-186),this.Tt?.bind(),t.ca(394,-265),this.bt?.bind(),t.ca(-180,-265),this.vt?.bind(),t.ca(212,-186),this.Ot?.bind(),t.ca(-180,-186);const i=y.i.ha(this.dt,'logo');this.It?.bind(),i.draw((this.width/2|0)-(i.width/2|0)-128,18)};ka=t=>{if(!this.Ht||!this.Gt)return;this.Ht.fill(0);for(let t=0;t<5e3;t++){const t=128*Math.random()*256|0;this.Ht[t]=256*Math.random()|0}for(let t=0;t<20;t++){for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Gt[s]=(this.Ht[s-1]+this.Ht[s+1]+this.Ht[s-128]+this.Ht[s+128])/4|0}const t=this.Ht;this.Ht=this.Gt,this.Gt=t}if(t){let i=0;for(let s=0;s<t.height;s++)for(let h=0;h<t.width;h++)if(0!==t.ya[i++]){const i=h+t.Ra+16+(s+t.Ma+16<<7);this.Ht[i]=0}}};na=()=>{if(this.dt){this.Lt=w.i.ha(this.dt,'titlebox'),this.St=w.i.ha(this.dt,'titlebutton');for(let t=0;t<12;t++)this.Dt[t]=w.i.ha(this.dt,'runes',t);this.Ut=new y.i(128,265),this.Bt=new y.i(128,265),this.Ct&&(0,q.xa)(this.Ct.ya,0,this.Ut.ya,0,33920),this.Et&&(0,q.xa)(this.Et.ya,0,this.Bt.ya,0,33920),this.Vt=new Int32Array(256);for(let t=0;t<64;t++)this.Vt[t]=262144*t;for(let t=0;t<64;t++)this.Vt[t+64]=1024*t+A.i.RED;for(let t=0;t<64;t++)this.Vt[t+128]=4*t+A.i.Xl;for(let t=0;t<64;t++)this.Vt[t+192]=A.i.Ol;this.zt=new Int32Array(256);for(let t=0;t<64;t++)this.zt[t]=1024*t;for(let t=0;t<64;t++)this.zt[t+64]=4*t+A.i.GREEN;for(let t=0;t<64;t++)this.zt[t+128]=262144*t+A.i.Na;for(let t=0;t<64;t++)this.zt[t+192]=A.i.Ol;this.Xt=new Int32Array(256);for(let t=0;t<64;t++)this.Xt[t]=4*t;for(let t=0;t<64;t++)this.Xt[t+64]=262144*t+A.i.BLUE;for(let t=0;t<64;t++)this.Xt[t+128]=1024*t+A.i.Pa;for(let t=0;t<64;t++)this.Xt[t+192]=A.i.Ol;this.Yt=new Int32Array(256),this.Ht=new Int32Array(32768),this.Gt=new Int32Array(32768),this.ka(null),this.Wt=new Int32Array(32768),this.Zt=new Int32Array(32768),this.Xr(10,'Connecting to fileserver').then((()=>{this.Ft||(this.Ft=!0,this.Jt=setInterval(this.va,35))}))}};ga=async()=>{if(0===this.yt){let t=(this.width/2|0)-80,i=20+(this.height/2|0);i+=20,1===this.Da&&this.Fa>=t-75&&this.Fa<=t+75&&this.Ua>=i-20&&this.Ua<=i+20&&(this.yt=3,this.At=0),t=80+(this.width/2|0),1===this.Da&&this.Fa>=t-75&&this.Fa<=t+75&&this.Ua>=i-20&&this.Ua<=i+20&&(this.kt='',this.Rt='Enter your username & password.',this.yt=2,this.At=0)}else if(2===this.yt){let t=(this.height/2|0)-40;t+=30,t+=25,1===this.Da&&this.Ua>=t-15&&this.Ua<t&&(this.At=0),t+=15,1===this.Da&&this.Ua>=t-15&&this.Ua<t&&(this.At=1);let i=(this.width/2|0)-80,s=50+(this.height/2|0);for(s+=20,1===this.Da&&this.Fa>=i-75&&this.Fa<=i+75&&this.Ua>=s-20&&this.Ua<=s+20&&await this.Ba(this.username,this.password,!1),i=80+(this.width/2|0),1===this.Da&&this.Fa>=i-75&&this.Fa<=i+75&&this.Ua>=s-20&&this.Ua<=s+20&&(this.yt=0,this.username='',this.password='');;){const t=this.Ga();if(-1===t)return;let i=!1;for(let s=0;s<m.i.Ha.length;s++)if(String.fromCharCode(t)===m.i.Ha.charAt(s)){i=!0;break}0===this.At?(8===t&&this.username.length>0&&(this.username=this.username.substring(0,this.username.length-1)),9!==t&&10!==t&&13!==t||(this.At=1),i&&(this.username=this.username+String.fromCharCode(t)),this.username.length>12&&(this.username=this.username.substring(0,12))):1===this.At&&(8===t&&this.password.length>0&&(this.password=this.password.substring(0,this.password.length-1)),9!==t&&10!==t&&13!==t||(this.At=0),i&&(this.password=this.password+String.fromCharCode(t)),this.password.length>20&&(this.password=this.password.substring(0,20)))}}else if(3===this.yt){const t=this.width/2|0;let i=50+(this.height/2|0);i+=20,1===this.Da&&this.Fa>=t-75&&this.Fa<=t+75&&this.Ua>=i-20&&this.Ua<=i+20&&(this.yt=0)}};Ca=async()=>{await this.Ea(),this._t?.bind(),this.Lt?.draw(0,0);if(0===this.yt){let t=180,i=80;this.Nt?.ro(t,i,'Welcome to RuneScape',A.i.Xl,!0),t=100,i=120,this.St?.draw(t-73,i-20),this.Nt?.ro(t,i+5,'New user',A.i.Ol,!0),t=260,this.St?.draw(t-73,i-20),this.Nt?.ro(t,i+5,'Existing User',A.i.Ol,!0)}else if(2===this.yt){let t=100,i=60;this.kt.length>0?(this.Nt?.ro(180,i-15,this.kt,A.i.Xl,!0),this.Nt?.ro(180,i,this.Rt,A.i.Xl,!0),i+=30):(this.Nt?.ro(180,i-7,this.Rt,A.i.Xl,!0),i+=30),this.Nt?.oo(90,i,`Username: ${this.username}${0===this.At&&this.$%40<20?'@yel@|':''}`,A.i.Ol,!0),i+=15,this.Nt?.oo(92,i,`Password: ${R.i.Wa(this.password)}${1===this.At&&this.$%40<20?'@yel@|':''}`,A.i.Ol,!0),i=150,this.St?.draw(t-73,i-20),this.Nt?.ro(t,i+5,'Login',A.i.Ol,!0),t=260,this.St?.draw(t-73,i-20),this.Nt?.ro(t,i+5,'Cancel',A.i.Ol,!0)}else if(3===this.yt){this.Nt?.ro(180,40,'Create a free account',A.i.Xl,!0);const t=180;let i=65;this.Nt?.ro(180,i,'To create a new account you need to',A.i.Ol,!0),i+=15,this.Nt?.ro(180,i,'go back to the main RuneScape webpage',A.i.Ol,!0),i+=15,this.Nt?.ro(180,i,"and choose the red 'create account'",A.i.Ol,!0),i+=15,this.Nt?.ro(180,i,'button at the top right of that page.',A.i.Ol,!0),i=150,this.St?.draw(t-73,i-20),this.Nt?.ro(t,i+5,'Cancel',A.i.Ol,!0)}this._t?.draw(214,186),this.wt&&(this.wt=!1,this.It?.draw(128,0),this.gt?.draw(214,386),this.Tt?.draw(0,265),this.bt?.draw(574,265),this.vt?.draw(128,186),this.Ot?.draw(574,186))};Ba=async(t,i,s)=>{try{s||(this.kt='',this.Rt='Connecting to server...',await this.Ca()),this.stream=new g.i(await g.i.Za({host:K.t.p,port:43594+K.t.o})),await(this.stream?.Ya(this.in.data,0,8)),this.in.Va=0,this.ht=this.in.za;const h=new Int32Array([Math.floor(99999999*Math.random()),Math.floor(99999999*Math.random()),Number(this.ht>>32n),Number(this.ht&BigInt(4294967295))]);this.it.Va=0,this.it.p1(10),this.it.p4(h[0]),this.it.p4(h[1]),this.it.p4(h[2]),this.it.p4(h[3]),this.it.p4(0),this.it.Xa(t),this.it.Xa(i),this.it.ja(K.t.C,K.t.exponent),this.st.Va=0,s?this.st.p1(18):this.st.p1(16),this.st.p1(this.it.Va+36+1+1),this.st.p1(K.t.h),this.st.p1(K.t.m?1:0);for(let t=0;t<9;t++)this.st.p4(this.J[t]);this.st.qa(this.it.data,this.it.Va,0),this.it.random=new C.i(h);for(let t=0;t<4;t++)h[t]+=50;this.lt=new C.i(h),this.stream?.write(this.st.data,this.st.Va,0);const e=await this.stream.read();if(1===e)return await(0,q.qr)(2e3),void await this.Ba(t,i,s);if(2===e||18===e){this.Qn=18===e,M.i.$a(),this.K=!0,this.it.Va=0,this.in.Va=0,this.ot=-1,this.ct=-1,this.ft=-1,this.ut=-1,this.packetSize=0,this.et=0,this.rt=0,this.nt=0,this.Ms=0,this.Es=0,this.ps=!1,this.Ka=0;for(let t=0;t<100;t++)this.rh[t]=null;this.Th=0,this.Fh=0,this.re=0,this._r=0,this.de=(100*Math.random()|0)-50,this.we=(110*Math.random()|0)-55,this.ye=(80*Math.random()|0)-40,this.Re=(120*Math.random()|0)-60,this.Me=(30*Math.random()|0)-20,this.Qe=(20*Math.random()|0)-10&2047,this.Pe=-1,this.ae=0,this.ce=0,this.En=0,this.Rn=0;for(let t=0;t<this.Z;t++)this.Cn[t]=null,this.Sn[t]=null;for(let t=0;t<8192;t++)this.kn[t]=null;this.Vn=this.Cn[this.Y]=new W.i,this.xn.clear(),this.Nn.clear(),this.Dn.clear();for(let t=0;t<G.i.qe;t++)for(let i=0;i<G.i.an;i++)for(let s=0;s<G.i.an;s++)this.Fn[t][i][s]=null;this.Bn=new k.i,this.er=0,this.nh=-1,this.vs=-1,this.os=-1,this.bs=-1,this.Nh=!1,this.zs=3,this.eh=!1,this.ps=!1,this.Qs=!1,this.Ys=null,this.Xn=0,this.Vs=-1,this.tr=!0,this.Ja();for(let t=0;t<5;t++)this.hr[t]=0;return K.t.S=0,K.t.P=0,K.t.M=0,K.t.k=0,K.t.L=0,K.t.N=0,K.t.B=0,K.t.F=0,K.t.D=0,void this.Qa()}if(3===e)return this.kt='',void(this.Rt='Invalid username or password.');if(4===e)return this.kt='Your account has been disabled.',void(this.Rt='Please check your message-centre for details.');if(5===e)return this.kt='Your account is already logged in.',void(this.Rt='Try again in 60 secs...');if(6===e)return this.kt='RuneScape has been updated!',void(this.Rt='Please reload this page.');if(7===e)return this.kt='This world is full.',void(this.Rt='Please use a different world.');if(8===e)return this.kt='Unable to connect.',void(this.Rt='Login server offline.');if(9===e)return this.kt='Login limit exceeded.',void(this.Rt='Too many connections from your address.');if(10===e)return this.kt='Unable to connect.',void(this.Rt='Bad session id.');if(11===e)return this.Rt='Login server rejected session.',void(this.Rt='Please try again.');if(12===e)return this.kt='You need a members account to login to this world.',void(this.Rt='Please subscribe, or use a different world.');if(13===e)return this.kt='Could not complete login.',void(this.Rt='Please try using a different world.');if(14===e)return this.kt='The server is being updated.',void(this.Rt='Please wait 1 minute and try again.');if(15===e)return this.K=!0,this.it.Va=0,this.in.Va=0,this.ot=-1,this.ct=-1,this.ft=-1,this.ut=-1,this.packetSize=0,this.et=0,this.rt=0,this.Es=0,void(this.ps=!1);if(16===e)return this.kt='Login attempts exceeded.',void(this.Rt='Please wait 1 minute and try again.');17===e&&(this.kt='You are standing in a members-only area.',this.Rt='To play on this world move to a free area first')}catch(t){console.log(t),this.kt='',this.Rt='Error connecting to server.'}};Ia=async()=>{if(null!==this.Cn){this.rt>1&&this.rt--,this.nt>0&&this.nt--;for(let t=0;t<5&&await this.read();t++);if(this.K){for(let t=0;t<this._r;t++)if(this.br[t]<=0){try{const i=L.i.tc(this.Er[t],this.Tr[t]);if(!i)throw new Error;Date.now()+(i.Va/22|0)>this.kr+(this.Sr/22|0)&&(this.Sr=i.Va,this.kr=Date.now(),this.Or=this.Er[t],this.Lr=this.Tr[t],await(0,j.ic)(i.data.slice(0,i.Va),this.vr))}catch(t){console.error(t)}this._r--;for(let i=t;i<this._r;i++)this.Er[i]=this.Er[i+1],this.Tr[i]=this.Tr[i+1],this.br[i]=this.br[i+1];t--}else this.br[t]--;this.Rr>0&&(this.Rr-=20,this.Rr<0&&(this.Rr=0),0===this.Rr&&this.Mr&&!K.t.m&&this.Nr&&await this.Kr(this.Nr,this.Pr,this.Dr));const t=M.i.flush();if(t&&(this.it.sc(b.i.hc),this.it.p2(t.Va),this.it.qa(t.data,t.Va,0),t.release()),this.et++,this.et>750&&await this.ec(),this.nc(),this.rc(),this.lc(),this.oc(),(1===this.ac[1]||1===this.ac[2]||1===this.ac[3]||1===this.ac[4])&&this.Ke++>5&&(this.Ke=0,this.it.sc(b.i.cc),this.it.p2(this.Je),this.it.p2(this.Qe),this.it.p1(this.Re),this.it.p1(this.Me)),this.le++,0!==this.fs&&(this.us+=20,this.us>=400&&(this.fs=0)),0!==this.kh&&(this.xh++,this.xh>=15&&(2===this.kh&&(this.es=!0),3===this.kh&&(this.ns=!0),this.kh=0)),0!==this.Ih&&(this.Ch++,(this.Gl>this.gh+5||this.Gl<this.gh-5||this.Hl>this._h+5||this.Hl<this._h-5)&&(this.Eh=!0),0===this.fc)){if(2===this.Ih&&(this.es=!0),3===this.Ih&&(this.ns=!0),this.Ih=0,this.Eh&&this.Ch>=5){if(this.zh=-1,this.uc(),this.zh===this.ph&&this.Xh!==this.Ah){const t=c.i.Hr[this.ph];if(t.Pl){const i=t.Pl[this.Xh];t.Pl[this.Xh]=t.Pl[this.Ah],t.Pl[this.Ah]=i}if(t.Dl){const i=t.Dl[this.Xh];t.Dl[this.Xh]=t.Dl[this.Ah],t.Dl[this.Ah]=i}this.it.sc(b.i.dc),this.it.p2(this.ph),this.it.p2(this.Ah),this.it.p2(this.Xh)}}else(1===this.Hh||this.wc(this.Es-1))&&this.Es>2?this.yc():this.Es>0&&await this.mc(this.Es-1);this.xh=10,this.Da=0}if(K.t.T++,K.t.T>127&&(K.t.T=0,this.it.sc(b.i.Ac),this.it.p3(4991788)),-1!==x.i.Ic&&this.Vn){const t=x.i.Ic,i=x.i.gc,s=this._c(this.Vn.Cc[0],this.Vn.Ec[0],t,i,0,0,0,0,0,0,!0);x.i.Ic=-1,s&&(this.ds=this.Fa,this.ws=this.Ua,this.fs=1,this.us=0)}1===this.Da&&this.Ys&&(this.Ys=null,this.ns=!0,this.Da=0),await this.Tc(),this.bc(),this.vc(),this.Oc(),1!==this.fc&&1!==this.Da||this.cs++,2===this.re&&this.Lc(),2===this.re&&this.fe&&this.Sc();for(let t=0;t<5;t++)this.Ie[t]++;if(await this.kc(),this.Ka++,this.Ka>4500&&(this.nt=250,this.Ka-=500,this.it.sc(b.i.Rc)),this.ue++,this.ue>500){this.ue=0;const t=8*Math.random()|0;1==(1&t)&&(this.de+=this.me),2==(2&t)&&(this.we+=this.pe),4==(4&t)&&(this.ye+=this.Ae)}if(this.de<-50&&(this.me=2),this.de>50&&(this.me=-2),this.we<-55&&(this.pe=2),this.we>55&&(this.pe=-2),this.ye<-40&&(this.Ae=1),this.ye>40&&(this.Ae=-1),this.ke++,this.ke>500){this.ke=0;const t=8*Math.random()|0;1==(1&t)&&(this.Re+=this.Ne),2==(2&t)&&(this.Me+=this.xe)}this.Re<-60&&(this.Ne=2),this.Re>60&&(this.Ne=-2),this.Me<-20&&(this.xe=1),this.Me>10&&(this.xe=-1),K.t.v++,K.t.v>110&&(K.t.v=0,this.it.sc(b.i.Mc),this.it.p4(0)),this.$n++,this.$n>50&&this.it.sc(b.i.xc);try{this.stream&&this.it.Va>0&&(this.stream.write(this.it.data,this.it.Va,0),this.it.Va=0,this.$n=0)}catch(t){console.log(t),await this.ec()}}}};_a=()=>{if(null===this.Cn)return;this.wt&&(this.wt=!1,this.ri?.draw(0,11),this.li?.draw(0,375),this.oi?.draw(729,5),this.ai?.draw(752,231),this.ci?.draw(0,0),this.fi?.draw(561,0),this.ui?.draw(520,11),this.di?.draw(520,231),this.wi?.draw(501,375),this.yi?.draw(0,345),this.es=!0,this.ns=!0,this.rs=!0,this.ls=!0,2!==this.re&&(this.ii?.draw(8,11),this.ti?.draw(561,5))),2===this.re&&this.Nc(),this.ps&&1===this.As&&(this.es=!0);let t=!1;if(-1!==this.bs&&(t=this.wl(this.bs,this.le),t&&(this.es=!0)),2===this.kh&&(this.es=!0),2===this.Ih&&(this.es=!0),this.es&&(this.Pc(),this.es=!1),-1===this.vs){this.Os.Rl=this.Ls-this.Ss-77,this.Gl>453&&this.Gl<565&&this.Hl>350&&this.Dc(this.Gl-22,this.Hl-375,this.Ls,77,!1,463,0,this.Os);let t=this.Ls-this.Os.Rl-77;t<0&&(t=0),t>this.Ls-77&&(t=this.Ls-77),this.Ss!==t&&(this.Ss=t,this.ns=!0)}-1!==this.vs&&(t=this.wl(this.vs,this.le),t&&(this.ns=!0)),3===this.kh&&(this.ns=!0),3===this.Ih&&(this.ns=!0),this.Ys&&(this.ns=!0),this.ps&&2===this.As&&(this.ns=!0),this.ns&&(this.Fc(),this.ns=!1),2===this.re&&(this.Uc(),this.ti?.draw(561,5)),-1!==this.Vs&&(this.rs=!0),this.rs&&(-1!==this.Vs&&this.Vs===this.zs&&(this.Vs=-1,this.it.sc(b.i.Bc),this.it.p1(this.zs)),this.rs=!1,this.ni?.bind(),this.Li?.draw(0,0),-1===this.bs&&(-1!==this.Xs[this.zs]&&(0===this.zs?this.Yi?.draw(29,30):1===this.zs?this.Vi?.draw(59,29):2===this.zs?this.Vi?.draw(87,29):3===this.zs?this.zi?.draw(115,29):4===this.zs?this.ji?.draw(156,29):5===this.zs?this.ji?.draw(184,29):6===this.zs&&this.Xi?.draw(212,30)),-1!==this.Xs[0]&&(0!==this.Vs||this.$%20<10)&&this.Si[0]?.draw(35,34),-1!==this.Xs[1]&&(1!==this.Vs||this.$%20<10)&&this.Si[1]?.draw(59,32),-1!==this.Xs[2]&&(2!==this.Vs||this.$%20<10)&&this.Si[2]?.draw(86,32),-1!==this.Xs[3]&&(3!==this.Vs||this.$%20<10)&&this.Si[3]?.draw(121,33),-1!==this.Xs[4]&&(4!==this.Vs||this.$%20<10)&&this.Si[4]?.draw(157,34),-1!==this.Xs[5]&&(5!==this.Vs||this.$%20<10)&&this.Si[5]?.draw(185,32),-1!==this.Xs[6]&&(6!==this.Vs||this.$%20<10)&&this.Si[6]?.draw(212,34)),this.ni?.draw(520,165),this.ei?.bind(),this.Oi?.draw(0,0),-1===this.bs&&(-1!==this.Xs[this.zs]&&(7===this.zs?this.qi?.draw(49,0):8===this.zs?this.$i?.draw(81,0):9===this.zs?this.$i?.draw(108,0):10===this.zs?this.Ki?.draw(136,1):11===this.zs?this.Qi?.draw(178,0):12===this.zs?this.Qi?.draw(205,0):13===this.zs&&this.Ji?.draw(233,0)),-1!==this.Xs[8]&&(8!==this.Vs||this.$%20<10)&&this.Si[7]?.draw(80,2),-1!==this.Xs[9]&&(9!==this.Vs||this.$%20<10)&&this.Si[8]?.draw(107,3),-1!==this.Xs[10]&&(10!==this.Vs||this.$%20<10)&&this.Si[9]?.draw(142,4),-1!==this.Xs[11]&&(11!==this.Vs||this.$%20<10)&&this.Si[10]?.draw(179,2),-1!==this.Xs[12]&&(12!==this.Vs||this.$%20<10)&&this.Si[11]?.draw(206,2),-1!==this.Xs[13]&&(13!==this.Vs||this.$%20<10)&&this.Si[12]?.draw(230,2)),this.ei?.draw(501,492),this.ii?.bind()),this.ls&&(this.ls=!1,this.hi?.bind(),this.vi?.draw(0,0),this.xt?.ro(57,33,'Public chat',A.i.Ol,!0),0===this.js&&this.xt?.ro(57,46,'On',A.i.GREEN,!0),1===this.js&&this.xt?.ro(57,46,'Friends',A.i.Xl,!0),2===this.js&&this.xt?.ro(57,46,'Off',A.i.RED,!0),3===this.js&&this.xt?.ro(57,46,'Hide',A.i.Na,!0),this.xt?.ro(186,33,'Private chat',A.i.Ol,!0),0===this.qs&&this.xt?.ro(186,46,'On',A.i.GREEN,!0),1===this.qs&&this.xt?.ro(186,46,'Friends',A.i.Xl,!0),2===this.qs&&this.xt?.ro(186,46,'Off',A.i.RED,!0),this.xt?.ro(326,33,'Trade/duel',A.i.Ol,!0),0===this.$s&&this.xt?.ro(326,46,'On',A.i.GREEN,!0),1===this.$s&&this.xt?.ro(326,46,'Friends',A.i.Xl,!0),2===this.$s&&this.xt?.ro(326,46,'Off',A.i.RED,!0),this.xt?.ro(462,38,'Report abuse',A.i.Ol,!0),this.hi?.draw(0,471),this.ii?.bind()),this.le=0};Nc=()=>{if(this.oe++,this.Gc(),this.Hc(),this.Wc(),this.Zc(),this.Yc(),!this.fe){let t=this.Je;(this.Se/256|0)>t&&(t=this.Se/256|0),this.ge[4]&&this.Ce[4]+128>t&&(t=this.Ce[4]+128);const i=this.Qe+this.ye&2047;if(this.Vn&&this.Vc(this.hn,this.zc(this.$e,this.Vn.x,this.Vn.z)-50,this.en,i,t,3*t+600),K.t.R++,K.t.R>1802){K.t.R=0,this.it.sc(b.i.Xc),this.it.p1(0);const t=this.it.Va;this.it.p2(29711),this.it.p1(70),this.it.p1(256*Math.random()|0),this.it.p1(242),this.it.p1(186),this.it.p1(39),this.it.p1(61),0==(2*Math.random()|0)&&this.it.p1(13),0==(2*Math.random()|0)&&this.it.p2(57856),this.it.p2(65536*Math.random()|0),this.it.jc(this.it.Va-t)}}let t;t=this.fe?this.qc():this.$c();const i=this.Te,s=this.be,h=this.ve,e=this.Oe,n=this.Le;let r;for(let t=0;t<5;t++)this.ge[t]&&(r=Math.random()*(2*this._e[t]+1)-this._e[t]+Math.sin(this.Ie[t]*(this.Ee[t]/100))*this.Ce[t]|0,0===t&&(this.Te+=r),1===t&&(this.be+=r),2===t&&(this.ve+=r),3===t&&(this.Le=this.Le+r&2047),4===t&&(this.Oe+=r,this.Oe<128&&(this.Oe=128),this.Oe>383&&(this.Oe=383)));r=d.i.Kc,p.i.Jc=!0,p.i.Qc=0,p.i.Gl=this.Gl-8,p.i.Hl=this.Hl-11,u.i.clear(),this.ne?.draw(this.Te,this.be,this.ve,t,this.Le,this.Oe,this.$),this.ne?.tf(),this.if(),this.sf(),K.t.I&&this.hf(),this.ef(r),this.nf(),this.ii?.draw(8,11),this.Te=i,this.be=s,this.ve=h,this.Oe=e,this.Le=n};rf=()=>{e.i.lf?.clear(),e.i.af?.clear(),r.i.Wr?.clear(),n.i.Wr?.clear(),n.i.cf?.clear(),W.i.Wr?.clear(),o.i.Wr?.clear()};ff=(t,i)=>{this.uf(t.x,i,t.z)};uf=(t,i,s)=>{if(t<128||s<128||t>13056||s>13056)return this.cn=-1,void(this.fn=-1);const h=this.zc(this.$e,t,s)-i;this.df(t,h,s)};df=(t,i,s)=>{let h=t-this.Te,e=i-this.be,n=s-this.ve;const r=d.i.sin[this.Oe],l=d.i.cos[this.Oe],o=d.i.sin[this.Le],a=d.i.cos[this.Le];let c=n*o+h*a>>16;n=n*a-h*o>>16,h=c,c=e*l-n*r>>16,n=e*r+n*l>>16,e=c,n>=50?(this.cn=d.i.do+((h<<9)/n|0),this.fn=d.i.wo+((e<<9)/n|0)):(this.cn=-1,this.fn=-1)};if=()=>{this.nr=0;for(let t=-1;t<this.En+this.Rn;t++){let i=null;if(i=-1===t?this.Vn:t<this.En?this.Cn[this.Tn[t]]:this.kn[this.Mn[t-this.En]],i&&i.isVisible()){if(t<this.En){let s=30;const h=i;if(0!==h.wf&&(this.ff(i,i.height+15),this.cn>-1))for(let t=0;t<8;t++)0!=(h.wf&1<<t)&&this.Pi[t]&&(this.Pi[t].draw(this.cn-12,this.fn-s),s-=25);t>=0&&10===this.Ms&&this.Ds===this.Tn[t]&&(this.ff(i,i.height+15),this.cn>-1&&this.Pi[7]&&this.Pi[7].draw(this.cn-12,this.fn-s))}else 1===this.Ms&&this.xs===this.Mn[t-this.En]&&this.$%20<10&&(this.ff(i,i.height+15),this.cn>-1&&this.Pi[2]&&this.Pi[2].draw(this.cn-12,this.fn-28));if(i.yf&&(t>=this.En||0===this.js||3===this.js||1===this.js&&this.mf(i.name))&&(this.ff(i,i.height),this.cn>-1&&this.nr<K.t.rr&&this.Nt&&(this.ur[this.nr]=this.Nt.pf(i.yf)/2|0,this.cr[this.nr]=this.Nt.height,this.lr[this.nr]=this.cn,this.ar[this.nr]=this.fn,this.dr[this.nr]=i.Af,this.wr[this.nr]=i.If,this.yr[this.nr]=i.gf,this.mr[this.nr++]=i.yf,0===this.uh&&1===i.If&&(this.cr[this.nr]+=10,this.ar[this.nr]+=5),0===this.uh&&2===i.If&&(this.ur[this.nr]=60))),i._f>this.$+100&&(this.ff(i,i.height+15),this.cn>-1)){let t=30*i.Cf/i.Ef|0;t>30&&(t=30),u.i.fillRect(this.cn-15,this.fn-3,t,5,A.i.GREEN),u.i.fillRect(this.cn-15+t,this.fn-3,30-t,5,A.i.RED)}i._f>this.$+330&&(this.ff(i,i.height/2|0),this.cn>-1&&this.Ni[i.Tf]&&(this.Ni[i.Tf].draw(this.cn-12,this.fn-12),this.Mt?.Ta(this.cn,this.fn+4,i.bf.toString(),A.i.zl),this.Mt?.Ta(this.cn-1,this.fn+3,i.bf.toString(),A.i.Ol)))}}for(let t=0;t<this.nr;t++){const i=this.lr[t];let s=this.ar[t];const h=this.ur[t],e=this.cr[t];let n=!0;for(;n;){n=!1;for(let r=0;r<t;r++)s+2>this.ar[r]-this.cr[r]&&s-e<this.ar[r]+2&&i-h<this.lr[r]+this.ur[r]&&i+h>this.lr[r]-this.ur[r]&&this.ar[r]-this.cr[r]<s&&(s=this.ar[r]-this.cr[r],n=!0)}this.cn=this.lr[t],this.fn=this.ar[t]=s;const r=this.mr[t];if(0==this.uh){let i=A.i.Xl;if(this.dr[t]<6&&(i=A.i.vf[this.dr[t]]),6==this.dr[t]&&(i=this.oe%20<10?A.i.RED:A.i.Xl),7==this.dr[t]&&(i=this.oe%20<10?A.i.BLUE:A.i.Na),8==this.dr[t]&&(i=this.oe%20<10?45056:8454016),9==this.dr[t]){const s=150-this.yr[t];s<50?i=1280*s+A.i.RED:s<100?i=A.i.Xl-327680*(s-50):s<150&&(i=5*(s-100)+A.i.GREEN)}if(10==this.dr[t]){const s=150-this.yr[t];s<50?i=5*s+A.i.RED:s<100?i=A.i.Pa-327680*(s-50):s<150&&(i=327680*(s-100)+A.i.BLUE-5*(s-100))}if(11==this.dr[t]){const s=150-this.yr[t];s<50?i=A.i.Ol-327685*s:s<100?i=327685*(s-50)+A.i.GREEN:s<150&&(i=A.i.Ol-327680*(s-100))}if(0==this.wr[t]&&(this.Nt?.Ta(this.cn,this.fn+1,r,A.i.zl),this.Nt?.Ta(this.cn,this.fn,r,i)),1==this.wr[t]&&(this.Nt?.Of(this.cn,this.fn+1,r,A.i.zl,this.oe),this.Nt?.Of(this.cn,this.fn,r,i,this.oe)),2==this.wr[t]){const s=this.Nt?.pf(r)??0,h=(150-this.yr[t])*(s+100)/150;u.i.El(334,this.cn+50,0,this.cn-50),this.Nt?.Yl(this.cn+50-h,this.fn+1,r,A.i.zl),this.Nt?.Yl(this.cn+50-h,this.fn,r,i),u.i.Lf()}}else this.Nt?.Ta(this.cn,this.fn+1,r,A.i.zl),this.Nt?.Ta(this.cn,this.fn,r,A.i.Xl)}};sf=()=>{2===this.Ms&&this.Pi[2]&&(this.uf((this.Fs-this.Ge<<7)+this.Ns,2*this.Bs,(this.Us-this.He<<7)+this.Ps),this.cn>-1&&this.$%20<10&&this.Pi[2].draw(this.cn-12,this.fn-28))};hf=()=>{const t=507;let i=20;this.Mt?.Sf(t,i,`FPS: ${this.kf}`,A.i.Xl,!0),i+=13,this.Mt?.Sf(t,i,`Speed: ${this.ms.toFixed(4)} ms`,A.i.Xl,!0),i+=13,this.Mt?.Sf(t,i,`Average: ${this.Rf.toFixed(4)} ms`,A.i.Xl,!0),i+=13,this.Mt?.Sf(t,i,`Slowest: ${this.Mf.toFixed(4)} ms`,A.i.Xl,!0),i+=13,this.Mt?.Sf(t,i,`Occluders: ${x.i.xf}`,A.i.Xl,!0)};nf=()=>{if(this.Nf(),1===this.fs&&this.Fi[this.us/100|0]?.draw(this.ds-8-8,this.ws-8-11),2===this.fs&&this.Fi[4+(this.us/100|0)]?.draw(this.ds-8-8,this.ws-8-11),-1!==this.os&&(this.wl(this.os,this.le),this.Cl(c.i.Hr[this.os],0,0,0)),this.Pf(),this.ps?0===this.As&&this.Df():(this.uc(),this.Ff()),1===this.Xn&&(this.Kn>0||1===this.Jn?this.Pi[1]?.draw(472,258):this.Pi[1]?.draw(472,296)),this.Kn>0&&(this.Pi[0]?.draw(472,296),this.xt?.Ta(484,329,'Level: '+this.Kn,A.i.Xl)),1===this.Jn&&(this.Pi[6]?.draw(472,296),this.xt?.Ta(484,329,'Arena',A.i.Xl)),0!==this.rt){let t=this.rt/50|0;const i=t/60|0;t%=60,t<10?this.xt?.Yl(4,329,'System update in: '+i+':0'+t,A.i.Xl):this.xt?.Yl(4,329,'System update in: '+i+':'+t,A.i.Xl)}};Nf=()=>{if(0===this.fh)return;const t=this.xt;let i=0;0!==this.rt&&(i=1);for(let s=0;s<100;s++){if(!this.rh[s])continue;const h=this.messageType[s];let e;if((3===h||7===h)&&(7===h||0===this.qs||1===this.qs&&this.mf(this.lh[s]))&&(e=329-13*i,t?.Yl(4,e,'From '+this.lh[s]+': '+this.rh[s],A.i.zl),t?.Yl(4,e-1,'From '+this.lh[s]+': '+this.rh[s],A.i.Na),i++,i>=5))return;if(5===h&&this.qs<2&&(e=329-13*i,t?.Yl(4,e,this.rh[s],A.i.zl),t?.Yl(4,e-1,this.rh[s],A.i.Na),i++,i>=5))return;if(6===h&&this.qs<2&&(e=329-13*i,t?.Yl(4,e,'To '+this.lh[s]+': '+this.rh[s],A.i.zl),t?.Yl(4,e-1,'To '+this.lh[s]+': '+this.rh[s],A.i.Na),i++,i>=5))return}};Pf=()=>{if(!this.Vn)return;const t=(this.Vn.x>>7)+this.Ge,i=(this.Vn.z>>7)+this.He;if(this.Kn=t>=2944&&t<3392&&i>=3520&&i<6400?1+((i-3520)/8|0):t>=2944&&t<3392&&i>=9920&&i<12800?1+((i-9920)/8|0):0,this.Jn=0,t>=3328&&t<3392&&i>=3200&&i<3264){const s=63&t,h=63&i;(s>=4&&s<=29&&h>=44&&h<=58||s>=36&&s<=61&&h>=44&&h<=58||s>=4&&s<=29&&h>=25&&h<=39||s>=36&&s<=61&&h>=25&&h<=39||s>=4&&s<=29&&h>=6&&h<=20||s>=36&&s<=61&&h>=6&&h<=20)&&(this.Jn=1)}0===this.Jn&&t>=3328&&t<=3393&&i>=3203&&i<=3325&&(this.Jn=2),this.ys=0,(t>=3053&&t<=3156&&i>=3056&&i<=3136||t>=3072&&t<=3118&&i>=9492&&i<=9535)&&(this.ys=1),1===this.ys&&t>=3139&&t<=3199&&i>=3008&&i<=3062&&(this.ys=0)};Pc=()=>{this.Qt?.bind(),this.pi&&(d.i.pa=this.pi),this.Ei?.draw(0,0),-1!==this.bs?this.Cl(c.i.Hr[this.bs],0,0,0):-1!==this.Xs[this.zs]&&this.Cl(c.i.Hr[this.Xs[this.zs]],0,0,0),this.ps&&1===this.As&&this.Df(),this.Qt?.draw(562,231),this.ii?.bind(),this.Ai&&(d.i.pa=this.Ai)};Fc=()=>{if(this.si?.bind(),this.mi&&(d.i.pa=this.mi),this.Ti?.draw(0,0),this.Qs)this.Nt?.Ta(239,40,this.th,A.i.zl),this.Nt?.Ta(239,60,this.ih+'*',A.i.Uf);else if(this.eh)this.Nt?.Ta(239,40,'Enter amount:',A.i.zl),this.Nt?.Ta(239,60,this.hh+'*',A.i.Uf);else if(this.Ys)this.Nt?.Ta(239,40,this.Ys,A.i.zl),this.Nt?.Ta(239,60,'Click to continue',A.i.Uf);else if(-1!==this.vs)this.Cl(c.i.Hr[this.vs],0,0,0);else if(-1===this.nh){const t=this.xt;let i=0;u.i.El(0,0,463,77);for(let s=0;s<100;s++){const h=this.rh[s];if(!h)continue;const e=this.messageType[s],n=this.Ss+70-14*i;0===e&&(n>0&&n<110&&t?.Yl(4,n,h,A.i.zl),i++),1===e&&(n>0&&n<110&&(t?.Yl(4,n,this.lh[s]+':',A.i.Ol),t?.Yl(t.pf(this.lh[s])+12,n,h,A.i.BLUE)),i++),2===e&&(0===this.js||1===this.js&&this.mf(this.lh[s]))&&(n>0&&n<110&&(t?.Yl(4,n,this.lh[s]+':',A.i.zl),t?.Yl(t.pf(this.lh[s])+12,n,h,A.i.BLUE)),i++),3!==e&&7!==e||0!==this.fh||!(7===e||0===this.qs||1===this.qs&&this.mf(this.lh[s]))||(n>0&&n<110&&(t?.Yl(4,n,'From '+this.lh[s]+':',A.i.zl),t?.Yl(t.pf('From '+this.lh[s])+12,n,h,A.i.Bf)),i++),4===e&&(0===this.$s||1===this.$s&&this.mf(this.lh[s]))&&(n>0&&n<110&&t?.Yl(4,n,this.lh[s]+' '+this.rh[s],A.i.Gf),i++),5===e&&0===this.fh&&this.qs<2&&(n>0&&n<110&&t?.Yl(4,n,h,A.i.Bf),i++),6===e&&0===this.fh&&this.qs<2&&(n>0&&n<110&&(t?.Yl(4,n,'To '+this.lh[s]+':',A.i.zl),t?.Yl(t.pf('To '+this.lh[s])+12,n,h,A.i.Bf)),i++),8===e&&(0===this.$s||1===this.$s&&this.mf(this.lh[s]))&&(n>0&&n<110&&t?.Yl(4,n,this.lh[s]+' '+this.rh[s],A.i.Hf),i++)}u.i.Lf(),this.Ls=14*i+7,this.Ls<78&&(this.Ls=78),this.ll(463,0,this.Ls-this.Ss-77,this.Ls,77),t?.Yl(4,90,R.i.Ro(this.username)+':',A.i.zl),t?.Yl(t.pf(this.username+': ')+6,90,this.dh+'*',A.i.BLUE),u.i.ul(0,77,A.i.zl,479)}else this.Cl(c.i.Hr[this.nh],0,0,0);this.ps&&2===this.As&&this.Df(),this.si?.draw(22,375),this.ii?.bind(),this.Ai&&(d.i.pa=this.Ai)};Uc=()=>{if(this.ti?.bind(),!this.Vn)return;const t=this.Qe+this.Re&2047;let i=48+(this.Vn.x/32|0),s=464-(this.Vn.z/32|0);this.ki?.Wf(21,9,146,151,this._i,this.Ci,i,s,t,this.Me+256),this.Ri?.Wf(0,0,33,33,this.Ii,this.gi,25,25,this.Qe,256);for(let t=0;t<this.se;t++)i=4*this.he[t]+2-(this.Vn.x/32|0),s=4*this.ee[t]+2-(this.Vn.z/32|0),this.Zf(s,this.hs[t],i);for(let t=0;t<G.i.an;t++)for(let h=0;h<G.i.an;h++){this.Fn[this.$e][t][h]&&(i=4*t+2-(this.Vn.x/32|0),s=4*h+2-(this.Vn.z/32|0),this.Zf(s,this.Ui,i))}for(let t=0;t<this.Rn;t++){const h=this.kn[this.Mn[t]];h&&h.isVisible()&&h.type&&h.type.Yf&&(i=(h.x/32|0)-(this.Vn.x/32|0),s=(h.z/32|0)-(this.Vn.z/32|0),this.Zf(s,this.Bi,i))}for(let t=0;t<this.En;t++){const h=this.Cn[this.Tn[t]];if(h&&h.isVisible()&&h.name){i=(h.x/32|0)-(this.Vn.x/32|0),s=(h.z/32|0)-(this.Vn.z/32|0);let t=!1;const e=R.i.Vf(h.name);for(let i=0;i<this.er;i++)if(e===this.Ar[i]&&0!==this.Ir[i]){t=!0;break}t?this.Zf(s,this.Hi,i):this.Zf(s,this.Gi,i)}}0!==this.ae&&(i=4*this.ae+2-(this.Vn.x/32|0),s=4*this.ce+2-(this.Vn.z/32|0),this.Zf(s,this.Di,i)),u.i.fillRect(93,82,3,3,A.i.Ol),this.ii?.bind()};Zf=(t,i,s)=>{if(!i)return;const h=this.Qe+this.Re&2047,e=s*s+t*t;if(e>6400)return;let n=d.i.sin[h],r=d.i.cos[h];n=256*n/(this.Me+256)|0,r=256*r/(this.Me+256)|0;const l=t*n+s*r>>16,o=t*r-s*n>>16;e>2500&&this.bi?i.zf(l+94-(i.Zl/2|0),83-o-(i.Xf/2|0),this.bi):i.draw(l+94-(i.Zl/2|0),83-o-(i.Xf/2|0))};jf=t=>{if(!this.ki)return;const i=this.ki.ya,s=i.length;for(let t=0;t<s;t++)i[t]=0;for(let s=1;s<G.i.an-1;s++){let h=512*(G.i.an-1-s)*4+24628;for(let e=1;e<G.i.an-1;e++)this.rn&&0==(24&this.rn[t][e][s])&&this.ne?.qf(t,e,s,i,h,512),t<3&&this.rn&&0!=(8&this.rn[t+1][e][s])&&this.ne?.qf(t+1,e,s,i,h,512),h+=4}const h=(238+(20*Math.random()|0)-10<<16)+(238+(20*Math.random()|0)-10<<8)+(20*Math.random()|0)+238-10,n=238+(20*Math.random()|0)-10<<16;this.ki.bind();for(let i=1;i<G.i.an-1;i++)for(let s=1;s<G.i.an-1;s++)this.rn&&0==(24&this.rn[t][s][i])&&this.$f(s,i,t,h,n),t<3&&this.rn&&0!=(8&this.rn[t+1][s][i])&&this.$f(s,i,t+1,h,n);this.ii?.bind(),this.se=0;for(let t=0;t<G.i.an;t++)for(let i=0;i<G.i.an;i++){let s=this.ne?.Kf(this.$e,t,i)??0;if(0===s)continue;s=s>>14&32767;const h=e.i.get(s).Jf;if(h<0)continue;let n=t,r=i;if(22!==h&&29!==h&&34!==h&&36!==h&&46!==h&&47!==h&&48!==h){const s=G.i.an,h=G.i.an,e=this.je[this.$e];if(e){const l=e.flags;for(let e=0;e<10;e++){const e=4*Math.random()|0;0===e&&n>0&&n>t-3&&(l[G.i.index(n-1,r)]&H.i.Qf)===H.i.OPEN&&n--,1===e&&n<s-1&&n<t+3&&(l[G.i.index(n+1,r)]&H.i.tu)===H.i.OPEN&&n++,2===e&&r>0&&r>i-3&&(l[G.i.index(n,r-1)]&H.i.iu)===H.i.OPEN&&r--,3===e&&r<h-1&&r<i+3&&(l[G.i.index(n,r+1)]&H.i.su)===H.i.OPEN&&r++}}}this.hs[this.se]=this.xi[h],this.he[this.se]=n,this.ee[this.se]=r,this.se++}};$f=(t,i,s,h,n)=>{if(!this.ne||!this.ki)return;let r=this.ne.hu(s,t,i);if(0!==r){const l=this.ne.eu(s,t,i,r),o=l>>6&3,a=31&l;let c=h;r>0&&(c=n);const f=this.ki.ya,u=4*t+512*(103-i)*4+24624,d=r>>14&32767,w=e.i.get(d);if(-1===w.nu)a!==D.i.ru&&a!==D.i.lu||(o===F.i.ou?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):o===F.i.au?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):o===F.i.cu?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):o===F.i.fu&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c)),a===D.i.uu&&(o===F.i.ou?f[u]=c:o===F.i.au?f[u+3]=c:o===F.i.cu?f[u+3+1536]=c:o===F.i.fu&&(f[u+1536]=c)),a===D.i.lu&&(o===F.i.fu?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):o===F.i.ou?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):o===F.i.au?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):o===F.i.cu&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c));else{const s=this.Mi[w.nu];if(s){const h=(4*w.width-s.width)/2|0,e=(4*w.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.i.an-i-w.length)+e+48)}}}if(r=this.ne.du(s,t,i),0!==r){const h=this.ne.eu(s,t,i,r),n=h>>6&3,l=31&h,o=r>>14&32767,a=e.i.get(o);if(-1!==a.nu){const s=this.Mi[a.nu];if(s){const h=(4*a.width-s.width)/2|0,e=(4*a.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.i.an-i-a.length)+e+48)}}else if(l===D.i.wu){let s=15658734;r>0&&(s=15597568);const h=this.ki.ya,e=4*t+512*(G.i.an-1-i)*4+24624;n===F.i.ou||n===F.i.cu?(h[e+1536]=s,h[e+1024+1]=s,h[e+512+2]=s,h[e+3]=s):(h[e]=s,h[e+512+1]=s,h[e+1024+2]=s,h[e+1536+3]=s)}}if(r=this.ne.Kf(s,t,i),0!==r){const s=e.i.get(r>>14&32767);if(-1!==s.nu){const h=this.Mi[s.nu];if(h){const e=(4*s.width-h.width)/2|0,n=(4*s.length-h.height)/2|0;h.draw(4*t+48+e,4*(G.i.an-i-s.length)+n+48)}}}};Ff=()=>{if(this.Es<2&&0===this.Th&&0===this.Fh)return;let t;t=1===this.Th&&this.Es<2?'Use '+this.Sh+' with...':1===this.Fh&&this.Es<2?this.Gh+'...':this.Ts[this.Es-1],this.Es>2&&(t=t+'@whi@ / '+(this.Es-2)+' more options'),this.Nt?.yu(4,15,t,A.i.Ol,!0,this.$/1e3|0)};Df=()=>{const t=this.Is,i=this.gs,s=this._s,h=this.Cs,e=A.i.mu;u.i.fillRect(t,i,s,h,e),u.i.fillRect(t+1,i+1,s-2,16,A.i.zl),u.i.vl(t+1,i+18,s-2,h-19,A.i.zl),this.Nt?.Yl(t+3,i+14,'Choose Option',e);let n=this.Gl,r=this.Hl;0===this.As&&(n-=8,r-=11),1===this.As&&(n-=562,r-=231),2===this.As&&(n-=22,r-=375);for(let h=0;h<this.Es;h++){const e=i+15*(this.Es-1-h)+31;let l=A.i.Ol;n>t&&n<t+s&&r>e-13&&r<e+3&&(l=A.i.Xl),this.Nt?.oo(t+3,e,this.Ts[h],l,!0)}};Tc=async()=>{if(0!==this.Ih)return;let t=this.Da;if(1===this.Fh&&this.Fa>=520&&this.Ua>=165&&this.Fa<=788&&this.Ua<=230&&(t=0),this.ps){if(1!==t){let t=this.Gl,i=this.Hl;0===this.As?(t-=8,i-=11):1===this.As?(t-=562,i-=231):2===this.As&&(t-=22,i-=375),(t<this.Is-10||t>this.Is+this._s+10||i<this.gs-10||i>this.gs+this.Cs+10)&&(this.ps=!1,1===this.As&&(this.es=!0),2===this.As&&(this.ns=!0))}if(1===t){const t=this.Is,i=this.gs,s=this._s;let h=this.Fa,e=this.Ua;0===this.As?(h-=8,e-=11):1===this.As?(h-=562,e-=231):2===this.As&&(h-=22,e-=375);let n=-1;for(let r=0;r<this.Es;r++){const l=i+15*(this.Es-1-r)+31;h>t&&h<t+s&&e>l-13&&e<l+3&&(n=r)}-1!==n&&await this.mc(n),this.ps=!1,1===this.As?this.es=!0:2===this.As&&(this.ns=!0)}}else{if(1===t&&this.Es>0){const t=this.Wh[this.Es-1];if(602===t||596===t||22===t||892===t||415===t||405===t||38===t||422===t||478===t||347===t||188===t){const t=this.Yh[this.Es-1],i=this.Vh[this.Es-1];if(c.i.Hr[i].draggable)return this.Eh=!1,this.Ch=0,this.ph=i,this.Ah=t,this.Ih=2,this.gh=this.Fa,this._h=this.Ua,c.i.Hr[i].pu===this.os&&(this.Ih=1),void(c.i.Hr[i].pu===this.vs&&(this.Ih=3))}}if(1===t&&(1===this.Hh||this.wc(this.Es-1))&&this.Es>2&&(t=2),1===t&&this.Es>0&&await this.mc(this.Es-1),2!==t||this.Es<=0)return;this.yc()}};bc=()=>{if(1===this.Da&&this.Vn){let t=this.Fa-21-561,i=this.Ua-9-5;if(t>=0&&i>=0&&t<146&&i<151){t-=73,i-=75;const s=this.Qe+this.Re&2047;let h=d.i.sin[s],e=d.i.cos[s];h=h*(this.Me+256)>>8,e=e*(this.Me+256)>>8;const n=i*h+t*e>>11,r=i*e-t*h>>11,l=this.Vn.x+n>>7,o=this.Vn.z-r>>7;this._c(this.Vn.Cc[0],this.Vn.Ec[0],l,o,1,0,0,0,0,0,!0)&&(this.it.p1(t),this.it.p1(i),this.it.p2(this.Qe),this.it.p1(57),this.it.p1(this.Re),this.it.p1(this.Me),this.it.p1(89),this.it.p2(this.Vn.x),this.it.p2(this.Vn.z),this.it.p1(this.Yn),this.it.p1(63))}}};wc=t=>{if(t<0)return!1;let i=this.Wh[t];return i>=2e3&&(i-=2e3),406===i};mc=async t=>{if(t<0)return;this.eh&&(this.eh=!1,this.ns=!0);let i=this.Wh[t];const s=this.Zh[t],h=this.Yh[t],r=this.Vh[t];if(i>=2e3&&(i-=2e3),903===i||363===i){let s=this.Ts[t];const h=s.indexOf('@whi@');if(-1!==h){s=s.substring(h+5).trim();const t=R.i.Ro(R.i.Mo(R.i.Vf(s)));let e=!1;for(let s=0;s<this.En;s++){const h=this.Cn[this.Tn[s]];if(h&&h.name&&h.name.toLowerCase()===t.toLowerCase()&&this.Vn){this._c(this.Vn.Cc[0],this.Vn.Ec[0],h.Cc[0],h.Ec[0],2,1,1,0,0,0,!1),903===i?this.it.sc(b.i.Au):363===i&&this.it.sc(b.i.Iu),this.it.p2(this.Tn[s]),e=!0;break}}e||this.gu(0,'Unable to find '+t,'')}}else if(450===i&&this._u(b.i.Cu,h,r,s))this.it.p2(this.Lh),this.it.p2(this.bh),this.it.p2(this.Oh);else if(405===i||38===i||422===i||478===i||347===i)478===i?(0==(3&h)&&K.t.L++,K.t.L>=90&&this.it.sc(b.i.Eu),this.it.sc(b.i.Tu)):347===i?this.it.sc(b.i.bu):422===i?this.it.sc(b.i.vu):405===i?(K.t.M+=s,K.t.M>=97&&(this.it.sc(b.i.Ou),this.it.p3(14953816)),this.it.sc(b.i.Lu)):38===i&&this.it.sc(b.i.Su),this.it.p2(s),this.it.p2(h),this.it.p2(r),this.xh=0,this.Mh=r,this.Rh=h,this.kh=2,c.i.Hr[r].pu===this.os&&(this.kh=1),c.i.Hr[r].pu===this.vs&&(this.kh=3);else if(728===i||542===i||6===i||963===i||245===i){const t=this.kn[s];t&&this.Vn&&(this._c(this.Vn.Cc[0],this.Vn.Ec[0],t.Cc[0],t.Ec[0],2,1,1,0,0,0,!1),this.ds=this.Fa,this.ws=this.Ua,this.fs=2,this.us=0,542===i?this.it.sc(b.i.ku):6===i?(0==(3&s)&&K.t.P++,K.t.P>=124&&(this.it.sc(b.i.Ru),this.it.p4(0)),this.it.sc(b.i.Mu)):963===i?this.it.sc(b.i.xu):728===i?this.it.sc(b.i.Nu):245===i&&(0==(3&s)&&K.t.k++,K.t.k>=85&&(this.it.sc(b.i.Pu),this.it.p2(39596)),this.it.sc(b.i.Du)),this.it.p2(s))}else if(217===i){if(this.Vn){this._c(this.Vn.Cc[0],this.Vn.Ec[0],h,r,2,0,0,0,0,0,!1)||this._c(this.Vn.Cc[0],this.Vn.Ec[0],h,r,2,1,1,0,0,0,!1),this.ds=this.Fa,this.ws=this.Ua,this.fs=2,this.us=0,this.it.sc(b.i.Fu),this.it.p2(h+this.Ge),this.it.p2(r+this.He),this.it.p2(s),this.it.p2(this.Lh),this.it.p2(this.bh),this.it.p2(this.Oh)}}else if(1175===i){const t=s>>14&32767,i=e.i.get(t);let h;h=i.Uu?i.Uu:"It's a "+i.name+'.',this.gu(0,h,'')}else if(285===i)this._u(b.i.Bu,h,r,s);else if(881===i)this.it.sc(b.i.Gu),this.it.p2(s),this.it.p2(h),this.it.p2(r),this.it.p2(this.Lh),this.it.p2(this.bh),this.it.p2(this.Oh),this.xh=0,this.Mh=r,this.Rh=h,this.kh=2,c.i.Hr[r].pu===this.os&&(this.kh=1),c.i.Hr[r].pu===this.vs&&(this.kh=3);else if(391===i)this.it.sc(b.i.Hu),this.it.p2(s),this.it.p2(h),this.it.p2(r),this.it.p2(this.Uh),this.xh=0,this.Mh=r,this.Rh=h,this.kh=2,c.i.Hr[r].pu===this.os&&(this.kh=1),c.i.Hr[r].pu===this.vs&&(this.kh=3);else if(660===i)this.ps?this.ne?.click(h-8,r-11):this.ne?.click(this.Fa-8,this.Ua-11);else{if(188===i)return this.Th=1,this.bh=h,this.Oh=r,this.Lh=s,this.Sh=n.i.get(s).name,void(this.Fh=0);if(44===i)this.Nh||(this.it.sc(b.i.Wu),this.it.p2(r),this.Nh=!0);else if(1773===i){const t=n.i.get(s);let i;i=r>=1e5?r+' x '+t.name:t.Uu?t.Uu:"It's a "+t.name+'.',this.gu(0,i,'')}else if(900===i){const t=this.kn[s];t&&this.Vn&&(this._c(this.Vn.Cc[0],this.Vn.Ec[0],t.Cc[0],t.Ec[0],2,1,1,0,0,0,!1),this.ds=this.Fa,this.ws=this.Ua,this.fs=2,this.us=0,this.it.sc(b.i.Zu),this.it.p2(s),this.it.p2(this.Lh),this.it.p2(this.bh),this.it.p2(this.Oh))}else if(1373===i||1544===i||151===i||1101===i){const t=this.Cn[s];t&&this.Vn&&(this._c(this.Vn.Cc[0],this.Vn.Ec[0],t.Cc[0],t.Ec[0],2,1,1,0,0,0,!1),this.ds=this.Fa,this.ws=this.Ua,this.fs=2,this.us=0,1101===i?this.it.sc(b.i.Iu):151===i?(K.t.F++,K.t.F>=90&&(this.it.sc(b.i.Yu),this.it.p2(31114)),this.it.sc(b.i.Vu)):1373===i?this.it.sc(b.i.Au):1544===i&&this.it.sc(b.i.zu),this.it.p2(s))}else if(265===i){const t=this.kn[s];t&&this.Vn&&(this._c(this.Vn.Cc[0],this.Vn.Ec[0],t.Cc[0],t.Ec[0],2,1,1,0,0,0,!1),this.ds=this.Fa,this.ws=this.Ua,this.fs=2,this.us=0,this.it.sc(b.i.Xu),this.it.p2(s),this.it.p2(this.Uh))}else if(679===i){const i=this.Ts[t],s=i.indexOf('@whi@');if(-1!==s){const t=R.i.Vf(i.substring(s+5).trim());let h=-1;for(let i=0;i<this.er;i++)if(this.Ar[i]===t){h=i;break}-1!==h&&this.Ir[h]>0&&(this.ns=!0,this.eh=!1,this.Qs=!0,this.ih='',this.sh=3,this.gr=this.Ar[h],this.th='Enter message to send to '+this.pr[h])}}else if(55===i)this._u(b.i.ju,h,r,s)&&this.it.p2(this.Uh);else if(224===i||993===i||99===i||746===i||877===i){if(this.Vn){this._c(this.Vn.Cc[0],this.Vn.Ec[0],h,r,2,0,0,0,0,0,!1)||this._c(this.Vn.Cc[0],this.Vn.Ec[0],h,r,2,1,1,0,0,0,!1),this.ds=this.Fa,this.ws=this.Ua,this.fs=2,this.us=0,224===i?this.it.sc(b.i.qu):746===i?this.it.sc(b.i.$u):877===i?this.it.sc(b.i.Ku):99===i?this.it.sc(b.i.Ju):993===i&&this.it.sc(b.i.Qu),this.it.p2(h+this.Ge),this.it.p2(r+this.He),this.it.p2(s)}}else if(1607===i){const t=this.kn[s];if(t&&t.type){let i;i=t.type.Uu?t.type.Uu:"It's a "+t.type.name+'.',this.gu(0,i,'')}}else if(504===i)this._u(b.i.td,h,r,s);else{if(930===i){const t=c.i.Hr[r];this.Fh=1,this.Uh=r,this.Bh=t.sd,this.Th=0;let i=t.hd;i&&-1!==i.indexOf(' ')&&(i=i.substring(0,i.indexOf(' ')));let s=t.hd;return s&&-1!==s.indexOf(' ')&&(s=s.substring(s.indexOf(' ')+1)),this.Gh=i+' '+t.action+' '+s,void(16===this.Bh&&(this.es=!0,this.zs=3,this.rs=!0))}if(951===i){const t=c.i.Hr[r];let i=!0;t.Ll>0&&(i=this.ed(t)),i&&(this.it.sc(b.i.nd),this.it.p2(r))}else if(602===i||596===i||22===i||892===i||415===i)22===i?this.it.sc(b.i.rd):415===i?(0==(3&r)&&K.t.B++,K.t.B>=55&&(this.it.sc(b.i.ld),this.it.p4(0)),this.it.sc(b.i.od)):602===i?this.it.sc(b.i.ad):892===i?(0==(3&h)&&K.t.D++,K.t.D>=130&&(this.it.sc(b.i.fd),this.it.p1(177)),this.it.sc(b.i.ud)):596===i&&this.it.sc(b.i.dd),this.it.p2(s),this.it.p2(h),this.it.p2(r),this.xh=0,this.Mh=r,this.Rh=h,this.kh=2,c.i.Hr[r].pu===this.os&&(this.kh=1),c.i.Hr[r].pu===this.vs&&(this.kh=3);else if(581===i)0==(3&s)&&K.t.S++,K.t.S>=99&&(this.it.sc(b.i.wd),this.it.p4(0)),this._u(b.i.yd,h,r,s);else if(965===i){if(this.Vn){this._c(this.Vn.Cc[0],this.Vn.Ec[0],h,r,2,0,0,0,0,0,!1)||this._c(this.Vn.Cc[0],this.Vn.Ec[0],h,r,2,1,1,0,0,0,!1),this.ds=this.Fa,this.ws=this.Ua,this.fs=2,this.us=0,this.it.sc(b.i.md),this.it.p2(h+this.Ge),this.it.p2(r+this.He),this.it.p2(s),this.it.p2(this.Uh)}}else if(1501===i)K.t.N+=this.He,K.t.N>=92&&(this.it.sc(b.i.pd),this.it.p4(0)),this._u(b.i.Ad,h,r,s);else if(364===i)this._u(b.i.Id,h,r,s);else if(1102===i){const t=n.i.get(s);let i;i=t.Uu?t.Uu:"It's a "+t.name+'.',this.gu(0,i,'')}else if(960===i){this.it.sc(b.i.nd),this.it.p2(r);const t=c.i.Hr[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];t.rl&&this.Ph[i]!==t.rl[0]&&(this.Ph[i]=t.rl[0],await this.gd(i),this.es=!0)}}else if(34===i){const i=this.Ts[t],s=i.indexOf('@whi@');if(-1!==s){this._d(),this.qh=i.substring(s+5).trim(),this.$h=!1;for(let t=0;t<c.i.Hr.length;t++)if(c.i.Hr[t]&&c.i.Hr[t].Ll===c.i.Vo){this.Kh=this.os=c.i.Hr[t].pu;break}}}else if(947===i)this._d();else if(367===i){const t=this.Cn[s];t&&this.Vn&&(this._c(this.Vn.Cc[0],this.Vn.Ec[0],t.Cc[0],t.Ec[0],2,1,1,0,0,0,!1),this.ds=this.Fa,this.ws=this.Ua,this.fs=2,this.us=0,this.it.sc(b.i.Cd),this.it.p2(s),this.it.p2(this.Lh),this.it.p2(this.bh),this.it.p2(this.Oh))}else if(465===i){this.it.sc(b.i.nd),this.it.p2(r);const t=c.i.Hr[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];this.Ph[i]=1-this.Ph[i],await this.gd(i),this.es=!0}}else if(406===i||436===i||557===i||556===i){const s=this.Ts[t],h=s.indexOf('@whi@');if(-1!==h){const t=R.i.Vf(s.substring(h+5).trim());406===i?this.Ed(t):436===i?this.Td(t):557===i?this.bd(t):556===i&&this.vd(t)}}else if(651===i){const t=this.Cn[s];t&&this.Vn&&(this._c(this.Vn.Cc[0],this.Vn.Ec[0],t.Cc[0],t.Ec[0],2,1,1,0,0,0,!1),this.ds=this.Fa,this.ws=this.Ua,this.fs=2,this.us=0,this.it.sc(b.i.Od),this.it.p2(s),this.it.p2(this.Uh))}}}this.Th=0,this.Fh=0};ed=t=>{const i=t.Ll;if(i===c.i.Ld&&(this.ns=!0,this.eh=!1,this.Qs=!0,this.ih='',this.sh=1,this.th='Enter name of friend to add to list'),i===c.i.Sd&&(this.ns=!0,this.eh=!1,this.Qs=!0,this.ih='',this.sh=2,this.th='Enter name of friend to delete from list'),i===c.i.kd)return this.nt=250,!0;if(i===c.i.Rd&&(this.ns=!0,this.eh=!1,this.Qs=!0,this.ih='',this.sh=4,this.th='Enter name of player to add to list'),i===c.i.Md&&(this.ns=!0,this.eh=!1,this.Qs=!0,this.ih='',this.sh=5,this.th='Enter name of player to delete from list'),i>=c.i.xd&&i<=c.i.Nd){const t=(i-300)/2|0,s=1&i;let h=this.sr[t];if(-1!==h)for(;;)if(0===s&&(h--,h<0&&(h=l.i.count-1)),1===s&&(h++,h>=l.i.count&&(h=0)),!l.i.Hr[h].disable&&l.i.Hr[h].type===t+(this.tr?0:7)){this.sr[t]=h,this.ir=!0;break}}if(i>=c.i.Pd&&i<=c.i.Dd){const t=(i-314)/2|0,s=1&i;let h=this.hr[t];0===s&&(h--,h<0&&(h=W.i.Fo[t].length-1)),1===s&&(h++,h>=W.i.Fo[t].length&&(h=0)),this.hr[t]=h,this.ir=!0}if(i!==c.i.Zo||this.tr||(this.tr=!0,this.Ja()),i===c.i.Yo&&this.tr&&(this.tr=!1,this.Ja()),i===c.i.Fd){this.it.sc(b.i.Ud),this.it.p1(this.tr?0:1);for(let t=0;t<7;t++)this.it.p1(this.sr[t]);for(let t=0;t<5;t++)this.it.p1(this.hr[t]);return!0}return i===c.i.zo&&(this.$h=!this.$h),i>=c.i.Bd&&i<=c.i.Gd&&(this._d(),this.qh.length>0&&(this.it.sc(b.i.Hd),this.it.Wd(R.i.Vf(this.qh)),this.it.p1(i-601),this.it.p1(this.$h?1:0))),!1};Ja=()=>{this.ir=!0;for(let t=0;t<7;t++){this.sr[t]=-1;for(let i=0;i<l.i.count;i++)if(!l.i.Hr[i].disable&&l.i.Hr[i].type===t+(this.tr?0:7)){this.sr[t]=i;break}}};_u=(t,i,s,h)=>{if(!this.Vn||!this.ne)return!1;const n=h>>14&32767,r=this.ne.eu(this.$e,i,s,h);if(-1===r)return!1;const l=31&r,o=r>>6&3;if(l===D.i.Zd||l===D.i.Yd||l===D.i.Vd){const t=e.i.get(n);let h,r;o===F.i.ou||o===F.i.cu?(h=t.width,r=t.length):(h=t.length,r=t.width);let l=t.zd;0!==o&&(l=(l<<o&15)+(l>>4-o)),this._c(this.Vn.Cc[0],this.Vn.Ec[0],i,s,2,h,r,0,0,l,!1)}else this._c(this.Vn.Cc[0],this.Vn.Ec[0],i,s,2,0,0,o,l+1,0,!1);return this.ds=this.Fa,this.ws=this.Ua,this.fs=2,this.us=0,this.it.sc(t),this.it.p2(i+this.Ge),this.it.p2(s+this.He),this.it.p2(n),!0};vc=()=>{1===this.Da&&(this.Fa>=549&&this.Fa<=583&&this.Ua>=195&&this.Ua<231&&-1!==this.Xs[0]?(this.es=!0,this.zs=0,this.rs=!0):this.Fa>=579&&this.Fa<=609&&this.Ua>=194&&this.Ua<231&&-1!==this.Xs[1]?(this.es=!0,this.zs=1,this.rs=!0):this.Fa>=607&&this.Fa<=637&&this.Ua>=194&&this.Ua<231&&-1!==this.Xs[2]?(this.es=!0,this.zs=2,this.rs=!0):this.Fa>=635&&this.Fa<=679&&this.Ua>=194&&this.Ua<229&&-1!==this.Xs[3]?(this.es=!0,this.zs=3,this.rs=!0):this.Fa>=676&&this.Fa<=706&&this.Ua>=194&&this.Ua<231&&-1!==this.Xs[4]?(this.es=!0,this.zs=4,this.rs=!0):this.Fa>=704&&this.Fa<=734&&this.Ua>=194&&this.Ua<231&&-1!==this.Xs[5]?(this.es=!0,this.zs=5,this.rs=!0):this.Fa>=732&&this.Fa<=766&&this.Ua>=195&&this.Ua<231&&-1!==this.Xs[6]?(this.es=!0,this.zs=6,this.rs=!0):this.Fa>=550&&this.Fa<=584&&this.Ua>=492&&this.Ua<528&&-1!==this.Xs[7]?(this.es=!0,this.zs=7,this.rs=!0):this.Fa>=582&&this.Fa<=612&&this.Ua>=492&&this.Ua<529&&-1!==this.Xs[8]?(this.es=!0,this.zs=8,this.rs=!0):this.Fa>=609&&this.Fa<=639&&this.Ua>=492&&this.Ua<529&&-1!==this.Xs[9]?(this.es=!0,this.zs=9,this.rs=!0):this.Fa>=637&&this.Fa<=681&&this.Ua>=493&&this.Ua<528&&-1!==this.Xs[10]?(this.es=!0,this.zs=10,this.rs=!0):this.Fa>=679&&this.Fa<=709&&this.Ua>=492&&this.Ua<529&&-1!==this.Xs[11]?(this.es=!0,this.zs=11,this.rs=!0):this.Fa>=706&&this.Fa<=736&&this.Ua>=492&&this.Ua<529&&-1!==this.Xs[12]?(this.es=!0,this.zs=12,this.rs=!0):this.Fa>=734&&this.Fa<=768&&this.Ua>=492&&this.Ua<528&&-1!==this.Xs[13]&&(this.es=!0,this.zs=13,this.rs=!0),K.t.O++,K.t.O>150&&(K.t.O=0,this.it.sc(b.i.Xd),this.it.p1(43)))};kc=async()=>{for(;;){let t;do{for(;;){if(t=this.Ga(),-1===t)return;if(-1!==this.os&&this.os===this.Kh){8===t&&this.qh.length>0&&(this.qh=this.qh.substring(0,this.qh.length-1));break}if(this.Qs){if(t>=32&&t<=122&&this.ih.length<80&&(this.ih=this.ih+String.fromCharCode(t),this.ns=!0),8===t&&this.ih.length>0&&(this.ih=this.ih.substring(0,this.ih.length-1),this.ns=!0),13===t||10===t){let t;if(this.Qs=!1,this.ns=!0,1===this.sh&&(t=R.i.Vf(this.ih),this.Ed(t)),2===this.sh&&this.er>0&&(t=R.i.Vf(this.ih),this.bd(t)),3===this.sh&&this.ih.length>0&&this.gr){this.it.sc(b.i.jd),this.it.p1(0);const t=this.it.Va;this.it.Wd(this.gr),O.i.qd(this.it,this.ih),this.it.jc(this.it.Va-t),this.ih=R.i.$d(this.ih),this.ih=v.i.filter(this.ih),this.gu(6,this.ih,R.i.Ro(R.i.Mo(this.gr))),2===this.qs&&(this.qs=1,this.ls=!0,this.it.sc(b.i.Kd),this.it.p1(this.js),this.it.p1(this.qs),this.it.p1(this.$s))}4===this.sh&&this.ks<100&&(t=R.i.Vf(this.ih),this.Td(t)),5===this.sh&&this.ks>0&&(t=R.i.Vf(this.ih),this.vd(t))}}else if(this.eh){if(t>=48&&t<=57&&this.hh.length<10&&(this.hh=this.hh+String.fromCharCode(t),this.ns=!0),8===t&&this.hh.length>0&&(this.hh=this.hh.substring(0,this.hh.length-1),this.ns=!0),13===t||10===t){if(this.hh.length>0){let t=0;try{t=parseInt(this.hh,10)}catch(t){}this.it.sc(b.i.Jd),this.it.p4(t)}this.eh=!1,this.ns=!0}}else if(-1===this.vs&&(t>=32&&t<=122&&this.dh.length<80&&(this.dh=this.dh+String.fromCharCode(t),this.ns=!0),8===t&&this.dh.length>0&&(this.dh=this.dh.substring(0,this.dh.length-1),this.ns=!0),(13===t||10===t)&&this.dh.length>0)){if('::clientdrop'===this.dh)await this.ec();else if('::noclip'===this.dh)for(let t=0;t<G.i.qe;t++)for(let i=1;i<G.i.an-1;i++)for(let s=1;s<G.i.an-1;s++){const h=this.je[t];h&&(h.flags[G.i.index(i,s)]=0)}else'::debug'===this.dh&&(K.t.I=!K.t.I);if(this.dh.startsWith('::'))this.it.sc(b.i.Qd),this.it.p1(this.dh.length-1),this.it.Xa(this.dh.substring(2));else{let t=0;this.dh.startsWith('yellow:')?(t=0,this.dh=this.dh.substring(7)):this.dh.startsWith('red:')?(t=1,this.dh=this.dh.substring(4)):this.dh.startsWith('green:')?(t=2,this.dh=this.dh.substring(6)):this.dh.startsWith('cyan:')?(t=3,this.dh=this.dh.substring(5)):this.dh.startsWith('purple:')?(t=4,this.dh=this.dh.substring(7)):this.dh.startsWith('white:')?(t=5,this.dh=this.dh.substring(6)):this.dh.startsWith('flash1:')?(t=6,this.dh=this.dh.substring(7)):this.dh.startsWith('flash2:')?(t=7,this.dh=this.dh.substring(7)):this.dh.startsWith('flash3:')?(t=8,this.dh=this.dh.substring(7)):this.dh.startsWith('glow1:')?(t=9,this.dh=this.dh.substring(6)):this.dh.startsWith('glow2:')?(t=10,this.dh=this.dh.substring(6)):this.dh.startsWith('glow3:')&&(t=11,this.dh=this.dh.substring(6));let i=0;this.dh.startsWith('wave:')&&(i=1,this.dh=this.dh.substring(5)),this.dh.startsWith('scroll:')&&(i=2,this.dh=this.dh.substring(7)),this.it.sc(b.i.tw),this.it.p1(0);const s=this.it.Va;this.it.p1(t),this.it.p1(i),O.i.qd(this.it,this.dh),this.it.jc(this.it.Va-s),this.dh=R.i.$d(this.dh),this.dh=v.i.filter(this.dh),this.Vn&&this.Vn.name&&(this.Vn.yf=this.dh,this.Vn.Af=t,this.Vn.If=i,this.Vn.gf=150,this.gu(2,this.Vn.yf,this.Vn.name)),2===this.js&&(this.js=3,this.ls=!0,this.it.sc(b.i.Kd),this.it.p1(this.js),this.it.p1(this.qs),this.it.p1(this.$s))}this.dh='',this.ns=!0}}}while((t<97||t>122)&&(t<65||t>90)&&(t<48||t>57)&&32!==t);this.qh.length<12&&(this.qh=this.qh+String.fromCharCode(t))}};Oc=()=>{if(1===this.Da)if(this.Fa>=8&&this.Fa<=108&&this.Ua>=490&&this.Ua<=522)this.js=(this.js+1)%4,this.ls=!0,this.ns=!0,this.it.sc(b.i.Kd),this.it.p1(this.js),this.it.p1(this.qs),this.it.p1(this.$s);else if(this.Fa>=137&&this.Fa<=237&&this.Ua>=490&&this.Ua<=522)this.qs=(this.qs+1)%3,this.ls=!0,this.ns=!0,this.it.sc(b.i.Kd),this.it.p1(this.js),this.it.p1(this.qs),this.it.p1(this.$s);else if(this.Fa>=275&&this.Fa<=375&&this.Ua>=490&&this.Ua<=522)this.$s=(this.$s+1)%3,this.ls=!0,this.ns=!0,this.it.sc(b.i.Kd),this.it.p1(this.js),this.it.p1(this.qs),this.it.p1(this.$s);else if(this.Fa>=416&&this.Fa<=516&&this.Ua>=490&&this.Ua<=522){this._d(),this.qh='',this.$h=!1;for(let t=0;t<c.i.Hr.length;t++)if(c.i.Hr[t]&&600===c.i.Hr[t].Ll)return void(this.Kh=this.os=c.i.Hr[t].pu)}};Dc=(t,i,s,h,e,n,r,l)=>{if(this.Ks?this.Js=32:this.Js=0,this.Ks=!1,t>=n&&t<n+16&&i>=r&&i<r+16)l.Rl-=4*this.cs,e&&(this.es=!0);else if(t>=n&&t<n+16&&i>=r+h-16&&i<r+h)l.Rl+=4*this.cs,e&&(this.es=!0);else if(t>=n-this.Js&&t<n+this.Js+16&&i>=r+16&&i<r+h-16&&this.cs>0){let t=(h-32)*h/s|0;t<8&&(t=8);const n=i-r-(t/2|0)-16,o=h-t-32;l.Rl=(s-h)*n/o|0,e&&(this.es=!0),this.Ks=!0}};Qa=()=>{this.si||(this.Gr(),this.Zr=null,this.It=null,this.gt=null,this._t=null,this.Ct=null,this.Et=null,this.Tt=null,this.bt=null,this.vt=null,this.Ot=null,this.si=new f.i(479,96),this.ti=new f.i(168,160),u.i.clear(),this.bi?.draw(0,0),this.Qt=new f.i(190,261),this.ii=new f.i(512,334),u.i.clear(),this.hi=new f.i(501,61),this.ei=new f.i(288,40),this.ni=new f.i(269,66),this.wt=!0)};mf=t=>{if(!t)return!1;for(let i=0;i<this.er;i++)if(t.toLowerCase()===this.pr[i]?.toLowerCase())return!0;return!!this.Vn&&t.toLowerCase()===this.Vn.name?.toLowerCase()};Ed=t=>{if(0n===t)return;if(this.er>=100)return void this.gu(0,'Your friends list is full. Max of 100 hit','');const i=R.i.Ro(R.i.Mo(t));for(let s=0;s<this.er;s++)if(this.Ar[s]===t)return void this.gu(0,i+' is already on your friend list','');for(let s=0;s<this.ks;s++)if(this.Rs[s]===t)return void this.gu(0,'Please remove '+i+' from your ignore list first','');this.Vn&&this.Vn.name&&i!==this.Vn.name&&(this.pr[this.er]=i,this.Ar[this.er]=t,this.Ir[this.er]=0,this.er++,this.es=!0,this.it.sc(b.i.iw),this.it.Wd(t))};bd=t=>{if(0n!==t)for(let i=0;i<this.er;i++)if(this.Ar[i]===t){this.er--,this.es=!0;for(let t=i;t<this.er;t++)this.pr[t]=this.pr[t+1],this.Ir[t]=this.Ir[t+1],this.Ar[t]=this.Ar[t+1];return this.it.sc(b.i.sw),void this.it.Wd(t)}};Td=t=>{if(0n===t)return;if(this.ks>=100)return void this.gu(0,'Your ignore list is full. Max of 100 hit','');const i=R.i.Ro(R.i.Mo(t));for(let s=0;s<this.ks;s++)if(this.Rs[s]===t)return void this.gu(0,i+' is already on your ignore list','');for(let s=0;s<this.er;s++)if(this.Ar[s]===t)return void this.gu(0,'Please remove '+i+' from your friend list first','');this.Rs[this.ks++]=t,this.es=!0,this.it.sc(b.i.hw),this.it.Wd(t)};vd=t=>{if(0n!==t)for(let i=0;i<this.ks;i++)if(this.Rs[i]===t){this.ks--,this.es=!0;for(let t=i;t<this.ks;t++)this.Rs[t]=this.Rs[t+1];return this.it.sc(b.i.ew),void this.it.Wd(t)}};nw=(t,i)=>{const s=this.Fn[this.$e][t][i];if(!s)return void this.ne?.rw(this.$e,t,i);let h=-99999999,e=null;for(let t=s.lw();t;t=s.ow()){const i=n.i.get(t.index);let s=i.aw;i.Co&&(s*=t.count+1),s>h&&(h=s,e=t)}if(!e)return;s.cw(e);let r=-1,l=-1,o=0,a=0;for(let t=s.lw();t;t=s.ow())t.index!==e.index&&-1===r&&(r=t.index,o=t.count),t.index!==e.index&&t.index!==r&&-1===l&&(l=t.index,a=t.count);let c=null;-1!==r&&(c=n.i.get(r).fw(o));let f=null;-1!==l&&(f=n.i.get(l).fw(a));const u=t+(i<<7)+1610612736|0,d=n.i.get(e.index);this.ne?.uw(t,i,this.zc(this.$e,128*t+64,128*i+64),this.$e,u,d.fw(e.count),f,c)};dw=(t,i,s,h,n,r,l)=>{if(i<1||s<1||i>102||s>102)return;if(K.t.m&&t!==this.$e)return;if(!this.ne)return;let o=0;if(l===P.i.ww&&(o=this.ne.hu(t,i,s)),l===P.i.yw&&(o=this.ne.mw(t,s,i)),l===P.i.pw&&(o=this.ne.du(t,i,s)),l===P.i.Vd&&(o=this.ne.Kf(t,i,s)),0!==o){const h=this.ne.eu(t,i,s,o),n=o>>14&32767,r=31&h,a=h>>6;if(l===P.i.ww){this.ne?.Aw(t,i,s,1);const h=e.i.get(n);h.Iw&&this.je[t]?.Aw(i,s,r,a,h.gw)}if(l===P.i.yw&&this.ne?._w(t,i,s),l===P.i.pw){this.ne.Cw(t,i,s);const h=e.i.get(n);if(i+h.width>G.i.an-1||s+h.width>G.i.an-1||i+h.length>G.i.an-1||s+h.length>G.i.an-1)return;h.Iw&&this.je[t]?.Cw(i,s,h.width,h.length,a,h.gw)}if(l===P.i.Vd){this.ne?.Ew(t,i,s);const h=e.i.get(n);h.Iw&&h.active&&this.je[t]?.Tw(i,s)}}if(h>=0){let e=t;this.rn&&t<3&&2==(2&this.rn[1][i][s])&&(e=t+1),N.i.dw(t,i,s,this.ne,this.nn,this.Pn,this.je[t],h,r,n,e)}};_d=()=>{this.it.sc(b.i.bw),-1!==this.bs&&(this.bs=-1,this.es=!0,this.Nh=!1,this.rs=!0),-1!==this.vs&&(this.vs=-1,this.ns=!0,this.Nh=!1),this.os=-1};ec=async()=>{if(this.nt>0)await this.Ow();else{this.ii?.bind(),this.xt?.Ta(257,144,'Connection lost',A.i.zl),this.xt?.Ta(256,143,'Connection lost',A.i.Ol),this.xt?.Ta(257,159,'Please wait - attempting to reestablish',A.i.zl),this.xt?.Ta(256,158,'Please wait - attempting to reestablish',A.i.Ol),this.ii?.draw(8,11),this.ae=0;const t=this.stream;this.K=!1,await this.Ba(this.username,this.password,!0),this.K||await this.Ow(),t?.close()}};Ow=async()=>{this.stream&&this.stream.close(),this.stream=null,this.K=!1,this.yt=0,this.username='',this.password='',M.i.$a(),this.rf(),this.ne?.reset();for(let t=0;t<G.i.qe;t++)this.je[t]?.reset();(0,j.Br)(),this.Nr=null,this.Rr=0,K.t.m||await this.Kr('scape_main',12345678,4e4)};read=async()=>{if(!this.stream)return!1;try{let t=this.stream.available;if(0===t)return!1;if(-1===this.ot&&(await this.stream.Ya(this.in.data,0,1),this.ot=255&this.in.data[0],this.lt&&(this.ot=this.ot-this.lt.Lw&255),this.packetSize=_.i.Sw[this.ot],t--),-1===this.packetSize){if(t<=0)return!1;await this.stream.Ya(this.in.data,0,1),this.packetSize=255&this.in.data[0],t--}if(-2===this.packetSize){if(t<=1)return!1;await this.stream.Ya(this.in.data,0,2),this.in.Va=0,this.packetSize=this.in.kw,t-=2}if(t<this.packetSize)return!1;if(this.in.Va=0,await this.stream.Ya(this.in.data,0,this.packetSize),this.et=0,this.ut=this.ft,this.ft=this.ct,this.ct=this.ot,this.ot===T.i.Rw){const t=this.in.kw,i=this.in.Mw;return this.Dh[t]=i,this.Ph[t]!==i&&(this.Ph[t]=i,await this.gd(t),this.es=!0,-1!==this.nh&&(this.ns=!0)),this.ot=-1,!0}if(this.ot===T.i.xw){const t=this.in.za,i=this.in.Nw;let s=R.i.Ro(R.i.Mo(t));for(let h=0;h<this.er;h++)if(t===this.Ar[h]){this.Ir[h]!==i&&(this.Ir[h]=i,this.es=!0,i>0&&this.gu(5,s+' has logged in.',''),0===i&&this.gu(5,s+' has logged out.','')),s=null;break}s&&this.er<100&&(this.Ar[this.er]=t,this.pr[this.er]=s,this.Ir[this.er]=i,this.er++,this.es=!0);let h=!1;for(;!h;){h=!0;for(let t=0;t<this.er-1;t++)if(this.Ir[t]!==K.t.l&&this.Ir[t+1]===K.t.l||0===this.Ir[t]&&0!==this.Ir[t+1]){const i=this.Ir[t];this.Ir[t]=this.Ir[t+1],this.Ir[t+1]=i;const s=this.pr[t];this.pr[t]=this.pr[t+1],this.pr[t+1]=s;const e=this.Ar[t];this.Ar[t]=this.Ar[t+1],this.Ar[t+1]=e,this.es=!0,h=!1}}return this.ot=-1,!0}if(this.ot===T.i.Pw)return this.rt=30*this.in.kw,this.ot=-1,!0;if(this.ot===T.i.Dw){const t=this.in.Nw,i=this.in.Nw;let s=-1;if(this.Ye)for(let h=0;h<this.Ye.length;h++)this.Ye[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.We;if(h){const e=h[s];-1!==s&&e&&(this.db?.$r(`m${t}_${i}`,e),this.re=1)}}return this.ot=-1,!0}if(this.ot===T.i.Fw)return this.Uw(this.in,this.packetSize),this.ot=-1,!0;if(this.ot===T.i.Bw){const t=this.in.kw,i=this.in.kw;if(this.Ue===t&&this.Be===i&&0!==this.re)return this.ot=-1,!0;this.Ue=t,this.Be=i,this.Ge=8*(this.Ue-6),this.He=8*(this.Be-6),this.re=1,this.ii?.bind(),this.xt?.Ta(257,151,'Loading - please wait.',A.i.zl),this.xt?.Ta(256,150,'Loading - please wait.',A.i.Ol),this.ii?.draw(8,11);const s=(this.packetSize-2)/10|0;this.We=new $.to(s,null),this.Ze=new $.to(s,null),this.Ye=new Int32Array(s),this.it.sc(b.i.Gw),this.it.p1(0);let h=0;for(let t=0;t<s;t++){const i=this.in.Nw,s=this.in.Nw,e=this.in.Jr,n=this.in.Jr;let r;this.Ye[t]=(i<<8)+s,0!==e&&(r=await(this.db?.Vr(`m${i}_${s}`)),r&&I.i.zr(r)!==e&&(r=void 0),r?this.We[t]=r:(this.re=0,this.it.p1(0),this.it.p1(i),this.it.p1(s),h+=3)),0!==n&&(r=await(this.db?.Vr(`l${i}_${s}`)),r&&I.i.zr(r)!==n&&(r=void 0),r?this.Ze[t]=r:(this.re=0,this.it.p1(1),this.it.p1(i),this.it.p1(s),h+=3))}this.it.jc(h),this.ii?.bind(),0===this.re&&(this.xt?.Ta(257,166,'Map area updated since last visit, so load will take longer this time only',A.i.zl),this.xt?.Ta(256,165,'Map area updated since last visit, so load will take longer this time only',A.i.Ol)),this.ii?.draw(8,11);const e=this.Ge-this.Ve,n=this.He-this.ze;this.Ve=this.Ge,this.ze=this.He;for(let t=0;t<8192;t++){const i=this.kn[t];if(i){for(let t=0;t<10;t++)i.Cc[t]-=e,i.Ec[t]-=n;i.x-=128*e,i.z-=128*n}}for(let t=0;t<this.Z;t++){const i=this.Cn[t];if(i){for(let t=0;t<10;t++)i.Cc[t]-=e,i.Ec[t]-=n;i.x-=128*e,i.z-=128*n}}let r=0,l=G.i.an,o=1;e<0&&(r=G.i.an-1,l=-1,o=-1);let a=0,c=G.i.an,f=1;n<0&&(a=G.i.an-1,c=-1,f=-1);for(let t=r;t!==l;t+=o)for(let i=a;i!==c;i+=f){const s=t+e,h=i+n;for(let e=0;e<G.i.qe;e++)s>=0&&h>=0&&s<G.i.an&&h<G.i.an?this.Fn[e][t][i]=this.Fn[e][s][h]:this.Fn[e][t][i]=null}for(let t=this.Bn.lw();t;t=this.Bn.ow())t.x-=e,t.z-=n,(t.x<0||t.z<0||t.x>=G.i.an||t.z>=G.i.an)&&t.Hw();return 0!==this.ae&&(this.ae-=e,this.ce-=n),this.fe=!1,this.ot=-1,!0}if(this.ot===T.i.Ww)return c.i.Hr[this.in.kw].model=this.Vn?.Zw()||null,this.ot=-1,!0;if(this.ot===T.i.Yw)return this.Ms=this.in.Nw,1===this.Ms&&(this.xs=this.in.kw),this.Ms>=2&&this.Ms<=6&&(2===this.Ms&&(this.Ns=64,this.Ps=64),3===this.Ms&&(this.Ns=0,this.Ps=64),4===this.Ms&&(this.Ns=128,this.Ps=64),5===this.Ms&&(this.Ns=64,this.Ps=0),6===this.Ms&&(this.Ns=64,this.Ps=128),this.Ms=2,this.Fs=this.in.kw,this.Us=this.in.kw,this.Bs=this.in.Nw),10===this.Ms&&(this.Ds=this.in.kw),this.ot=-1,!0;if(this.ot===T.i.Vw){const t=this.in.zw,i=this.in.Jr,s=this.in.Jr;return t!==this.Nr&&this.Mr&&!K.t.m&&await this.Kr(t,i,s),this.Nr=t,this.Pr=i,this.Dr=s,this.Rr=0,this.ot=-1,!0}if(this.ot===T.i.Xw)return await this.Ow(),this.ot=-1,!1;if(this.ot===T.i.jw){const t=this.in.Nw,i=this.in.Nw;let s=-1;if(this.Ye)for(let h=0;h<this.Ye.length;h++)this.Ye[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.Ze;if(h){const e=h[s];-1!==s&&e&&(this.db?.$r(`l${t}_${i}`,e),this.re=1)}}return this.ot=-1,!0}if(this.ot===T.i.qw)return this.ae=0,this.ot=-1,!0;if(this.ot===T.i.$w)return this.jn=this.in.kw,this.ot=-1,!0;if(this.ot===T.i.Kw||this.ot===T.i.Jw||this.ot===T.i.Qw||this.ot===T.i.ty||this.ot===T.i.iy||this.ot===T.i.sy||this.ot===T.i.hy||this.ot===T.i.ey||this.ot===T.i.ny||this.ot===T.i.ly)return this.oy(this.in,this.ot),this.ot=-1,!0;if(this.ot===T.i.uy){const t=this.in.kw,i=this.in.kw;return-1!==this.vs&&(this.vs=-1,this.ns=!0),this.eh&&(this.eh=!1,this.ns=!0),this.os=t,this.bs=i,this.es=!0,this.rs=!0,this.Nh=!1,this.ot=-1,!0}if(this.ot===T.i.wy){const t=this.in.kw,i=this.in.Jr;return this.Dh[t]=i,this.Ph[t]!==i&&(this.Ph[t]=i,await this.gd(t),this.es=!0,-1!==this.nh&&(this.ns=!0)),this.ot=-1,!0}if(this.ot===T.i.yy){const t=this.in.kw;return c.i.Hr[t].ml=this.in.kw,this.ot=-1,!0}if(this.ot===T.i.my){let t=this.in.kw;const i=this.in.Nw;return 65535===t&&(t=-1),this.Xs[i]=t,this.es=!0,this.rs=!0,this.ot=-1,!0}if(this.ot===T.i.py){const t=this.in.Nw,i=this.in.Nw,s=this.in.kw,h=this.in.kw;let e=-1;if(this.Ye)for(let s=0;s<this.Ye.length;s++)this.Ye[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.Ze){this.Ze[e]&&this.Ze[e]?.length===h||(this.Ze[e]=new Int8Array(h));const t=this.Ze[e];t&&this.in.Ay(this.packetSize-6,s,t)}return this.ot=-1,!0}if(this.ot===T.i.Iy){const t=M.i.stop();return t&&(this.it.sc(b.i.hc),this.it.p2(t.Va),this.it.qa(t.data,t.Va,0),t.release()),this.ot=-1,!0}if(this.ot===T.i.gy){this.es=!0;const t=this.in.kw,i=c.i.Hr[t],s=this.in.Nw;if(i.Pl&&i.Dl){for(let t=0;t<s;t++){i.Pl[t]=this.in.kw;let s=this.in.Nw;255===s&&(s=this.in.Jr),i.Dl[t]=s}for(let t=s;t<i.Pl.length;t++)i.Pl[t]=0,i.Dl[t]=0}else for(let t=0;t<s;t++)this.in.kw,255===this.in.Nw&&this.in.Jr;return this.ot=-1,!0}if(this.ot===T.i._y)return M.i.Cy(),this.ot=-1,!0;if(this.ot===T.i.Ey)return this.Qs=!1,this.eh=!0,this.hh='',this.ns=!0,this.ot=-1,!0;if(this.ot===T.i.Ty){const t=c.i.Hr[this.in.kw];if(t.Pl)for(let i=0;i<t.Pl.length;i++)t.Pl[i]=-1,t.Pl[i]=0;return this.ot=-1,!0}if(this.ot===T.i.by){if(this.Jh=this.in.Jr,this.Qh=this.in.kw,this.te=this.in.Nw,this.ie=this.in.kw,0!==this.Jh&&-1===this.os){this._d();let t=650;201!==this.te&&(t=655),this.qh='',this.$h=!1;for(let i=0;i<c.i.Hr.length;i++)if(c.i.Hr[i]&&c.i.Hr[i].Ll===t){this.os=c.i.Hr[i].pu;break}}return this.ot=-1,!0}if(this.ot===T.i.vy)return this.Vs=this.in.Nw,this.Vs===this.zs&&(3===this.Vs?this.zs=1:this.zs=3,this.es=!0),this.ot=-1,!0;if(this.ot===T.i.Oy){if(this.Mr&&!K.t.m){const t=this.in.kw,i=this.in.Jr,s=this.packetSize-6,h=S.i.read(i,Int8Array.from(this.in.data),s,this.in.Va);(0,j.Qr)(h,this.Fr),this.Rr=t}return this.ot=-1,!0}if(this.ot===T.i.Ly)return this.Xn=this.in.Nw,this.ot=-1,!0;if(this.ot===T.i.Sy){const t=this.in.kw,i=this.in.Nw,s=this.in.kw;return this.Cr&&!K.t.m&&this._r<50&&(this.Er[this._r]=t,this.Tr[this._r]=i,this.br[this._r]=s+L.i.ky[t],this._r++),this.ot=-1,!0}if(this.ot===T.i.Ry){const t=this.in.kw,i=this.in.kw,s=r.i.get(i);return c.i.Hr[t].model=s.Zw(),this.ot=-1,!0}if(this.ot===T.i.My)return this.De=this.in.Nw,this.Fe=this.in.Nw,this.ot=-1,!0;if(this.ot===T.i.xy){const t=this.in.kw,i=this.in.kw,s=this.in.kw,h=c.i.Hr[t].model;return h?.Do(i,s),this.ot=-1,!0}if(this.ot===T.i.Ny)return this.js=this.in.Nw,this.qs=this.in.Nw,this.$s=this.in.Nw,this.ls=!0,this.ns=!0,this.ot=-1,!0;if(this.ot===T.i.Py){const t=this.in.kw;return this.Dy(t),-1!==this.vs&&(this.vs=-1,this.ns=!0),this.eh&&(this.eh=!1,this.ns=!0),this.bs=t,this.es=!0,this.rs=!0,this.os=-1,this.Nh=!1,this.ot=-1,!0}if(this.ot===T.i.Fy){const t=this.in.kw;return this.Dy(t),-1!==this.bs&&(this.bs=-1,this.es=!0,this.rs=!0),this.vs=t,this.ns=!0,this.os=-1,this.Nh=!1,this.ot=-1,!0}if(this.ot===T.i.Uy){const t=this.in.kw,i=this.in.By,s=this.in.By,h=c.i.Hr[t];return h.x=i,h.y=s,this.ot=-1,!0}if(this.ot===T.i.Gy)return this.fe=!0,this.pn=this.in.Nw,this.An=this.in.Nw,this.In=this.in.kw,this.gn=this.in.Nw,this._n=this.in.Nw,this._n>=100&&(this.Te=128*this.pn+64,this.ve=128*this.An+64,this.be=this.zc(this.$e,this.pn,this.An)-this.In),this.ot=-1,!0;if(this.ot===T.i.Hy){this.De=this.in.Nw,this.Fe=this.in.Nw;for(let t=this.De;t<this.De+8;t++)for(let i=this.Fe;i<this.Fe+8;i++)this.Fn[this.$e][t][i]&&(this.Fn[this.$e][t][i]=null,this.nw(t,i));for(let t=this.Bn.lw();t;t=this.Bn.ow())t.x>=this.De&&t.x<this.De+8&&t.z>=this.Fe&&t.z<this.Fe+8&&t.Wy===this.$e&&(this.dw(t.Wy,t.x,t.z,t.Zy,t.Yy,t.Vy,t.pu),t.Hw());return this.ot=-1,!0}if(this.ot===T.i.zy){const t=this.in.Nw,i=this.in.Nw,s=this.in.kw,h=this.in.kw;let e=-1;if(this.Ye)for(let s=0;s<this.Ye.length;s++)this.Ye[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.We){this.We[e]&&this.We[e]?.length===h||(this.We[e]=new Int8Array(h));const t=this.We[e];t&&this.in.Ay(this.packetSize-6,s,t)}return this.ot=-1,!0}if(this.ot===T.i.jd){const t=this.in.za,i=this.in.Jr,s=this.in.Nw;let h=!1;for(let t=0;t<100;t++)if(this.oh[t]===i){h=!0;break}if(s<=1)for(let i=0;i<this.ks;i++)if(this.Rs[i]===t){h=!0;break}if(!h&&0===this.ys)try{this.oh[this.ah]=i,this.ah=(this.ah+1)%100;const h=O.i.wa(this.in,this.packetSize-13),e=v.i.filter(h);s>1?this.gu(7,e,R.i.Ro(R.i.Mo(t))):this.gu(3,e,R.i.Ro(R.i.Mo(t)))}catch(t){}return this.ot=-1,!0}if(this.ot===T.i.Xy){for(let t=0;t<this.Ph.length;t++)this.Ph[t]!==this.Dh[t]&&(this.Ph[t]=this.Dh[t],await this.gd(t),this.es=!0);return this.ot=-1,!0}if(this.ot===T.i.jy){const t=this.in.kw,i=this.in.kw;return c.i.Hr[t].model=p.i.model(i),this.ot=-1,!0}if(this.ot===T.i.qy)return this.nh=this.in.By,this.ns=!0,this.ot=-1,!0;if(this.ot===T.i.$y)return 12===this.zs&&(this.es=!0),this.zn=this.in.Nw,this.ot=-1,!0;if(this.ot===T.i.Ky){if(this.fe=!0,this.un=this.in.Nw,this.dn=this.in.Nw,this.wn=this.in.kw,this.yn=this.in.Nw,this.mn=this.in.Nw,this.mn>=100){const t=128*this.un+64,i=128*this.dn+64,s=this.zc(this.$e,this.un,this.dn)-this.wn,h=t-this.Te,e=s-this.be,n=i-this.ve,r=0|Math.sqrt(h*h+n*n);this.Oe=2047&(325.949*Math.atan2(e,r)|0),this.Le=2047&(-325.949*Math.atan2(h,n)|0),this.Oe<128&&(this.Oe=128),this.Oe>383&&(this.Oe=383)}return this.ot=-1,!0}if(this.ot===T.i.Jy)return this.zs=this.in.Nw,this.es=!0,this.rs=!0,this.ot=-1,!0;if(this.ot===T.i.Qy){const t=this.in.zw;let i;if(t.endsWith(':tradereq:')){const s=t.substring(0,t.indexOf(':'));i=R.i.Vf(s);let h=!1;for(let t=0;t<this.ks;t++)if(this.Rs[t]===i){h=!0;break}h||0!==this.ys||this.gu(4,'wishes to trade with you.',s)}else if(t.endsWith(':duelreq:')){const s=t.substring(0,t.indexOf(':'));i=R.i.Vf(s);let h=!1;for(let t=0;t<this.ks;t++)if(this.Rs[t]===i){h=!0;break}h||0!==this.ys||this.gu(8,'wishes to duel with you.',s)}else this.gu(0,t,'');return this.ot=-1,!0}if(this.ot===T.i.tm){const t=this.in.kw,i=this.in.kw,s=this.in.kw,h=n.i.get(i);return c.i.Hr[t].model=h.fw(50),c.i.Hr[t].yo=h.im,c.i.Hr[t].Io=h.sm,c.i.Hr[t].zoom=100*h.hm/s|0,this.ot=-1,!0}if(this.ot===T.i.nm){const t=this.in.kw;return this.Dy(t),-1!==this.bs&&(this.bs=-1,this.es=!0,this.rs=!0),-1!==this.vs&&(this.vs=-1,this.ns=!0),this.eh&&(this.eh=!1,this.ns=!0),this.os=t,this.Nh=!1,this.ot=-1,!0}if(this.ot===T.i.rm){const t=this.in.kw,i=this.in.kw,s=i>>10&31,h=i>>5&31,e=31&i;return c.i.Hr[t].$l=(s<<19)+(h<<11)+(e<<3),this.ot=-1,!0}if(this.ot===T.i.lm){for(let t=0;t<this.Cn.length;t++){const i=this.Cn[t];i&&(i.om=-1)}for(let t=0;t<this.kn.length;t++){const i=this.kn[t];i&&(i.om=-1)}return this.ot=-1,!0}if(this.ot===T.i.am){const t=this.in.kw;return c.i.Hr[t].hide=1===this.in.Nw,this.ot=-1,!0}if(this.ot===T.i.fm){this.ks=this.packetSize/8|0;for(let t=0;t<this.ks;t++)this.Rs[t]=this.in.za;return this.ot=-1,!0}if(this.ot===T.i.um){this.fe=!1;for(let t=0;t<5;t++)this.ge[t]=!1;return this.ot=-1,!0}if(this.ot===T.i.dm)return-1!==this.bs&&(this.bs=-1,this.es=!0,this.rs=!0),-1!==this.vs&&(this.vs=-1,this.ns=!0),this.eh&&(this.eh=!1,this.ns=!0),this.os=-1,this.Nh=!1,this.ot=-1,!0;if(this.ot===T.i.wm){const t=this.in.kw;return c.i.Hr[t].text=this.in.zw,c.i.Hr[t].pu===this.Xs[this.zs]&&(this.es=!0),this.ot=-1,!0}if(this.ot===T.i.ym){this.es=!0;const t=this.in.Nw,i=this.in.Jr,s=this.in.Nw;this.Gs[t]=i,this.Hs[t]=s,this.Ws[t]=1;for(let s=0;s<98;s++)i>=this.Zs[s]&&(this.Ws[t]=s+2);return this.ot=-1,!0}if(this.ot===T.i.pm){for(this.De=this.in.Nw,this.Fe=this.in.Nw;this.in.Va<this.packetSize;){const t=this.in.Nw;this.oy(this.in,t)}return this.ot=-1,!0}if(this.ot===T.i.Am)return 12===this.zs&&(this.es=!0),this.qn=this.in.By,this.ot=-1,!0;if(this.ot===T.i.Im){const t=this.in.Nw,i=this.in.Nw,s=this.in.Nw,h=this.in.Nw;return this.ge[t]=!0,this._e[t]=i,this.Ce[t]=s,this.Ee[t]=h,this.Ie[t]=0,this.ot=-1,!0}if(this.ot===T.i.gm){this.es=!0;const t=this.in.kw,i=c.i.Hr[t];for(;this.in.Va<this.packetSize;){const t=this.in.Nw,s=this.in.kw;let h=this.in.Nw;255===h&&(h=this.in.Jr),i.Pl&&i.Dl&&t>=0&&t<i.Pl.length&&(i.Pl[t]=s,i.Dl[t]=h)}return this.ot=-1,!0}if(this.ot===T.i._m)return this.Cm(this.in,this.packetSize),1===this.re&&(this.re=2,N.i.Em=this.$e,this.Tm()),K.t.m&&2===this.re&&N.i.Em!==this.$e&&(this.ii?.bind(),this.xt?.Ta(257,151,'Loading - please wait.',A.i.zl),this.xt?.Ta(256,150,'Loading - please wait.',A.i.Ol),this.ii?.draw(8,11),N.i.Em=this.$e,this.Tm()),this.$e!==this.Pe&&2===this.re&&(this.Pe=this.$e,this.jf(this.$e)),this.ot=-1,!0;await this.Ow()}catch(t){console.log(t),await this.ec()}return!0};Tm=()=>{try{this.Pe=-1,this.Dn.clear(),this.Pn.clear(),this.Nn.clear(),this.xn.clear(),d.i.bm(),this.rf(),this.ne?.reset();for(let t=0;t<G.i.qe;t++)this.je[t]?.reset();const t=new N.i(G.i.an,G.i.an,this.nn,this.rn);N.i.m=K.t.m;const i=this.We?.length??0;if(this.Ye)for(let t=0;t<i;t++){const i=this.Ye[t]>>8,s=255&this.Ye[t];if(33===i&&s>=71&&s<=73){N.i.m=!1;break}}if(K.t.m?this.ne?.vm(this.$e):this.ne?.vm(0),this.Ye&&this.We){this.it.sc(b.i.xc);for(let s=0;s<i;s++){const i=64*(this.Ye[s]>>8)-this.Ge,h=64*(255&this.Ye[s])-this.He,e=this.We[s];if(e){const s=new I.i(new Uint8Array(e)).Jr,n=S.i.read(s,e,e.length-4,4);t.Om(8*(this.Ue-6),8*(this.Be-6),i,h,n)}else this.Be<800&&t.Lm(h,i,64,64)}}if(this.Ye&&this.Ze){this.it.sc(b.i.xc);for(let s=0;s<i;s++){const i=this.Ze[s];if(i){const h=new I.i(new Uint8Array(i)).Jr,e=S.i.read(h,i,i.length-4,4),n=64*(this.Ye[s]>>8)-this.Ge,r=64*(255&this.Ye[s])-this.He;t.Sm(this.ne,this.Pn,this.je,e,n,r)}}}this.it.sc(b.i.xc),t.km(this.ne,this.je),this.ii?.bind(),this.it.sc(b.i.xc);for(let t=this.Pn.lw();t;t=this.Pn.ow())2===(this.rn&&2&this.rn[1][t.Rm][t.Mm])&&(t.xm--,t.xm<0&&t.Hw());for(let t=0;t<G.i.an;t++)for(let i=0;i<G.i.an;i++)this.nw(t,i);for(let t=this.Bn.lw();t;t=this.Bn.ow())this.dw(t.Wy,t.x,t.z,t.Nm,t.angle,t.shape,t.pu)}catch(t){}e.i.lf?.clear(),d.i.da(20)};Dy=t=>{const i=c.i.Hr[t];if(i.yl)for(let t=0;t<i.yl.length&&-1!==i.yl[t];t++){const s=c.i.Hr[i.yl[t]];1===s.type&&this.Dy(s.id),s.Il=0,s.Al=0}};Aa=()=>{let t=0;for(let i=0;i<99;i++){const s=i+1;t+=s+300*Math.pow(2,s/7)|0,this.Zs[i]=t/4|0}};gu=(t,i,s)=>{0===t&&-1!==this.nh&&(this.Ys=i,this.Da=0),-1===this.vs&&(this.ns=!0);for(let t=99;t>0;t--)this.messageType[t]=this.messageType[t-1],this.lh[t]=this.lh[t-1],this.rh[t]=this.rh[t-1];this.messageType[0]=t,this.lh[0]=s,this.rh[0]=i};gd=async t=>{const i=a.i.Hr[t].Pm;if(0!==i){const s=this.Ph[t];if(1===i&&(1===s&&d.i.ua(.9),2===s&&d.i.ua(.8),3===s&&d.i.ua(.7),4===s&&d.i.ua(.6),n.i.cf?.clear(),this.wt=!0),3===i){const t=this.Mr;0===s&&(this.Fr=256,(0,j.Dm)(256),this.Mr=!0),1===s&&(this.Fr=192,(0,j.Dm)(192),this.Mr=!0),2===s&&(this.Fr=128,(0,j.Dm)(128),this.Mr=!0),3===s&&(this.Fr=64,(0,j.Dm)(64),this.Mr=!0),4===s&&(this.Mr=!1),this.Mr!==t&&(this.Mr&&this.Nr?await this.Kr(this.Nr,this.Pr,this.Dr):(0,j.Br)(),this.Rr=0)}4===i&&(0===s&&(this.vr=256,(0,j.Fm)(256),this.Cr=!0),1===s&&(this.vr=192,(0,j.Fm)(192),this.Cr=!0),2===s&&(this.vr=128,(0,j.Fm)(128),this.Cr=!0),3===s&&(this.vr=64,(0,j.Fm)(64),this.Cr=!0),4===s&&(this.Cr=!1)),5===i&&(this.Hh=s),6===i&&(this.uh=s),8===i&&(this.fh=s,this.ns=!0)}};Um=(t,i)=>{let s=0;for(let t=0;t<100;t++){if(!this.rh[t])continue;const h=this.messageType[t],e=this.Ss+70+4-14*s;if(e<-20)break;0===h&&s++,1!==h&&2!==h||!(1===h||0===this.js||1===this.js&&this.mf(this.lh[t]))||(i>e-14&&i<=e&&this.Vn&&this.lh[t]!==this.Vn.name&&(this.Qn&&(this.Ts[this.Es]='Report abuse @whi@'+this.lh[t],this.Wh[this.Es]=34,this.Es++),this.Ts[this.Es]='Add ignore @whi@'+this.lh[t],this.Wh[this.Es]=436,this.Es++,this.Ts[this.Es]='Add friend @whi@'+this.lh[t],this.Wh[this.Es]=406,this.Es++),s++),3!==h&&7!==h||0!==this.fh||!(7===h||0===this.qs||1===this.qs&&this.mf(this.lh[t]))||(i>e-14&&i<=e&&(this.Qn&&(this.Ts[this.Es]='Report abuse @whi@'+this.lh[t],this.Wh[this.Es]=34,this.Es++),this.Ts[this.Es]='Add ignore @whi@'+this.lh[t],this.Wh[this.Es]=436,this.Es++,this.Ts[this.Es]='Add friend @whi@'+this.lh[t],this.Wh[this.Es]=406,this.Es++),s++),4===h&&(0===this.$s||1===this.$s&&this.mf(this.lh[t]))&&(i>e-14&&i<=e&&(this.Ts[this.Es]='Accept trade @whi@'+this.lh[t],this.Wh[this.Es]=903,this.Es++),s++),(5===h||6===h)&&0===this.fh&&this.qs<2&&s++,8===h&&(0===this.$s||1===this.$s&&this.mf(this.lh[t]))&&(i>e-14&&i<=e&&(this.Ts[this.Es]='Accept duel @whi@'+this.lh[t],this.Wh[this.Es]=363,this.Es++),s++)}};Bm=t=>{if(0==this.fh)return;let i=0;0!=this.rt&&(i=1);for(let s=0;s<100;s++)if(null!=this.rh[s]){const h=this.messageType[s];if((3==h||7==h)&&(7==h||0==this.qs||1==this.qs&&this.mf(this.lh[s]))){const h=329-13*i;if(this.Gl>8&&this.Gl<520&&t-11>h-10&&t-11<=h+3&&(this.Qn&&(this.Ts[this.Es]='Report abuse @whi@'+this.lh[s],this.Wh[this.Es]=2034,this.Es++),this.Ts[this.Es]='Add ignore @whi@'+this.lh[s],this.Wh[this.Es]=2436,this.Es++,this.Ts[this.Es]='Add friend @whi@'+this.lh[s],this.Wh[this.Es]=2406,this.Es++),i++,i>=5)return}if((5==h||6==h)&&this.qs<2&&(i++,i>=5))return}};Gm=(t,i,s,h,e,r)=>{if(0!==t.type||!t.yl||t.hide||i<h||s<e||i>h+t.width||s>e+t.height||!t.Tl||!t.bl)return;const l=t.yl.length;for(let o=0;o<l;o++){let l=t.Tl[o]+h,a=t.bl[o]+e-r;const f=c.i.Hr[t.yl[o]];if(l+=f.x,a+=f.y,(f.Hm>=0||0!==f.Jl)&&i>=l&&s>=a&&i<l+f.width&&s<a+f.height&&(f.Hm>=0?this.jh=f.Hm:this.jh=f.id),0===f.type)this.Gm(f,i,s,l,a,f.Rl),f.scroll>f.height&&this.Dc(i,s,f.scroll,f.height,!0,l+f.width,a,f);else if(2===f.type){let t=0;for(let h=0;h<f.height;h++)for(let e=0;e<f.width;e++){let r=l+e*(f.Fl+32),o=a+h*(f.Ul+32);if(t<20&&f.xl&&f.Nl&&(r+=f.xl[t],o+=f.Nl[t]),i<r||s<o||i>=r+32||s>=o+32){t++;continue}if(this.Xh=t,this.zh=f.id,!f.Pl||f.Pl[t]<=0){t++;continue}const c=n.i.get(f.Pl[t]-1);if(1===this.Th&&f.Wm)f.id===this.Oh&&t===this.bh||(this.Ts[this.Es]='Use '+this.Sh+' with @lre@'+c.name,this.Wh[this.Es]=881,this.Zh[this.Es]=c.index,this.Yh[this.Es]=t,this.Vh[this.Es]=f.id,this.Es++);else if(1===this.Fh&&f.Wm)16==(16&this.Bh)&&(this.Ts[this.Es]=this.Gh+' @lre@'+c.name,this.Wh[this.Es]=391,this.Zh[this.Es]=c.index,this.Yh[this.Es]=t,this.Vh[this.Es]=f.id,this.Es++);else{if(f.Wm)for(let i=4;i>=3;i--)c.Zm&&c.Zm[i]?(this.Ts[this.Es]=c.Zm[i]+' @lre@'+c.name,3===i?this.Wh[this.Es]=478:4===i&&(this.Wh[this.Es]=347),this.Zh[this.Es]=c.index,this.Yh[this.Es]=t,this.Vh[this.Es]=f.id,this.Es++):4===i&&(this.Ts[this.Es]='Drop @lre@'+c.name,this.Wh[this.Es]=347,this.Zh[this.Es]=c.index,this.Yh[this.Es]=t,this.Vh[this.Es]=f.id,this.Es++);if(f.Ym&&(this.Ts[this.Es]='Use @lre@'+c.name,this.Wh[this.Es]=188,this.Zh[this.Es]=c.index,this.Yh[this.Es]=t,this.Vh[this.Es]=f.id,this.Es++),f.Wm&&c.Zm)for(let i=2;i>=0;i--)c.Zm[i]&&(this.Ts[this.Es]=c.Zm[i]+' @lre@'+c.name,0===i?this.Wh[this.Es]=405:1===i?this.Wh[this.Es]=38:2===i&&(this.Wh[this.Es]=422),this.Zh[this.Es]=c.index,this.Yh[this.Es]=t,this.Vh[this.Es]=f.id,this.Es++);if(f.Zm)for(let i=4;i>=0;i--)f.Zm[i]&&(this.Ts[this.Es]=f.Zm[i]+' @lre@'+c.name,0===i?this.Wh[this.Es]=602:1===i?this.Wh[this.Es]=596:2===i?this.Wh[this.Es]=22:3===i?this.Wh[this.Es]=892:4===i&&(this.Wh[this.Es]=415),this.Zh[this.Es]=c.index,this.Yh[this.Es]=t,this.Vh[this.Es]=f.id,this.Es++);this.Ts[this.Es]='Examine @lre@'+c.name,this.Wh[this.Es]=1773,this.Zh[this.Es]=c.index,f.Dl&&(this.Vh[this.Es]=f.Dl[t]),this.Es++}t++}}else if(i>=l&&s>=a&&i<l+f.width&&s<a+f.height)if(f.so===c.i.Vm){let t=!1;0!==f.Ll&&(t=this.zm(f)),!t&&f.Xm&&(this.Ts[this.Es]=f.Xm,this.Wh[this.Es]=951,this.Vh[this.Es]=f.id,this.Es++)}else if(f.so===c.i.jm&&0===this.Fh){let t=f.hd;t&&-1!==t.indexOf(' ')&&(t=t.substring(0,t.indexOf(' '))),this.Ts[this.Es]=t+' @gre@'+f.action,this.Wh[this.Es]=930,this.Vh[this.Es]=f.id,this.Es++}else f.so===c.i.qm?(this.Ts[this.Es]='Close',this.Wh[this.Es]=947,this.Vh[this.Es]=f.id,this.Es++):f.so===c.i.$m&&f.Xm?(this.Ts[this.Es]=f.Xm,this.Wh[this.Es]=465,this.Vh[this.Es]=f.id,this.Es++):f.so===c.i.Km&&f.Xm?(this.Ts[this.Es]=f.Xm,this.Wh[this.Es]=960,this.Vh[this.Es]=f.id,this.Es++):f.so===c.i.ho&&!this.Nh&&f.Xm&&(this.Ts[this.Es]=f.Xm,this.Wh[this.Es]=44,this.Vh[this.Es]=f.id,this.Es++)}};zm=t=>{let i=t.Ll;return i>=c.i.To&&i<=c.i.Oo?(i>=c.i.vo?i-=c.i.vo:i--,this.Ts[this.Es]='Remove @whi@'+this.pr[i],this.Wh[this.Es]=557,this.Es++,this.Ts[this.Es]='Message @whi@'+this.pr[i],this.Wh[this.Es]=679,this.Es++,!0):i>=c.i.So&&i<=c.i.ko&&(this.Ts[this.Es]='Remove @whi@'+t.text,this.Wh[this.Es]=556,this.Es++,!0)};Jm=()=>{0===this.Th&&0===this.Fh&&(this.Ts[this.Es]='Walk here',this.Wh[this.Es]=660,this.Yh[this.Es]=this.Gl,this.Vh[this.Es]=this.Hl,this.Es++);let t=-1;for(let i=0;i<p.i.Qc;i++){const s=p.i.Qm[i],h=127&s,r=s>>7&127,l=s>>29&3,o=s>>14&32767;if(s!==t){if(t=s,2===l&&this.ne&&this.ne.eu(this.$e,h,r,s)>=0){const t=e.i.get(o);if(1===this.Th)this.Ts[this.Es]='Use '+this.Sh+' with @cya@'+t.name,this.Wh[this.Es]=450,this.Zh[this.Es]=s,this.Yh[this.Es]=h,this.Vh[this.Es]=r,this.Es++;else if(1!==this.Fh){if(t.tp)for(let i=4;i>=0;i--)t.tp[i]&&(this.Ts[this.Es]=t.tp[i]+' @cya@'+t.name,0===i&&(this.Wh[this.Es]=285),1===i&&(this.Wh[this.Es]=504),2===i&&(this.Wh[this.Es]=364),3===i&&(this.Wh[this.Es]=581),4===i&&(this.Wh[this.Es]=1501),this.Zh[this.Es]=s,this.Yh[this.Es]=h,this.Vh[this.Es]=r,this.Es++);this.Ts[this.Es]='Examine @cya@'+t.name,this.Wh[this.Es]=1175,this.Zh[this.Es]=s,this.Yh[this.Es]=h,this.Vh[this.Es]=r,this.Es++}else 4==(4&this.Bh)&&(this.Ts[this.Es]=this.Gh+' @cya@'+t.name,this.Wh[this.Es]=55,this.Zh[this.Es]=s,this.Yh[this.Es]=h,this.Vh[this.Es]=r,this.Es++)}if(1===l){const t=this.kn[o];if(t&&t.type&&1===t.type.size&&64==(127&t.x)&&64==(127&t.z))for(let i=0;i<this.Rn;i++){const s=this.kn[this.Mn[i]];s&&s!==t&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.ip(s.type,this.Mn[i],h,r)}t&&t.type&&this.ip(t.type,o,h,r)}if(0===l){const t=this.Cn[o];if(t&&64==(127&t.x)&&64==(127&t.z)){for(let i=0;i<this.Rn;i++){const s=this.kn[this.Mn[i]];s&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.ip(s.type,this.Mn[i],h,r)}for(let i=0;i<this.En;i++){const s=this.Cn[this.Tn[i]];s&&s!==t&&s.x===t.x&&s.z===t.z&&this.sp(s,this.Tn[i],h,r)}}t&&this.sp(t,o,h,r)}if(3===l){const t=this.Fn[this.$e][h][r];if(!t)continue;for(let i=t.hp();i;i=t.next()){const t=n.i.get(i.index);if(1===this.Th)this.Ts[this.Es]='Use '+this.Sh+' with @lre@'+t.name,this.Wh[this.Es]=217,this.Zh[this.Es]=i.index,this.Yh[this.Es]=h,this.Vh[this.Es]=r,this.Es++;else if(1!==this.Fh){for(let s=4;s>=0;s--)t.tp&&t.tp[s]?(this.Ts[this.Es]=t.tp[s]+' @lre@'+t.name,0===s&&(this.Wh[this.Es]=224),1===s&&(this.Wh[this.Es]=993),2===s&&(this.Wh[this.Es]=99),3===s&&(this.Wh[this.Es]=746),4===s&&(this.Wh[this.Es]=877),this.Zh[this.Es]=i.index,this.Yh[this.Es]=h,this.Vh[this.Es]=r,this.Es++):2===s&&(this.Ts[this.Es]='Take @lre@'+t.name,this.Wh[this.Es]=99,this.Zh[this.Es]=i.index,this.Yh[this.Es]=h,this.Vh[this.Es]=r,this.Es++);this.Ts[this.Es]='Examine @lre@'+t.name,this.Wh[this.Es]=1102,this.Zh[this.Es]=i.index,this.Yh[this.Es]=h,this.Vh[this.Es]=r,this.Es++}else 1==(1&this.Bh)&&(this.Ts[this.Es]=this.Gh+' @lre@'+t.name,this.Wh[this.Es]=965,this.Zh[this.Es]=i.index,this.Yh[this.Es]=h,this.Vh[this.Es]=r,this.Es++)}}}}};ip=(t,i,s,h)=>{if(this.Es>=400)return;let e=t.name;if(0!==t.ep&&this.Vn&&(e=e+this.np(this.Vn.ta,t.ep)+' (level-'+t.ep+')'),1===this.Th)this.Ts[this.Es]='Use '+this.Sh+' with @yel@'+e,this.Wh[this.Es]=900,this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++;else if(1!==this.Fh){let n;if(t.tp)for(n=4;n>=0;n--)t.tp[n]&&'attack'!==t.tp[n]?.toLowerCase()&&(this.Ts[this.Es]=t.tp[n]+' @yel@'+e,0===n?this.Wh[this.Es]=728:1===n?this.Wh[this.Es]=542:2===n?this.Wh[this.Es]=6:3===n?this.Wh[this.Es]=963:4===n&&(this.Wh[this.Es]=245),this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++);if(t.tp)for(n=4;n>=0;n--)if(t.tp[n]&&'attack'===t.tp[n]?.toLowerCase()){let r=0;this.Vn&&t.ep>this.Vn.ta&&(r=2e3),this.Ts[this.Es]=t.tp[n]+' @yel@'+e,0===n?this.Wh[this.Es]=r+728:1===n?this.Wh[this.Es]=r+542:2===n?this.Wh[this.Es]=r+6:3===n?this.Wh[this.Es]=r+963:4===n&&(this.Wh[this.Es]=r+245),this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++}this.Ts[this.Es]='Examine @yel@'+e,this.Wh[this.Es]=1607,this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++}else 2==(2&this.Bh)&&(this.Ts[this.Es]=this.Gh+' @yel@'+e,this.Wh[this.Es]=265,this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++)};sp=(t,i,s,h)=>{if(t===this.Vn||this.Es>=400)return;let e=null;this.Vn&&(e=t.name+this.np(this.Vn.ta,t.ta)+' (level-'+t.ta+')'),1===this.Th?(this.Ts[this.Es]='Use '+this.Sh+' with @whi@'+e,this.Wh[this.Es]=367,this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++):1!==this.Fh?(this.Ts[this.Es]='Follow @whi@'+e,this.Wh[this.Es]=1544,this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++,0===this.ys&&(this.Ts[this.Es]='Trade with @whi@'+e,this.Wh[this.Es]=1373,this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++),this.Kn>0&&(this.Ts[this.Es]='Attack @whi@'+e,this.Vn&&this.Vn.ta>=t.ta?this.Wh[this.Es]=151:this.Wh[this.Es]=2151,this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++),1===this.Jn&&(this.Ts[this.Es]='Fight @whi@'+e,this.Wh[this.Es]=151,this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++),2===this.Jn&&(this.Ts[this.Es]='Duel-with @whi@'+e,this.Wh[this.Es]=1101,this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++)):8==(8&this.Bh)&&(this.Ts[this.Es]=this.Gh+' @whi@'+e,this.Wh[this.Es]=651,this.Zh[this.Es]=i,this.Yh[this.Es]=s,this.Vh[this.Es]=h,this.Es++);for(let t=0;t<this.Es;t++)if(660===this.Wh[t])return void(this.Ts[t]='Walk here @whi@'+e)};np=(t,i)=>{const s=t-i;return s<-9?'@red@':s<-6?'@or3@':s<-3?'@or2@':s<0?'@or1@':s>9?'@gre@':s>6?'@gr3@':s>3?'@gr2@':s>0?'@gr1@':'@yel@'};uc=()=>{if(0===this.Ih){this.Ts[0]='Cancel',this.Wh[0]=1252,this.Es=1,this.Bm(this.Hl),this.jh=0,this.Gl>8&&this.Hl>11&&this.Gl<520&&this.Hl<345&&(-1===this.os?this.Jm():this.Gm(c.i.Hr[this.os],this.Gl,this.Hl,8,11,0)),this.jh!==this.wh&&(this.wh=this.jh),this.jh=0,this.Gl>562&&this.Hl>231&&this.Gl<752&&this.Hl<492&&(-1!==this.bs?this.Gm(c.i.Hr[this.bs],this.Gl,this.Hl,562,231,0):-1!==this.Xs[this.zs]&&this.Gm(c.i.Hr[this.Xs[this.zs]],this.Gl,this.Hl,562,231,0)),this.jh!==this.yh&&(this.es=!0,this.yh=this.jh),this.jh=0,this.Gl>22&&this.Hl>375&&this.Gl<431&&this.Hl<471&&(-1===this.vs?this.Um(this.Gl-22,this.Hl-375):this.Gm(c.i.Hr[this.vs],this.Gl,this.Hl,22,375,0)),-1!==this.vs&&this.jh!==this.mh&&(this.ns=!0,this.mh=this.jh);let t=!1;for(;!t;){t=!0;for(let i=0;i<this.Es-1;i++)if(this.Wh[i]<1e3&&this.Wh[i+1]>1e3){const s=this.Ts[i];this.Ts[i]=this.Ts[i+1],this.Ts[i+1]=s;const h=this.Wh[i];this.Wh[i]=this.Wh[i+1],this.Wh[i+1]=h;const e=this.Yh[i];this.Yh[i]=this.Yh[i+1],this.Yh[i+1]=e;const n=this.Vh[i];this.Vh[i]=this.Vh[i+1],this.Vh[i+1]=n;const r=this.Zh[i];this.Zh[i]=this.Zh[i+1],this.Zh[i+1]=r,t=!1}}}};yc=()=>{let t=0;if(this.Nt){let i;t=this.Nt.pf('Choose Option');for(let s=0;s<this.Es;s++)i=this.Nt.pf(this.Ts[s]),i>t&&(t=i)}t+=8;const i=15*this.Es+21;let s,h;this.Fa>8&&this.Ua>11&&this.Fa<520&&this.Ua<345&&(s=this.Fa-(t/2|0)-8,s+t>512?s=512-t:s<0&&(s=0),h=this.Ua-11,h+i>334?h=334-i:h<0&&(h=0),this.ps=!0,this.As=0,this.Is=s,this.gs=h,this._s=t,this.Cs=15*this.Es+22),this.Fa>562&&this.Ua>231&&this.Fa<752&&this.Ua<492&&(s=this.Fa-(t/2|0)-562,s<0?s=0:s+t>190&&(s=190-t),h=this.Ua-231,h<0?h=0:h+i>261&&(h=261-i),this.ps=!0,this.As=1,this.Is=s,this.gs=h,this._s=t,this.Cs=15*this.Es+22),this.Fa>22&&this.Ua>375&&this.Fa<501&&this.Ua<471&&(s=this.Fa-(t/2|0)-22,s<0?s=0:s+t>479&&(s=479-t),h=this.Ua-375,h<0?h=0:h+i>96&&(h=96-i),this.ps=!0,this.As=2,this.Is=s,this.gs=h,this._s=t,this.Cs=15*this.Es+22)};_c=(t,i,s,h,e,n,r,l,o,a,c)=>{const f=this.je[this.$e];if(!f)return!1;const u=G.i.an,d=G.i.an;for(let t=0;t<u;t++)for(let i=0;i<d;i++){const s=G.i.index(t,i);this.Wn[s]=0,this.Zn[s]=99999999}let w=t,y=i;const m=G.i.index(t,i);this.Wn[m]=99,this.Zn[m]=0;let p=0,A=0;this.Gn[p]=t,this.Hn[p++]=i;let I=!1,g=this.Gn.length;const _=f.flags;for(;A!==p;){if(w=this.Gn[A],y=this.Hn[A],A=(A+1)%g,w===s&&y===h){I=!0;break}if(o!==D.i.ru){if((o<D.i.rp||o===D.i.Zd)&&f.lp(w,y,s,h,o-1,l)){I=!0;break}if(o<D.i.Zd&&f.op(w,y,s,h,o-1,l)){I=!0;break}}if(0!==n&&0!==r&&f.ap(w,y,s,h,n,r,a)){I=!0;break}const t=this.Zn[G.i.index(w,y)]+1;let i=G.i.index(w-1,y);w>0&&0===this.Wn[i]&&(_[i]&H.i.Qf)===H.i.OPEN&&(this.Gn[p]=w-1,this.Hn[p]=y,p=(p+1)%g,this.Wn[i]=2,this.Zn[i]=t),i=G.i.index(w+1,y),w<u-1&&0===this.Wn[i]&&(_[i]&H.i.tu)===H.i.OPEN&&(this.Gn[p]=w+1,this.Hn[p]=y,p=(p+1)%g,this.Wn[i]=8,this.Zn[i]=t),i=G.i.index(w,y-1),y>0&&0===this.Wn[i]&&(_[i]&H.i.iu)===H.i.OPEN&&(this.Gn[p]=w,this.Hn[p]=y-1,p=(p+1)%g,this.Wn[i]=1,this.Zn[i]=t),i=G.i.index(w,y+1),y<d-1&&0===this.Wn[i]&&(_[i]&H.i.su)===H.i.OPEN&&(this.Gn[p]=w,this.Hn[p]=y+1,p=(p+1)%g,this.Wn[i]=4,this.Zn[i]=t),i=G.i.index(w-1,y-1),w>0&&y>0&&0===this.Wn[i]&&0==(_[i]&H.i.cp)&&(_[G.i.index(w-1,y)]&H.i.Qf)===H.i.OPEN&&(_[G.i.index(w,y-1)]&H.i.iu)===H.i.OPEN&&(this.Gn[p]=w-1,this.Hn[p]=y-1,p=(p+1)%g,this.Wn[i]=3,this.Zn[i]=t),i=G.i.index(w+1,y-1),w<u-1&&y>0&&0===this.Wn[i]&&0==(_[i]&H.i.fp)&&(_[G.i.index(w+1,y)]&H.i.tu)===H.i.OPEN&&(_[G.i.index(w,y-1)]&H.i.iu)===H.i.OPEN&&(this.Gn[p]=w+1,this.Hn[p]=y-1,p=(p+1)%g,this.Wn[i]=9,this.Zn[i]=t),i=G.i.index(w-1,y+1),w>0&&y<d-1&&0===this.Wn[i]&&0==(_[i]&H.i.up)&&(_[G.i.index(w-1,y)]&H.i.Qf)===H.i.OPEN&&(_[G.i.index(w,y+1)]&H.i.su)===H.i.OPEN&&(this.Gn[p]=w-1,this.Hn[p]=y+1,p=(p+1)%g,this.Wn[i]=6,this.Zn[i]=t),i=G.i.index(w+1,y+1),w<u-1&&y<d-1&&0===this.Wn[i]&&0==(_[i]&H.i.dp)&&(_[G.i.index(w+1,y)]&H.i.tu)===H.i.OPEN&&(_[G.i.index(w,y+1)]&H.i.su)===H.i.OPEN&&(this.Gn[p]=w+1,this.Hn[p]=y+1,p=(p+1)%g,this.Wn[i]=12,this.Zn[i]=t)}if(this.Yn=0,!I){if(c){let t=100;for(let i=1;i<2;i++){for(let e=s-i;e<=s+i;e++)for(let s=h-i;s<=h+i;s++){const i=G.i.index(e,s);e>=0&&s>=0&&e<G.i.an&&s<G.i.an&&this.Zn[i]<t&&(t=this.Zn[i],w=e,y=s,this.Yn=1,I=!0)}if(I)break}}if(!I)return!1}A=0,this.Gn[A]=w,this.Hn[A++]=y;let C=this.Wn[G.i.index(w,y)],E=C;for(;w!==t||y!==i;)E!==C&&(C=E,this.Gn[A]=w,this.Hn[A++]=y),0!=(2&E)?w++:0!=(8&E)&&w--,0!=(1&E)?y++:0!=(4&E)&&y--,E=this.Wn[G.i.index(w,y)];if(A>0){g=Math.min(A,25),A--;const t=this.Gn[A],i=this.Hn[A];0===e?(this.it.sc(b.i.wp),this.it.p1(g+g+3)):1===e?(this.it.sc(b.i.yp),this.it.p1(g+g+3+14)):2===e&&(this.it.sc(b.i.mp),this.it.p1(g+g+3)),1===this.ac[5]?this.it.p1(1):this.it.p1(0),this.it.p2(t+this.Ge),this.it.p2(i+this.He),this.ae=this.Gn[0],this.ce=this.Hn[0];for(let s=1;s<g;s++)A--,this.it.p1(this.Gn[A]-t),this.it.p1(this.Hn[A]-i);return!0}return 1!==e};Cm=(t,i)=>{this.vn=0,this.bn=0,this.pp(t),this.Ap(t),this.Ip(t,i),this.gp(t);for(let t=0;t<this.vn;t++){const i=this.Ln[t],s=this.Cn[i];s&&(s.Kc!==this.$&&(this.Cn[i]=null))}if(t.Va!==i)throw new Error(`eek! Error packet size mismatch in getplayer pos:${t.Va} psize:${i}`);for(let t=0;t<this.En;t++)if(!this.Cn[this.Tn[t]])throw new Error(`eek! ${this.username} null entry in pl list - pos:${t} size:${this.En}`)};pp=t=>{t._p();if(0!==t.Cp(1)){const i=t.Cp(2);if(0===i)this.On[this.bn++]=this.Y;else if(1===i){const i=t.Cp(3);this.Vn?.step(!1,i);1===t.Cp(1)&&(this.On[this.bn++]=this.Y)}else if(2===i){const i=t.Cp(3);this.Vn?.step(!0,i);const s=t.Cp(3);this.Vn?.step(!0,s);1===t.Cp(1)&&(this.On[this.bn++]=this.Y)}else if(3===i){this.$e=t.Cp(2);const i=t.Cp(7),s=t.Cp(7),h=t.Cp(1);this.Vn?.move(1===h,i,s);1===t.Cp(1)&&(this.On[this.bn++]=this.Y)}}};Ap=t=>{const i=t.Cp(8);if(i<this.En)for(let t=i;t<this.En;t++)this.Ln[this.vn++]=this.Tn[t];if(i>this.En)throw new Error(`eek! ${this.username} Too many players`);this.En=0;for(let s=0;s<i;s++){const i=this.Tn[s],h=this.Cn[i];if(0===t.Cp(1))this.Tn[this.En++]=i,h&&(h.Kc=this.$);else{const s=t.Cp(2);if(0===s)this.Tn[this.En++]=i,h&&(h.Kc=this.$),this.On[this.bn++]=i;else if(1===s){this.Tn[this.En++]=i,h&&(h.Kc=this.$);const s=t.Cp(3);h?.step(!1,s);1===t.Cp(1)&&(this.On[this.bn++]=i)}else if(2===s){this.Tn[this.En++]=i,h&&(h.Kc=this.$);const s=t.Cp(3);h?.step(!0,s);const e=t.Cp(3);h?.step(!0,e);1===t.Cp(1)&&(this.On[this.bn++]=i)}else 3===s&&(this.Ln[this.vn++]=i)}}};Ip=(t,i)=>{let s;for(;t.Ep+10<8*i&&(s=t.Cp(11),2047!==s);){if(!this.Cn[s]){this.Cn[s]=new W.i;const t=this.Sn[s];t&&this.Cn[s]?.read(t)}this.Tn[this.En++]=s;const i=this.Cn[s];i&&(i.Kc=this.$);let h=t.Cp(5);h>15&&(h-=32);let e=t.Cp(5);e>15&&(e-=32);const n=t.Cp(1);this.Vn&&i?.move(1===n,this.Vn.Cc[0]+h,this.Vn.Ec[0]+e);1===t.Cp(1)&&(this.On[this.bn++]=s)}t.Tp()};gp=t=>{for(let i=0;i<this.bn;i++){const s=this.On[i],h=this.Cn[s];if(!h)continue;let e=t.Nw;128==(128&e)&&(e+=t.Nw<<8),this.bp(h,s,e,t)}};bp=(t,i,s,e)=>{if(t.vp=s,t.Op=this.$,1==(1&s)){const s=e.Nw,h=new Uint8Array(s),n=new I.i(h);e.Ay(s,0,h),this.Sn[i]=n,t.read(n)}if(2==(2&s)){let i=e.kw;65535===i&&(i=-1),i===t.om&&(t.Lp=0);const s=e.Nw;(-1===i||-1===t.om||h.i.Hr[i].priority>h.i.Hr[t.om].priority||0===h.i.Hr[t.om].priority)&&(t.om=i,t.Sp=0,t.kp=0,t.Rp=s,t.Lp=0)}if(4==(4&s)&&(t.Mp=e.kw,65535===t.Mp&&(t.Mp=-1)),8==(8&s)&&(t.yf=e.zw,t.Af=0,t.If=0,t.gf=150,t.name&&this.gu(2,t.yf,t.name)),16==(16&s)&&(t.bf=e.Nw,t.Tf=e.Nw,t._f=this.$+400,t.Cf=e.Nw,t.Ef=e.Nw),32==(32&s)&&(t.xp=e.kw,t.Np=e.kw,t.Pp=t.xp,t.Dp=t.Np),64==(64&s)){const i=e.kw,s=e.Nw,h=e.Nw,n=e.Va;if(t.name){const n=R.i.Vf(t.name);let r=!1;if(s<=1)for(let t=0;t<this.ks;t++)if(this.Rs[t]===n){r=!0;break}if(!r&&0===this.ys)try{const n=O.i.wa(e,h),r=v.i.filter(n);t.yf=r,t.Af=i>>8,t.If=255&i,t.gf=150,s>1?this.gu(1,r,t.name):this.gu(2,r,t.name)}catch(t){}}e.Va=n+h}if(256==(256&s)){t.Fp=e.kw;const i=e.Jr;t.Up=i>>16,t.Bp=this.$+(65535&i),t.Gp=0,t.Hp=0,t.Bp>this.$&&(t.Gp=-1),65535===t.Fp&&(t.Fp=-1)}512==(512&s)&&(t.Wp=e.Nw,t.Zp=e.Nw,t.Yp=e.Nw,t.Vp=e.Nw,t.zp=e.kw+this.$,t.Xp=e.kw+this.$,t.jp=e.Nw,t.pathLength=0,t.Cc[0]=t.Yp,t.Ec[0]=t.Vp)};Uw=(t,i)=>{this.vn=0,this.bn=0,this.qp(t),this.$p(t,i),this.Kp(t);for(let t=0;t<this.vn;t++){const i=this.Ln[t],s=this.kn[i];s&&(s.Kc!==this.$&&(s.type=null,this.kn[i]=null))}if(t.Va!==i)throw new Error(`eek! ${this.username} size mismatch in getnpcpos - pos:${t.Va} psize:${i}`);for(let t=0;t<this.Rn;t++)if(!this.kn[this.Mn[t]])throw new Error(`eek! ${this.username} null entry in npc list - pos:${t} size:${this.Rn}`)};qp=t=>{t._p();const i=t.Cp(8);if(i<this.Rn)for(let t=i;t<this.Rn;t++)this.Ln[this.vn++]=this.Mn[t];if(i>this.Rn)throw new Error(`eek! ${this.username} Too many npc!`);this.Rn=0;for(let s=0;s<i;s++){const i=this.Mn[s],h=this.kn[i];if(0===t.Cp(1))this.Mn[this.Rn++]=i,h&&(h.Kc=this.$);else{const s=t.Cp(2);if(0===s)this.Mn[this.Rn++]=i,h&&(h.Kc=this.$),this.On[this.bn++]=i;else if(1===s){this.Mn[this.Rn++]=i,h&&(h.Kc=this.$);const s=t.Cp(3);h?.step(!1,s);1===t.Cp(1)&&(this.On[this.bn++]=i)}else if(2===s){this.Mn[this.Rn++]=i,h&&(h.Kc=this.$);const s=t.Cp(3);h?.step(!0,s);const e=t.Cp(3);h?.step(!0,e);1===t.Cp(1)&&(this.On[this.bn++]=i)}else 3===s&&(this.Ln[this.vn++]=i)}}};$p=(t,i)=>{for(;t.Ep+21<8*i;){const i=t.Cp(13);if(8191===i)break;this.kn[i]||(this.kn[i]=new Z.i);const s=this.kn[i];this.Mn[this.Rn++]=i,s?(s.Kc=this.$,s.type=r.i.get(t.Cp(11)),s.size=s.type.size,s.Jp=s.type.Qp,s.tA=s.type.iA,s.sA=s.type.hA,s.eA=s.type.nA,s.Bo=s.type.rA):t.Cp(11);let h=t.Cp(5);h>15&&(h-=32);let e=t.Cp(5);e>15&&(e-=32),this.Vn&&s?.move(!1,this.Vn.Cc[0]+h,this.Vn.Ec[0]+e);1===t.Cp(1)&&(this.On[this.bn++]=i)}t.Tp()};Kp=t=>{for(let i=0;i<this.bn;i++){const s=this.On[i],e=this.kn[s];if(!e)continue;const n=t.Nw;if(e.vp=n,e.Op=this.$,2==(2&n)){let i=t.kw;65535===i&&(i=-1),i===e.om&&(e.Lp=0);const s=t.Nw;(-1===i||-1===e.om||h.i.Hr[i].priority>h.i.Hr[e.om].priority||0===h.i.Hr[e.om].priority)&&(e.om=i,e.Sp=0,e.kp=0,e.Rp=s,e.Lp=0)}if(4==(4&n)&&(e.Mp=t.kw,65535===e.Mp&&(e.Mp=-1)),8==(8&n)&&(e.yf=t.zw,e.gf=100),16==(16&n)&&(e.bf=t.Nw,e.Tf=t.Nw,e._f=this.$+400,e.Cf=t.Nw,e.Ef=t.Nw),32==(32&n)&&(e.type=r.i.get(t.kw),e.Jp=e.type.Qp,e.tA=e.type.iA,e.sA=e.type.hA,e.eA=e.type.nA,e.Bo=e.type.rA),64==(64&n)){e.Fp=t.kw;const i=t.Jr;e.Up=i>>16,e.Bp=this.$+(65535&i),e.Gp=0,e.Hp=0,e.Bp>this.$&&(e.Gp=-1),65535===e.Fp&&(e.Fp=-1)}128==(128&n)&&(e.xp=t.kw,e.Np=t.kw,e.Pp=e.xp,e.Dp=e.Np)}};nc=()=>{for(let t=-1;t<this.En;t++){let i;i=-1===t?this.Y:this.Tn[t];const s=this.Cn[i];s&&this.lA(s)}if(K.t.U++,K.t.U>1406){K.t.U=0,this.it.sc(b.i.oA),this.it.p1(0);const t=this.it.Va;this.it.p1(162),this.it.p1(22),0==(2*Math.random()|0)&&this.it.p1(84),this.it.p2(31824),this.it.p2(13490),0==(2*Math.random()|0)&&this.it.p1(123),0==(2*Math.random()|0)&&this.it.p1(134),this.it.p1(100),this.it.p1(94),this.it.p2(35521),this.it.jc(this.it.Va-t)}};lA=t=>{(t.x<128||t.z<128||t.x>=13184||t.z>=13184)&&(t.om=-1,t.Fp=-1,t.zp=0,t.Xp=0,t.x=128*t.Cc[0]+64*t.size,t.z=128*t.Ec[0]+64*t.size,t.pathLength=0),t===this.Vn&&(t.x<1536||t.z<1536||t.x>=11776||t.z>=11776)&&(t.om=-1,t.Fp=-1,t.zp=0,t.Xp=0,t.x=128*t.Cc[0]+64*t.size,t.z=128*t.Ec[0]+64*t.size,t.pathLength=0),t.zp>this.$?this.aA(t):t.Xp>=this.$?this.cA(t):this.fA(t),this.uA(t),this.dA(t)};Gc=()=>{if(this.Vn){this.Vn.x>>7===this.ae&&this.Vn.z>>7===this.ce&&(this.ae=0);for(let t=-1;t<this.En;t++){let i,s;if(-1===t?(i=this.Vn,s=this.Y<<14):(i=this.Cn[this.Tn[t]],s=this.Tn[t]<<14),!i||!i.isVisible())continue;i.m=(K.t.m&&this.En>50||this.En>200)&&-1!==t&&i.wA===i.Bo;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.i.an||e<0||e>=G.i.an))if(!i.yA||this.$<i.mA||this.$>=i.pA){if(64==(127&i.x)&&64==(127&i.z)){if(this.ln[h][e]===this.oe)continue;this.ln[h][e]=this.oe}i.y=this.zc(this.$e,i.x,i.z),this.ne?.AA(this.$e,i.x,i.y,i.z,null,i,s,i.IA,60,i.gA)}else i.m=!1,i.y=this.zc(this.$e,i.x,i.z),this.ne?._A(this.$e,i.x,i.y,i.z,i.CA,i.EA,i.TA,i.bA,null,i,s,i.IA)}}};rc=()=>{for(let t=0;t<this.Rn;t++){const i=this.Mn[t],s=this.kn[i];s&&s.type&&this.lA(s)}};Hc=()=>{for(let t=0;t<this.Rn;t++){const i=this.kn[this.Mn[t]],s=536870912+(this.Mn[t]<<14)|0;if(!i||!i.isVisible())continue;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.i.an||e<0||e>=G.i.an)){if(1===i.size&&64==(127&i.x)&&64==(127&i.z)){if(this.ln[h][e]===this.oe)continue;this.ln[h][e]=this.oe}this.ne?.AA(this.$e,i.x,this.zc(this.$e,i.x,i.z),i.z,null,i,s,i.IA,64*(i.size-1)+60,i.gA)}}};Wc=()=>{for(let t=this.xn.lw();t;t=this.xn.ow())if(t.level!==this.$e||this.$>t.vA)t.Hw();else if(this.$>=t.OA){if(t.target>0){const i=this.kn[t.target-1];i&&t.LA(i.x,this.zc(t.level,i.x,i.z)-t.offsetY,i.z,this.$)}if(t.target<0){const i=-t.target-1;let s;s=i===this.jn?this.Vn:this.Cn[i],s&&t.LA(s.x,this.zc(t.level,s.x,s.z)-t.offsetY,s.z,this.$)}t.update(this.le),this.ne?.AA(this.$e,0|t.x,0|t.y,0|t.z,null,t,-1,t.IA,60,!1)}};Zc=()=>{for(let t=this.Nn.lw();t;t=this.Nn.ow())t.level!==this.$e||t.SA?t.Hw():this.$>=t.OA&&(t.update(this.le),t.SA?t.Hw():this.ne?.AA(t.level,t.x,t.y,t.z,null,t,-1,0,60,!1))};Yc=()=>{for(let t=this.Pn.lw();t;t=this.Pn.ow()){let i=!1;if(t.Al+=this.le,-1===t.Il&&(t.Il=0,i=!0),t.kA.delay)for(;t.Al>t.kA.delay[t.Il];)if(t.Al-=t.kA.delay[t.Il]+1,t.Il++,i=!0,t.Il>=t.kA.gl&&(t.Il-=t.kA._l,t.Il<0||t.Il>=t.kA.gl)){t.Hw(),i=!1;break}if(i&&this.ne){const i=t.xm,s=t.Rm,h=t.Mm;let n=0;if(0===t.RA?n=this.ne.hu(i,s,h):1===t.RA?n=this.ne.mw(i,h,s):2===t.RA?n=this.ne.du(i,s,h):3===t.RA&&(n=this.ne.Kf(i,s,h)),this.nn&&0!==n&&(n>>14&32767)===t.index){const r=this.nn[i][s][h],l=this.nn[i][s+1][h],o=this.nn[i][s+1][h+1],a=this.nn[i][s][h+1],c=e.i.get(t.index);let f=-1;if(-1!==t.Il&&t.kA.frames&&(f=t.kA.frames[t.Il]),2===t.RA){const t=this.ne.eu(i,s,h,n);let e=31&t;const u=t>>6;e===D.i.Yd&&(e=D.i.Zd),this.ne?.MA(i,s,h,c.mo(e,u,r,l,o,a,f))}else if(1===t.RA)this.ne?.xA(i,s,h,c.mo(D.i.NA,0,r,l,o,a,f));else if(0===t.RA){const t=this.ne.eu(i,s,h,n),e=31&t,u=t>>6;if(e===D.i.lu){const t=u+1&3;this.ne?.PA(s,h,i,c.mo(D.i.lu,u+4,r,l,o,a,f),c.mo(D.i.lu,t,r,l,o,a,f))}else this.ne?.DA(i,s,h,c.mo(e,u,r,l,o,a,f))}else if(3===t.RA){const t=this.ne.eu(i,s,h,n)>>6;this.ne?.FA(i,s,h,c.mo(D.i.Vd,t,r,l,o,a,f))}}else t.Hw()}}};lc=()=>{for(let t=-1;t<this.En;t++){let i;i=-1===t?this.Y:this.Tn[t];const s=this.Cn[i];s&&s.gf>0&&(s.gf--,0===s.gf&&(s.yf=null))}for(let t=0;t<this.Rn;t++){const i=this.Mn[t],s=this.kn[i];s&&s.gf>0&&(s.gf--,0===s.gf&&(s.yf=null))}};oc=()=>{if(2===this.re){for(let t=this.Dn.lw();t;t=this.Dn.ow())this.$>=t.vA&&(this.dw(t.Wy,t.x,t.z,t.Nm,t.angle,t.shape,t.pu),t.Hw());K.t.G++,K.t.G>85&&(K.t.G=0,this.it.sc(b.i.UA))}};aA=t=>{const i=t.zp-this.$,s=128*t.Wp+64*t.size,h=128*t.Zp+64*t.size;t.x+=(s-t.x)/i|0,t.z+=(h-t.z)/i|0,t.BA=0,0==t.jp&&(t.GA=1024),1==t.jp&&(t.GA=1536),2==t.jp&&(t.GA=0),3==t.jp&&(t.GA=512)};cA=t=>{if(t.Xp==this.$||-1==t.om||0!=t.Rp||t.kp+1>h.i.Hr[t.om].delay[t.Sp]){const i=t.Xp-t.zp,s=this.$-t.zp,h=128*t.Wp+64*t.size,e=128*t.Zp+64*t.size,n=128*t.Yp+64*t.size,r=128*t.Vp+64*t.size;t.x=(h*(i-s)+n*s)/i|0,t.z=(e*(i-s)+r*s)/i|0}t.BA=0,0==t.jp&&(t.GA=1024),1==t.jp&&(t.GA=1536),2==t.jp&&(t.GA=0),3==t.jp&&(t.GA=512),t.IA=t.GA};uA=t=>{if(-1!==t.Mp&&t.Mp<32768){const i=this.kn[t.Mp];if(i){const s=t.x-i.x,h=t.z-i.z;0===s&&0===h||(t.GA=2047&(325.949*Math.atan2(s,h)|0))}}if(t.Mp>=32768){let i=t.Mp-32768;i===this.jn&&(i=this.Y);const s=this.Cn[i];if(s){const i=t.x-s.x,h=t.z-s.z;0===i&&0===h||(t.GA=2047&(325.949*Math.atan2(i,h)|0))}}if((0!==t.xp||0!==t.Np)&&(0===t.pathLength||t.BA>0)){const i=t.x-64*(t.xp-this.Ge-this.Ge),s=t.z-64*(t.Np-this.He-this.He);0===i&&0===s||(t.GA=2047&(325.949*Math.atan2(i,s)|0)),t.xp=0,t.Np=0}const i=t.GA-t.IA&2047;if(0!==i&&(i<32||i>2016?t.IA=t.GA:i>1024?t.IA-=32:t.IA+=32,t.IA&=2047,t.wA===t.Bo&&t.IA!==t.GA)){if(-1!==t.HA)return void(t.wA=t.HA);t.wA=t.Jp}};dA=t=>{let i;if(t.gA=!1,-1!==t.wA&&(i=h.i.Hr[t.wA],t.WA++,i.delay&&t.ZA<i.gl&&t.WA>i.delay[t.ZA]&&(t.WA=0,t.ZA++),t.ZA>=i.gl&&(t.WA=0,t.ZA=0)),-1!==t.om&&0===t.Rp){for(i=h.i.Hr[t.om],t.kp++;i.delay&&t.Sp<i.gl&&t.kp>i.delay[t.Sp];)t.kp-=i.delay[t.Sp],t.Sp++;t.Sp>=i.gl&&(t.Sp-=i._l,t.Lp++,t.Lp>=i.YA&&(t.om=-1),(t.Sp<0||t.Sp>=i.gl)&&(t.om=-1)),t.gA=i.VA}if(t.Rp>0&&t.Rp--,-1!==t.Fp&&this.$>=t.Bp){for(t.Gp<0&&(t.Gp=0),i=o.i.Hr[t.Fp].kA,t.Hp++;i&&i.delay&&t.Gp<i.gl&&t.Hp>i.delay[t.Gp];)t.Hp-=i.delay[t.Gp],t.Gp++;i&&t.Gp>=i.gl&&(t.Gp<0||t.Gp>=i.gl)&&(t.Fp=-1)}};fA=t=>{if(t.wA=t.Bo,0===t.pathLength)return void(t.BA=0);if(-1!==t.om&&0===t.Rp){if(!h.i.Hr[t.om].zA)return void t.BA++}const i=t.x,s=t.z,e=128*t.Cc[t.pathLength-1]+64*t.size,n=128*t.Ec[t.pathLength-1]+64*t.size;if(e-i<=256&&e-i>=-256&&n-s<=256&&n-s>=-256){t.GA=i<e?s<n?1280:s>n?1792:1536:i>e?s<n?768:s>n?256:512:s<n?1024:0;let h=t.GA-t.IA&2047;h>1024&&(h-=2048);let r=t.tA;h>=-256&&h<=256?r=t.Jp:h>=256&&h<768?r=t.eA:h>=-768&&h<=-256&&(r=t.sA),-1===r&&(r=t.Jp),t.wA=r;let l=4;t.IA!==t.GA&&-1===t.Mp&&(l=2),t.pathLength>2&&(l=6),t.pathLength>3&&(l=8),t.BA>0&&t.pathLength>1&&(l=8,t.BA--),t.XA[t.pathLength-1]&&(l<<=1),l>=8&&t.wA===t.Jp&&-1!==t.jA&&(t.wA=t.jA),i<e?(t.x+=l,t.x>e&&(t.x=e)):i>e&&(t.x-=l,t.x<e&&(t.x=e)),s<n?(t.z+=l,t.z>n&&(t.z=n)):s>n&&(t.z-=l,t.z<n&&(t.z=n)),t.x===e&&t.z===n&&t.pathLength--}else t.x=e,t.z=n};$c=()=>{let t=3;if(this.Oe<310&&this.Vn){let i=this.Te>>7,s=this.ve>>7;const h=this.Vn.x>>7,e=this.Vn.z>>7;let n,r,l,o;if(this.rn&&0!=(4&this.rn[this.$e][i][s])&&(t=this.$e),n=h>i?h-i:i-h,r=e>s?e-s:s-e,n>r)for(l=65536*r/n|0,o=32768;i!==h;)i<h?i++:i>h&&i--,this.rn&&0!=(4&this.rn[this.$e][i][s])&&(t=this.$e),o+=l,o>=65536&&(o-=65536,s<e?s++:s>e&&s--,this.rn&&0!=(4&this.rn[this.$e][i][s])&&(t=this.$e));else for(l=65536*n/r|0,o=32768;s!==e;)s<e?s++:s>e&&s--,this.rn&&0!=(4&this.rn[this.$e][i][s])&&(t=this.$e),o+=l,o>=65536&&(o-=65536,i<h?i++:i>h&&i--,this.rn&&0!=(4&this.rn[this.$e][i][s])&&(t=this.$e))}return this.Vn&&this.rn&&0!=(4&this.rn[this.$e][this.Vn.x>>7][this.Vn.z>>7])&&(t=this.$e),t};qc=()=>{if(!this.rn)return 0;return this.zc(this.$e,this.Te,this.ve)-this.be>=800||0==(4&this.rn[this.$e][this.Te>>7][this.ve>>7])?3:this.$e};zc=(t,i,s)=>{if(!this.nn)return 0;const h=Math.min(i>>7,G.i.an-1),e=Math.min(s>>7,G.i.an-1);let n=t;t<3&&this.rn&&2==(2&this.rn[1][h][e])&&(n=t+1);const r=127&i,l=127&s;return(this.nn[n][h][e]*(128-r)+this.nn[n][h+1][e]*r>>7)*(128-l)+(this.nn[n][h][e+1]*(128-r)+this.nn[n][h+1][e+1]*r>>7)*l>>7};Vc=(t,i,s,h,e,n)=>{const r=2048-e&2047,l=2048-h&2047;let o,a,c,f=0,u=0,w=n;0!==r&&(o=d.i.sin[r],a=d.i.cos[r],c=u*a-n*o>>16,w=u*o+n*a>>16,u=c),0!==l&&(o=d.i.sin[l],a=d.i.cos[l],c=w*o+f*a>>16,w=w*a-f*o>>16,f=c),this.Te=t-f,this.be=i-u,this.ve=s-w,this.Oe=e,this.Le=h};Lc=()=>{if(!this.Vn)return;const t=this.Vn.x+this.de,i=this.Vn.z+this.we;(this.hn-t<-500||this.hn-t>500||this.en-i<-500||this.en-i>500)&&(this.hn=t,this.en=i),this.hn!==t&&(this.hn+=(t-this.hn)/16|0),this.en!==i&&(this.en+=(i-this.en)/16|0),1===this.ac[1]?this.tn+=(-this.tn-24)/2|0:1===this.ac[2]?this.tn+=(24-this.tn)/2|0:this.tn=this.tn/2|0,1===this.ac[3]?this.sn+=(12-this.sn)/2|0:1===this.ac[4]?this.sn+=(-this.sn-12)/2|0:this.sn=this.sn/2|0,this.Qe=2047&(this.Qe+this.tn/2|0),this.Je+=this.sn/2|0,this.Je<128&&(this.Je=128),this.Je>383&&(this.Je=383);const s=this.hn>>7,h=this.en>>7,e=this.zc(this.$e,this.hn,this.en);let n=0;if(this.nn&&s>3&&h>3&&s<100&&h<100)for(let t=s-4;t<=s+4;t++)for(let i=h-4;i<=h+4;i++){let s=this.$e;s<3&&this.rn&&2==(2&this.rn[1][t][i])&&s++;const h=e-this.nn[s][t][i];h>n&&(n=h)}let r=192*n;r>98048&&(r=98048),r<32768&&(r=32768),r>this.Se?this.Se+=(r-this.Se)/24|0:r<this.Se&&(this.Se+=(r-this.Se)/80|0)};Sc=()=>{let t=128*this.pn+64,i=128*this.An+64,s=this.zc(this.$e,this.pn,this.An)-this.In;this.Te<t&&(this.Te+=this.gn+((t-this.Te)*this._n/1e3|0),this.Te>t&&(this.Te=t)),this.Te>t&&(this.Te-=this.gn+((this.Te-t)*this._n/1e3|0),this.Te<t&&(this.Te=t)),this.be<s&&(this.be+=this.gn+((s-this.be)*this._n/1e3|0),this.be>s&&(this.be=s)),this.be>s&&(this.be-=this.gn+((this.be-s)*this._n/1e3|0),this.be<s&&(this.be=s)),this.ve<i&&(this.ve+=this.gn+((i-this.ve)*this._n/1e3|0),this.ve>i&&(this.ve=i)),this.ve>i&&(this.ve-=this.gn+((this.ve-i)*this._n/1e3|0),this.ve<i&&(this.ve=i)),t=128*this.un+64,i=128*this.dn+64,s=this.zc(this.$e,this.un,this.dn)-this.wn;const h=t-this.Te,e=s-this.be,n=i-this.ve,r=0|Math.sqrt(h*h+n*n);let l=2047&(325.949*Math.atan2(e,r)|0);const o=2047&(-325.949*Math.atan2(h,n)|0);l<128&&(l=128),l>383&&(l=383),this.Oe<l&&(this.Oe+=this.yn+((l-this.Oe)*this.mn/1e3|0),this.Oe>l&&(this.Oe=l)),this.Oe>l&&(this.Oe-=this.yn+((this.Oe-l)*this.mn/1e3|0),this.Oe<l&&(this.Oe=l));let a=o-this.Le;a>1024&&(a-=2048),a<-1024&&(a+=2048),a>0&&(this.Le+=this.yn+(a*this.mn/1e3|0),this.Le&=2047),a<0&&(this.Le-=this.yn+(-a*this.mn/1e3|0),this.Le&=2047);let c=o-this.Le;c>1024&&(c-=2048),c<-1024&&(c+=2048),(c<0&&a>0||c>0&&a<0)&&(this.Le=o)};oy=(t,i)=>{const s=t.Nw;let n=this.De+(s>>4&7),r=this.Fe+(7&s);if(i===T.i.ly||i===T.i.ny){const s=t.Nw,h=s>>2,e=3&s,l=D.qA.pu(h);let o;if(o=i===T.i.ny?-1:t.kw,n>=0&&r>=0&&n<G.i.an&&r<G.i.an){let t=null;for(let i=this.Bn.lw();i;i=this.Bn.ow())if(i.Wy===this.$e&&i.x===n&&i.z===r&&i.pu===l){t=i;break}if(!t&&this.ne){let i=0,s=-1,h=0,e=0;if(l===P.i.ww?i=this.ne.hu(this.$e,n,r):l===P.i.yw?i=this.ne.mw(this.$e,r,n):l===P.i.pw?i=this.ne.du(this.$e,n,r):l===P.i.Vd&&(i=this.ne.Kf(this.$e,n,r)),0!==i){const t=this.ne.eu(this.$e,n,r,i);s=i>>14&32767,h=31&t,e=t>>6}t=new U.i(this.$e,l,n,r,0,F.i.ou,D.i.ru,s,e,h),this.Bn.$A(t)}t&&(t.Nm=o,t.shape=h,t.angle=e),this.dw(this.$e,n,r,o,e,h,l)}}else if(i===T.i.ey){const i=t.Nw>>2,s=D.qA.pu(i),e=t.kw;if(n>=0&&r>=0&&n<G.i.an&&r<G.i.an&&this.ne){let t=0;if(s===P.i.ww?t=this.ne.hu(this.$e,n,r):s===P.i.yw?t=this.ne.mw(this.$e,r,n):s===P.i.pw?t=this.ne.du(this.$e,n,r):s===P.i.Vd&&(t=this.ne.Kf(this.$e,n,r)),0!==t){const i=new V.i(t>>14&32767,this.$e,s,n,r,h.i.Hr[e],!1);this.Pn.$A(i)}}}else if(i===T.i.hy){const i=t.kw,s=t.kw;if(n>=0&&r>=0&&n<G.i.an&&r<G.i.an){const t=new Y.i(i,s);this.Fn[this.$e][n][r]||(this.Fn[this.$e][n][r]=new k.i),this.Fn[this.$e][n][r]?.$A(t),this.nw(n,r)}}else if(i===T.i.sy){const i=t.kw;if(n>=0&&r>=0&&n<G.i.an&&r<G.i.an){const t=this.Fn[this.$e][n][r];if(t){for(let s=t.lw();s;s=t.ow())if(s.index===(32767&i)){s.Hw();break}t.lw()||(this.Fn[this.$e][n][r]=null),this.nw(n,r)}}}else if(i===T.i.iy){let i=n+t.Mw,s=r+t.Mw;const h=t.By,e=t.kw,l=t.Nw,o=t.Nw,a=t.kw,c=t.kw,f=t.Nw,u=t.Nw;if(n>=0&&r>=0&&n<G.i.an&&r<G.i.an&&i>=0&&s>=0&&i<G.i.an&&s<G.i.an){n=128*n+64,r=128*r+64,i=128*i+64,s=128*s+64;const t=new z.i(e,this.$e,n,this.zc(this.$e,n,r)-l,r,a+this.$,c+this.$,f,u,h,o);t.LA(i,this.zc(this.$e,i,s)-o,s,a+this.$),this.xn.$A(t)}}else if(i===T.i.ty){const i=t.kw,s=t.Nw,h=t.kw;if(n>=0&&r>=0&&n<G.i.an&&r<G.i.an){n=128*n+64,r=128*r+64;const t=new X.i(i,this.$e,n,r,this.zc(this.$e,n,r)-s,this.$,h);this.Nn.$A(t)}}else if(i===T.i.Qw){const i=t.kw,s=t.kw,h=t.kw;if(n>=0&&r>=0&&n<G.i.an&&r<G.i.an&&h!==this.jn){const t=new Y.i(i,s);this.Fn[this.$e][n][r]||(this.Fn[this.$e][n][r]=new k.i),this.Fn[this.$e][n][r]?.$A(t),this.nw(n,r)}}else if(i===T.i.Jw){const i=t.Nw,s=i>>2,h=3&i,l=D.qA.pu(s),o=t.kw,a=t.kw,c=t.kw,f=t.kw;let u,d=t.Mw,w=t.Mw,y=t.Mw,m=t.Mw;if(u=f===this.jn?this.Vn:this.Cn[f],u&&this.nn){const t=new B.i(this.$e,l,n,r,-1,h,s,a+this.$);this.Dn.$A(t);const i=new B.i(this.$e,l,n,r,o,h,s,c+this.$);this.Dn.$A(i);const f=this.nn[this.$e][n][r],p=this.nn[this.$e][n+1][r],A=this.nn[this.$e][n+1][r+1],I=this.nn[this.$e][n][r+1],g=e.i.get(o);u.mA=a+this.$,u.pA=c+this.$,u.yA=g.mo(s,h,f,p,A,I,-1);let _,C=g.width,E=g.length;h!==F.i.au&&h!==F.i.fu||(C=g.length,E=g.width),u.KA=128*n+64*C,u.JA=128*r+64*E,u.QA=this.zc(this.$e,u.KA,u.JA),d>y&&(_=d,d=y,y=_),w>m&&(_=w,w=m,m=_),u.CA=n+d,u.TA=n+y,u.EA=r+w,u.bA=r+m}}else if(i===T.i.Kw){const i=t.kw,s=t.kw,h=t.kw;if(n>=0&&r>=0&&n<G.i.an&&r<G.i.an){const t=this.Fn[this.$e][n][r];if(t){for(let e=t.lw();e;e=t.ow())if(e.index===(32767&i)&&e.count===s){e.count=h;break}this.nw(n,r)}}}};ef=t=>{if(!K.t.m){if(d.i.tI[17]>=t){const t=d.i.iI[17];if(!t)return;const i=t.width*t.height-1,s=t.width*this.le*2,h=t.ya,e=this.Xe;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.ya=e,this.Xe=h,d.i.sI(17)}if(d.i.tI[24]>=t){const t=d.i.iI[24];if(!t)return;const i=t.width*t.height-1,s=t.width*this.le*2,h=t.ya,e=this.Xe;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.ya=e,this.Xe=h,d.i.sI(24)}}};Oa=()=>{if(!(this.Wt&&this.Zt&&this.Ht&&this.jt))return;for(let t=10;t<117;t++){(100*Math.random()|0)<50&&(this.Wt[t+32512]=255)}for(let t=0;t<100;t++){const t=2+(124*Math.random()|0)+(128+(128*Math.random()|0)<<7);this.Wt[t]=192}for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Zt[s]=(this.Wt[s-1]+this.Wt[s+1]+this.Wt[s-128]+this.Wt[s+128])/4|0}this.qt+=128,this.qt>this.Ht.length&&(this.qt-=this.Ht.length,this.ka(this.Dt[12*Math.random()|0]));for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);let h=this.Zt[s+128]-(this.Ht[s+this.qt&this.Ht.length-1]/5|0);h<0&&(h=0),this.Wt[s]=h}for(let t=0;t<255;t++)this.jt[t]=this.jt[t+1];if(this.jt[255]=16*Math.sin(this.$/14)+14*Math.sin(this.$/15)+12*Math.sin(this.$/16)|0,this.$t>0&&(this.$t-=4),this.Kt>0&&(this.Kt-=4),0===this.$t&&0===this.Kt){const t=2e3*Math.random()|0;0===t?this.$t=1024:1===t&&(this.Kt=1024)}};hI=(t,i,s)=>{const h=256-i;return((16711935&t)*h+(16711935&s)*i&4278255360)+((65280&t)*h+(65280&s)*i&16711680)>>8};La=()=>{if(!(this.Yt&&this.Vt&&this.zt&&this.Xt&&this.jt&&this.Wt))return;const t=256;if(this.$t>0)for(let t=0;t<256;t++)this.$t>768?this.Yt[t]=this.hI(this.Vt[t],1024-this.$t,this.zt[t]):this.$t>256?this.Yt[t]=this.zt[t]:this.Yt[t]=this.hI(this.zt[t],256-this.$t,this.Vt[t]);else if(this.Kt>0)for(let t=0;t<256;t++)this.Kt>768?this.Yt[t]=this.hI(this.Vt[t],1024-this.Kt,this.Xt[t]):this.Kt>256?this.Yt[t]=this.Xt[t]:this.Yt[t]=this.hI(this.Xt[t],256-this.Kt,this.Vt[t]);else for(let t=0;t<256;t++)this.Yt[t]=this.Vt[t];for(let t=0;t<33920;t++)this.Ct&&this.Ut&&(this.Ct.ya[t]=this.Ut.ya[t]);let i=0,s=1152;for(let h=1;h<255;h++){let e=(this.jt[h]*(t-h)/t|0)+22;e<0&&(e=0),i+=e;for(let t=e;t<128;t++){let t=this.Wt[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Yt[t],this.Ct){const e=this.Ct.ya[s];this.Ct.ya[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}s+=e}this.Ct?.draw(0,0);for(let t=0;t<33920;t++)this.Et&&this.Bt&&(this.Et.ya[t]=this.Bt.ya[t]);i=0,s=1176;for(let h=1;h<255;h++){const e=this.jt[h]*(t-h)/t|0,n=103-e;s+=e;for(let t=0;t<n;t++){let t=this.Wt[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Yt[t],this.Et){const e=this.Et.ya[s];this.Et.ya[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}i+=128-n,s+=128-n-e}this.Et?.draw(661,0)}}console.log(`RS2 user client - release #${K.t.h}`),await(0,it.ia)(),(new t).eI().then((()=>{})),i()}catch(t){i(t)}}),1)},1995:(t,i,s)=>{s.d(i,{i:()=>a});var h=s(651),e=s(8078),n=s(1519),r=s(9839),l=s(6884),o=s(6121);class a{static getParameter(t){return new URLSearchParams(window.location.search).get(t)??''}static setParameter(t,i){const s=new URL(window.location.toString());s.searchParams.set(t,i),window.history.pushState(null,'',s.toString())}Mf=0;nI=[];rI=0;Zr=null;state=0;lI=20;oI=1;aI=[];kf=0;cI=0;fI=[];uI=!0;dI=!1;Ka=0;fc=0;Gl=0;Hl=0;Da=0;Fa=0;Ua=0;ac=[];wI=[];yI=0;mI=0;constructor(t=!1){o.il.fillStyle='black',o.il.fillRect(0,0,o.pI.width,o.pI.height),this.dI=t,this.dI?this.resize(window.innerWidth,window.innerHeight):this.resize(o.pI.width,o.pI.height)}get width(){return o.pI.width}get height(){return o.pI.height}resize(t,i){o.pI.width=t,o.pI.height=i,this.Zr=new h.i(t,i),e.i.AI()}async eI(){window.addEventListener('resize',(()=>{this.dI&&this.resize(window.innerWidth,window.innerHeight)}),!1),window.addEventListener('keydown',this.II),window.addEventListener('keyup',this.gI),window.addEventListener('mousedown',this._I),window.addEventListener('mouseup',this.CI),window.addEventListener('mouseenter',this.EI),window.addEventListener('mouseleave',this.TI),window.addEventListener('mousemove',this.bI),window.addEventListener('focusin',this.vI),window.addEventListener('focusout',this.OI),window.addEventListener('beforeunload',this.Ur),o.pI.oncontextmenu=t=>{t.preventDefault()},await this.Xr(0,'Loading...'),await this.load();for(let t=0;t<10;t++)this.aI[t]=Date.now();let t,i=0,s=256,h=1,e=0;for(;this.state>=0;){if(this.state>0&&(this.state--,0===this.state))return void this.LI();const r=s,l=h;s=300,h=1,t=Date.now();const o=this.aI[i];if(0===o?(s=r,h=l):t>o&&(s=2560*this.lI/(t-o)|0),s<25?s=25:s>256&&(s=256,h=this.lI-(t-o)/10|0),this.aI[i]=t,i=(i+1)%10,h>1)for(let t=0;t<10;t++)0!==this.aI[t]&&(this.aI[t]+=h);for(h<this.oI&&(h=this.oI),await(0,n.qr)(h);e<256;)await this.update(),this.Da=0,this.yI=this.mI,e+=s;e&=255,this.lI>0&&(this.kf=1e3*s/(256*this.lI)|0);const a=performance.now();this.uI&&this.refresh(),await this.draw(),this.fI[this.cI]=(performance.now()-a)/1e3,this.cI=(this.cI+1)%this.fI.length}-1===this.state&&this.LI()}LI(){this.state=-2,this.Ur()}sl(t){this.lI=1e3/t|0}start(){this.state>=0&&(this.state=0)}stop(){this.state>=0&&(this.state=4e3/this.lI|0)}destroy(){this.state=-1}async load(){}async update(){}Ur(){}async draw(){}refresh(){}async Xr(t,i){const s=this.width,h=this.height;this.uI&&(o.il.fillStyle='black',o.il.fillRect(0,0,s,h),this.uI=!1);const e=h/2-18;o.il.fillStyle='rgb(140, 17, 17)',o.il.rect((s/2|0)-152,e,304,34),o.il.fillRect((s/2|0)-150,e+2,3*t,30),o.il.fillStyle='black',o.il.fillRect((s/2|0)-150+3*t,e+2,300-3*t,30),o.il.font='bold 13px helvetica, sans-serif',o.il.textAlign='center',o.il.fillStyle='white',o.il.fillText(i,s/2|0,e+22),await(0,n.qr)(5)}II=t=>{const i=t.key;r.SI.includes(i)&&t.preventDefault(),this.Ka=0;const s=r.n[i];if(!s)return void console.error(`Unhandled key ${i}`);const h=s.key;let e=s.ch;e<30&&(e=0),37===h?e=1:39===h?e=2:38===h?e=3:40===h?e=4:17===h?e=5:8===h||127===h?e=8:9===h?e=9:10===h?e=10:h>=112&&h<=123?e=h+1008-112:36===h?e=1e3:35===h?e=1001:33===h?e=1002:34===h&&(e=1003),e>0&&e<128&&(this.ac[e]=1),e>4&&(this.wI[this.mI]=e,this.mI=this.mI+1&127),l.i.enabled&&l.i.II(e)};gI=t=>{const i=t.key;r.SI.includes(i)&&t.preventDefault(),this.Ka=0;const s=r.n[i];if(!s)return void console.error(`Unhandled key ${i}`);const h=s.key;let e=s.ch;e<30&&(e=0),37===h?e=1:39===h?e=2:38===h?e=3:40===h?e=4:17===h?e=5:8===h||127===h?e=8:9===h?e=9:10===h?e=10:h>=112&&h<=123?e=h+1008-112:36===h?e=1e3:35===h?e=1001:33===h?e=1002:34===h&&(e=1003),e>0&&e<128&&(this.ac[e]=0),l.i.enabled&&l.i.gI(e)};Ga(){let t=-1;return this.mI!==this.yI&&(t=this.wI[this.yI],this.yI=this.yI+1&127),t}_I=t=>{let i=t.x,s=t.y;const{top:h,left:e}=this.kI;i-=e,s-=h;const n=o.pI.getBoundingClientRect();i*=o.pI.width/n.width,s*=o.pI.height/n.height,i|=0,s|=0,this.Ka=0,this.Fa=i,this.Ua=s,2===t.buttons?(this.Da=2,this.fc=2):1===t.buttons&&(this.Da=1,this.fc=1),l.i.enabled};CI=t=>{this.Ka=0,this.fc=0,l.i.enabled};EI=t=>{l.i.enabled&&l.i.EI()};TI=t=>{l.i.enabled&&l.i.TI()};bI=t=>{let i=t.x,s=t.y;const{top:h,left:e}=this.kI;i-=e,s-=h;const n=o.pI.getBoundingClientRect();i*=o.pI.width/n.width,s*=o.pI.height/n.height,i|=0,s|=0,this.Ka=0,this.Gl=i,this.Hl=s,l.i.enabled&&l.i.bI(i,s)};vI=t=>{this.uI=!0,this.refresh(),l.i.enabled&&l.i.vI()};OI=t=>{l.i.enabled&&l.i.OI()};get ms(){const t=this.fI.length;let i=0;for(let s=0;s<t;s++)i+=this.fI[s];const s=i/t;return s>this.Mf&&(this.Mf=s),this.nI[this.rI]=s,this.rI=(this.rI+1)%250,s}get Rf(){return this.nI.reduce(((t,i)=>t+i),0)/250}get kI(){const t=o.pI.getBoundingClientRect(),i=window.getComputedStyle(o.pI),s=parseFloat(i.paddingLeft||'0'),h=parseFloat(i.paddingTop||'0'),e=parseFloat(i.borderLeftWidth||'0'),n=parseFloat(i.borderTopWidth||'0'),r=t.left+e+s;return{top:t.top+n+h,left:r}}}},6884:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(2383);class e{static enabled=!1;static RI=null;static MI=null;static xI=0;static NI=0;static DI=0;static FI=0;static UI=0;static Cy=()=>{this.RI=h.i.tt(1),this.MI=null,this.xI=Date.now(),this.enabled=!0};static $a=()=>{this.enabled=!1,this.RI=null};static flush=()=>{let t=null;return this.MI&&this.enabled&&(t=this.MI),this.MI=null,t};static stop=()=>{let t=null;return this.RI&&this.RI.Va>0&&this.enabled&&(t=this.RI),this.$a(),t};static _I=(t,i,s)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;this.NI++;const h=Date.now();let e=(h-this.xI)/10|0;e>250&&(e=250),this.xI=h,this.BI(5),1===s?this.RI?.p1(1):this.RI?.p1(2),this.RI?.p1(e),this.RI?.p3(t+(i<<10))};static CI=t=>{if(!this.enabled)return;this.NI++;const i=Date.now();let s=(i-this.xI)/10|0;s>250&&(s=250),this.xI=i,this.BI(2),1===t?this.RI?.p1(3):this.RI?.p1(4),this.RI?.p1(s)};static bI=(t,i)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;const s=Date.now();if(s-this.DI>=50){this.DI=s,this.NI++;let h=(s-this.xI)/10|0;h>250&&(h=250),this.xI=s,t-this.FI<8&&t-this.FI>=-8&&i-this.UI<8&&i-this.UI>=-8?(this.BI(3),this.RI?.p1(5),this.RI?.p1(h),this.RI?.p1(t+(i-this.UI+8<<4)+8-this.FI)):t-this.FI<128&&t-this.FI>=-128&&i-this.UI<128&&i-this.UI>=-128?(this.BI(4),this.RI?.p1(6),this.RI?.p1(h),this.RI?.p1(t+128-this.FI),this.RI?.p1(i+128-this.UI)):(this.BI(5),this.RI?.p1(7),this.RI?.p1(h),this.RI?.p3(t+(i<<10))),this.FI=t,this.UI=i}};static II=t=>{if(!this.enabled)return;this.NI++;const i=Date.now();let s=(i-this.xI)/10|0;s>250&&(s=250),this.xI=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.BI(3),this.RI?.p1(8),this.RI?.p1(s),this.RI?.p1(t)};static gI=t=>{if(!this.enabled)return;this.NI++;const i=Date.now();let s=(i-this.xI)/10|0;s>250&&(s=250),this.xI=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.BI(3),this.RI?.p1(9),this.RI?.p1(s),this.RI?.p1(t)};static vI=()=>{if(!this.enabled)return;this.NI++;const t=Date.now();let i=(t-this.xI)/10|0;i>250&&(i=250),this.xI=t,this.BI(2),this.RI?.p1(10),this.RI?.p1(i)};static OI=()=>{if(!this.enabled)return;this.NI++;const t=Date.now();let i=(t-this.xI)/10|0;i>250&&(i=250),this.xI=t,this.BI(2),this.RI?.p1(11),this.RI?.p1(i)};static EI=()=>{if(!this.enabled)return;this.NI++;const t=Date.now();let i=(t-this.xI)/10|0;i>250&&(i=250),this.xI=t,this.BI(2),this.RI?.p1(12),this.RI?.p1(i)};static TI=()=>{if(!this.enabled)return;this.NI++;const t=Date.now();let i=(t-this.xI)/10|0;i>250&&(i=250),this.xI=t,this.BI(2),this.RI?.p1(13),this.RI?.p1(i)};static BI=t=>{if(this.RI&&this.RI.Va+t>=500){const t=this.RI;this.RI=h.i.tt(1),this.MI=t}}}},9839:(t,i,s)=>{s.d(i,{n:()=>h,SI:()=>e});const h={GI:{key:8,ch:8},HI:{key:10,ch:10},WI:{key:16,ch:65535},ZI:{key:27,ch:27},YI:{key:9,ch:9},VI:{key:20,ch:65535},zI:{key:32,ch:32},XI:{key:17,ch:65535},jI:{key:18,ch:65535},qI:{key:524,ch:65535},$I:{key:37,ch:65535},KI:{key:39,ch:65535},JI:{key:38,ch:65535},QI:{key:40,ch:65535},tg:{key:155,ch:65535},ig:{key:36,ch:65535},sg:{key:33,ch:65535},hg:{key:127,ch:127},eg:{key:35,ch:65535},ng:{key:34,ch:65535},rg:{key:192,ch:96},lg:{key:192,ch:126},og:{key:49,ch:33},ag:{key:50,ch:64},cg:{key:51,ch:35},fg:{key:52,ch:36},ug:{key:53,ch:37},dg:{key:54,ch:94},wg:{key:55,ch:38},yg:{key:56,ch:42},mg:{key:57,ch:40},pg:{key:48,ch:41},Ag:{key:45,ch:45},Ig:{key:45,ch:95},gg:{key:61,ch:61},_g:{key:61,ch:43},Cg:{key:91,ch:91},Eg:{key:91,ch:123},Tg:{key:93,ch:93},bg:{key:93,ch:125},vg:{key:92,ch:92},Og:{key:92,ch:124},Lg:{key:59,ch:59},Sg:{key:59,ch:58},kg:{key:222,ch:39},Rg:{key:222,ch:34},Mg:{key:44,ch:44},xg:{key:44,ch:60},Ng:{key:46,ch:46},Pg:{key:46,ch:62},Dg:{key:47,ch:47},Fg:{key:47,ch:63},Ug:{key:112,ch:65535},Bg:{key:113,ch:65535},Gg:{key:114,ch:65535},Hg:{key:115,ch:65535},Wg:{key:116,ch:65535},Zg:{key:117,ch:65535},Yg:{key:118,ch:65535},Vg:{key:119,ch:65535},zg:{key:120,ch:65535},Xg:{key:121,ch:65535},jg:{key:122,ch:65535},qg:{key:123,ch:65535},0:{key:48,ch:48},1:{key:49,ch:49},2:{key:50,ch:50},3:{key:51,ch:51},4:{key:52,ch:52},5:{key:53,ch:53},6:{key:54,ch:54},7:{key:55,ch:55},8:{key:56,ch:56},9:{key:57,ch:57},a:{key:65,ch:97},b:{key:66,ch:98},c:{key:67,ch:99},d:{key:68,ch:100},e:{key:69,ch:101},f:{key:70,ch:102},g:{key:71,ch:103},$g:{key:72,ch:104},Kg:{key:73,ch:105},Jg:{key:74,ch:106},Qg:{key:75,ch:107},t_:{key:76,ch:108},qA:{key:77,ch:109},n:{key:78,ch:110},i_:{key:79,ch:111},s_:{key:80,ch:112},h_:{key:81,ch:113},r:{key:82,ch:114},s:{key:83,ch:115},e_:{key:84,ch:116},n_:{key:85,ch:117},SI:{key:86,ch:118},w:{key:87,ch:119},x:{key:88,ch:120},y:{key:89,ch:121},z:{key:90,ch:122},r_:{key:65,ch:65},l_:{key:66,ch:66},o_:{key:67,ch:67},a_:{key:68,ch:68},E:{key:69,ch:69},c_:{key:70,ch:70},f_:{key:71,ch:71},u_:{key:72,ch:72},d_:{key:73,ch:73},w_:{key:74,ch:74},t:{key:75,ch:75},y_:{key:76,ch:76},m_:{key:77,ch:77},p_:{key:78,ch:78},ia:{key:79,ch:79},A_:{key:80,ch:80},Q:{key:81,ch:81},I_:{key:82,ch:82},g_:{key:83,ch:83},__:{key:84,ch:84},C_:{key:85,ch:85},E_:{key:86,ch:86},T_:{key:87,ch:87},b_:{key:88,ch:88},v_:{key:89,ch:89},i:{key:90,ch:90}},e=['Tab','F1','F2','F3','F4','F5','F6','F7','F8','F9','F10','ArrowLeft','ArrowRight','ArrowUp','ArrowDown']},2790:(t,i,s)=>{s.d(i,{i:()=>c});var h=s(2383),e=s(9178),n=s(5542),r=s(6542),l=s(8934),o=s(9345),a=s(2991);class c{static Hr=[];static O_=null;static Wr=null;static kl=0;static L_=1;static Ml=2;static ql=3;static Kl=4;static ao=5;static uo=6;static _o=7;static Vm=1;static jm=2;static qm=3;static $m=4;static Km=5;static ho=6;static To=1;static bo=100;static vo=101;static Oo=200;static Ld=201;static Sd=202;static Lo=203;static kd=205;static xd=300;static S_=301;static k_=302;static R_=303;static M_=304;static x_=305;static N_=306;static P_=307;static D_=308;static F_=309;static U_=310;static B_=311;static G_=312;static Nd=313;static Pd=314;static H_=315;static W_=316;static Z_=317;static Y_=318;static V_=319;static z_=320;static X_=321;static j_=322;static Dd=323;static Zo=324;static Yo=325;static Fd=326;static No=327;static So=401;static ko=500;static Rd=501;static Md=502;static xo=503;static Vo=600;static Bd=601;static q_=602;static K_=603;static J_=604;static Q_=605;static tC=606;static iC=607;static sC=608;static hC=609;static eC=610;static nC=611;static Gd=612;static zo=613;static Xo=650;static $o=651;static Ko=652;static Jo=653;static Qo=654;static jo=655;static wa=(t,i,s)=>{this.O_=new n.i(5e4),this.Wr=new n.i(5e4);const e=new h.i(t.read('data'));let r=-1;for(e.Va+=2;e.Va<e.data.length;){let t=e.kw;65535===t&&(r=e.kw,t=e.kw);const h=this.Hr[t]=new c;h.id=t,h.pu=r,h.type=e.Nw,h.so=e.Nw,h.Ll=e.kw,h.width=e.kw,h.height=e.kw,h.Hm=e.Nw,0===h.Hm?h.Hm=-1:h.Hm=(h.Hm-1<<8)+e.Nw;const n=e.Nw;if(n>0){h.el=new Uint8Array(n),h.rl=new Uint16Array(n);for(let t=0;t<n;t++)h.el[t]=e.Nw,h.rl[t]=e.kw}const l=e.Nw;if(l>0){h.scripts=new o.to(l,null);for(let t=0;t<l;t++){const i=e.kw,s=new Uint16Array(i);h.scripts[t]=s;for(let t=0;t<i;t++)s[t]=e.kw}}if(h.type===c.kl){h.scroll=e.kw,h.hide=1===e.Nw;const t=e.Nw;h.yl=new Array(t),h.Tl=new Array(t),h.bl=new Array(t);for(let i=0;i<t;i++)h.yl[i]=e.kw,h.Tl[i]=e.By,h.bl[i]=e.By}if(h.type===c.L_&&(e.Va+=3),h.type===c.Ml){h.Pl=new Int32Array(h.width*h.height),h.Dl=new Int32Array(h.width*h.height),h.draggable=1===e.Nw,h.Wm=1===e.Nw,h.Ym=1===e.Nw,h.Fl=e.Nw,h.Ul=e.Nw,h.xl=new Int16Array(20),h.Nl=new Int16Array(20),h.jl=new o.to(20,null);for(let t=0;t<20;t++)if(1===e.Nw){h.xl[t]=e.By,h.Nl[t]=e.By;const s=e.zw;if(s.length>0){const e=s.lastIndexOf(',');h.jl[t]=this.rC(i,s.substring(0,e),parseInt(s.substring(e+1),10))}}h.Zm=new o.to(5,null);for(let t=0;t<5;t++){const i=e.zw;h.Zm[t]=i,0===i.length&&(h.Zm[t]=null)}}if(h.type===c.ql&&(h.fill=1===e.Nw),h.type===c.Kl||h.type===c.L_){h.no=1===e.Nw;const t=e.Nw;s&&(h.font=s[t]),h.lo=1===e.Nw}if(h.type===c.Kl&&(h.text=e.zw,h.io=e.zw),h.type!==c.L_&&h.type!==c.ql&&h.type!==c.Kl||(h.$l=e.Jr),h.type!==c.ql&&h.type!==c.Kl||(h.Ql=e.Jr,h.Jl=e.Jr),h.type===c.ao){const t=e.zw;if(t.length>0){const s=t.lastIndexOf(',');h.fo=this.rC(i,t.substring(0,s),parseInt(t.substring(s+1),10))}const s=e.zw;if(s.length>0){const t=s.lastIndexOf(',');h.co=this.rC(i,s.substring(0,t),parseInt(s.substring(t+1),10))}}if(h.type===c.uo){const t=e.Nw;0!==t&&(h.model=this.mo((t-1<<8)+e.Nw));const i=e.Nw;0!==i&&(h.lC=this.mo((i-1<<8)+e.Nw)),h.ml=e.Nw,0===h.ml?h.ml=-1:h.ml=(h.ml-1<<8)+e.Nw,h.pl=e.Nw,0===h.pl?h.pl=-1:h.pl=(h.pl-1<<8)+e.Nw,h.zoom=e.kw,h.yo=e.kw,h.Io=e.kw}if(h.type===c._o){h.Pl=new Int32Array(h.width*h.height),h.Dl=new Int32Array(h.width*h.height),h.no=1===e.Nw;const t=e.Nw;s&&(h.font=s[t]),h.lo=1===e.Nw,h.$l=e.Jr,h.Fl=e.By,h.Ul=e.By,h.Wm=1===e.Nw,h.Zm=new o.to(5,null);for(let t=0;t<5;t++){const i=e.zw;h.Zm[t]=i,0===i.length&&(h.Zm[t]=null)}}h.so!==c.jm&&h.type!==c.Ml||(h.hd=e.zw,h.action=e.zw,h.sd=e.kw),h.so!==c.Vm&&h.so!==c.$m&&h.so!==c.Km&&h.so!==c.ho||(h.Xm=e.zw,0===h.Xm.length&&(h.so===c.Vm?h.Xm='Ok':h.so===c.$m||h.so===c.Km?h.Xm='Select':h.so===c.ho&&(h.Xm='Continue')))}this.O_=null,this.Wr=null};static rC=(t,i,s)=>{const h=l.i.oC(i)<<8n|BigInt(s);if(this.O_){const t=this.O_.get(h);if(t)return t}let e;try{e=r.i.ha(t,i,s),this.O_?.put(h,e)}catch(t){return null}return e};static mo=t=>{if(this.Wr){const i=this.Wr.get(BigInt(t));if(i)return i}const i=e.i.model(t);return this.Wr?.put(BigInt(t),i),i};id=-1;pu=-1;type=-1;so=-1;Ll=0;width=0;height=0;Hm=-1;el=null;rl=null;scripts=null;scroll=0;hide=!1;draggable=!1;Wm=!1;Ym=!1;Fl=0;Ul=0;xl=null;Nl=null;jl=null;Zm=null;fill=!1;no=!1;font=null;lo=!1;text=null;io=null;$l=0;Ql=0;Jl=0;fo=null;co=null;model=null;lC=null;ml=-1;pl=-1;zoom=0;yo=0;Io=0;hd=null;action=null;sd=-1;Xm=null;yl=null;Tl=null;bl=null;x=0;y=0;Rl=0;Pl=null;Dl=null;Il=0;Al=0;mo=(t,i,s)=>{let h=this.model;if(s&&(h=this.lC),!h)return null;if(-1===t&&-1===i&&!h.aC)return h;const n=e.i.cC(h,!0,!0,!1);return-1===t&&-1===i||n.Go(),-1!==t&&n.Ho(t),-1!==i&&n.Ho(i),n.Wo(64,768,-50,-10,-50,!0),n};fC(){if(this.pu===this.id)return this.x;let t=c.Hr[this.pu];if(!t.yl||!t.Tl||!t.bl)return this.x;let i=t.yl.indexOf(this.id);if(-1===i)return this.x;let s=t.Tl[i];for(;t.pu!==t.id;){const h=c.Hr[t.pu];h.yl&&h.Tl&&h.bl&&(i=h.yl.indexOf(t.id),-1!==i&&(s+=h.Tl[i])),t=h}return s}uC(){if(this.pu===this.id)return this.y;let t=c.Hr[this.pu];if(!t.yl||!t.Tl||!t.bl)return this.y;let i=t.yl.indexOf(this.id);if(-1===i)return this.y;let s=t.bl[i];for(;t.pu!==t.id;){const h=c.Hr[t.pu];h.yl&&h.Tl&&h.bl&&(i=h.yl.indexOf(t.id),-1!==i&&(s+=h.bl[i])),t=h}return s}outline(t){const i=this.fC(),s=this.uC();a.i.vl(i,s,this.width,this.height,t)}move(t,i){if(this.pu===this.id)return;this.x=0,this.y=0;const s=c.Hr[this.pu];if(s.yl&&s.Tl&&s.bl){const h=s.yl.indexOf(this.id);-1!==h&&(s.Tl[h]=t,s.bl[h]=i)}}delete(){if(this.pu===this.id)return;const t=c.Hr[this.pu];if(t.yl&&t.Tl&&t.bl){const i=t.yl.indexOf(this.id);-1!==i&&(t.yl.splice(i,1),t.Tl.splice(i,1),t.bl.splice(i,1))}}}},8107:(t,i,s)=>{s.d(i,{r:()=>h});class h{id=-1;dC=null;wC=(t,i)=>{for(this.id=t;;){const s=i.Nw;if(0===s)break;this.decode(t,s,i)}}}},8056:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(2383),e=s(8107);class n extends e.r{static count=0;static Hr=[];static wa=t=>{const i=new h.i(t.read('flo.dat'));this.count=i.kw;for(let t=0;t<this.count;t++)this.Hr[t]=new n,this.Hr[t].wC(t,i)};static yC=(t,i,s)=>(s>179&&(i=i/2|0),s>192&&(i=i/2|0),s>217&&(i=i/2|0),s>243&&(i=i/2|0),((t/4|0)<<10)+((i/32|0)<<7)+(s/2|0));static mC=(t,i)=>-1===t?12345678:((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);static pC=(t,i)=>-2===t?12345678:-1===t?(i<0?i=0:i>127&&(i=127),127-i):((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);AC=0;texture=-1;IC=!1;gC=!0;name=null;_C=0;CC=0;EC=0;TC=0;bC=0;vC=0;decode=(t,i,s)=>{1===i?(this.AC=s.OC,this.setColor(this.AC)):2===i?this.texture=s.Nw:3===i?this.IC=!0:5===i?this.gC=!1:6===i?this.name=s.zw:console.log('Error unrecognised config code: ',i)};setColor=t=>{const i=(t>>16&255)/256,s=(t>>8&255)/256,h=(255&t)/256;let e=i;s<i&&(e=s),h<e&&(e=h);let r=i;s>i&&(r=s),h>r&&(r=h);let l=0,o=0;const a=(e+r)/2;e!==r&&(a<.5&&(o=(r-e)/(r+e)),a>=.5&&(o=(r-e)/(2-r-e)),i===r?l=(s-h)/(r-e):s===r?l=(h-i)/(r-e)+2:h===r&&(l=(i-s)/(r-e)+4)),l/=6,this._C=256*l|0,this.CC=256*o|0,this.EC=256*a|0,this.CC<0?this.CC=0:this.CC>255&&(this.CC=255),this.EC<0?this.EC=0:this.EC>255&&(this.EC=255),this.TC=a>.5?(1-a)*o*512|0:a*o*512|0,this.TC<1&&(this.TC=1),this.bC=l*this.TC|0;let c=this._C+(16*Math.random()|0)-8;c<0?c=0:c>255&&(c=255);let f=this.CC+(48*Math.random()|0)-24;f<0?f=0:f>255&&(f=255);let u=this.EC+(48*Math.random()|0)-24;u<0?u=0:u>255&&(u=255),this.vC=n.yC(c,f,u)}}},8809:(t,i,s)=>{s.d(i,{i:()=>l});var h=s(2383),e=s(8107),n=s(9178),r=s(9345);class l extends e.r{static count=0;static Hr=[];static wa=t=>{const i=new h.i(t.read('idk.dat'));this.count=i.kw;for(let t=0;t<this.count;t++)this.Hr[t]=new l,this.Hr[t].wC(t,i)};type=-1;LC=null;SC=new Int32Array(5).fill(-1);kC=new Int32Array(6);RC=new Int32Array(6);disable=!1;decode=(t,i,s)=>{if(1===i)this.type=s.Nw;else if(2===i){const t=s.Nw;this.LC=new Int32Array(t);for(let i=0;i<t;i++)this.LC[i]=s.kw}else if(3===i)this.disable=!0;else if(i>=40&&i<50)this.kC[i-40]=s.kw;else if(i>=50&&i<60)this.RC[i-50]=s.kw;else{if(!(i>=60&&i<70))throw new Error(`Unrecognized idk config code: ${i}`);this.SC[i-60]=s.kw}};mo=()=>{if(!this.LC)return null;const t=new r.to(this.LC.length,null);for(let i=0;i<this.LC.length;i++)t[i]=n.i.model(this.LC[i]);let i;i=1===t.length?t[0]:n.i.Po(t,t.length);for(let t=0;t<6&&0!==this.kC[t];t++)i?.Do(this.kC[t],this.RC[t]);return i};Zw=()=>{let t=0;const i=new r.to(5,null);for(let s=0;s<5;s++)-1!==this.SC[s]&&(i[t++]=n.i.model(this.SC[s]));const s=n.i.Po(i,t);for(let t=0;t<6&&0!==this.kC[t];t++)s.Do(this.kC[t],this.RC[t]);return s}}},7958:(t,i,s)=>{s.d(i,{i:()=>c});var h=s(8107),e=s(2383),n=s(5542),r=s(9178),l=s(1908),o=s(5534),a=s(9345);class c extends h.r{static count=0;static cache=null;static MC=null;static xC=null;static NC=0;static lf=new n.i(500);static af=new n.i(30);static wa=t=>{this.MC=new e.i(t.read('loc.dat'));const i=new e.i(t.read('loc.idx'));this.count=i.kw,this.xC=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.xC[t]=s,s+=i.kw;this.cache=new a.to(10,null);for(let t=0;t<10;t++)this.cache[t]=new c};static get=t=>{if(!this.cache||!this.xC||!this.MC)throw new Error('LocType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.index===t)return s}this.NC=(this.NC+1)%10;const i=this.cache[this.NC];return this.MC.Va=this.xC[t],i.index=t,i.reset(),i.wC(t,this.MC),i.PC||(i.PC=new Int32Array(1)),-1===i.DC&&i.PC&&(i.active=i.PC.length>0&&i.PC[0]===l.i.Zd,i.tp&&(i.active=!0)),i};static Ur=()=>{this.lf=null,this.af=null,this.xC=null,this.cache=null,this.MC=null};index=-1;LC=null;PC=null;name=null;Uu=null;kC=null;RC=null;width=1;length=1;Iw=!0;gw=!0;active=!1;DC=-1;FC=!1;UC=!1;gC=!1;ml=-1;BC=!1;GC=16;HC=0;WC=0;tp=null;Jf=-1;nu=-1;ZC=!1;YC=!0;VC=128;zC=128;XC=128;zd=0;jC=0;qC=0;$C=0;KC=!1;decode=(t,i,s)=>{if(1===i){const t=s.Nw;this.LC=new Int32Array(t),this.PC=new Int32Array(t);for(let i=0;i<t;i++)this.LC[i]=s.kw,this.PC[i]=s.Nw}else if(2===i)this.name=s.zw;else if(3===i)this.Uu=s.zw;else if(14===i)this.width=s.Nw;else if(15===i)this.length=s.Nw;else if(17===i)this.Iw=!1;else if(18===i)this.gw=!1;else if(19===i)this.DC=s.Nw,1===this.DC&&(this.active=!0);else if(21===i)this.FC=!0;else if(22===i)this.UC=!0;else if(23===i)this.gC=!0;else if(24===i)this.ml=s.kw,65535===this.ml&&(this.ml=-1);else if(25===i)this.BC=!0;else if(28===i)this.GC=s.Nw;else if(29===i)this.HC=s.Mw;else if(39===i)this.WC=s.Mw;else if(i>=30&&i<39)this.tp||(this.tp=new a.to(5,null)),this.tp[i-30]=s.zw,'hidden'===this.tp[i-30]?.toLowerCase()&&(this.tp[i-30]=null);else if(40===i){const t=s.Nw;this.kC=new Uint16Array(t),this.RC=new Uint16Array(t);for(let i=0;i<t;i++)this.kC[i]=s.kw,this.RC[i]=s.kw}else 60===i?this.Jf=s.kw:62===i?this.ZC=!0:64===i?this.YC=!1:65===i?this.VC=s.kw:66===i?this.zC=s.kw:67===i?this.XC=s.kw:68===i?this.nu=s.kw:69===i?this.zd=s.Nw:70===i?this.jC=s.By:71===i?this.qC=s.By:72===i?this.$C=s.By:73===i&&(this.KC=!0)};mo=(t,i,s,h,e,n,l)=>{if(!this.PC)return null;let a=-1;for(let i=0;i<this.PC.length;i++)if(this.PC[i]===t){a=i;break}if(-1===a)return null;const f=BigInt(BigInt(this.index)<<6n)+BigInt(BigInt(a)<<3n)+BigInt(i)+BigInt(BigInt(l)+1n<<32n);let u=c.af?.get(f);if(u){if((this.FC||this.UC)&&(u=r.i.JC(u,this.FC,this.UC)),this.FC){const t=(s+h+e+n)/4|0;for(let i=0;i<u.QC;i++){const r=u.tE[i],l=s+((h-s)*(r+64)/128|0),o=l+((n+((e-n)*(r+64)/128|0)-l)*(u.iE[i]+64)/128|0);u.sE[i]+=o-t}u.hE()}return u}if(!this.LC)return null;if(a>=this.LC.length)return null;let d=this.LC[a];if(-1===d)return null;const w=this.ZC!==i>3;w&&(d+=65536);let y=c.lf?.get(BigInt(d));y||(y=r.i.model(65535&d),w&&y.eE(),c.lf?.put(BigInt(d),y));const m=128!==this.VC||128!==this.zC||128!==this.XC,p=0!==this.jC||0!==this.qC||0!==this.$C;let A=r.i.cC(y,!this.kC,!this.BC,i===o.i.ou&&-1===l&&!m&&!p);for(-1!==l&&(A.Go(),A.Ho(l),A.nE=null,A.rE=null);i-- >0;)A.lE();if(this.kC&&this.RC)for(let t=0;t<this.kC.length;t++)A.Do(this.kC[t],this.RC[t]);if(m&&A.scale(this.VC,this.zC,this.XC),p&&A.translate(this.qC,this.jC,this.$C),A.Wo(64+(255&this.HC),5*(255&this.WC)+768,-50,-10,-50,!this.UC),this.Iw&&(A.oE=A.aE),c.af?.put(f,A),(this.FC||this.UC)&&(A=r.i.JC(A,this.FC,this.UC)),this.FC){const t=(s+h+e+n)/4|0;for(let i=0;i<A.QC;i++){const r=A.tE[i],l=s+((h-s)*(r+64)/128|0),o=l+((n+((e-n)*(r+64)/128|0)-l)*(A.iE[i]+64)/128|0);A.sE[i]+=o-t}A.hE()}return A};reset=()=>{this.LC=null,this.PC=null,this.name=null,this.Uu=null,this.kC=null,this.RC=null,this.width=1,this.length=1,this.Iw=!0,this.gw=!0,this.active=!1,this.DC=-1,this.FC=!1,this.UC=!1,this.gC=!1,this.ml=-1,this.GC=16,this.HC=0,this.WC=0,this.tp=null,this.BC=!1,this.Jf=-1,this.nu=-1,this.ZC=!1,this.YC=!0,this.VC=128,this.zC=128,this.XC=128,this.zd=0,this.jC=0,this.qC=0,this.$C=0,this.KC=!1}}},2441:(t,i,s)=>{s.d(i,{i:()=>o});var h=s(8107),e=s(2383),n=s(5542),r=s(9178),l=s(9345);class o extends h.r{static count=0;static cache=null;static MC=null;static xC=null;static NC=0;static Wr=new n.i(30);static wa=t=>{this.MC=new e.i(t.read('npc.dat'));const i=new e.i(t.read('npc.idx'));this.count=i.kw,this.xC=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.xC[t]=s,s+=i.kw;this.cache=new l.to(20,null);for(let t=0;t<20;t++)this.cache[t]=new o};static get=t=>{if(!this.cache||!this.xC||!this.MC)throw new Error('LocType not loaded!!!');for(let i=0;i<20;i++){const s=this.cache[i];if(s&&s.index===t)return s}this.NC=(this.NC+1)%20;const i=this.cache[this.NC]=new o;return this.MC.Va=this.xC[t],i.index=t,i.wC(t,this.MC),i};static Ur=()=>{this.Wr=null,this.xC=null,this.cache=null,this.MC=null};index=-1;name=null;Uu=null;size=1;LC=null;SC=null;BC=!1;rA=-1;Qp=-1;iA=-1;hA=-1;nA=-1;cE=!1;kC=null;RC=null;tp=null;fE=-1;uE=-1;dE=-1;Yf=!0;ep=-1;wE=128;yE=128;decode=(t,i,s)=>{if(1===i){const t=s.Nw;this.LC=new Uint16Array(t);for(let i=0;i<t;i++)this.LC[i]=s.kw}else if(2===i)this.name=s.zw;else if(3===i)this.Uu=s.zw;else if(12===i)this.size=s.Mw;else if(13===i)this.rA=s.kw;else if(14===i)this.Qp=s.kw;else if(16===i)this.BC=!0;else if(17===i)this.Qp=s.kw,this.iA=s.kw,this.hA=s.kw,this.nA=s.kw;else if(i>=30&&i<40)this.tp||(this.tp=new l.to(5,null)),this.tp[i-30]=s.zw,'hidden'===this.tp[i-30]?.toLowerCase()&&(this.tp[i-30]=null);else if(40===i){const t=s.Nw;this.kC=new Uint16Array(t),this.RC=new Uint16Array(t);for(let i=0;i<t;i++)this.kC[i]=s.kw,this.RC[i]=s.kw}else if(60===i){const t=s.Nw;this.SC=new Uint16Array(t);for(let i=0;i<t;i++)this.SC[i]=s.kw}else 90===i?this.fE=s.kw:91===i?this.uE=s.kw:92===i?this.dE=s.kw:93===i?this.Yf=!1:95===i?this.ep=s.kw:97===i?this.wE=s.kw:98===i&&(this.yE=s.kw)};mE=(t,i,s)=>{let h=null,e=null;if(o.Wr&&(e=o.Wr.get(BigInt(this.index)),!e&&this.LC)){const t=new l.to(this.LC.length,null);for(let i=0;i<this.LC.length;i++)t[i]=r.i.model(this.LC[i]);if(e=1===t.length?t[0]:r.i.Po(t,t.length),this.kC&&this.RC)for(let t=0;t<this.kC.length;t++)e?.Do(this.kC[t],this.RC[t]);e?.Go(),e?.Wo(64,850,-30,-50,-30,!0),e&&o.Wr.put(BigInt(this.index),e)}return e?(h=r.i.pE(e,!this.BC),-1!==t&&-1!==i?h.AE(t,i,s):-1!==t&&h.Ho(t),128===this.wE&&128===this.yE||h.scale(this.wE,this.yE,this.wE),h.IE(),h.nE=null,h.rE=null,1===this.size&&(h.gE=!0),h):null};Zw=()=>{if(!this.SC)return null;const t=new l.to(this.SC.length,null);for(let i=0;i<this.SC.length;i++)t[i]=r.i.model(this.SC[i]);let i;if(i=1===t.length?t[0]:r.i.Po(t,t.length),this.kC&&this.RC)for(let t=0;t<this.kC.length;t++)i?.Do(this.kC[t],this.RC[t]);return i}}},1840:(t,i,s)=>{s.d(i,{i:()=>u});var h=s(8107),e=s(2383),n=s(6542),r=s(5542),l=s(9178),o=s(8078),a=s(2991),c=s(312),f=s(9345);class u extends h.r{static count=0;static cache=null;static MC=null;static xC=null;static NC=0;static _E=!0;static Wr=new r.i(50);static cf=new r.i(200);static wa=(t,i)=>{this._E=i,this.MC=new e.i(t.read('obj.dat'));const s=new e.i(t.read('obj.idx'));this.count=s.kw,this.xC=new Int32Array(this.count);let h=2;for(let t=0;t<this.count;t++)this.xC[t]=h,h+=s.kw;this.cache=new f.to(10,null);for(let t=0;t<10;t++)this.cache[t]=new u};static get=t=>{if(!this.cache||!this.xC||!this.MC)throw new Error('ObjType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.index===t)return s}this.NC=(this.NC+1)%10;const i=this.cache[this.NC];return this.MC.Va=this.xC[t],i.index=t,i.reset(),i.wC(t,this.MC),-1!==i.CE&&i.EE(),!this._E&&i.u&&(i.name='Members Object',i.Uu="Login to a members' server to use this object.",i.tp=null,i.Zm=null),i};static Ur=()=>{this.Wr=null,this.cf=null,this.xC=null,this.cache=null,this.MC=null};static Bl=(t,i)=>{if(u.cf){let s=u.cf.get(BigInt(t));if(s&&s.Xf!==i&&-1!==s.Xf&&(s.Hw(),s=null),s)return s}let s=u.get(t);if(s.TE||(i=-1),s.TE&&s.bE&&i>1){let t=-1;for(let h=0;h<10;h++)i>=s.bE[h]&&0!==s.bE[h]&&(t=s.TE[h]);-1!==t&&(s=u.get(t))}const h=new n.i(32,32),e=o.i.do,r=o.i.wo,l=o.i.pa,f=a.i.ya,d=a.i.vE,w=a.i.OE,y=a.i.left,m=a.i.right,p=a.i.top,A=a.i.bottom;o.i.LE=!1,a.i.bind(h.ya,32,32),a.i.fillRect(0,0,32,32,c.i.zl),o.i.AI();const I=s.fw(1),g=o.i.sin[s.im]*s.hm>>16,_=o.i.cos[s.im]*s.hm>>16;I.Ao(0,s.sm,s.SE,s.im,s.kE,g+(I.aE/2|0)+s.RE,_+s.RE);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.ya[t+32*i]&&(t>0&&h.ya[t+32*i-1]>1||i>0&&h.ya[t+32*(i-1)]>1||t<31&&h.ya[t+32*i+1]>1||i<31&&h.ya[t+32*(i+1)]>1)&&(h.ya[t+32*i]=1);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.ya[t+32*i]&&t>0&&i>0&&h.ya[t+32*(i-1)-1]>0&&(h.ya[t+32*i]=3153952);if(-1!==s.CE){const t=this.Bl(s.ME,10),i=t.Zl,h=t.Xf;t.Zl=32,t.Xf=32,t.xE(5,5,22,22),t.Zl=i,t.Xf=h}return u.cf?.put(BigInt(t),h),a.i.bind(f,d,w),a.i.El(y,p,m,A),o.i.do=e,o.i.wo=r,o.i.pa=l,o.i.LE=!0,s.Co?h.Zl=33:h.Zl=32,h.Xf=i,h};index=-1;model=0;name=null;Uu=null;kC=null;RC=null;hm=2e3;im=0;sm=0;SE=0;kE=0;RE=0;NE=!1;PE=-1;Co=!1;aw=1;u=!1;tp=null;Zm=null;DE=-1;FE=-1;UE=0;BE=-1;GE=-1;HE=0;WE=-1;ZE=-1;YE=-1;VE=-1;zE=-1;XE=-1;TE=null;bE=null;ME=-1;CE=-1;decode=(t,i,s)=>{if(1===i)this.model=s.kw;else if(2===i)this.name=s.zw;else if(3===i)this.Uu=s.zw;else if(4===i)this.hm=s.kw;else if(5===i)this.im=s.kw;else if(6===i)this.sm=s.kw;else if(7===i)this.kE=s.By,this.kE>32767&&(this.kE-=65536);else if(8===i)this.RE=s.By,this.RE>32767&&(this.RE-=65536);else if(9===i)this.NE=!0;else if(10===i)this.PE=s.kw;else if(11===i)this.Co=!0;else if(12===i)this.aw=s.Jr;else if(16===i)this.u=!0;else if(23===i)this.DE=s.kw,this.UE=s.Mw;else if(24===i)this.FE=s.kw;else if(25===i)this.BE=s.kw,this.HE=s.Mw;else if(26===i)this.GE=s.kw;else if(i>=30&&i<35)this.tp||(this.tp=new f.to(5,null)),this.tp[i-30]=s.zw,'hidden'===this.tp[i-30]?.toLowerCase()&&(this.tp[i-30]=null);else if(i>=35&&i<40)this.Zm||(this.Zm=new f.to(5,null)),this.Zm[i-35]=s.zw;else if(40===i){const t=s.Nw;this.kC=new Uint16Array(t),this.RC=new Uint16Array(t);for(let i=0;i<t;i++)this.kC[i]=s.kw,this.RC[i]=s.kw}else 78===i?this.WE=s.kw:79===i?this.ZE=s.kw:90===i?this.YE=s.kw:91===i?this.zE=s.kw:92===i?this.VE=s.kw:93===i?this.XE=s.kw:95===i?this.SE=s.kw:97===i?this.ME=s.kw:98===i?this.CE=s.kw:i>=100&&i<110&&(this.TE&&this.bE||(this.TE=new Uint16Array(10),this.bE=new Uint16Array(10)),this.TE[i-100]=s.kw,this.bE[i-100]=s.kw)};jE=t=>{let i=this.DE;if(1===t&&(i=this.BE),-1===i)return null;let s=this.FE,h=this.WE;1===t&&(s=this.GE,h=this.ZE);let e=l.i.model(i);if(-1!==s){const t=l.i.model(s);if(-1===h){const i=[e,t];e=l.i.Po(i,2)}else{const i=[e,t,l.i.model(h)];e=l.i.Po(i,3)}}if(0===t&&0!==this.UE&&e.translate(this.UE,0,0),1===t&&0!==this.HE&&e.translate(this.HE,0,0),this.kC&&this.RC)for(let t=0;t<this.kC.length;t++)e.Do(this.kC[t],this.RC[t]);return e};Zw=t=>{let i=this.YE;if(1===t&&(i=this.zE),-1===i)return null;let s=this.VE;1===t&&(s=this.XE);let h=l.i.model(i);if(-1!==s){const t=[h,l.i.model(s)];h=l.i.Po(t,2)}if(this.kC&&this.RC)for(let t=0;t<this.kC.length;t++)h.Do(this.kC[t],this.RC[t]);return h};fw=t=>{if(this.TE&&this.bE&&t>1){let i=-1;for(let s=0;s<10;s++)t>=this.bE[s]&&0!==this.bE[s]&&(i=this.TE[s]);if(-1!==i)return u.get(i).fw(1)}if(u.Wr){const t=u.Wr.get(BigInt(this.index));if(t)return t}const i=l.i.model(this.model);if(this.kC&&this.RC)for(let t=0;t<this.kC.length;t++)i.Do(this.kC[t],this.RC[t]);return i.Wo(64,768,-50,-10,-50,!0),i.gE=!0,u.Wr?.put(BigInt(this.index),i),i};EE=()=>{const t=u.get(this.CE);this.model=t.model,this.hm=t.hm,this.im=t.im,this.sm=t.sm,this.SE=t.SE,this.kE=t.kE,this.RE=t.RE,this.kC=t.kC,this.RC=t.RC;const i=u.get(this.ME);this.name=i.name,this.u=i.u,this.aw=i.aw;let s='a';const h=(i.name||'').toLowerCase().charAt(0);'a'!==h&&'e'!==h&&'i'!==h&&'o'!==h&&'u'!==h||(s='an'),this.Uu=`Swap this note at any bank for ${s} ${i.name}.`,this.Co=!0};reset=()=>{this.model=0,this.name=null,this.Uu=null,this.kC=null,this.RC=null,this.hm=2e3,this.im=0,this.sm=0,this.SE=0,this.kE=0,this.RE=0,this.NE=!1,this.PE=-1,this.Co=!1,this.aw=1,this.u=!1,this.tp=null,this.Zm=null,this.DE=-1,this.FE=-1,this.UE=0,this.BE=-1,this.GE=-1,this.HE=0,this.WE=-1,this.ZE=-1,this.YE=-1,this.VE=-1,this.zE=-1,this.XE=-1,this.TE=null,this.bE=null,this.ME=-1,this.CE=-1}}},8067:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(8107),e=s(2383),n=s(8762);class r extends h.r{static count=0;static Hr=[];static wa=t=>{const i=new e.i(t.read('seq.dat'));this.count=i.kw;for(let t=0;t<this.count;t++)this.Hr[t]=new r,this.Hr[t].wC(t,i),0===this.Hr[t].gl&&(this.Hr[t].gl=1,this.Hr[t].frames=new Int16Array(1),this.Hr[t].frames[0]=-1,this.Hr[t].po=new Int16Array(1),this.Hr[t].po[0]=-1,this.Hr[t].delay=new Int16Array(1),this.Hr[t].delay[0]=-1)};gl=0;frames=null;po=null;delay=null;_l=-1;zA=null;VA=!1;priority=5;qE=-1;$E=-1;YA=99;duration=0;decode=(t,i,s)=>{if(1===i){this.gl=s.Nw,this.frames=new Int16Array(this.gl),this.po=new Int16Array(this.gl),this.delay=new Int16Array(this.gl);for(let t=0;t<this.gl;t++)this.frames[t]=s.kw,this.po[t]=s.kw,65535===this.po[t]&&(this.po[t]=-1),this.delay[t]=s.kw,0===this.delay[t]&&(this.delay[t]=n.i.Hr[this.frames[t]].delay),0===this.delay[t]&&(this.delay[t]=1),this.duration+=this.delay[t]}else if(2===i)this._l=s.kw;else if(3===i){const t=s.Nw;this.zA=new Int32Array(t+1);for(let i=0;i<t;i++)this.zA[i]=s.Nw;this.zA[t]=9999999}else if(4===i)this.VA=!0;else if(5===i)this.priority=s.Nw;else if(6===i)this.qE=s.kw;else if(7===i)this.$E=s.kw;else{if(8!==i)throw new Error(`Unrecognized seq config code: ${i}`);this.YA=s.Nw}}}},551:(t,i,s)=>{s.d(i,{i:()=>o});var h=s(8107),e=s(2383),n=s(8067),r=s(9178),l=s(5542);class o extends h.r{static count=0;static Hr=[];static Wr=new l.i(30);static wa=t=>{const i=new e.i(t.read('spotanim.dat'));this.count=i.kw;for(let t=0;t<this.count;t++)this.Hr[t]=new o,this.Hr[t].index=t,this.Hr[t].wC(t,i)};index=0;model=0;ml=-1;kA=null;BC=!1;kC=new Uint16Array(6);RC=new Uint16Array(6);wE=128;yE=128;orientation=0;HC=0;WC=0;decode=(t,i,s)=>{if(1===i)this.model=s.kw;else if(2===i)this.ml=s.kw,n.i.Hr&&(this.kA=n.i.Hr[this.ml]);else if(3===i)this.BC=!0;else if(4===i)this.wE=s.kw;else if(5===i)this.yE=s.kw;else if(6===i)this.orientation=s.kw;else if(7===i)this.HC=s.Nw;else if(8===i)this.WC=s.Nw;else if(i>=40&&i<50)this.kC[i-40]=s.kw;else{if(!(i>=50&&i<60))throw new Error(`Unrecognized spotanim config code: ${i}`);this.RC[i-50]=s.kw}};mo=()=>{let t=o.Wr?.get(BigInt(this.index));if(t)return t;t=r.i.model(this.model);for(let i=0;i<6;i++)0!==this.kC[0]&&t.Do(this.kC[i],this.RC[i]);return o.Wr?.put(BigInt(this.index),t),t}}},1089:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(8107),e=s(2383);class n extends h.r{static count=0;static Hr=[];static KE=[];static JE=0;static wa=t=>{const i=new e.i(t.read('varp.dat'));this.count=i.kw;for(let t=0;t<this.count;t++)this.Hr[t]=new n,this.Hr[t].wC(t,i)};PE=null;QE=0;tT=0;iT=!1;sT=!0;Pm=0;hT=0;eT=!1;nT=!1;decode(t,i,s){if(1===i)this.QE=s.Nw;else if(2===i)this.tT=s.Nw;else if(3===i)this.iT=!0,n.KE[n.JE++]=t;else if(4===i)this.sT=!1;else if(5===i)this.Pm=s.kw;else if(6===i)this.eT=!0;else if(7===i)this.hT=s.Jr;else if(8===i)this.nT=!0;else{if(10!==i)throw new Error(`Error unrecognised config code: ${i}`);this.PE=s.zw}}}},8603:(t,i,s)=>{s.d(i,{i:()=>h});class h{static OPEN=0;static rT=1;static lT=2;static oT=4;static aT=8;static cT=h.rT<<4;static fT=h.lT<<4;static uT=h.oT<<4;static dT=h.aT<<4;static wT=256;static yT=512;static mT=1024;static pT=2048;static AT=4096;static IT=h.yT<<4;static gT=h.mT<<4;static _T=h.pT<<4;static CT=h.AT<<4;static ET=h.wT<<9;static TT=524288;static bT=2097152;static vT=h.bT|h.TT;static OT=h.wT|h.vT;static iu=h.lT|h.OT;static Qf=h.aT|h.OT;static cp=h.lT|h.oT|h.Qf;static su=h.fT|h.OT;static up=h.aT|h.cT|h.su;static tu=h.dT|h.OT;static fp=h.rT|h.lT|h.tu;static dp=h.fT|h.uT|h.tu;static LT=16777215}},3693:(t,i,s)=>{s.d(i,{i:()=>l});var h=s(8603),e=s(5534),n=s(1908),r=s(6439);class l{static qe=4;static an=104;static index=(t,i)=>t*l.an+i;offsetX;ST;sizeX;sizeZ;flags;constructor(){this.offsetX=0,this.ST=0,this.sizeX=l.an,this.sizeZ=l.an,this.flags=new Int32Array(this.sizeX*this.sizeZ),this.reset()}reset=()=>{for(let t=0;t<this.sizeX;t++)for(let i=0;i<this.sizeZ;i++){const s=l.index(t,i);0===t||0===i||t===this.sizeX-1||i===this.sizeZ-1?this.flags[s]=h.i.LT:this.flags[s]=h.i.OPEN}};kT=(t,i)=>{this.flags[l.index(t-this.offsetX,i-this.ST)]|=h.i.bT};Tw=(t,i)=>{this.flags[l.index(t-this.offsetX,i-this.ST)]&=~h.i.bT};dw=(t,i,s,n,r,l)=>{let o=h.i.wT;l&&(o|=h.i.ET);const a=t-this.offsetX,c=i-this.ST;if(r===e.i.au||r===e.i.fu){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.add(t,i,o)};Cw=(t,i,s,n,r,l)=>{let o=h.i.wT;l&&(o|=h.i.ET);const a=t-this.offsetX,c=i-this.ST;if(r===e.i.au||r===e.i.fu){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.remove(t,i,o)};RT=(t,i,s,r,l)=>{const o=t-this.offsetX,a=i-this.ST,c=l?h.i.CT:h.i.dT,f=l?h.i.AT:h.i.aT,u=l?h.i.mT:h.i.lT,d=l?h.i.gT:h.i.fT,w=l?h.i.yT:h.i.rT,y=l?h.i.IT:h.i.cT,m=l?h.i.pT:h.i.oT,p=l?h.i._T:h.i.uT;s===n.i.ru?r===e.i.ou?(this.add(o,a,c),this.add(o-1,a,f)):r===e.i.au?(this.add(o,a,u),this.add(o,a+1,d)):r===e.i.cu?(this.add(o,a,f),this.add(o+1,a,c)):r===e.i.fu&&(this.add(o,a,d),this.add(o,a-1,u)):s===n.i.MT||s===n.i.uu?r===e.i.ou?(this.add(o,a,w),this.add(o-1,a+1,y)):r===e.i.au?(this.add(o,a,m),this.add(o+1,a+1,p)):r===e.i.cu?(this.add(o,a,y),this.add(o+1,a-1,w)):r===e.i.fu&&(this.add(o,a,p),this.add(o-1,a-1,m)):s===n.i.lu&&(r===e.i.ou?(this.add(o,a,u|c),this.add(o-1,a,f),this.add(o,a+1,d)):r===e.i.au?(this.add(o,a,u|f),this.add(o,a+1,d),this.add(o+1,a,c)):r===e.i.cu?(this.add(o,a,d|f),this.add(o+1,a,c),this.add(o,a-1,u)):r===e.i.fu&&(this.add(o,a,d|c),this.add(o,a-1,u),this.add(o-1,a,f))),l&&this.RT(t,i,s,r,!1)};Aw=(t,i,s,r,l)=>{const o=t-this.offsetX,a=i-this.ST,c=l?h.i.CT:h.i.dT,f=l?h.i.AT:h.i.aT,u=l?h.i.mT:h.i.lT,d=l?h.i.gT:h.i.fT,w=l?h.i.yT:h.i.rT,y=l?h.i.IT:h.i.cT,m=l?h.i.pT:h.i.oT,p=l?h.i._T:h.i.uT;s===n.i.ru?r===e.i.ou?(this.remove(o,a,c),this.remove(o-1,a,f)):r===e.i.au?(this.remove(o,a,u),this.remove(o,a+1,d)):r===e.i.cu?(this.remove(o,a,f),this.remove(o+1,a,c)):r===e.i.fu&&(this.remove(o,a,d),this.remove(o,a-1,u)):s===n.i.MT||s===n.i.uu?r===e.i.ou?(this.remove(o,a,w),this.remove(o-1,a+1,y)):r===e.i.au?(this.remove(o,a,m),this.remove(o+1,a+1,p)):r===e.i.cu?(this.remove(o,a,y),this.remove(o+1,a-1,w)):r===e.i.fu&&(this.remove(o,a,p),this.remove(o-1,a-1,m)):s===n.i.lu&&(r===e.i.ou?(this.remove(o,a,u|c),this.remove(o-1,a,f),this.remove(o,a+1,d)):r===e.i.au?(this.remove(o,a,u|f),this.remove(o,a+1,d),this.remove(o+1,a,c)):r===e.i.cu?(this.remove(o,a,d|f),this.remove(o+1,a,c),this.remove(o,a-1,u)):r===e.i.fu&&(this.remove(o,a,d|c),this.remove(o,a-1,u),this.remove(o-1,a,f))),l&&this.Aw(t,i,s,r,!1)};lp=(t,i,s,r,o,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.ST,u=s-this.offsetX,d=r-this.ST,w=l.index(c,f);if(o===n.i.ru){if(a===e.i.ou){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.su)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.iu)===h.i.OPEN)return!0}else if(a===e.i.au){if(c===u&&f===d+1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.i.Qf)===h.i.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.tu)===h.i.OPEN)return!0}else if(a===e.i.cu){if(c===u+1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.su)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.iu)===h.i.OPEN)return!0}else if(a===e.i.fu){if(c===u&&f===d-1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.i.Qf)===h.i.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.tu)===h.i.OPEN)return!0}}else if(o===n.i.lu){if(a===e.i.ou){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.tu)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.iu)===h.i.OPEN)return!0}else if(a===e.i.au){if(c===u-1&&f===d&&(this.flags[w]&h.i.Qf)===h.i.OPEN)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.iu)===h.i.OPEN)return!0}else if(a===e.i.cu){if(c===u-1&&f===d&&(this.flags[w]&h.i.Qf)===h.i.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.su)===h.i.OPEN)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1)return!0}else if(a===e.i.fu){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.su)===h.i.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.tu)===h.i.OPEN)return!0;if(c===u&&f===d-1)return!0}}else if(o===n.i.wu){if(c===u&&f===d+1&&(this.flags[w]&h.i.fT)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.lT)===h.i.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.i.aT)===h.i.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.dT)===h.i.OPEN)return!0}return!1};op=(t,i,s,r,o,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.ST,u=s-this.offsetX,d=r-this.ST,w=l.index(c,f);if(o===n.i.xT||o===n.i.NT){if(o===n.i.NT&&(a=a+2&3),a===e.i.ou){if(c===u+1&&f===d&&(this.flags[w]&h.i.dT)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.lT)===h.i.OPEN)return!0}else if(a===e.i.au){if(c===u-1&&f===d&&(this.flags[w]&h.i.aT)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.lT)===h.i.OPEN)return!0}else if(a===e.i.cu){if(c===u-1&&f===d&&(this.flags[w]&h.i.aT)===h.i.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.fT)===h.i.OPEN)return!0}else if(a===e.i.fu){if(c===u+1&&f===d&&(this.flags[w]&h.i.dT)===h.i.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.i.fT)===h.i.OPEN)return!0}}else if(o===n.i.PT){if(c===u&&f===d+1&&(this.flags[w]&h.i.fT)===h.i.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.i.lT)===h.i.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.i.aT)===h.i.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.i.dT)===h.i.OPEN)return!0}return!1};ap=(t,i,s,e,n,o,a)=>{const c=s+n-1,f=e+o-1,u=l.index(t-this.offsetX,i-this.ST);return t>=s&&t<=c&&i>=e&&i<=f||(t===s-1&&i>=e&&i<=f&&(this.flags[u]&h.i.aT)===h.i.OPEN&&(a&r.i.ou)===h.i.OPEN||(t===c+1&&i>=e&&i<=f&&(this.flags[u]&h.i.dT)===h.i.OPEN&&(a&r.i.cu)===h.i.OPEN||(i===e-1&&t>=s&&t<=c&&(this.flags[u]&h.i.lT)===h.i.OPEN&&(a&r.i.fu)===h.i.OPEN||i===f+1&&t>=s&&t<=c&&(this.flags[u]&h.i.fT)===h.i.OPEN&&(a&r.i.au)===h.i.OPEN)))};add=(t,i,s)=>{this.flags[l.index(t,i)]|=s};remove=(t,i,s)=>{this.flags[l.index(t,i)]&=h.i.LT-s}}},6439:(t,i,s)=>{s.d(i,{i:()=>h});class h{static au=1;static cu=2;static fu=4;static ou=8;static DT=h.ou|h.fu;static FT=h.ou|h.au;static UT=h.cu|h.fu;static BT=h.cu|h.au}},5534:(t,i,s)=>{var h;s.d(i,{i:()=>e}),function(t){t[t.ou=0]="WEST",t[t.au=1]="NORTH",t[t.cu=2]="EAST",t[t.fu=3]="SOUTH"}(h||(h={}));const e=h},3714:(t,i,s)=>{var h;s.d(i,{i:()=>e}),function(t){t[t.ww=0]="WALL",t[t.yw=1]="WALL_DECOR",t[t.pw=2]="GROUND",t[t.Vd=3]="GROUND_DECOR"}(h||(h={}));const e=h},1908:(t,i,s)=>{s.d(i,{i:()=>n,qA:()=>r});var h,e=s(3714);!function(t){t[t.ru=0]="WALL_STRAIGHT",t[t.MT=1]="WALL_DIAGONAL_CORNER",t[t.lu=2]="WALL_L",t[t.uu=3]="WALL_SQUARE_CORNER",t[t.NA=4]="WALLDECOR_STRAIGHT_NOOFFSET",t[t.rp=5]="WALLDECOR_STRAIGHT_OFFSET",t[t.xT=6]="WALLDECOR_DIAGONAL_OFFSET",t[t.NT=7]="WALLDECOR_DIAGONAL_NOOFFSET",t[t.PT=8]="WALLDECOR_DIAGONAL_BOTH",t[t.wu=9]="WALL_DIAGONAL",t[t.Zd=10]="CENTREPIECE_STRAIGHT",t[t.Yd=11]="CENTREPIECE_DIAGONAL",t[t.GT=12]="ROOF_STRAIGHT",t[t.HT=13]="ROOF_DIAGONAL_WITH_ROOFEDGE",t[t.WT=14]="ROOF_DIAGONAL",t[t.ZT=15]="ROOF_L_CONCAVE",t[t.YT=16]="ROOF_L_CONVEX",t[t.VT=17]="ROOF_FLAT",t[t.zT=18]="ROOFEDGE_STRAIGHT",t[t.XT=19]="ROOFEDGE_DIAGONAL_CORNER",t[t.jT=20]="ROOFEDGE_L",t[t.qT=21]="ROOFEDGE_SQUARE_CORNER",t[t.Vd=22]="GROUND_DECOR"}(h||(h={}));const n=h;class r{static pu(t){switch(t){case h.ru:case h.MT:case h.lu:case h.uu:return e.i.ww;case h.NA:case h.rp:case h.xT:case h.NT:case h.PT:return e.i.yw;case h.wu:case h.Zd:case h.Yd:case h.GT:case h.HT:case h.WT:case h.ZT:case h.YT:case h.VT:case h.zT:case h.XT:case h.jT:case h.qT:return e.i.pw;case h.Vd:return e.i.Vd;default:throw new Error('Invalid loc shape.')}}}},3909:(t,i,s)=>{s.d(i,{i:()=>m});var h=s(3693),e=s(8056),n=s(2383),r=s(8078),l=s(7221),o=s(7958),a=s(682),c=s(8067),f=s(1908),u=s(5534),d=s(312),w=s(9190),y=s(9345);class m{static $T=Int32Array.of(1,2,4,8);static KT=Int32Array.of(16,32,64,128);static JT=Int32Array.of(1,0,-1,0);static QT=Int32Array.of(0,-1,0,1);static tb=(17*Math.random()|0)-8;static ib=(33*Math.random()|0)-16;static m=!0;static Em=0;static sb=!1;static hb=(t,i)=>{let s=this.eb(t+45365,i+91923,4)+(this.eb(t+10294,i+37821,2)-128>>1)+(this.eb(t,i,1)-128>>2)-128;return s=35+(.3*s|0),s<10?s=10:s>60&&(s=60),s};static eb=(t,i,s)=>{const h=t/s|0,e=t&s-1,n=i/s|0,r=i&s-1,l=this.nb(h,n),o=this.nb(h+1,n),a=this.nb(h,n+1),c=this.nb(h+1,n+1),f=this.rb(l,o,e,s),u=this.rb(a,c,e,s);return this.rb(f,u,r,s)};static rb=(t,i,s,h)=>{const e=65536-r.i.cos[1024*s/h|0]>>1;return(t*(65536-e)>>16)+(i*e>>16)};static nb=(t,i)=>((this.lb(t-1,i-1)+this.lb(t+1,i-1)+this.lb(t-1,i+1)+this.lb(t+1,i+1))/16|0)+((this.lb(t-1,i)+this.lb(t+1,i)+this.lb(t,i-1)+this.lb(t,i+1))/8|0)+(this.lb(t,i)/4|0);static lb=(t,i)=>{const s=t+57*i,h=s<<13^s,e=BigInt(h)*(BigInt(h)*BigInt(h)*15731n+789221n)+1376312589n&0x7fffffffn;return 255&Number(e>>19n)};static dw=(t,i,s,h,e,n,r,l,d,w,y)=>{const p=e[y][i][s],A=e[y][i+1][s],I=e[y][i+1][s+1],g=e[y][i][s+1],_=p+A+I+g>>2,C=o.i.get(l);let E=i+(s<<7)+(l<<14)+1073741824|0;C.active||(E+=-2147483648),E|=0;const T=((w<<6)+d|0)<<24>>24;if(d===f.i.Vd)h?.ob(C.mo(f.i.Vd,w,p,A,I,g,-1),t,i,s,_,E,T),C.Iw&&C.active&&r.kT(i,s),-1!==C.ml&&n.$A(new a.i(l,t,3,i,s,c.i.Hr[C.ml],!0));else if(d===f.i.Zd||d===f.i.Yd){const e=C.mo(f.i.Zd,w,p,A,I,g,-1);if(e){let n,r,l=0;d===f.i.Yd&&(l+=256),w===u.i.au||w===u.i.fu?(n=C.length,r=C.width):(n=C.width,r=C.length),h?.dw(t,i,s,_,e,null,E,T,n,r,l)}C.Iw&&r.dw(i,s,C.width,C.length,w,C.gw),-1!==C.ml&&n.$A(new a.i(l,t,2,i,s,c.i.Hr[C.ml],!0))}else if(d>=f.i.GT)h?.dw(t,i,s,_,C.mo(d,w,p,A,I,g,-1),null,E,T,1,1,0),C.Iw&&r.dw(i,s,C.width,C.length,w,C.gw),-1!==C.ml&&n.$A(new a.i(l,t,2,i,s,c.i.Hr[C.ml],!0));else if(d===f.i.ru)h?.RT(t,i,s,_,m.$T[w],0,C.mo(f.i.ru,w,p,A,I,g,-1),null,E,T),C.Iw&&r.RT(i,s,d,w,C.gw),-1!==C.ml&&n.$A(new a.i(l,t,0,i,s,c.i.Hr[C.ml],!0));else if(d===f.i.MT)h?.RT(t,i,s,_,m.KT[w],0,C.mo(f.i.MT,w,p,A,I,g,-1),null,E,T),C.Iw&&r.RT(i,s,d,w,C.gw),-1!==C.ml&&n.$A(new a.i(l,t,0,i,s,c.i.Hr[C.ml],!0));else if(d===f.i.lu){const e=w+1&3;h?.RT(t,i,s,_,m.$T[w],m.$T[e],C.mo(f.i.lu,w+4,p,A,I,g,-1),C.mo(f.i.lu,e,p,A,I,g,-1),E,T),C.Iw&&r.RT(i,s,d,w,C.gw),-1!==C.ml&&n.$A(new a.i(l,t,0,i,s,c.i.Hr[C.ml],!0))}else if(d===f.i.uu)h?.RT(t,i,s,_,m.KT[w],0,C.mo(f.i.uu,w,p,A,I,g,-1),null,E,T),C.Iw&&r.RT(i,s,d,w,C.gw),-1!==C.ml&&n.$A(new a.i(l,t,0,i,s,c.i.Hr[C.ml],!0));else if(d===f.i.wu)h?.dw(t,i,s,_,C.mo(d,w,p,A,I,g,-1),null,E,T,1,1,0),C.Iw&&r.dw(i,s,C.width,C.length,w,C.gw),-1!==C.ml&&n.$A(new a.i(l,t,2,i,s,c.i.Hr[C.ml],!0));else if(d===f.i.NA)h?.ab(t,i,s,_,0,0,E,C.mo(f.i.NA,u.i.ou,p,A,I,g,-1),T,512*w,m.$T[w]),-1!==C.ml&&n.$A(new a.i(l,t,1,i,s,c.i.Hr[C.ml],!0));else if(d===f.i.rp){let e=16;if(h){const n=h.hu(t,i,s);n>0&&(e=o.i.get(n>>14&32767).GC)}h?.ab(t,i,s,_,m.JT[w]*e,m.QT[w]*e,E,C.mo(f.i.NA,u.i.ou,p,A,I,g,-1),T,512*w,m.$T[w]),-1!==C.ml&&n.$A(new a.i(l,t,1,i,s,c.i.Hr[C.ml],!0))}else d===f.i.xT?(h?.ab(t,i,s,_,0,0,E,C.mo(f.i.NA,u.i.ou,p,A,I,g,-1),T,w,256),-1!==C.ml&&n.$A(new a.i(l,t,1,i,s,c.i.Hr[C.ml],!0))):d===f.i.NT?(h?.ab(t,i,s,_,0,0,E,C.mo(f.i.NA,u.i.ou,p,A,I,g,-1),T,w,512),-1!==C.ml&&n.$A(new a.i(l,t,1,i,s,c.i.Hr[C.ml],!0))):d===f.i.PT&&(h?.ab(t,i,s,_,0,0,E,C.mo(f.i.NA,u.i.ou,p,A,I,g,-1),T,w,768),-1!==C.ml&&n.$A(new a.i(l,t,1,i,s,c.i.Hr[C.ml],!0)))};TA;bA;nn;rn;cb;fb;ub;wb;yb;mb;pb;Ab;Ib;gb;_b;Cb;constructor(t,i,s,e){this.TA=t,this.bA=i,this.nn=s,this.rn=e,this.cb=new y.ra(h.i.qe,t,i),this.fb=new y.ra(h.i.qe,t,i),this.ub=new y.ra(h.i.qe,t,i),this.wb=new y.ra(h.i.qe,t,i),this.Cb=new y.la(h.i.qe,t+1,i+1),this.yb=new y.ra(h.i.qe,t+1,i+1),this.mb=new y.on(t+1,i+1),this.pb=new Int32Array(i),this.Ab=new Int32Array(i),this.Ib=new Int32Array(i),this.gb=new Int32Array(i),this._b=new Int32Array(i)}km=(t,i)=>{for(let t=0;t<h.i.qe;t++)for(let s=0;s<h.i.an;s++)for(let e=0;e<h.i.an;e++)if(1==(1&this.rn[t][s][e])){let h=t;2==(2&this.rn[1][s][e])&&h--,h>=0&&i[h]?.kT(s,e)}m.tb+=(5*Math.random()|0)-2,m.tb<-8?m.tb=-8:m.tb>8&&(m.tb=8),m.ib+=(5*Math.random()|0)-2,m.ib<-16?m.ib=-16:m.ib>16&&(m.ib=16);for(let i=0;i<h.i.qe;i++){const s=this.yb[i],h=96,n=-50,l=-10,o=-50,a=768*(0|Math.sqrt(n*n+l*l+o*o))>>8;for(let t=1;t<this.bA-1;t++)for(let e=1;e<this.TA-1;e++){const r=this.nn[i][e+1][t]-this.nn[i][e-1][t],c=this.nn[i][e][t+1]-this.nn[i][e][t-1],f=0|Math.sqrt(r*r+c*c+65536),u=h+((n*((r<<8)/f|0)+l*(65536/f|0)+o*((c<<8)/f|0))/a|0),d=(s[e-1][t]>>2)+(s[e+1][t]>>3)+(s[e][t-1]>>2)+(s[e][t+1]>>3)+(s[e][t]>>1);this.mb[e][t]=u-d}for(let t=0;t<this.bA;t++)this.pb[t]=0,this.Ab[t]=0,this.Ib[t]=0,this.gb[t]=0,this._b[t]=0;for(let s=-5;s<this.TA+5;s++){for(let t=0;t<this.bA;t++){const h=s+5;let n;if(h>=0&&h<this.TA){const s=255&this.cb[i][h][t];if(s>0){const i=e.i.Hr[s-1];this.pb[t]+=i.bC,this.Ab[t]+=i.CC,this.Ib[t]+=i.EC,this.gb[t]+=i.TC,n=this._b[t]++}}const r=s-5;if(r>=0&&r<this.TA){const s=255&this.cb[i][r][t];if(s>0){const i=e.i.Hr[s-1];this.pb[t]-=i.bC,this.Ab[t]-=i.CC,this.Ib[t]-=i.EC,this.gb[t]-=i.TC,n=this._b[t]--}}}if(s>=1&&s<this.TA-1){let h=0,n=0,l=0,o=0,a=0;for(let c=-5;c<this.bA+5;c++){const f=c+5;f>=0&&f<this.bA&&(h+=this.pb[f],n+=this.Ab[f],l+=this.Ib[f],o+=this.gb[f],a+=this._b[f]);const y=c-5;if(y>=0&&y<this.bA&&(h-=this.pb[y],n-=this.Ab[y],l-=this.Ib[y],o-=this.gb[y],a-=this._b[y]),c>=1&&c<this.bA-1&&(!m.m||0==(16&this.rn[i][s][c])&&this.Eb(i,s,c)===m.Em)){const f=255&this.cb[i][s][c],y=255&this.fb[i][s][c];if(f>0||y>0){const p=this.nn[i][s][c],A=this.nn[i][s+1][c],I=this.nn[i][s+1][c+1],g=this.nn[i][s][c+1],_=this.mb[s][c],C=this.mb[s+1][c],E=this.mb[s+1][c+1],T=this.mb[s][c+1];let b=-1,v=-1;if(f>0){const t=256*h/o|0,i=n/a|0;let s=l/a|0;b=e.i.yC(t,i,s);const r=t+m.tb&255;s+=m.ib,s<0?s=0:s>255&&(s=255),v=e.i.yC(r,i,s)}if(i>0){let t=0!==f||this.ub[i][s][c]===w.i.Tb;y>0&&!e.i.Hr[y-1].gC&&(t=!1),t&&p===A&&p===I&&p===g&&(this.Cb[i][s][c]|=2340)}let O=0;if(-1!==b&&(O=r.i.palette[e.i.mC(v,96)]),0===y)t?.bb(i,s,c,w.i.Tb,u.i.ou,-1,p,A,I,g,e.i.mC(b,_),e.i.mC(b,C),e.i.mC(b,E),e.i.mC(b,T),d.i.zl,d.i.zl,d.i.zl,d.i.zl,O,d.i.zl);else{const h=this.ub[i][s][c]+1,n=this.wb[i][s][c],l=e.i.Hr[y-1];let o,a,f=l.texture;f>=0?(a=r.i.vb(f),o=-1):l.AC===d.i.Pa?(a=0,o=-2,f=-1):(o=e.i.yC(l._C,l.CC,l.EC),a=r.i.palette[e.i.pC(l.vC,96)]),t?.bb(i,s,c,h,n,f,p,A,I,g,e.i.mC(b,_),e.i.mC(b,C),e.i.mC(b,E),e.i.mC(b,T),e.i.pC(o,_),e.i.pC(o,C),e.i.pC(o,E),e.i.pC(o,T),O,a)}}}}}}for(let s=1;s<this.bA-1;s++)for(let h=1;h<this.TA-1;h++)t?.Ob(i,h,s,this.Eb(i,h,s))}m.sb||t?.Lb(64,768,-50,-10,-50);for(let i=0;i<this.TA;i++)for(let s=0;s<this.bA;s++)2==(2&this.rn[1][i][s])&&t?.Sb(i,s);if(!m.sb){let t=1,i=2,s=4;for(let e=0;e<h.i.qe;e++){e>0&&(t<<=3,i<<=3,s<<=3);for(let h=0;h<=e;h++)for(let n=0;n<=this.bA;n++)for(let r=0;r<=this.TA;r++){if(0!=(this.Cb[h][r][n]&t)){let i=n,s=n,o=h,a=h;for(;i>0&&0!=(this.Cb[h][r][i-1]&t);)i--;for(;s<this.bA&&0!=(this.Cb[h][r][s+1]&t);)s++;t:for(;o>0;){for(let h=i;h<=s;h++)if(0==(this.Cb[o-1][r][h]&t))break t;o--}t:for(;a<e;){for(let h=i;h<=s;h++)if(0==(this.Cb[a+1][r][h]&t))break t;a++}if((a+1-o)*(s+1-i)>=8){const h=this.nn[a][r][i]-240,n=this.nn[o][r][i];l.i.kb(e,1,128*r,h,128*i,128*r,n,128*s+128);for(let h=o;h<=a;h++)for(let e=i;e<=s;e++)this.Cb[h][r][e]&=~t}}if(0!=(this.Cb[h][r][n]&i)){let t=r,s=r,o=h,a=h;for(;t>0&&0!=(this.Cb[h][t-1][n]&i);)t--;for(;s<this.TA&&0!=(this.Cb[h][s+1][n]&i);)s++;t:for(;o>0;){for(let h=t;h<=s;h++)if(0==(this.Cb[o-1][h][n]&i))break t;o--}t:for(;a<e;){for(let h=t;h<=s;h++)if(0==(this.Cb[a+1][h][n]&i))break t;a++}if((a+1-o)*(s+1-t)>=8){const h=this.nn[a][t][n]-240,r=this.nn[o][t][n];l.i.kb(e,2,128*t,h,128*n,128*s+128,r,128*n);for(let h=o;h<=a;h++)for(let e=t;e<=s;e++)this.Cb[h][e][n]&=~i}}if(0!=(this.Cb[h][r][n]&s)){let t=r,i=r,o=n,a=n;for(;o>0&&0!=(this.Cb[h][r][o-1]&s);)o--;for(;a<this.bA&&0!=(this.Cb[h][r][a+1]&s);)a++;t:for(;t>0;){for(let i=o;i<=a;i++)if(0==(this.Cb[h][t-1][i]&s))break t;t--}t:for(;i<this.TA;){for(let t=o;t<=a;t++)if(0==(this.Cb[h][i+1][t]&s))break t;i++}if((i+1-t)*(a+1-o)>=4){const n=this.nn[h][t][o];l.i.kb(e,4,128*t,n,128*o,128*i+128,n,128*a+128);for(let e=t;e<=i;e++)for(let t=o;t<=a;t++)this.Cb[h][e][t]&=~s}}}}}};Lm=(t,i,s,n)=>{let r=0;for(let t=0;t<e.i.count;t++)if('water'===e.i.Hr[t].name?.toLowerCase()){r=t+1<<24>>24;break}for(let e=t;e<t+s;e++)for(let t=i;t<i+n;t++)if(t>=0&&t<this.TA&&e>=0&&e<this.bA){this.fb[0][t][e]=r;for(let i=0;i<h.i.qe;i++)this.nn[i][t][e]=0,this.rn[i][t][e]=0}};Om=(t,i,s,e,r)=>{const l=new n.i(new Uint8Array(r));for(let n=0;n<h.i.qe;n++)for(let r=0;r<64;r++)for(let o=0;o<64;o++){const a=r+s,c=o+e;let f;if(a>=0&&a<h.i.an&&c>=0&&c<h.i.an)for(this.rn[n][a][c]=0;;){if(f=l.Nw,0===f){0===n?this.nn[0][a][c]=8*-m.hb(a+t+932731,c+556238+i):this.nn[n][a][c]=this.nn[n-1][a][c]-240;break}if(1===f){let t=l.Nw;1===t&&(t=0),0===n?this.nn[0][a][c]=8*-t:this.nn[n][a][c]=this.nn[n-1][a][c]-8*t;break}f<=49?(this.fb[n][a][c]=l.Mw,this.ub[n][a][c]=((f-2)/4|0)<<24>>24,this.wb[n][a][c]=(f-2&3)<<24>>24):f<=81?this.rn[n][a][c]=f-49<<24>>24:this.cb[n][a][c]=f-81<<24>>24}else for(;f=l.Nw,0!==f;){if(1===f){l.Nw;break}f<=49&&l.Nw}}};Sm=(t,i,s,e,r,l)=>{const o=new n.i(new Uint8Array(e));let a=-1;for(;;){const e=o.Rb;if(0===e)return;a+=e;let n=0;for(;;){const e=o.Rb;if(0===e)break;n+=e-1;const c=63&n,f=n>>6&63,u=n>>12,d=o.Nw,w=d>>2,y=3&d,m=f+r,p=c+l;if(m>0&&p>0&&m<h.i.an-1&&p<h.i.an-1){let h=u;2==(2&this.rn[1][m][p])&&(h=u-1);let e=null;h>=0&&(e=s[h]),this.dw(u,m,p,t,i,e,a,w,y)}}}};dw=(t,i,s,h,e,n,r,l,d)=>{if(m.m){if(0!=(16&this.rn[t][i][s]))return;if(this.Eb(t,i,s)!==m.Em)return}const w=this.nn[t][i][s],y=this.nn[t][i+1][s],p=this.nn[t][i+1][s+1],A=this.nn[t][i][s+1],I=w+y+p+A>>2,g=o.i.get(r);let _=i+(s<<7)+(r<<14)+1073741824|0;g.active||(_+=-2147483648),_|=0;const C=((d<<6)+l|0)<<24>>24;if(l===f.i.Vd)(!m.m||g.active||g.KC)&&(h?.ob(g.mo(f.i.Vd,d,w,y,p,A,-1),t,i,s,I,_,C),g.Iw&&g.active&&n&&n.kT(i,s),-1!==g.ml&&e.$A(new a.i(r,t,3,i,s,c.i.Hr[g.ml],!0)));else if(l===f.i.Zd||l===f.i.Yd){const o=g.mo(f.i.Zd,d,w,y,p,A,-1);if(o){let e,n,r=0;if(l===f.i.Yd&&(r+=256),d===u.i.au||d===u.i.fu?(e=g.length,n=g.width):(e=g.width,n=g.length),h?.dw(t,i,s,I,o,null,_,C,e,n,r)&&g.YC)for(let h=0;h<=e;h++)for(let e=0;e<=n;e++){let n=o.Mb/4|0;n>30&&(n=30),n>this.yb[t][i+h][s+e]&&(this.yb[t][i+h][s+e]=n<<24>>24)}}g.Iw&&n&&n.dw(i,s,g.width,g.length,d,g.gw),-1!==g.ml&&e.$A(new a.i(r,t,2,i,s,c.i.Hr[g.ml],!0))}else if(l>=f.i.GT)h?.dw(t,i,s,I,g.mo(l,d,w,y,p,A,-1),null,_,C,1,1,0),l>=f.i.GT&&l<=f.i.VT&&l!==f.i.HT&&t>0&&(this.Cb[t][i][s]|=2340),g.Iw&&n&&n.dw(i,s,g.width,g.length,d,g.gw),-1!==g.ml&&e.$A(new a.i(r,t,2,i,s,c.i.Hr[g.ml],!0));else if(l===f.i.ru)h?.RT(t,i,s,I,m.$T[d],0,g.mo(f.i.ru,d,w,y,p,A,-1),null,_,C),d===u.i.ou?(g.YC&&(this.yb[t][i][s]=50,this.yb[t][i][s+1]=50),g.gC&&(this.Cb[t][i][s]|=585)):d===u.i.au?(g.YC&&(this.yb[t][i][s+1]=50,this.yb[t][i+1][s+1]=50),g.gC&&(this.Cb[t][i][s+1]|=1170)):d===u.i.cu?(g.YC&&(this.yb[t][i+1][s]=50,this.yb[t][i+1][s+1]=50),g.gC&&(this.Cb[t][i+1][s]|=585)):d===u.i.fu&&(g.YC&&(this.yb[t][i][s]=50,this.yb[t][i+1][s]=50),g.gC&&(this.Cb[t][i][s]|=1170)),g.Iw&&n&&n.RT(i,s,l,d,g.gw),-1!==g.ml&&e.$A(new a.i(r,t,0,i,s,c.i.Hr[g.ml],!0)),16!==g.GC&&h?.xb(t,i,s,g.GC);else if(l===f.i.MT)h?.RT(t,i,s,I,m.KT[d],0,g.mo(f.i.MT,d,w,y,p,A,-1),null,_,C),g.YC&&(d===u.i.ou?this.yb[t][i][s+1]=50:d===u.i.au?this.yb[t][i+1][s+1]=50:d===u.i.cu?this.yb[t][i+1][s]=50:d===u.i.fu&&(this.yb[t][i][s]=50)),g.Iw&&n&&n.RT(i,s,l,d,g.gw),-1!==g.ml&&e.$A(new a.i(r,t,0,i,s,c.i.Hr[g.ml],!0));else if(l===f.i.lu){const o=d+1&3;h?.RT(t,i,s,I,m.$T[d],m.$T[o],g.mo(f.i.lu,d+4,w,y,p,A,-1),g.mo(f.i.lu,o,w,y,p,A,-1),_,C),g.gC&&(d===u.i.ou?(this.Cb[t][i][s]|=265,this.Cb[t][i][s+1]|=1170):d===u.i.au?(this.Cb[t][i][s+1]|=1170,this.Cb[t][i+1][s]|=585):d===u.i.cu?(this.Cb[t][i+1][s]|=585,this.Cb[t][i][s]|=1170):d===u.i.fu&&(this.Cb[t][i][s]|=1170,this.Cb[t][i][s]|=585)),g.Iw&&n&&n.RT(i,s,l,d,g.gw),-1!==g.ml&&e.$A(new a.i(r,t,0,i,s,c.i.Hr[g.ml],!0)),16!==g.GC&&h?.xb(t,i,s,g.GC)}else if(l===f.i.uu)h?.RT(t,i,s,I,m.KT[d],0,g.mo(f.i.uu,d,w,y,p,A,-1),null,_,C),g.YC&&(d===u.i.ou?this.yb[t][i][s+1]=50:d===u.i.au?this.yb[t][i+1][s+1]=50:d===u.i.cu?this.yb[t][i+1][s]=50:d===u.i.fu&&(this.yb[t][i][s]=50)),g.Iw&&n&&n.RT(i,s,l,d,g.gw),-1!==g.ml&&e.$A(new a.i(r,t,0,i,s,c.i.Hr[g.ml],!0));else if(l===f.i.wu)h?.dw(t,i,s,I,g.mo(l,d,w,y,p,A,-1),null,_,C,1,1,0),g.Iw&&n&&n.dw(i,s,g.width,g.length,d,g.gw),-1!==g.ml&&e.$A(new a.i(r,t,2,i,s,c.i.Hr[g.ml],!0));else if(l===f.i.NA)h?.ab(t,i,s,I,0,0,_,g.mo(f.i.NA,u.i.ou,w,y,p,A,-1),C,512*d,m.$T[d]),-1!==g.ml&&e.$A(new a.i(r,t,1,i,s,c.i.Hr[g.ml],!0));else if(l===f.i.rp){let n=16;if(h){const e=h.hu(t,i,s);e>0&&(n=o.i.get(e>>14&32767).GC)}h?.ab(t,i,s,I,m.JT[d]*n,m.QT[d]*n,_,g.mo(f.i.NA,u.i.ou,w,y,p,A,-1),C,512*d,m.$T[d]),-1!==g.ml&&e.$A(new a.i(r,t,1,i,s,c.i.Hr[g.ml],!0))}else l===f.i.xT?(h?.ab(t,i,s,I,0,0,_,g.mo(f.i.NA,u.i.ou,w,y,p,A,-1),C,d,256),-1!==g.ml&&e.$A(new a.i(r,t,1,i,s,c.i.Hr[g.ml],!0))):l===f.i.NT?(h?.ab(t,i,s,I,0,0,_,g.mo(f.i.NA,u.i.ou,w,y,p,A,-1),C,d,512),-1!==g.ml&&e.$A(new a.i(r,t,1,i,s,c.i.Hr[g.ml],!0))):l===f.i.PT&&(h?.ab(t,i,s,I,0,0,_,g.mo(f.i.NA,u.i.ou,w,y,p,A,-1),C,d,768),-1!==g.ml&&e.$A(new a.i(r,t,1,i,s,c.i.Hr[g.ml],!0)))};Eb=(t,i,s)=>0==(8&this.rn[t][i][s])?t<=0||0==(2&this.rn[1][i][s])?t:t-1:0}},7221:(t,i,s)=>{s.d(i,{i:()=>I});var h=s(8078),e=s(6539),n=s(220),r=s(4138),l=s(3693),o=s(4155),a=s(3806),c=s(9118),f=s(9080),u=s(6711),d=s(9865),w=s(2991),y=s(8570),m=s(9190),p=s(5534),A=s(9345);class I{static Nb=new A.Pb(8,32,51,51,!1);static Db=new A.to(100,null);static Fb=new Int32Array(l.i.qe);static Ub=new A.Bb(l.i.qe,500,null);static Gb=new A.to(500,null);static Hb=new f.i;static Kc=0;static Wb=0;static Zb=0;static Yb=0;static Vb=0;static zb=0;static Xb=0;static jb=0;static qb=0;static $b=0;static Kb=0;static Jb=0;static Qb=0;static tv=0;static iv=0;static sv=0;static hv=0;static ev=0;static nv=0;static rv=0;static lv=0;static ov=0;static av=!1;static cv=null;static fv=Int32Array.of(19,55,38,155,255,110,137,205,76);static uv=Int32Array.of(160,192,80,96,0,144,80,48,160);static dv=Int32Array.of(76,8,137,4,0,1,38,2,19);static wv=Int32Array.of(0,0,2,0,0,2,1,1,0);static yv=Int32Array.of(2,0,0,2,0,0,0,4,4);static mv=Int32Array.of(0,4,4,8,0,0,8,0,0);static pv=Int32Array.of(1,1,0,0,0,8,0,0,8);static Av=Int32Array.of(53,-53,-53,53);static Iv=Int32Array.of(-53,-53,53,53);static gv=Int32Array.of(-45,45,45,-45);static _v=Int32Array.of(45,45,-45,-45);static Cv=[new Int32Array(16),Int32Array.of(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),Int32Array.of(1,0,0,0,1,1,0,0,1,1,1,0,1,1,1,1),Int32Array.of(1,1,0,0,1,1,0,0,1,0,0,0,1,0,0,0),Int32Array.of(0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,1),Int32Array.of(0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1),Int32Array.of(1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1),Int32Array.of(1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0),Int32Array.of(0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0),Int32Array.of(1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,1),Int32Array.of(1,1,1,1,1,1,0,0,1,0,0,0,1,0,0,0),Int32Array.of(0,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1),Int32Array.of(0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1)];static Ev=[Int32Array.of(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15),Int32Array.of(12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3),Int32Array.of(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0),Int32Array.of(3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12)];static Tv=Int32Array.of(41,39248,41,4643,41,41,41,41,41,41,41,41,41,41,41,43086,41,41,41,41,41,41,41,8602,41,28992,41,41,41,41,41,5056,41,41,41,41,41,41,41,41,41,41,41,41,41,41,3131,41,41,41);static xf=0;static Gl=0;static Hl=0;static Ic=-1;static gc=-1;static m=!0;static init=(t,i,s,e,n)=>{this.Wb=0,this.Zb=0,this.Yb=t,this.Vb=i,this.zb=t/2|0,this.Xb=i/2|0;const r=new A.Pb(9,32,53,53,!1);for(let t=128;t<=384;t+=32)for(let i=0;i<2048;i+=64){this.jb=h.i.sin[t],this.qb=h.i.cos[t],this.$b=h.i.sin[i],this.Kb=h.i.cos[i];const l=(t-128)/32|0,o=i/64|0;for(let t=-26;t<=26;t++)for(let i=-26;i<=26;i++){const h=128*t,a=128*i;let c=!1;for(let t=-s;t<=e;t+=128)if(this.bv(h,a,n[l]+t)){c=!0;break}r[l][o][t+25+1][i+25+1]=c}}for(let t=0;t<8;t++)for(let i=0;i<32;i++)for(let s=-25;s<25;s++)for(let h=-25;h<25;h++){let e=!1;t:for(let n=-1;n<=1;n++)for(let l=-1;l<=1;l++){if(r[t][i][s+n+25+1][h+l+25+1]){e=!0;break t}if(r[t][(i+1)%31][s+n+25+1][h+l+25+1]){e=!0;break t}if(r[t+1][i][s+n+25+1][h+l+25+1]){e=!0;break t}if(r[t+1][(i+1)%31][s+n+25+1][h+l+25+1]){e=!0;break t}}this.Nb[t][i][s+25][h+25]=e}};static Ur=()=>{this.Db=null,this.Fb=null,this.Ub=null,this.Hb=null,this.Nb=null,this.Gb=null,this.cv=null,console.log('World3D unloaded!')};static kb=(t,i,s,h,e,n,l,o)=>{I.Ub[t][I.Fb[t]++]=new r.i(s/128|0,n/128|0,e/128|0,o/128|0,i,s,n,e,o,h,l)};static bv=(t,i,s)=>{const h=i*this.$b+t*this.Kb>>16,e=i*this.Kb-t*this.$b>>16,n=s*this.jb+e*this.qb>>16,r=s*this.qb-e*this.jb>>16;if(n<50||n>3500)return!1;const l=this.zb+((h<<9)/n|0),o=this.Xb+((r<<9)/n|0);return l>=this.Wb&&l<=this.Yb&&o>=this.Zb&&o<=this.Vb};vv;TA;bA;Ov;Lv;Dn;Sv;kv;Rv;Mv=0;xv=0;Nv=0;constructor(t,i,s,h){this.vv=s,this.TA=h,this.bA=i,this.Lv=new A.Un(s,h,i,null),this.Sv=new A.la(s,h+1,i+1),this.Ov=t,this.Dn=new A.to(5e3,null),this.kv=new Int32Array(1e4),this.Rv=new Int32Array(1e4),this.reset()}reset=()=>{for(let t=0;t<this.vv;t++)for(let i=0;i<this.TA;i++)for(let s=0;s<this.bA;s++)this.Lv[t][i][s]=null;for(let t=0;t<l.i.qe;t++){for(let i=0;i<I.Fb[t];i++)I.Ub[t][i]=null;I.Fb[t]=0}for(let t=0;t<this.Mv;t++)this.Dn[t]=null;this.Mv=0,I.Db.fill(null)};vm=t=>{this.xv=t;for(let i=0;i<this.TA;i++)for(let s=0;s<this.bA;s++)this.Lv[t][i][s]=new n.i(t,i,s)};Sb=(t,i)=>{const s=this.Lv[0][t][i];for(let s=0;s<3;s++){this.Lv[s][t][i]=this.Lv[s+1][t][i];const h=this.Lv[s][t][i];h&&h.level--}this.Lv[0][t][i]||(this.Lv[0][t][i]=new n.i(0,t,i));const h=this.Lv[0][t][i];h&&(h.Pv=s),this.Lv[3][t][i]=null};Ob=(t,i,s,h)=>{const e=this.Lv[t][i][s];e&&(e.Dv=h)};bb=(t,i,s,h,e,r,l,o,a,c,f,u,w,p,A,I,g,_,C,E)=>{if(h===m.i.Tb){for(let h=t;h>=0;h--)this.Lv[h][i][s]||(this.Lv[h][i][s]=new n.i(h,i,s));const h=this.Lv[t][i][s];h&&(h.Fv=new d.i(f,u,w,p,-1,C,!1))}else if(h===m.i.Uv){for(let h=t;h>=0;h--)this.Lv[h][i][s]||(this.Lv[h][i][s]=new n.i(h,i,s));const h=this.Lv[t][i][s];h&&(h.Fv=new d.i(A,I,g,_,r,E,l===o&&l===a&&l===c))}else{for(let h=t;h>=0;h--)this.Lv[h][i][s]||(this.Lv[h][i][s]=new n.i(h,i,s));const d=this.Lv[t][i][s];d&&(d.Bv=new y.i(i,h,I,o,w,e,f,c,E,A,r,_,C,a,g,p,l,s,u))}};ob=(t,i,s,h,e,r,l)=>{this.Lv[i][s][h]||(this.Lv[i][s][h]=new n.i(i,s,h));const a=this.Lv[i][s][h];a&&(a.Gv=new o.i(e,128*s+64,128*h+64,t,r,l))};Ew=(t,i,s)=>{const h=this.Lv[t][i][s];h&&(h.Gv=null)};uw=(t,i,s,h,e,r,l,o)=>{let a=0;const c=this.Lv[h][t][i];if(c)for(let t=0;t<c.Hv;t++){const i=c.Wv[t];if(!i||!i.model)continue;const s=i.model.oE;s>a&&(a=s)}else this.Lv[h][t][i]=new n.i(h,t,i);const f=this.Lv[h][t][i];f&&(f.Zv=new u.i(s,128*t+64,128*i+64,r,l,o,e,a))};rw=(t,i,s)=>{const h=this.Lv[t][i][s];h&&(h.Zv=null)};RT=(t,i,s,h,e,r,l,o,c,f)=>{if(!l&&!o)return;for(let h=t;h>=0;h--)this.Lv[h][i][s]||(this.Lv[h][i][s]=new n.i(h,i,s));const u=this.Lv[t][i][s];u&&(u.Yv=new a.i(h,128*i+64,128*s+64,e,r,l,o,c,f))};Aw=(t,i,s,h)=>{const e=this.Lv[t][i][s];1===h&&e&&(e.Yv=null)};ab=(t,i,s,h,e,r,l,o,a,f,u)=>{if(!o)return;for(let h=t;h>=0;h--)this.Lv[h][i][s]||(this.Lv[h][i][s]=new n.i(h,i,s));const d=this.Lv[t][i][s];d&&(d.Vv=new c.i(h,128*i+e+64,128*s+r+64,u,f,o,l,a))};_w=(t,i,s)=>{const h=this.Lv[t][i][s];h&&(h.Vv=null)};xb=(t,i,s,h)=>{const e=this.Lv[t][i][s];if(!e)return;const n=e.Vv;if(!n)return;const r=128*i+64,l=128*s+64;n.x=r+((n.x-r)*h/16|0),n.z=l+((n.z-l)*h/16|0)};xA=(t,i,s,h)=>{if(!h)return;const e=this.Lv[t][i][s];if(!e)return;const n=e.Vv;n&&(n.model=h)};FA=(t,i,s,h)=>{if(!h)return;const e=this.Lv[t][i][s];if(!e)return;const n=e.Gv;n&&(n.model=h)};DA=(t,i,s,h)=>{if(!h)return;const e=this.Lv[t][i][s];if(!e)return;const n=e.Yv;n&&(n.zv=h)};PA=(t,i,s,h,e)=>{if(!h)return;const n=this.Lv[s][t][i];if(!n)return;const r=n.Yv;r&&(r.zv=h,r.Xv=e)};dw=(t,i,s,h,e,n,r,l,o,a,c)=>{if(!e&&!n)return!0;const f=128*i+64*o,u=128*s+64*a;return this.jv(f,u,h,t,i,s,o,a,e,n,r,l,c,!1)};AA=(t,i,s,h,e,n,r,l,o,a)=>{if(!e&&!n)return!0;let c=i-o,f=h-o,u=i+o,d=h+o;return a&&(l>640&&l<1408&&(d+=128),l>1152&&l<1920&&(u+=128),(l>1664||l<384)&&(f-=128),l>128&&l<896&&(c-=128)),c=c/128|0,f=f/128|0,u=u/128|0,d=d/128|0,this.jv(i,h,s,t,c,f,u+1-c,d-f+1,e,n,r,0,l,!0)};_A=(t,i,s,h,e,n,r,l,o,a,c,f)=>!o&&!a||this.jv(i,h,s,t,e,n,r+1-e,l-n+1,o,a,c,0,f,!0);Cw=(t,i,s)=>{const h=this.Lv[t][i][s];if(h)for(let t=0;t<h.Hv;t++){const e=h.Wv[t];if(e&&2==(e.qv>>29&3)&&e.$v===i&&e.Kv===s)return void this.Jv(e)}};MA=(t,i,s,h)=>{if(!h)return;const e=this.Lv[t][i][s];if(e)for(let t=0;t<e.Hv;t++){const i=e.Wv[t];if(i&&2==(i.qv>>29&3))return void(i.model=h)}};tf=()=>{for(let t=0;t<this.Mv;t++){const i=this.Dn[t];i&&this.Jv(i),this.Dn[t]=null}this.Mv=0};hu=(t,i,s)=>{const h=this.Lv[t][i][s];return h&&h.Yv?h.Yv.qv:0};mw=(t,i,s)=>{const h=this.Lv[t][s][i];return h&&h.Vv?h.Vv.qv:0};du=(t,i,s)=>{const h=this.Lv[t][i][s];if(!h)return 0;for(let t=0;t<h.Hv;t++){const e=h.Wv[t];if(e&&2==(e.qv>>29&3)&&e.$v===i&&e.Kv===s)return e.qv}return 0};Kf=(t,i,s)=>{const h=this.Lv[t][i][s];return h&&h.Gv?h.Gv.qv:0};eu=(t,i,s,h)=>{const e=this.Lv[t][i][s];if(e){if(e.Yv&&e.Yv.qv===h)return 255&e.Yv.info;if(e.Vv&&e.Vv.qv===h)return 255&e.Vv.info;if(e.Gv&&e.Gv.qv===h)return 255&e.Gv.info;for(let t=0;t<e.Hv;t++){const i=e.Wv[t];if(i&&i.qv===h)return 255&i.info}return-1}return-1};Lb=(t,i,s,h,e)=>{const n=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;for(let i=0;i<this.vv;i++)for(let r=0;r<this.TA;r++)for(let l=0;l<this.bA;l++){const o=this.Lv[i][r][l];if(!o)continue;const a=o.Yv;a&&a.zv&&a.zv.Qv&&(this.tO(i,r,l,1,1,a.zv),a.Xv&&a.Xv.Qv&&(this.tO(i,r,l,1,1,a.Xv),this.iO(a.zv,a.Xv,0,0,0,!1),a.Xv.sO(t,n,s,h,e)),a.zv.sO(t,n,s,h,e));for(let a=0;a<o.Hv;a++){const c=o.Wv[a];c&&c.model&&c.model.Qv&&(this.tO(i,r,l,c.hO+1-c.$v,c.eO-c.Kv+1,c.model),c.model.sO(t,n,s,h,e))}const c=o.Gv;c&&c.model&&c.model.Qv&&(this.nO(i,r,l,c.model),c.model.sO(t,n,s,h,e))}};nO=(t,i,s,h)=>{if(i<this.TA){const e=this.Lv[t][i+1][s];e&&e.Gv&&e.Gv.model&&e.Gv.model.Qv&&this.iO(h,e.Gv.model,128,0,0,!0)}if(s<this.TA){const e=this.Lv[t][i][s+1];e&&e.Gv&&e.Gv.model&&e.Gv.model.Qv&&this.iO(h,e.Gv.model,0,0,128,!0)}if(i<this.TA&&s<this.bA){const e=this.Lv[t][i+1][s+1];e&&e.Gv&&e.Gv.model&&e.Gv.model.Qv&&this.iO(h,e.Gv.model,128,0,128,!0)}if(i<this.TA&&s>0){const e=this.Lv[t][i+1][s-1];e&&e.Gv&&e.Gv.model&&e.Gv.model.Qv&&this.iO(h,e.Gv.model,128,0,-128,!0)}};tO=(t,i,s,h,e,n)=>{let r=!0,l=i;const o=i+h,a=s-1,c=s+e;for(let f=t;f<=t+1;f++)if(f!==this.vv){for(let u=l;u<=o;u++)if(!(u<0||u>=this.TA))for(let l=a;l<=c;l++){if(l<0||l>=this.bA||r&&u<o&&l<c&&(l>=s||u===i))continue;const a=this.Lv[f][u][l];if(!a)continue;const d=128*(u-i)+64*(1-h),w=128*(l-s)+64*(1-e),y=((this.Ov[f][u][l]+this.Ov[f][u+1][l]+this.Ov[f][u][l+1]+this.Ov[f][u+1][l+1])/4|0)-((this.Ov[t][i][s]+this.Ov[t][i+1][s]+this.Ov[t][i][s+1]+this.Ov[t][i+1][s+1])/4|0),m=a.Yv;m&&m.zv&&m.zv.Qv&&this.iO(n,m.zv,d,y,w,r),m&&m.Xv&&m.Xv.Qv&&this.iO(n,m.Xv,d,y,w,r);for(let t=0;t<a.Hv;t++){const l=a.Wv[t];if(!l||!l.model||!l.model.Qv)continue;const o=l.hO+1-l.$v,c=l.eO+1-l.Kv;this.iO(n,l.model,128*(l.$v-i)+64*(o-h),y,128*(l.Kv-s)+64*(c-e),r)}}l--,r=!1}};iO=(t,i,s,h,e,n)=>{this.Nv++;let r=0;const l=i.tE,o=i.QC;if(t.Qv&&t.rO)for(let n=0;n<t.QC;n++){const a=t.Qv[n],c=t.rO[n];if(c&&0!==c.w){const f=t.sE[n]-h;if(f>i.lO)continue;const u=t.tE[n]-s;if(u<i.oO||u>i.aO)continue;const d=t.iE[n]-e;if(d<i.cO||d>i.fO)continue;if(i.Qv&&i.rO)for(let t=0;t<o;t++){const s=i.Qv[t],h=i.rO[t];u!==l[t]||d!==i.iE[t]||f!==i.sE[t]||h&&0===h.w||(a&&s&&h&&(a.x+=h.x,a.y+=h.y,a.z+=h.z,a.w+=h.w,s.x+=c.x,s.y+=c.y,s.z+=c.z,s.w+=c.w,r++),this.kv[n]=this.Nv,this.Rv[t]=this.Nv)}}}if(!(r<3)&&n){if(t.uO)for(let i=0;i<t.dO;i++)this.kv[t.wO[i]]===this.Nv&&this.kv[t.yO[i]]===this.Nv&&this.kv[t.mO[i]]===this.Nv&&(t.uO[i]=-1);if(i.uO)for(let t=0;t<i.dO;t++)this.Rv[i.wO[t]]===this.Nv&&this.Rv[i.yO[t]]===this.Nv&&this.Rv[i.mO[t]]===this.Nv&&(i.uO[t]=-1)}};qf=(t,i,s,h,e,n)=>{const r=this.Lv[t][i][s];if(!r)return;const l=r.Fv;if(l){const t=l.color;if(0!==t)for(let i=0;i<4;i++)h[e]=t,h[e+1]=t,h[e+2]=t,h[e+3]=t,e+=n;return}const o=r.Bv;if(!o)return;const a=o.shape,c=o.rotation,f=o.pO,u=o.AO,d=I.Cv[a],w=I.Ev[c];let y=0;if(0===f)for(let t=0;t<4;t++)0!==d[w[y++]]&&(h[e]=u),0!==d[w[y++]]&&(h[e+1]=u),0!==d[w[y++]]&&(h[e+2]=u),0!==d[w[y++]]&&(h[e+3]=u),e+=n;else for(let t=0;t<4;t++)h[e]=0===d[w[y++]]?f:u,h[e+1]=0===d[w[y++]]?f:u,h[e+2]=0===d[w[y++]]?f:u,h[e+3]=0===d[w[y++]]?f:u,e+=n};click=(t,i)=>{I.av=!0,I.Gl=t,I.Hl=i,I.Ic=-1,I.gc=-1};draw=(t,i,s,e,n,r,l)=>{t<0?t=0:t>=128*this.TA&&(t=128*this.TA-1),s<0?s=0:s>=128*this.bA&&(s=128*this.bA-1),I.Kc++,I.jb=h.i.sin[r],I.qb=h.i.cos[r],I.$b=h.i.sin[n],I.Kb=h.i.cos[n],I.cv=I.Nb[(r-128)/32|0][n/64|0],I.Jb=t,I.Qb=i,I.tv=s,I.iv=t/128|0,I.sv=s/128|0,I.lv=e,I.hv=I.iv-25,I.hv<0&&(I.hv=0),I.nv=I.sv-25,I.nv<0&&(I.nv=0),I.ev=I.iv+25,I.ev>this.TA&&(I.ev=this.TA),I.rv=I.sv+25,I.rv>this.bA&&(I.rv=this.bA),this.IO(),I.ov=0;for(let t=this.xv;t<this.vv;t++){const s=this.Lv[t];for(let h=I.hv;h<I.ev;h++)for(let n=I.nv;n<I.rv;n++){const r=s[h][n];r&&(r.Dv<=e&&(I.cv[h+25-I.iv][n+25-I.sv]||this.Ov[t][h][n]-i>=2e3)?(r.visible=!0,r.update=!0,r.gO=r.Hv>0,I.ov++):(r.visible=!1,r.update=!1,r._O=0))}}for(let t=this.xv;t<this.vv;t++){const i=this.Lv[t];for(let t=-25;t<=0;t++){const s=I.iv+t,h=I.iv-t;if(!(s<I.hv&&h>=I.ev))for(let t=-25;t<=0;t++){const e=I.sv+t,n=I.sv-t;let r;if(s>=I.hv&&(e>=I.nv&&(r=i[s][e],r&&r.visible&&this.CO(r,!0,l)),n<I.rv&&(r=i[s][n],r&&r.visible&&this.CO(r,!0,l))),h<I.ev&&(e>=I.nv&&(r=i[h][e],r&&r.visible&&this.CO(r,!0,l)),n<I.rv&&(r=i[h][n],r&&r.visible&&this.CO(r,!0,l))),0===I.ov)return void(I.av=!1)}}}for(let t=this.xv;t<this.vv;t++){const i=this.Lv[t];for(let t=-25;t<=0;t++){const s=I.iv+t,h=I.iv-t;if(!(s<I.hv&&h>=I.ev))for(let t=-25;t<=0;t++){const e=I.sv+t,n=I.sv-t;let r;if(s>=I.hv&&(e>=I.nv&&(r=i[s][e],r&&r.visible&&this.CO(r,!1,l)),n<I.rv&&(r=i[s][n],r&&r.visible&&this.CO(r,!1,l))),h<I.ev&&(e>=I.nv&&(r=i[h][e],r&&r.visible&&this.CO(r,!1,l)),n<I.rv&&(r=i[h][n],r&&r.visible&&this.CO(r,!1,l))),0===I.ov)return void(I.av=!1)}}}};jv=(t,i,s,h,r,l,o,a,c,f,u,d,w,y)=>{if(!c&&!f)return!1;for(let t=r;t<r+o;t++)for(let i=l;i<l+a;i++){if(t<0||i<0||t>=this.TA||i>=this.bA)return!1;const s=this.Lv[h][t][i];if(s&&s.Hv>=5)return!1}const m=new e.i(h,s,t,i,c,f,w,r,r+o-1,l,l+a-1,u,d);for(let t=r;t<r+o;t++)for(let i=l;i<l+a;i++){let s=0;t>r&&(s|=1),t<r+o-1&&(s+=4),i>l&&(s+=8),i<l+a-1&&(s+=2);for(let s=h;s>=0;s--)this.Lv[s][t][i]||(this.Lv[s][t][i]=new n.i(s,t,i));const e=this.Lv[h][t][i];e&&(e.Wv[e.Hv]=m,e.EO[e.Hv]=s,e.TO|=s,e.Hv++)}return y&&(this.Dn[this.Mv++]=m),!0};Jv=t=>{for(let i=t.$v;i<=t.hO;i++)for(let s=t.Kv;s<=t.eO;s++){const h=this.Lv[t.level][i][s];if(h){for(let i=0;i<h.Hv;i++)if(h.Wv[i]===t){h.Hv--;for(let t=i;t<h.Hv;t++)h.Wv[t]=h.Wv[t+1],h.EO[t]=h.EO[t+1];h.Wv[h.Hv]=null;break}h.TO=0;for(let t=0;t<h.Hv;t++)h.TO|=h.EO[t]}}};IO=()=>{const t=I.Fb[I.lv],i=I.Ub[I.lv];I.xf=0;for(let s=0;s<t;s++){const t=i[s];if(!t)continue;let h,e,n,r;if(1===t.type){if(h=t.CA+25-I.iv,h>=0&&h<=50){e=t.EA+25-I.sv,e<0&&(e=0),n=t.bA+25-I.sv,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.cv&&I.cv[h][e++]){i=!0;break}if(i){if(r=I.Jb-t.oO,r>32)t.mode=1;else{if(r>=-32)continue;t.mode=2,r=-r}t.bO=(t.cO-I.tv<<8)/r|0,t.vO=(t.fO-I.tv<<8)/r|0,t.OO=(t.lO-I.Qb<<8)/r|0,t.LO=(t.aE-I.Qb<<8)/r|0,I.Gb[I.xf++]=t}}}else if(2===t.type){if(h=t.EA+25-I.sv,h>=0&&h<=50){e=t.CA+25-I.iv,e<0&&(e=0),n=t.TA+25-I.iv,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.cv&&I.cv[e++][h]){i=!0;break}if(i){if(r=I.tv-t.cO,r>32)t.mode=3;else{if(r>=-32)continue;t.mode=4,r=-r}t.SO=(t.oO-I.Jb<<8)/r|0,t.kO=(t.aO-I.Jb<<8)/r|0,t.OO=(t.lO-I.Qb<<8)/r|0,t.LO=(t.aE-I.Qb<<8)/r|0,I.Gb[I.xf++]=t}}}else if(4===t.type&&(h=t.lO-I.Qb,h>128&&(e=t.EA+25-I.sv,e<0&&(e=0),n=t.bA+25-I.sv,n>50&&(n=50),e<=n))){let i=t.CA+25-I.iv;i<0&&(i=0),r=t.TA+25-I.iv,r>50&&(r=50);let s=!1;t:for(let t=i;t<=r;t++)for(let i=e;i<=n;i++)if(I.cv&&I.cv[t][i]){s=!0;break t}s&&(t.mode=5,t.SO=(t.oO-I.Jb<<8)/h|0,t.kO=(t.aO-I.Jb<<8)/h|0,t.bO=(t.cO-I.tv<<8)/h|0,t.vO=(t.fO-I.tv<<8)/h|0,I.Gb[I.xf++]=t)}}};CO=(t,i,s)=>{for(I.Hb.$A(t);;){let t;do{if(t=I.Hb.RO(),!t)return}while(!t.update);const h=t.x,e=t.z,n=t.level,r=t.MO,l=this.Lv[n];if(t.visible){if(i){if(n>0){const t=this.Lv[n-1][h][e];if(t&&t.update)continue}if(h<=I.iv&&h>I.hv){const i=l[h-1][e];if(i&&i.update&&(i.visible||0==(1&t.TO)))continue}if(h>=I.iv&&h<I.ev-1){const i=l[h+1][e];if(i&&i.update&&(i.visible||0==(4&t.TO)))continue}if(e<=I.sv&&e>I.nv){const i=l[h][e-1];if(i&&i.update&&(i.visible||0==(8&t.TO)))continue}if(e>=I.sv&&e<I.rv-1){const i=l[h][e+1];if(i&&i.update&&(i.visible||0==(2&t.TO)))continue}}else i=!0;if(t.visible=!1,t.Pv){const i=t.Pv;i.Fv?this.xO(0,h,e)||this.NO(i.Fv,0,h,e,I.jb,I.qb,I.$b,I.Kb):i.Bv&&!this.xO(0,h,e)&&this.PO(h,e,i.Bv,I.jb,I.qb,I.$b,I.Kb);const n=i.Yv;n&&n.zv?.draw(0,I.jb,I.qb,I.$b,I.Kb,n.x-I.Jb,n.y-I.Qb,n.z-I.tv,n.qv);for(let t=0;t<i.Hv;t++){const h=i.Wv[t];if(h){let t=h.model;t||(t=h.DO?.draw(s)??null),t?.draw(h.IA,I.jb,I.qb,I.$b,I.Kb,h.x-I.Jb,h.y-I.Qb,h.z-I.tv,h.qv)}}}let o=!1;t.Fv?this.xO(r,h,e)||(o=!0,this.NO(t.Fv,r,h,e,I.jb,I.qb,I.$b,I.Kb)):t.Bv&&!this.xO(r,h,e)&&(o=!0,this.PO(h,e,t.Bv,I.jb,I.qb,I.$b,I.Kb));let a=0,c=0;const f=t.Yv,u=t.Vv;if((f||u)&&(I.iv===h?a+=1:I.iv<h&&(a+=2),I.sv===e?a+=3:I.sv>e&&(a+=6),c=I.fv[a],t.FO=I.dv[a]),f&&(0==(f.UO&I.uv[a])?t._O=0:16===f.UO?(t._O=3,t.BO=I.wv[a],t.GO=3-t.BO):32===f.UO?(t._O=6,t.BO=I.yv[a],t.GO=6-t.BO):64===f.UO?(t._O=12,t.BO=I.mv[a],t.GO=12-t.BO):(t._O=9,t.BO=I.pv[a],t.GO=9-t.BO),0==(f.UO&c)||this.HO(r,h,e,f.UO)||f.zv?.draw(0,I.jb,I.qb,I.$b,I.Kb,f.x-I.Jb,f.y-I.Qb,f.z-I.tv,f.qv),0==(f.WO&c)||this.HO(r,h,e,f.WO)||f.Xv?.draw(0,I.jb,I.qb,I.$b,I.Kb,f.x-I.Jb,f.y-I.Qb,f.z-I.tv,f.qv)),u&&!this.visible(r,h,e,u.model.aE))if(0!=(u.type&c))u.model.draw(u.angle,I.jb,I.qb,I.$b,I.Kb,u.x-I.Jb,u.y-I.Qb,u.z-I.tv,u.qv);else if(0!=(768&u.type)){const t=u.x-I.Jb,i=u.y-I.Qb,s=u.z-I.tv,h=u.angle;let e,n;if(e=h===p.i.au||h===p.i.cu?-t:t,n=h===p.i.cu||h===p.i.fu?-s:s,0!=(256&u.type)&&n<e){const e=t+I.Av[h],n=s+I.Iv[h];u.model.draw(512*h+256,I.jb,I.qb,I.$b,I.Kb,e,i,n,u.qv)}if(0!=(512&u.type)&&n>e){const e=t+I.gv[h],n=s+I._v[h];u.model.draw(512*h+1280&2047,I.jb,I.qb,I.$b,I.Kb,e,i,n,u.qv)}}if(o){const i=t.Gv;i&&i.model?.draw(0,I.jb,I.qb,I.$b,I.Kb,i.x-I.Jb,i.y-I.Qb,i.z-I.tv,i.qv);const s=t.Zv;s&&0===s.offset&&(s.ZO&&s.ZO.draw(0,I.jb,I.qb,I.$b,I.Kb,s.x-I.Jb,s.y-I.Qb,s.z-I.tv,s.qv),s.YO&&s.YO.draw(0,I.jb,I.qb,I.$b,I.Kb,s.x-I.Jb,s.y-I.Qb,s.z-I.tv,s.qv),s.VO&&s.VO.draw(0,I.jb,I.qb,I.$b,I.Kb,s.x-I.Jb,s.y-I.Qb,s.z-I.tv,s.qv))}const d=t.TO;if(0!==d){if(h<I.iv&&0!=(4&d)){const t=l[h+1][e];t&&t.update&&I.Hb.$A(t)}if(e<I.sv&&0!=(2&d)){const t=l[h][e+1];t&&t.update&&I.Hb.$A(t)}if(h>I.iv&&0!=(1&d)){const t=l[h-1][e];t&&t.update&&I.Hb.$A(t)}if(e>I.sv&&0!=(8&d)){const t=l[h][e-1];t&&t.update&&I.Hb.$A(t)}}}if(0!==t._O){let i=!0;for(let s=0;s<t.Hv;s++){const h=t.Wv[s];if(h&&(h.Kc!==I.Kc&&(t.EO[s]&t._O)===t.BO)){i=!1;break}}if(i){const i=t.Yv;i&&!this.HO(r,h,e,i.UO)&&i.zv?.draw(0,I.jb,I.qb,I.$b,I.Kb,i.x-I.Jb,i.y-I.Qb,i.z-I.tv,i.qv),t._O=0}}if(t.gO){const i=t.Hv;t.gO=!1;let n=0;t:for(let s=0;s<i;s++){const i=t.Wv[s];if(!i||i.Kc===I.Kc)continue;for(let s=i.$v;s<=i.hO;s++)for(let h=i.Kv;h<=i.eO;h++){const e=l[s][h];if(e){if(!e.visible){if(0===e._O)continue;let n=0;if(s>i.$v&&(n+=1),s<i.hO&&(n+=4),h>i.Kv&&(n+=8),h<i.eO&&(n+=2),(n&e._O)!==t.GO)continue}t.gO=!0;continue t}}I.Db[n++]=i;let h=I.iv-i.$v;const e=i.hO-I.iv;e>h&&(h=e);const r=I.sv-i.Kv,o=i.eO-I.sv;i.zO=o>r?h+o:h+r}for(;;){let t=-50,i=-1;for(let s=0;s<n;s++){const h=I.Db[s];h&&(h.Kc!==I.Kc&&h.zO>t&&(t=h.zO,i=s))}if(-1===i)break;const o=I.Db[i];if(o){o.Kc=I.Kc;let t=o.model;t||(t=o.DO?.draw(s)??null),t&&!this.XO(r,o.$v,o.hO,o.Kv,o.eO,t.aE)&&t.draw(o.IA,I.jb,I.qb,I.$b,I.Kb,o.x-I.Jb,o.y-I.Qb,o.z-I.tv,o.qv);for(let t=o.$v;t<=o.hO;t++)for(let i=o.Kv;i<=o.eO;i++){const s=l[t][i];s&&(0!==s._O?I.Hb.$A(s):t===h&&i===e||!s.update||I.Hb.$A(s))}}}if(t.gO)continue}if(!t.update||0!==t._O)continue;if(h<=I.iv&&h>I.hv){const t=l[h-1][e];if(t&&t.update)continue}if(h>=I.iv&&h<I.ev-1){const t=l[h+1][e];if(t&&t.update)continue}if(e<=I.sv&&e>I.nv){const t=l[h][e-1];if(t&&t.update)continue}if(e>=I.sv&&e<I.rv-1){const t=l[h][e+1];if(t&&t.update)continue}t.update=!1,I.ov--;const o=t.Zv;if(o&&0!==o.offset&&(o.ZO&&o.ZO.draw(0,I.jb,I.qb,I.$b,I.Kb,o.x-I.Jb,o.y-I.Qb-o.offset,o.z-I.tv,o.qv),o.YO&&o.YO.draw(0,I.jb,I.qb,I.$b,I.Kb,o.x-I.Jb,o.y-I.Qb-o.offset,o.z-I.tv,o.qv),o.VO&&o.VO.draw(0,I.jb,I.qb,I.$b,I.Kb,o.x-I.Jb,o.y-I.Qb-o.offset,o.z-I.tv,o.qv)),0!==t.FO){const i=t.Vv;if(i&&!this.visible(r,h,e,i.model.aE))if(0!=(i.type&t.FO))i.model.draw(i.angle,I.jb,I.qb,I.$b,I.Kb,i.x-I.Jb,i.y-I.Qb,i.z-I.tv,i.qv);else if(0!=(768&i.type)){const t=i.x-I.Jb,s=i.y-I.Qb,h=i.z-I.tv,e=i.angle;let n,r;if(n=e===p.i.au||e===p.i.cu?-t:t,r=e===p.i.cu||e===p.i.fu?-h:h,0!=(256&i.type)&&r>=n){const n=t+I.Av[e],r=h+I.Iv[e];i.model.draw(512*e+256,I.jb,I.qb,I.$b,I.Kb,n,s,r,i.qv)}if(0!=(512&i.type)&&r<=n){const n=t+I.gv[e],r=h+I._v[e];i.model.draw(512*e+1280&2047,I.jb,I.qb,I.$b,I.Kb,n,s,r,i.qv)}}const s=t.Yv;s&&(0==(s.WO&t.FO)||this.HO(r,h,e,s.WO)||s.Xv?.draw(0,I.jb,I.qb,I.$b,I.Kb,s.x-I.Jb,s.y-I.Qb,s.z-I.tv,s.qv),0==(s.UO&t.FO)||this.HO(r,h,e,s.UO)||s.zv?.draw(0,I.jb,I.qb,I.$b,I.Kb,s.x-I.Jb,s.y-I.Qb,s.z-I.tv,s.qv))}if(n<this.vv-1){const t=this.Lv[n+1][h][e];t&&t.update&&I.Hb.$A(t)}if(h<I.iv){const t=l[h+1][e];t&&t.update&&I.Hb.$A(t)}if(e<I.sv){const t=l[h][e+1];t&&t.update&&I.Hb.$A(t)}if(h>I.iv){const t=l[h-1][e];t&&t.update&&I.Hb.$A(t)}if(e>I.sv){const t=l[h][e-1];t&&t.update&&I.Hb.$A(t)}}};NO=(t,i,s,e,n,r,l,o)=>{let a,c,f,u,d=a=(s<<7)-I.Jb,y=c=(e<<7)-I.tv,m=f=d+128,p=u=y+128,A=this.Ov[i][s][e]-I.Qb,g=this.Ov[i][s+1][e]-I.Qb,_=this.Ov[i][s+1][e+1]-I.Qb,C=this.Ov[i][s][e+1]-I.Qb,E=y*l+d*o>>16;if(y=y*o-d*l>>16,d=E,E=A*r-y*n>>16,y=A*n+y*r>>16,A=E,y<50)return;if(E=c*l+m*o>>16,c=c*o-m*l>>16,m=E,E=g*r-c*n>>16,c=g*n+c*r>>16,g=E,c<50)return;if(E=p*l+f*o>>16,p=p*o-f*l>>16,f=E,E=_*r-p*n>>16,p=_*n+p*r>>16,_=E,p<50)return;if(E=u*l+a*o>>16,u=u*o-a*l>>16,a=E,E=C*r-u*n>>16,u=C*n+u*r>>16,C=E,u<50)return;const T=h.i.do+((d<<9)/y|0),b=h.i.wo+((A<<9)/y|0),v=h.i.do+((m<<9)/c|0),O=h.i.wo+((g<<9)/c|0),L=h.i.do+((f<<9)/p|0),S=h.i.wo+((_<<9)/p|0),k=h.i.do+((a<<9)/u|0),R=h.i.wo+((C<<9)/u|0);if(h.i.alpha=0,(L-k)*(O-R)-(S-R)*(v-k)>0)if(h.i.jO=L<0||k<0||v<0||L>w.i.qO||k>w.i.qO||v>w.i.qO,I.av&&this.$O(I.Gl,I.Hl,S,R,O,L,k,v)&&(I.Ic=s,I.gc=e),-1===t.KO)12345678!==t.JO&&h.i.QO(L,k,v,S,R,O,t.JO,t.tL,t.iL);else if(I.m){const i=I.Tv[t.KO];h.i.QO(L,k,v,S,R,O,this.sL(i,t.JO),this.sL(i,t.tL),this.sL(i,t.iL))}else t.flat?h.i.hL(L,k,v,S,R,O,t.JO,t.tL,t.iL,d,A,y,m,a,g,C,c,u,t.KO):h.i.hL(L,k,v,S,R,O,t.JO,t.tL,t.iL,f,_,p,a,m,C,g,u,c,t.KO);if(!((T-v)*(R-O)-(b-O)*(k-v)<=0))if(h.i.jO=T<0||v<0||k<0||T>w.i.qO||v>w.i.qO||k>w.i.qO,I.av&&this.$O(I.Gl,I.Hl,b,O,R,T,v,k)&&(I.Ic=s,I.gc=e),-1!==t.KO){if(!I.m)return void h.i.hL(T,v,k,b,O,R,t.eL,t.iL,t.tL,d,A,y,m,a,g,C,c,u,t.KO);const i=I.Tv[t.KO];h.i.QO(T,v,k,b,O,R,this.sL(i,t.eL),this.sL(i,t.iL),this.sL(i,t.tL))}else 12345678!==t.eL&&h.i.QO(T,v,k,b,O,R,t.eL,t.iL,t.tL)};PO=(t,i,s,e,n,r,l)=>{let o=s.tE.length;for(let t=0;t<o;t++){let i=s.tE[t]-I.Jb,o=s.sE[t]-I.Qb,a=s.iE[t]-I.tv,c=a*r+i*l>>16;if(a=a*l-i*r>>16,i=c,c=o*n-a*e>>16,a=o*e+a*n>>16,o=c,a<50)return;s.nL&&(y.i.rL[t]=i,y.i.lL[t]=o,y.i.oL[t]=a),y.i.aL[t]=h.i.do+((i<<9)/a|0),y.i.cL[t]=h.i.wo+((o<<9)/a|0)}h.i.alpha=0,o=s.fL.length;for(let e=0;e<o;e++){const n=s.fL[e],r=s.uL[e],l=s.dL[e],o=y.i.aL[n],a=y.i.aL[r],c=y.i.aL[l],f=y.i.cL[n],u=y.i.cL[r],d=y.i.cL[l];if((o-a)*(d-u)-(f-u)*(c-a)>0)if(h.i.jO=o<0||a<0||c<0||o>w.i.qO||a>w.i.qO||c>w.i.qO,I.av&&this.$O(I.Gl,I.Hl,f,u,d,o,a,c)&&(I.Ic=t,I.gc=i),s.nL&&-1!==s.nL[e])if(I.m){const t=I.Tv[s.nL[e]];h.i.QO(o,a,c,f,u,d,this.sL(t,s.wL[e]),this.sL(t,s.yL[e]),this.sL(t,s.mL[e]))}else s.flat?h.i.hL(o,a,c,f,u,d,s.wL[e],s.yL[e],s.mL[e],y.i.rL[0],y.i.lL[0],y.i.oL[0],y.i.rL[1],y.i.rL[3],y.i.lL[1],y.i.lL[3],y.i.oL[1],y.i.oL[3],s.nL[e]):h.i.hL(o,a,c,f,u,d,s.wL[e],s.yL[e],s.mL[e],y.i.rL[n],y.i.lL[n],y.i.oL[n],y.i.rL[r],y.i.rL[l],y.i.lL[r],y.i.lL[l],y.i.oL[r],y.i.oL[l],s.nL[e]);else 12345678!==s.wL[e]&&h.i.QO(o,a,c,f,u,d,s.wL[e],s.yL[e],s.mL[e])}};xO=(t,i,s)=>{const h=this.Sv[t][i][s];if(h===-I.Kc)return!1;if(h===I.Kc)return!0;{const h=i<<7,e=s<<7;return this.pL(h+1,this.Ov[t][i][s],e+1)&&this.pL(h+128-1,this.Ov[t][i+1][s],e+1)&&this.pL(h+128-1,this.Ov[t][i+1][s+1],e+128-1)&&this.pL(h+1,this.Ov[t][i][s+1],e+128-1)?(this.Sv[t][i][s]=I.Kc,!0):(this.Sv[t][i][s]=-I.Kc,!1)}};HO=(t,i,s,h)=>{if(!this.xO(t,i,s))return!1;const e=i<<7,n=s<<7,r=this.Ov[t][i][s]-1,l=r-120,o=r-230,a=r-238;if(h<16){if(1===h){if(e>I.Jb){if(!this.pL(e,r,n))return!1;if(!this.pL(e,r,n+128))return!1}if(t>0){if(!this.pL(e,l,n))return!1;if(!this.pL(e,l,n+128))return!1}return!!this.pL(e,o,n)&&this.pL(e,o,n+128)}if(2===h){if(n<I.tv){if(!this.pL(e,r,n+128))return!1;if(!this.pL(e+128,r,n+128))return!1}if(t>0){if(!this.pL(e,l,n+128))return!1;if(!this.pL(e+128,l,n+128))return!1}return!!this.pL(e,o,n+128)&&this.pL(e+128,o,n+128)}if(4===h){if(e<I.Jb){if(!this.pL(e+128,r,n))return!1;if(!this.pL(e+128,r,n+128))return!1}if(t>0){if(!this.pL(e+128,l,n))return!1;if(!this.pL(e+128,l,n+128))return!1}return!!this.pL(e+128,o,n)&&this.pL(e+128,o,n+128)}if(8===h){if(n>I.tv){if(!this.pL(e,r,n))return!1;if(!this.pL(e+128,r,n))return!1}if(t>0){if(!this.pL(e,l,n))return!1;if(!this.pL(e+128,l,n))return!1}return!!this.pL(e,o,n)&&this.pL(e+128,o,n)}}return!!this.pL(e+64,a,n+64)&&(16===h?this.pL(e,o,n+128):32===h?this.pL(e+128,o,n+128):64===h?this.pL(e+128,o,n):128===h?this.pL(e,o,n):(console.warn('Warning unsupported wall type!'),!0))};visible=(t,i,s,h)=>{if(this.xO(t,i,s)){const e=i<<7,n=s<<7;return this.pL(e+1,this.Ov[t][i][s]-h,n+1)&&this.pL(e+128-1,this.Ov[t][i+1][s]-h,n+1)&&this.pL(e+128-1,this.Ov[t][i+1][s+1]-h,n+128-1)&&this.pL(e+1,this.Ov[t][i][s+1]-h,n+128-1)}return!1};XO=(t,i,s,h,e,n)=>{let r,l;if(i!==s||h!==e){for(r=i;r<=s;r++)for(l=h;l<=e;l++)if(this.Sv[t][r][l]===-I.Kc)return!1;l=1+(i<<7);const o=2+(h<<7),a=this.Ov[t][i][h]-n;if(!this.pL(l,a,o))return!1;const c=(s<<7)-1;if(!this.pL(c,a,o))return!1;const f=(e<<7)-1;return!!this.pL(l,a,f)&&this.pL(c,a,f)}return!!this.xO(t,i,h)&&(r=i<<7,l=h<<7,this.pL(r+1,this.Ov[t][i][h]-n,l+1)&&this.pL(r+128-1,this.Ov[t][i+1][h]-n,l+1)&&this.pL(r+128-1,this.Ov[t][i+1][h+1]-n,l+128-1)&&this.pL(r+1,this.Ov[t][i][h+1]-n,l+128-1))};pL=(t,i,s)=>{for(let h=0;h<I.xf;h++){const e=I.Gb[h];if(e)if(1===e.mode){const h=e.oO-t;if(h>0){const t=e.cO+(e.bO*h>>8),n=e.fO+(e.vO*h>>8),r=e.lO+(e.OO*h>>8),l=e.aE+(e.LO*h>>8);if(s>=t&&s<=n&&i>=r&&i<=l)return!0}}else if(2===e.mode){const h=t-e.oO;if(h>0){const t=e.cO+(e.bO*h>>8),n=e.fO+(e.vO*h>>8),r=e.lO+(e.OO*h>>8),l=e.aE+(e.LO*h>>8);if(s>=t&&s<=n&&i>=r&&i<=l)return!0}}else if(3===e.mode){const h=e.cO-s;if(h>0){const s=e.oO+(e.SO*h>>8),n=e.aO+(e.kO*h>>8),r=e.lO+(e.OO*h>>8),l=e.aE+(e.LO*h>>8);if(t>=s&&t<=n&&i>=r&&i<=l)return!0}}else if(4===e.mode){const h=s-e.cO;if(h>0){const s=e.oO+(e.SO*h>>8),n=e.aO+(e.kO*h>>8),r=e.lO+(e.OO*h>>8),l=e.aE+(e.LO*h>>8);if(t>=s&&t<=n&&i>=r&&i<=l)return!0}}else if(5===e.mode){const h=i-e.lO;if(h>0){const i=e.oO+(e.SO*h>>8),n=e.aO+(e.kO*h>>8),r=e.cO+(e.bO*h>>8),l=e.fO+(e.vO*h>>8);if(t>=i&&t<=n&&s>=r&&s<=l)return!0}}}return!1};$O=(t,i,s,h,e,n,r,l)=>{if(i<s&&i<h&&i<e)return!1;if(i>s&&i>h&&i>e)return!1;if(t<n&&t<r&&t<l)return!1;if(t>n&&t>r&&t>l)return!1;const o=(i-h)*(l-r)-(t-r)*(e-h);return((i-s)*(r-n)-(t-n)*(h-s))*o>0&&o*((i-e)*(n-l)-(t-l)*(s-e))>0};sL=(t,i)=>((i=(127-i)*(127&t)/160|0)<2?i=2:i>126&&(i=126),(65408&t)+i)}},9129:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{}},682:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{xm;RA;Rm;Mm;index;kA;Il;Al;constructor(t,i,s,h,e,n,r){super(),this.xm=i,this.RA=s,this.Rm=h,this.Mm=e,this.index=t,this.kA=n,r&&-1!==n._l&&this.kA.delay?(this.Il=Math.random()*this.kA.gl|0,this.Al=Math.random()*this.kA.delay[this.Il]|0):(this.Il=-1,this.Al=0)}}},1353:(t,i,s)=>{s.d(i,{i:()=>l});var h=s(8839),e=s(9178),n=s(551),r=s(8067);class l extends h.i{type=null;draw=()=>{if(!this.type)return null;if(-1===this.Fp||-1===this.Gp)return this.mE();const t=this.mE();if(!t)return null;const i=n.i.Hr[this.Fp],s=e.i.cC(i.mo(),!0,!i.BC,!1);s.translate(-this.Up,0,0),s.Go(),i.kA&&i.kA.frames&&s.Ho(i.kA.frames[this.Gp]),s.nE=null,s.rE=null,128===i.wE&&128===i.yE||s.scale(i.wE,i.yE,i.wE),s.Wo(64+i.HC,850+i.WC,-30,-50,-30,!0);const h=[t,s],r=e.i.AL(h,2);return 1===this.type.size&&(r.gE=!0),r};isVisible=()=>null!==this.type;mE=()=>{if(!this.type)return null;if(this.om>=0&&0===this.Rp){const t=r.i.Hr[this.om].frames;if(t){const i=t[this.Sp];let s=-1;if(this.wA>=0&&this.wA!==this.Bo){const t=r.i.Hr[this.wA].frames;t&&(s=t[this.ZA])}return this.type.mE(i,s,r.i.Hr[this.om].zA)}}let t=-1;if(this.wA>=0){const i=r.i.Hr[this.wA].frames;i&&(t=i[this.ZA])}const i=this.type.mE(t,-1,null);return i?(this.height=i.aE,i):null}}},7973:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{index;count;constructor(t,i){super(),this.index=t,this.count=i}}},8839:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(9129),e=s(8067),n=s(9345);class r extends h.i{x=0;z=0;IA=0;gA=!1;size=1;Bo=-1;HA=-1;Jp=-1;tA=-1;sA=-1;eA=-1;jA=-1;yf=null;gf=100;Af=0;If=0;bf=0;Tf=0;_f=-1e3;Cf=0;Ef=0;Mp=-1;xp=0;Np=0;wA=-1;ZA=0;WA=0;om=-1;Sp=0;kp=0;Rp=0;Lp=0;Fp=-1;Gp=0;Hp=0;Bp=0;Up=0;Wp=0;Yp=0;Zp=0;Vp=0;zp=0;Xp=0;jp=0;Kc=0;height=0;GA=0;pathLength=0;Cc=new Int32Array(10);Ec=new Int32Array(10);XA=new n.to(10,!1);BA=0;vp=-1;Op=-1;Pp=-1;Dp=-1;move=(t,i,s)=>{if(-1!==this.om&&e.i.Hr[this.om].priority<=1&&(this.om=-1),!t){const t=i-this.Cc[0],h=s-this.Ec[0];if(t>=-8&&t<=8&&h>=-8&&h<=8){this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.Cc[t]=this.Cc[t-1],this.Ec[t]=this.Ec[t-1],this.XA[t]=this.XA[t-1];return this.Cc[0]=i,this.Ec[0]=s,void(this.XA[0]=!1)}}this.pathLength=0,this.BA=0,this.Cc[0]=i,this.Ec[0]=s,this.x=128*this.Cc[0]+64*this.size,this.z=128*this.Ec[0]+64*this.size};step=(t,i)=>{let s=this.Cc[0],h=this.Ec[0];0===i?(s--,h++):1===i?h++:2===i?(s++,h++):3===i?s--:4===i?s++:5===i?(s--,h--):6===i?h--:7===i&&(s++,h--),-1!==this.om&&e.i.Hr[this.om].priority<=1&&(this.om=-1),this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.Cc[t]=this.Cc[t-1],this.Ec[t]=this.Ec[t-1],this.XA[t]=this.XA[t-1];this.Cc[0]=s,this.Ec[0]=h,this.XA[0]=t}}},4191:(t,i,s)=>{s.d(i,{i:()=>u});var h=s(8839),e=s(9178),n=s(5542),r=s(551),l=s(8067),o=s(8809),a=s(1840),c=s(8934),f=s(9345);class u extends h.i{static Uo=[9104,10275,7595,3610,7975,8526,918,38802,24466,10145,58654,5027,1457,16565,34991,25486];static Fo=[[6798,107,10283,16,4797,7744,5799,4634,33697,22433,2983,54193],[8741,12,64030,43162,7735,8404,1701,38430,24094,10153,56621,4783,1341,16578,35003,25239],[25238,8742,12,64030,43162,7735,8404,1701,38430,24094,10153,56621,4783,1341,16578,35003],[4626,11146,6439,12,4758,10270],[4550,4537,5681,5673,5790,6806,8076,4574]];static Wr=new n.i(200);name=null;visible=!1;IL=0;wf=0;gL=new Uint16Array(12);_L=new Uint16Array(5);ta=0;CL=0n;y=0;mA=0;pA=0;KA=0;QA=0;JA=0;yA=null;CA=0;EA=0;TA=0;bA=0;m=!1;draw(t){if(!this.visible)return null;let i=this.mE();if(this.height=i.aE,i.gE=!0,this.m)return i;if(-1!==this.Fp&&-1!==this.Gp){const t=r.i.Hr[this.Fp],s=e.i.cC(t.mo(),!0,!t.BC,!1);s.translate(-this.Up,0,0),s.Go(),t.kA&&t.kA.frames&&s.Ho(t.kA.frames[this.Gp]),s.nE=null,s.rE=null,128===t.wE&&128===t.yE||s.scale(t.wE,t.yE,t.wE),s.Wo(t.HC+64,t.WC+850,-30,-50,-30,!0);const h=[i,s];i=e.i.AL(h,2)}if(this.yA&&(t>=this.pA&&(this.yA=null),t>=this.mA&&t<this.pA)){const t=this.yA;if(t){t.translate(this.QA-this.y,this.KA-this.x,this.JA-this.z),512===this.GA?(t.lE(),t.lE(),t.lE()):1024===this.GA?(t.lE(),t.lE()):1536===this.GA&&t.lE();const s=[i,t];i=e.i.AL(s,2),512===this.GA?t.lE():1024===this.GA?(t.lE(),t.lE()):1536===this.GA&&(t.lE(),t.lE(),t.lE()),t.translate(this.y-this.QA,this.x-this.KA,this.z-this.JA)}}return i.gE=!0,i}isVisible=()=>this.visible;read=t=>{t.Va=0,this.IL=t.Nw,this.wf=t.Nw;for(let i=0;i<12;i++){const s=t.Nw;this.gL[i]=0===s?0:(s<<8)+t.Nw}for(let i=0;i<5;i++){let s=t.Nw;(s<0||s>=u.Fo[i].length)&&(s=0),this._L[i]=s}this.Bo=t.kw,65535===this.Bo&&(this.Bo=-1),this.HA=t.kw,65535===this.HA&&(this.HA=-1),this.Jp=t.kw,65535===this.Jp&&(this.Jp=-1),this.tA=t.kw,65535===this.tA&&(this.tA=-1),this.sA=t.kw,65535===this.sA&&(this.sA=-1),this.eA=t.kw,65535===this.eA&&(this.eA=-1),this.jA=t.kw,65535===this.jA&&(this.jA=-1),this.name=c.i.Ro(c.i.Mo(t.za)),this.ta=t.Nw,this.visible=!0,this.CL=0n;for(let t=0;t<12;t++)this.CL<<=0x4n,this.gL[t]>=256&&(this.CL+=BigInt(this.gL[t])-256n);this.gL[0]>=256&&(this.CL+=BigInt(this.gL[0])-256n>>4n),this.gL[1]>=256&&(this.CL+=BigInt(this.gL[1])-256n>>8n);for(let t=0;t<5;t++)this.CL<<=0x3n,this.CL+=BigInt(this._L[t]);this.CL<<=0x1n,this.CL+=BigInt(this.IL)};Zw=()=>{if(!this.visible)return null;const t=new f.to(12,null);let i=0;for(let s=0;s<12;s++){const h=this.gL[s];if(h>=256&&h<512&&(t[i++]=o.i.Hr[h-256].Zw()),h>=512){const s=a.i.get(h-512).Zw(this.IL);s&&(t[i++]=s)}}const s=e.i.Po(t,i);for(let t=0;t<5;t++)0!==this._L[t]&&(s.Do(u.Fo[t][0],u.Fo[t][this._L[t]]),1===t&&s.Do(u.Uo[0],u.Uo[this._L[t]]));return s};mE=()=>{let t=this.CL,i=-1,s=-1,h=-1,n=-1;if(this.om>=0&&0===this.Rp){const e=l.i.Hr[this.om];if(e.frames&&(i=e.frames[this.Sp]),this.wA>=0&&this.wA!==this.Bo){const t=l.i.Hr[this.wA].frames;t&&(s=t[this.ZA])}e.qE>=0&&(h=e.qE,t+=BigInt(h-this.gL[5])<<8n),e.$E>=0&&(n=e.$E,t+=BigInt(n-this.gL[3])<<16n)}else if(this.wA>=0){const t=l.i.Hr[this.wA].frames;t&&(i=t[this.ZA])}let r=u.Wr?.get(t);if(!r){const i=new f.to(12,null);let s=0;for(let t=0;t<12;t++){let e=this.gL[t];if(n>=0&&3===t&&(e=n),h>=0&&5===t&&(e=h),e>=256&&e<512){const t=o.i.Hr[e-256].mo();t&&(i[s++]=t)}if(e>=512){const t=a.i.get(e-512).jE(this.IL);t&&(i[s++]=t)}}r=e.i.Po(i,s);for(let t=0;t<5;t++)0!==this._L[t]&&(r.Do(u.Fo[t][0],u.Fo[t][this._L[t]]),1===t&&r.Do(u.Uo[0],u.Uo[this._L[t]]));r.Go(),r.Wo(64,850,-30,-50,-30,!0),u.Wr?.put(t,r)}if(this.m)return r;const c=e.i.pE(r,!0);return-1!==i&&-1!==s?c.AE(i,s,l.i.Hr[this.om].zA):-1!==i&&c.Ho(i),c.IE(),c.nE=null,c.rE=null,c}}},1810:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(551),e=s(9129),n=s(9178);class r extends e.i{EL;level;TL;bL;vL;offsetY;OA;vA;OL;arc;target;mobile=!1;x=0;z=0;y=0;velocityX=0;LL=0;SL=0;velocityY=0;kL=0;IA=0;pitch=0;Il=0;Al=0;constructor(t,i,s,e,n,r,l,o,a,c,f){super(),this.EL=h.i.Hr[t],this.level=i,this.TL=s,this.bL=n,this.vL=e,this.OA=r,this.vA=l,this.OL=o,this.arc=a,this.target=c,this.offsetY=f}LA=(t,i,s,h)=>{if(!this.mobile){const i=t-this.TL,h=s-this.bL,e=Math.sqrt(i*i+h*h);this.x=this.TL+i*this.arc/e,this.z=this.bL+h*this.arc/e,this.y=this.vL}const e=this.vA+1-h;this.velocityX=(t-this.x)/e,this.LL=(s-this.z)/e,this.SL=Math.sqrt(this.velocityX*this.velocityX+this.LL*this.LL),this.mobile||(this.velocityY=-this.SL*Math.tan(.02454369*this.OL)),this.kL=2*(i-this.y-this.velocityY*e)/(e*e)};update=t=>{if(this.mobile=!0,this.x+=this.velocityX*t,this.z+=this.LL*t,this.y+=this.velocityY*t+.5*this.kL*t*t,this.velocityY+=this.kL*t,this.IA=2047&(325.949*Math.atan2(this.velocityX,this.LL)+1024|0),this.pitch=2047&(325.949*Math.atan2(this.velocityY,this.SL)|0),this.EL.kA&&this.EL.kA.delay)for(this.Al+=t;this.Al>this.EL.kA.delay[this.Il];)this.Al-=this.EL.kA.delay[this.Il]+1,this.Il++,this.Il>=this.EL.kA.gl&&(this.Il=0)};draw=()=>{const t=this.EL.mo(),i=n.i.cC(t,!0,!this.EL.BC,!1);return this.EL.kA&&this.EL.kA.frames&&(i.Go(),i.Ho(this.EL.kA.frames[this.Il]),i.nE=null,i.rE=null),128===this.EL.wE&&128===this.EL.yE||i.scale(this.EL.wE,this.EL.yE,this.EL.wE),i.RL(this.pitch),i.Wo(64+this.EL.HC,850+this.EL.WC,-30,-50,-30,!0),i}}},5659:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(9129),e=s(551),n=s(9178);class r extends h.i{type;level;x;z;y;OA;SA=!1;Il=0;Al=0;constructor(t,i,s,h,n,r,l){super(),this.type=e.i.Hr[t],this.level=i,this.x=s,this.z=h,this.y=n,this.OA=r+l}update=t=>{if(this.type.kA&&this.type.kA.delay)for(this.Al+=t;this.Al>this.type.kA.delay[this.Il];)this.Al-=this.type.kA.delay[this.Il]+1,this.Il++,this.Il>=this.type.kA.gl&&(this.Il=0,this.SA=!0)};draw=()=>{const t=this.type.mo(),i=n.i.cC(t,!0,!this.type.BC,!1);return!this.SA&&this.type.kA&&this.type.kA.frames&&(i.Go(),i.Ho(this.type.kA.frames[this.Il]),i.nE=null,i.rE=null),128===this.type.wE&&128===this.type.yE||i.scale(this.type.wE,this.type.yE,this.type.wE),0!==this.type.orientation&&(90===this.type.orientation?i.lE():180===this.type.orientation?(i.lE(),i.lE()):270===this.type.orientation&&(i.lE(),i.lE(),i.lE())),i.Wo(64+this.type.HC,850+this.type.WC,-30,-50,-30,!0),i}}},4155:(t,i,s)=>{s.d(i,{i:()=>h});class h{y;x;z;model;qv;info;constructor(t,i,s,h,e,n){this.y=t,this.x=i,this.z=s,this.model=h,this.qv=e,this.info=n}}},6539:(t,i,s)=>{s.d(i,{i:()=>h});class h{level;y;x;z;model;DO;IA;$v;hO;Kv;eO;qv;info;zO=0;Kc=0;constructor(t,i,s,h,e,n,r,l,o,a,c,f,u){this.level=t,this.y=i,this.x=s,this.z=h,this.model=e,this.DO=n,this.IA=r,this.$v=l,this.hO=o,this.Kv=a,this.eO=c,this.qv=f,this.info=u}}},7396:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{Wy;pu;x;z;Nm;angle;shape;vA;constructor(t,i,s,h,e,n,r,l){super(),this.Wy=t,this.pu=i,this.x=s,this.z=h,this.Nm=e,this.angle=n,this.shape=r,this.vA=l}}},6150:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{Wy;pu;x;z;Nm;angle;shape;Zy;Yy;Vy;constructor(t,i,s,h,e,n,r,l,o,a){super(),this.Wy=t,this.pu=i,this.x=s,this.z=h,this.Nm=e,this.angle=n,this.shape=r,this.Zy=l,this.Yy=o,this.Vy=a}}},6711:(t,i,s)=>{s.d(i,{i:()=>h});class h{y;x;z;VO;YO;ZO;qv;offset;constructor(t,i,s,h,e,n,r,l){this.y=t,this.x=i,this.z=s,this.VO=h,this.YO=e,this.ZO=n,this.qv=r,this.offset=l}}},4138:(t,i,s)=>{s.d(i,{i:()=>h});class h{CA;TA;EA;bA;type;oO;aO;cO;fO;lO;aE;mode=0;SO=0;kO=0;bO=0;vO=0;OO=0;LO=0;constructor(t,i,s,h,e,n,r,l,o,a,c){this.CA=t,this.TA=i,this.EA=s,this.bA=h,this.type=e,this.oO=n,this.aO=r,this.cO=l,this.fO=o,this.lO=a,this.aE=c}}},220:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(3064),e=s(9345);class n extends h.i{level;x;z;MO;Wv;EO;Fv=null;Bv=null;Yv=null;Vv=null;Gv=null;Zv=null;Pv=null;Hv=0;TO=0;Dv=0;visible=!1;update=!1;gO=!1;_O=0;BO=0;GO=0;FO=0;constructor(t,i,s){super(),this.MO=this.level=t,this.x=i,this.z=s,this.Wv=new e.to(5,null),this.EO=new Int32Array(5)}}},8570:(t,i,s)=>{s.d(i,{i:()=>h});class h{static aL=new Int32Array(6);static cL=new Int32Array(6);static rL=new Int32Array(6);static lL=new Int32Array(6);static oL=new Int32Array(6);static ML=[Int32Array.of(1,3,5,7),Int32Array.of(1,3,5,7),Int32Array.of(1,3,5,7),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,6),Int32Array.of(1,3,5,7,2,6),Int32Array.of(1,3,5,7,2,8),Int32Array.of(1,3,5,7,2,8),Int32Array.of(1,3,5,7,11,12),Int32Array.of(1,3,5,7,11,12),Int32Array.of(1,3,5,7,13,14)];static xL=[Int32Array.of(0,1,2,3,0,0,1,3),Int32Array.of(1,1,2,3,1,0,1,3),Int32Array.of(0,1,2,3,1,0,1,3),Int32Array.of(0,0,1,2,0,0,2,4,1,0,4,3),Int32Array.of(0,0,1,4,0,0,4,3,1,1,2,4),Int32Array.of(0,0,4,3,1,0,1,2,1,0,2,4),Int32Array.of(0,1,2,4,1,0,1,4,1,0,4,3),Int32Array.of(0,4,1,2,0,4,2,5,1,0,4,5,1,0,5,3),Int32Array.of(0,4,1,2,0,4,2,3,0,4,3,5,1,0,4,5),Int32Array.of(0,0,4,5,1,4,1,2,1,4,2,3,1,4,3,5),Int32Array.of(0,0,1,5,0,1,4,5,0,1,2,4,1,0,5,3,1,5,4,3,1,4,2,3),Int32Array.of(1,0,1,5,1,1,4,5,1,1,2,4,0,0,5,3,0,5,4,3,0,4,2,3),Int32Array.of(1,0,5,4,1,0,1,5,0,0,4,3,0,4,5,3,0,5,2,3,0,1,2,5)];static NL=128;static PL=this.NL/2|0;static DL=this.NL/4|0;static FL=3*this.NL/4|0;tE;sE;iE;wL;yL;mL;fL;uL;dL;nL;flat;shape;rotation;pO;AO;constructor(t,i,s,e,n,r,l,o,a,c,f,u,d,w,y,m,p,A,I){this.flat=!(p!==e||p!==w||p!==o),this.shape=i,this.rotation=r,this.pO=d,this.AO=a;const g=h.ML[i],_=g.length;this.tE=new Int32Array(_),this.sE=new Int32Array(_),this.iE=new Int32Array(_);const C=new Int32Array(_),E=new Int32Array(_),T=t*h.NL,b=A*h.NL;for(let t=0;t<_;t++){let i,a,f,d,A,_=g[t];0==(1&_)&&_<=8&&(_=1+(_-r-r-1&7)),_>8&&_<=12&&(_=9+(_-r-9&3)),_>12&&_<=16&&(_=13+(_-r-13&3)),1===_?(i=T,a=b,f=p,d=l,A=c):2===_?(i=T+h.PL,a=b,f=p+e>>1,d=l+I>>1,A=c+s>>1):3===_?(i=T+h.NL,a=b,f=e,d=I,A=s):4===_?(i=T+h.NL,a=b+h.PL,f=e+w>>1,d=I+n>>1,A=s+y>>1):5===_?(i=T+h.NL,a=b+h.NL,f=w,d=n,A=y):6===_?(i=T+h.PL,a=b+h.NL,f=w+o>>1,d=n+m>>1,A=y+u>>1):7===_?(i=T,a=b+h.NL,f=o,d=m,A=u):8===_?(i=T,a=b+h.PL,f=o+p>>1,d=m+l>>1,A=u+c>>1):9===_?(i=T+h.PL,a=b+h.DL,f=p+e>>1,d=l+I>>1,A=c+s>>1):10===_?(i=T+h.FL,a=b+h.PL,f=e+w>>1,d=I+n>>1,A=s+y>>1):11===_?(i=T+h.PL,a=b+h.FL,f=w+o>>1,d=n+m>>1,A=y+u>>1):12===_?(i=T+h.DL,a=b+h.PL,f=o+p>>1,d=m+l>>1,A=u+c>>1):13===_?(i=T+h.DL,a=b+h.DL,f=p,d=l,A=c):14===_?(i=T+h.FL,a=b+h.DL,f=e,d=I,A=s):15===_?(i=T+h.FL,a=b+h.FL,f=w,d=n,A=y):(i=T+h.DL,a=b+h.FL,f=o,d=m,A=u),this.tE[t]=i,this.sE[t]=f,this.iE[t]=a,C[t]=d,E[t]=A}const v=h.xL[i],O=v.length/4|0;this.fL=new Int32Array(O),this.uL=new Int32Array(O),this.dL=new Int32Array(O),this.wL=new Int32Array(O),this.yL=new Int32Array(O),this.mL=new Int32Array(O),this.nL=-1!==f?new Int32Array(O):null;let L=0;for(let t=0;t<O;t++){const i=v[L];let s=v[L+1],h=v[L+2],e=v[L+3];L+=4,s<4&&(s=s-r&3),h<4&&(h=h-r&3),e<4&&(e=e-r&3),this.fL[t]=s,this.uL[t]=h,this.dL[t]=e,0===i?(this.wL[t]=C[s],this.yL[t]=C[h],this.mL[t]=C[e],this.nL&&(this.nL[t]=-1)):(this.wL[t]=E[s],this.yL[t]=E[h],this.mL[t]=E[e],this.nL&&(this.nL[t]=f))}}}},9190:(t,i,s)=>{var h;s.d(i,{i:()=>e}),function(t){t[t.Tb=0]="PLAIN",t[t.Uv=1]="DIAGONAL",t[t.UL=2]="LEFT_SEMI_DIAGONAL_SMALL",t[t.BL=3]="RIGHT_SEMI_DIAGONAL_SMALL",t[t.GL=4]="LEFT_SEMI_DIAGONAL_BIG",t[t.HL=5]="RIGHT_SEMI_DIAGONAL_BIG",t[t.PL=6]="HALF_SQUARE",t[t.DL=7]="CORNER_SMALL",t[t.FL=8]="CORNER_BIG",t[t.WL=9]="FAN_SMALL",t[t.ZL=10]="FAN_BIG",t[t.YL=11]="TRAPEZIUM"}(h||(h={}));const e=h},9865:(t,i,s)=>{s.d(i,{i:()=>h});class h{eL;iL;JO;tL;KO;color;flat;constructor(t,i,s,h,e,n,r){this.eL=t,this.iL=i,this.JO=s,this.tL=h,this.KO=e,this.color=n,this.flat=r}}},3806:(t,i,s)=>{s.d(i,{i:()=>h});class h{y;x;z;UO;WO;zv;Xv;qv;info;constructor(t,i,s,h,e,n,r,l,o){this.y=t,this.x=i,this.z=s,this.UO=h,this.WO=e,this.zv=n,this.Xv=r,this.qv=l,this.info=o}}},9118:(t,i,s)=>{s.d(i,{i:()=>h});class h{y;x;z;type;angle;model;qv;info;constructor(t,i,s,h,e,n,r,l){this.y=t,this.x=i,this.z=s,this.type=h,this.angle=e,this.model=n,this.qv=r,this.info=l}}},3832:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e{size;VL;constructor(t){this.size=t,this.VL=[];for(let i=0;i<t;i++)this.VL[i]=new h.i}get=t=>{const i=this.VL[Number(t&BigInt(this.size-1))];if(!i.ow)return null;for(let s=i.ow;s!==i;s=s.ow)if(s&&s.id===t)return s;return null};put=(t,i)=>{i.next&&i.Hw();const s=this.VL[Number(t&BigInt(this.size-1))];i.next=s.next,i.ow=s,i.next&&(i.next.ow=i),i.ow.next=i,i.id=t}}},6327:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e extends h.i{zL;XL;constructor(){super(),this.zL=this,this.XL=this}jL=()=>{this.XL&&this.zL&&(this.XL.zL=this.zL,this.zL.XL=this.XL,this.zL=null,this.XL=null)}}},8934:(t,i,s)=>{s.d(i,{i:()=>h});class h{static qL=['_','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9'];static Vf=t=>{t=t.trim();let i=0n;for(let s=0;s<t.length&&s<12;s++){const h=t.charCodeAt(s);i*=37n,h>=65&&h<=90?i+=BigInt(h+1-65):h>=97&&h<=122?i+=BigInt(h+1-97):h>=48&&h<=57&&(i+=BigInt(h+27-48))}return i};static Mo=t=>{if(t<0n||t>=6582952005840035281n)return'invalid_name';if(t%37n===0n)return'invalid_name';let i=0;const s=Array(12);for(;0n!==t;){const h=t;t/=37n,s[11-i++]=this.qL[Number(h-37n*t)]}return s.slice(12-i).join('')};static $d=t=>{const i=[...t.toLowerCase()];let s=!0;for(let t=0;t<i.length;t++){const h=i[t];s&&h>='a'&&h<='z'&&(i[t]=h.toUpperCase(),s=!1),'.'!==h&&'!'!==h||(s=!0)}return i.join('')};static Wa=t=>{let i='';for(let s=0;s<t.length;s++)i+='*';return i};static qo=t=>(t>>24&255)+'.'+(t>>16&255)+'.'+(t>>8&255)+'.'+(255&t);static Ro=t=>{if(0===t.length)return t;const i=[...t];for(let t=0;t<i.length;t++)'_'===i[t]&&(i[t]=' ',t+1<i.length&&i[t+1]>='a'&&i[t+1]<='z'&&(i[t+1]=String.fromCharCode(i[t+1].charCodeAt(0)+'A'.charCodeAt(0)-97)));return i[0]>='a'&&i[0]<='z'&&(i[0]=String.fromCharCode(i[0].charCodeAt(0)+'A'.charCodeAt(0)-97)),i.join('')};static oC=t=>{const i=t.toUpperCase();let s=0n;for(let t=0;t<i.length;t++)s=61n*s+BigInt(i.charCodeAt(t))-32n,s=s+(s>>56n)&0xffffffffffffffn;return s}}},9080:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(3064);class e{head;$L=null;constructor(){const t=new h.i;t.ow=t,t.next=t,this.head=t}$A=t=>{t.next&&t.Hw(),t.next=this.head.next,t.ow=this.head,t.next&&(t.next.ow=t),t.ow.next=t};cw=t=>{t.next&&t.Hw(),t.next=this.head,t.ow=this.head.ow,t.next.ow=t,t.ow&&(t.ow.next=t)};RO=()=>{const t=this.head.ow;return t===this.head?null:(t?.Hw(),t)};lw=()=>{const t=this.head.ow;return t===this.head?(this.$L=null,null):(this.$L=t?.ow||null,t)};hp=()=>{const t=this.head.next;return t===this.head?(this.$L=null,null):(this.$L=t?.next||null,t)};ow=()=>{const t=this.$L;return t===this.head?(this.$L=null,null):(this.$L=t?.ow||null,t)};next=()=>{const t=this.$L;return t===this.head?(this.$L=null,null):(this.$L=t?.next||null,t)};clear=()=>{for(;;){const t=this.head.ow;if(t===this.head)return;t?.Hw()}}}},3064:(t,i,s)=>{s.d(i,{i:()=>h});class h{id;ow;next;constructor(){this.id=0n,this.ow=this,this.next=this}Hw=()=>{this.next&&this.ow&&(this.next.ow=this.ow,this.ow.next=this.next,this.ow=null,this.next=null)}}},5542:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(8329),e=s(3832);class n{KL;JL;history;available;constructor(t){this.KL=t,this.available=t,this.JL=new e.i(1024),this.history=new h.i}get=t=>{const i=this.JL.get(t);return i&&this.history.push(i),i};put=(t,i)=>{if(0===this.available){const t=this.history.pop();t?.Hw(),t?.jL()}else this.available--;this.JL.put(t,i),this.history.push(i)};clear=()=>{const t=this.history.pop();t?(t.Hw(),t.jL()):this.available=this.KL}}},8329:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(6327);class e{head;constructor(){this.head=new h.i}push=t=>{t.XL&&t.jL(),t.XL=this.head.XL,t.zL=this.head,t.XL&&(t.XL.zL=t),t.zL.XL=t};pop=()=>{const t=this.head.zL;return t===this.head?null:(t?.jL(),t)}}},6121:(t,i,s)=>{s.d(i,{il:()=>e,QL:()=>r,pI:()=>h,tS:()=>n,iS:()=>l});const h=document.getElementById('canvas'),e=h.getContext('2d',{sS:!0}),n=document.createElement('canvas'),r=document.createElement('img'),l=n.getContext('2d',{sS:!0})},312:(t,i,s)=>{s.d(i,{i:()=>h});class h{static RED=16711680;static GREEN=65280;static BLUE=255;static Xl=16776960;static Na=65535;static Pa=16711935;static Ol=16777215;static zl=0;static hS=16748608;static Bf=8388608;static Uf=128;static eS=16756736;static nS=16740352;static rS=16723968;static lS=12648192;static oS=8453888;static aS=4259584;static ba=9179409;static mu=6116423;static ol=2301979;static al=5063219;static fl=7759444;static dl=3353893;static Gf=8388736;static Hf=13350793;static vf=Int32Array.of(h.Xl,h.RED,h.GREEN,h.Na,h.Pa,h.Ol)}},2991:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(6327);class e extends h.i{static ya=new Int32Array;static vE=0;static OE=0;static top=0;static bottom=0;static left=0;static right=0;static qO=0;static cS=0;static fS=0;static bind=(t,i,s)=>{this.ya=t,this.vE=i,this.OE=s,this.El(0,0,i,s)};static Lf=()=>{this.left=0,this.top=0,this.right=this.vE,this.bottom=this.OE,this.qO=this.right-1,this.cS=this.right/2|0};static El=(t,i,s,h)=>{t<0&&(t=0),i<0&&(i=0),s>this.vE&&(s=this.vE),h>this.OE&&(h=this.OE),this.top=i,this.bottom=h,this.left=t,this.right=s,this.qO=this.right-1,this.cS=this.right/2|0,this.fS=this.bottom/2|0};static clear=()=>{const t=this.vE*this.OE;for(let i=0;i<t;i++)this.ya[i]=0};static vl=(t,i,s,h,e)=>{this.ul(t,i,e,s),this.ul(t,i+h-1,e,s),this.cl(t,i,e,h),this.cl(t+s-1,i,e,h)};static ul=(t,i,s,h)=>{if(i<this.top||i>=this.bottom)return;t<this.left&&(h-=this.left-t,t=this.left),t+h>this.right&&(h=this.right-t);const e=t+i*this.vE;for(let t=0;t<h;t++)this.ya[e+t]=s};static cl=(t,i,s,h)=>{if(t<this.left||t>=this.right)return;i<this.top&&(h-=this.top-i,i=this.top),i+h>this.bottom&&(h=this.bottom-i);const e=t+i*this.vE;for(let t=0;t<h;t++)this.ya[e+t*this.vE]=s};static uS=(t,i,s,h,e)=>{const n=Math.abs(s-t),r=Math.abs(h-i),l=t<s?1:-1,o=i<h?1:-1;let a=n-r;for(;t>=this.left&&t<this.right&&i>=this.top&&i<this.bottom&&(this.ya[t+i*this.vE]=e),t!==s||i!==h;){const s=2*a;s>-r&&(a-=r,t+=l),s<n&&(a+=n,i+=o)}};static fillRect=(t,i,s,h,e)=>{t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const n=this.vE-s;let r=t+i*this.vE;for(let t=-h;t<0;t++){for(let t=-s;t<0;t++)this.ya[r++]=e;r+=n}};static dS=(t,i,s)=>{t<this.left||t>=this.right||i<this.top||i>=this.bottom||(this.ya[t+i*this.vE]=s)}}},8078:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(2991),e=s(664),n=s(9345);class r extends h.i{static m=!1;static wS=new Int32Array(512);static yS=new Int32Array(2048);static sin=new Int32Array(2048);static cos=new Int32Array(2048);static palette=new Int32Array(65536);static iI=new n.to(50,null);static mS=0;static pa=new Int32Array;static do=0;static wo=0;static LE=!0;static jO=!1;static alpha=0;static pS=null;static AS=new n.to(50,null);static IS=0;static Kc=0;static tI=new Int32Array(50);static gS=new n.to(50,null);static _S=!1;static CS=new n.to(50,!1);static ES=new Int32Array(50);static{for(let t=1;t<512;t++)this.wS[t]=32768/t|0;for(let t=1;t<2048;t++)this.yS[t]=65536/t|0;for(let t=0;t<2048;t++)this.sin[t]=65536*Math.sin(.0030679615757712823*t)|0,this.cos[t]=65536*Math.cos(.0030679615757712823*t)|0}static Ur=()=>{this.wS=null,this.wS=null,this.sin=null,this.cos=null,this.pa=null,this.iI=null,this.CS=null,this.ES=null,this.pS=null,this.AS=null,this.tI=null,this.palette=null,this.gS=null,console.log('Draw3D unloaded!')};static AI=()=>{this.pa=new Int32Array(h.i.OE);for(let t=0;t<h.i.OE;t++)this.pa[t]=h.i.vE*t;this.do=h.i.vE/2|0,this.wo=h.i.OE/2|0};static ma=(t,i)=>{this.pa=new Int32Array(i);for(let s=0;s<i;s++)this.pa[s]=t*s;this.do=t/2|0,this.wo=i/2|0};static bm=()=>{this.pS=null,this.AS.fill(null)};static fa=t=>{this.mS=0;for(let i=0;i<50;i++)try{this.iI[i]=e.i.ha(t,i.toString()),this.m&&128===this.iI[i]?.Zl?this.iI[i]?.TS():this.iI[i]?.xE(),this.mS++}catch(t){}};static vb=t=>{if(0!==this.ES[t])return this.ES[t];const i=this.gS[t];if(!i)return 0;let s=0,h=0,e=0;const n=i.length;for(let t=0;t<n;t++)s+=i[t]>>16&255,h+=i[t]>>8&255,e+=255&i[t];let r=((s/n|0)<<16)+((h/n|0)<<8)+(e/n|0);return r=this.bS(r,1.4),0===r&&(r=1),this.ES[t]=r,r};static ua=t=>{const i=t+.03*Math.random()-.015;let s=0;for(let t=0;t<512;t++){const h=(t/8|0)/64+.0078125,e=(7&t)/8+.0625;for(let t=0;t<128;t++){const n=t/128;let r=n,l=n,o=n;if(0!==e){let t;t=n<.5?n*(e+1):n+e-n*e;const i=2*n-t;let s=h+.3333333333333333;s>1&&s--;let a=h-.3333333333333333;a<0&&a++,r=6*s<1?i+6*(t-i)*s:2*s<1?t:3*s<2?i+(t-i)*(.6666666666666666-s)*6:i,l=6*h<1?i+6*(t-i)*h:2*h<1?t:3*h<2?i+(t-i)*(.6666666666666666-h)*6:i,o=6*a<1?i+6*(t-i)*a:2*a<1?t:3*a<2?i+(t-i)*(.6666666666666666-a)*6:i}const a=((256*r|0)<<16)+((256*l|0)<<8)+(256*o|0);this.palette[s++]=this.bS(a,i)}}for(let t=0;t<50;t++){const s=this.iI[t];if(!s)continue;const h=s.palette;this.gS[t]=new Int32Array(h.length);for(let s=0;s<h.length;s++){const e=this.gS[t];e&&(e[s]=this.bS(h[s],i))}}for(let t=0;t<50;t++)this.sI(t)};static bS=(t,i)=>{const s=(t>>16)/256,h=(t>>8&255)/256,e=(255&t)/256;return((256*Math.pow(s,i)|0)<<16)+((256*Math.pow(h,i)|0)<<8)+(256*Math.pow(e,i)|0)};static da=t=>{this.pS||(this.IS=t,this.m?this.pS=new n.on(t,16384):this.pS=new n.on(t,65536),this.AS.fill(null))};static QO=(t,i,s,e,n,l,o,a,c)=>{let f=0,u=0;n!==e&&(f=(i-t<<16)/(n-e)|0,u=(a-o<<15)/(n-e)|0);let d=0,w=0;l!==n&&(d=(s-i<<16)/(l-n)|0,w=(c-a<<15)/(l-n)|0);let y=0,m=0;if(l!==e&&(y=(t-s<<16)/(e-l)|0,m=(o-c<<15)/(e-l)|0),e<=n&&e<=l){if(e<h.i.bottom)if(n>h.i.bottom&&(n=h.i.bottom),l>h.i.bottom&&(l=h.i.bottom),n<l)if(s=t<<=16,c=o<<=15,e<0&&(s-=y*e,t-=f*e,c-=m*e,o-=u*e,e=0),i<<=16,a<<=15,n<0&&(i-=d*n,a-=w*n,n=0),e!==n&&y<f||e===n&&y>d)for(l-=n,n-=e,e=r.pa[e];;){if(--n<0)for(;;){if(--l<0)return;this.vS(s>>16,i>>16,c>>7,a>>7,h.i.ya,e,0),s+=y,i+=d,c+=m,a+=w,e+=h.i.vE}this.vS(s>>16,t>>16,c>>7,o>>7,h.i.ya,e,0),s+=y,t+=f,c+=m,o+=u,e+=h.i.vE}else for(l-=n,n-=e,e=r.pa[e];;){if(--n<0)for(;;){if(--l<0)return;this.vS(i>>16,s>>16,a>>7,c>>7,h.i.ya,e,0),s+=y,i+=d,c+=m,a+=w,e+=h.i.vE}this.vS(t>>16,s>>16,o>>7,c>>7,h.i.ya,e,0),s+=y,t+=f,c+=m,o+=u,e+=h.i.vE}else if(i=t<<=16,a=o<<=15,e<0&&(i-=y*e,t-=f*e,a-=m*e,o-=u*e,e=0),s<<=16,c<<=15,l<0&&(s-=d*l,c-=w*l,l=0),e!==l&&y<f||e===l&&d>f)for(n-=l,l-=e,e=r.pa[e];;){if(--l<0)for(;;){if(--n<0)return;this.vS(s>>16,t>>16,c>>7,o>>7,h.i.ya,e,0),s+=d,t+=f,c+=w,o+=u,e+=h.i.vE}this.vS(i>>16,t>>16,a>>7,o>>7,h.i.ya,e,0),i+=y,t+=f,a+=m,o+=u,e+=h.i.vE}else for(n-=l,l-=e,e=r.pa[e];;){if(--l<0)for(;;){if(--n<0)return;this.vS(t>>16,s>>16,o>>7,c>>7,h.i.ya,e,0),s+=d,t+=f,c+=w,o+=u,e+=h.i.vE}this.vS(t>>16,i>>16,o>>7,a>>7,h.i.ya,e,0),i+=y,t+=f,a+=m,o+=u,e+=h.i.vE}}else if(n<=l){if(n<h.i.bottom)if(l>h.i.bottom&&(l=h.i.bottom),e>h.i.bottom&&(e=h.i.bottom),l<e)if(t=i<<=16,o=a<<=15,n<0&&(t-=f*n,i-=d*n,o-=u*n,a-=w*n,n=0),s<<=16,c<<=15,l<0&&(s-=y*l,c-=m*l,l=0),n!==l&&f<d||n===l&&f>y)for(e-=l,l-=n,n=r.pa[n];;){if(--l<0)for(;;){if(--e<0)return;this.vS(t>>16,s>>16,o>>7,c>>7,h.i.ya,n,0),t+=f,s+=y,o+=u,c+=m,n+=h.i.vE}this.vS(t>>16,i>>16,o>>7,a>>7,h.i.ya,n,0),t+=f,i+=d,o+=u,a+=w,n+=h.i.vE}else for(e-=l,l-=n,n=r.pa[n];;){if(--l<0)for(;;){if(--e<0)return;this.vS(s>>16,t>>16,c>>7,o>>7,h.i.ya,n,0),t+=f,s+=y,o+=u,c+=m,n+=h.i.vE}this.vS(i>>16,t>>16,a>>7,o>>7,h.i.ya,n,0),t+=f,i+=d,o+=u,a+=w,n+=h.i.vE}else if(s=i<<=16,c=a<<=15,n<0&&(s-=f*n,i-=d*n,c-=u*n,a-=w*n,n=0),t<<=16,o<<=15,e<0&&(t-=y*e,o-=m*e,e=0),l-=e,e-=n,n=r.pa[n],f<d)for(;;){if(--e<0)for(;;){if(--l<0)return;this.vS(t>>16,i>>16,o>>7,a>>7,h.i.ya,n,0),t+=y,i+=d,o+=m,a+=w,n+=h.i.vE}this.vS(s>>16,i>>16,c>>7,a>>7,h.i.ya,n,0),s+=f,i+=d,c+=u,a+=w,n+=h.i.vE}else for(;;){if(--e<0)for(;;){if(--l<0)return;this.vS(i>>16,t>>16,a>>7,o>>7,h.i.ya,n,0),t+=y,i+=d,o+=m,a+=w,n+=h.i.vE}this.vS(i>>16,s>>16,a>>7,c>>7,h.i.ya,n,0),s+=f,i+=d,c+=u,a+=w,n+=h.i.vE}}else if(l<h.i.bottom)if(e>h.i.bottom&&(e=h.i.bottom),n>h.i.bottom&&(n=h.i.bottom),e<n)if(i=s<<=16,a=c<<=15,l<0&&(i-=d*l,s-=y*l,a-=w*l,c-=m*l,l=0),t<<=16,o<<=15,e<0&&(t-=f*e,o-=u*e,e=0),n-=e,e-=l,l=r.pa[l],d<y)for(;;){if(--e<0)for(;;){if(--n<0)return;this.vS(i>>16,t>>16,a>>7,o>>7,h.i.ya,l,0),i+=d,t+=f,a+=w,o+=u,l+=h.i.vE}this.vS(i>>16,s>>16,a>>7,c>>7,h.i.ya,l,0),i+=d,s+=y,a+=w,c+=m,l+=h.i.vE}else for(;;){if(--e<0)for(;;){if(--n<0)return;this.vS(t>>16,i>>16,o>>7,a>>7,h.i.ya,l,0),i+=d,t+=f,a+=w,o+=u,l+=h.i.vE}this.vS(s>>16,i>>16,c>>7,a>>7,h.i.ya,l,0),i+=d,s+=y,a+=w,c+=m,l+=h.i.vE}else if(t=s<<=16,o=c<<=15,l<0&&(t-=d*l,s-=y*l,o-=w*l,c-=m*l,l=0),i<<=16,a<<=15,n<0&&(i-=f*n,a-=u*n,n=0),e-=n,n-=l,l=r.pa[l],d<y)for(;;){if(--n<0)for(;;){if(--e<0)return;this.vS(i>>16,s>>16,a>>7,c>>7,h.i.ya,l,0),i+=f,s+=y,a+=u,c+=m,l+=h.i.vE}this.vS(t>>16,s>>16,o>>7,c>>7,h.i.ya,l,0),t+=d,s+=y,o+=w,c+=m,l+=h.i.vE}else for(;;){if(--n<0)for(;;){if(--e<0)return;this.vS(s>>16,i>>16,c>>7,a>>7,h.i.ya,l,0),i+=f,s+=y,a+=u,c+=m,l+=h.i.vE}this.vS(s>>16,t>>16,c>>7,o>>7,h.i.ya,l,0),t+=d,s+=y,o+=w,c+=m,l+=h.i.vE}};static vS=(t,i,s,e,n,l,o)=>{let a;if(r.LE){let c;if(r.jO){if(c=i-t>3?(e-s)/(i-t)|0:0,i>h.i.qO&&(i=h.i.qO),t<0&&(s-=t*c,t=0),t>=i)return;l+=t,o=i-t>>2,c<<=2}else{if(!(t<i))return;l+=t,c=(o=i-t>>2)>0?(e-s)*r.wS[o]>>15:0}if(0===r.alpha)for(;;){if(--o<0){if((o=i-t&3)>0){a=r.palette[s>>8];do{n[l++]=a,o--}while(o>0);return}break}a=r.palette[s>>8],s+=c,n[l++]=a,n[l++]=a,n[l++]=a,n[l++]=a}else{const h=r.alpha,e=256-r.alpha;for(;;){if(--o<0){if((o=i-t&3)>0){a=r.palette[s>>8],a=((16711935&a)*e>>8&16711935)+((65280&a)*e>>8&65280);do{n[l++]=a+((16711935&n[l])*h>>8&16711935)+((65280&n[l])*h>>8&65280),o--}while(o>0)}break}a=r.palette[s>>8],s+=c,a=((16711935&a)*e>>8&16711935)+((65280&a)*e>>8&65280),n[l++]=a+((16711935&n[l])*h>>8&16711935)+((65280&n[l])*h>>8&65280),n[l++]=a+((16711935&n[l])*h>>8&16711935)+((65280&n[l])*h>>8&65280),n[l++]=a+((16711935&n[l])*h>>8&16711935)+((65280&n[l])*h>>8&65280),n[l++]=a+((16711935&n[l])*h>>8&16711935)+((65280&n[l])*h>>8&65280)}}}else if(t<i){const c=(e-s)/(i-t)|0;if(r.jO&&(i>h.i.qO&&(i=h.i.qO),t<0&&(s-=t*c,t=0),t>=i))return;if(l+=t,o=i-t,0===r.alpha)do{n[l++]=r.palette[s>>8],s+=c,o--}while(o>0);else{const t=r.alpha,i=256-r.alpha;do{a=r.palette[s>>8],s+=c,a=((16711935&a)*i>>8&16711935)+((65280&a)*i>>8&65280),n[l++]=a+((16711935&n[l])*t>>8&16711935)+((65280&n[l])*t>>8&65280),o--}while(o>0)}}};static OS=(t,i,s,e,n,r,l)=>{let o=0;n!==e&&(o=(i-t<<16)/(n-e)|0);let a=0;r!==n&&(a=(s-i<<16)/(r-n)|0);let c=0;if(r!==e&&(c=(t-s<<16)/(e-r)|0),e<=n&&e<=r){if(e<h.i.bottom)if(n>h.i.bottom&&(n=h.i.bottom),r>h.i.bottom&&(r=h.i.bottom),n<r)if(s=t<<=16,e<0&&(s-=c*e,t-=o*e,e=0),i<<=16,n<0&&(i-=a*n,n=0),e!==n&&c<o||e===n&&c>a)for(r-=n,n-=e,e=this.pa[e];;){if(--n<0)for(;;){if(--r<0)return;this.LS(s>>16,i>>16,h.i.ya,e,l),s+=c,i+=a,e+=h.i.vE}this.LS(s>>16,t>>16,h.i.ya,e,l),s+=c,t+=o,e+=h.i.vE}else for(r-=n,n-=e,e=this.pa[e];;){if(--n<0)for(;;){if(--r<0)return;this.LS(i>>16,s>>16,h.i.ya,e,l),s+=c,i+=a,e+=h.i.vE}this.LS(t>>16,s>>16,h.i.ya,e,l),s+=c,t+=o,e+=h.i.vE}else if(i=t<<=16,e<0&&(i-=c*e,t-=o*e,e=0),s<<=16,r<0&&(s-=a*r,r=0),e!==r&&c<o||e===r&&a>o)for(n-=r,r-=e,e=this.pa[e];;){if(--r<0)for(;;){if(--n<0)return;this.LS(s>>16,t>>16,h.i.ya,e,l),s+=a,t+=o,e+=h.i.vE}this.LS(i>>16,t>>16,h.i.ya,e,l),i+=c,t+=o,e+=h.i.vE}else for(n-=r,r-=e,e=this.pa[e];;){if(--r<0)for(;;){if(--n<0)return;this.LS(t>>16,s>>16,h.i.ya,e,l),s+=a,t+=o,e+=h.i.vE}this.LS(t>>16,i>>16,h.i.ya,e,l),i+=c,t+=o,e+=h.i.vE}}else if(n<=r){if(n<h.i.bottom)if(r>h.i.bottom&&(r=h.i.bottom),e>h.i.bottom&&(e=h.i.bottom),r<e)if(t=i<<=16,n<0&&(t-=o*n,i-=a*n,n=0),s<<=16,r<0&&(s-=c*r,r=0),n!==r&&o<a||n===r&&o>c)for(e-=r,r-=n,n=this.pa[n];;){if(--r<0)for(;;){if(--e<0)return;this.LS(t>>16,s>>16,h.i.ya,n,l),t+=o,s+=c,n+=h.i.vE}this.LS(t>>16,i>>16,h.i.ya,n,l),t+=o,i+=a,n+=h.i.vE}else for(e-=r,r-=n,n=this.pa[n];;){if(--r<0)for(;;){if(--e<0)return;this.LS(s>>16,t>>16,h.i.ya,n,l),t+=o,s+=c,n+=h.i.vE}this.LS(i>>16,t>>16,h.i.ya,n,l),t+=o,i+=a,n+=h.i.vE}else if(s=i<<=16,n<0&&(s-=o*n,i-=a*n,n=0),t<<=16,e<0&&(t-=c*e,e=0),o<a)for(r-=e,e-=n,n=this.pa[n];;){if(--e<0)for(;;){if(--r<0)return;this.LS(t>>16,i>>16,h.i.ya,n,l),t+=c,i+=a,n+=h.i.vE}this.LS(s>>16,i>>16,h.i.ya,n,l),s+=o,i+=a,n+=h.i.vE}else for(r-=e,e-=n,n=this.pa[n];;){if(--e<0)for(;;){if(--r<0)return;this.LS(i>>16,t>>16,h.i.ya,n,l),t+=c,i+=a,n+=h.i.vE}this.LS(i>>16,s>>16,h.i.ya,n,l),s+=o,i+=a,n+=h.i.vE}}else if(r<h.i.bottom)if(e>h.i.bottom&&(e=h.i.bottom),n>h.i.bottom&&(n=h.i.bottom),e<n)if(i=s<<=16,r<0&&(i-=a*r,s-=c*r,r=0),t<<=16,e<0&&(t-=o*e,e=0),a<c)for(n-=e,e-=r,r=this.pa[r];;){if(--e<0)for(;;){if(--n<0)return;this.LS(i>>16,t>>16,h.i.ya,r,l),i+=a,t+=o,r+=h.i.vE}this.LS(i>>16,s>>16,h.i.ya,r,l),i+=a,s+=c,r+=h.i.vE}else for(n-=e,e-=r,r=this.pa[r];;){if(--e<0)for(;;){if(--n<0)return;this.LS(t>>16,i>>16,h.i.ya,r,l),i+=a,t+=o,r+=h.i.vE}this.LS(s>>16,i>>16,h.i.ya,r,l),i+=a,s+=c,r+=h.i.vE}else if(t=s<<=16,r<0&&(t-=a*r,s-=c*r,r=0),i<<=16,n<0&&(i-=o*n,n=0),a<c)for(e-=n,n-=r,r=this.pa[r];;){if(--n<0)for(;;){if(--e<0)return;this.LS(i>>16,s>>16,h.i.ya,r,l),i+=o,s+=c,r+=h.i.vE}this.LS(t>>16,s>>16,h.i.ya,r,l),t+=a,s+=c,r+=h.i.vE}else for(e-=n,n-=r,r=this.pa[r];;){if(--n<0)for(;;){if(--e<0)return;this.LS(s>>16,i>>16,h.i.ya,r,l),i+=o,s+=c,r+=h.i.vE}this.LS(s>>16,t>>16,h.i.ya,r,l),t+=a,s+=c,r+=h.i.vE}};static hL=(t,i,s,e,n,r,l,o,a,c,f,u,d,w,y,m,p,A,I)=>{const g=this.SS(I);this._S=!this.CS[I];const _=c-d,C=f-y,E=u-p,T=w-c,b=m-f,v=A-u;let O=T*f-b*c<<14;const L=b*u-v*f<<8,S=v*c-T*u<<5;let k=_*f-C*c<<14;const R=C*u-E*f<<8,M=E*c-_*u<<5;let x=C*T-_*b<<14;const N=E*b-C*v<<8,P=_*v-E*T<<5;let D=0,F=0;n!==e&&(D=(i-t<<16)/(n-e)|0,F=(o-l<<16)/(n-e)|0);let U=0,B=0;r!==n&&(U=(s-i<<16)/(r-n)|0,B=(a-o<<16)/(r-n)|0);let G=0,H=0;if(r!==e&&(G=(t-s<<16)/(e-r)|0,H=(l-a<<16)/(e-r)|0),e<=n&&e<=r){if(e<h.i.bottom)if(n>h.i.bottom&&(n=h.i.bottom),r>h.i.bottom&&(r=h.i.bottom),n<r){s=t<<=16,a=l<<=16,e<0&&(s-=G*e,t-=D*e,a-=H*e,l-=F*e,e=0),i<<=16,o<<=16,n<0&&(i-=U*n,o-=B*n,n=0);const c=e-this.wo;if(O+=S*c,k+=M*c,x+=P*c,O|=0,k|=0,x|=0,e!==n&&G<D||e===n&&G>U)for(r-=n,n-=e,e=this.pa[e];;){if(--n<0)for(;;){if(--r<0)return;this.kS(s>>16,i>>16,h.i.ya,e,g,0,0,O,k,x,L,R,N,a>>8,o>>8),s+=G,i+=U,a+=H,o+=B,e+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(s>>16,t>>16,h.i.ya,e,g,0,0,O,k,x,L,R,N,a>>8,l>>8),s+=G,t+=D,a+=H,l+=F,e+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}else for(r-=n,n-=e,e=this.pa[e];;){if(--n<0)for(;;){if(--r<0)return;this.kS(i>>16,s>>16,h.i.ya,e,g,0,0,O,k,x,L,R,N,o>>8,a>>8),s+=G,i+=U,a+=H,o+=B,e+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(t>>16,s>>16,h.i.ya,e,g,0,0,O,k,x,L,R,N,l>>8,a>>8),s+=G,t+=D,a+=H,l+=F,e+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}}else{i=t<<=16,o=l<<=16,e<0&&(i-=G*e,t-=D*e,o-=H*e,l-=F*e,e=0),s<<=16,a<<=16,r<0&&(s-=U*r,a-=B*r,r=0);const c=e-this.wo;if(O+=S*c,k+=M*c,x+=P*c,O|=0,k|=0,x|=0,(e===r||G>=D)&&(e!==r||U<=D))for(n-=r,r-=e,e=this.pa[e];;){if(--r<0)for(;;){if(--n<0)return;this.kS(t>>16,s>>16,h.i.ya,e,g,0,0,O,k,x,L,R,N,l>>8,a>>8),s+=U,t+=D,a+=B,l+=F,e+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(t>>16,i>>16,h.i.ya,e,g,0,0,O,k,x,L,R,N,l>>8,o>>8),i+=G,t+=D,o+=H,l+=F,e+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}else for(n-=r,r-=e,e=this.pa[e];;){if(--r<0)for(;;){if(--n<0)return;this.kS(s>>16,t>>16,h.i.ya,e,g,0,0,O,k,x,L,R,N,a>>8,l>>8),s+=U,t+=D,a+=B,l+=F,e+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(i>>16,t>>16,h.i.ya,e,g,0,0,O,k,x,L,R,N,o>>8,l>>8),i+=G,t+=D,o+=H,l+=F,e+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}}}else if(n<=r){if(n<h.i.bottom)if(r>h.i.bottom&&(r=h.i.bottom),e>h.i.bottom&&(e=h.i.bottom),r<e){t=i<<=16,l=o<<=16,n<0&&(t-=D*n,i-=U*n,l-=F*n,o-=B*n,n=0),s<<=16,a<<=16,r<0&&(s-=G*r,a-=H*r,r=0);const c=n-this.wo;if(O+=S*c,k+=M*c,x+=P*c,O|=0,k|=0,x|=0,n!==r&&D<U||n===r&&D>G)for(e-=r,r-=n,n=this.pa[n];;){if(--r<0)for(;;){if(--e<0)return;this.kS(t>>16,s>>16,h.i.ya,n,g,0,0,O,k,x,L,R,N,l>>8,a>>8),t+=D,s+=G,l+=F,a+=H,n+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(t>>16,i>>16,h.i.ya,n,g,0,0,O,k,x,L,R,N,l>>8,o>>8),t+=D,i+=U,l+=F,o+=B,n+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}else for(e-=r,r-=n,n=this.pa[n];;){if(--r<0)for(;;){if(--e<0)return;this.kS(s>>16,t>>16,h.i.ya,n,g,0,0,O,k,x,L,R,N,a>>8,l>>8),t+=D,s+=G,l+=F,a+=H,n+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(i>>16,t>>16,h.i.ya,n,g,0,0,O,k,x,L,R,N,o>>8,l>>8),t+=D,i+=U,l+=F,o+=B,n+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}}else{s=i<<=16,a=o<<=16,n<0&&(s-=D*n,i-=U*n,a-=F*n,o-=B*n,n=0),t<<=16,l<<=16,e<0&&(t-=G*e,l-=H*e,e=0);const c=n-this.wo;if(O+=S*c,k+=M*c,x+=P*c,O|=0,k|=0,x|=0,r-=e,e-=n,n=this.pa[n],D<U)for(;;){if(--e<0)for(;;){if(--r<0)return;this.kS(t>>16,i>>16,h.i.ya,n,g,0,0,O,k,x,L,R,N,l>>8,o>>8),t+=G,i+=U,l+=H,o+=B,n+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(s>>16,i>>16,h.i.ya,n,g,0,0,O,k,x,L,R,N,a>>8,o>>8),s+=D,i+=U,a+=F,o+=B,n+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}else for(;;){if(--e<0)for(;;){if(--r<0)return;this.kS(i>>16,t>>16,h.i.ya,n,g,0,0,O,k,x,L,R,N,o>>8,l>>8),t+=G,i+=U,l+=H,o+=B,n+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(i>>16,s>>16,h.i.ya,n,g,0,0,O,k,x,L,R,N,o>>8,a>>8),s+=D,i+=U,a+=F,o+=B,n+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}}}else if(r<h.i.bottom)if(e>h.i.bottom&&(e=h.i.bottom),n>h.i.bottom&&(n=h.i.bottom),e<n){i=s<<=16,o=a<<=16,r<0&&(i-=U*r,s-=G*r,o-=B*r,a-=H*r,r=0),t<<=16,l<<=16,e<0&&(t-=D*e,l-=F*e,e=0);const c=r-this.wo;if(O+=S*c,k+=M*c,x+=P*c,O|=0,k|=0,x|=0,n-=e,e-=r,r=this.pa[r],U<G)for(;;){if(--e<0)for(;;){if(--n<0)return;this.kS(i>>16,t>>16,h.i.ya,r,g,0,0,O,k,x,L,R,N,o>>8,l>>8),i+=U,t+=D,o+=B,l+=F,r+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(i>>16,s>>16,h.i.ya,r,g,0,0,O,k,x,L,R,N,o>>8,a>>8),i+=U,s+=G,o+=B,a+=H,r+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}else for(;;){if(--e<0)for(;;){if(--n<0)return;this.kS(t>>16,i>>16,h.i.ya,r,g,0,0,O,k,x,L,R,N,l>>8,o>>8),i+=U,t+=D,o+=B,l+=F,r+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(s>>16,i>>16,h.i.ya,r,g,0,0,O,k,x,L,R,N,a>>8,o>>8),i+=U,s+=G,o+=B,a+=H,r+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}}else{t=s<<=16,l=a<<=16,r<0&&(t-=U*r,s-=G*r,l-=B*r,a-=H*r,r=0),i<<=16,o<<=16,n<0&&(i-=D*n,o-=F*n,n=0);const c=r-this.wo;if(O+=S*c,k+=M*c,x+=P*c,O|=0,k|=0,x|=0,e-=n,n-=r,r=this.pa[r],U<G)for(;;){if(--n<0)for(;;){if(--e<0)return;this.kS(i>>16,s>>16,h.i.ya,r,g,0,0,O,k,x,L,R,N,o>>8,a>>8),i+=D,s+=G,o+=F,a+=H,r+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(t>>16,s>>16,h.i.ya,r,g,0,0,O,k,x,L,R,N,l>>8,a>>8),t+=U,s+=G,l+=B,a+=H,r+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}else for(;;){if(--n<0)for(;;){if(--e<0)return;this.kS(s>>16,i>>16,h.i.ya,r,g,0,0,O,k,x,L,R,N,a>>8,o>>8),i+=D,s+=G,o+=F,a+=H,r+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}this.kS(s>>16,t>>16,h.i.ya,r,g,0,0,O,k,x,L,R,N,a>>8,l>>8),t+=U,s+=G,l+=B,a+=H,r+=h.i.vE,O+=S,k+=M,x+=P,O|=0,k|=0,x|=0}}};static kS=(t,i,s,e,n,r,l,o,a,c,f,u,d,w,y)=>{if(t>=i)return;let m,p,A,I,g,_,C,E,T;if(this.jO){if(m=(y-w)/(i-t)|0,i>h.i.qO&&(i=h.i.qO),t<0&&(w-=t*m,t=0),t>=i)return;p=i-t>>3,m<<=12}else i-t>7?(p=i-t>>3,m=(y-w)*this.wS[p]>>6):(p=0,m=0);if(w<<=9,e+=t,this.m&&n)if(A=0,I=0,_=t-this.do,o+=(f>>3)*_,a+=(u>>3)*_,c+=(d>>3)*_,o|=0,a|=0,g=(c|=0)>>12,0!==g&&(l=a/g|0,(r=o/g|0)<0?r=0:r>4032&&(r=4032)),o+=f,a+=u,c+=d,o|=0,a|=0,g=(c|=0)>>12,0!==g&&(A=o/g|0,I=a/g|0,A<7?A=7:A>4032&&(A=4032)),C=A-r>>3,E=I-l>>3,r+=w>>3&786432,T=w>>23,this._S){for(;p-- >0;)s[e++]=n[(4032&l)+(r>>6)]>>>T,r+=C,l+=E,s[e++]=n[(4032&l)+(r>>6)]>>>T,r+=C,l+=E,s[e++]=n[(4032&l)+(r>>6)]>>>T,r+=C,l+=E,s[e++]=n[(4032&l)+(r>>6)]>>>T,r+=C,l+=E,s[e++]=n[(4032&l)+(r>>6)]>>>T,r+=C,l+=E,s[e++]=n[(4032&l)+(r>>6)]>>>T,r+=C,l+=E,s[e++]=n[(4032&l)+(r>>6)]>>>T,r+=C,l+=E,s[e++]=n[(4032&l)+(r>>6)]>>>T,r=A,l=I,o+=f,a+=u,g=(c+=d)>>12,0!==g&&(A=o/g|0,I=a/g|0,A<7?A=7:A>4032&&(A=4032)),C=A-r>>3,E=I-l>>3,r+=(w+=m)>>3&786432,T=w>>23;for(p=i-t&7;p-- >0;)s[e++]=n[(4032&l)+(r>>6)]>>>T,r+=C,l+=E}else{for(;p-- >0;){let t;0!=(t=n[(4032&l)+(r>>6)]>>>T)&&(s[e]=t),e+=1,0!=(t=n[(4032&(l+=E))+((r+=C)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(l+=E))+((r+=C)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(l+=E))+((r+=C)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(l+=E))+((r+=C)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(l+=E))+((r+=C)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(l+=E))+((r+=C)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(l+=E))+((r+=C)>>6)]>>>T)&&(s[e]=t),e+=1,r=A,l=I,o+=f,a+=u,c+=d,o|=0,a|=0,g=(c|=0)>>12,0!==g&&(A=o/g|0,I=a/g|0,A<7?A=7:A>4032&&(A=4032)),C=A-r>>3,E=I-l>>3,r+=(w+=m)>>3&786432,T=w>>23}for(p=i-t&7;p-- >0;){let t;0!=(t=n[(4032&l)+(r>>6)]>>>T)&&(s[e]=t),e++,r+=C,l+=E}}else if(A=0,I=0,_=t-this.do,o+=(f>>3)*_,a+=(u>>3)*_,c+=(d>>3)*_,o|=0,a|=0,g=(c|=0)>>14,0!==g&&(l=a/g|0,(r=o/g|0)<0?r=0:r>16256&&(r=16256)),o+=f,a+=u,c+=d,o|=0,a|=0,g=(c|=0)>>14,0!==g&&(A=o/g|0,I=a/g|0,A<7?A=7:A>16256&&(A=16256)),C=A-r>>3,E=I-l>>3,r+=6291456&w,T=w>>23,this._S&&n){for(;p-- >0;)s[e++]=n[(16256&l)+(r>>7)]>>>T,r+=C,l+=E,s[e++]=n[(16256&l)+(r>>7)]>>>T,r+=C,l+=E,s[e++]=n[(16256&l)+(r>>7)]>>>T,r+=C,l+=E,s[e++]=n[(16256&l)+(r>>7)]>>>T,r+=C,l+=E,s[e++]=n[(16256&l)+(r>>7)]>>>T,r+=C,l+=E,s[e++]=n[(16256&l)+(r>>7)]>>>T,r+=C,l+=E,s[e++]=n[(16256&l)+(r>>7)]>>>T,r+=C,l+=E,s[e++]=n[(16256&l)+(r>>7)]>>>T,r=A,l=I,o+=f,a+=u,c+=d,o|=0,a|=0,g=(c|=0)>>14,0!==g&&(A=o/g|0,I=a/g|0,A<7?A=7:A>16256&&(A=16256)),C=A-r>>3,E=I-l>>3,r+=6291456&(w+=m),T=w>>23;for(p=i-t&7;p-- >0;)s[e++]=n[(16256&l)+(r>>7)]>>>T,r+=C,l+=E}else{for(;p-- >0&&n;){let t;0!=(t=n[(16256&l)+(r>>7)]>>>T)&&(s[e]=t),e+=1,0!=(t=n[(16256&(l+=E))+((r+=C)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(l+=E))+((r+=C)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(l+=E))+((r+=C)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(l+=E))+((r+=C)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(l+=E))+((r+=C)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(l+=E))+((r+=C)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(l+=E))+((r+=C)>>7)]>>>T)&&(s[e]=t),e++,r=A,l=I,o+=f,a+=u,c+=d,o|=0,a|=0,g=(c|=0)>>14,0!==g&&(A=o/g|0,I=a/g|0,A<7?A=7:A>16256&&(A=16256)),C=A-r>>3,E=I-l>>3,r+=6291456&(w+=m),T=w>>23}for(p=i-t&7;p-- >0&&n;){let t;0!=(t=n[(16256&l)+(r>>7)]>>>T)&&(s[e]=t),e++,r+=C,l+=E}}};static LS=(t,i,s,e,n)=>{if(this.jO&&(i>h.i.qO&&(i=h.i.qO),t<0&&(t=0)),t>=i)return;e+=t;let r=i-t>>2;if(0===this.alpha)for(;;){if(r--,r<0)for(r=i-t&3;;){if(r--,r<0)return;s[e++]=n}s[e++]=n,s[e++]=n,s[e++]=n,s[e++]=n}const l=this.alpha,o=256-this.alpha;for(n=((16711935&n)*o>>8&16711935)+((65280&n)*o>>8&65280);;){if(r--,r<0)for(r=i-t&3;;){if(r--,r<0)return;s[e++]=n+((16711935&s[e])*l>>8&16711935)+((65280&s[e])*l>>8&65280)}s[e++]=n+((16711935&s[e])*l>>8&16711935)+((65280&s[e])*l>>8&65280),s[e++]=n+((16711935&s[e])*l>>8&16711935)+((65280&s[e])*l>>8&65280),s[e++]=n+((16711935&s[e])*l>>8&16711935)+((65280&s[e])*l>>8&65280),s[e++]=n+((16711935&s[e])*l>>8&16711935)+((65280&s[e])*l>>8&65280)}};static sI=t=>{this.AS[t]&&this.pS&&(this.pS[this.IS++]=this.AS[t],this.AS[t]=null)};static SS=t=>{if(this.tI[t]=this.Kc++,this.AS[t])return this.AS[t];let i;if(this.IS>0&&this.pS)i=this.pS[--this.IS],this.pS[this.IS]=null;else{let t=0,s=-1;for(let i=0;i<this.mS;i++)this.AS[i]&&(this.tI[i]<t||-1===s)&&(t=this.tI[i],s=i);i=this.AS[s],this.AS[s]=null}this.AS[t]=i;const s=this.iI[t],h=this.gS[t];if(!i||!s||!h)return null;if(this.m){this.CS[t]=!1;for(let e=0;e<4096;e++){const n=i[e]=16316671&h[s.ya[e]];0===n&&(this.CS[t]=!0),i[e+4096]=n-(n>>>3)&16316671,i[e+8192]=n-(n>>>2)&16316671,i[e+12288]=n-(n>>>2)-(n>>>3)&16316671}}else{if(64===s.width)for(let t=0;t<128;t++)for(let e=0;e<128;e++)i[e+(t<<7|0)]=h[s.ya[(e>>1)+(t>>1<<6|0)]];else for(let t=0;t<16384;t++)i[t]=h[s.ya[t]];this.CS[t]=!1;for(let s=0;s<16384;s++){i[s]&=16316671;const h=i[s];0===h&&(this.CS[t]=!0),i[s+16384]=h-(h>>>3)&16316671,i[s+32768]=h-(h>>>2)&16316671,i[s+49152]=h-(h>>>2)-(h>>>3)&16316671}}return i}}},5147:(t,i,s)=>{s.d(i,{v_:()=>e});var h=s(6121);const e=async t=>{255!==t[0]&&(t[0]=255),URL.revokeObjectURL(h.QL.src),h.QL.src=URL.createObjectURL(new Blob([t],{type:'image/jpeg'})),await new Promise((t=>h.QL.onload=()=>t())),h.iS.clearRect(0,0,h.tS.width,h.tS.height);const i=h.QL.naturalWidth,s=h.QL.naturalHeight;return h.tS.width=i,h.tS.height=s,h.iS.drawImage(h.QL,0,0),h.iS.getImageData(0,0,i,s)}},9178:(t,i,s)=>{s.d(i,{i:()=>f});var h=s(2383),e=s(2991),n=s(8078),r=s(8762),l=s(6327),o=s(9345);class a{QC=0;dO=0;RS=0;MS=-1;xS=-1;NS=-1;PS=-1;DS=-1;FS=-1;US=-1;BS=-1;GS=-1;HS=0;WS=-1;ZS=-1;YS=-1;data=null}class c{x=0;y=0;z=0;w=0}class f extends l.i{static metadata=null;static head=null;static VS=null;static zS=null;static XS=null;static jS=null;static qS=null;static $S=null;static KS=null;static JS=null;static QS=null;static tk=null;static ik=null;static sk=null;static axis=null;static hk=new o.to(4096,!1);static ek=new o.to(4096,!1);static nk=new Int32Array(4096);static rk=new Int32Array(4096);static lk=new Int32Array(4096);static ak=new Int32Array(4096);static ck=new Int32Array(4096);static fk=new Int32Array(4096);static uk=new Int32Array(1500);static dk=new o.on(1500,512);static wk=new Int32Array(12);static yk=new o.on(12,2e3);static mk=new Int32Array(2e3);static pk=new Int32Array(2e3);static Ak=new Int32Array(12);static Ik=new Int32Array(10);static gk=new Int32Array(10);static _k=new Int32Array(10);static De=0;static Ck=0;static Fe=0;static Jc=!1;static Gl=0;static Hl=0;static Qc=0;static Qm=new Int32Array(1e3);static Ek=!1;static wa(t){try{f.head=new h.i(t.read('ob_head.dat')),f.VS=new h.i(t.read('ob_face1.dat')),f.zS=new h.i(t.read('ob_face2.dat')),f.XS=new h.i(t.read('ob_face3.dat')),f.jS=new h.i(t.read('ob_face4.dat')),f.qS=new h.i(t.read('ob_face5.dat')),f.$S=new h.i(t.read('ob_point1.dat')),f.KS=new h.i(t.read('ob_point2.dat')),f.JS=new h.i(t.read('ob_point3.dat')),f.QS=new h.i(t.read('ob_point4.dat')),f.tk=new h.i(t.read('ob_point5.dat')),f.ik=new h.i(t.read('ob_vertex1.dat')),f.sk=new h.i(t.read('ob_vertex2.dat')),f.axis=new h.i(t.read('ob_axis.dat')),f.head.Va=0,f.$S.Va=0,f.KS.Va=0,f.JS.Va=0,f.QS.Va=0,f.ik.Va=0,f.sk.Va=0;const i=f.head.kw;f.metadata=new o.to(i+100,null);let s=0,e=0,n=0,r=0,l=0,c=0,u=0;for(let t=0;t<i;t++){const t=f.head.kw,i=new a;i.QC=f.head.kw,i.dO=f.head.kw,i.RS=f.head.Nw,i.MS=f.$S.Va,i.xS=f.KS.Va,i.NS=f.JS.Va,i.PS=f.QS.Va,i.FS=f.ik.Va,i.US=f.sk.Va;const h=f.head.Nw,o=f.head.Nw,d=f.head.Nw,w=f.head.Nw,y=f.head.Nw;for(let t=0;t<i.QC;t++){const t=f.$S.Nw;0!=(1&t)&&f.KS.Tk,0!=(2&t)&&f.JS.Tk,0!=(4&t)&&f.QS.Tk}for(let t=0;t<i.dO;t++){1===f.sk.Nw&&(f.ik.Tk,f.ik.Tk),f.ik.Tk}i.BS=n,n+=2*i.dO,1===h&&(i.GS=r,r+=i.dO),255===o?(i.HS=l,l+=i.dO):i.HS=-o-1,1===d&&(i.WS=c,c+=i.dO),1===w&&(i.ZS=u,u+=i.dO),1===y&&(i.DS=e,e+=i.QC),i.YS=s,s+=i.RS,f.metadata[t]=i}}catch(t){console.log('Error loading model index'),console.error(t)}}static bk(t,i){if(null===f.metadata&&(f.metadata=[]),null===t){const t=new a;return t.QC=0,t.dO=0,t.RS=0,void(f.metadata[i]=t)}const s=new h.i(t);s.Va=s.length-18;const e=new a;e.data=t,e.QC=s.kw,e.dO=s.kw,e.RS=s.Nw,f.metadata[i]=e;const n=s.Nw,r=s.Nw,l=s.Nw,o=s.Nw,c=s.Nw,u=s.kw,d=s.kw,w=s.kw,y=s.kw;let m=0;e.MS=m,m+=e.QC,e.US=m,m+=e.dO,e.HS=m,255===r?m+=e.dO:e.HS=-r-1,e.ZS=m,1===o?m+=e.dO:e.ZS=-1,e.GS=m,1===n?m+=e.dO:e.GS=-1,e.DS=m,1===c?m+=e.QC:e.DS=-1,e.WS=m,1===l?m+=e.dO:e.WS=-1,e.FS=m,m+=y,e.BS=m,m+=2*e.dO,e.YS=m,m+=6*e.RS,e.xS=m,m+=u,e.NS=m,m+=d,e.PS=m,m+=w}static Ur(){f.metadata=null,f.head=null,f.VS=null,f.zS=null,f.XS=null,f.jS=null,f.qS=null,f.$S=null,f.KS=null,f.JS=null,f.QS=null,f.tk=null,f.ik=null,f.sk=null,f.axis=null,f.hk=null,f.ek=null,f.nk=null,f.rk=null,f.lk=null,f.ak=null,f.ck=null,f.fk=null,f.uk=null,f.dk=null,f.wk=null,f.yk=null,f.mk=null,f.pk=null,f.Ak=null}static vk(t,i,s){return 2==(2&s)?(i<0?i=0:i>127&&(i=127),127-i):((i=i*(127&t)>>7)<2?i=2:i>126&&(i=126),(65408&t)+i)}static JC=(t,i,s)=>{const h=t.QC,e=t.dO,n=t.RS;let r,l,a,u,d;if(i){r=new Int32Array(h);for(let i=0;i<h;i++)r[i]=t.sE[i]}else r=t.sE;let w=null,y=null;if(s){l=new Int32Array(e),a=new Int32Array(e),u=new Int32Array(e);for(let i=0;i<e;i++)t.Ok&&(l[i]=t.Ok[i]),t.Lk&&(a[i]=t.Lk[i]),t.Sk&&(u[i]=t.Sk[i]);if(d=new Int32Array(e),t.uO)for(let i=0;i<e;i++)d[i]=t.uO[i];else for(let t=0;t<e;t++)d[t]=0;w=new o.to(h,null);for(let i=0;i<h;i++){const s=w[i]=new c;if(t.Qv){const h=t.Qv[i];h&&(s.x=h.x,s.y=h.y,s.z=h.z,s.w=h.w)}}y=t.rO}else l=t.Ok,a=t.Lk,u=t.Sk,d=t.uO;return new f({QC:h,tE:t.tE,sE:r,iE:t.iE,dO:e,wO:t.wO,yO:t.yO,mO:t.mO,Ok:l,Lk:a,Sk:u,uO:d,kk:t.kk,Rk:t.Rk,aC:t.aC,priority:t.priority,RS:n,Mk:t.Mk,xk:t.xk,Nk:t.Nk,oO:t.oO,aO:t.aO,cO:t.cO,fO:t.fO,Mb:t.Mb,lO:t.lO,aE:t.aE,Pk:t.Pk,Dk:t.Dk,Qv:w,rO:y})};static cC=(t,i,s,h)=>{const e=t.QC,n=t.dO,r=t.RS;let l,o,a,c,u;if(h)l=t.tE,o=t.sE,a=t.iE;else{l=new Int32Array(e),o=new Int32Array(e),a=new Int32Array(e);for(let i=0;i<e;i++)l[i]=t.tE[i],o[i]=t.sE[i],a[i]=t.iE[i]}if(i)c=t.aC;else{c=new Int32Array(n);for(let i=0;i<n;i++)t.aC&&(c[i]=t.aC[i])}if(s)u=t.Rk;else if(u=new Int32Array(n),t.Rk)for(let i=0;i<n;i++)u[i]=t.Rk[i];else for(let t=0;t<n;t++)u[t]=0;return new f({QC:e,tE:l,sE:o,iE:a,dO:n,wO:t.wO,yO:t.yO,mO:t.mO,Ok:null,Lk:null,Sk:null,uO:t.uO,kk:t.kk,Rk:u,aC:c,priority:t.priority,RS:r,Mk:t.Mk,xk:t.xk,Nk:t.Nk,Fk:t.Fk,Uk:t.Uk})};static pE=(t,i)=>{const s=t.QC,h=t.dO,e=t.RS,n=new Int32Array(s),r=new Int32Array(s),l=new Int32Array(s);for(let i=0;i<s;i++)n[i]=t.tE[i],r[i]=t.sE[i],l[i]=t.iE[i];let o;if(i)o=t.Rk;else if(o=new Int32Array(h),t.Rk)for(let i=0;i<h;i++)o[i]=t.Rk[i];else for(let t=0;t<h;t++)o[t]=0;return new f({QC:s,tE:n,sE:r,iE:l,dO:h,wO:t.wO,yO:t.yO,mO:t.mO,Ok:t.Ok,Lk:t.Lk,Sk:t.Sk,uO:t.uO,kk:t.kk,Rk:o,aC:t.aC,priority:t.priority,RS:e,Mk:t.Mk,xk:t.xk,Nk:t.Nk,rE:t.rE,nE:t.nE})};static AL=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,l=0,o=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.QC,l+=i.dO,o+=i.RS,s||=null!==i.uO,i.kk?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.Rk,n||=null!==i.aC)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(l),y=new Int32Array(l),m=new Int32Array(l),p=new Int32Array(l),A=new Int32Array(l),I=new Int32Array(l),g=new Int32Array(o),_=new Int32Array(o),C=new Int32Array(o);let E=null;s&&(E=new Int32Array(l));let T=null;h&&(T=new Int32Array(l));let b=null;e&&(b=new Int32Array(l));let v=null;n&&(v=new Int32Array(l)),r=0,l=0,o=0;for(let a=0;a<i;a++){const i=t[a];if(i){const t=r;for(let t=0;t<i.QC;t++)c[r]=i.tE[t],u[r]=i.sE[t],d[r]=i.iE[t],r++;for(let r=0;r<i.dO;r++)w[l]=i.wO[r]+t,y[l]=i.yO[r]+t,m[l]=i.mO[r]+t,i.Ok&&(p[l]=i.Ok[r]),i.Lk&&(A[l]=i.Lk[r]),i.Sk&&(I[l]=i.Sk[r]),s&&(i.uO?E&&(E[l]=i.uO[r]):E&&(E[l]=0)),h&&(i.kk?T&&(T[l]=i.kk[r]):T&&(T[l]=i.priority)),e&&(i.Rk?b&&(b[l]=i.Rk[r]):b&&(b[l]=0)),n&&i.aC&&v&&(v[l]=i.aC[r]),l++;for(let s=0;s<i.RS;s++)g[o]=i.Mk[s]+t,_[o]=i.xk[s]+t,C[o]=i.Nk[s]+t,o++}}const O=new f({QC:r,tE:c,sE:u,iE:d,dO:l,wO:w,yO:y,mO:m,Ok:p,Lk:A,Sk:I,uO:E,kk:T,Rk:b,aC:v,priority:a,RS:o,Mk:g,xk:_,Nk:C});return O.IE(),O};static Po=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,l=0,o=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.QC,l+=i.dO,o+=i.RS,s||=null!==i.uO,i.kk?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.Rk,n||=null!==i.Uk)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(r),y=new Int32Array(l),m=new Int32Array(l),p=new Int32Array(l),A=new Int32Array(o),I=new Int32Array(o),g=new Int32Array(o);let _=null;s&&(_=new Int32Array(l));let C=null;h&&(C=new Int32Array(l));let E=null;e&&(E=new Int32Array(l));let T=null;n&&(T=new Int32Array(l));const b=new Int32Array(l);r=0,l=0,o=0;const v=(t,i,s,h,e,n,r)=>{let l=-1;const o=t.tE[i],a=t.sE[i],c=t.iE[i];for(let t=0;t<r;t++)if(o===s[t]&&a===h[t]&&c===e[t]){l=t;break}return-1===l&&(s[r]=o,h[r]=a,e[r]=c,n&&t.Fk&&(n[r]=t.Fk[i]),l=r++),{vertex:l,QC:r}};for(let a=0;a<i;a++){const i=t[a];if(i){for(let t=0;t<i.dO;t++){s&&(i.uO?_&&(_[l]=i.uO[t]):_&&(_[l]=0)),h&&(i.kk?C&&(C[l]=i.kk[t]):C&&(C[l]=i.priority)),e&&(i.Rk?E&&(E[l]=i.Rk[t]):E&&(E[l]=0)),n&&i.Uk&&T&&(T[l]=i.Uk[t]),i.aC&&(b[l]=i.aC[t]);const o=v(i,i.wO[t],c,u,d,w,r);r=o.QC;const a=v(i,i.yO[t],c,u,d,w,r);r=a.QC;const f=v(i,i.mO[t],c,u,d,w,r);r=f.QC,y[l]=o.vertex,m[l]=a.vertex,p[l]=f.vertex,l++}for(let t=0;t<i.RS;t++){const s=v(i,i.Mk[t],c,u,d,w,r);r=s.QC;const h=v(i,i.xk[t],c,u,d,w,r);r=h.QC;const e=v(i,i.Nk[t],c,u,d,w,r);r=e.QC,A[o]=s.vertex,I[o]=h.vertex,g[o]=e.vertex,o++}}}return new f({QC:r,tE:c,sE:u,iE:d,dO:l,wO:y,yO:m,mO:p,Ok:null,Lk:null,Sk:null,uO:_,kk:C,Rk:E,aC:b,priority:a,RS:o,Mk:A,xk:I,Nk:g,Fk:w,Uk:T})};static model=t=>{if(!f.metadata)throw new Error('cant loading model metadata!!!!!');const i=f.metadata[t];if(!i)throw console.log(`Error model:${t} not found!`),new Error('cant loading model metadata!!!!!');if(!(f.head&&f.VS&&f.zS&&f.XS&&f.jS&&f.qS&&f.$S&&f.KS&&f.JS&&f.QS&&f.tk&&f.ik&&f.sk&&f.axis))throw new Error('cant loading model!!!!!');const s=i.QC,h=i.dO,e=i.RS,n=new Int32Array(s),r=new Int32Array(s),l=new Int32Array(s),o=new Int32Array(h),a=new Int32Array(h),c=new Int32Array(h),u=new Int32Array(e),d=new Int32Array(e),w=new Int32Array(e);let y=null;i.DS>=0&&(y=new Int32Array(s));let m=null;i.GS>=0&&(m=new Int32Array(h));let p=null,A=0;i.HS>=0?p=new Int32Array(h):A=-i.HS-1;let I=null;i.WS>=0&&(I=new Int32Array(h));let g=null;i.ZS>=0&&(g=new Int32Array(h));const _=new Int32Array(h);f.$S.Va=i.MS,f.KS.Va=i.xS,f.JS.Va=i.NS,f.QS.Va=i.PS,f.tk.Va=i.DS;let C,E,T,b=0,v=0,O=0;for(let t=0;t<s;t++){const i=f.$S.Nw;C=0,0!=(1&i)&&(C=f.KS.Tk),E=0,0!=(2&i)&&(E=f.JS.Tk),T=0,0!=(4&i)&&(T=f.QS.Tk),n[t]=b+C,r[t]=v+E,l[t]=O+T,b=n[t],v=r[t],O=l[t],y&&(y[t]=f.tk.Nw)}f.VS.Va=i.BS,f.zS.Va=i.GS,f.XS.Va=i.HS,f.jS.Va=i.WS,f.qS.Va=i.ZS;for(let t=0;t<h;t++)_[t]=f.VS.kw,m&&(m[t]=f.zS.Nw),p&&(p[t]=f.XS.Nw),I&&(I[t]=f.jS.Nw),g&&(g[t]=f.qS.Nw);f.ik.Va=i.FS,f.sk.Va=i.US,C=0,E=0,T=0;let L=0;for(let t=0;t<h;t++){const i=f.sk.Nw;if(1===i)C=f.ik.Tk+L,L=C,E=f.ik.Tk+L,L=E,T=f.ik.Tk+L,L=T;else if(2===i)E=T,T=f.ik.Tk+L,L=T;else if(3===i)C=T,T=f.ik.Tk+L,L=T;else if(4===i){const t=C;C=E,E=t,T=f.ik.Tk+L,L=T}o[t]=C,a[t]=E,c[t]=T}f.axis.Va=6*i.YS;for(let t=0;t<e;t++)u[t]=f.axis.kw,d[t]=f.axis.kw,w[t]=f.axis.kw;return new f({QC:s,tE:n,sE:r,iE:l,dO:h,wO:o,yO:a,mO:c,Ok:null,Lk:null,Sk:null,uO:m,kk:p,Rk:I,aC:_,priority:A,RS:e,Mk:u,xk:d,Nk:w,Fk:y,Uk:g})};static Bk=(t,i)=>{if(!f.metadata||!f.metadata[i])throw new Error('No model metadata');const s=f.metadata[i];if(s.data=t,!s.data.length)throw new Error('No model data');const e=s.QC,n=s.dO,r=s.RS,l=new Int32Array(e),o=new Int32Array(e),a=new Int32Array(e),c=new Int32Array(n),u=new Int32Array(n),d=new Int32Array(n),w=new Int32Array(r),y=new Int32Array(r),m=new Int32Array(r);let p=null;s.DS>=0&&(p=new Int32Array(e));let A=null;s.GS>=0&&(A=new Int32Array(n));let I=null,g=0;s.HS>=0?I=new Int32Array(n):g=-s.HS-1;let _=null;s.WS>=0&&(_=new Int32Array(n));let C=null;s.ZS>=0&&(C=new Int32Array(n));const E=new Int32Array(n),T=new h.i(s.data);T.Va=s.MS;const b=new h.i(s.data);b.Va=s.xS;const v=new h.i(s.data);v.Va=s.NS;const O=new h.i(s.data);O.Va=s.PS;const L=new h.i(s.data);L.Va=s.DS;let S,k,R,M=0,x=0,N=0;for(let t=0;t<e;t++){const i=T.Nw;S=0,0!=(1&i)&&(S=b.Tk),k=0,0!=(2&i)&&(k=v.Tk),R=0,0!=(4&i)&&(R=O.Tk),l[t]=M+S,o[t]=x+k,a[t]=N+R,M=l[t],x=o[t],N=a[t],p&&(p[t]=L.Nw)}const P=new h.i(s.data);P.Va=s.BS;const D=new h.i(s.data);D.Va=s.GS;const F=new h.i(s.data);F.Va=s.HS;const U=new h.i(s.data);U.Va=s.WS;const B=new h.i(s.data);B.Va=s.ZS;for(let t=0;t<n;t++)E[t]=P.kw,A&&(A[t]=D.Nw),I&&(I[t]=F.Nw),_&&(_[t]=U.Nw),C&&(C[t]=B.Nw);const G=new h.i(s.data);G.Va=s.FS;const H=new h.i(s.data);H.Va=s.US,S=0,k=0,R=0;let W=0;for(let t=0;t<n;t++){const i=H.Nw;if(1===i)S=G.Tk+W,W=S,k=G.Tk+W,W=k,R=G.Tk+W,W=R;else if(2===i)k=R,R=G.Tk+W,W=R;else if(3===i)S=R,R=G.Tk+W,W=R;else if(4===i){const t=S;S=k,k=t,R=G.Tk+W,W=R}c[t]=S,u[t]=k,d[t]=R}const Z=new h.i(s.data);Z.Va=6*s.YS;for(let t=0;t<r;t++)w[t]=Z.kw,y[t]=Z.kw,m[t]=Z.kw;return new f({QC:e,tE:l,sE:o,iE:a,dO:n,wO:c,yO:u,mO:d,Ok:null,Lk:null,Sk:null,uO:A,kk:I,Rk:_,aC:E,priority:g,RS:r,Mk:w,xk:y,Nk:m,Fk:p,Uk:C})};QC;tE;sE;iE;dO;wO;yO;mO;Ok;Lk;Sk;uO;kk;Rk;aC;priority;RS;Mk;xk;Nk;oO;aO;cO;fO;Mb;lO;aE;Pk;Dk;Fk;Uk;rE;nE;Qv;rO;oE=0;gE=!1;Gk=-1;Hk=-1;constructor(t){super(),this.QC=t.QC,this.tE=t.tE,this.sE=t.sE,this.iE=t.iE,this.dO=t.dO,this.wO=t.wO,this.yO=t.yO,this.mO=t.mO,this.Ok=t.Ok,this.Lk=t.Lk,this.Sk=t.Sk,this.uO=t.uO,this.kk=t.kk,this.Rk=t.Rk,this.aC=t.aC,this.priority=t.priority,this.RS=t.RS,this.Mk=t.Mk,this.xk=t.xk,this.Nk=t.Nk,this.oO=t.oO??0,this.aO=t.aO??0,this.cO=t.cO??0,this.fO=t.fO??0,this.Mb=t.Mb??0,this.lO=t.lO??0,this.aE=t.aE??0,this.Pk=t.Pk??0,this.Dk=t.Dk??0,this.Fk=t.Fk??null,this.Uk=t.Uk??null,this.rE=t.rE??null,this.nE=t.nE??null,this.Qv=t.Qv??null,this.rO=t.rO??null}IE=()=>{this.aE=0,this.Mb=0,this.lO=0;for(let t=0;t<this.QC;t++){const i=this.tE[t],s=this.sE[t],h=this.iE[t];-s>this.aE&&(this.aE=-s),s>this.lO&&(this.lO=s);const e=i*i+h*h;e>this.Mb&&(this.Mb=e)}this.Mb=Math.sqrt(this.Mb)+.99|0,this.Dk=Math.sqrt(this.Mb*this.Mb+this.aE*this.aE)+.99|0,this.Pk=this.Dk+(Math.sqrt(this.Mb*this.Mb+this.lO*this.lO)+.99|0)};hE=()=>{this.aE=0,this.lO=0;for(let t=0;t<this.QC;t++){const i=this.sE[t];-i>this.aE&&(this.aE=-i),i>this.lO&&(this.lO=i)}this.Dk=Math.sqrt(this.Mb*this.Mb+this.aE*this.aE)+.99|0,this.Pk=this.Dk+(Math.sqrt(this.Mb*this.Mb+this.lO*this.lO)+.99|0)};Go=()=>{if(this.Fk){const t=new Int32Array(256);let i=0;for(let s=0;s<this.QC;s++){const h=this.Fk[s];t[h]++,h>i&&(i=h)}this.rE=new o.to(i+1,null);for(let s=0;s<=i;s++)this.rE[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.QC;){const i=this.Fk[s],h=this.rE[i];h&&(h[t[i]++]=s++)}this.Fk=null}if(this.Uk){const t=new Int32Array(256);let i=0;for(let s=0;s<this.dO;s++){const h=this.Uk[s];t[h]++,h>i&&(i=h)}this.nE=new o.to(i+1,null);for(let s=0;s<=i;s++)this.nE[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.dO;){const i=this.Uk[s],h=this.nE[i];h&&(h[t[i]++]=s++)}this.Uk=null}};AE=(t,i,s)=>{if(-1!==t)if(s&&-1!==i){const h=r.i.Hr[t],e=r.i.Hr[i],n=h.Wk;f.De=0,f.Ck=0,f.Fe=0;let l=0,o=s[l++];for(let t=0;t<h.length;t++){if(!h.Zk)continue;const i=h.Zk[t];for(;i>o;)o=s[l++];n&&n.types&&h.x&&h.y&&h.z&&n.labels&&(i!==o||0===n.types[i])&&this.Yk(h.x[t],h.y[t],h.z[t],n.labels[i],n.types[i])}f.De=0,f.Ck=0,f.Fe=0,l=0,o=s[l++];for(let t=0;t<e.length;t++){if(!e.Zk)continue;const i=e.Zk[t];for(;i>o;)o=s[l++];n&&n.types&&e.x&&e.y&&e.z&&n.labels&&(i===o||0===n.types[i])&&this.Yk(e.x[t],e.y[t],e.z[t],n.labels[i],n.types[i])}}else this.Ho(t)};Ho=t=>{if(!this.rE||-1===t||!r.i.Hr[t])return;const i=r.i.Hr[t],s=i.Wk;f.De=0,f.Ck=0,f.Fe=0;for(let t=0;t<i.length;t++){if(!(i.Zk&&i.x&&i.y&&i.z&&s&&s.labels&&s.types))continue;const h=i.Zk[t];this.Yk(i.x[t],i.y[t],i.z[t],s.labels[h],s.types[h])}};lE=()=>{for(let t=0;t<this.QC;t++){const i=this.tE[t];this.tE[t]=this.iE[t],this.iE[t]=-i}};RL=t=>{const i=n.i.sin[t],s=n.i.cos[t];for(let t=0;t<this.QC;t++){const h=this.sE[t]*s-this.iE[t]*i>>16;this.iE[t]=this.sE[t]*i+this.iE[t]*s>>16,this.sE[t]=h}};translate=(t,i,s)=>{for(let h=0;h<this.QC;h++)this.tE[h]+=i,this.sE[h]+=t,this.iE[h]+=s};Do=(t,i)=>{if(this.aC)for(let s=0;s<this.dO;s++)this.aC[s]===t&&(this.aC[s]=i)};eE=()=>{for(let t=0;t<this.QC;t++)this.iE[t]=-this.iE[t];for(let t=0;t<this.dO;t++){const i=this.wO[t];this.wO[t]=this.mO[t],this.mO[t]=i}};scale=(t,i,s)=>{for(let h=0;h<this.QC;h++)this.tE[h]=this.tE[h]*t/128|0,this.sE[h]=this.sE[h]*i/128|0,this.iE[h]=this.iE[h]*s/128|0};Wo=(t,i,s,h,e,n)=>{const r=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;if(this.Ok&&this.Lk&&this.Sk||(this.Ok=new Int32Array(this.dO),this.Lk=new Int32Array(this.dO),this.Sk=new Int32Array(this.dO)),!this.Qv){this.Qv=new o.to(this.QC,null);for(let t=0;t<this.QC;t++)this.Qv[t]=new c}for(let i=0;i<this.dO;i++){const n=this.wO[i],l=this.yO[i],o=this.mO[i],a=this.tE[l]-this.tE[n],c=this.sE[l]-this.sE[n],u=this.iE[l]-this.iE[n],d=this.tE[o]-this.tE[n],w=this.sE[o]-this.sE[n],y=this.iE[o]-this.iE[n];let m=c*y-w*u,p=u*d-y*a,A=a*w-d*c;for(;m>8192||p>8192||A>8192||m<-8192||p<-8192||A<-8192;)m>>=1,p>>=1,A>>=1;let I=0|Math.sqrt(m*m+p*p+A*A);if(I<=0&&(I=1),m=256*m/I|0,p=256*p/I|0,A=256*A/I|0,this.uO&&0!=(1&this.uO[i])){const n=t+((s*m+h*p+e*A)/(r+(r/2|0))|0);this.aC&&(this.Ok[i]=f.vk(this.aC[i],n,this.uO[i]))}else{let t=this.Qv[n];t&&(t.x+=m,t.y+=p,t.z+=A,t.w++),t=this.Qv[l],t&&(t.x+=m,t.y+=p,t.z+=A,t.w++),t=this.Qv[o],t&&(t.x+=m,t.y+=p,t.z+=A,t.w++)}}if(n)this.sO(t,r,s,h,e);else{this.rO=new o.to(this.QC,null);for(let t=0;t<this.QC;t++){const i=this.Qv[t],s=new c;i&&(s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w),this.rO[t]=s}}n?this.IE():this.Vk()};sO=(t,i,s,h,e)=>{for(let n=0;n<this.dO;n++){const r=this.wO[n],l=this.yO[n],o=this.mO[n];if(!this.uO&&this.aC&&this.Qv&&this.Ok&&this.Lk&&this.Sk){const a=this.aC[n],c=this.Qv[r];c&&(this.Ok[n]=f.vk(a,t+((s*c.x+h*c.y+e*c.z)/(i*c.w)|0),0));const u=this.Qv[l];u&&(this.Lk[n]=f.vk(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),0));const d=this.Qv[o];d&&(this.Sk[n]=f.vk(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),0))}else if(this.uO&&0==(1&this.uO[n])&&this.aC&&this.Qv&&this.Ok&&this.Lk&&this.Sk){const a=this.aC[n],c=this.uO[n],u=this.Qv[r];u&&(this.Ok[n]=f.vk(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),c));const d=this.Qv[l];d&&(this.Lk[n]=f.vk(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),c));const w=this.Qv[o];w&&(this.Sk[n]=f.vk(a,t+((s*w.x+h*w.y+e*w.z)/(i*w.w)|0),c))}}if(this.Qv=null,this.rO=null,this.Fk=null,this.Uk=null,this.uO)for(let t=0;t<this.dO;t++)if(2==(2&this.uO[t]))return;this.aC=null};Ao=(t,i,s,h,e,r,l)=>{const o=n.i.sin[t],a=n.i.cos[t],c=n.i.sin[i],u=n.i.cos[i],d=n.i.sin[s],w=n.i.cos[s],y=n.i.sin[h],m=n.i.cos[h],p=r*y+l*m>>16;for(let h=0;h<this.QC;h++){let A,I=this.tE[h],g=this.sE[h],_=this.iE[h];0!==s&&(A=g*d+I*w>>16,g=g*w-I*d>>16,I=A),0!==t&&(A=g*a-_*o>>16,_=g*o+_*a>>16,g=A),0!==i&&(A=_*c+I*u>>16,_=_*u-I*c>>16,I=A),I+=e,g+=r,_+=l,A=g*m-_*y>>16,_=g*y+_*m>>16,g=A,f.nk&&f.rk&&f.lk&&(f.lk[h]=_-p,f.nk[h]=n.i.do+((I<<9)/_|0),f.rk[h]=n.i.wo+((g<<9)/_|0)),this.RS>0&&f.ak&&f.ck&&f.fk&&(f.ak[h]=I,f.ck[h]=g,f.fk[h]=_)}try{this.zk(!1,!1,0)}catch(t){}};draw=(t,i,s,h,r,l,o,a,c)=>{const u=a*r-l*h>>16,d=o*i+u*s>>16,w=this.Mb*s>>16,y=d+w;if(y<=50||d>=3500)return;const m=a*h+l*r>>16;let p=m-this.Mb<<9;if((p/y|0)>=e.i.cS)return;let A=m+this.Mb<<9;if((A/y|0)<=-e.i.cS)return;const I=o*s-u*i>>16,g=this.Mb*i>>16;let _=I+g<<9;if((_/y|0)<=-e.i.fS)return;let C=I-(g+(this.aE*s>>16))<<9;if((C/y|0)>=e.i.fS)return;let E=d-(w+(this.aE*i>>16))<=50,T=!1;if(c>0&&f.Jc){let t=d-w;t<=50&&(t=50),m>0?(p=p/y|0,A=A/t|0):(A=A/y|0,p=p/t|0),I>0?(C=C/y|0,_=_/t|0):(_=_/y|0,C=C/t|0);const i=f.Gl-n.i.do,s=f.Hl-n.i.wo;i>p&&i<A&&s>C&&s<_&&(this.gE?f.Qm[f.Qc++]=c:T=!0)}const b=n.i.do,v=n.i.wo;let O=0,L=0;0!==t&&(O=n.i.sin[t],L=n.i.cos[t]);for(let e=0;e<this.QC;e++){let n,c=this.tE[e],u=this.sE[e],w=this.iE[e];0!==t&&(n=w*O+c*L>>16,w=w*L-c*O>>16,c=n),c+=l,u+=o,w+=a,n=w*h+c*r>>16,w=w*r-c*h>>16,c=n,n=u*s-w*i>>16,w=u*i+w*s>>16,u=n,f.lk&&(f.lk[e]=w-d),w>=50&&f.nk&&f.rk?(f.nk[e]=b+((c<<9)/w|0),f.rk[e]=v+((u<<9)/w|0)):f.nk&&(f.nk[e]=-5e3,E=!0),(E||this.RS>0)&&f.ak&&f.ck&&f.fk&&(f.ak[e]=c,f.ck[e]=u,f.fk[e]=w)}try{this.zk(E,T,c)}catch(t){}};zk=(t,i,s,h=!1)=>{f.Ek&&(this.Gk=-1,this.Hk=-1);for(let t=0;t<this.Pk;t++)f.uk&&(f.uk[t]=0);for(let h=0;h<this.dO;h++)if((!this.uO||-1!==this.uO[h])&&f.nk&&f.rk&&f.lk&&f.dk&&f.uk){const n=this.wO[h],r=this.yO[h],l=this.mO[h],o=f.nk[n],a=f.nk[r],c=f.nk[l],u=f.rk[n],d=f.rk[r],w=f.rk[l],y=f.lk[n],m=f.lk[r],p=f.lk[l];if(!t||-5e3!==o&&-5e3!==a&&-5e3!==c){i&&this.Xk(f.Gl,f.Hl,u,d,w,o,a,c)&&(f.Qm[f.Qc++]=s,i=!1);if((o-a)*(w-d)-(u-d)*(c-a)<=0)continue;if(f.ek&&(f.ek[h]=!1),f.hk&&(f.hk[h]=o<0||a<0||c<0||o>e.i.qO||a>e.i.qO||c>e.i.qO),f.dk&&f.uk){const t=((y+m+p)/3|0)+this.Dk;f.dk[t][f.uk[t]++]=h,f.Ek&&this.Xk(f.Gl,f.Hl,u,d,w,o,a,c)&&this.Hk<t&&(this.Gk=h,this.Hk=t)}}else if(f.ek&&(f.ek[h]=!0),f.dk&&f.uk){const t=((y+m+p)/3|0)+this.Dk;f.dk[t][f.uk[t]++]=h}}if(!this.kk&&f.uk){for(let t=this.Pk-1;t>=0;t--){const i=f.uk[t];if(!(i<=0)&&f.dk){const s=f.dk[t];for(let t=0;t<i;t++)this.jk(s[t],h)}}return}for(let t=0;t<12;t++)f.wk&&f.Ak&&(f.wk[t]=0,f.Ak[t]=0);if(f.uk)for(let t=this.Pk-1;t>=0;t--){const i=f.uk[t];if(i>0&&f.dk){const s=f.dk[t];for(let h=0;h<i;h++)if(this.kk&&f.wk&&f.yk){const i=s[h],e=this.kk[i],n=f.wk[e]++;f.yk[e][n]=i,e<10&&f.Ak?f.Ak[e]+=t:10===e&&f.mk?f.mk[n]=t:f.pk&&(f.pk[n]=t)}}}let n=0;f.wk&&f.Ak&&(f.wk[1]>0||f.wk[2]>0)&&(n=(f.Ak[1]+f.Ak[2])/(f.wk[1]+f.wk[2])|0);let r=0;f.wk&&f.Ak&&(f.wk[3]>0||f.wk[4]>0)&&(r=(f.Ak[3]+f.Ak[4])/(f.wk[3]+f.wk[4])|0);let l=0;if(f.wk&&f.Ak&&(f.wk[6]>0||f.wk[8]>0)&&(l=(f.Ak[6]+f.Ak[8])/(f.wk[6]+f.wk[8])|0),f.wk&&f.yk){let t,i=0,s=f.wk[10],e=f.yk[10],o=f.mk;i===s&&(i=0,s=f.wk[11],e=f.yk[11],o=f.pk),t=i<s&&o?o[i]:-1e3;for(let a=0;a<10;a++){for(;0===a&&t>n;)this.jk(e[i++],h),i===s&&e!==f.yk[11]&&(i=0,s=f.wk[11],e=f.yk[11],o=f.pk),t=i<s&&o?o[i]:-1e3;for(;3===a&&t>r;)this.jk(e[i++],h),i===s&&e!==f.yk[11]&&(i=0,s=f.wk[11],e=f.yk[11],o=f.pk),t=i<s&&o?o[i]:-1e3;for(;5===a&&t>l;)this.jk(e[i++],h),i===s&&e!==f.yk[11]&&(i=0,s=f.wk[11],e=f.yk[11],o=f.pk),t=i<s&&o?o[i]:-1e3;const c=f.wk[a],u=f.yk[a];for(let t=0;t<c;t++)this.jk(u[t],h)}for(;-1e3!==t;)this.jk(e[i++],h),i===s&&e!==f.yk[11]&&(i=0,e=f.yk[11],s=f.wk[11],o=f.pk),t=i<s&&o?o[i]:-1e3}};jk=(t,i=!1)=>{if(f.ek&&f.ek[t])return void this.qk(t,i);const s=this.wO[t],h=this.yO[t],e=this.mO[t];let r;if(f.hk&&(n.i.jO=f.hk[t]),this.Rk?n.i.alpha=this.Rk[t]:n.i.alpha=0,r=this.uO?3&this.uO[t]:0,i&&f.nk&&f.rk&&this.Ok&&this.Lk&&this.Sk)n.i.uS(f.nk[s],f.rk[s],f.nk[h],f.rk[h],n.i.palette[this.Ok[t]]),n.i.uS(f.nk[h],f.rk[h],f.nk[e],f.rk[e],n.i.palette[this.Lk[t]]),n.i.uS(f.nk[e],f.rk[e],f.nk[s],f.rk[s],n.i.palette[this.Sk[t]]);else if(0===r&&this.Ok&&this.Lk&&this.Sk&&f.nk&&f.rk)n.i.QO(f.nk[s],f.nk[h],f.nk[e],f.rk[s],f.rk[h],f.rk[e],this.Ok[t],this.Lk[t],this.Sk[t]);else if(1===r&&this.Ok&&f.nk&&f.rk)n.i.OS(f.nk[s],f.nk[h],f.nk[e],f.rk[s],f.rk[h],f.rk[e],n.i.palette[this.Ok[t]]);else if(2===r&&this.uO&&this.aC&&this.Ok&&this.Lk&&this.Sk&&f.nk&&f.rk&&f.ak&&f.ck&&f.fk){const i=this.uO[t]>>2,r=this.Mk[i],l=this.xk[i],o=this.Nk[i];n.i.hL(f.nk[s],f.nk[h],f.nk[e],f.rk[s],f.rk[h],f.rk[e],this.Ok[t],this.Lk[t],this.Sk[t],f.ak[r],f.ck[r],f.fk[r],f.ak[l],f.ak[o],f.ck[l],f.ck[o],f.fk[l],f.fk[o],this.aC[t])}else if(3===r&&this.uO&&this.aC&&this.Ok&&f.nk&&f.rk&&f.ak&&f.ck&&f.fk){const i=this.uO[t]>>2,r=this.Mk[i],l=this.xk[i],o=this.Nk[i];n.i.hL(f.nk[s],f.nk[h],f.nk[e],f.rk[s],f.rk[h],f.rk[e],this.Ok[t],this.Ok[t],this.Ok[t],f.ak[r],f.ck[r],f.fk[r],f.ak[l],f.ak[o],f.ck[l],f.ck[o],f.fk[l],f.fk[o],this.aC[t])}};qk=(t,i=!1)=>{let s=0;if(f.fk){const i=n.i.do,h=n.i.wo,e=this.wO[t],r=this.yO[t],l=this.mO[t],o=f.fk[e],a=f.fk[r],c=f.fk[l];if(o>=50&&f.nk&&f.rk&&this.Ok)f.Ik[s]=f.nk[e],f.gk[s]=f.rk[e],f._k[s++]=this.Ok[t];else if(f.ak&&f.ck&&this.Ok){const u=f.ak[e],d=f.ck[e],w=this.Ok[t];if(c>=50&&this.Sk){const e=(50-o)*n.i.yS[c-o];f.Ik[s]=i+((u+((f.ak[l]-u)*e>>16)<<9)/50|0),f.gk[s]=h+((d+((f.ck[l]-d)*e>>16)<<9)/50|0),f._k[s++]=w+((this.Sk[t]-w)*e>>16)}if(a>=50&&this.Lk){const e=(50-o)*n.i.yS[a-o];f.Ik[s]=i+((u+((f.ak[r]-u)*e>>16)<<9)/50|0),f.gk[s]=h+((d+((f.ck[r]-d)*e>>16)<<9)/50|0),f._k[s++]=w+((this.Lk[t]-w)*e>>16)}}if(a>=50&&f.nk&&f.rk&&this.Lk)f.Ik[s]=f.nk[r],f.gk[s]=f.rk[r],f._k[s++]=this.Lk[t];else if(f.ak&&f.ck&&this.Lk){const u=f.ak[r],d=f.ck[r],w=this.Lk[t];if(o>=50&&this.Ok){const r=(50-a)*n.i.yS[o-a];f.Ik[s]=i+((u+((f.ak[e]-u)*r>>16)<<9)/50|0),f.gk[s]=h+((d+((f.ck[e]-d)*r>>16)<<9)/50|0),f._k[s++]=w+((this.Ok[t]-w)*r>>16)}if(c>=50&&this.Sk){const e=(50-a)*n.i.yS[c-a];f.Ik[s]=i+((u+((f.ak[l]-u)*e>>16)<<9)/50|0),f.gk[s]=h+((d+((f.ck[l]-d)*e>>16)<<9)/50|0),f._k[s++]=w+((this.Sk[t]-w)*e>>16)}}if(c>=50&&f.nk&&f.rk&&this.Sk)f.Ik[s]=f.nk[l],f.gk[s]=f.rk[l],f._k[s++]=this.Sk[t];else if(f.ak&&f.ck&&this.Sk){const u=f.ak[l],d=f.ck[l],w=this.Sk[t];if(a>=50&&this.Lk){const e=(50-c)*n.i.yS[a-c];f.Ik[s]=i+((u+((f.ak[r]-u)*e>>16)<<9)/50|0),f.gk[s]=h+((d+((f.ck[r]-d)*e>>16)<<9)/50|0),f._k[s++]=w+((this.Lk[t]-w)*e>>16)}if(o>=50&&this.Ok){const r=(50-c)*n.i.yS[o-c];f.Ik[s]=i+((u+((f.ak[e]-u)*r>>16)<<9)/50|0),f.gk[s]=h+((d+((f.ck[e]-d)*r>>16)<<9)/50|0),f._k[s++]=w+((this.Ok[t]-w)*r>>16)}}}const h=f.Ik[0],r=f.Ik[1],l=f.Ik[2],o=f.gk[0],a=f.gk[1],c=f.gk[2];if(!((h-r)*(c-a)-(o-a)*(l-r)<=0))if(n.i.jO=!1,3===s){let s;if((h<0||r<0||l<0||h>e.i.qO||r>e.i.qO||l>e.i.qO)&&(n.i.jO=!0),s=this.uO?3&this.uO[t]:0,i)n.i.uS(h,r,o,a,f._k[0]),n.i.uS(r,l,a,c,f._k[1]),n.i.uS(l,h,c,o,f._k[2]);else if(0===s)n.i.QO(h,r,l,o,a,c,f._k[0],f._k[1],f._k[2]);else if(1===s&&this.Ok)n.i.OS(h,r,l,o,a,c,n.i.palette[this.Ok[t]]);else if(2===s&&this.uO&&this.aC&&f.ak&&f.ck&&f.fk){const i=this.uO[t]>>2,s=this.Mk[i],e=this.xk[i],u=this.Nk[i];n.i.hL(h,r,l,o,a,c,f._k[0],f._k[1],f._k[2],f.ak[s],f.ck[s],f.fk[s],f.ak[e],f.ak[u],f.ck[e],f.ck[u],f.fk[e],f.fk[u],this.aC[t])}else if(3===s&&this.uO&&this.aC&&this.Ok&&f.ak&&f.ck&&f.fk){const i=this.uO[t]>>2,s=this.Mk[i],e=this.xk[i],u=this.Nk[i];n.i.hL(h,r,l,o,a,c,this.Ok[t],this.Ok[t],this.Ok[t],f.ak[s],f.ck[s],f.fk[s],f.ak[e],f.ak[u],f.ck[e],f.ck[u],f.fk[e],f.fk[u],this.aC[t])}}else if(4===s){let s;if((h<0||r<0||l<0||h>e.i.qO||r>e.i.qO||l>e.i.qO||f.Ik[3]<0||f.Ik[3]>e.i.qO)&&(n.i.jO=!0),s=this.uO?3&this.uO[t]:0,i)n.i.uS(h,r,o,a,f._k[0]),n.i.uS(r,l,a,c,f._k[1]),n.i.uS(l,f.Ik[3],c,f.gk[3],f._k[2]),n.i.uS(f.Ik[3],h,f.gk[3],o,f._k[3]);else if(0===s)n.i.QO(h,r,l,o,a,c,f._k[0],f._k[1],f._k[2]),n.i.QO(h,l,f.Ik[3],o,c,f.gk[3],f._k[0],f._k[2],f._k[3]);else if(1===s){if(this.Ok){const i=n.i.palette[this.Ok[t]];n.i.OS(h,r,l,o,a,c,i),n.i.OS(h,l,f.Ik[3],o,c,f.gk[3],i)}}else if(2===s&&this.uO&&this.aC&&f.ak&&f.ck&&f.fk){const i=this.uO[t]>>2,s=this.Mk[i],e=this.xk[i],u=this.Nk[i];n.i.hL(h,r,l,o,a,c,f._k[0],f._k[1],f._k[2],f.ak[s],f.ck[s],f.fk[s],f.ak[e],f.ak[u],f.ck[e],f.ck[u],f.fk[e],f.fk[u],this.aC[t]),n.i.hL(h,l,f.Ik[3],o,c,f.gk[3],f._k[0],f._k[2],f._k[3],f.ak[s],f.ck[s],f.fk[s],f.ak[e],f.ak[u],f.ck[e],f.ck[u],f.fk[e],f.fk[u],this.aC[t])}else if(3===s&&this.uO&&this.aC&&this.Ok&&f.ak&&f.ck&&f.fk){const i=this.uO[t]>>2,s=this.Mk[i],e=this.xk[i],u=this.Nk[i];n.i.hL(h,r,l,o,a,c,this.Ok[t],this.Ok[t],this.Ok[t],f.ak[s],f.ck[s],f.fk[s],f.ak[e],f.ak[u],f.ck[e],f.ck[u],f.fk[e],f.fk[u],this.aC[t]),n.i.hL(h,l,f.Ik[3],o,c,f.gk[3],this.Ok[t],this.Ok[t],this.Ok[t],f.ak[s],f.ck[s],f.fk[s],f.ak[e],f.ak[u],f.ck[e],f.ck[u],f.fk[e],f.fk[u],this.aC[t])}}};Yk=(t,i,s,h,e)=>{if(!h)return;const r=h.length;if(0===e){let e=0;f.De=0,f.Ck=0,f.Fe=0;for(let t=0;t<r;t++){if(!this.rE)continue;const i=h[t];if(i<this.rE.length){const t=this.rE[i];if(t)for(let i=0;i<t.length;i++){const s=t[i];f.De+=this.tE[s],f.Ck+=this.sE[s],f.Fe+=this.iE[s],e++}}}e>0?(f.De=(f.De/e|0)+t,f.Ck=(f.Ck/e|0)+i,f.Fe=(f.Fe/e|0)+s):(f.De=t,f.Ck=i,f.Fe=s)}else if(1===e)for(let e=0;e<r;e++){const n=h[e];if(!this.rE||n>=this.rE.length)continue;const r=this.rE[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.tE[e]+=t,this.sE[e]+=i,this.iE[e]+=s}}else if(2===e)for(let e=0;e<r;e++){const r=h[e];if(!this.rE||r>=this.rE.length)continue;const l=this.rE[r];if(l)for(let h=0;h<l.length;h++){const e=l[h];this.tE[e]-=f.De,this.sE[e]-=f.Ck,this.iE[e]-=f.Fe;const r=8*(255&t),o=8*(255&i),a=8*(255&s);let c,u;if(0!==a){c=n.i.sin[a],u=n.i.cos[a];const t=this.sE[e]*c+this.tE[e]*u>>16;this.sE[e]=this.sE[e]*u-this.tE[e]*c>>16,this.tE[e]=t}if(0!==r){c=n.i.sin[r],u=n.i.cos[r];const t=this.sE[e]*u-this.iE[e]*c>>16;this.iE[e]=this.sE[e]*c+this.iE[e]*u>>16,this.sE[e]=t}if(0!==o){c=n.i.sin[o],u=n.i.cos[o];const t=this.iE[e]*c+this.tE[e]*u>>16;this.iE[e]=this.iE[e]*u-this.tE[e]*c>>16,this.tE[e]=t}this.tE[e]+=f.De,this.sE[e]+=f.Ck,this.iE[e]+=f.Fe}}else if(3===e)for(let e=0;e<r;e++){const n=h[e];if(!this.rE||n>=this.rE.length)continue;const r=this.rE[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.tE[e]-=f.De,this.sE[e]-=f.Ck,this.iE[e]-=f.Fe,this.tE[e]=this.tE[e]*t/128|0,this.sE[e]=this.sE[e]*i/128|0,this.iE[e]=this.iE[e]*s/128|0,this.tE[e]+=f.De,this.sE[e]+=f.Ck,this.iE[e]+=f.Fe}}else if(5===e&&this.nE&&this.Rk)for(let i=0;i<r;i++){const s=h[i];if(s>=this.nE.length)continue;const e=this.nE[s];if(e)for(let i=0;i<e.length;i++){const s=e[i];this.Rk[s]+=8*t,this.Rk[s]<0&&(this.Rk[s]=0),this.Rk[s]>255&&(this.Rk[s]=255)}}};Vk=()=>{this.aE=0,this.Mb=0,this.lO=0,this.oO=999999,this.aO=-999999,this.fO=-99999,this.cO=99999;for(let t=0;t<this.QC;t++){const i=this.tE[t],s=this.sE[t],h=this.iE[t];i<this.oO&&(this.oO=i),i>this.aO&&(this.aO=i),h<this.cO&&(this.cO=h),h>this.fO&&(this.fO=h),-s>this.aE&&(this.aE=-s),s>this.lO&&(this.lO=s);const e=i*i+h*h;e>this.Mb&&(this.Mb=e)}this.Mb=0|Math.sqrt(this.Mb),this.Dk=0|Math.sqrt(this.Mb*this.Mb+this.aE*this.aE),this.Pk=this.Dk+(0|Math.sqrt(this.Mb*this.Mb+this.lO*this.lO))};Xk=(t,i,s,h,e,n,r,l)=>!(i<s&&i<h&&i<e)&&(!(i>s&&i>h&&i>e)&&(!(t<n&&t<r&&t<l)&&(t<=n||t<=r||t<=l)));$k=t=>{if(!(f.nk&&f.rk&&this.Ok&&this.Lk&&this.Sk))return;const i=this.wO[t],s=this.yO[t],h=this.mO[t];n.i.uS(f.nk[i],f.rk[i],f.nk[s],f.rk[s],n.i.palette[1e3]),n.i.uS(f.nk[s],f.rk[s],f.nk[h],f.rk[h],n.i.palette[1e3]),n.i.uS(f.nk[h],f.rk[h],f.nk[i],f.rk[i],n.i.palette[1e3])}}},6542:(t,i,s)=>{s.d(i,{i:()=>l});var h=s(2991),e=s(2383),n=s(6327),r=s(5147);class l extends n.i{ya;width;height;Ra;Ma;Zl;Xf;constructor(t,i){super(),this.ya=new Int32Array(t*i),this.width=this.Zl=t,this.height=this.Xf=i,this.Ra=this.Ma=0}static Sa=async(t,i)=>{const s=t.read(i+'.dat');if(!s)throw new Error(`${i} jpeg not found!`);const h=await(0,r.v_)(s),e=new l(h.width,h.height),n=e.ya,o=h.data;for(let t=0;t<n.length;t++){const i=4*t;n[t]=o[i+3]<<24|o[i]<<16|o[i+1]<<8|o[i+2]<<0}return e};static ha=(t,i,s=0)=>{const h=new e.i(t.read(i+'.dat')),n=new e.i(t.read('index.dat'));n.Va=h.kw;const r=n.kw,o=n.kw,a=[],c=n.Nw-1;for(let t=0;t<c;t++)a[t+1]=n.OC,0===a[t+1]&&(a[t+1]=1);for(let t=0;t<s;t++)n.Va+=2,h.Va+=n.kw*n.kw,n.Va+=1;if(h.Va>h.data.length||n.Va>n.data.length)throw new Error;const f=n.Nw,u=n.Nw,d=n.kw,w=n.kw,y=new l(d,w);y.Ra=f,y.Ma=u,y.Zl=r,y.Xf=o;const m=n.Nw;if(0===m){const t=y.width*y.height;for(let i=0;i<t;i++)y.ya[i]=a[h.Nw]}else if(1===m){const t=y.width;for(let i=0;i<t;i++){const s=y.height;for(let e=0;e<s;e++)y.ya[i+e*t]=a[h.Nw]}}return y};bind=()=>{h.i.bind(this.ya,this.width,this.height)};draw=(t,i)=>{t|=0,i|=0;let s=(t+=this.Ra)+(i+=this.Ma)*h.i.vE,e=0,n=this.height,r=this.width,l=h.i.vE-r,o=0;if(i<h.i.top){const t=h.i.top-i;n-=t,i=h.i.top,e+=t*r,s+=t*h.i.vE}if(i+n>h.i.bottom&&(n-=i+n-h.i.bottom),t<h.i.left){const i=h.i.left-t;r-=i,t=h.i.left,e+=i,s+=i,o+=i,l+=i}if(t+r>h.i.right){const i=t+r-h.i.right;r-=i,o+=i,l+=i}r>0&&n>0&&this.Kk(r,n,this.ya,e,o,h.i.ya,s,l)};Wl=(t,i,s)=>{i|=0,s|=0;let e=(i+=this.Ra)+(s+=this.Ma)*h.i.vE,n=0,r=this.height,l=this.width,o=h.i.vE-l,a=0;if(s<h.i.top){const t=h.i.top-s;r-=t,s=h.i.top,n+=t*l,e+=t*h.i.vE}if(s+r>h.i.bottom&&(r-=s+r-h.i.bottom),i<h.i.left){const t=h.i.left-i;l-=t,i=h.i.left,n+=t,e+=t,a+=t,o+=t}if(i+l>h.i.right){const t=i+l-h.i.right;l-=t,a+=t,o+=t}l>0&&r>0&&this.Jk(l,r,this.ya,n,a,h.i.ya,e,o,t)};ca=(t,i)=>{t|=0,i|=0;let s=(t+=this.Ra)+(i+=this.Ma)*h.i.vE,e=0,n=this.height,r=this.width,l=h.i.vE-r,o=0;if(i<h.i.top){const t=h.i.top-i;n-=t,i=h.i.top,e+=t*r,s+=t*h.i.vE}if(i+n>h.i.bottom&&(n-=i+n-h.i.bottom),t<h.i.left){const i=h.i.left-t;r-=i,t=h.i.left,e+=i,s+=i,o+=i,l+=i}if(t+r>h.i.right){const i=t+r-h.i.right;r-=i,o+=i,l+=i}r>0&&n>0&&this.Qk(r,n,this.ya,e,o,h.i.ya,s,l)};oa=()=>{const t=this.ya,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}};aa=()=>{const t=this.ya,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,l=t[n];t[n]=t[r],t[r]=l}};translate=(t,i,s)=>{for(let h=0;h<this.ya.length;h++){const e=this.ya[h];if(0!==e){let n=e>>16&255;n+=t,n<1?n=1:n>255&&(n=255);let r=e>>8&255;r+=i,r<1?r=1:r>255&&(r=255);let l=255&e;l+=s,l<1?l=1:l>255&&(l=255),this.ya[h]=(n<<16)+(r<<8)+l}}};xE=(t,i,s,e)=>{t|=0,i|=0,s|=0,e|=0;try{const n=this.width;let r=0,l=0;const o=this.Zl,a=this.Xf,c=(o<<16)/s|0,f=(a<<16)/e|0;t+=(this.Ra*s+o-1)/o|0,i+=(this.Ma*e+a-1)/a|0,this.Ra*s%o!=0&&(r=(o-this.Ra*s%o<<16)/s|0),this.Ma*e%a!=0&&(l=(a-this.Ma*e%a<<16)/e|0),s=s*(this.width-(r>>16))/o|0,e=e*(this.height-(l>>16))/a|0;let u=t+i*h.i.vE,d=h.i.vE-s;if(i<h.i.top){const t=h.i.top-i;e-=t,i=0,u+=t*h.i.vE,l+=f*t}if(i+e>h.i.bottom&&(e-=i+e-h.i.bottom),t<h.i.left){const i=h.i.left-t;s-=i,t=0,u+=i,r+=c*i,d+=i}if(t+s>h.i.right){const i=t+s-h.i.right;s-=i,d+=i}this.scale(s,e,this.ya,r,l,h.i.ya,d,u,n,c,f)}catch(t){console.error('error in sprite clipping routine')}};Wf=(t,i,s,e,n,r,l,o,a,c)=>{t|=0,i|=0,s|=0,e|=0;try{const f=-s/2|0,u=-e/2|0,d=65536*Math.sin(a/326.11)|0,w=65536*Math.cos(a/326.11)|0,y=d*c>>8,m=w*c>>8;let p=(l<<16)+u*y+f*m,A=u*m-f*y+(o<<16),I=t+i*h.i.vE;for(let t=0;t<e;t++){const i=n[t];let s=I+i,e=p+m*i,l=A-y*i;for(let i=-r[t];i<0;i++)h.i.ya[s++]=this.ya[(e>>16)+(l>>16)*this.width],e+=m,l-=y;p+=y,A+=m,I+=h.i.vE}}catch(t){}};zf=(t,i,s)=>{t|=0,i|=0;let e=(t+=this.Ra)+(i+=this.Ma)*h.i.vE,n=0,r=this.height,l=this.width,o=h.i.vE-l,a=0;if(i<h.i.top){const t=h.i.top-i;r-=t,i=h.i.top,n+=t*l,e+=t*h.i.vE}if(i+r>h.i.bottom&&(r-=i+r-h.i.bottom),t<h.i.left){const i=h.i.left-t;l-=i,t=h.i.left,n+=i,e+=i,a+=i,o+=i}if(t+l>h.i.right){const i=t+l-h.i.right;l-=i,a+=i,o+=i}l>0&&r>0&&this.tR(l,r,this.ya,a,n,h.i.ya,e,o,s.ya)};scale=(t,i,s,h,e,n,r,l,o,a,c)=>{try{const f=h;for(let u=-i;u<0;u++){const i=(e>>16)*o;for(let e=-t;e<0;e++){const t=s[(h>>16)+i];0===t?l++:n[l++]=t,h+=a}e+=c,h=f,l+=r}}catch(t){console.error('error in plot_scale')}};Qk=(t,i,s,h,e,n,r,l)=>{const o=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=o;t<0;t++)n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++];for(let i=t;i<0;i++)n[r++]=s[h++];r+=l,h+=e}};Jk=(t,i,s,h,e,n,r,l,o)=>{const a=256-o;for(let c=-i;c<0;c++){for(let i=-t;i<0;i++){const t=s[h++];if(0===t)r++;else{const i=n[r];n[r++]=((16711935&t)*o+(16711935&i)*a&4278255360)+((65280&t)*o+(65280&i)*a&16711680)>>8}}r+=l,h+=e}};Kk=(t,i,s,h,e,n,r,l)=>{const o=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=o;t<0;t++){let t=s[h++];0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=t}r+=l,h+=e}};tR=(t,i,s,h,e,n,r,l,o)=>{const a=-(t>>2);t=-(3&t);for(let c=-i;c<0;c++){for(let t=a;t<0;t++){let t=s[e++];0!==t&&0===o[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===o[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===o[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===o[r]?n[r++]=t:r++}for(let i=t;i<0;i++){const t=s[e++];0!==t&&0===o[r]?n[r++]=t:r++}r+=l,e+=h}}}},664:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(2991),e=s(2383),n=s(6327);class r extends n.i{ya;width;height;Ra;Ma;Zl;Xf;palette;constructor(t,i,s){super(),this.ya=new Int8Array(t*i),this.width=this.Zl=t,this.height=this.Xf=i,this.Ra=this.Ma=0,this.palette=s}static ha=(t,i,s=0)=>{const h=new e.i(t.read(i+'.dat')),n=new e.i(t.read('index.dat'));n.Va=h.kw;const l=n.kw,o=n.kw,a=n.Nw,c=new Int32Array(a);for(let t=1;t<a;t++)c[t]=n.OC,0===c[t]&&(c[t]=1);for(let t=0;t<s;t++)n.Va+=2,h.Va+=n.kw*n.kw,n.Va+=1;if(h.Va>h.data.length||n.Va>n.data.length)throw new Error;const f=n.Nw,u=n.Nw,d=n.kw,w=n.kw,y=new r(d,w,c);y.Ra=f,y.Ma=u,y.Zl=l,y.Xf=o;const m=y.ya,p=n.Nw;if(0===p){const t=y.width*y.height;for(let i=0;i<t;i++)m[i]=h.Mw}else if(1===p){const t=y.width,i=y.height;for(let s=0;s<t;s++)for(let e=0;e<i;e++)m[s+e*t]=h.Mw}return y};draw=(t,i)=>{t|=0,i|=0;let s=(t+=this.Ra)+(i+=this.Ma)*h.i.vE,e=0,n=this.height,r=this.width,l=h.i.vE-r,o=0;if(i<h.i.top){const t=h.i.top-i;n-=t,i=h.i.top,e+=t*r,s+=t*h.i.vE}if(i+n>h.i.bottom&&(n-=i+n-h.i.bottom),t<h.i.left){const i=h.i.left-t;r-=i,t=h.i.left,e+=i,s+=i,o+=i,l+=i}if(t+r>h.i.right){const i=t+r-h.i.right;r-=i,o+=i,l+=i}r>0&&n>0&&this.iR(r,n,this.ya,e,o,h.i.ya,s,l)};oa=()=>{const t=this.ya,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}};aa=()=>{const t=this.ya,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,l=t[n];t[n]=t[r],t[r]=l}};translate=(t,i,s)=>{for(let h=0;h<this.palette.length;h++){let e=this.palette[h]>>16&255;e+=t,e<0?e=0:e>255&&(e=255);let n=this.palette[h]>>8&255;n+=i,n<0?n=0:n>255&&(n=255);let r=255&this.palette[h];r+=s,r<0?r=0:r>255&&(r=255),this.palette[h]=(e<<16)+(n<<8)+r}};TS=()=>{this.Zl|=0,this.Xf|=0,this.Zl/=2,this.Xf/=2,this.Zl|=0,this.Xf|=0;const t=new Int8Array(this.Zl*this.Xf);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[(h+this.Ra>>1)+(s+this.Ma>>1)*this.Zl]=this.ya[i++];this.ya=t,this.width=this.Zl,this.height=this.Xf,this.Ra=0,this.Ma=0};xE=()=>{if(this.width===this.Zl&&this.height===this.Xf)return;const t=new Int8Array(this.Zl*this.Xf);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[h+this.Ra+(s+this.Ma)*this.Zl]=this.ya[i++];this.ya=t,this.width=this.Zl,this.height=this.Xf,this.Ra=0,this.Ma=0};iR=(t,i,s,h,e,n,r,l)=>{const o=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=o;t<0;t++){let t=s[h++];0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t]}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=this.palette[255&t]}r+=l,h+=e}}}},4628:(t,i,s)=>{s.d(i,{i:()=>o});var h=s(2991),e=s(2383),n=s(6327);class r{seed;constructor(t){this.seed=(t^BigInt(25214903917))&BigInt((1n<<48n)-1n)}sR=t=>{this.seed=(t^BigInt(25214903917))&BigInt((1n<<48n)-1n)};Lw=()=>this.next(32);next=t=>(this.seed=this.seed*BigInt(25214903917)+BigInt(11)&BigInt((1n<<48n)-1n),Number(this.seed)>>>48-t)}var l=s(312);class o extends n.i{static Ha='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!"£$%^&*()-_=+[{]};:\'@#~,<.>/?\\| ';static hR=[];static{for(let t=0;t<256;t++){let i=o.Ha.indexOf(String.fromCharCode(t));-1===i&&(i=74),o.hR[t]=i}}eR=[];nR=new Int32Array(94);rR=new Int32Array(94);lR=new Int32Array(94);oR=new Int32Array(94);aR=new Int32Array(95);cR=new Int32Array(256);random=new r(BigInt(Date.now()));height=0;static ha=(t,i)=>{const s=new e.i(t.read(i+'.dat')),h=new e.i(t.read('index.dat'));h.Va=s.kw+4;const n=h.Nw;n>0&&(h.Va+=3*(n-1));const r=new o;for(let t=0;t<94;t++){r.lR[t]=h.Nw,r.oR[t]=h.Nw;const i=r.nR[t]=h.kw,e=r.rR[t]=h.kw,n=h.Nw,l=i*e;if(r.eR[t]=new Int8Array(l),0===n)for(let h=0;h<i*e;h++)r.eR[t][h]=s.Mw;else if(1===n)for(let h=0;h<i;h++)for(let n=0;n<e;n++)r.eR[t][h+n*i]=s.Mw;e>r.height&&(r.height=e),r.lR[t]=1,r.aR[t]=i+2;{let s=0;for(let h=e/7|0;h<e;h++)s+=r.eR[t][h*i];s<=(e/7|0)&&(r.aR[t]--,r.lR[t]=0)}{let s=0;for(let h=e/7|0;h<e;h++)s+=r.eR[t][i+h*i-1];s<=(e/7|0)&&r.aR[t]--}}r.aR[94]=r.aR[8];for(let t=0;t<256;t++)r.cR[t]=r.aR[o.hR[t]];return r};Yl=(t,i,s,h)=>{if(!s)return;t|=0,i|=0;const e=s.length;i-=this.height;for(let n=0;n<e;n++){const e=o.hR[s.charCodeAt(n)];94!==e&&this.fR(this.eR[e],t+this.lR[e],i+this.oR[e],this.nR[e],this.rR[e],h),t+=this.aR[e]}};oo=(t,i,s,h,e)=>{t|=0,i|=0;const n=s.length;i-=this.height;for(let r=0;r<n;r++)if('@'===s.charAt(r)&&r+4<n&&'@'===s.charAt(r+4))h=this.uR(s.substring(r+1,r+4)),r+=4;else{const n=o.hR[s.charCodeAt(r)];94!==n&&(e&&this.fR(this.eR[n],t+this.lR[n]+1,i+this.oR[n]+1,this.nR[n],this.rR[n],l.i.zl),this.fR(this.eR[n],t+this.lR[n],i+this.oR[n],this.nR[n],this.rR[n],h)),t+=this.aR[n]}};pf=t=>{if(!t)return 0;const i=t.length;let s=0;for(let h=0;h<i;h++)'@'===t.charAt(h)&&h+4<i&&'@'===t.charAt(h+4)?h+=4:s+=this.cR[t.charCodeAt(h)];return s};ro=(t,i,s,h,e)=>{t|=0,i|=0,this.oo(t-this.pf(s)/2,i,s,h,e)};Ta=(t,i,s,h)=>{s&&(t|=0,i|=0,this.Yl(t-this.pf(s)/2,i,s,h))};yu=(t,i,s,h,e,n)=>{t|=0,i|=0,this.random.sR(BigInt(n));const r=192+(31&this.random.Lw()),a=i-this.height;for(let i=0;i<s.length;i++)if('@'===s.charAt(i)&&i+4<s.length&&'@'===s.charAt(i+4))h=this.uR(s.substring(i+1,i+4)),i+=4;else{const n=o.hR[s.charCodeAt(i)];94!==n&&(e&&this.dR(t+this.lR[n]+1,a+this.oR[n]+1,this.nR[n],this.rR[n],l.i.zl,192,this.eR[n]),this.dR(t+this.lR[n],a+this.oR[n],this.nR[n],this.rR[n],h,r,this.eR[n])),t+=this.aR[n],0==(3&this.random.Lw())&&t++}};Sf=(t,i,s,h,e=!0)=>{t|=0,i|=0,e&&this.Yl(t-this.pf(s)+1,i+1,s,l.i.zl),this.Yl(t-this.pf(s),i,s,h)};Of=(t,i,s,h,e)=>{if(!s)return;t|=0,i|=0,t-=this.pf(s)/2|0;const n=i-this.height;for(let i=0;i<s.length;i++){const r=o.hR[s.charCodeAt(i)];94!=r&&this.fR(this.eR[r],t+this.lR[r],n+this.oR[r]+(5*Math.sin(i/2+e/5)|0),this.nR[r],this.rR[r],h),t+=this.aR[r]}};fR=(t,i,s,e,n,r)=>{e|=0,n|=0;let l=(i|=0)+(s|=0)*h.i.vE,o=h.i.vE-e,a=0,c=0;if(s<h.i.top){const t=h.i.top-s;n-=t,s=h.i.top,c+=t*e,l+=t*h.i.vE}if(s+n>=h.i.bottom&&(n-=s+n+1-h.i.bottom),i<h.i.left){const t=h.i.left-i;e-=t,i=h.i.left,c+=t,l+=t,a+=t,o+=t}if(i+e>=h.i.right){const t=i+e+1-h.i.right;e-=t,a+=t,o+=t}e>0&&n>0&&this.wR(e,n,t,c,a,h.i.ya,l,o,r)};dR=(t,i,s,e,n,r,l)=>{s|=0,e|=0;let o=(t|=0)+(i|=0)*h.i.vE,a=h.i.vE-s,c=0,f=0;if(i<h.i.top){const t=h.i.top-i;e-=t,i=h.i.top,f+=t*s,o+=t*h.i.vE}if(i+e>=h.i.bottom&&(e-=i+e+1-h.i.bottom),t<h.i.left){const i=h.i.left-t;s-=i,t=h.i.left,f+=i,o+=i,c+=i,a+=i}if(t+s>=h.i.right){const i=t+s+1-h.i.right;s-=i,c+=i,a+=i}s>0&&e>0&&this.yR(s,e,h.i.ya,o,a,l,f,c,n,r)};wR=(t,i,s,h,e,n,r,l,o)=>{const a=-((t|=0)>>2);t=-(3&t);for(let c=-(i|=0);c<0;c++){for(let t=a;t<0;t++)0===s[h++]?r++:n[r++]=o,0===s[h++]?r++:n[r++]=o,0===s[h++]?r++:n[r++]=o,0===s[h++]?r++:n[r++]=o;for(let i=t;i<0;i++)0===s[h++]?r++:n[r++]=o;r+=l,h+=e}};yR=(t,i,s,h,e,n,r,l,o,a)=>{t|=0;const c=((16711935&o)*a&4278255360)+((65280&o)*a&16711680)>>8,f=256-a;for(let o=-(i|=0);o<0;o++){for(let i=-t;i<0;i++)if(0===n[r++])h++;else{const t=s[h];s[h++]=(((16711935&t)*f&4278255360)+((65280&t)*f&16711680)>>8)+c}h+=e,r+=l}};uR=t=>'red'===t?l.i.RED:'gre'===t?l.i.GREEN:'blu'===t?l.i.BLUE:'yel'===t?l.i.Xl:'cya'===t?l.i.Na:'mag'===t?l.i.Pa:'whi'===t?l.i.Ol:'bla'===t?l.i.zl:'lre'===t?l.i.hS:'dre'===t?l.i.Bf:'dbl'===t?l.i.Uf:'or1'===t?l.i.eS:'or2'===t?l.i.nS:'or3'===t?l.i.rS:'gr1'===t?l.i.lS:'gr2'===t?l.i.oS:'gr3'===t?l.i.aS:l.i.zl;split(t,i){if(0===t.length)return[t];const s=[];for(;t.length>0;){if(this.pf(t)<=i&&-1===t.indexOf('|')){s.push(t);break}let h=t.length;for(let s=0;s<t.length;s++)if(' '===t[s]){if(this.pf(t.substring(0,s))>i)break;h=s}else if('|'===t[s]){h=s;break}s.push(t.substring(0,h)),t=t.substring(h+1)}return s}}},651:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(2991),e=s(6121);class n{mR;width;height;pR;ya;constructor(t,i,s=e.il){this.pR=s,this.mR=this.pR.getImageData(0,0,t,i),this.ya=new Int32Array(t*i),this.width=t,this.height=i,this.bind()}clear=()=>{this.ya.fill(0)};bind=()=>{h.i.bind(this.ya,this.width,this.height)};draw=(t,i)=>{this.#t(),this.pR.putImageData(this.mR,t,i)};#t=()=>{const t=this.mR.data;for(let i=0;i<this.ya.length;i++){const s=this.ya[i],h=4*i;t[h]=s>>16&255,t[h+1]=s>>8&255,t[h+2]=s>>0&255,t[h+3]=255}}}},2157:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(2383),e=s(9345);class n{static Hr=[];static wa=t=>{const i=new h.i(t.read('base_head.dat')),s=new h.i(t.read('base_type.dat')),r=new h.i(t.read('base_label.dat')),l=i.kw;i.Va+=2;for(let t=0;t<l;t++){const t=i.kw,h=i.Nw,l=new Uint8Array(h),o=new e.to(h,null);for(let t=0;t<h;t++){l[t]=s.Nw;const i=r.Nw,h=new Uint8Array(i);for(let t=0;t<i;t++)h[t]=r.Nw;o[t]=h}this.Hr[t]=new n,this.Hr[t].length=h,this.Hr[t].types=l,this.Hr[t].labels=o}};length=0;types=null;labels=null}},8762:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(2157),e=s(2383);class n{static Hr=[];static wa=t=>{const i=new e.i(t.read('frame_head.dat')),s=new e.i(t.read('frame_tran1.dat')),r=new e.i(t.read('frame_tran2.dat')),l=new e.i(t.read('frame_del.dat')),o=i.kw;i.Va+=2;const a=new Int32Array(500),c=new Int32Array(500),f=new Int32Array(500),u=new Int32Array(500);for(let t=0;t<o;t++){const t=i.kw,e=this.Hr[t]=new n;e.delay=l.Nw;const o=i.kw,d=h.i.Hr[o];e.Wk=d;const w=i.Nw;let y=-1,m=0;for(let t=0;t<w;t++){if(!d.types)throw new Error('SeqBase not loaded!!!');const i=s.Nw;if(i>0){if(0!==d.types[t])for(let i=t-1;i>y;i--)if(0===d.types[i]){a[m]=i,c[m]=0,f[m]=0,u[m]=0,m++;break}a[m]=t;let s=0;3===d.types[a[m]]&&(s=128),c[m]=0==(1&i)?s:r.Tk,f[m]=0==(2&i)?s:r.Tk,u[m]=0==(4&i)?s:r.Tk,y=t,m++}}e.length=m,e.Zk=new Int32Array(m),e.x=new Int32Array(m),e.y=new Int32Array(m),e.z=new Int32Array(m);for(let t=0;t<m;t++)e.Zk[t]=a[t],e.x[t]=c[t],e.y[t]=f[t],e.z[t]=u[t]}};delay=0;Wk=null;length=0;Zk=null;x=null;y=null;z=null}},9995:(t,i,s)=>{var h;s.d(i,{i:()=>e}),function(t){t[t.Gw=150]="REBUILD_GETMAPS",t[t.Rc=70]="IDLE_TIMER",t[t.xc=108]="NO_TIMEOUT",t[t.hc=81]="EVENT_TRACKING",t[t.cc=189]="EVENT_CAMERA_POSITION",t[t.wd=7]="ANTICHEAT_OPLOGIC1",t[t.Ru=88]="ANTICHEAT_OPLOGIC2",t[t.Ou=30]="ANTICHEAT_OPLOGIC3",t[t.Pu=176]="ANTICHEAT_OPLOGIC4",t[t.Eu=220]="ANTICHEAT_OPLOGIC5",t[t.pd=66]="ANTICHEAT_OPLOGIC6",t[t.ld=17]="ANTICHEAT_OPLOGIC7",t[t.Yu=2]="ANTICHEAT_OPLOGIC8",t[t.fd=238]="ANTICHEAT_OPLOGIC9",t[t.Xd=233]="ANTICHEAT_CYCLELOGIC1",t[t.Xc=146]="ANTICHEAT_CYCLELOGIC2",t[t.Ac=215]="ANTICHEAT_CYCLELOGIC3",t[t.Mc=236]="ANTICHEAT_CYCLELOGIC4",t[t.UA=85]="ANTICHEAT_CYCLELOGIC5",t[t.oA=219]="ANTICHEAT_CYCLELOGIC6",t[t.qu=140]="OPOBJ1",t[t.Qu=40]="OPOBJ2",t[t.Ju=200]="OPOBJ3",t[t.$u=178]="OPOBJ4",t[t.Ku=247]="OPOBJ5",t[t.md=138]="OPOBJT",t[t.Fu=239]="OPOBJU",t[t.Nu=194]="OPNPC1",t[t.ku=8]="OPNPC2",t[t.Mu=27]="OPNPC3",t[t.xu=113]="OPNPC4",t[t.Du=100]="OPNPC5",t[t.Xu=134]="OPNPCT",t[t.Zu=202]="OPNPCU",t[t.Bu=245]="OPLOC1",t[t.td=172]="OPLOC2",t[t.Id=96]="OPLOC3",t[t.yd=97]="OPLOC4",t[t.Ad=116]="OPLOC5",t[t.ju=9]="OPLOCT",t[t.Cu=75]="OPLOCU",t[t.Iu=164]="OPPLAYER1",t[t.Vu=53]="OPPLAYER2",t[t.zu=185]="OPPLAYER3",t[t.Au=206]="OPPLAYER4",t[t.Od=177]="OPPLAYERT",t[t.Cd=248]="OPPLAYERU",t[t.Lu=195]="OPHELD1",t[t.Su=71]="OPHELD2",t[t.vu=133]="OPHELD3",t[t.Tu=157]="OPHELD4",t[t.bu=211]="OPHELD5",t[t.Hu=48]="OPHELDT",t[t.Gu=130]="OPHELDU",t[t.ad=31]="INV_BUTTON1",t[t.dd=59]="INV_BUTTON2",t[t.rd=212]="INV_BUTTON3",t[t.ud=38]="INV_BUTTON4",t[t.od=6]="INV_BUTTON5",t[t.nd=155]="IF_BUTTON",t[t.Wu=235]="RESUME_PAUSEBUTTON",t[t.bw=231]="CLOSE_MODAL",t[t.Jd=237]="RESUME_P_COUNTDIALOG",t[t.Bc=175]="TUTORIAL_CLICKSIDE",t[t.mp=93]="MOVE_OPCLICK",t[t.Hd=190]="BUG_REPORT",t[t.yp=165]="MOVE_MINIMAPCLICK",t[t.dc=159]="INV_BUTTOND",t[t.ew=171]="IGNORELIST_DEL",t[t.hw=79]="IGNORELIST_ADD",t[t.Ud=52]="IF_PLAYERDESIGN",t[t.Kd=244]="CHAT_SETMODE",t[t.jd=148]="MESSAGE_PRIVATE",t[t.sw=11]="FRIENDLIST_DEL",t[t.iw=118]="FRIENDLIST_ADD",t[t.Qd=4]="CLIENT_CHEAT",t[t.tw=158]="MESSAGE_PUBLIC",t[t.wp=181]="MOVE_GAMECLICK"}(h||(h={}));const e=h},1812:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(1519);class e{AR;queue=[];buffer=void 0;IR=0;offset=0;static Za=async t=>await new Promise(((i,s)=>{const h=t.host.startsWith('https'),e=h?'wss':'ws',n=t.host.substring(t.host.indexOf('//')+2),r=h?t.port+2:t.port+1,l=new WebSocket(`${e}://${n}:${r}`,'binary');l.binaryType='arraybuffer',l.addEventListener('open',(()=>{console.log('connection open!'),i(l)})),l.addEventListener('error',(()=>{console.log('connection error!'),s(l)}))}));constructor(t){t.onmessage=this.onmessage,t.onclose=this.onclose,t.onerror=this.onerror,this.AR=t}get host(){return this.AR.url.split('/')[2]}get port(){return parseInt(this.AR.url.split(':')[2],10)}get available(){return this.IR}write=(t,i,s)=>{if(this.AR.readyState!==WebSocket.OPEN)throw new Error('Socket is not able to write!');const e=new Uint8Array(i);(0,h.xa)(t,s,e,0,i),this.AR.send(e)};read=async()=>{if(this.AR.readyState!==WebSocket.OPEN&&this.IR<1)throw new Error('Socket is not able to read!');if(this.IR<1)return await(0,h.qr)(1),this.read();if(this.buffer||(this.buffer=this.queue.shift(),this.buffer&&(this.offset=0)),!this.buffer)return this.read();const t=255&this.buffer[this.offset];return this.offset++,this.IR--,this.offset===this.buffer.length&&(this.buffer=void 0),t};Ya=async(t,i,s)=>{if(this.AR.readyState!==WebSocket.OPEN&&this.IR<1)throw new Error('Socket is not able to read!');if(!(s<1)){if(this.IR<1)return await(0,h.qr)(1),this.Ya(t,i,s);for(let h=0;h<s;h++)t[i+h]=await this.read()}};close=()=>{this.AR.readyState===WebSocket.OPEN&&this.AR.close()};clear=()=>{this.AR.readyState===WebSocket.OPEN&&this.AR.close(),this.queue.length=0,this.IR=0,this.buffer=void 0,this.offset=0};onmessage=t=>{const i=new Int8Array(t.data);this.IR+=i.length,this.queue.push(i)};onclose=t=>{console.log('connection close!')};onerror=t=>{console.log('connection error!')}}},8432:(t,i,s)=>{s.d(i,{i:()=>h});class h{db;constructor(t){t.onerror=this.onerror,t.onclose=this.onclose,this.db=t}static openDatabase=async()=>await new Promise(((t,i)=>{const s=indexedDB.open('lostcity',1);s.onsuccess=i=>{const s=i.target;console.log('database success!'),t(s.result)},s.onupgradeneeded=t=>{t.target.result.createObjectStore('cache')},s.onerror=t=>{const s=t.target;console.error('database error!: ',s.error),i(s.result)}}));Vr=async t=>await new Promise((i=>{const s=this.db.transaction('cache','readonly').objectStore('cache').get(t);s.onsuccess=()=>{i(s.result)},s.onerror=t=>{i(void 0)}}));$r=async(t,i)=>await new Promise(((s,h)=>{const e=this.db.transaction('cache','readwrite').objectStore('cache').put(i,t);e.onsuccess=()=>{s()},e.onerror=t=>{h()}}));onclose=t=>{console.log('database close!')};onerror=t=>{console.log('database error!')};gR=t=>{const i=t.trim();let s=0;for(let t=0;t<i.length&&t<12;t++){const h=i.charAt(t);s*=37,h>='A'&&h<='Z'?s+=h.charCodeAt(0)+1-65:h>='a'&&h<='z'?s+=h.charCodeAt(0)+1-97:h>='0'&&h<='9'&&(s+=h.charCodeAt(0)+27-48)}return s}}},7576:(t,i,s)=>{s.d(i,{i:()=>h});class h{count=0;_R=new Int32Array(256);CR=new Int32Array(256);a=0;b=0;c=0;constructor(t){for(let i=0;i<t.length;i++)this._R[i]=t[i];this.init()}get Lw(){return 0==this.count--&&(this.ER(),this.count=255),this._R[this.count]}init=()=>{let t=2654435769,i=2654435769,s=2654435769,h=2654435769,e=2654435769,n=2654435769,r=2654435769,l=2654435769;for(let o=0;o<4;o++)t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,l+=e,n+=r,n^=r>>>4,t+=n,r+=l,r^=l<<8,i+=r,l+=t,l^=t>>>9,s+=l,t+=i;for(let o=0;o<256;o+=8)t+=this._R[o],i+=this._R[o+1],s+=this._R[o+2],h+=this._R[o+3],e+=this._R[o+4],n+=this._R[o+5],r+=this._R[o+6],l+=this._R[o+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,l+=e,n+=r,n^=r>>>4,t+=n,r+=l,r^=l<<8,i+=r,l+=t,l^=t>>>9,s+=l,t+=i,this.CR[o]=t,this.CR[o+1]=i,this.CR[o+2]=s,this.CR[o+3]=h,this.CR[o+4]=e,this.CR[o+5]=n,this.CR[o+6]=r,this.CR[o+7]=l;for(let o=0;o<256;o+=8)t+=this.CR[o],i+=this.CR[o+1],s+=this.CR[o+2],h+=this.CR[o+3],e+=this.CR[o+4],n+=this.CR[o+5],r+=this.CR[o+6],l+=this.CR[o+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,l+=e,n+=r,n^=r>>>4,t+=n,r+=l,r^=l<<8,i+=r,l+=t,l^=t>>>9,s+=l,t+=i,this.CR[o]=t,this.CR[o+1]=i,this.CR[o+2]=s,this.CR[o+3]=h,this.CR[o+4]=e,this.CR[o+5]=n,this.CR[o+6]=r,this.CR[o+7]=l;this.ER(),this.count=256};ER=()=>{this.c++,this.b+=this.c;for(let t=0;t<256;t++){const i=this.CR[t],s=3&t;let h;0===s?this.a^=this.a<<13:1===s?this.a^=this.a>>>6:2===s?this.a^=this.a<<2:3===s&&(this.a^=this.a>>>16),this.a+=this.CR[t+128&255],this.CR[t]=h=this.CR[i>>>2&255]+this.a+this.b,this._R[t]=this.b=this.CR[h>>>8>>>2&255]+i}}}},2028:(t,i,s)=>{s.d(i,{i:()=>n});var h=s(2383),e=s(5810);class n{static gR=t=>{let i=0;t=t.toUpperCase();for(let s=0;s<t.length;s++)i=61*i+t.charCodeAt(s)-32|0;return i};buffer;TR;bR;vR;OR;LR;SR;kR=[];constructor(t){t instanceof Uint8Array&&(t=new Int8Array(t));let i=new h.i(new Uint8Array(t));const s=i.OC,n=i.OC;s===n?(this.buffer=t,this.TR=!1):(this.buffer=e.i.read(s,t,n,6),i=new h.i(new Uint8Array(this.buffer)),this.TR=!0),this.bR=i.kw,this.vR=[],this.OR=[],this.LR=[],this.SR=[];let r=i.Va+10*this.bR;for(let t=0;t<this.bR;t++)this.vR.push(i.Jr),this.OR.push(i.OC),this.LR.push(i.OC),this.SR.push(r),r+=this.LR[t]}read=t=>{const i=n.gR(t),s=this.vR.indexOf(i);return-1===s?null:this.RR(s)};RR=t=>{if(t<0||t>=this.bR)return null;if(this.kR[t])return this.kR[t];const i=this.SR[t],s=i+this.LR[t];if(this.TR){const h=Uint8Array.from(this.buffer.subarray(i,i+s));return this.kR[t]=h,h}{const i=Uint8Array.from(e.i.read(this.OR[t],this.buffer,this.LR[t],this.SR[t]));return this.kR[t]=i,i}}}},2383:(t,i,s)=>{s.d(i,{i:()=>r});var h=s(1519),e=s(9080),n=s(6327);class r extends n.i{static MR=3988292384;static xR=new Int32Array(256);static NR=new Uint32Array(33);static PR=new e.i;static DR=new e.i;static FR=new e.i;static UR=0;static BR=0;static GR=0;static{for(let t=0;t<32;t++)r.NR[t]=(1<<t)-1;r.NR[32]=4294967295;for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)1==(1&i)?i=i>>>1^r.MR:i>>>=1;r.xR[t]=i}}static zr=t=>{let i=4294967295;for(let s=0;s<t.length;s++)i=i>>>8^r.xR[255&(i^t[s])];return~i};data;Va;Ep=0;random=null;constructor(t){if(!t)throw new Error('Input src packet array was null!');super(),t instanceof Int8Array?this.data=new Uint8Array(t):this.data=t,this.Va=0}get length(){return this.data.length}get available(){return this.data.length-this.Va}static tt=t=>{let i=null;return 0===t&&r.UR>0?(r.UR--,i=r.PR.RO()):1===t&&r.BR>0?(r.BR--,i=r.DR.RO()):2===t&&r.GR>0&&(r.GR--,i=r.FR.RO()),i?(i.Va=0,i):new r(0===t?new Uint8Array(100):1===t?new Uint8Array(5e3):new Uint8Array(3e4))};release=()=>{this.Va=0,100===this.data.length&&r.UR<1e3?(r.PR.$A(this),r.UR++):5e3===this.data.length&&r.BR<250?(r.DR.$A(this),r.BR++):3e4===this.data.length&&r.GR<50&&(r.FR.$A(this),r.GR++)};get Nw(){return this.data[this.Va++]}get Mw(){return this.data[this.Va++]<<24>>24}get kw(){return this.data[this.Va++]<<8|this.data[this.Va++]}get By(){let t=this.data[this.Va++]<<8|this.data[this.Va++];return t>32767&&(t-=65536),t}get OC(){return this.data[this.Va++]<<16|this.data[this.Va++]<<8|this.data[this.Va++]}get Jr(){return this.data[this.Va++]<<24|this.data[this.Va++]<<16|this.data[this.Va++]<<8|this.data[this.Va++]}get za(){return(0xffffffffn&BigInt(this.Jr))<<32n|0xffffffffn&BigInt(this.Jr)}get Tk(){return this.data[this.Va]<128?this.Nw-64:this.kw-49152}get Rb(){return this.data[this.Va]<128?this.Nw:this.kw-32768}get zw(){let t='';for(;10!==this.data[this.Va]&&this.Va<this.data.length;)t+=String.fromCharCode(this.data[this.Va++]);return this.Va++,t}Ay=(t,i,s)=>{for(let h=i;h<i+t;h++)s[h]=this.data[this.Va++]};sc=t=>{this.data[this.Va++]=t+(this.random?.Lw??0)&255};p1=t=>{this.data[this.Va++]=t};p2=t=>{this.data[this.Va++]=t>>>8,this.data[this.Va++]=t};HR=t=>{this.data[this.Va++]=t,this.data[this.Va++]=t>>>8};p3=t=>{this.data[this.Va++]=t>>>16,this.data[this.Va++]=t>>>8,this.data[this.Va++]=t};p4=t=>{this.data[this.Va++]=t>>>24,this.data[this.Va++]=t>>>16,this.data[this.Va++]=t>>>8,this.data[this.Va++]=t};WR=t=>{this.data[this.Va++]=t,this.data[this.Va++]=t>>>8,this.data[this.Va++]=t>>>16,this.data[this.Va++]=t>>>24};Wd=t=>{this.p4(Number(t>>32n)),this.p4(Number(0xffffffffn&t))};Xa=t=>{for(let i=0;i<t.length;i++)this.data[this.Va++]=t.charCodeAt(i);this.data[this.Va++]=10};qa=(t,i,s)=>{for(let h=s;h<s+i;h++)this.data[this.Va++]=t[h]};jc=t=>{this.data[this.Va-t-1]=t};_p=()=>{this.Ep=8*this.Va};Tp=()=>{this.Va=(this.Ep+7)/8|0};Cp=t=>{let i=this.Ep>>>3,s=8-(7&this.Ep),h=0;for(this.Ep+=t;t>s;s=8)h+=(this.data[i++]&r.NR[s])<<t-s,t-=s;return h+=t===s?this.data[i]&r.NR[s]:this.data[i]>>>s-t&r.NR[t],h};ja=(t,i)=>{const s=new Uint8Array(this.Va);(0,h.xa)(this.data,0,s,0,this.Va);const e=(0,h.ZR)(s),n=(0,h.YR)(e,i,t),r=(0,h.VR)(n);this.Va=0,this.p1(r.length),this.qa(r,r.length,0)}}},741:(t,i,s)=>{s.d(i,{i:()=>h});class h{static zR=[95,218,67,50,253,222,194,60,101,128,8,251,92,111,24,33,223,66,232,59,227,113,153,105,126,98,167,102,177,238,62,190,147,23,150,151,156,144,193,155,81,0,198,22,137,210,179,16,168,170,32,181,248,141,58,87,208,106,180,191,221,241,40,176,196,154,65,145,230,78,30,161,188,41,14,129,18,199,47,247,225,34,51,10,159,75,12,56,61,31,39,91,46,242,134,5,122,123,209,228,104,195,21,3,11,44,107,172,6,186,110,215,205,103,27,185,124,77,252,117,86,115,127,207,52,79,43,97,219,116,169,7,118,162,108,36,20,233,88,135,80,19,42,237,57,152,71,9,250,17,4,119,234,130,26,200,189,163,254,245,197,171,220,235,140,244,184,94,211,231,99,246,121,212,112,204,63,148,83,178,1,255,131,13,183,142,236,45,55,35,243,136,37,85,100,160,38,224,146,174,82,48,109,132,125,90,143,138,240,173,165,164,192,175,29,74,28,114,213,73,64,206,76,139,96,2,229,15,93,25,239,202,49,70,214,201,72,203,68,89,69,157,216,217,249,120,226,84,149,187,54,53,158,166,182,133,0];static Sw=[0,-2,4,6,-1,0,0,2,0,0,0,0,5,4,2,2,0,0,0,0,2,-2,2,14,0,6,3,0,4,0,0,0,3,0,0,0,0,0,0,0,0,-1,4,2,6,0,6,0,0,3,7,0,0,0,-1,0,0,0,0,4,0,0,0,0,0,0,0,0,1,15,0,0,0,0,6,0,2,0,0,0,2,0,0,0,1,0,0,4,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,-2,0,0,2,0,0,0,2,9,0,0,0,0,0,4,0,0,0,3,7,9,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,3,2,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,-2,2,0,0,0,0,0,6,0,0,0,2,0,2,0,0,0,-2,0,0,4,0,0,0,0,6,0,0,-2,-2,0,0,0,0,0,0,-2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0]}},9782:(t,i,s)=>{var h;s.d(i,{i:()=>e}),function(t){t[t.Fy=14]="IF_OPENCHATMODAL",t[t.uy=28]="IF_OPENMAINSIDEMODAL",t[t.dm=129]="IF_CLOSE",t[t.my=167]="IF_OPENSIDEOVERLAY",t[t.nm=168]="IF_OPENMAINMODAL",t[t.Py=195]="IF_OPENSIDEMODAL",t[t.rm=2]="IF_SETCOLOUR",t[t.am=26]="IF_SETHIDE",t[t.tm=46]="IF_SETOBJECT",t[t.Jy=84]="IF_SHOWSIDE",t[t.jy=87]="IF_SETMODEL",t[t.xy=103]="IF_SETRECOL",t[t.yy=146]="IF_SETANIM",t[t.Ww=197]="IF_SETPLAYERHEAD",t[t.wm=201]="IF_SETTEXT",t[t.Ry=204]="IF_SETNPCHEAD",t[t.Uy=209]="IF_SETPOSITION",t[t.vy=126]="TUTORIAL_FLASHSIDE",t[t.qy=185]="TUTORIAL_OPENCHAT",t[t.Ty=15]="UPDATE_INV_STOP_TRANSMIT",t[t.gy=98]="UPDATE_INV_FULL",t[t.gm=213]="UPDATE_INV_PARTIAL",t[t.Gy=3]="CAM_LOOKAT",t[t.Im=13]="CAM_SHAKE",t[t.Ky=74]="CAM_MOVETO",t[t.um=239]="CAM_RESET",t[t.Fw=1]="NPC_INFO",t[t._m=184]="PLAYER_INFO",t[t.Iy=133]="FINISH_TRACKING",t[t._y=226]="ENABLE_TRACKING",t[t.Qy=4]="MESSAGE_GAME",t[t.fm=21]="UPDATE_IGNORELIST",t[t.Ny=32]="CHAT_FILTER_SETTINGS",t[t.jd=41]="MESSAGE_PRIVATE",t[t.xw=152]="UPDATE_FRIENDLIST",t[t.qw=19]="UNSET_MAP_FLAG",t[t.Am=22]="UPDATE_RUNWEIGHT",t[t.Yw=25]="HINT_ARROW",t[t.Pw=43]="UPDATE_REBOOT_TIMER",t[t.ym=44]="UPDATE_STAT",t[t.$y=68]="UPDATE_RUNENERGY",t[t.lm=136]="RESET_ANIMS",t[t.$w=139]="UPDATE_UID192",t[t.by=140]="LAST_LOGIN_INFO",t[t.Xw=142]="LOGOUT",t[t.Ey=243]="P_COUNTDIALOG",t[t.Ly=254]="SET_MULTIWAY",t[t.jw=20]="DATA_LOC_DONE",t[t.Dw=80]="DATA_LAND_DONE",t[t.zy=132]="DATA_LAND",t[t.py=220]="DATA_LOC",t[t.Bw=237]="REBUILD_NORMAL",t[t.Rw=150]="VARP_SMALL",t[t.wy=175]="VARP_LARGE",t[t.Xy=193]="RESET_CLIENT_VARCACHE",t[t.Sy=12]="SYNTH_SOUND",t[t.Vw=54]="MIDI_SONG",t[t.Oy=212]="MIDI_JINGLE",t[t.My=7]="UPDATE_ZONE_PARTIAL_FOLLOWS",t[t.Hy=135]="UPDATE_ZONE_FULL_FOLLOWS",t[t.pm=162]="UPDATE_ZONE_PARTIAL_ENCLOSED",t[t.Jw=23]="LOC_MERGE",t[t.ey=42]="LOC_ANIM",t[t.sy=49]="OBJ_DEL",t[t.Qw=50]="OBJ_REVEAL",t[t.ly=59]="LOC_ADD_CHANGE",t[t.iy=69]="MAP_PROJANIM",t[t.ny=76]="LOC_DEL",t[t.Kw=151]="OBJ_COUNT",t[t.ty=191]="MAP_ANIM",t[t.hy=223]="OBJ_ADD"}(h||(h={}));const e=h},6970:(t,i,s)=>{s.d(i,{i:()=>l});class h{start=0;end=0;form=0;length=0;XR=null;jR=null;threshold=0;position=0;delta=0;amplitude=0;qR=0;read=t=>{this.form=t.Nw,this.start=t.Jr,this.end=t.Jr,this.length=t.Nw,this.XR=new Int32Array(this.length),this.jR=new Int32Array(this.length);for(let i=0;i<this.length;i++)this.XR[i]=t.kw,this.jR[i]=t.kw};reset=()=>{this.threshold=0,this.position=0,this.delta=0,this.amplitude=0,this.qR=0};evaluate=t=>(this.qR>=this.threshold&&this.jR&&this.XR&&(this.amplitude=this.jR[this.position++]<<15,this.position>=this.length&&(this.position=this.length-1),this.threshold=this.XR[this.position]/65536*t|0,this.threshold>this.qR&&(this.delta=((this.jR[this.position]<<15)-this.amplitude)/(this.threshold-this.qR)|0)),this.amplitude+=this.delta,this.qR++,this.amplitude-this.delta>>15)}class e{static buffer=null;static lb=null;static sin=null;static $R=new Int32Array(5);static KR=new Int32Array(5);static JR=new Int32Array(5);static QR=new Int32Array(5);static tM=new Int32Array(5);iM=null;sM=null;hM=null;eM=null;nM=null;rM=null;release=null;attack=null;lM=new Int32Array(5);oM=new Int32Array(5);aM=new Int32Array(5);start=0;length=500;cM=100;fM=0;static init=()=>{this.lb=new Int32Array(32768);for(let t=0;t<32768;t++)Math.random()>.5?this.lb[t]=1:this.lb[t]=-1;this.sin=new Int32Array(32768);for(let t=0;t<32768;t++)this.sin[t]=16384*Math.sin(t/5215.1903)|0;this.buffer=new Int32Array(220500)};tc=(t,i)=>{for(let i=0;i<t;i++)e.buffer[i]=0;if(i<10)return e.buffer;const s=t/i|0;this.iM?.reset(),this.sM?.reset();let h=0,n=0,r=0;this.hM&&this.eM&&(this.hM.reset(),this.eM.reset(),h=32.768*(this.hM.end-this.hM.start)/s|0,n=32.768*this.hM.start/s|0);let l=0,o=0,a=0;this.nM&&this.rM&&(this.nM.reset(),this.rM.reset(),l=32.768*(this.nM.end-this.nM.start)/s|0,o=32.768*this.nM.start/s|0);for(let t=0;t<5;t++)this.iM&&0!==this.lM[t]&&(e.$R[t]=0,e.KR[t]=this.aM[t]*s,e.JR[t]=(this.lM[t]<<14)/100|0,e.QR[t]=32.768*(this.iM.end-this.iM.start)*Math.pow(1.0057929410678534,this.oM[t])/s|0,e.tM[t]=32.768*this.iM.start/s|0);if(this.iM&&this.sM)for(let i=0;i<t;i++){let s=this.iM.evaluate(t),c=this.sM.evaluate(t);if(this.hM&&this.eM){const i=this.hM.evaluate(t),e=this.eM.evaluate(t);s+=this.uM(e,r,this.hM.form)>>1,r+=(i*h>>16)+n}if(this.nM&&this.rM){const i=this.nM.evaluate(t),s=this.rM.evaluate(t);c=c*(32768+(this.uM(s,a,this.nM.form)>>1))>>15,a+=(i*l>>16)+o}for(let h=0;h<5;h++)if(0!==this.lM[h]){const n=i+e.KR[h];n<t&&(e.buffer[n]+=this.uM(c*e.JR[h]>>15,e.$R[h],this.iM.form),e.$R[h]+=(s*e.QR[h]>>16)+e.tM[h])}}if(this.release&&this.attack){this.release.reset(),this.attack.reset();let i=0,s=!0;for(let h=0;h<t;h++){const n=this.release.evaluate(t),r=this.attack.evaluate(t);let l;l=s?this.release.start+((this.release.end-this.release.start)*n>>8):this.release.start+((this.release.end-this.release.start)*r>>8),i+=256,i>=l&&(i=0,s=!s),s&&(e.buffer[h]=0)}}if(this.fM>0&&this.cM>0){const i=this.fM*s;for(let s=i;s<t;s++)e.buffer[s]+=e.buffer[s-i]*this.cM/100|0,e.buffer[s]|=0}for(let i=0;i<t;i++)e.buffer[i]<-32768&&(e.buffer[i]=-32768),e.buffer[i]>32767&&(e.buffer[i]=32767);return e.buffer};uM=(t,i,s)=>1===s?(32767&i)<16384?t:-t:2===s?e.sin[32767&i]*t>>14:3===s?((32767&i)*t>>14)-t:4===s?e.lb[32767&(i/2607|0)]*t:0;read=t=>{this.iM=new h,this.iM.read(t),this.sM=new h,this.sM.read(t),0!==t.Nw&&(t.Va--,this.hM=new h,this.hM.read(t),this.eM=new h,this.eM.read(t)),0!==t.Nw&&(t.Va--,this.nM=new h,this.nM.read(t),this.rM=new h,this.rM.read(t)),0!==t.Nw&&(t.Va--,this.release=new h,this.release.read(t),this.attack=new h,this.attack.read(t));for(let i=0;i<10;i++){const s=t.Rb;if(0===s)break;this.lM[i]=s,this.oM[i]=t.Tk,this.aM[i]=t.Rb}this.fM=t.Rb,this.cM=t.Rb,this.length=t.kw,this.start=t.kw}}var n=s(2383),r=s(9345);class l{static ky=new Int32Array(1e3);static dM=null;static wM=null;static yM=new r.to(1e3,null);mM=new r.to(10,null);pM=0;loopEnd=0;static wa=t=>{const i=new n.i(t.read('sounds.dat'));for(this.dM=new Uint8Array(441e3),this.wM=new n.i(this.dM),e.init();;){const t=i.kw;if(65535===t)break;const s=new l;s.read(i),this.yM[t]=s,this.ky[t]=s.trim()}};static tc=(t,i)=>{if(!this.yM[t])return null;const s=this.yM[t];return s?.AM(i)??null};read=t=>{for(let i=0;i<10;i++)0!==t.Nw&&(t.Va--,this.mM[i]=new e,this.mM[i]?.read(t));this.pM=t.kw,this.loopEnd=t.kw};trim=()=>{let t=9999999;for(let i=0;i<10;i++)this.mM[i]&&(this.mM[i].start/20|0)<t&&(t=this.mM[i].start/20|0);if(this.pM<this.loopEnd&&(this.pM/20|0)<t&&(t=this.pM/20|0),9999999===t||0===t)return 0;for(let i=0;i<10;i++)this.mM[i]&&(this.mM[i].start-=20*t);return this.pM<this.loopEnd&&(this.pM-=20*t,this.loopEnd-=20*t),t};AM=t=>{const i=this.tc(t);return l.wM.Va=0,l.wM?.p4(1380533830),l.wM?.WR(i+36),l.wM?.p4(1463899717),l.wM?.p4(1718449184),l.wM?.WR(16),l.wM?.HR(1),l.wM?.HR(1),l.wM?.WR(22050),l.wM?.WR(22050),l.wM?.HR(1),l.wM?.HR(8),l.wM?.p4(1684108385),l.wM?.WR(i),l.wM.Va+=i,l.wM};tc=t=>{let i=0;for(let t=0;t<10;t++)this.mM[t]&&this.mM[t].length+this.mM[t].start>i&&(i=this.mM[t].length+this.mM[t].start);if(0===i)return 0;let s=22050*i/1e3|0,h=22050*this.pM/1e3|0,e=22050*this.loopEnd/1e3|0;(h<0||e<0||e>s||h>=e)&&(t=0);let n=s+(e-h)*(t-1);for(let t=44;t<n+44;t++)l.dM&&(l.dM[t]=-128);for(let t=0;t<10;t++)if(this.mM[t]){const i=22050*this.mM[t].length/1e3|0,s=22050*this.mM[t].start/1e3|0,h=this.mM[t].tc(i,this.mM[t].length);for(let t=0;t<i;t++)l.dM&&(l.dM[t+s+44]+=h[t]>>8<<24>>24)}if(t>1){h+=44,e+=44,s+=44,n+=44;const i=n-s;for(let t=s-1;t>=e;t--)l.dM&&(l.dM[t+i]=l.dM[t]);for(let i=1;i<t;i++){const t=(e-h)*i;for(let i=h;i<e;i++)l.dM&&(l.dM[i+t]=l.dM[i])}n-=44}return n}}},9345:(t,i,s)=>{s.d(i,{la:()=>a,Bb:()=>e,Un:()=>n,on:()=>o,Pb:()=>r,to:()=>h,ra:()=>l});class h extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=i}}class e extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=s}}}class n extends Array{constructor(t,i,s,h){super(t);for(let e=0;e<t;e++){this[e]=new Array(i);for(let t=0;t<i;t++){this[e][t]=new Array(s);for(let i=0;i<s;i++)this[e][t][i]=h}}}}class r extends Array{constructor(t,i,s,h,e){super(t);for(let n=0;n<t;n++){this[n]=new Array(i);for(let t=0;t<i;t++){this[n][t]=new Array(s);for(let i=0;i<s;i++){this[n][t][i]=new Array(h);for(let s=0;s<h;s++)this[n][t][i][s]=e}}}}}class l extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Uint8Array(s)}}}class o extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=new Int32Array(i)}}class a extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Int32Array(s)}}}},1519:(t,i,s)=>{s.d(i,{sa:()=>n,jr:()=>e,qr:()=>h,xa:()=>r,VR:()=>o,ZR:()=>l,YR:()=>a});const h=async t=>new Promise((i=>setTimeout(i,t))),e=async t=>new Int8Array(await(await fetch(t)).arrayBuffer()),n=async t=>(await fetch(t)).text(),r=(t,i,s,h,e)=>{for(;e--;)s[h++]=t[i++]},l=t=>{let i=0n;for(let s=0;s<t.length;s++)i=(i<<8n)+BigInt(t[s]);return i},o=t=>{const i=[];for(;t>0n;)i.unshift(Number(255n&t)),t>>=8n;return new Uint8Array(i)},a=(t,i,s)=>{let h=1n;for(;i>0n;)i%2n===1n&&(h=h*t%s),t=t*t%s,i>>=1n;return h}},9897:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(2383);class e{static IM=new Uint16Array(['d','o','t'].join('').split('').map((t=>t.charCodeAt(0))));static gM=new Uint16Array(['(','a',')'].join('').split('').map((t=>t.charCodeAt(0))));static _M=new Uint16Array(['s','l','a','s','h'].join('').split('').map((t=>t.charCodeAt(0))));static CM=['cook',"cook's",'cooks','seeks','sheet'];static EM=[];static TM=[];static bM=[];static vM=[];static OM=[];static LM=[];static wa=t=>{const i=new h.i(t.read('fragmentsenc.txt')),s=new h.i(t.read('badenc.txt')),e=new h.i(t.read('domainenc.txt')),n=new h.i(t.read('tldlist.txt'));this.read(s,e,i,n)};static filter=t=>{const i=[...t];this.format(i);const s=i.join('').trim(),h=s.toLowerCase(),e=[...h];this.SM(e),this.kM(e),this.RM(e),this.MM(e);for(let t=0;t<this.CM.length;t++){let i=-1;for(;-1!==(i=h.indexOf(this.CM[t],i+1));){const s=[...this.CM[t]];for(let t=0;t<s.length;t++)e[t+i]=s[t]}}return this.xM(e,[...s]),this.NM(e),e.join('').trim()};static read=(t,i,s,h)=>{this.PM(t),this.DM(i),this.FM(s),this.UM(h)};static UM=t=>{const i=t.Jr;for(let s=0;s<i;s++)this.TM[s]=t.Nw,this.EM[s]=new Uint16Array(t.Nw).map((()=>t.Nw))};static PM=t=>{const i=t.Jr;for(let s=0;s<i;s++){this.bM[s]=new Uint16Array(t.Nw).map((()=>t.Nw));const i=new Array(t.Nw).fill([]).map((()=>[t.Mw,t.Mw]));i.length>0&&(this.vM[s]=i)}};static DM=t=>{const i=t.Jr;for(let s=0;s<i;s++)this.OM[s]=new Uint16Array(t.Nw).map((()=>t.Nw))};static FM=t=>{const i=t.Jr;for(let s=0;s<i;s++)this.LM[s]=t.kw};static SM=t=>{const i=[...t],s=[...t];this.BM(null,i,this.IM),this.BM(null,s,this._M);for(let h=0;h<this.EM.length;h++)this.GM(s,this.TM[h],t,this.EM[h],i)};static kM=t=>{for(let i=0;i<2;i++)for(let i=this.bM.length-1;i>=0;i--)this.BM(this.vM[i],t,this.bM[i])};static RM=t=>{const i=[...t],s=[...t];this.BM(null,i,this.gM),this.BM(null,s,this.IM);for(let h=this.OM.length-1;h>=0;h--)this.HM(s,i,this.OM[h],t)};static MM=t=>{for(let i=0;i<t.length;){const s=this.WM(t,i);if(-1===s)return;let h=!1;for(let e=i;e>=0&&e<s&&!h;e++)this.ZM(t[e])||this.YM(t[e])||(h=!0);let e=0;h&&(e=0),0===e&&(e=1,i=s);let n=0;for(let h=s;h<t.length&&h<i;h++)n=10*n+t[h].charCodeAt(0)-48;n<=255&&i-s<=8?e++:e=0,4===e&&(this.VM(s,i,t),e=0),i=this.zM(i,t)}};static XM=t=>{if(this.jM(t))return!0;const i=this.qM(t),s=this.LM,h=s.length;if(i===s[0]||i===s[h-1])return!0;let e=0,n=h-1;for(;e<=n;){const t=Math.floor((e+n)/2);if(i===s[t])return!0;i<s[t]?n=t-1:e=t+1}return!1};static qM=t=>{if(t.length>6)return 0;let i=0;for(let s=0;s<t.length;s++){const h=t[t.length-s-1];if(this.$M(h))i=38*i+h.charCodeAt(0)+1-'a'.charCodeAt(0);else if("'"===h)i=38*i+27;else if(this.KM(h))i=38*i+h.charCodeAt(0)+28-'0'.charCodeAt(0);else if('\0'!==h)return 0}return i};static WM=(t,i)=>{for(let s=i;s<t.length&&s>=0;s++)if(this.KM(t[s]))return s;return-1};static zM=(t,i)=>{for(let s=t;s<i.length&&s>=0;s++)if(!this.KM(i[s]))return s;return i.length};static JM=(t,i,s)=>i===s||'o'===i&&'0'===s?1:'o'===i&&'('===s&&')'===t?2:'c'!==i||'('!==s&&'<'!==s&&'['!==s?'e'===i&&'€'===s||'s'===i&&'$'===s||'l'===i&&'i'===s?1:0:1;static HM=(t,i,s,h)=>{const e=s.length,n=h.length;for(let r=0;r<=n-e;r++){const{QM:e,tx:n}=this.ix(r,s,h);if(!e)continue;const l=this.sx(r,h,3,i,['@']),o=this.hx(n-1,h,3,t,['.',',']);(l>2||o>2)&&this.VM(r,n,h)}};static ix=(t,i,s)=>{const h=i.length;let e=t,n=0;for(;e<s.length&&n<h;){const r=s[e],l=e+1<s.length?s[e+1]:'\0',o=this.JM(l,String.fromCharCode(i[n]),r);if(o>0)e+=o,n++;else{if(0===n)break;const s=this.JM(l,String.fromCharCode(i[n-1]),r);if(s>0)e+=s,1===n&&t++;else{if(n>=h||!this.ZM(r))break;e++}}}return{QM:n>=h,tx:e}};static BM=(t,i,s)=>{if(!(s.length>i.length))for(let h=0;h<=i.length-s.length;h++){let e=h;const{tx:n,nx:r,lx:l,ox:o,ux:a}=this.wx(i,s,e);e=n;let c=i[e],f=e+1<i.length?i[e+1]:'\0';if(!(r>=s.length)||o&&a)continue;let u,d=!0;if(l){let t=!1,s=!1;if((h-1<0||this.ZM(i[h-1])&&"'"!==i[h-1])&&(t=!0),(e>=i.length||this.ZM(i[e])&&"'"!==i[e])&&(s=!0),!t||!s){let s=!1;for(u=h-2,t&&(u=h);!s&&u<e;){if(u>=0&&(!this.ZM(i[u])||"'"===i[u])){const t=[];let h;for(h=0;h<3&&u+h<i.length&&(!this.ZM(i[u+h])||"'"===i[u+h]);h++)t[h]=i[u+h];let e=!0;0===h&&(e=!1),h<3&&u-1>=0&&(!this.ZM(i[u-1])||"'"===i[u-1])&&(e=!1),e&&!this.XM(t)&&(s=!0)}u++}s||(d=!1)}}else{c=' ',h-1>=0&&(c=i[h-1]),f=' ',e<i.length&&(f=i[e]);const s=this.yx(c),n=this.yx(f);t&&this.mx(s,t,n)&&(d=!1)}if(!d)continue;let w=0,y=0;for(let t=h;t<e;t++)this.KM(i[t])?w++:this.Ax(i[t])&&y++;w<=y&&this.VM(h,e,i)}};static wx=(t,i,s)=>{let h=s,e=0,n=0,r=!1,l=!1,o=!1;for(;h<t.length&&(!l||!o)&&!(h>=t.length||l&&o);){const a=t[h],c=h+1<t.length?t[h+1]:'\0';let f;if(e<i.length&&(f=this.Ix(c,String.fromCharCode(i[e]),a))>0)1===f&&this.KM(a)&&(l=!0),2===f&&(this.KM(a)||this.KM(c))&&(l=!0),h+=f,e++;else{if(0===e)break;let t;if((t=this.Ix(c,String.fromCharCode(i[e-1]),a))>0)h+=t;else{if(e>=i.length||!this.YM(a))break;if(this.ZM(a)&&"'"!==a&&(r=!0),this.KM(a)&&(o=!0),h++,n++,100*n/(h-s)>90)break}}}return{tx:h,nx:e,lx:r,ox:l,ux:o}};static Ix=(t,i,s)=>{if(i===s)return 1;if(i>='a'&&i<='m'){if('a'===i)return'4'!==s&&'@'!==s&&'^'!==s?'/'===s&&'\\'===t?2:0:1;if('b'===i)return'6'!==s&&'8'!==s?'1'===s&&'3'===t?2:0:1;if('c'===i)return'('!==s&&'<'!==s&&'{'!==s&&'['!==s?0:1;if('d'===i)return'['===s&&')'===t?2:0;if('e'===i)return'3'!==s&&'€'!==s?0:1;if('f'===i)return'p'===s&&'h'===t?2:'£'===s?1:0;if('g'===i)return'9'!==s&&'6'!==s?0:1;if('h'===i)return'#'===s?1:0;if('i'===i)return'y'!==s&&'l'!==s&&'j'!==s&&'1'!==s&&'!'!==s&&':'!==s&&';'!==s&&'|'!==s?0:1;if('j'===i)return 0;if('k'===i)return 0;if('l'===i)return'1'!==s&&'|'!==s&&'i'!==s?0:1;if('m'===i)return 0}if(i>='n'&&i<='z'){if('n'===i)return 0;if('o'===i)return'0'!==s&&'*'!==s?'('===s&&')'===t||'['===s&&']'===t||'{'===s&&'}'===t||'<'===s&&'>'===t?2:0:1;if('p'===i)return 0;if('q'===i)return 0;if('r'===i)return 0;if('s'===i)return'5'!==s&&'z'!==s&&'$'!==s&&'2'!==s?0:1;if('t'===i)return'7'!==s&&'+'!==s?0:1;if('u'===i)return'v'===s?1:'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('v'===i)return'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('w'===i)return'v'===s&&'v'===t?2:0;if('x'===i)return')'===s&&'('===t||'}'===s&&'{'===t||']'===s&&'['===t||'>'===s&&'<'===t?2:0;if('y'===i)return 0;if('z'===i)return 0}return i>='0'&&i<='9'?'0'===i?'o'===s||'O'===s?1:'('===s&&')'===t||'{'===s&&'}'===t||'['===s&&']'===t?2:0:'1'===i&&'l'===s?1:0:','===i?'.'===s?1:0:'.'===i?','===s?1:0:'!'===i&&'i'===s?1:0};static mx=(t,i,s)=>{let h=0,e=i.length-1;for(;h<=e;){const n=Math.floor((h+e)/2);if(i[n][0]===t&&i[n][1]===s)return!0;t<i[n][0]||t===i[n][0]&&s<i[n][1]?e=n-1:h=n+1}return!1};static yx=t=>this.$M(t)?t.charCodeAt(0)+1-'a'.charCodeAt(0):"'"===t?28:this.KM(t)?t.charCodeAt(0)+29-'0'.charCodeAt(0):27;static GM=(t,i,s,h,e)=>{if(!(h.length>s.length))for(let n=0;n<=s.length-h.length;n++){const{tx:r,gx:l}=this._x(s,h,n);if(l<h.length)continue;let o=!1;const a=this.sx(n,s,3,e,[',','.']),c=this.hx(r-1,s,5,t,['\\','/']);if(1===i&&a>0&&c>0&&(o=!0),2===i&&(a>2&&c>0||a>0&&c>2)&&(o=!0),3===i&&a>0&&c>2&&(o=!0),!o)continue;let f,u=n,d=r-1,w=!1;if(a>2){if(4===a)for(w=!1,f=n-1;f>=0;f--)if(w){if('*'!==e[f])break;u=f}else'*'===e[f]&&(u=f,w=!0);for(w=!1,f=u-1;f>=0;f--)if(w){if(this.ZM(s[f]))break;u=f}else this.ZM(s[f])||(w=!0,u=f)}if(c>2){if(4===c)for(w=!1,f=d+1;f<s.length;f++)if(w){if('*'!==t[f])break;d=f}else'*'===t[f]&&(d=f,w=!0);for(w=!1,f=d+1;f<s.length;f++)if(w){if(this.ZM(s[f]))break;d=f}else this.ZM(s[f])||(w=!0,d=f)}this.VM(u,d+1,s)}};static _x=(t,i,s)=>{let h=0;for(;s<t.length&&h<i.length;){const e=t[s],n=s+1<t.length?t[s+1]:'\0';let r;if((r=this.JM(n,String.fromCharCode(i[h]),e))>0)s+=r,h++;else{if(0===h)break;let t;if((t=this.JM(n,String.fromCharCode(i[h-1]),e))>0)s+=t;else{if(!this.ZM(e))break;s++}}}return{tx:s,gx:h}};static ZM=t=>!this.Ax(t)&&!this.KM(t);static YM=t=>!this.$M(t)||('v'===t||'x'===t||'j'===t||'q'===t||'z'===t);static Ax=t=>this.$M(t)||this.Cx(t);static KM=t=>t>='0'&&t<='9';static $M=t=>t>='a'&&t<='z';static Cx=t=>t>='A'&&t<='Z';static jM=t=>{for(let i=0;i<t.length;i++)if(!this.KM(t[i])&&'\0'!==t[i])return!1;return!0};static VM=(t,i,s)=>{for(let h=t;h<i;h++)s[h]='*'};static Ex=(t,i)=>{let s=0;for(let h=i-1;h>=0&&this.ZM(t[h]);h--)'*'===t[h]&&s++;return s};static Tx=(t,i)=>{let s=0;for(let h=i+1;h<t.length&&this.ZM(t[h]);h++)'*'===t[h]&&s++;return s};static bx=(t,i,s,h,e)=>(e?this.Ex(i,s):this.Tx(i,s))>=h?4:this.ZM(e?t[s-1]:t[s+1])?1:0;static sx=(t,i,s,h,e)=>{if(0===t)return 2;for(let s=t-1;s>=0&&this.ZM(i[s]);s--)if(e.includes(i[s]))return 3;return this.bx(i,h,t,s,!0)};static hx=(t,i,s,h,e)=>{if(t+1===i.length)return 2;for(let s=t+1;s<i.length&&this.ZM(i[s]);s++)if(e.includes(i[s]))return 3;return this.bx(i,h,t,s,!1)};static format=t=>{let i=0;for(let s=0;s<t.length;s++)this.vx(t[s])?t[i]=t[s]:t[i]=' ',0!==i&&' '===t[i]&&' '===t[i-1]||i++;for(let s=i;s<t.length;s++)t[s]=' '};static vx=t=>t>=' '&&t<=''||' '===t||'\n'===t||'\t'===t||'£'===t||'€'===t;static xM=(t,i)=>{for(let s=0;s<i.length;s++)'*'!==t[s]&&this.Cx(i[s])&&(t[s]=i[s])};static NM=t=>{let i=!0;for(let s=0;s<t.length;s++){const h=t[s];this.Ax(h)?i?this.$M(h)&&(i=!1):this.Cx(h)&&(t[s]=String.fromCharCode(h.charCodeAt(0)+'a'.charCodeAt(0)-65)):i=!0}}}},6054:(t,i,s)=>{s.d(i,{i:()=>h});class h{static Ox=[' ','e','t','a','o','i','h','n','s','r','d','l','u','m','w','c','y','f','g','p','b','v','k','x','j','q','z','0','1','2','3','4','5','6','7','8','9',' ','!','?','.',',',':',';','(',')','-','&','*','\\','\'','@','#','+','=','£','$','%','"','[',']'];static Lx=[];static wa=(t,i)=>{let s,h=0,e=-1;for(let n=0;n<i&&h<100;n++){const i=t.Nw;s=i>>4&15,-1!==e?(this.Lx[h++]=this.Ox[(e<<4)+s-195],e=-1):s<13?this.Lx[h++]=this.Ox[s]:e=s,s=15&i,-1!==e?(this.Lx[h++]=this.Ox[(e<<4)+s-195],e=-1):s<13?this.Lx[h++]=this.Ox[s]:e=s}let n=!0;for(let t=0;t<h;t++){const i=this.Lx[t];n&&i>='a'&&i<='z'&&(this.Lx[t]=i.toUpperCase(),n=!1),'.'!==i&&'!'!==i||(n=!0)}return this.Lx.slice(0,h).join('')};static qd=(t,i)=>{i.length>80&&(i=i.substring(0,80)),i=i.toLowerCase();let s=-1;for(let h=0;h<i.length;h++){const e=i.charAt(h);let n=0;for(let t=0;t<this.Ox.length;t++)if(e===this.Ox[t]){n=t;break}n>12&&(n+=195),-1===s?n<13?s=n:t.p1(n):n<13?(t.p1((s<<4)+n),s=-1):(t.p1((s<<4)+(n>>4)),s=15&n)}-1!==s&&t.p1(s<<4)}}},5810:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(937);class e{static Sx=null;static state=null;static load=async t=>{const i=new WebAssembly.Module(t),s=await(0,h.Ig)(i,{kx:void 0});this.Sx=s,this.state=s.Rx()};static read=(t,i,s,h)=>{if(!this.Sx||!this.state)throw new Error('bz2 not found!!');return this.Sx.read(t,i,s,h,this.state)}}},3584:(t,i,s)=>{let h;async function e(t,i){n(i);try{const i=await window.audioContext.decodeAudioData(Uint8Array.from(t).buffer);let s=window.audioContext.createBufferSource();s.buffer=i,s.connect(h),s.start()}catch(t){console.log(t)}}function n(t){h||(h=window.audioContext.createGain(),h.connect(window.audioContext.destination)),h.gain.value=t/256}function r(t,i){window._tinyMidiPlay&&window._tinyMidiPlay(t,i/256)}function l(t){window._tinyMidiVolume&&window._tinyMidiVolume(t/256)}function o(){window._tinyMidiStop&&window._tinyMidiStop()}s.d(i,{Qr:()=>r,Fm:()=>n,Dm:()=>l,Br:()=>o,ic:()=>e})},937:(t,i,s)=>{async function h(t,i={}){const s={kx:Object.assign(Object.create(globalThis),i.kx||{},{abort(t,i,s,h){t=r(t>>>0),i=r(i>>>0),s>>>=0,h>>>=0,(()=>{throw Error(`${t} in ${i}:${s}:${h}`)})()}})},{exports:h}=await WebAssembly.instantiate(t,s),e=h.memory||i.kx.memory,n=Object.setPrototypeOf({Rx(){return(t=h.Rx()>>>0)?{stream:a(Int8Array,g(t+0)),Mx:a(Int8Array,g(t+4)),xx:I(t+8),Nx:I(t+12),Px:I(t+16),Dx:I(t+20),Fx:I(t+24),Ux:I(t+28),Bx:I(t+32),Gx:I(t+36),Hx:A(t+40),Wx:I(t+44),Zx:0!=A(t+48),Yx:I(t+52),Vx:I(t+56),zx:I(t+60),Xx:I(t+64),jx:I(t+68),qx:I(t+72),$x:I(t+76),Kx:I(t+80),Jx:I(t+84),Qx:f(I,2,g(t+88)),tN:f(I,2,g(t+92)),iN:f(I,2,g(t+96)),sN:f((t=>0!=A(t)),0,g(t+100)),hN:f((t=>0!=A(t)),0,g(t+104)),eN:f(A,0,g(t+108)),nN:f(A,0,g(t+112)),rN:f(I,2,g(t+116)),selector:f(A,0,g(t+120)),lN:f(A,0,g(t+124)),oN:l((t=>f(A,0,g(t))),2,g(t+128)),aN:l((t=>f(I,2,g(t))),2,g(t+132)),Wk:l((t=>f(I,2,g(t))),2,g(t+136)),cN:l((t=>f(I,2,g(t))),2,g(t+140)),fN:f(I,2,g(t+144))}:null;var t},read(t,i,s,e,n){i=function(t){if(t){const i=d.get(t);i?d.set(t,i+1):d.set(h.uN(t),1)}return t}(c(Int8Array,6,0,i)||w()),n=function(t){if(null==t)return 0;const i=h.uN(h.dN(148,5));return p(i+0,c(Int8Array,6,0,t.stream)||w()),p(i+4,c(Int8Array,6,0,t.Mx)||w()),p(i+8,t.xx),p(i+12,t.Nx),p(i+16,t.Px),p(i+20,t.Dx),p(i+24,t.Fx),p(i+28,t.Ux),p(i+32,t.Bx),p(i+36,t.Gx),m(i+40,t.Hx),p(i+44,t.Wx),m(i+48,t.Zx?1:0),p(i+52,t.Yx),p(i+56,t.Vx),p(i+60,t.zx),p(i+64,t.Xx),p(i+68,t.jx),p(i+72,t.qx),p(i+76,t.$x),p(i+80,t.Kx),p(i+84,t.Jx),p(i+88,u(p,4,2,t.Qx,Int32Array)||w()),p(i+92,u(p,4,2,t.tN,Int32Array)||w()),p(i+96,u(p,4,2,t.iN,Int32Array)||w()),p(i+100,u(m,7,0,t.sN,Uint8Array)||w()),p(i+104,u(m,7,0,t.hN,Uint8Array)||w()),p(i+108,u(m,8,0,t.eN,Uint8Array)||w()),p(i+112,u(m,8,0,t.nN,Uint8Array)||w()),p(i+116,u(p,4,2,t.rN,Int32Array)||w()),p(i+120,u(m,8,0,t.selector,Uint8Array)||w()),p(i+124,u(m,8,0,t.lN,Uint8Array)||w()),p(i+128,o(((t,i)=>{p(t,u(m,8,0,i,Uint8Array)||w())}),9,2,t.oN)||w()),p(i+132,o(((t,i)=>{p(t,u(p,4,2,i,Int32Array)||w())}),10,2,t.aN)||w()),p(i+136,o(((t,i)=>{p(t,u(p,4,2,i,Int32Array)||w())}),10,2,t.Wk)||w()),p(i+140,o(((t,i)=>{p(t,u(p,4,2,i,Int32Array)||w())}),10,2,t.cN)||w()),p(i+144,u(p,4,2,t.fN,Int32Array)||w()),h.wN(i),i}(n)||w();try{return a(Int8Array,h.read(t,i,s,e,n)>>>0)}finally{!function(t){if(t){const i=d.get(t);if(1===i)h.wN(t),d.delete(t);else{if(!i)throw Error(`invalid refcount '${i}' for reference '${t}'`);d.set(t,i-1)}}}(i)}}},h);function r(t){if(!t)return null;const i=t+new Uint32Array(e.buffer)[t-4>>>2]>>>1,s=new Uint16Array(e.buffer);let h=t>>>1,n="";for(;i-h>1024;)n+=String.fromCharCode(...s.subarray(h,h+=1024));return n+String.fromCharCode(...s.subarray(h,i))}function l(t,i,s){if(!s)return null;const h=g(s+4),e=y.getUint32(s+12,!0),n=new Array(e);for(let s=0;s<e;++s)n[s]=t(h+(s<<i>>>0));return n}function o(t,i,s,e){if(null==e)return 0;const n=e.length,r=h.uN(h.dN(n<<s,1))>>>0,l=h.uN(h.dN(16,i))>>>0;p(l+0,r),y.setUint32(l+4,r,!0),y.setUint32(l+8,n<<s,!0),y.setUint32(l+12,n,!0);for(let i=0;i<n;++i)t(r+(i<<s>>>0),e[i]);return h.wN(r),h.wN(l),l}function a(t,i){return i?new t(e.buffer,g(i+4),y.getUint32(i+8,!0)/t.BYTES_PER_ELEMENT).slice():null}function c(t,i,s,n){if(null==n)return 0;const r=n.length,l=h.uN(h.dN(r<<s,1))>>>0,o=h.dN(12,i)>>>0;return p(o+0,l),y.setUint32(o+4,l,!0),y.setUint32(o+8,r<<s,!0),new t(e.buffer,l,r).set(n),h.wN(l),o}function f(t,i,s){if(!s)return null;const h=g(s-4)>>>i,e=new Array(h);for(let n=0;n<h;++n)e[n]=t(s+(n<<i>>>0));return e}function u(t,i,s,n,r){if(null==n)return 0;const l=n.length,o=h.uN(h.dN(l<<s,i))>>>0;if(r)new r(e.buffer,o,l).set(n);else for(let i=0;i<l;i++)t(o+(i<<s>>>0),n[i]);return h.wN(o),o}const d=new Map;function w(){throw TypeError("value must not be null")}let y=new DataView(e.buffer);function m(t,i){try{y.setUint8(t,i,!0)}catch{y=new DataView(e.buffer),y.setUint8(t,i,!0)}}function p(t,i){try{y.setUint32(t,i,!0)}catch{y=new DataView(e.buffer),y.setUint32(t,i,!0)}}function A(t){try{return y.getUint8(t,!0)}catch{return y=new DataView(e.buffer),y.getUint8(t,!0)}}function I(t){try{return y.getInt32(t,!0)}catch{return y=new DataView(e.buffer),y.getInt32(t,!0)}}function g(t){try{return y.getUint32(t,!0)}catch{return y=new DataView(e.buffer),y.getUint32(t,!0)}}return n}s.d(i,{Ig:()=>h})},1527:(t,i,s)=>{var h=s(1928);!function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(window.audioContext=new window.AudioContext);var t=function(i){if(window.audioContext){var s=window.audioContext.createBuffer(1,1,22050),h=window.audioContext.createBufferSource();h.buffer=s,h.connect(window.audioContext.destination),h.start?h.start(0):h.play?h.play(0):h.noteOn&&h.noteOn(0)}document.removeEventListener('touchstart',t),document.removeEventListener('touchend',t),document.removeEventListener('click',t)};document.addEventListener('touchstart',t),document.addEventListener('touchend',t),document.addEventListener('click',t)}(),(async()=>{let t=new Float32Array,i=window.audioContext.createGain();i.gain.value=.1,i.connect(window.audioContext.destination);let s=window.audioContext.currentTime,e=[];const n=new h.i({yN:30,mN:i=>{let s=new Float32Array(i.buffer),h=new Float32Array(t.length+s.length);h.set(t,0),h.set(s,t.length),t=h},pN:t=>{},bufferSize:102400});await n.init();const r=await fetch('./SCC1_Florestan.sf2'),l=new Uint8Array(await r.arrayBuffer());function o(){if(!window.audioContext||!t.length)return;let h=window.audioContext.createBufferSource();const n=t.length/2,r=window.audioContext.createBuffer(2,n,44100);for(let i=0;i<2;i++){const s=r.getChannelData(i);let h=i;for(let i=0;i<n;i++)s[i]=t[h],h+=2}s<window.audioContext.currentTime&&(s=window.audioContext.currentTime),h.buffer=r,h.connect(i),h.start(s),e.push(h),s+=r.duration,t=new Float32Array}let a;n.AN(l),window._tinyMidiStop=async()=>{if(a&&clearInterval(a),t=new Float32Array,e.length){let t=i.gain.value;i.gain.value=0,e.forEach((t=>{t.stop(window.audioContext.currentTime)})),e=[],i.gain.value=t}},window._tinyMidiVolume=(t=1)=>{i.gain.value=t},window._tinyMidiPlay=async(t,i=1)=>{t&&(await window._tinyMidiStop(),-1!=i&&window._tinyMidiVolume(i),s=window.audioContext.currentTime,a=setInterval(o,250),n.IN(t))}})()},1928:(t,i,s)=>{s.d(i,{i:()=>e});var h=s(1885);const e=class{constructor(t={}){this.gN=void 0,this._N=0,this.CN=0,this.EN=0,this.yN=t.yN||100,this.sampleRate=t.sampleRate||44100,this.TN=t.TN||2,this.gain=t.gain||0,t.bufferSize?this.bufferSize=t.bufferSize:this.bN(1),this.mN=t.mN||(()=>{}),this.pN=t.pN||(()=>{}),this.vN=void 0,this.test=0}async init(){if(!this.gN){if('undefined'!=typeof process){const{ON:t}=await import('path'),{LN:i}=await import('module');globalThis.__dirname=t("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js"),globalThis.require=i("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js")}this.gN=await(0,h.i)(),this.SN=this.gN.kN(this.bufferSize),this.RN=this.gN.kN(8)}}bN(t){this.bufferSize=4*this.sampleRate*this.TN*t}MN(){if(!this.gN)throw new Error(`${this.constructor.name} not initalized. call .init()`)}AN(t){this.MN();const{kN:i,xN:s,NN:h,PN:e,DN:n,FN:r,UN:l}=this.gN;s(this._N),this._N=i(t.length),this.gN.BN.set(t,this._N),this.CN=h(this._N,t.length),e(this.CN,2===this.TN?0:2,this.sampleRate,this.gain)}GN(){this.MN();const t=new Uint8Array(this.bufferSize);return t.set(this.gN.BN.subarray(this.SN,this.SN+this.bufferSize)),t}HN(t){const{kN:i,xN:s,WN:h}=this.gN;return s(this.EN),this.EN=i(t.length),this.gN.BN.set(t,this.EN),h(this.EN,t.length)}ZN(t){const{YN:i}=this.gN;return i(this.CN,t,this.TN,this.sampleRate,this.SN,this.bufferSize,this.RN)}IN(t){if(this.MN(),!this.CN)throw new Error('no soundfont buffer set. call .setSoundfont');window.clearTimeout(this.vN);const{VN:i,zN:s}=this.gN;i(this.RN,0,'double'),this.gN.XN(this.CN),this.gN.DN(this.CN,9,128,0),t[0]==='R'.charCodeAt(0)&&(t=t.slice(20));let h=this.HN(t);const e=()=>{h=this.ZN(h);const t=this.GN();this.mN(t),h?this.vN=setTimeout(e,this.yN):this.pN(s(this.RN,'double'))};this.vN=setTimeout(e,16)}}},5621:(t,i,s)=>{t.exports=s.s_+"9f86b5397894e28b5ae2.wasm"},1885:(t,i,s)=>{var h;s.d(i,{i:()=>e});const e=(h="file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/tinymidipcm.mjs",function(t){var i,e,n=void 0!==(t=t||{})?t:{};n.ready=new Promise((function(t,s){i=t,e=s})),["_tsf_load_memory","_tsf_set_output","_tsf_channel_set_bank_preset","_tsf_set_max_voices","_tsf_channel_set_presetnumber","_tsf_reset","_tsf_close","_tml_load_memory","_midi_render","_malloc","_realloc","_free","_fflush","onRuntimeInitialized"].forEach((t=>{Object.getOwnPropertyDescriptor(n.ready,t)||Object.defineProperty(n.ready,t,{get:()=>X('You are getting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),set:()=>X('You are setting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js')})}));var r=Object.assign({},n),l=[],o='object'==typeof window,a='function'==typeof importScripts,c='object'==typeof process&&'object'==typeof process.versions&&'string'==typeof process.versions.node,f=!o&&!c&&!a;if(n.jN)throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');var u,d,w,y='';if(c){if('undefined'==typeof process||!process.release||'node'!==process.release.name)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');var m,p;y=a?require('path').ON(y)+'/':__dirname+'/';var A=()=>{p||(m=require('fs'),p=require('path'))};u=(t,i)=>(A(),t=p.normalize(t),m.qN(t,i?void 0:'utf8')),w=t=>{var i=u(t,!0);return i.buffer||(i=new Uint8Array(i)),N(i.buffer),i},d=(t,i,s)=>{A(),t=p.normalize(t),m.$N(t,(function(t,h){t?s(t):i(h.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,'/'),l=process.argv.slice(2),process.on('uncaughtException',(function(t){if(!(t instanceof et))throw t})),process.on('unhandledRejection',(function(t){throw t})),n.KN=function(){return'[Emscripten Module object]'}}else if(f){if('object'==typeof process&&'function'==typeof require||'object'==typeof window||'function'==typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');'undefined'!=typeof read&&(u=function(t){return read(t)}),w=function(t){let i;return'function'==typeof readbuffer?new Uint8Array(readbuffer(t)):(i=read(t,'binary'),N('object'==typeof i),i)},d=function(t,i,s){setTimeout((()=>i(w(t))),0)},'undefined'!=typeof scriptArgs?l=scriptArgs:void 0!==arguments&&(l=arguments),'undefined'!=typeof print&&('undefined'==typeof console&&(console={}),console.log=print,console.warn=console.error='undefined'!=typeof printErr?printErr:print)}else{if(!o&&!a)throw new Error('environment detection error');if(a?y=self.location.href:'undefined'!=typeof document&&document.currentScript&&(y=document.currentScript.src),h&&(y=h),y=0!==y.indexOf('blob:')?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf('/')+1):'','object'!=typeof window&&'function'!=typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');u=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.send(null),i.responseText},a&&(w=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.responseType='arraybuffer',i.send(null),new Uint8Array(i.response)}),d=(t,i,s)=>{var h=new XMLHttpRequest;h.open('GET',t,!0),h.responseType='arraybuffer',h.onload=()=>{200==h.status||0==h.status&&h.response?i(h.response):s()},h.onerror=s,h.send(null)}}n.print||console.log.bind(console);var I,g,_=n.JN||console.warn.bind(console);function C(t,i){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){X('Module.'+t+' has been replaced with plain '+i+' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)')}})}function E(t){return'FS_createPath'===t||'FS_createDataFile'===t||'FS_createPreloadedFile'===t||'FS_unlink'===t||'addRunDependency'===t||'FS_createLazyFile'===t||'FS_createDevice'===t||'removeRunDependency'===t}Object.assign(n,r),r=null,I='fetchSettings',Object.getOwnPropertyDescriptor(n,I)&&X('`Module.'+I+'` was supplied but `'+I+'` not included in INCOMING_MODULE_JS_API'),n.arguments&&(l=n.arguments),C('arguments','arguments_'),n.QN&&n.QN,C('thisProgram','thisProgram'),n.tP&&n.tP,C('quit','quit_'),N(void 0===n.iP,'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.sP,'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.hP,'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.eP,'Module.filePackagePrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.read,'Module.read option was removed (modify read_ in JS)'),N(void 0===n.nP,'Module.readAsync option was removed (modify readAsync in JS)'),N(void 0===n.rP,'Module.readBinary option was removed (modify readBinary in JS)'),N(void 0===n.lP,'Module.setWindowTitle option was removed (modify setWindowTitle in JS)'),N(void 0===n.oP,'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY'),C('read','read_'),C('readAsync','readAsync'),C('readBinary','readBinary'),C('setWindowTitle','setWindowTitle'),N(!f,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),n.aP&&(g=n.aP),C('wasmBinary','wasmBinary');var T;n.cP;C('noExitRuntime','noExitRuntime'),'object'!=typeof WebAssembly&&X('no native wasm support detected');var b,v,O,L,S,k,R,M,x=!1;function N(t,i){t||X('Assertion failed'+(i?': '+i:''))}function P(t){b=t,n.fP=v=new Int8Array(t),n.uP=L=new Int16Array(t),n.dP=S=new Int32Array(t),n.BN=O=new Uint8Array(t),n.wP=new Uint16Array(t),n.yP=k=new Uint32Array(t),n.mP=R=new Float32Array(t),n.pP=M=new Float64Array(t)}'undefined'!=typeof TextDecoder&&new TextDecoder('utf8');var D=5242880;n.AP&&N(D===n.AP,'the stack size can no longer be determined at runtime');var F=n.IP||16777216;function U(){if(!x){var t=ft(),i=k[t>>2],s=k[t+4>>2];34821223==i&&2310721022==s||X('Stack overflow! Stack cookie has been overwritten at 0x'+t.toString(16)+', expected hex dwords 0x89BACDFE and 0x2135467, but received 0x'+s.toString(16)+' 0x'+i.toString(16)),1668509029!==k[0]&&X('Runtime error: The application has corrupted its heap memory area (address zero)!')}}C('INITIAL_MEMORY','INITIAL_MEMORY'),N(F>=D,'INITIAL_MEMORY should be larger than TOTAL_STACK, was '+F+'! (TOTAL_STACK='+D+')'),N('undefined'!=typeof Int32Array&&'undefined'!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,'JS engine does not provide full typed array support'),N(!n.gP,'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally'),N(16777216==F,'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically'),function(){var t=new Int16Array(1),i=new Int8Array(t.buffer);if(t[0]=25459,115!==i[0]||99!==i[1])throw'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)'}();var B=[],G=[],H=[],W=!1;N(Math.imul,'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),N(Math.fround,'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),N(Math.clz32,'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),N(Math.trunc,'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');var Z=0,Y=null,V=null,z={};function X(t){n._P&&n._P(t),_(t='Aborted('+t+')'),x=!0;var i=new WebAssembly.RuntimeError(t);throw e(i),i}var j={error:function(){X('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM')},init:function(){j.error()},CP:function(){j.error()},EP:function(){j.error()},TP:function(){j.error()},open:function(){j.error()},bP:function(){j.error()},vP:function(){j.error()},OP:function(){j.error()},LP:function(){j.error()},SP:function(){j.error()}};n.kP=j.CP,n.RP=j.EP;var q,$,K,J,Q='data:application/octet-stream;base64,';function tt(t){return t.startsWith(Q)}function it(t){return t.startsWith('file://')}function st(t,i){return function(){var s=t,h=i;return i||(h=n.MP),N(W,'native function `'+s+'` called before runtime initialization'),h[t]||N(h[t],'exported native function `'+s+'` not found'),h[t].apply(null,arguments)}}function ht(t){try{if(t==q&&g)return new Uint8Array(g);if(w)return w(t);throw"both async and sync fetching of the wasm failed"}catch(t){X(t)}}function et(t){this.name='ExitStatus',this.message='Program terminated with exit('+t+')',this.status=t}function nt(t){for(;t.length>0;)t.shift()(n)}function rt(t){rt.xP||(rt.xP={}),rt.xP[t]||(rt.xP[t]=1,c&&(t='warning: '+t),_(t))}function lt(t){try{return T.NP(t-b.byteLength+65535>>>16),P(T.buffer),1}catch(i){_('emscripten_realloc_buffer: Attempted to grow heap from '+b.byteLength+' bytes to '+t+' bytes, but got error: '+i)}}n.PP?tt(q='tinymidipcm.wasm')||($=q,q=n.PP?n.PP($,y):y+$):q=new URL(s(5621),s.b).toString();var ot,at={DP:function(t,i,s){O.copyWithin(t,i,i+s)},FP:function(t){var i=O.length;N((t>>>=0)>i);var s,h,e=2147483648;if(t>e)return _('Cannot enlarge memory, asked to go up to '+t+' bytes, but the limit is '+e+' bytes!'),!1;for(var n=1;n<=4;n*=2){var r=i*(1+.2/n);r=Math.min(r,t+100663296);var l=Math.min(e,(s=Math.max(t,r))+((h=65536)-s%h)%h);if(lt(l))return!0}return _('Failed to grow the heap from '+i+' bytes to '+l+' bytes, not enough memory!'),!1}},ct=(function(){var t,i={kx:at,UP:at};function s(t,i){var s,h=t.exports;n.MP=h,N(T=n.MP.memory,"memory not found in wasm exports"),P(T.buffer),N(n.MP.BP,"table not found in wasm exports"),s=n.MP.GP,G.unshift(s),function(t){if(Z--,n.HP&&n.HP(Z),t?(N(z[t]),delete z[t]):_('warning: run dependency removed without ID'),0==Z&&(null!==Y&&(clearInterval(Y),Y=null),V)){var i=V;V=null,i()}}('wasm-instantiate')}t='wasm-instantiate',Z++,n.HP&&n.HP(Z),t?(N(!z[t]),z[t]=1,null===Y&&'undefined'!=typeof setInterval&&(Y=setInterval((function(){if(x)return clearInterval(Y),void(Y=null);var t=!1;for(var i in z)t||(t=!0,_('still waiting on run dependencies:')),_('dependency: '+i);t&&_('(end of list)')}),1e4))):_('warning: run dependency added without ID');var h=n;function r(t){N(n===h,'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?'),h=null,s(t.WP)}function l(t){return function(){if(!g&&(o||a)){if('function'==typeof fetch&&!it(q))return fetch(q,{credentials:'same-origin'}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+q+"'";return t.arrayBuffer()})).catch((function(){return ht(q)}));if(d)return new Promise((function(t,i){d(q,(function(i){t(new Uint8Array(i))}),i)}))}return Promise.resolve().then((function(){return ht(q)}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){_('failed to asynchronously prepare wasm: '+t),it(q)&&_('warning: Loading from a file URI ('+q+') is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing'),X(t)}))}if(n.ZP)try{return n.ZP(i,s)}catch(t){_('Module.instantiateWasm callback failed with error: '+t),e(t)}(g||'function'!=typeof WebAssembly.instantiateStreaming||tt(q)||it(q)||c||'function'!=typeof fetch?l(r):fetch(q,{credentials:'same-origin'}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(r,(function(t){return _('wasm streaming compile failed: '+t),_('falling back to ArrayBuffer instantiation'),l(r)}))}))).catch(e)}(),n.YP=st("__wasm_call_ctors"),n.kN=st("malloc"),n.xN=st("free"),n.NN=st("tsf_load_memory"),n.VP=st("tsf_close"),n.XN=st("tsf_reset"),n.PN=st("tsf_set_output"),n.FN=st("tsf_set_max_voices"),n.zP=st("realloc"),n.UN=st("tsf_channel_set_presetnumber"),n.DN=st("tsf_channel_set_bank_preset"),n.WN=st("tml_load_memory"),n.YN=st("midi_render"),n.XP=st("__errno_location"),n.jP=st("fflush"),n.qP=function(){return(ct=n.qP=n.MP.$P).apply(null,arguments)}),ft=(n.KP=function(){return(n.KP=n.MP.JP).apply(null,arguments)},n.QP=function(){return(n.QP=n.MP.tD).apply(null,arguments)},n.iD=function(){return(ft=n.iD=n.MP.sD).apply(null,arguments)});function ut(){var t;ct(),N(0==(3&(t=ft()))),k[t>>2]=34821223,k[t+4>>2]=2310721022,k[0]=1668509029}function dt(t){function s(){ot||(ot=!0,n.hD=!0,x||(N(!W),W=!0,U(),nt(G),i(n),n.eD&&n.eD(),N(!n.nD,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(U(),n.rD)for('function'==typeof n.rD&&(n.rD=[n.rD]);n.rD.length;)t=n.rD.shift(),H.unshift(t);var t;nt(H)}()))}t=t||l,Z>0||(ut(),function(){if(n.lD)for('function'==typeof n.lD&&(n.lD=[n.lD]);n.lD.length;)t=n.lD.shift(),B.unshift(t);var t;nt(B)}(),Z>0||(n.oD?(n.oD('Running...'),setTimeout((function(){setTimeout((function(){n.oD('')}),1),s()}),1)):s(),U()))}if(n.aD=st("stackSave"),n.cD=st("stackRestore"),n.fD=st("stackAlloc"),n.VN=function(t,i,s="i8"){switch(s.endsWith('*')&&(s='*'),s){case'i1':case'i8':v[t>>0]=i;break;case'i16':L[t>>1]=i;break;case'i32':S[t>>2]=i;break;case'i64':J=[i>>>0,(K=i,+Math.abs(K)>=1?K>0?(0|Math.min(+Math.floor(K/4294967296),4294967295))>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],S[t>>2]=J[0],S[t+4>>2]=J[1];break;case'float':R[t>>2]=i;break;case'double':M[t>>3]=i;break;case'*':k[t>>2]=i;break;default:X('invalid type for setValue: '+s)}},n.zN=function(t,i="i8"){switch(i.endsWith('*')&&(i='*'),i){case'i1':case'i8':return v[t>>0];case'i16':return L[t>>1];case'i32':case'i64':return S[t>>2];case'float':return R[t>>2];case'double':return M[t>>3];case'*':return k[t>>2];default:X('invalid type for getValue: '+i)}return null},['run','UTF8ArrayToString','UTF8ToString','stringToUTF8Array','stringToUTF8','lengthBytesUTF8','addOnPreRun','addOnInit','addOnPreMain','addOnExit','addOnPostRun','addRunDependency','removeRunDependency','FS_createFolder','FS_createPath','FS_createDataFile','FS_createPreloadedFile','FS_createLazyFile','FS_createLink','FS_createDevice','FS_unlink','getLEB','getFunctionTables','alignFunctionTables','registerFunctions','prettyPrint','getCompilerSetting','print','printErr','callMain','abort','keepRuntimeAlive','wasmMemory','stackAlloc','stackSave','stackRestore','getTempRet0','setTempRet0','writeStackCookie','checkStackCookie','ptrToString','zeroMemory','stringToNewUTF8','exitJS','getHeapMax','emscripten_realloc_buffer','ENV','ERRNO_CODES','ERRNO_MESSAGES','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','DNS','getHostByName','Protocols','Sockets','getRandomDevice','warnOnce','traverseStack','UNWIND_CACHE','convertPCtoSourceLocation','readAsmConstArgsArray','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','handleException','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','freeTableIndexes','functionsInTableMap','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','PATH','PATH_FS','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16Decoder','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeArrayToMemory','writeAsciiToMemory','SYSCALLS','getSocketFromFD','getSocketAddress','JSEvents','registerKeyEventCallback','specialHTMLTargets','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','currentFullscreenStrategy','restoreOldWindowedStyle','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','demangle','demangleAll','jsStackTrace','stackTrace','ExitStatus','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','dlopenMissingError','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','uncaughtExceptionCount','exceptionLast','exceptionCaught','ExceptionInfo','exception_addRef','exception_decRef','Browser','setMainLoop','wget','FS','MEMFS','TTY','PIPEFS','SOCKFS','_setNetworkCallback','tempFixedLengthArray','miniTempWebGLFloatBuffers','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','GL','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','AL','SDL_unicode','SDL_ttfContext','SDL_audio','SDL','SDL_gfx','GLUT','EGL','GLFW_Window','GLFW','GLEW','IDBStore','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){var i="'"+t+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";E(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),X(i)}})})),['ptrToString','zeroMemory','stringToNewUTF8','exitJS','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','getHostByName','getRandomDevice','traverseStack','convertPCtoSourceLocation','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeAsciiToMemory','getSocketFromFD','getSocketAddress','registerKeyEventCallback','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','ExceptionInfo','exception_addRef','exception_decRef','setMainLoop','_setNetworkCallback','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','SDL_unicode','SDL_ttfContext','SDL_audio','GLFW_Window','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){'undefined'==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{configurable:!0,get:function(){var i='`'+t+'` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line';E(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),rt(i)}})})),V=function t(){ot||dt(),ot||(V=t)},n.uD)for('function'==typeof n.uD&&(n.uD=[n.uD]);n.uD.length>0;)n.uD.pop()();return dt(),t.ready})}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,r),s.exports}r.qA=e,t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",i="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",h=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},r.a=(e,n,r)=>{var l;r&&((l=[]).d=-1);var o,a,c,f=new Set,u=e.exports,d=new Promise(((t,i)=>{c=i,a=t}));d[i]=u,d[t]=t=>(l&&t(l),f.forEach(t),d.catch((t=>{}))),e.exports=d,n((e=>{var n;o=(e=>e.map((e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var n=[];n.d=0,e.then((t=>{r[i]=t,h(n)}),(t=>{r[s]=t,h(n)}));var r={};return r[t]=t=>t(n),r}}var l={};return l[t]=t=>{},l[i]=e,l})))(e);var r=()=>o.map((t=>{if(t[s])throw t[s];return t[i]})),a=new Promise((i=>{(n=()=>i(r)).r=0;var s=t=>t!==l&&!f.has(t)&&(f.add(t),t&&!t.d&&(n.r++,t.push(n)));o.map((i=>i[t](s)))}));return n.r?a:r()}),(t=>(t?c(d[s]=t):a(u),h(l)))),l&&l.d<0&&(l.d=0)},r.d=(t,i)=>{for(var s in i)r.i_(i,s)&&!r.i_(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},r.i_=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r.s_="/Client2/",r.b=document.baseURI||self.location.href;r(1979)})();