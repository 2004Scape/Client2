(()=>{"use strict";var t,i,s,h,e={3099:(t,i,s)=>{s.d(i,{K:()=>M});var h=s(2790),e=s(8078),n=s(2028),r=s(2383),o=s(1995),l=(s(1527),s(9080)),a=s(7221),c=s(3909),f=s(3693),u=s(4191),d=s(9345),w=s(6121),y=s(2991),p=s(1840),m=s(312),A=s(9178),I=s(8067),g=s(8934),_=s(8809),C=s(1519),E=s(5810),T=s(3584),b=s(7958),v=s(2441),O=s(8056),L=s(551),S=s(1089),k=s(2157),R=s(8762);class M extends o.Z{static tt=225;static it=10;static portOffset=0;static st=!0;static ht=!1;static et='';static nt='';static rt=!1;static ot='https://raw.githubusercontent.com/2004scape/Server/main';static exponent=58778699976184461502525193738213253649000149147835990136706041084440742975821n;static lt=7162900525229798032761816791230527296329313291232324290237849263501208207972894053929065636522363163621000728841182238772712427862772219676577293600221789n;static ct=0;static ft=0;static ut=0;static dt=0;static wt=0;static yt=0;static At=0;static It=0;static gt=0;static _t=0;static Ct=0;static Et=0;static Tt=0;static bt=0;static vt=0;static Ot=()=>{a.Z.ht=!1,e.Z.ht=!1,M.ht=!1,c.Z.ht=!1};static Lt=()=>{a.Z.ht=!0,e.Z.ht=!0,M.ht=!0,c.Z.ht=!0};St=2048;kt=2047;Rt=!1;Mt=!1;xt=!1;Nt=!1;db=null;Pt=0;Dt=[];stream=null;in=r.Z.Ft(1);Ut=r.Z.Ft(1);Bt=r.Z.Ft(1);Gt=0n;Ht=0;Wt=0;Yt=0;Zt=null;Vt=0;packetSize=0;Xt=0;zt=0;jt=0;Kt=null;qt=!0;$t=0;Jt=0;Qt=null;ti=null;ii=null;si=null;hi=null;ei=null;ni=null;ri=null;oi=null;li=null;ai=null;ci='';fi='';username='';password='';ui=null;di=null;wi=null;yi=null;pi=[];mi=!1;Ai=null;Ii=null;gi=null;_i=null;Ci=null;Ei=null;Ti=null;bi=null;vi=null;Oi=null;Li=new Int32Array(256);Si=0;ki=0;Ri=0;Mi=null;xi=null;Ni=null;Pi=null;Di=null;Fi=null;Ui=null;Bi=null;Gi=null;Hi=null;Wi=null;Yi=null;Zi=null;Vi=null;Xi=null;zi=null;ji=null;Ki=null;qi=null;$i=null;Ji=null;Qi=new Int32Array(33);ts=new Int32Array(33);ss=new Int32Array(151);hs=new Int32Array(151);es=null;ns=null;rs=null;os=null;ls=null;cs=null;fs=new d.to(13,null);us=null;ds=null;ws=new d.to(50,null);ys=new d.to(50,null);ps=new d.to(20,null);As=new d.to(20,null);Is=null;gs=new d.to(8,null);_s=null;Cs=null;Es=null;Ts=null;bs=null;vs=null;Os=null;Ls=null;Ss=null;ks=null;Rs=null;Ms=null;xs=null;Ns=null;Ps=null;Ds=null;Fs=null;Us=null;Bs=new d.to(1e3,null);Gs=!1;Hs=!1;Ws=!1;Ys=!1;Zs=-1;Vs=0;Xs=0;zs=0;js=0;Ks=0;qs=0;$s=!1;Js=0;Qs=0;th=0;ih=0;sh=0;hh=0;eh=[];nh=-1;rh=-1;oh=new h.Z;lh=78;ah=0;fh=0;uh=[];dh=0;wh=0;yh=0;ph=0;mh=0;Ah=0;Ih=0;gh=0;_h=[];Ch=[];Eh=[];Th=[];bh=null;Oh=-1;Lh=3;Sh=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];kh=0;Rh=0;Mh=0;xh=!1;Nh=0;Ph=!1;Dh='';Fh='';Uh=0;Bh='';Gh=!1;Hh=-1;Wh=new d.to(100,null);Yh=new d.to(100,null);messageType=new Int32Array(100);Zh=new Int32Array(100);Vh=0;Xh=0;zh=0;jh='';Kh=0;qh=0;$h=0;Jh=0;Qh=0;te=0;ie=0;se=0;he=0;ee=!1;ne=0;re=0;oe=0;le=0;ae=null;ce=0;fe=0;ue=0;de=0;we=!1;ye=[];pe=[];me=0;Ae=0;Ie=0;ge=null;_e=0;Ce=new Int32Array(500);Ee=new Int32Array(500);Te=new Int32Array(500);be=new Int32Array(500);ve=0;Oe=0;Le=0;Se='';ke=!1;Re=-1;Me=0;xe=0;Ne=0;Pe=0;De=0;Fe=new Int32Array(1e3);Ue=new Int32Array(1e3);Be=null;Ge=0;He=0;We=0;Ye=0;Ze=0;Ve=!1;Xe=0;ze=0;je=0;Ke=0;qe=2;$e=2;Je=1;Qe=new Int32Array(5);tn=new d.to(5,!1);sn=new Int32Array(5);hn=new Int32Array(5);en=new Int32Array(5);nn=0;rn=0;ln=0;an=0;cn=0;fn=0;un=0;dn=0;wn=0;yn=1;pn=2;mn=-1;An=0;In=0;gn=0;_n=0;Cn=0;En=0;Tn=null;bn=null;vn=null;On=0;Ln=0;Sn=new Int8Array(16384);kn=new d.to(f.Z.Rn,null);Mn=0;xn=0;Nn=128;Pn=0;Dn=0;Fn=0;Un=0;Bn=0;Gn=null;Hn=null;Wn=new d.Yn(f.Z.Zn,f.Z.Zn);Vn=0;Xn=0;zn=0;jn=0;Kn=0;qn=0;$n=0;Jn=0;Qn=0;tr=0;ir=0;sr=0;hr=new d.to(this.St,null);er=0;nr=new Int32Array(this.St);rr=0;lr=0;ar=new Int32Array(this.St);cr=new Int32Array(1e3);ur=new d.to(this.St,null);dr=new d.to(8192,null);wr=0;yr=new Int32Array(8192);pr=new l.Z;mr=new l.Z;Ar=new l.Z;Ir=new l.Z;gr=new d._r(f.Z.Rn,f.Z.Zn,f.Z.Zn,null);Cr=new l.Z;Er=new Int32Array(4e3);Tr=new Int32Array(4e3);br=new Int32Array(f.Z.Zn*f.Z.Zn);vr=new Int32Array(f.Z.Zn*f.Z.Zn);Or=0;Lr=null;Sr=0;kr=0;Rr=-1;Mr=0;Nr=0;Pr=0;Dr=0;Fr=!1;Ur=!0;Br=!1;Gr=new Int32Array(7);Hr=new Int32Array(5);Wr=0;Yr=0;static Zr=50;Vr=new Int32Array(M.Zr);Xr=new Int32Array(M.Zr);zr=new Int32Array(M.Zr);jr=new Int32Array(M.Zr);Kr=new Int32Array(M.Zr);qr=new Int32Array(M.Zr);$r=new Int32Array(M.Zr);Jr=new d.to(M.Zr,null);Qr=new d.to(100,null);io=new BigInt64Array(100);so=new Int32Array(100);ho=null;eo=0;no=!0;ro=new Int32Array(50);oo=new Int32Array(50);lo=new Int32Array(50);ao=192;co=-1;fo=-1;uo=0;do=0;wo=0;yo=!0;po=null;mo=0;Ao=0;Io=192;_o=()=>{try{this.stream&&this.stream.close()}catch(t){}this.stream=null,(0,T.Co)(),this.Ut=null,this.Bt=null,this.in=null,this.vn=null,this.Tn=null,this.bn=null,this.Gn=null,this.Hn=null,this.Be=null,this.kn=null,this.br=null,this.vr=null,this.Er=null,this.Tr=null,this.Sn=null,this.xi=null,this.Ni=null,this.Pi=null,this.Di=null,this.Fi=null,this.Ui=null,this.Bi=null,this.Gi=null,this.Hi=null,this.Wi=null,this.Yi=null,this.Zi=null,this.Vi=null,this.Xi=null,this.zi=null,this.ji=null,this.Ki=null,this.es=null,this.rs=null,this.ns=null,this.os=null,this.ls=null,this.cs=null,this.fs=null,this.Os=null,this.Ls=null,this.Ss=null,this.ks=null,this.Rs=null,this.Ms=null,this.xs=null,this.Ns=null,this.Ps=null,this.Ds=null,this.ds=null,this.ps=null,this.As=null,this.gs=null,this._s=null,this.Cs=null,this.Es=null,this.Ts=null,this.ws=null,this.ys=null,this.Wn=null,this.hr=null,this.nr=null,this.ar=null,this.ur=null,this.cr=null,this.dr=null,this.yr=null,this.gr=null,this.Cr=null,this.Ir=null,this.pr=null,this.mr=null,this.Ar=null,this.Te=null,this.be=null,this.Ce=null,this.Ee=null,this.eh=null,this.ye=null,this.Fe=null,this.Ue=null,this.Bs=null,this.us=null,this.Qr=null,this.io=null,this.so=null,this.si=null,this.hi=null,this.Qt=null,this.ti=null,this.ii=null,this.ei=null,this.ni=null,this.ri=null,this.oi=null,this.Eo(),b.Z._o(),v.Z._o(),p.Z._o(),O.Z.To=null,_.Z.To=null,h.Z.To=null,I.Z.To=null,L.Z.To=null,L.Z.bo=null,S.Z.To=null,this.vo=null,u.Z.bo=null,e.Z._o(),a.Z._o(),A.Z._o(),k.Z.To=[],R.Z.To=[]};Oo(){return this.$t}Lo(){return this.Gh}So(){return this.Ph}ko(){return this.rh}Ro(){return this.Zs}Eo=()=>{this.mi=!1,this.Mi&&(clearInterval(this.Mi),this.Mi=null),this.li=null,this.ai=null,this.pi=[],this.Ti=null,this.bi=null,this.vi=null,this.Oi=null,this._i=null,this.gi=null,this.Ci=null,this.Ei=null,this.Ai=null,this.Ii=null};Mo=async(t,i,s,h)=>{let e=5,o=await(this.db?.xo(t));if(o&&r.Z.No(o)!==s&&(o=void 0),o)return new n.Z(o);for(;!o;){await this.Po(h,`Requesting ${i}`);try{o=await(0,C.Do)(`${M.nt}/${t}${s}`)}catch(t){o=void 0;for(let t=e;t>0;t--)await this.Po(h,`Error loading - Will retry in ${t} secs.`),await(0,C.Fo)(1e3);e*=2,e>60&&(e=60)}}return await(this.db?.Uo(t,o)),new n.Z(o)};Bo=async(t,i,s)=>{let h=await(this.db?.xo(t+'.mid'));if(h&&12345678!==i&&r.Z.No(h)!==i&&(h=void 0),!h)try{h=await(0,C.Do)(`${M.nt}/${t}_${i}.mid`),s!==h.length&&(h=h.slice(0,s))}catch(t){}if(!h)return;await(this.db?.Uo(t+'.mid',h));const e=new r.Z(Uint8Array.from(h)).Go,n=E.Z.read(e,h,s,4);(0,T.Ho)(n,this.Io)};Wo=()=>{if(w.Yo.fillStyle='black',w.Yo.fillRect(0,0,this.width,this.height),this.Zo(1),this.xt){this.mi=!1,w.Yo.font='bold 16px helvetica, sans-serif',w.Yo.textAlign='left',w.Yo.fillStyle='yellow';let t=35;w.Yo.fillText('Sorry, an error has occured whilst loading RuneScape',30,t),t+=50,w.Yo.fillStyle='white',w.Yo.fillText('To fix this try the following (in order):',30,t),t+=50,w.Yo.font='bold 12px helvetica, sans-serif',w.Yo.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.Yo.fillText('2: Try clearing your web-browsers cache from tools->internet options',30,t),t+=30,w.Yo.fillText('3: Try using a different game-world',30,t),t+=30,w.Yo.fillText('4: Try rebooting your computer',30,t),t+=30,w.Yo.fillText('5: Try selecting a different version of Java from the play-game menu',30,t)}if(this.Nt&&(this.mi=!1,w.Yo.font='bold 20px helvetica, sans-serif',w.Yo.textAlign='left',w.Yo.fillStyle='white',w.Yo.fillText('Error - unable to load game!',50,50),w.Yo.fillText('To play RuneScape make sure you play from',50,100),w.Yo.fillText('https://2004scape.org',50,150)),this.Mt){this.mi=!1,w.Yo.font='bold 13px helvetica, sans-serif',w.Yo.textAlign='left',w.Yo.fillStyle='yellow';let t=35;w.Yo.fillText('Error a copy of RuneScape already appears to be loaded',30,t),t+=50,w.Yo.fillStyle='white',w.Yo.fillText('To fix this try the following (in order):',30,t),t+=50,w.Yo.font='bold 12px helvetica, sans-serif',w.Yo.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.Yo.fillText('2: Try rebooting your computer, and reloading',30,t)}};Vo=t=>{if(!t.Xo)return!1;for(let i=0;i<t.Xo.length;i++){const s=this.zo(t,i);if(!t.jo)return!1;const h=t.jo[i];if(2===t.Xo[i]){if(s>=h)return!1}else if(3===t.Xo[i]){if(s<=h)return!1}else if(4===t.Xo[i]){if(s===h)return!1}else if(s!==h)return!1}return!0};Ko=(t,i,s,h,e)=>{this.bs?.draw(t,i),this.vs?.draw(t,i+e-16),y.Z.fillRect(t,i+16,16,e-32,m.Z.qo);let n=(e-32)*e/h|0;n<8&&(n=8);const r=(e-n-32)*s/(h-e)|0;y.Z.fillRect(t,i+r+16,16,n,m.Z.$o),y.Z.Jo(t,i+r+16,m.Z.Qo,n),y.Z.Jo(t+1,i+r+16,m.Z.Qo,n),y.Z.tl(t,i+r+16,m.Z.Qo,16),y.Z.tl(t,i+r+17,m.Z.Qo,16),y.Z.Jo(t+15,i+r+16,m.Z.il,n),y.Z.Jo(t+14,i+r+17,m.Z.il,n-1),y.Z.tl(t,i+r+n+15,m.Z.il,16),y.Z.tl(t+1,i+r+n+14,m.Z.il,15)};sl=(t,i)=>{let s=!1;const e=h.Z.To[t];if(!e.hl)return!1;for(let t=0;t<e.hl.length&&-1!==e.hl[t];t++){const n=h.Z.To[e.hl[t]];if(1===n.type&&(s||=this.sl(n.id,i)),6===n.type&&(-1!==n.el||-1!==n.nl)){let t;if(t=this.Vo(n)?n.nl:n.el,-1!==t){const h=I.Z.To[t];if(n.rl+=i,h.delay)for(;n.rl>h.delay[n.ol];)n.rl-=h.delay[n.ol]+1,n.ol++,n.ol>=h.ll&&(n.ol-=h.al,(n.ol<0||n.ol>=h.ll)&&(n.ol=0)),s=!0}}}return s};cl=(t,i,s,n,r=!1)=>{if(0!==t.type||!t.hl||t.hide&&this.Kh!==t.id&&this.qh!==t.id&&this.$h!==t.id)return;const o=y.Z.left,l=y.Z.top,a=y.Z.right,c=y.Z.bottom;y.Z.fl(i,s,i+t.width,s+t.height);const f=t.hl.length;for(let o=0;o<f;o++){if(!t.ul||!t.dl)continue;let l=t.ul[o]+i,a=t.dl[o]+s-n;const c=h.Z.To[t.hl[o]];if(l+=c.x,a+=c.y,r&&y.Z.wl(l,a,c.width,c.height,m.Z.yl),c.pl>0&&this.ml(c),c.type===h.Z.Al)c.Il>c.scroll-c.height&&(c.Il=c.scroll-c.height),c.Il<0&&(c.Il=0),this.cl(c,l,a,c.Il,r),c.scroll>c.height&&this.Ko(l+c.width,a,c.Il,c.scroll,c.height);else if(c.type===h.Z.gl){let t=0;for(let i=0;i<c.height;i++)for(let s=0;s<c.width;s++){if(!(c._l&&c.Cl&&c.El&&c.Tl))continue;let h=l+s*(c.bl+32),e=a+i*(c.vl+32);if(t<20&&(h+=c._l[t],e+=c.Cl[t]),c.El[t]>0){let i=0,s=0;const n=c.El[t]-1;if(h>=-32&&h<=512&&e>=-32&&e<=334||0!==this.te&&this.Qh===t){const r=p.Z.Ol(n,c.Tl[t]);if(0!==this.te&&this.Qh===t&&this.Jh===c.id?(i=this.Ll-this.ie,s=this.Sl-this.se,i<5&&i>-5&&(i=0),s<5&&s>-5&&(s=0),this.he<5&&(i=0,s=0),r.kl(128,h+i,e+s)):0!==this.ce&&this.fe===t&&this.ue===c.id?r.kl(128,h,e):r.draw(h,e),33===r.Rl||1!==c.Tl[t]){const n=c.Tl[t];this.ui?.Ml(h+i+1,e+10+s,this.xl(n),m.Z.Nl),this.ui?.Ml(h+i,e+9+s,this.xl(n),m.Z.Pl)}}}else if(c.Dl&&t<20){const i=c.Dl[t];i?.draw(h,e)}t++}}else if(c.type===h.Z.Fl)c.fill?y.Z.fillRect(l,a,c.width,c.height,c.Ul):y.Z.wl(l,a,c.width,c.height,c.Ul);else if(c.type===h.Z.Bl){const t=c.font;let i=c.Ul,s=c.text;if(this.$h!==c.id&&this.qh!==c.id&&this.Kh!==c.id||0===c.Gl||(i=c.Gl),this.Vo(c)&&(i=c.Hl,c.Wl&&c.Wl.length>0&&(s=c.Wl)),c.Yl===h.Z.Zl&&this.we&&(s='Please wait...',i=c.Ul),!t||!s)continue;for(let h=a+t.height;s.length>0;h+=t.height){if(-1!==s.indexOf('%')){for(;;){const t=s.indexOf('%1');if(-1===t)break;s=s.substring(0,t)+this.Vl(this.zo(c,0))+s.substring(t+2)}for(;;){const t=s.indexOf('%2');if(-1===t)break;s=s.substring(0,t)+this.Vl(this.zo(c,1))+s.substring(t+2)}for(;;){const t=s.indexOf('%3');if(-1===t)break;s=s.substring(0,t)+this.Vl(this.zo(c,2))+s.substring(t+2)}for(;;){const t=s.indexOf('%4');if(-1===t)break;s=s.substring(0,t)+this.Vl(this.zo(c,3))+s.substring(t+2)}for(;;){const t=s.indexOf('%5');if(-1===t)break;s=s.substring(0,t)+this.Vl(this.zo(c,4))+s.substring(t+2)}}const e=s.indexOf('\\n');let n;-1!==e?(n=s.substring(0,e),s=s.substring(e+2)):(n=s,s=''),c.Xl?t.zl(l+(c.width/2|0),h,n,i,c.jl):t.Kl(l,h,n,i,c.jl)}}else if(c.type===h.Z.ql){let t;t=this.Vo(c)?c.$l:c.Jl,t?.draw(l,a)}else if(c.type===h.Z.Ql){const t=e.Z.ta,i=e.Z.ia;e.Z.ta=l+(c.width/2|0),e.Z.ia=a+(c.height/2|0);const s=e.Z.sin[c.sa]*c.zoom>>16,h=e.Z.cos[c.sa]*c.zoom>>16,n=this.Vo(c);let r;r=n?c.nl:c.el;let o=null;if(-1===r)o=c.ha(-1,-1,n);else{const t=I.Z.To[r];t.frames&&t.ea&&(o=c.ha(t.frames[c.ol],t.ea[c.ol],n))}o&&o.na(0,c.ra,0,c.sa,0,s,h),e.Z.ta=t,e.Z.ia=i}else if(c.type===h.Z.oa){const t=c.font;if(!t||!c.El||!c.Tl)continue;let i=0;for(let s=0;s<c.height;s++)for(let h=0;h<c.width;h++){if(c.El[i]>0){const e=p.Z.get(c.El[i]-1);let n=e.name;if((e.la||1!==c.Tl[i])&&(n=n+' x'+this.aa(c.Tl[i])),!n)continue;const r=l+h*(c.bl+115),o=a+s*(c.vl+12);c.Xl?t.zl(r+(c.width/2|0),o,n,c.Ul,c.jl):t.Kl(r,o,n,c.Ul,c.jl)}i++}}}y.Z.fl(o,l,a,c)};ml=t=>{let i=t.pl;if(i>=h.Z.ca&&i<=h.Z.fa)i--,i>=this.Wr?(t.text='',t.Yl=0):(t.text=this.Qr[i],t.Yl=1);else if(i>=h.Z.ua&&i<=h.Z.da)i-=h.Z.ua,i>=this.Wr?(t.text='',t.Yl=0):(0===this.so[i]?t.text='@red@Offline':this.so[i]===M.it?t.text='@gre@World-'+(this.so[i]-9):t.text='@yel@World-'+(this.so[i]-9),t.Yl=1);else if(i===h.Z.wa)t.scroll=15*this.Wr+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i>=h.Z.ya&&i<=h.Z.pa)i-=h.Z.ya,i>=this.fh?(t.text='',t.Yl=0):(t.text=g.Z.ma(g.Z.Aa(this.uh[i])),t.Yl=1);else if(i===h.Z.Ia)t.scroll=15*this.fh+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i===h.Z.ga){if(t.sa=150,t.ra=2047&(256*Math.sin(this.Pt/40)|0),this.Br){this.Br=!1;const i=new d.to(7,null);let s=0;for(let t=0;t<7;t++){const h=this.Gr[t];h>=0&&(i[s++]=_.Z.To[h].ha())}const h=A.Z._a(i,s);for(let t=0;t<5;t++)0!==this.Hr[t]&&(h.Ca(u.Z.Ea[t][0],u.Z.Ea[t][this.Hr[t]]),1===t&&h.Ca(u.Z.Ta[0],u.Z.Ta[this.Hr[t]]));if(this.Lr){const i=I.Z.To[this.Lr.ba].frames;i&&(h.va(),h.Oa(i[0]),h.La(64,850,-30,-50,-30,!0),t.model=h)}}}else if(i===h.Z.Sa)this.Fs||(this.Fs=t.Jl,this.Us=t.$l),this.Ur?t.Jl=this.Us:t.Jl=this.Fs;else if(i===h.Z.ka)this.Fs||(this.Fs=t.Jl,this.Us=t.$l),this.Ur?t.Jl=this.Fs:t.Jl=this.Us;else if(i===h.Z.Ra)t.text=this.Se,this.Pt%20<10?t.text=t.text+'|':t.text=t.text+' ';else if(i===h.Z.Ma)this.Fr?this.ke?(t.Ul=m.Z.RED,t.text='Moderator option: Mute player for 48 hours: <ON>'):(t.Ul=m.Z.yl,t.text='Moderator option: Mute player for 48 hours: <OFF>'):t.text='';else if(i===h.Z.xa||i===h.Z.Na)if(0===this.Me)t.text='';else{let i;i=0===this.xe?'earlier today':1===this.xe?'yesterday':this.xe+' days ago',t.text='You last logged in '+i+' from: '+g.Z.Pa(this.Me)}else if(i===h.Z.Da)0===this.Pe&&(t.text='0 unread messages',t.Ul=m.Z.Pl),1===this.Pe&&(t.text='1 unread message',t.Ul=m.Z.GREEN),this.Pe>1&&(t.text=this.Pe+' unread messages',t.Ul=m.Z.GREEN);else if(i===h.Z.Fa)if(201===this.Ne)t.text='';else if(200===this.Ne)t.text='You have not yet set any password recovery questions.';else{let i;i=0===this.Ne?'Earlier today':1===this.Ne?'Yesterday':this.Ne+' days ago',t.text=i+' you changed your recovery questions'}else i===h.Z.Ua?201===this.Ne?t.text='':200===this.Ne?t.text='We strongly recommend you do so now to secure your account.':t.text='If you do not remember making this change then cancel it immediately':i===h.Z.Ba&&(201===this.Ne?t.text='':(this.Ne,t.text="Do this from the 'account management' area on our front webpage"))};zo=(t,i)=>{if(!t.scripts||i>=t.scripts.length)return-2;try{const s=t.scripts[i];if(!s)return-1;let e=0,n=0;for(;;){const t=s[n++];if(0===t)return e;if(1===t)e+=this.Ch[s[n++]];else if(2===t)e+=this.Eh[s[n++]];else if(3===t)e+=this._h[s[n++]];else if(4===t){const t=h.Z.To[s[n++]],i=s[n++]+1;if(t.El&&t.Tl)for(let s=0;s<t.El.length;s++)t.El[s]===i&&(e+=t.Tl[s]);else e+=0}else if(5===t)e+=this.ye[s[n++]];else if(6===t)e+=this.Th[this.Eh[s[n++]]-1];else if(7===t)e+=100*this.ye[s[n++]]/46875|0;else if(8===t)e+=this.Lr?.Ga||0;else if(9===t)for(let t=0;t<19;t++)18===t&&(t=20),e+=this.Eh[t];else if(10===t){const t=h.Z.To[s[n++]],i=s[n++]+1;for(let s=0;s<t.El.length;s++)if(t.El[s]===i){e+=999999999;break}}else if(11===t)e+=this.Sr;else if(12===t)e+=this.Mr;else if(13===t){const t=this.ye[s[n++]];e+=0==(t&1<<s[n++])?0:1}}}catch(t){return-1}};Vl=t=>t<999999999?String(t):'*';aa=t=>{let i=String(t);for(let t=i.length-3;t>0;t-=3)i=i.substring(0,t)+','+i.substring(t);return i.length>8?i='@gre@'+i.substring(0,i.length-8)+' million @whi@('+i+')':i.length>4&&(i='@cya@'+i.substring(0,i.length-4)+'K @whi@('+i+')'),' '+i};xl=t=>t<1e5?String(t):t<1e7?(t/1e3|0)+'K':(t/1e6|0)+'M'}},1803:(t,i,s)=>{s.d(i,{O:()=>r});var h=s(1995),e=s(3099),n=s(1519);async function r(){await async function(){0===h.Z.getParameter('world').length&&h.Z.setParameter('world','1');'localhost'===window.location.hostname&&'0'===h.Z.getParameter('world')?(e.K.et='http://localhost',e.K.nt='http://localhost',e.K.portOffset=0):await async function(t){const i=await o(t,parseInt(h.Z.getParameter('world'),10)),s=new URL(i.address);e.K.it=10+i.id-1,e.K.et=`${s.protocol}//${s.hostname}`,e.K.nt=`${s.protocol}//${s.hostname}:${s.port}`,t||(e.K.et=e.K.et.replace('https:','http:'));e.K.portOffset=i.portOffset,e.K.st=!0===i?.st,h.Z.setParameter('world',i.id.toString(10))}(window.location.protocol.startsWith('https'))}(),function(){0===h.Z.getParameter('detail').length&&h.Z.setParameter('detail','high');'low'===h.Z.getParameter('detail')?e.K.Lt():e.K.Ot()}(),0===h.Z.getParameter('method').length&&h.Z.setParameter('method','0')}async function o(t,i,s=0){if(s>=10)throw new Error('could not find world to connect!');const h=t?'https:':'http:';let e;try{e=JSON.parse(await(0,n.Ha)(`${h}//2004scape.org/api/v1/worldlist`))}catch(h){return await(0,n.Fo)(1e3),o(t,i,++s)}const r=e.find((t=>t.id===i));return r||o(t,i,10)}},1979:(t,i,s)=>{s.a(t,(async(t,i)=>{try{var h=s(8067),e=s(7958),n=s(1840),r=s(2441),o=s(8809),l=s(551),a=s(1089),c=s(2790),f=s(651),u=s(2991),d=s(8078),w=s(664),y=s(6542),p=s(4628),m=s(9178),A=s(312),I=s(2383),g=s(1812),_=s(741),C=s(7576),E=s(8432),T=s(9782),b=s(9995),v=s(9897),O=s(6054),L=s(6970),S=(s(1527),s(5810)),k=s(9080),R=s(8934),M=s(6884),x=s(7221),N=s(3909),P=s(3714),D=s(1908),F=s(5534),U=s(6150),B=s(7396),G=s(3693),H=s(8603),W=s(4191),Y=s(1353),Z=s(7973),V=s(682),X=s(1810),z=s(5659),j=s(3584),K=s(1519),q=s(9345),$=s(3099),J=s(2157),Q=s(8762),tt=s(8056),it=s(1803);class t extends $.K{load=async()=>{if(this.Rt)this.Mt=!0;else{this.Rt=!0;try{await this.Po(10,'Connecting to fileserver'),await S.Z.load(await(await fetch('bz2.wasm')).arrayBuffer()),this.db=new E.Z(await E.Z.openDatabase());const t=new I.Z(new Uint8Array(await(0,K.Do)(`${$.K.nt}/crc`)));for(let i=0;i<9;i++)this.Dt[i]=t.Go;$.K.ht||await this.Bo('scape_main',12345678,4e4);const i=await this.Mo('title','title screen',this.Dt[1],10);this.Kt=i,this.ui=p.Z.Wa(i,'p11'),this.di=p.Z.Wa(i,'p12'),this.wi=p.Z.Wa(i,'b12'),this.yi=p.Z.Wa(i,'q8'),await this.Ya(),this.Za();const s=await this.Mo('config','config',this.Dt[2],15),u=await this.Mo('interface','interface',this.Dt[3],20),A=await this.Mo('media','2d graphics',this.Dt[4],30),g=await this.Mo('models','3d graphics',this.Dt[5],40),_=await this.Mo('textures','textures',this.Dt[6],60),C=await this.Mo('wordenc','chat system',this.Dt[7],65),T=await this.Mo('sounds','sound effects',this.Dt[8],70);this.Hn=new q.Va(G.Z.Rn,G.Z.Zn,G.Z.Zn),this.Gn=new q.Xa(G.Z.Rn,G.Z.Zn+1,G.Z.Zn+1),this.Gn&&(this.Be=new x.Z(this.Gn,G.Z.Zn,G.Z.Rn,G.Z.Zn));for(let t=0;t<G.Z.Rn;t++)this.kn[t]=new G.Z;this.us=new y.Z(512,512),await this.Po(75,'Unpacking media'),this.es=w.Z.Wa(A,'invback',0),this.ns=w.Z.Wa(A,'chatback',0),this.rs=w.Z.Wa(A,'mapback',0),this.os=w.Z.Wa(A,'backbase1',0),this.ls=w.Z.Wa(A,'backbase2',0),this.cs=w.Z.Wa(A,'backhmid1',0);for(let t=0;t<13;t++)this.fs[t]=w.Z.Wa(A,'sideicons',t);this.ds=y.Z.Wa(A,'compass',0);try{for(let t=0;t<50;t++)22!==t&&(this.ws[t]=w.Z.Wa(A,'mapscene',t))}catch(t){}try{for(let t=0;t<50;t++)this.ys[t]=y.Z.Wa(A,'mapfunction',t)}catch(t){}try{for(let t=0;t<20;t++)this.ps[t]=y.Z.Wa(A,'hitmarks',t)}catch(t){}try{for(let t=0;t<20;t++)this.As[t]=y.Z.Wa(A,'headicons',t)}catch(t){}this.Is=y.Z.Wa(A,'mapflag',0);for(let t=0;t<8;t++)this.gs[t]=y.Z.Wa(A,'cross',t);this._s=y.Z.Wa(A,'mapdots',0),this.Cs=y.Z.Wa(A,'mapdots',1),this.Es=y.Z.Wa(A,'mapdots',2),this.Ts=y.Z.Wa(A,'mapdots',3),this.bs=w.Z.Wa(A,'scrollbar',0),this.vs=w.Z.Wa(A,'scrollbar',1),this.Os=w.Z.Wa(A,'redstone1',0),this.Ls=w.Z.Wa(A,'redstone2',0),this.Ss=w.Z.Wa(A,'redstone3',0),this.ks=w.Z.Wa(A,'redstone1',0),this.ks?.za(),this.Rs=w.Z.Wa(A,'redstone2',0),this.Rs?.za(),this.Ms=w.Z.Wa(A,'redstone1',0),this.Ms?.ja(),this.xs=w.Z.Wa(A,'redstone2',0),this.xs?.ja(),this.Ns=w.Z.Wa(A,'redstone3',0),this.Ns?.ja(),this.Ps=w.Z.Wa(A,'redstone1',0),this.Ps?.za(),this.Ps?.ja(),this.Ds=w.Z.Wa(A,'redstone2',0),this.Ds?.za(),this.Ds?.ja();const b=y.Z.Wa(A,'backleft1',0);this.Gi=new f.Z(b.width,b.height),b.Ka(0,0);const O=y.Z.Wa(A,'backleft2',0);this.Hi=new f.Z(O.width,O.height),O.Ka(0,0);const k=y.Z.Wa(A,'backright1',0);this.Wi=new f.Z(k.width,k.height),k.Ka(0,0);const R=y.Z.Wa(A,'backright2',0);this.Yi=new f.Z(R.width,R.height),R.Ka(0,0);const M=y.Z.Wa(A,'backtop1',0);this.Zi=new f.Z(M.width,M.height),M.Ka(0,0);const N=y.Z.Wa(A,'backtop2',0);this.Vi=new f.Z(N.width,N.height),N.Ka(0,0);const P=y.Z.Wa(A,'backvmid1',0);this.Xi=new f.Z(P.width,P.height),P.Ka(0,0);const D=y.Z.Wa(A,'backvmid2',0);this.zi=new f.Z(D.width,D.height),D.Ka(0,0);const F=y.Z.Wa(A,'backvmid3',0);this.ji=new f.Z(F.width,F.height),F.Ka(0,0);const U=y.Z.Wa(A,'backhmid2',0);this.Ki=new f.Z(U.width,U.height),U.Ka(0,0);const B=(21*Math.random()|0)-10,H=(21*Math.random()|0)-10,W=(21*Math.random()|0)-10,Y=(41*Math.random()|0)-20;for(let t=0;t<50;t++)this.ys[t]&&this.ys[t]?.translate(B+Y,H+Y,W+Y),this.ws[t]&&this.ws[t]?.translate(B+Y,H+Y,W+Y);await this.Po(80,'Unpacking textures'),d.Z.qa(_),d.Z.$a(.8),d.Z.Ja(20),await this.Po(83,'Unpacking models'),m.Z.Qa(g),J.Z.Qa(g),Q.Z.Qa(g),await this.Po(86,'Unpacking config'),h.Z.Qa(s),e.Z.Qa(s),tt.Z.Qa(s),n.Z.Qa(s,$.K.st),r.Z.Qa(s),o.Z.Qa(s),l.Z.Qa(s),a.Z.Qa(s),$.K.ht||(await this.Po(90,'Unpacking sounds'),L.Z.Qa(T)),await this.Po(92,'Unpacking interfaces'),c.Z.Qa(u,A,[this.ui,this.di,this.wi,this.yi]),await this.Po(97,'Preparing game engine');for(let t=0;t<33;t++){let i=999,s=0;for(let h=0;h<35;h++)if(0===this.rs.tc[h+t*this.rs.width])999===i&&(i=h);else if(999!==i){s=h;break}this.Qi[t]=i,this.ts[t]=s-i}for(let t=9;t<160;t++){let i=999,s=0;for(let h=10;h<168;h++)if(0===this.rs.tc[h+t*this.rs.width]&&(h>34||t>34))999===i&&(i=h);else if(999!==i){s=h;break}this.ss[t-9]=i-21,this.hs[t-9]=s-i}d.Z.ic(479,96),this.qi=d.Z.sc,d.Z.ic(190,261),this.$i=d.Z.sc,d.Z.ic(512,334),this.Ji=d.Z.sc;const Z=new Int32Array(9);for(let t=0;t<9;t++){const i=32*t+128+15,s=3*i+600,h=d.Z.sin[i];Z[t]=s*h>>16}x.Z.init(512,334,500,800,Z),v.Z.Qa(C),this.hc()}catch(t){console.error(t),this.xt=!0}}};update=async()=>{this.Mt||this.xt||this.Nt||(this.Pt++,this.ec?await this.nc():await this.rc())};draw=async()=>{this.Mt||this.xt||this.Nt?this.Wo():(this.ec?this.oc():await this.lc(),this.Vs=0)};refresh=()=>{this.qt=!0};Po=async(t,i)=>{if(console.log(`${t}%: ${i}`),await this.ac(),!this.Kt)return void await super.Po(t,i);this.ii?.bind();this.wi?.cc(180,54,'RuneScape is loading - please wait...',A.Z.yl);u.Z.wl(28,62,304,34,A.Z.fc),u.Z.wl(29,63,302,32,A.Z.Nl),u.Z.fillRect(30,64,3*t,30,A.Z.fc),u.Z.fillRect(30+3*t,64,300-3*t,30,A.Z.Nl),this.wi?.cc(180,85,i,A.Z.yl),this.ii?.draw(214,186),this.qt&&(this.qt=!1,this.mi||(this.si?.draw(0,0),this.hi?.draw(661,0)),this.Qt?.draw(128,0),this.ti?.draw(214,386),this.ei?.draw(0,265),this.ni?.draw(574,265),this.ri?.draw(128,186),this.oi?.draw(574,186)),await(0,K.Fo)(5)};uc=()=>{this.mi&&(this.dc(),this.dc(),this.wc())};ac=async()=>{this.Qt||(this.vo=null,this.Di=null,this.Ni=null,this.xi=null,this.Pi=null,this.Fi=null,this.Ui=null,this.Bi=null,this.si=new f.Z(128,265),u.Z.clear(),this.hi=new f.Z(128,265),u.Z.clear(),this.Qt=new f.Z(533,186),u.Z.clear(),this.ti=new f.Z(360,146),u.Z.clear(),this.ii=new f.Z(360,200),u.Z.clear(),this.ei=new f.Z(214,267),u.Z.clear(),this.ni=new f.Z(215,267),u.Z.clear(),this.ri=new f.Z(86,79),u.Z.clear(),this.oi=new f.Z(87,79),u.Z.clear(),this.Kt&&(await this.Ya(),this.Za()),this.qt=!0)};Ya=async()=>{if(!this.Kt)return;const t=await y.Z.yc(this.Kt,'title');this.si?.bind(),t.Ka(0,0),this.hi?.bind(),t.Ka(-661,0),this.Qt?.bind(),t.Ka(-128,0),this.ti?.bind(),t.Ka(-214,-386),this.ii?.bind(),t.Ka(-214,-186),this.ei?.bind(),t.Ka(0,-265),this.ni?.bind(),t.Ka(-128,-186),this.ri?.bind(),t.Ka(-128,-186),this.oi?.bind(),t.Ka(-574,-186),t.za(),this.si?.bind(),t.Ka(394,0),this.hi?.bind(),t.Ka(-267,0),this.Qt?.bind(),t.Ka(266,0),this.ti?.bind(),t.Ka(180,-386),this.ii?.bind(),t.Ka(180,-186),this.ei?.bind(),t.Ka(394,-265),this.ni?.bind(),t.Ka(-180,-265),this.ri?.bind(),t.Ka(212,-186),this.oi?.bind(),t.Ka(-180,-186);const i=y.Z.Wa(this.Kt,'logo');this.Qt?.bind(),i.draw((this.width/2|0)-(i.width/2|0)-128,18)};mc=t=>{if(!this._i||!this.gi)return;this._i.fill(0);for(let t=0;t<5e3;t++){const t=128*Math.random()*256|0;this._i[t]=256*Math.random()|0}for(let t=0;t<20;t++){for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.gi[s]=(this._i[s-1]+this._i[s+1]+this._i[s-128]+this._i[s+128])/4|0}const t=this._i;this._i=this.gi,this.gi=t}if(t){let i=0;for(let s=0;s<t.height;s++)for(let h=0;h<t.width;h++)if(0!==t.tc[i++]){const i=h+t.Ac+16+(s+t.Ic+16<<7);this._i[i]=0}}};Za=()=>{if(this.Kt){this.li=w.Z.Wa(this.Kt,'titlebox'),this.ai=w.Z.Wa(this.Kt,'titlebutton');for(let t=0;t<12;t++)this.pi[t]=w.Z.Wa(this.Kt,'runes',t);this.Ai=new y.Z(128,265),this.Ii=new y.Z(128,265),this.si&&(0,K.gc)(this.si.tc,0,this.Ai.tc,0,33920),this.hi&&(0,K.gc)(this.hi.tc,0,this.Ii.tc,0,33920),this.bi=new Int32Array(256);for(let t=0;t<64;t++)this.bi[t]=262144*t;for(let t=0;t<64;t++)this.bi[t+64]=1024*t+A.Z.RED;for(let t=0;t<64;t++)this.bi[t+128]=4*t+A.Z.Pl;for(let t=0;t<64;t++)this.bi[t+192]=A.Z.yl;this.vi=new Int32Array(256);for(let t=0;t<64;t++)this.vi[t]=1024*t;for(let t=0;t<64;t++)this.vi[t+64]=4*t+A.Z.GREEN;for(let t=0;t<64;t++)this.vi[t+128]=262144*t+A.Z._c;for(let t=0;t<64;t++)this.vi[t+192]=A.Z.yl;this.Oi=new Int32Array(256);for(let t=0;t<64;t++)this.Oi[t]=4*t;for(let t=0;t<64;t++)this.Oi[t+64]=262144*t+A.Z.BLUE;for(let t=0;t<64;t++)this.Oi[t+128]=1024*t+A.Z.Cc;for(let t=0;t<64;t++)this.Oi[t+192]=A.Z.yl;this.Ti=new Int32Array(256),this._i=new Int32Array(32768),this.gi=new Int32Array(32768),this.mc(null),this.Ci=new Int32Array(32768),this.Ei=new Int32Array(32768),this.Po(10,'Connecting to fileserver').then((()=>{this.mi||(this.mi=!0,this.Mi=setInterval(this.uc,35))}))}};rc=async()=>{if(0===this.$t){let t=(this.width/2|0)-80,i=20+(this.height/2|0);i+=20,1===this.Ec&&this.Tc>=t-75&&this.Tc<=t+75&&this.bc>=i-20&&this.bc<=i+20&&(this.$t=3,this.Jt=0),t=80+(this.width/2|0),1===this.Ec&&this.Tc>=t-75&&this.Tc<=t+75&&this.bc>=i-20&&this.bc<=i+20&&(this.ci='',this.fi='Enter your username & password.',this.$t=2,this.Jt=0)}else if(2===this.$t){let t=(this.height/2|0)-40;t+=30,t+=25,1===this.Ec&&this.bc>=t-15&&this.bc<t&&(this.Jt=0),t+=15,1===this.Ec&&this.bc>=t-15&&this.bc<t&&(this.Jt=1);let i=(this.width/2|0)-80,s=50+(this.height/2|0);for(s+=20,1===this.Ec&&this.Tc>=i-75&&this.Tc<=i+75&&this.bc>=s-20&&this.bc<=s+20&&await this.vc(this.username,this.password,!1),i=80+(this.width/2|0),1===this.Ec&&this.Tc>=i-75&&this.Tc<=i+75&&this.bc>=s-20&&this.bc<=s+20&&(this.$t=0,this.username='',this.password='');;){const t=this.Oc();if(-1===t)return;let i=!1;for(let s=0;s<p.Z.Lc.length;s++)if(String.fromCharCode(t)===p.Z.Lc.charAt(s)){i=!0;break}0===this.Jt?(8===t&&this.username.length>0&&(this.username=this.username.substring(0,this.username.length-1)),9!==t&&10!==t&&13!==t||(this.Jt=1),i&&(this.username=this.username+String.fromCharCode(t)),this.username.length>12&&(this.username=this.username.substring(0,12))):1===this.Jt&&(8===t&&this.password.length>0&&(this.password=this.password.substring(0,this.password.length-1)),9!==t&&10!==t&&13!==t||(this.Jt=0),i&&(this.password=this.password+String.fromCharCode(t)),this.password.length>20&&(this.password=this.password.substring(0,20)))}}else if(3===this.$t){const t=this.width/2|0;let i=50+(this.height/2|0);i+=20,1===this.Ec&&this.Tc>=t-75&&this.Tc<=t+75&&this.bc>=i-20&&this.bc<=i+20&&(this.$t=0)}};lc=async()=>{await this.ac(),this.ii?.bind(),this.li?.draw(0,0);if(0===this.$t){let t=180,i=80;this.wi?.zl(t,i,'Welcome to RuneScape',A.Z.Pl,!0),t=100,i=120,this.ai?.draw(t-73,i-20),this.wi?.zl(t,i+5,'New user',A.Z.yl,!0),t=260,this.ai?.draw(t-73,i-20),this.wi?.zl(t,i+5,'Existing User',A.Z.yl,!0)}else if(2===this.$t){let t=100,i=60;this.ci.length>0?(this.wi?.zl(180,i-15,this.ci,A.Z.Pl,!0),this.wi?.zl(180,i,this.fi,A.Z.Pl,!0),i+=30):(this.wi?.zl(180,i-7,this.fi,A.Z.Pl,!0),i+=30),this.wi?.Kl(90,i,`Username: ${this.username}${0===this.Jt&&this.Pt%40<20?'@yel@|':''}`,A.Z.yl,!0),i+=15,this.wi?.Kl(92,i,`Password: ${R.Z.Sc(this.password)}${1===this.Jt&&this.Pt%40<20?'@yel@|':''}`,A.Z.yl,!0),i=150,this.ai?.draw(t-73,i-20),this.wi?.zl(t,i+5,'Login',A.Z.yl,!0),t=260,this.ai?.draw(t-73,i-20),this.wi?.zl(t,i+5,'Cancel',A.Z.yl,!0)}else if(3===this.$t){this.wi?.zl(180,40,'Create a free account',A.Z.Pl,!0);const t=180;let i=65;this.wi?.zl(180,i,'To create a new account you need to',A.Z.yl,!0),i+=15,this.wi?.zl(180,i,'go back to the main RuneScape webpage',A.Z.yl,!0),i+=15,this.wi?.zl(180,i,"and choose the red 'create account'",A.Z.yl,!0),i+=15,this.wi?.zl(180,i,'button at the top right of that page.',A.Z.yl,!0),i=150,this.ai?.draw(t-73,i-20),this.wi?.zl(t,i+5,'Cancel',A.Z.yl,!0)}this.ii?.draw(214,186),this.qt&&(this.qt=!1,this.Qt?.draw(128,0),this.ti?.draw(214,386),this.ei?.draw(0,265),this.ni?.draw(574,265),this.ri?.draw(128,186),this.oi?.draw(574,186))};vc=async(t,i,s)=>{try{s||(this.ci='',this.fi='Connecting to server...',await this.lc()),this.stream=new g.Z(await g.Z.kc({host:$.K.et,port:43594+$.K.portOffset})),await(this.stream?.Rc(this.in.data,0,8)),this.in.Mc=0,this.Gt=this.in.xc;const h=new Int32Array([Math.floor(99999999*Math.random()),Math.floor(99999999*Math.random()),Number(this.Gt>>32n),Number(this.Gt&BigInt(4294967295))]);this.Ut.Mc=0,this.Ut.p1(10),this.Ut.p4(h[0]),this.Ut.p4(h[1]),this.Ut.p4(h[2]),this.Ut.p4(h[3]),this.Ut.p4(0),this.Ut.Nc(t),this.Ut.Nc(i),this.Ut.Pc($.K.lt,$.K.exponent),this.Bt.Mc=0,s?this.Bt.p1(18):this.Bt.p1(16),this.Bt.p1(this.Ut.Mc+36+1+1),this.Bt.p1($.K.tt),this.Bt.p1($.K.ht?1:0);for(let t=0;t<9;t++)this.Bt.p4(this.Dt[t]);this.Bt.Dc(this.Ut.data,this.Ut.Mc,0),this.Ut.random=new C.Z(h);for(let t=0;t<4;t++)h[t]+=50;this.Zt=new C.Z(h),this.stream?.write(this.Bt.data,this.Bt.Mc);const e=await this.stream.read();if(1===e)return await(0,K.Fo)(2e3),void await this.vc(t,i,s);if(2===e||18===e){this.Fr=18===e,M.Z.Fc(),this.ec=!0,this.Ut.Mc=0,this.in.Mc=0,this.Vt=-1,this.Xt=-1,this.zt=-1,this.jt=-1,this.packetSize=0,this.Ht=0,this.Yt=0,this.Wt=0,this.dh=0,this.hh=0,this.$s=!1,this.Uc=0;for(let t=0;t<100;t++)this.Wh[t]=null;this.ne=0,this.me=0,this.Ge=0,this.eo=0,this.ze=(100*Math.random()|0)-50,this.je=(110*Math.random()|0)-55,this.Ke=(80*Math.random()|0)-40,this.dn=(120*Math.random()|0)-60,this.wn=(30*Math.random()|0)-20,this.Pn=(20*Math.random()|0)-10&2047,this.mn=-1,this.Ye=0,this.Ze=0,this.er=0,this.wr=0;for(let t=0;t<this.St;t++)this.hr[t]=null,this.ur[t]=null;for(let t=0;t<8192;t++)this.dr[t]=null;this.Lr=this.hr[this.kt]=new W.Z,this.pr.clear(),this.mr.clear(),this.Ir.clear();for(let t=0;t<G.Z.Rn;t++)for(let i=0;i<G.Z.Zn;i++)for(let s=0;s<G.Z.Zn;s++)this.gr[t][i][s]=null;this.Cr=new k.Z,this.Wr=0,this.Hh=-1,this.rh=-1,this.Zs=-1,this.nh=-1,this.we=!1,this.Lh=3,this.Gh=!1,this.$s=!1,this.Ph=!1,this.bh=null,this.kr=0,this.Oh=-1,this.Ur=!0,this.Bc();for(let t=0;t<5;t++)this.Hr[t]=0;return $.K.wt=0,$.K._t=0,$.K.It=0,$.K.yt=0,$.K.dt=0,$.K.gt=0,$.K.bt=0,$.K.Et=0,$.K.Ct=0,void this.Gc()}if(3===e)return this.ci='',void(this.fi='Invalid username or password.');if(4===e)return this.ci='Your account has been disabled.',void(this.fi='Please check your message-centre for details.');if(5===e)return this.ci='Your account is already logged in.',void(this.fi='Try again in 60 secs...');if(6===e)return this.ci='RuneScape has been updated!',void(this.fi='Please reload this page.');if(7===e)return this.ci='This world is full.',void(this.fi='Please use a different world.');if(8===e)return this.ci='Unable to connect.',void(this.fi='Login server offline.');if(9===e)return this.ci='Login limit exceeded.',void(this.fi='Too many connections from your address.');if(10===e)return this.ci='Unable to connect.',void(this.fi='Bad session id.');if(11===e)return this.fi='Login server rejected session.',void(this.fi='Please try again.');if(12===e)return this.ci='You need a members account to login to this world.',void(this.fi='Please subscribe, or use a different world.');if(13===e)return this.ci='Could not complete login.',void(this.fi='Please try using a different world.');if(14===e)return this.ci='The server is being updated.',void(this.fi='Please wait 1 minute and try again.');if(15===e)return this.ec=!0,this.Ut.Mc=0,this.in.Mc=0,this.Vt=-1,this.Xt=-1,this.zt=-1,this.jt=-1,this.packetSize=0,this.Ht=0,this.Yt=0,this.hh=0,void(this.$s=!1);if(16===e)return this.ci='Login attempts exceeded.',void(this.fi='Please wait 1 minute and try again.');17===e&&(this.ci='You are standing in a members-only area.',this.fi='To play on this world move to a free area first')}catch(t){console.log(t),this.ci='',this.fi='Error connecting to server.'}};nc=async()=>{if(null!==this.hr){this.Yt>1&&this.Yt--,this.Wt>0&&this.Wt--;for(let t=0;t<5&&await this.read();t++);if(this.ec){for(let t=0;t<this.eo;t++)if(this.lo[t]<=0){try{const i=L.Z.Hc(this.ro[t],this.oo[t]);if(!i)throw new Error;Date.now()+(i.Mc/22|0)>this.do+(this.uo/22|0)&&(this.uo=i.Mc,this.do=Date.now(),this.co=this.ro[t],this.fo=this.oo[t],await(0,j.Wc)(i.data.slice(0,i.Mc),this.ao))}catch(t){console.error(t)}this.eo--;for(let i=t;i<this.eo;i++)this.ro[i]=this.ro[i+1],this.oo[i]=this.oo[i+1],this.lo[i]=this.lo[i+1];t--}else this.lo[t]--;this.wo>0&&(this.wo-=20,this.wo<0&&(this.wo=0),0===this.wo&&this.yo&&!$.K.ht&&this.po&&await this.Bo(this.po,this.mo,this.Ao));const t=M.Z.flush();if(t&&(this.Ut.Yc(b.Z.Zc),this.Ut.p2(t.Mc),this.Ut.Dc(t.data,t.Mc,0),t.release()),this.Ht++,this.Ht>750&&await this.Vc(),this.Xc(),this.zc(),this.jc(),this.Kc(),(1===this.qc[1]||1===this.qc[2]||1===this.qc[3]||1===this.qc[4])&&this.xn++>5&&(this.xn=0,this.Ut.Yc(b.Z.$c),this.Ut.p2(this.Nn),this.Ut.p2(this.Pn),this.Ut.p1(this.dn),this.Ut.p1(this.wn)),this.He++,0!==this.Xs&&(this.zs+=20,this.zs>=400&&(this.Xs=0)),0!==this.ce&&(this.de++,this.de>=15&&(2===this.ce&&(this.Gs=!0),3===this.ce&&(this.Hs=!0),this.ce=0)),0!==this.te&&(this.he++,(this.Ll>this.ie+5||this.Ll<this.ie-5||this.Sl>this.se+5||this.Sl<this.se-5)&&(this.ee=!0),0===this.Jc)){if(2===this.te&&(this.Gs=!0),3===this.te&&(this.Hs=!0),this.te=0,this.ee&&this.he>=5){if(this.ve=-1,this.Qc(),this.ve===this.Jh&&this.Oe!==this.Qh){const t=c.Z.To[this.Jh];if(t.El){const i=t.El[this.Oe];t.El[this.Oe]=t.El[this.Qh],t.El[this.Qh]=i}if(t.Tl){const i=t.Tl[this.Oe];t.Tl[this.Oe]=t.Tl[this.Qh],t.Tl[this.Qh]=i}this.Ut.Yc(b.Z.tf),this.Ut.p2(this.Jh),this.Ut.p2(this.Qh),this.Ut.p2(this.Oe)}}else(1===this._e||this.if(this.hh-1))&&this.hh>2?this.sf():this.hh>0&&await this.hf(this.hh-1);this.de=10,this.Ec=0}if($.K.ct++,$.K.ct>127&&($.K.ct=0,this.Ut.Yc(b.Z.ef),this.Ut.p3(4991788)),-1!==x.Z.nf&&this.Lr){const t=x.Z.nf,i=x.Z.rf,s=this.lf(this.Lr.af[0],this.Lr.cf[0],t,i,0,0,0,0,0,0,!0);x.Z.nf=-1,s&&(this.js=this.Tc,this.Ks=this.bc,this.Xs=1,this.zs=0)}1===this.Ec&&this.bh&&(this.bh=null,this.Hs=!0,this.Ec=0),await this.ff(),this.uf(),this.df(),this.wf(),1!==this.Jc&&1!==this.Ec||this.Vs++,2===this.Ge&&this.yf(),2===this.Ge&&this.Ve&&this.pf();for(let t=0;t<5;t++)this.Qe[t]++;if(await this.mf(),this.Uc++,this.Uc>4500&&(this.Wt=250,this.Uc-=500,this.Ut.Yc(b.Z.Af)),this.Xe++,this.Xe>500){this.Xe=0;const t=8*Math.random()|0;1==(1&t)&&(this.ze+=this.qe),2==(2&t)&&(this.je+=this.$e),4==(4&t)&&(this.Ke+=this.Je)}if(this.ze<-50&&(this.qe=2),this.ze>50&&(this.qe=-2),this.je<-55&&(this.$e=2),this.je>55&&(this.$e=-2),this.Ke<-40&&(this.Je=1),this.Ke>40&&(this.Je=-1),this.un++,this.un>500){this.un=0;const t=8*Math.random()|0;1==(1&t)&&(this.dn+=this.pn),2==(2&t)&&(this.wn+=this.yn)}this.dn<-60&&(this.pn=2),this.dn>60&&(this.pn=-2),this.wn<-20&&(this.yn=1),this.wn>10&&(this.yn=-1),$.K.ft++,$.K.ft>110&&($.K.ft=0,this.Ut.Yc(b.Z.If),this.Ut.p4(0)),this.Nr++,this.Nr>50&&this.Ut.Yc(b.Z.gf);try{this.stream&&this.Ut.Mc>0&&(this.stream.write(this.Ut.data,this.Ut.Mc),this.Ut.Mc=0,this.Nr=0)}catch(t){console.log(t),await this.Vc()}}}};oc=()=>{if(null===this.hr)return;this.qt&&(this.qt=!1,this.Gi?.draw(0,11),this.Hi?.draw(0,375),this.Wi?.draw(729,5),this.Yi?.draw(752,231),this.Zi?.draw(0,0),this.Vi?.draw(561,0),this.Xi?.draw(520,11),this.zi?.draw(520,231),this.ji?.draw(501,375),this.Ki?.draw(0,345),this.Gs=!0,this.Hs=!0,this.Ws=!0,this.Ys=!0,2!==this.Ge&&(this.Pi?.draw(8,11),this.Ni?.draw(561,5))),2===this.Ge&&this._f(),this.$s&&1===this.Js&&(this.Gs=!0);let t=!1;if(-1!==this.nh&&(t=this.sl(this.nh,this.He),t&&(this.Gs=!0)),2===this.ce&&(this.Gs=!0),2===this.te&&(this.Gs=!0),this.Gs&&(this.Cf(),this.Gs=!1),-1===this.rh){this.oh.Il=this.lh-this.ah-77,this.Ll>453&&this.Ll<565&&this.Sl>350&&this.Ef(this.Ll-22,this.Sl-375,this.lh,77,!1,463,0,this.oh);let t=this.lh-this.oh.Il-77;t<0&&(t=0),t>this.lh-77&&(t=this.lh-77),this.ah!==t&&(this.ah=t,this.Hs=!0)}-1!==this.rh&&(t=this.sl(this.rh,this.He),t&&(this.Hs=!0)),3===this.ce&&(this.Hs=!0),3===this.te&&(this.Hs=!0),this.bh&&(this.Hs=!0),this.$s&&2===this.Js&&(this.Hs=!0),this.Hs&&(this.Tf(),this.Hs=!1),2===this.Ge&&(this.bf(),this.Ni?.draw(561,5)),-1!==this.Oh&&(this.Ws=!0),this.Ws&&(-1!==this.Oh&&this.Oh===this.Lh&&(this.Oh=-1,this.Ut.Yc(b.Z.vf),this.Ut.p1(this.Lh)),this.Ws=!1,this.Bi?.bind(),this.cs?.draw(0,0),-1===this.nh&&(-1!==this.Sh[this.Lh]&&(0===this.Lh?this.Os?.draw(29,30):1===this.Lh?this.Ls?.draw(59,29):2===this.Lh?this.Ls?.draw(87,29):3===this.Lh?this.Ss?.draw(115,29):4===this.Lh?this.Rs?.draw(156,29):5===this.Lh?this.Rs?.draw(184,29):6===this.Lh&&this.ks?.draw(212,30)),-1!==this.Sh[0]&&(0!==this.Oh||this.Pt%20<10)&&this.fs[0]?.draw(35,34),-1!==this.Sh[1]&&(1!==this.Oh||this.Pt%20<10)&&this.fs[1]?.draw(59,32),-1!==this.Sh[2]&&(2!==this.Oh||this.Pt%20<10)&&this.fs[2]?.draw(86,32),-1!==this.Sh[3]&&(3!==this.Oh||this.Pt%20<10)&&this.fs[3]?.draw(121,33),-1!==this.Sh[4]&&(4!==this.Oh||this.Pt%20<10)&&this.fs[4]?.draw(157,34),-1!==this.Sh[5]&&(5!==this.Oh||this.Pt%20<10)&&this.fs[5]?.draw(185,32),-1!==this.Sh[6]&&(6!==this.Oh||this.Pt%20<10)&&this.fs[6]?.draw(212,34)),this.Bi?.draw(520,165),this.Ui?.bind(),this.ls?.draw(0,0),-1===this.nh&&(-1!==this.Sh[this.Lh]&&(7===this.Lh?this.Ms?.draw(49,0):8===this.Lh?this.xs?.draw(81,0):9===this.Lh?this.xs?.draw(108,0):10===this.Lh?this.Ns?.draw(136,1):11===this.Lh?this.Ds?.draw(178,0):12===this.Lh?this.Ds?.draw(205,0):13===this.Lh&&this.Ps?.draw(233,0)),-1!==this.Sh[8]&&(8!==this.Oh||this.Pt%20<10)&&this.fs[7]?.draw(80,2),-1!==this.Sh[9]&&(9!==this.Oh||this.Pt%20<10)&&this.fs[8]?.draw(107,3),-1!==this.Sh[10]&&(10!==this.Oh||this.Pt%20<10)&&this.fs[9]?.draw(142,4),-1!==this.Sh[11]&&(11!==this.Oh||this.Pt%20<10)&&this.fs[10]?.draw(179,2),-1!==this.Sh[12]&&(12!==this.Oh||this.Pt%20<10)&&this.fs[11]?.draw(206,2),-1!==this.Sh[13]&&(13!==this.Oh||this.Pt%20<10)&&this.fs[12]?.draw(230,2)),this.Ui?.draw(501,492),this.Pi?.bind()),this.Ys&&(this.Ys=!1,this.Fi?.bind(),this.os?.draw(0,0),this.di?.zl(57,33,'Public chat',A.Z.yl,!0),0===this.kh&&this.di?.zl(57,46,'On',A.Z.GREEN,!0),1===this.kh&&this.di?.zl(57,46,'Friends',A.Z.Pl,!0),2===this.kh&&this.di?.zl(57,46,'Off',A.Z.RED,!0),3===this.kh&&this.di?.zl(57,46,'Hide',A.Z._c,!0),this.di?.zl(186,33,'Private chat',A.Z.yl,!0),0===this.Rh&&this.di?.zl(186,46,'On',A.Z.GREEN,!0),1===this.Rh&&this.di?.zl(186,46,'Friends',A.Z.Pl,!0),2===this.Rh&&this.di?.zl(186,46,'Off',A.Z.RED,!0),this.di?.zl(326,33,'Trade/duel',A.Z.yl,!0),0===this.Mh&&this.di?.zl(326,46,'On',A.Z.GREEN,!0),1===this.Mh&&this.di?.zl(326,46,'Friends',A.Z.Pl,!0),2===this.Mh&&this.di?.zl(326,46,'Off',A.Z.RED,!0),this.di?.zl(462,38,'Report abuse',A.Z.yl,!0),this.Fi?.draw(0,471),this.Pi?.bind()),this.He=0};_f=()=>{if(this.We++,this.Of(),this.Lf(),this.Sf(),this.kf(),this.Rf(),!this.Ve){let t=this.Nn;(this.fn/256|0)>t&&(t=this.fn/256|0),this.tn[4]&&this.hn[4]+128>t&&(t=this.hn[4]+128);const i=this.Pn+this.Ke&2047;if(this.Lr&&this.Mf(this.Un,this.xf(this.Mn,this.Lr.x,this.Lr.z)-50,this.Bn,i,t,3*t+600),$.K.At++,$.K.At>1802){$.K.At=0,this.Ut.Yc(b.Z.Nf),this.Ut.p1(0);const t=this.Ut.Mc;this.Ut.p2(29711),this.Ut.p1(70),this.Ut.p1(256*Math.random()|0),this.Ut.p1(242),this.Ut.p1(186),this.Ut.p1(39),this.Ut.p1(61),0==(2*Math.random()|0)&&this.Ut.p1(13),0==(2*Math.random()|0)&&this.Ut.p2(57856),this.Ut.p2(65536*Math.random()|0),this.Ut.Pf(this.Ut.Mc-t)}}let t;t=this.Ve?this.Df():this.Ff();const i=this.nn,s=this.rn,h=this.ln,e=this.an,n=this.cn;let r;for(let t=0;t<5;t++)this.tn[t]&&(r=Math.random()*(2*this.sn[t]+1)-this.sn[t]+Math.sin(this.Qe[t]*(this.en[t]/100))*this.hn[t]|0,0===t&&(this.nn+=r),1===t&&(this.rn+=r),2===t&&(this.ln+=r),3===t&&(this.cn=this.cn+r&2047),4===t&&(this.an+=r,this.an<128&&(this.an=128),this.an>383&&(this.an=383)));r=d.Z.Uf,m.Z.Bf=!0,m.Z.Gf=0,m.Z.Ll=this.Ll-8,m.Z.Sl=this.Sl-11,u.Z.clear(),this.Be?.draw(this.nn,this.rn,this.ln,t,this.cn,this.an,this.Pt),this.Be?.Hf(),this.Wf(),this.Yf(),$.K.rt&&this.Zf(),this.Vf(r),this.Xf(),this.Pi?.draw(8,11),this.nn=i,this.rn=s,this.ln=h,this.an=e,this.cn=n};zf=()=>{e.Z.jf?.clear(),e.Z.Kf?.clear(),r.Z.bo?.clear(),n.Z.bo?.clear(),n.Z.qf?.clear(),W.Z.bo?.clear(),l.Z.bo?.clear()};$f=(t,i)=>{this.Jf(t.x,i,t.z)};Jf=(t,i,s)=>{if(t<128||s<128||t>13056||s>13056)return this.Vn=-1,void(this.Xn=-1);const h=this.xf(this.Mn,t,s)-i;this.Qf(t,h,s)};Qf=(t,i,s)=>{let h=t-this.nn,e=i-this.rn,n=s-this.ln;const r=d.Z.sin[this.an],o=d.Z.cos[this.an],l=d.Z.sin[this.cn],a=d.Z.cos[this.cn];let c=n*l+h*a>>16;n=n*a-h*l>>16,h=c,c=e*o-n*r>>16,n=e*r+n*o>>16,e=c,n>=50?(this.Vn=d.Z.ta+((h<<9)/n|0),this.Xn=d.Z.ia+((e<<9)/n|0)):(this.Vn=-1,this.Xn=-1)};Wf=()=>{this.Yr=0;for(let t=-1;t<this.er+this.wr;t++){let i=null;if(i=-1===t?this.Lr:t<this.er?this.hr[this.nr[t]]:this.dr[this.yr[t-this.er]],i&&i.isVisible()){if(t<this.er){let s=30;const h=i;if(0!==h.tu&&(this.$f(i,i.height+15),this.Vn>-1))for(let t=0;t<8;t++)0!=(h.tu&1<<t)&&this.As[t]&&(this.As[t].draw(this.Vn-12,this.Xn-s),s-=25);t>=0&&10===this.dh&&this.mh===this.nr[t]&&(this.$f(i,i.height+15),this.Vn>-1&&this.As[7]&&this.As[7].draw(this.Vn-12,this.Xn-s))}else 1===this.dh&&this.wh===this.yr[t-this.er]&&this.Pt%20<10&&(this.$f(i,i.height+15),this.Vn>-1&&this.As[2]&&this.As[2].draw(this.Vn-12,this.Xn-28));if(i.iu&&(t>=this.er||0===this.kh||3===this.kh||1===this.kh&&this.su(i.name))&&(this.$f(i,i.height),this.Vn>-1&&this.Yr<$.K.Zr&&this.wi&&(this.jr[this.Yr]=this.wi.hu(i.iu)/2|0,this.zr[this.Yr]=this.wi.height,this.Vr[this.Yr]=this.Vn,this.Xr[this.Yr]=this.Xn,this.Kr[this.Yr]=i.eu,this.qr[this.Yr]=i.nu,this.$r[this.Yr]=i.ru,this.Jr[this.Yr++]=i.iu,0===this.zh&&1===i.nu&&(this.zr[this.Yr]+=10,this.Xr[this.Yr]+=5),0===this.zh&&2===i.nu&&(this.jr[this.Yr]=60))),i.ou>this.Pt+100&&(this.$f(i,i.height+15),this.Vn>-1)){let t=30*i.lu/i.au|0;t>30&&(t=30),u.Z.fillRect(this.Vn-15,this.Xn-3,t,5,A.Z.GREEN),u.Z.fillRect(this.Vn-15+t,this.Xn-3,30-t,5,A.Z.RED)}i.ou>this.Pt+330&&(this.$f(i,i.height/2|0),this.Vn>-1&&this.ps[i.cu]&&(this.ps[i.cu].draw(this.Vn-12,this.Xn-12),this.ui?.cc(this.Vn,this.Xn+4,i.fu.toString(),A.Z.Nl),this.ui?.cc(this.Vn-1,this.Xn+3,i.fu.toString(),A.Z.yl)))}}for(let t=0;t<this.Yr;t++){const i=this.Vr[t];let s=this.Xr[t];const h=this.jr[t],e=this.zr[t];let n=!0;for(;n;){n=!1;for(let r=0;r<t;r++)s+2>this.Xr[r]-this.zr[r]&&s-e<this.Xr[r]+2&&i-h<this.Vr[r]+this.jr[r]&&i+h>this.Vr[r]-this.jr[r]&&this.Xr[r]-this.zr[r]<s&&(s=this.Xr[r]-this.zr[r],n=!0)}this.Vn=this.Vr[t],this.Xn=this.Xr[t]=s;const r=this.Jr[t];if(0==this.zh){let i=A.Z.Pl;if(this.Kr[t]<6&&(i=A.Z.uu[this.Kr[t]]),6==this.Kr[t]&&(i=this.We%20<10?A.Z.RED:A.Z.Pl),7==this.Kr[t]&&(i=this.We%20<10?A.Z.BLUE:A.Z._c),8==this.Kr[t]&&(i=this.We%20<10?45056:8454016),9==this.Kr[t]){const s=150-this.$r[t];s<50?i=1280*s+A.Z.RED:s<100?i=A.Z.Pl-327680*(s-50):s<150&&(i=5*(s-100)+A.Z.GREEN)}if(10==this.Kr[t]){const s=150-this.$r[t];s<50?i=5*s+A.Z.RED:s<100?i=A.Z.Cc-327680*(s-50):s<150&&(i=327680*(s-100)+A.Z.BLUE-5*(s-100))}if(11==this.Kr[t]){const s=150-this.$r[t];s<50?i=A.Z.yl-327685*s:s<100?i=327685*(s-50)+A.Z.GREEN:s<150&&(i=A.Z.yl-327680*(s-100))}if(0==this.qr[t]&&(this.wi?.cc(this.Vn,this.Xn+1,r,A.Z.Nl),this.wi?.cc(this.Vn,this.Xn,r,i)),1==this.qr[t]&&(this.wi?.du(this.Vn,this.Xn+1,r,A.Z.Nl,this.We),this.wi?.du(this.Vn,this.Xn,r,i,this.We)),2==this.qr[t]){const s=this.wi?.hu(r)??0,h=(150-this.$r[t])*(s+100)/150;u.Z.fl(334,this.Vn+50,0,this.Vn-50),this.wi?.Ml(this.Vn+50-h,this.Xn+1,r,A.Z.Nl),this.wi?.Ml(this.Vn+50-h,this.Xn,r,i),u.Z.wu()}}else this.wi?.cc(this.Vn,this.Xn+1,r,A.Z.Nl),this.wi?.cc(this.Vn,this.Xn,r,A.Z.Pl)}};Yf=()=>{2===this.dh&&this.As[2]&&(this.Jf((this.Ah-this.Cn<<7)+this.yh,2*this.gh,(this.Ih-this.En<<7)+this.ph),this.Vn>-1&&this.Pt%20<10&&this.As[2].draw(this.Vn-12,this.Xn-28))};Zf=()=>{const t=507;let i=20;this.ui?.yu(t,i,`FPS: ${this.pu}`,A.Z.Pl,!0),i+=13,this.ui?.yu(t,i,`Speed: ${this.ms.toFixed(4)} ms`,A.Z.Pl,!0),i+=13,this.ui?.yu(t,i,`Average: ${this.mu.toFixed(4)} ms`,A.Z.Pl,!0),i+=13,this.ui?.yu(t,i,`Slowest: ${this.Au.toFixed(4)} ms`,A.Z.Pl,!0),i+=13,this.ui?.yu(t,i,`Occluders: ${x.Z.Iu}`,A.Z.Pl,!0)};Xf=()=>{if(this.gu(),1===this.Xs&&this.gs[this.zs/100|0]?.draw(this.js-8-8,this.Ks-8-11),2===this.Xs&&this.gs[4+(this.zs/100|0)]?.draw(this.js-8-8,this.Ks-8-11),-1!==this.Zs&&(this.sl(this.Zs,this.He),this.cl(c.Z.To[this.Zs],0,0,0)),this._u(),this.$s?0===this.Js&&this.Cu():(this.Qc(),this.Eu()),1===this.kr&&(this.Pr>0||1===this.Dr?this.As[1]?.draw(472,258):this.As[1]?.draw(472,296)),this.Pr>0&&(this.As[0]?.draw(472,296),this.di?.cc(484,329,'Level: '+this.Pr,A.Z.Pl)),1===this.Dr&&(this.As[6]?.draw(472,296),this.di?.cc(484,329,'Arena',A.Z.Pl)),0!==this.Yt){let t=this.Yt/50|0;const i=t/60|0;t%=60,t<10?this.di?.Ml(4,329,'System update in: '+i+':0'+t,A.Z.Pl):this.di?.Ml(4,329,'System update in: '+i+':'+t,A.Z.Pl)}};gu=()=>{if(0===this.Xh)return;const t=this.di;let i=0;0!==this.Yt&&(i=1);for(let s=0;s<100;s++){if(!this.Wh[s])continue;const h=this.messageType[s];let e;if((3===h||7===h)&&(7===h||0===this.Rh||1===this.Rh&&this.su(this.Yh[s]))&&(e=329-13*i,t?.Ml(4,e,'From '+this.Yh[s]+': '+this.Wh[s],A.Z.Nl),t?.Ml(4,e-1,'From '+this.Yh[s]+': '+this.Wh[s],A.Z._c),i++,i>=5))return;if(5===h&&this.Rh<2&&(e=329-13*i,t?.Ml(4,e,this.Wh[s],A.Z.Nl),t?.Ml(4,e-1,this.Wh[s],A.Z._c),i++,i>=5))return;if(6===h&&this.Rh<2&&(e=329-13*i,t?.Ml(4,e,'To '+this.Yh[s]+': '+this.Wh[s],A.Z.Nl),t?.Ml(4,e-1,'To '+this.Yh[s]+': '+this.Wh[s],A.Z._c),i++,i>=5))return}};_u=()=>{if(!this.Lr)return;const t=(this.Lr.x>>7)+this.Cn,i=(this.Lr.z>>7)+this.En;if(this.Pr=t>=2944&&t<3392&&i>=3520&&i<6400?1+((i-3520)/8|0):t>=2944&&t<3392&&i>=9920&&i<12800?1+((i-9920)/8|0):0,this.Dr=0,t>=3328&&t<3392&&i>=3200&&i<3264){const s=63&t,h=63&i;(s>=4&&s<=29&&h>=44&&h<=58||s>=36&&s<=61&&h>=44&&h<=58||s>=4&&s<=29&&h>=25&&h<=39||s>=36&&s<=61&&h>=25&&h<=39||s>=4&&s<=29&&h>=6&&h<=20||s>=36&&s<=61&&h>=6&&h<=20)&&(this.Dr=1)}0===this.Dr&&t>=3328&&t<=3393&&i>=3203&&i<=3325&&(this.Dr=2),this.qs=0,(t>=3053&&t<=3156&&i>=3056&&i<=3136||t>=3072&&t<=3118&&i>=9492&&i<=9535)&&(this.qs=1),1===this.qs&&t>=3139&&t<=3199&&i>=3008&&i<=3062&&(this.qs=0)};Cf=()=>{this.xi?.bind(),this.$i&&(d.Z.sc=this.$i),this.es?.draw(0,0),-1!==this.nh?this.cl(c.Z.To[this.nh],0,0,0):-1!==this.Sh[this.Lh]&&this.cl(c.Z.To[this.Sh[this.Lh]],0,0,0),this.$s&&1===this.Js&&this.Cu(),this.xi?.draw(562,231),this.Pi?.bind(),this.Ji&&(d.Z.sc=this.Ji)};Tf=()=>{if(this.Di?.bind(),this.qi&&(d.Z.sc=this.qi),this.ns?.draw(0,0),this.Ph)this.wi?.cc(239,40,this.Dh,A.Z.Nl),this.wi?.cc(239,60,this.Fh+'*',A.Z.Tu);else if(this.Gh)this.wi?.cc(239,40,'Enter amount:',A.Z.Nl),this.wi?.cc(239,60,this.Bh+'*',A.Z.Tu);else if(this.bh)this.wi?.cc(239,40,this.bh,A.Z.Nl),this.wi?.cc(239,60,'Click to continue',A.Z.Tu);else if(-1!==this.rh)this.cl(c.Z.To[this.rh],0,0,0);else if(-1===this.Hh){const t=this.di;let i=0;u.Z.fl(0,0,463,77);for(let s=0;s<100;s++){const h=this.Wh[s];if(!h)continue;const e=this.messageType[s],n=this.ah+70-14*i;0===e&&(n>0&&n<110&&t?.Ml(4,n,h,A.Z.Nl),i++),1===e&&(n>0&&n<110&&(t?.Ml(4,n,this.Yh[s]+':',A.Z.yl),t?.Ml(t.hu(this.Yh[s])+12,n,h,A.Z.BLUE)),i++),2===e&&(0===this.kh||1===this.kh&&this.su(this.Yh[s]))&&(n>0&&n<110&&(t?.Ml(4,n,this.Yh[s]+':',A.Z.Nl),t?.Ml(t.hu(this.Yh[s])+12,n,h,A.Z.BLUE)),i++),3!==e&&7!==e||0!==this.Xh||!(7===e||0===this.Rh||1===this.Rh&&this.su(this.Yh[s]))||(n>0&&n<110&&(t?.Ml(4,n,'From '+this.Yh[s]+':',A.Z.Nl),t?.Ml(t.hu('From '+this.Yh[s])+12,n,h,A.Z.bu)),i++),4===e&&(0===this.Mh||1===this.Mh&&this.su(this.Yh[s]))&&(n>0&&n<110&&t?.Ml(4,n,this.Yh[s]+' '+this.Wh[s],A.Z.vu),i++),5===e&&0===this.Xh&&this.Rh<2&&(n>0&&n<110&&t?.Ml(4,n,h,A.Z.bu),i++),6===e&&0===this.Xh&&this.Rh<2&&(n>0&&n<110&&(t?.Ml(4,n,'To '+this.Yh[s]+':',A.Z.Nl),t?.Ml(t.hu('To '+this.Yh[s])+12,n,h,A.Z.bu)),i++),8===e&&(0===this.Mh||1===this.Mh&&this.su(this.Yh[s]))&&(n>0&&n<110&&t?.Ml(4,n,this.Yh[s]+' '+this.Wh[s],A.Z.Ou),i++)}u.Z.wu(),this.lh=14*i+7,this.lh<78&&(this.lh=78),this.Ko(463,0,this.lh-this.ah-77,this.lh,77),t?.Ml(4,90,R.Z.ma(this.username)+':',A.Z.Nl),t?.Ml(t.hu(this.username+': ')+6,90,this.jh+'*',A.Z.BLUE),u.Z.tl(0,77,A.Z.Nl,479)}else this.cl(c.Z.To[this.Hh],0,0,0);this.$s&&2===this.Js&&this.Cu(),this.Di?.draw(22,375),this.Pi?.bind(),this.Ji&&(d.Z.sc=this.Ji)};bf=()=>{if(this.Ni?.bind(),!this.Lr)return;const t=this.Pn+this.dn&2047;let i=48+(this.Lr.x/32|0),s=464-(this.Lr.z/32|0);this.us?.Lu(21,9,146,151,this.ss,this.hs,i,s,t,this.wn+256),this.ds?.Lu(0,0,33,33,this.Qi,this.ts,25,25,this.Pn,256);for(let t=0;t<this.De;t++)i=4*this.Fe[t]+2-(this.Lr.x/32|0),s=4*this.Ue[t]+2-(this.Lr.z/32|0),this.Su(s,this.Bs[t],i);for(let t=0;t<G.Z.Zn;t++)for(let h=0;h<G.Z.Zn;h++){this.gr[this.Mn][t][h]&&(i=4*t+2-(this.Lr.x/32|0),s=4*h+2-(this.Lr.z/32|0),this.Su(s,this._s,i))}for(let t=0;t<this.wr;t++){const h=this.dr[this.yr[t]];h&&h.isVisible()&&h.type&&h.type.ku&&(i=(h.x/32|0)-(this.Lr.x/32|0),s=(h.z/32|0)-(this.Lr.z/32|0),this.Su(s,this.Cs,i))}for(let t=0;t<this.er;t++){const h=this.hr[this.nr[t]];if(h&&h.isVisible()&&h.name){i=(h.x/32|0)-(this.Lr.x/32|0),s=(h.z/32|0)-(this.Lr.z/32|0);let t=!1;const e=R.Z.Ru(h.name);for(let i=0;i<this.Wr;i++)if(e===this.io[i]&&0!==this.so[i]){t=!0;break}t?this.Su(s,this.Ts,i):this.Su(s,this.Es,i)}}0!==this.Ye&&(i=4*this.Ye+2-(this.Lr.x/32|0),s=4*this.Ze+2-(this.Lr.z/32|0),this.Su(s,this.Is,i)),u.Z.fillRect(93,82,3,3,A.Z.yl),this.Pi?.bind()};Su=(t,i,s)=>{if(!i)return;const h=this.Pn+this.dn&2047,e=s*s+t*t;if(e>6400)return;let n=d.Z.sin[h],r=d.Z.cos[h];n=256*n/(this.wn+256)|0,r=256*r/(this.wn+256)|0;const o=t*n+s*r>>16,l=t*r-s*n>>16;e>2500&&this.rs?i.Mu(o+94-(i.Rl/2|0),83-l-(i.xu/2|0),this.rs):i.draw(o+94-(i.Rl/2|0),83-l-(i.xu/2|0))};Nu=t=>{if(!this.us)return;const i=this.us.tc,s=i.length;for(let t=0;t<s;t++)i[t]=0;for(let s=1;s<G.Z.Zn-1;s++){let h=512*(G.Z.Zn-1-s)*4+24628;for(let e=1;e<G.Z.Zn-1;e++)this.Hn&&0==(24&this.Hn[t][e][s])&&this.Be?.Pu(t,e,s,i,h,512),t<3&&this.Hn&&0!=(8&this.Hn[t+1][e][s])&&this.Be?.Pu(t+1,e,s,i,h,512),h+=4}const h=(238+(20*Math.random()|0)-10<<16)+(238+(20*Math.random()|0)-10<<8)+(20*Math.random()|0)+238-10,n=238+(20*Math.random()|0)-10<<16;this.us.bind();for(let i=1;i<G.Z.Zn-1;i++)for(let s=1;s<G.Z.Zn-1;s++)this.Hn&&0==(24&this.Hn[t][s][i])&&this.Du(s,i,t,h,n),t<3&&this.Hn&&0!=(8&this.Hn[t+1][s][i])&&this.Du(s,i,t+1,h,n);this.Pi?.bind(),this.De=0;for(let t=0;t<G.Z.Zn;t++)for(let i=0;i<G.Z.Zn;i++){let s=this.Be?.Fu(this.Mn,t,i)??0;if(0===s)continue;s=s>>14&32767;const h=e.Z.get(s).Uu;if(h<0)continue;let n=t,r=i;if(22!==h&&29!==h&&34!==h&&36!==h&&46!==h&&47!==h&&48!==h){const s=G.Z.Zn,h=G.Z.Zn,e=this.kn[this.Mn];if(e){const o=e.flags;for(let e=0;e<10;e++){const e=4*Math.random()|0;0===e&&n>0&&n>t-3&&(o[G.Z.index(n-1,r)]&H.Z.Bu)===H.Z.OPEN&&n--,1===e&&n<s-1&&n<t+3&&(o[G.Z.index(n+1,r)]&H.Z.Gu)===H.Z.OPEN&&n++,2===e&&r>0&&r>i-3&&(o[G.Z.index(n,r-1)]&H.Z.Hu)===H.Z.OPEN&&r--,3===e&&r<h-1&&r<i+3&&(o[G.Z.index(n,r+1)]&H.Z.Wu)===H.Z.OPEN&&r++}}}this.Bs[this.De]=this.ys[h],this.Fe[this.De]=n,this.Ue[this.De]=r,this.De++}};Du=(t,i,s,h,n)=>{if(!this.Be||!this.us)return;let r=this.Be.Yu(s,t,i);if(0!==r){const o=this.Be.Zu(s,t,i,r),l=o>>6&3,a=31&o;let c=h;r>0&&(c=n);const f=this.us.tc,u=4*t+512*(103-i)*4+24624,d=r>>14&32767,w=e.Z.get(d);if(-1===w.Vu)a!==D.Z.Xu.id&&a!==D.Z.zu.id||(l===F.Z.ju?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.Z.Ku?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.Z.qu?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.Z.$u&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c)),a===D.Z.Ju.id&&(l===F.Z.ju?f[u]=c:l===F.Z.Ku?f[u+3]=c:l===F.Z.qu?f[u+3+1536]=c:l===F.Z.$u&&(f[u+1536]=c)),a===D.Z.zu.id&&(l===F.Z.$u?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.Z.ju?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.Z.Ku?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.Z.qu&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c));else{const s=this.ws[w.Vu];if(s){const h=(4*w.width-s.width)/2|0,e=(4*w.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.Z.Zn-i-w.length)+e+48)}}}if(r=this.Be.Qu(s,t,i),0!==r){const h=this.Be.Zu(s,t,i,r),n=h>>6&3,o=31&h,l=r>>14&32767,a=e.Z.get(l);if(-1!==a.Vu){const s=this.ws[a.Vu];if(s){const h=(4*a.width-s.width)/2|0,e=(4*a.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.Z.Zn-i-a.length)+e+48)}}else if(o===D.Z.td.id){let s=15658734;r>0&&(s=15597568);const h=this.us.tc,e=4*t+512*(G.Z.Zn-1-i)*4+24624;n===F.Z.ju||n===F.Z.qu?(h[e+1536]=s,h[e+1024+1]=s,h[e+512+2]=s,h[e+3]=s):(h[e]=s,h[e+512+1]=s,h[e+1024+2]=s,h[e+1536+3]=s)}}if(r=this.Be.Fu(s,t,i),0!==r){const s=e.Z.get(r>>14&32767);if(-1!==s.Vu){const h=this.ws[s.Vu];if(h){const e=(4*s.width-h.width)/2|0,n=(4*s.length-h.height)/2|0;h.draw(4*t+48+e,4*(G.Z.Zn-i-s.length)+n+48)}}}};Eu=()=>{if(this.hh<2&&0===this.ne&&0===this.me)return;let t;t=1===this.ne&&this.hh<2?'Use '+this.ae+' with...':1===this.me&&this.hh<2?this.ge+'...':this.eh[this.hh-1],this.hh>2&&(t=t+'@whi@ / '+(this.hh-2)+' more options'),this.wi?.sd(4,15,t,A.Z.yl,!0,this.Pt/1e3|0)};Cu=()=>{const t=this.Qs,i=this.th,s=this.ih,h=this.sh,e=A.Z.hd;u.Z.fillRect(t,i,s,h,e),u.Z.fillRect(t+1,i+1,s-2,16,A.Z.Nl),u.Z.wl(t+1,i+18,s-2,h-19,A.Z.Nl),this.wi?.Ml(t+3,i+14,'Choose Option',e);let n=this.Ll,r=this.Sl;0===this.Js&&(n-=8,r-=11),1===this.Js&&(n-=562,r-=231),2===this.Js&&(n-=22,r-=375);for(let h=0;h<this.hh;h++){const e=i+15*(this.hh-1-h)+31;let o=A.Z.yl;n>t&&n<t+s&&r>e-13&&r<e+3&&(o=A.Z.Pl),this.wi?.Kl(t+3,e,this.eh[h],o,!0)}};ff=async()=>{if(0!==this.te)return;let t=this.Ec;if(1===this.me&&this.Tc>=520&&this.bc>=165&&this.Tc<=788&&this.bc<=230&&(t=0),this.$s){if(1!==t){let t=this.Ll,i=this.Sl;0===this.Js?(t-=8,i-=11):1===this.Js?(t-=562,i-=231):2===this.Js&&(t-=22,i-=375),(t<this.Qs-10||t>this.Qs+this.ih+10||i<this.th-10||i>this.th+this.sh+10)&&(this.$s=!1,1===this.Js&&(this.Gs=!0),2===this.Js&&(this.Hs=!0))}if(1===t){const t=this.Qs,i=this.th,s=this.ih;let h=this.Tc,e=this.bc;0===this.Js?(h-=8,e-=11):1===this.Js?(h-=562,e-=231):2===this.Js&&(h-=22,e-=375);let n=-1;for(let r=0;r<this.hh;r++){const o=i+15*(this.hh-1-r)+31;h>t&&h<t+s&&e>o-13&&e<o+3&&(n=r)}-1!==n&&await this.hf(n),this.$s=!1,1===this.Js?this.Gs=!0:2===this.Js&&(this.Hs=!0)}}else{if(1===t&&this.hh>0){const t=this.Ce[this.hh-1];if(602===t||596===t||22===t||892===t||415===t||405===t||38===t||422===t||478===t||347===t||188===t){const t=this.Te[this.hh-1],i=this.be[this.hh-1];if(c.Z.To[i].draggable)return this.ee=!1,this.he=0,this.Jh=i,this.Qh=t,this.te=2,this.ie=this.Tc,this.se=this.bc,c.Z.To[i].ed===this.Zs&&(this.te=1),void(c.Z.To[i].ed===this.rh&&(this.te=3))}}if(1===t&&(1===this._e||this.if(this.hh-1))&&this.hh>2&&(t=2),1===t&&this.hh>0&&await this.hf(this.hh-1),2!==t||this.hh<=0)return;this.sf()}};uf=()=>{if(1===this.Ec&&this.Lr){let t=this.Tc-21-561,i=this.bc-9-5;if(t>=0&&i>=0&&t<146&&i<151){t-=73,i-=75;const s=this.Pn+this.dn&2047;let h=d.Z.sin[s],e=d.Z.cos[s];h=h*(this.wn+256)>>8,e=e*(this.wn+256)>>8;const n=i*h+t*e>>11,r=i*e-t*h>>11,o=this.Lr.x+n>>7,l=this.Lr.z-r>>7;this.lf(this.Lr.af[0],this.Lr.cf[0],o,l,1,0,0,0,0,0,!0)&&(this.Ut.p1(t),this.Ut.p1(i),this.Ut.p2(this.Pn),this.Ut.p1(57),this.Ut.p1(this.dn),this.Ut.p1(this.wn),this.Ut.p1(89),this.Ut.p2(this.Lr.x),this.Ut.p2(this.Lr.z),this.Ut.p1(this.Or),this.Ut.p1(63))}}};if=t=>{if(t<0)return!1;let i=this.Ce[t];return i>=2e3&&(i-=2e3),406===i};hf=async t=>{if(t<0)return;this.Gh&&(this.Gh=!1,this.Hs=!0);let i=this.Ce[t];const s=this.Ee[t],h=this.Te[t],r=this.be[t];if(i>=2e3&&(i-=2e3),903===i||363===i){let s=this.eh[t];const h=s.indexOf('@whi@');if(-1!==h){s=s.substring(h+5).trim();const t=R.Z.ma(R.Z.Aa(R.Z.Ru(s)));let e=!1;for(let s=0;s<this.er;s++){const h=this.hr[this.nr[s]];if(h&&h.name&&h.name.toLowerCase()===t.toLowerCase()&&this.Lr){this.lf(this.Lr.af[0],this.Lr.cf[0],h.af[0],h.cf[0],2,1,1,0,0,0,!1),903===i?this.Ut.Yc(b.Z.nd):363===i&&this.Ut.Yc(b.Z.rd),this.Ut.p2(this.nr[s]),e=!0;break}}e||this.od(0,'Unable to find '+t,'')}}else if(450===i&&this.ld(b.Z.ad,h,r,s))this.Ut.p2(this.le),this.Ut.p2(this.re),this.Ut.p2(this.oe);else if(405===i||38===i||422===i||478===i||347===i)478===i?(0==(3&h)&&$.K.dt++,$.K.dt>=90&&this.Ut.Yc(b.Z.fd),this.Ut.Yc(b.Z.ud)):347===i?this.Ut.Yc(b.Z.dd):422===i?this.Ut.Yc(b.Z.wd):405===i?($.K.It+=s,$.K.It>=97&&(this.Ut.Yc(b.Z.yd),this.Ut.p3(14953816)),this.Ut.Yc(b.Z.pd)):38===i&&this.Ut.Yc(b.Z.md),this.Ut.p2(s),this.Ut.p2(h),this.Ut.p2(r),this.de=0,this.ue=r,this.fe=h,this.ce=2,c.Z.To[r].ed===this.Zs&&(this.ce=1),c.Z.To[r].ed===this.rh&&(this.ce=3);else if(728===i||542===i||6===i||963===i||245===i){const t=this.dr[s];t&&this.Lr&&(this.lf(this.Lr.af[0],this.Lr.cf[0],t.af[0],t.cf[0],2,1,1,0,0,0,!1),this.js=this.Tc,this.Ks=this.bc,this.Xs=2,this.zs=0,542===i?this.Ut.Yc(b.Z.Ad):6===i?(0==(3&s)&&$.K._t++,$.K._t>=124&&(this.Ut.Yc(b.Z.Id),this.Ut.p4(0)),this.Ut.Yc(b.Z.gd)):963===i?this.Ut.Yc(b.Z._d):728===i?this.Ut.Yc(b.Z.Cd):245===i&&(0==(3&s)&&$.K.yt++,$.K.yt>=85&&(this.Ut.Yc(b.Z.Ed),this.Ut.p2(39596)),this.Ut.Yc(b.Z.Td)),this.Ut.p2(s))}else if(217===i){if(this.Lr){this.lf(this.Lr.af[0],this.Lr.cf[0],h,r,2,0,0,0,0,0,!1)||this.lf(this.Lr.af[0],this.Lr.cf[0],h,r,2,1,1,0,0,0,!1),this.js=this.Tc,this.Ks=this.bc,this.Xs=2,this.zs=0,this.Ut.Yc(b.Z.bd),this.Ut.p2(h+this.Cn),this.Ut.p2(r+this.En),this.Ut.p2(s),this.Ut.p2(this.le),this.Ut.p2(this.re),this.Ut.p2(this.oe)}}else if(1175===i){const t=s>>14&32767,i=e.Z.get(t);let h;h=i.vd?i.vd:"It's a "+i.name+'.',this.od(0,h,'')}else if(285===i)this.ld(b.Z.Od,h,r,s);else if(881===i)this.Ut.Yc(b.Z.Ld),this.Ut.p2(s),this.Ut.p2(h),this.Ut.p2(r),this.Ut.p2(this.le),this.Ut.p2(this.re),this.Ut.p2(this.oe),this.de=0,this.ue=r,this.fe=h,this.ce=2,c.Z.To[r].ed===this.Zs&&(this.ce=1),c.Z.To[r].ed===this.rh&&(this.ce=3);else if(391===i)this.Ut.Yc(b.Z.Sd),this.Ut.p2(s),this.Ut.p2(h),this.Ut.p2(r),this.Ut.p2(this.Ae),this.de=0,this.ue=r,this.fe=h,this.ce=2,c.Z.To[r].ed===this.Zs&&(this.ce=1),c.Z.To[r].ed===this.rh&&(this.ce=3);else if(660===i)this.$s?this.Be?.click(h-8,r-11):this.Be?.click(this.Tc-8,this.bc-11);else{if(188===i)return this.ne=1,this.re=h,this.oe=r,this.le=s,this.ae=n.Z.get(s).name,void(this.me=0);if(44===i)this.we||(this.Ut.Yc(b.Z.kd),this.Ut.p2(r),this.we=!0);else if(1773===i){const t=n.Z.get(s);let i;i=r>=1e5?r+' x '+t.name:t.vd?t.vd:"It's a "+t.name+'.',this.od(0,i,'')}else if(900===i){const t=this.dr[s];t&&this.Lr&&(this.lf(this.Lr.af[0],this.Lr.cf[0],t.af[0],t.cf[0],2,1,1,0,0,0,!1),this.js=this.Tc,this.Ks=this.bc,this.Xs=2,this.zs=0,this.Ut.Yc(b.Z.Rd),this.Ut.p2(s),this.Ut.p2(this.le),this.Ut.p2(this.re),this.Ut.p2(this.oe))}else if(1373===i||1544===i||151===i||1101===i){const t=this.hr[s];t&&this.Lr&&(this.lf(this.Lr.af[0],this.Lr.cf[0],t.af[0],t.cf[0],2,1,1,0,0,0,!1),this.js=this.Tc,this.Ks=this.bc,this.Xs=2,this.zs=0,1101===i?this.Ut.Yc(b.Z.rd):151===i?($.K.Et++,$.K.Et>=90&&(this.Ut.Yc(b.Z.Md),this.Ut.p2(31114)),this.Ut.Yc(b.Z.xd)):1373===i?this.Ut.Yc(b.Z.nd):1544===i&&this.Ut.Yc(b.Z.Nd),this.Ut.p2(s))}else if(265===i){const t=this.dr[s];t&&this.Lr&&(this.lf(this.Lr.af[0],this.Lr.cf[0],t.af[0],t.cf[0],2,1,1,0,0,0,!1),this.js=this.Tc,this.Ks=this.bc,this.Xs=2,this.zs=0,this.Ut.Yc(b.Z.Pd),this.Ut.p2(s),this.Ut.p2(this.Ae))}else if(679===i){const i=this.eh[t],s=i.indexOf('@whi@');if(-1!==s){const t=R.Z.Ru(i.substring(s+5).trim());let h=-1;for(let i=0;i<this.Wr;i++)if(this.io[i]===t){h=i;break}-1!==h&&this.so[h]>0&&(this.Hs=!0,this.Gh=!1,this.Ph=!0,this.Fh='',this.Uh=3,this.ho=this.io[h],this.Dh='Enter message to send to '+this.Qr[h])}}else if(55===i)this.ld(b.Z.Dd,h,r,s)&&this.Ut.p2(this.Ae);else if(224===i||993===i||99===i||746===i||877===i){if(this.Lr){this.lf(this.Lr.af[0],this.Lr.cf[0],h,r,2,0,0,0,0,0,!1)||this.lf(this.Lr.af[0],this.Lr.cf[0],h,r,2,1,1,0,0,0,!1),this.js=this.Tc,this.Ks=this.bc,this.Xs=2,this.zs=0,224===i?this.Ut.Yc(b.Z.Fd):746===i?this.Ut.Yc(b.Z.Ud):877===i?this.Ut.Yc(b.Z.Bd):99===i?this.Ut.Yc(b.Z.Gd):993===i&&this.Ut.Yc(b.Z.Hd),this.Ut.p2(h+this.Cn),this.Ut.p2(r+this.En),this.Ut.p2(s)}}else if(1607===i){const t=this.dr[s];if(t&&t.type){let i;i=t.type.vd?t.type.vd:"It's a "+t.type.name+'.',this.od(0,i,'')}}else if(504===i)this.ld(b.Z.Wd,h,r,s);else{if(930===i){const t=c.Z.To[r];this.me=1,this.Ae=r,this.Ie=t.Yd,this.ne=0;let i=t.Zd;i&&-1!==i.indexOf(' ')&&(i=i.substring(0,i.indexOf(' ')));let s=t.Zd;return s&&-1!==s.indexOf(' ')&&(s=s.substring(s.indexOf(' ')+1)),this.ge=i+' '+t.action+' '+s,void(16===this.Ie&&(this.Gs=!0,this.Lh=3,this.Ws=!0))}if(951===i){const t=c.Z.To[r];let i=!0;t.pl>0&&(i=this.Vd(t)),i&&(this.Ut.Yc(b.Z.Xd),this.Ut.p2(r))}else if(602===i||596===i||22===i||892===i||415===i)22===i?this.Ut.Yc(b.Z.zd):415===i?(0==(3&r)&&$.K.bt++,$.K.bt>=55&&(this.Ut.Yc(b.Z.jd),this.Ut.p4(0)),this.Ut.Yc(b.Z.Kd)):602===i?this.Ut.Yc(b.Z.qd):892===i?(0==(3&h)&&$.K.Ct++,$.K.Ct>=130&&(this.Ut.Yc(b.Z.$d),this.Ut.p1(177)),this.Ut.Yc(b.Z.Jd)):596===i&&this.Ut.Yc(b.Z.Qd),this.Ut.p2(s),this.Ut.p2(h),this.Ut.p2(r),this.de=0,this.ue=r,this.fe=h,this.ce=2,c.Z.To[r].ed===this.Zs&&(this.ce=1),c.Z.To[r].ed===this.rh&&(this.ce=3);else if(581===i)0==(3&s)&&$.K.wt++,$.K.wt>=99&&(this.Ut.Yc(b.Z.tw),this.Ut.p4(0)),this.ld(b.Z.iw,h,r,s);else if(965===i){if(this.Lr){this.lf(this.Lr.af[0],this.Lr.cf[0],h,r,2,0,0,0,0,0,!1)||this.lf(this.Lr.af[0],this.Lr.cf[0],h,r,2,1,1,0,0,0,!1),this.js=this.Tc,this.Ks=this.bc,this.Xs=2,this.zs=0,this.Ut.Yc(b.Z.sw),this.Ut.p2(h+this.Cn),this.Ut.p2(r+this.En),this.Ut.p2(s),this.Ut.p2(this.Ae)}}else if(1501===i)$.K.gt+=this.En,$.K.gt>=92&&(this.Ut.Yc(b.Z.hw),this.Ut.p4(0)),this.ld(b.Z.ew,h,r,s);else if(364===i)this.ld(b.Z.nw,h,r,s);else if(1102===i){const t=n.Z.get(s);let i;i=t.vd?t.vd:"It's a "+t.name+'.',this.od(0,i,'')}else if(960===i){this.Ut.Yc(b.Z.Xd),this.Ut.p2(r);const t=c.Z.To[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];t.jo&&this.ye[i]!==t.jo[0]&&(this.ye[i]=t.jo[0],await this.rw(i),this.Gs=!0)}}else if(34===i){const i=this.eh[t],s=i.indexOf('@whi@');if(-1!==s){this.ow(),this.Se=i.substring(s+5).trim(),this.ke=!1;for(let t=0;t<c.Z.To.length;t++)if(c.Z.To[t]&&c.Z.To[t].pl===c.Z.Ra){this.Re=this.Zs=c.Z.To[t].ed;break}}}else if(947===i)this.ow();else if(367===i){const t=this.hr[s];t&&this.Lr&&(this.lf(this.Lr.af[0],this.Lr.cf[0],t.af[0],t.cf[0],2,1,1,0,0,0,!1),this.js=this.Tc,this.Ks=this.bc,this.Xs=2,this.zs=0,this.Ut.Yc(b.Z.lw),this.Ut.p2(s),this.Ut.p2(this.le),this.Ut.p2(this.re),this.Ut.p2(this.oe))}else if(465===i){this.Ut.Yc(b.Z.Xd),this.Ut.p2(r);const t=c.Z.To[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];this.ye[i]=1-this.ye[i],await this.rw(i),this.Gs=!0}}else if(406===i||436===i||557===i||556===i){const s=this.eh[t],h=s.indexOf('@whi@');if(-1!==h){const t=R.Z.Ru(s.substring(h+5).trim());406===i?this.aw(t):436===i?this.cw(t):557===i?this.fw(t):556===i&&this.uw(t)}}else if(651===i){const t=this.hr[s];t&&this.Lr&&(this.lf(this.Lr.af[0],this.Lr.cf[0],t.af[0],t.cf[0],2,1,1,0,0,0,!1),this.js=this.Tc,this.Ks=this.bc,this.Xs=2,this.zs=0,this.Ut.Yc(b.Z.dw),this.Ut.p2(s),this.Ut.p2(this.Ae))}}}this.ne=0,this.me=0};Vd=t=>{const i=t.pl;if(i===c.Z.ww&&(this.Hs=!0,this.Gh=!1,this.Ph=!0,this.Fh='',this.Uh=1,this.Dh='Enter name of friend to add to list'),i===c.Z.yw&&(this.Hs=!0,this.Gh=!1,this.Ph=!0,this.Fh='',this.Uh=2,this.Dh='Enter name of friend to delete from list'),i===c.Z.pw)return this.Wt=250,!0;if(i===c.Z.mw&&(this.Hs=!0,this.Gh=!1,this.Ph=!0,this.Fh='',this.Uh=4,this.Dh='Enter name of player to add to list'),i===c.Z.Aw&&(this.Hs=!0,this.Gh=!1,this.Ph=!0,this.Fh='',this.Uh=5,this.Dh='Enter name of player to delete from list'),i>=c.Z.Iw&&i<=c.Z.gw){const t=(i-300)/2|0,s=1&i;let h=this.Gr[t];if(-1!==h)for(;;)if(0===s&&(h--,h<0&&(h=o.Z.count-1)),1===s&&(h++,h>=o.Z.count&&(h=0)),!o.Z.To[h].disable&&o.Z.To[h].type===t+(this.Ur?0:7)){this.Gr[t]=h,this.Br=!0;break}}if(i>=c.Z._w&&i<=c.Z.Cw){const t=(i-314)/2|0,s=1&i;let h=this.Hr[t];0===s&&(h--,h<0&&(h=W.Z.Ea[t].length-1)),1===s&&(h++,h>=W.Z.Ea[t].length&&(h=0)),this.Hr[t]=h,this.Br=!0}if(i!==c.Z.Sa||this.Ur||(this.Ur=!0,this.Bc()),i===c.Z.ka&&this.Ur&&(this.Ur=!1,this.Bc()),i===c.Z.Ew){this.Ut.Yc(b.Z.Tw),this.Ut.p1(this.Ur?0:1);for(let t=0;t<7;t++)this.Ut.p1(this.Gr[t]);for(let t=0;t<5;t++)this.Ut.p1(this.Hr[t]);return!0}return i===c.Z.Ma&&(this.ke=!this.ke),i>=c.Z.bw&&i<=c.Z.Ow&&(this.ow(),this.Se.length>0&&(this.Ut.Yc(b.Z.Lw),this.Ut.Sw(R.Z.Ru(this.Se)),this.Ut.p1(i-601),this.Ut.p1(this.ke?1:0))),!1};Bc=()=>{this.Br=!0;for(let t=0;t<7;t++){this.Gr[t]=-1;for(let i=0;i<o.Z.count;i++)if(!o.Z.To[i].disable&&o.Z.To[i].type===t+(this.Ur?0:7)){this.Gr[t]=i;break}}};ld=(t,i,s,h)=>{if(!this.Lr||!this.Be)return!1;const n=h>>14&32767,r=this.Be.Zu(this.Mn,i,s,h);if(-1===r)return!1;const o=31&r,l=r>>6&3;if(o===D.Z.kw.id||o===D.Z.Rw.id||o===D.Z.Mw.id){const t=e.Z.get(n);let h,r;l===F.Z.ju||l===F.Z.qu?(h=t.width,r=t.length):(h=t.length,r=t.width);let o=t.xw;0!==l&&(o=(o<<l&15)+(o>>4-l)),this.lf(this.Lr.af[0],this.Lr.cf[0],i,s,2,h,r,0,0,o,!1)}else this.lf(this.Lr.af[0],this.Lr.cf[0],i,s,2,0,0,l,o+1,0,!1);return this.js=this.Tc,this.Ks=this.bc,this.Xs=2,this.zs=0,this.Ut.Yc(t),this.Ut.p2(i+this.Cn),this.Ut.p2(s+this.En),this.Ut.p2(n),!0};df=()=>{1===this.Ec&&(this.Tc>=549&&this.Tc<=583&&this.bc>=195&&this.bc<231&&-1!==this.Sh[0]?(this.Gs=!0,this.Lh=0,this.Ws=!0):this.Tc>=579&&this.Tc<=609&&this.bc>=194&&this.bc<231&&-1!==this.Sh[1]?(this.Gs=!0,this.Lh=1,this.Ws=!0):this.Tc>=607&&this.Tc<=637&&this.bc>=194&&this.bc<231&&-1!==this.Sh[2]?(this.Gs=!0,this.Lh=2,this.Ws=!0):this.Tc>=635&&this.Tc<=679&&this.bc>=194&&this.bc<229&&-1!==this.Sh[3]?(this.Gs=!0,this.Lh=3,this.Ws=!0):this.Tc>=676&&this.Tc<=706&&this.bc>=194&&this.bc<231&&-1!==this.Sh[4]?(this.Gs=!0,this.Lh=4,this.Ws=!0):this.Tc>=704&&this.Tc<=734&&this.bc>=194&&this.bc<231&&-1!==this.Sh[5]?(this.Gs=!0,this.Lh=5,this.Ws=!0):this.Tc>=732&&this.Tc<=766&&this.bc>=195&&this.bc<231&&-1!==this.Sh[6]?(this.Gs=!0,this.Lh=6,this.Ws=!0):this.Tc>=550&&this.Tc<=584&&this.bc>=492&&this.bc<528&&-1!==this.Sh[7]?(this.Gs=!0,this.Lh=7,this.Ws=!0):this.Tc>=582&&this.Tc<=612&&this.bc>=492&&this.bc<529&&-1!==this.Sh[8]?(this.Gs=!0,this.Lh=8,this.Ws=!0):this.Tc>=609&&this.Tc<=639&&this.bc>=492&&this.bc<529&&-1!==this.Sh[9]?(this.Gs=!0,this.Lh=9,this.Ws=!0):this.Tc>=637&&this.Tc<=681&&this.bc>=493&&this.bc<528&&-1!==this.Sh[10]?(this.Gs=!0,this.Lh=10,this.Ws=!0):this.Tc>=679&&this.Tc<=709&&this.bc>=492&&this.bc<529&&-1!==this.Sh[11]?(this.Gs=!0,this.Lh=11,this.Ws=!0):this.Tc>=706&&this.Tc<=736&&this.bc>=492&&this.bc<529&&-1!==this.Sh[12]?(this.Gs=!0,this.Lh=12,this.Ws=!0):this.Tc>=734&&this.Tc<=768&&this.bc>=492&&this.bc<528&&-1!==this.Sh[13]&&(this.Gs=!0,this.Lh=13,this.Ws=!0),$.K.ut++,$.K.ut>150&&($.K.ut=0,this.Ut.Yc(b.Z.Nw),this.Ut.p1(43)))};mf=async()=>{for(;;){let t;do{for(;;){if(t=this.Oc(),-1===t)return;if(-1!==this.Zs&&this.Zs===this.Re){8===t&&this.Se.length>0&&(this.Se=this.Se.substring(0,this.Se.length-1));break}if(this.Ph){if(t>=32&&t<=122&&this.Fh.length<80&&(this.Fh=this.Fh+String.fromCharCode(t),this.Hs=!0),8===t&&this.Fh.length>0&&(this.Fh=this.Fh.substring(0,this.Fh.length-1),this.Hs=!0),13===t||10===t){let t;if(this.Ph=!1,this.Hs=!0,1===this.Uh&&(t=R.Z.Ru(this.Fh),this.aw(t)),2===this.Uh&&this.Wr>0&&(t=R.Z.Ru(this.Fh),this.fw(t)),3===this.Uh&&this.Fh.length>0&&this.ho){this.Ut.Yc(b.Z.Pw),this.Ut.p1(0);const t=this.Ut.Mc;this.Ut.Sw(this.ho),O.Z.Dw(this.Ut,this.Fh),this.Ut.Pf(this.Ut.Mc-t),this.Fh=R.Z.Fw(this.Fh),this.Fh=v.Z.filter(this.Fh),this.od(6,this.Fh,R.Z.ma(R.Z.Aa(this.ho))),2===this.Rh&&(this.Rh=1,this.Ys=!0,this.Ut.Yc(b.Z.Uw),this.Ut.p1(this.kh),this.Ut.p1(this.Rh),this.Ut.p1(this.Mh))}4===this.Uh&&this.fh<100&&(t=R.Z.Ru(this.Fh),this.cw(t)),5===this.Uh&&this.fh>0&&(t=R.Z.Ru(this.Fh),this.uw(t))}}else if(this.Gh){if(t>=48&&t<=57&&this.Bh.length<10&&(this.Bh=this.Bh+String.fromCharCode(t),this.Hs=!0),8===t&&this.Bh.length>0&&(this.Bh=this.Bh.substring(0,this.Bh.length-1),this.Hs=!0),13===t||10===t){if(this.Bh.length>0){let t=0;try{t=parseInt(this.Bh,10)}catch(t){}this.Ut.Yc(b.Z.Bw),this.Ut.p4(t)}this.Gh=!1,this.Hs=!0}}else if(-1===this.rh&&(t>=32&&t<=122&&this.jh.length<80&&(this.jh=this.jh+String.fromCharCode(t),this.Hs=!0),8===t&&this.jh.length>0&&(this.jh=this.jh.substring(0,this.jh.length-1),this.Hs=!0),(13===t||10===t)&&this.jh.length>0)){if('::clientdrop'===this.jh)await this.Vc();else if(this.Fr&&'::noclip'===this.jh)for(let t=0;t<G.Z.Rn;t++)for(let i=1;i<G.Z.Zn-1;i++)for(let s=1;s<G.Z.Zn-1;s++){const h=this.kn[t];h&&(h.flags[G.Z.index(i,s)]=0)}else if('::debug'===this.jh)$.K.rt=!$.K.rt;else if(this.jh.startsWith('::fps '))try{this.Gw(parseInt(this.jh.substring(6),10))}catch(t){}if(this.jh.startsWith('::'))this.Ut.Yc(b.Z.Hw),this.Ut.p1(this.jh.length-1),this.Ut.Nc(this.jh.substring(2));else{let t=0;this.jh.startsWith('yellow:')?(t=0,this.jh=this.jh.substring(7)):this.jh.startsWith('red:')?(t=1,this.jh=this.jh.substring(4)):this.jh.startsWith('green:')?(t=2,this.jh=this.jh.substring(6)):this.jh.startsWith('cyan:')?(t=3,this.jh=this.jh.substring(5)):this.jh.startsWith('purple:')?(t=4,this.jh=this.jh.substring(7)):this.jh.startsWith('white:')?(t=5,this.jh=this.jh.substring(6)):this.jh.startsWith('flash1:')?(t=6,this.jh=this.jh.substring(7)):this.jh.startsWith('flash2:')?(t=7,this.jh=this.jh.substring(7)):this.jh.startsWith('flash3:')?(t=8,this.jh=this.jh.substring(7)):this.jh.startsWith('glow1:')?(t=9,this.jh=this.jh.substring(6)):this.jh.startsWith('glow2:')?(t=10,this.jh=this.jh.substring(6)):this.jh.startsWith('glow3:')&&(t=11,this.jh=this.jh.substring(6));let i=0;this.jh.startsWith('wave:')&&(i=1,this.jh=this.jh.substring(5)),this.jh.startsWith('scroll:')&&(i=2,this.jh=this.jh.substring(7)),this.Ut.Yc(b.Z.Ww),this.Ut.p1(0);const s=this.Ut.Mc;this.Ut.p1(t),this.Ut.p1(i),O.Z.Dw(this.Ut,this.jh),this.Ut.Pf(this.Ut.Mc-s),this.jh=R.Z.Fw(this.jh),this.jh=v.Z.filter(this.jh),this.Lr&&this.Lr.name&&(this.Lr.iu=this.jh,this.Lr.eu=t,this.Lr.nu=i,this.Lr.ru=150,this.od(2,this.Lr.iu,this.Lr.name)),2===this.kh&&(this.kh=3,this.Ys=!0,this.Ut.Yc(b.Z.Uw),this.Ut.p1(this.kh),this.Ut.p1(this.Rh),this.Ut.p1(this.Mh))}this.jh='',this.Hs=!0}}}while((t<97||t>122)&&(t<65||t>90)&&(t<48||t>57)&&32!==t);this.Se.length<12&&(this.Se=this.Se+String.fromCharCode(t))}};wf=()=>{if(1===this.Ec)if(this.Tc>=8&&this.Tc<=108&&this.bc>=490&&this.bc<=522)this.kh=(this.kh+1)%4,this.Ys=!0,this.Hs=!0,this.Ut.Yc(b.Z.Uw),this.Ut.p1(this.kh),this.Ut.p1(this.Rh),this.Ut.p1(this.Mh);else if(this.Tc>=137&&this.Tc<=237&&this.bc>=490&&this.bc<=522)this.Rh=(this.Rh+1)%3,this.Ys=!0,this.Hs=!0,this.Ut.Yc(b.Z.Uw),this.Ut.p1(this.kh),this.Ut.p1(this.Rh),this.Ut.p1(this.Mh);else if(this.Tc>=275&&this.Tc<=375&&this.bc>=490&&this.bc<=522)this.Mh=(this.Mh+1)%3,this.Ys=!0,this.Hs=!0,this.Ut.Yc(b.Z.Uw),this.Ut.p1(this.kh),this.Ut.p1(this.Rh),this.Ut.p1(this.Mh);else if(this.Tc>=416&&this.Tc<=516&&this.bc>=490&&this.bc<=522){this.ow(),this.Se='',this.ke=!1;for(let t=0;t<c.Z.To.length;t++)if(c.Z.To[t]&&600===c.Z.To[t].pl)return void(this.Re=this.Zs=c.Z.To[t].ed)}};Ef=(t,i,s,h,e,n,r,o)=>{if(this.xh?this.Nh=32:this.Nh=0,this.xh=!1,t>=n&&t<n+16&&i>=r&&i<r+16)o.Il-=4*this.Vs,e&&(this.Gs=!0);else if(t>=n&&t<n+16&&i>=r+h-16&&i<r+h)o.Il+=4*this.Vs,e&&(this.Gs=!0);else if(t>=n-this.Nh&&t<n+this.Nh+16&&i>=r+16&&i<r+h-16&&this.Vs>0){let t=(h-32)*h/s|0;t<8&&(t=8);const n=i-r-(t/2|0)-16,l=h-t-32;o.Il=(s-h)*n/l|0,e&&(this.Gs=!0),this.xh=!0}};Gc=()=>{this.Di||(this.Eo(),this.vo=null,this.Qt=null,this.ti=null,this.ii=null,this.si=null,this.hi=null,this.ei=null,this.ni=null,this.ri=null,this.oi=null,this.Di=new f.Z(479,96),this.Ni=new f.Z(168,160),u.Z.clear(),this.rs?.draw(0,0),this.xi=new f.Z(190,261),this.Pi=new f.Z(512,334),u.Z.clear(),this.Fi=new f.Z(501,61),this.Ui=new f.Z(288,40),this.Bi=new f.Z(269,66),this.qt=!0)};su=t=>{if(!t)return!1;for(let i=0;i<this.Wr;i++)if(t.toLowerCase()===this.Qr[i]?.toLowerCase())return!0;return!!this.Lr&&t.toLowerCase()===this.Lr.name?.toLowerCase()};aw=t=>{if(0n===t)return;if(this.Wr>=100)return void this.od(0,'Your friends list is full. Max of 100 hit','');const i=R.Z.ma(R.Z.Aa(t));for(let s=0;s<this.Wr;s++)if(this.io[s]===t)return void this.od(0,i+' is already on your friend list','');for(let s=0;s<this.fh;s++)if(this.uh[s]===t)return void this.od(0,'Please remove '+i+' from your ignore list first','');this.Lr&&this.Lr.name&&i!==this.Lr.name&&(this.Qr[this.Wr]=i,this.io[this.Wr]=t,this.so[this.Wr]=0,this.Wr++,this.Gs=!0,this.Ut.Yc(b.Z.Yw),this.Ut.Sw(t))};fw=t=>{if(0n!==t)for(let i=0;i<this.Wr;i++)if(this.io[i]===t){this.Wr--,this.Gs=!0;for(let t=i;t<this.Wr;t++)this.Qr[t]=this.Qr[t+1],this.so[t]=this.so[t+1],this.io[t]=this.io[t+1];return this.Ut.Yc(b.Z.Zw),void this.Ut.Sw(t)}};cw=t=>{if(0n===t)return;if(this.fh>=100)return void this.od(0,'Your ignore list is full. Max of 100 hit','');const i=R.Z.ma(R.Z.Aa(t));for(let s=0;s<this.fh;s++)if(this.uh[s]===t)return void this.od(0,i+' is already on your ignore list','');for(let s=0;s<this.Wr;s++)if(this.io[s]===t)return void this.od(0,'Please remove '+i+' from your friend list first','');this.uh[this.fh++]=t,this.Gs=!0,this.Ut.Yc(b.Z.Vw),this.Ut.Sw(t)};uw=t=>{if(0n!==t)for(let i=0;i<this.fh;i++)if(this.uh[i]===t){this.fh--,this.Gs=!0;for(let t=i;t<this.fh;t++)this.uh[t]=this.uh[t+1];return this.Ut.Yc(b.Z.Xw),void this.Ut.Sw(t)}};zw=(t,i)=>{const s=this.gr[this.Mn][t][i];if(!s)return void this.Be?.jw(this.Mn,t,i);let h=-99999999,e=null;for(let t=s.Kw();t;t=s.qw()){const i=n.Z.get(t.index);let s=i.$w;i.la&&(s*=t.count+1),s>h&&(h=s,e=t)}if(!e)return;s.Jw(e);let r=-1,o=-1,l=0,a=0;for(let t=s.Kw();t;t=s.qw())t.index!==e.index&&-1===r&&(r=t.index,l=t.count),t.index!==e.index&&t.index!==r&&-1===o&&(o=t.index,a=t.count);let c=null;-1!==r&&(c=n.Z.get(r).Qw(l));let f=null;-1!==o&&(f=n.Z.get(o).Qw(a));const u=t+(i<<7)+1610612736|0,d=n.Z.get(e.index);this.Be?.ty(t,i,this.xf(this.Mn,128*t+64,128*i+64),this.Mn,u,d.Qw(e.count),f,c)};iy=(t,i,s,h,n,r,o)=>{if(i<1||s<1||i>102||s>102)return;if($.K.ht&&t!==this.Mn)return;if(!this.Be)return;let l=0;if(o===P.Z.sy&&(l=this.Be.Yu(t,i,s)),o===P.Z.hy&&(l=this.Be.ey(t,s,i)),o===P.Z.ny&&(l=this.Be.Qu(t,i,s)),o===P.Z.Mw&&(l=this.Be.Fu(t,i,s)),0!==l){const h=this.Be.Zu(t,i,s,l),n=l>>14&32767,r=31&h,a=h>>6;if(o===P.Z.sy){this.Be?.oy(t,i,s,1);const h=e.Z.get(n);h.ly&&this.kn[t]?.oy(i,s,r,a,h.uy)}if(o===P.Z.hy&&this.Be?.wy(t,i,s),o===P.Z.ny){this.Be.yy(t,i,s);const h=e.Z.get(n);if(i+h.width>G.Z.Zn-1||s+h.width>G.Z.Zn-1||i+h.length>G.Z.Zn-1||s+h.length>G.Z.Zn-1)return;h.ly&&this.kn[t]?.yy(i,s,h.width,h.length,a,h.uy)}if(o===P.Z.Mw){this.Be?.py(t,i,s);const h=e.Z.get(n);h.ly&&h.active&&this.kn[t]?.my(i,s)}}if(h>=0){let e=t;this.Hn&&t<3&&2==(2&this.Hn[1][i][s])&&(e=t+1),N.Z.iy(t,i,s,this.Be,this.Gn,this.Ar,this.kn[t],h,r,n,e)}};ow=()=>{this.Ut.Yc(b.Z.Ay),-1!==this.nh&&(this.nh=-1,this.Gs=!0,this.we=!1,this.Ws=!0),-1!==this.rh&&(this.rh=-1,this.Hs=!0,this.we=!1),this.Zs=-1};Vc=async()=>{this.Wt>0?await this.Iy():(this.Pi?.bind(),this.di?.cc(257,144,'Connection lost',A.Z.Nl),this.di?.cc(256,143,'Connection lost',A.Z.yl),this.di?.cc(257,159,'Please wait - attempting to reestablish',A.Z.Nl),this.di?.cc(256,158,'Please wait - attempting to reestablish',A.Z.yl),this.Pi?.draw(8,11),this.Ye=0,this.stream?.close(),this.ec=!1,await this.vc(this.username,this.password,!0),this.ec||await this.Iy())};Iy=async()=>{this.stream&&this.stream.close(),this.stream=null,this.ec=!1,this.$t=0,this.username='',this.password='',M.Z.Fc(),this.zf(),this.Be?.reset();for(let t=0;t<G.Z.Rn;t++)this.kn[t]?.reset();(0,j.Co)(),this.po=null,this.wo=0,$.K.ht||await this.Bo('scape_main',12345678,4e4)};read=async()=>{if(!this.stream)return!1;try{let t=this.stream.available;if(0===t)return!1;if(-1===this.Vt&&(await this.stream.Rc(this.in.data,0,1),this.Vt=255&this.in.data[0],this.Zt&&(this.Vt=this.Vt-this.Zt.gy&255),this.packetSize=_.Z._y[this.Vt],t--),-1===this.packetSize){if(t<=0)return!1;await this.stream.Rc(this.in.data,0,1),this.packetSize=255&this.in.data[0],t--}if(-2===this.packetSize){if(t<=1)return!1;await this.stream.Rc(this.in.data,0,2),this.in.Mc=0,this.packetSize=this.in.Cy,t-=2}if(t<this.packetSize)return!1;if(this.in.Mc=0,await this.stream.Rc(this.in.data,0,this.packetSize),this.Ht=0,this.jt=this.zt,this.zt=this.Xt,this.Xt=this.Vt,this.Vt===T.Z.Ey){const t=this.in.Cy,i=this.in.Ty;return this.pe[t]=i,this.ye[t]!==i&&(this.ye[t]=i,await this.rw(t),this.Gs=!0,-1!==this.Hh&&(this.Hs=!0)),this.Vt=-1,!0}if(this.Vt===T.Z.by){const t=this.in.xc,i=this.in.vy;let s=R.Z.ma(R.Z.Aa(t));for(let h=0;h<this.Wr;h++)if(t===this.io[h]){this.so[h]!==i&&(this.so[h]=i,this.Gs=!0,i>0&&this.od(5,s+' has logged in.',''),0===i&&this.od(5,s+' has logged out.','')),s=null;break}s&&this.Wr<100&&(this.io[this.Wr]=t,this.Qr[this.Wr]=s,this.so[this.Wr]=i,this.Wr++,this.Gs=!0);let h=!1;for(;!h;){h=!0;for(let t=0;t<this.Wr-1;t++)if(this.so[t]!==$.K.it&&this.so[t+1]===$.K.it||0===this.so[t]&&0!==this.so[t+1]){const i=this.so[t];this.so[t]=this.so[t+1],this.so[t+1]=i;const s=this.Qr[t];this.Qr[t]=this.Qr[t+1],this.Qr[t+1]=s;const e=this.io[t];this.io[t]=this.io[t+1],this.io[t+1]=e,this.Gs=!0,h=!1}}return this.Vt=-1,!0}if(this.Vt===T.Z.Oy)return this.Yt=30*this.in.Cy,this.Vt=-1,!0;if(this.Vt===T.Z.Ly){const t=this.in.vy,i=this.in.vy;let s=-1;if(this.vn)for(let h=0;h<this.vn.length;h++)this.vn[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.Tn;if(h){const e=h[s];-1!==s&&e&&(this.db?.Uo(`m${t}_${i}`,e),this.Ge=1)}}return this.Vt=-1,!0}if(this.Vt===T.Z.Sy)return this.ky(this.in,this.packetSize),this.Vt=-1,!0;if(this.Vt===T.Z.Ry){const t=this.in.Cy,i=this.in.Cy;if(this.gn===t&&this._n===i&&0!==this.Ge)return this.Vt=-1,!0;this.gn=t,this._n=i,this.Cn=8*(this.gn-6),this.En=8*(this._n-6),this.Ge=1,this.Pi?.bind(),this.di?.cc(257,151,'Loading - please wait.',A.Z.Nl),this.di?.cc(256,150,'Loading - please wait.',A.Z.yl),this.Pi?.draw(8,11);const s=(this.packetSize-2)/10|0;this.Tn=new q.to(s,null),this.bn=new q.to(s,null),this.vn=new Int32Array(s),this.Ut.Yc(b.Z.My),this.Ut.p1(0);let h=0;for(let t=0;t<s;t++){const i=this.in.vy,s=this.in.vy,e=this.in.Go,n=this.in.Go;let r;this.vn[t]=(i<<8)+s,0!==e&&(r=await(this.db?.xo(`m${i}_${s}`)),r&&I.Z.No(r)!==e&&(r=void 0),r?this.Tn[t]=r:(this.Ge=0,this.Ut.p1(0),this.Ut.p1(i),this.Ut.p1(s),h+=3)),0!==n&&(r=await(this.db?.xo(`l${i}_${s}`)),r&&I.Z.No(r)!==n&&(r=void 0),r?this.bn[t]=r:(this.Ge=0,this.Ut.p1(1),this.Ut.p1(i),this.Ut.p1(s),h+=3))}this.Ut.Pf(h),this.Pi?.bind(),0===this.Ge&&(this.di?.cc(257,166,'Map area updated since last visit, so load will take longer this time only',A.Z.Nl),this.di?.cc(256,165,'Map area updated since last visit, so load will take longer this time only',A.Z.yl)),this.Pi?.draw(8,11);const e=this.Cn-this.On,n=this.En-this.Ln;this.On=this.Cn,this.Ln=this.En;for(let t=0;t<8192;t++){const i=this.dr[t];if(i){for(let t=0;t<10;t++)i.af[t]-=e,i.cf[t]-=n;i.x-=128*e,i.z-=128*n}}for(let t=0;t<this.St;t++){const i=this.hr[t];if(i){for(let t=0;t<10;t++)i.af[t]-=e,i.cf[t]-=n;i.x-=128*e,i.z-=128*n}}let r=0,o=G.Z.Zn,l=1;e<0&&(r=G.Z.Zn-1,o=-1,l=-1);let a=0,c=G.Z.Zn,f=1;n<0&&(a=G.Z.Zn-1,c=-1,f=-1);for(let t=r;t!==o;t+=l)for(let i=a;i!==c;i+=f){const s=t+e,h=i+n;for(let e=0;e<G.Z.Rn;e++)s>=0&&h>=0&&s<G.Z.Zn&&h<G.Z.Zn?this.gr[e][t][i]=this.gr[e][s][h]:this.gr[e][t][i]=null}for(let t=this.Cr.Kw();t;t=this.Cr.qw())t.x-=e,t.z-=n,(t.x<0||t.z<0||t.x>=G.Z.Zn||t.z>=G.Z.Zn)&&t.xy();return 0!==this.Ye&&(this.Ye-=e,this.Ze-=n),this.Ve=!1,this.Vt=-1,!0}if(this.Vt===T.Z.Ny)return c.Z.To[this.in.Cy].model=this.Lr?.Py()||null,this.Vt=-1,!0;if(this.Vt===T.Z.Dy)return this.dh=this.in.vy,1===this.dh&&(this.wh=this.in.Cy),this.dh>=2&&this.dh<=6&&(2===this.dh&&(this.yh=64,this.ph=64),3===this.dh&&(this.yh=0,this.ph=64),4===this.dh&&(this.yh=128,this.ph=64),5===this.dh&&(this.yh=64,this.ph=0),6===this.dh&&(this.yh=64,this.ph=128),this.dh=2,this.Ah=this.in.Cy,this.Ih=this.in.Cy,this.gh=this.in.vy),10===this.dh&&(this.mh=this.in.Cy),this.Vt=-1,!0;if(this.Vt===T.Z.Fy){const t=this.in.Uy,i=this.in.Go,s=this.in.Go;return t!==this.po&&this.yo&&!$.K.ht&&await this.Bo(t,i,s),this.po=t,this.mo=i,this.Ao=s,this.wo=0,this.Vt=-1,!0}if(this.Vt===T.Z.By)return await this.Iy(),this.Vt=-1,!1;if(this.Vt===T.Z.Gy){const t=this.in.vy,i=this.in.vy;let s=-1;if(this.vn)for(let h=0;h<this.vn.length;h++)this.vn[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.bn;if(h){const e=h[s];-1!==s&&e&&(this.db?.Uo(`l${t}_${i}`,e),this.Ge=1)}}return this.Vt=-1,!0}if(this.Vt===T.Z.Hy)return this.Ye=0,this.Vt=-1,!0;if(this.Vt===T.Z.Wy)return this.Rr=this.in.Cy,this.Vt=-1,!0;if(this.Vt===T.Z.Yy||this.Vt===T.Z.Zy||this.Vt===T.Z.Vy||this.Vt===T.Z.Xy||this.Vt===T.Z.zy||this.Vt===T.Z.jy||this.Vt===T.Z.Ky||this.Vt===T.Z.qy||this.Vt===T.Z.$y||this.Vt===T.Z.Jy)return this.Qy(this.in,this.Vt),this.Vt=-1,!0;if(this.Vt===T.Z.tp){const t=this.in.Cy,i=this.in.Cy;return-1!==this.rh&&(this.rh=-1,this.Hs=!0),this.Gh&&(this.Gh=!1,this.Hs=!0),this.Zs=t,this.nh=i,this.Gs=!0,this.Ws=!0,this.we=!1,this.Vt=-1,!0}if(this.Vt===T.Z.ip){const t=this.in.Cy,i=this.in.Go;return this.pe[t]=i,this.ye[t]!==i&&(this.ye[t]=i,await this.rw(t),this.Gs=!0,-1!==this.Hh&&(this.Hs=!0)),this.Vt=-1,!0}if(this.Vt===T.Z.sp){const t=this.in.Cy;return c.Z.To[t].el=this.in.Cy,this.Vt=-1,!0}if(this.Vt===T.Z.hp){let t=this.in.Cy;const i=this.in.vy;return 65535===t&&(t=-1),this.Sh[i]=t,this.Gs=!0,this.Ws=!0,this.Vt=-1,!0}if(this.Vt===T.Z.ep){const t=this.in.vy,i=this.in.vy,s=this.in.Cy,h=this.in.Cy;let e=-1;if(this.vn)for(let s=0;s<this.vn.length;s++)this.vn[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.bn){this.bn[e]&&this.bn[e]?.length===h||(this.bn[e]=new Int8Array(h));const t=this.bn[e];t&&this.in.np(this.packetSize-6,s,t)}return this.Vt=-1,!0}if(this.Vt===T.Z.rp){const t=M.Z.stop();return t&&(this.Ut.Yc(b.Z.Zc),this.Ut.p2(t.Mc),this.Ut.Dc(t.data,t.Mc,0),t.release()),this.Vt=-1,!0}if(this.Vt===T.Z.op){this.Gs=!0;const t=this.in.Cy,i=c.Z.To[t],s=this.in.vy;if(i.El&&i.Tl){for(let t=0;t<s;t++){i.El[t]=this.in.Cy;let s=this.in.vy;255===s&&(s=this.in.Go),i.Tl[t]=s}for(let t=s;t<i.El.length;t++)i.El[t]=0,i.Tl[t]=0}else for(let t=0;t<s;t++)this.in.Cy,255===this.in.vy&&this.in.Go;return this.Vt=-1,!0}if(this.Vt===T.Z.lp)return M.Z.ap(),this.Vt=-1,!0;if(this.Vt===T.Z.cp)return this.Ph=!1,this.Gh=!0,this.Bh='',this.Hs=!0,this.Vt=-1,!0;if(this.Vt===T.Z.fp){const t=c.Z.To[this.in.Cy];if(t.El)for(let i=0;i<t.El.length;i++)t.El[i]=-1,t.El[i]=0;return this.Vt=-1,!0}if(this.Vt===T.Z.up){if(this.Me=this.in.Go,this.xe=this.in.Cy,this.Ne=this.in.vy,this.Pe=this.in.Cy,0!==this.Me&&-1===this.Zs){this.ow();let t=650;201!==this.Ne&&(t=655),this.Se='',this.ke=!1;for(let i=0;i<c.Z.To.length;i++)if(c.Z.To[i]&&c.Z.To[i].pl===t){this.Zs=c.Z.To[i].ed;break}}return this.Vt=-1,!0}if(this.Vt===T.Z.dp)return this.Oh=this.in.vy,this.Oh===this.Lh&&(3===this.Oh?this.Lh=1:this.Lh=3,this.Gs=!0),this.Vt=-1,!0;if(this.Vt===T.Z.wp){if(this.yo&&!$.K.ht){const t=this.in.Cy,i=this.in.Go,s=this.packetSize-6,h=S.Z.read(i,Int8Array.from(this.in.data),s,this.in.Mc);(0,j.Ho)(h,this.Io),this.wo=t}return this.Vt=-1,!0}if(this.Vt===T.Z.yp)return this.kr=this.in.vy,this.Vt=-1,!0;if(this.Vt===T.Z.pp){const t=this.in.Cy,i=this.in.vy,s=this.in.Cy;return this.no&&!$.K.ht&&this.eo<50&&(this.ro[this.eo]=t,this.oo[this.eo]=i,this.lo[this.eo]=s+L.Z.mp[t],this.eo++),this.Vt=-1,!0}if(this.Vt===T.Z.Ap){const t=this.in.Cy,i=this.in.Cy,s=r.Z.get(i);return c.Z.To[t].model=s.Py(),this.Vt=-1,!0}if(this.Vt===T.Z.Ip)return this.An=this.in.vy,this.In=this.in.vy,this.Vt=-1,!0;if(this.Vt===T.Z.gp){const t=this.in.Cy,i=this.in.Cy,s=this.in.Cy,h=c.Z.To[t].model;return h?.Ca(i,s),this.Vt=-1,!0}if(this.Vt===T.Z._p)return this.kh=this.in.vy,this.Rh=this.in.vy,this.Mh=this.in.vy,this.Ys=!0,this.Hs=!0,this.Vt=-1,!0;if(this.Vt===T.Z.Cp){const t=this.in.Cy;return this.Ep(t),-1!==this.rh&&(this.rh=-1,this.Hs=!0),this.Gh&&(this.Gh=!1,this.Hs=!0),this.nh=t,this.Gs=!0,this.Ws=!0,this.Zs=-1,this.we=!1,this.Vt=-1,!0}if(this.Vt===T.Z.Tp){const t=this.in.Cy;return this.Ep(t),-1!==this.nh&&(this.nh=-1,this.Gs=!0,this.Ws=!0),this.rh=t,this.Hs=!0,this.Zs=-1,this.we=!1,this.Vt=-1,!0}if(this.Vt===T.Z.bp){const t=this.in.Cy,i=this.in.vp,s=this.in.vp,h=c.Z.To[t];return h.x=i,h.y=s,this.Vt=-1,!0}if(this.Vt===T.Z.Op)return this.Ve=!0,this.Jn=this.in.vy,this.Qn=this.in.vy,this.tr=this.in.Cy,this.ir=this.in.vy,this.sr=this.in.vy,this.sr>=100&&(this.nn=128*this.Jn+64,this.ln=128*this.Qn+64,this.rn=this.xf(this.Mn,this.Jn,this.Qn)-this.tr),this.Vt=-1,!0;if(this.Vt===T.Z.Lp){this.An=this.in.vy,this.In=this.in.vy;for(let t=this.An;t<this.An+8;t++)for(let i=this.In;i<this.In+8;i++)this.gr[this.Mn][t][i]&&(this.gr[this.Mn][t][i]=null,this.zw(t,i));for(let t=this.Cr.Kw();t;t=this.Cr.qw())t.x>=this.An&&t.x<this.An+8&&t.z>=this.In&&t.z<this.In+8&&t.Sp===this.Mn&&(this.iy(t.Sp,t.x,t.z,t.kp,t.Rp,t.Mp,t.ed),t.xy());return this.Vt=-1,!0}if(this.Vt===T.Z.xp){const t=this.in.vy,i=this.in.vy,s=this.in.Cy,h=this.in.Cy;let e=-1;if(this.vn)for(let s=0;s<this.vn.length;s++)this.vn[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.Tn){this.Tn[e]&&this.Tn[e]?.length===h||(this.Tn[e]=new Int8Array(h));const t=this.Tn[e];t&&this.in.np(this.packetSize-6,s,t)}return this.Vt=-1,!0}if(this.Vt===T.Z.Pw){const t=this.in.xc,i=this.in.Go,s=this.in.vy;let h=!1;for(let t=0;t<100;t++)if(this.Zh[t]===i){h=!0;break}if(s<=1)for(let i=0;i<this.fh;i++)if(this.uh[i]===t){h=!0;break}if(!h&&0===this.qs)try{this.Zh[this.Vh]=i,this.Vh=(this.Vh+1)%100;const h=O.Z.Qa(this.in,this.packetSize-13),e=v.Z.filter(h);s>1?this.od(7,e,R.Z.ma(R.Z.Aa(t))):this.od(3,e,R.Z.ma(R.Z.Aa(t)))}catch(t){}return this.Vt=-1,!0}if(this.Vt===T.Z.Np){for(let t=0;t<this.ye.length;t++)this.ye[t]!==this.pe[t]&&(this.ye[t]=this.pe[t],await this.rw(t),this.Gs=!0);return this.Vt=-1,!0}if(this.Vt===T.Z.Pp){const t=this.in.Cy,i=this.in.Cy;return c.Z.To[t].model=m.Z.model(i),this.Vt=-1,!0}if(this.Vt===T.Z.Dp)return this.Hh=this.in.vp,this.Hs=!0,this.Vt=-1,!0;if(this.Vt===T.Z.Fp)return 12===this.Lh&&(this.Gs=!0),this.Sr=this.in.vy,this.Vt=-1,!0;if(this.Vt===T.Z.Up){if(this.Ve=!0,this.zn=this.in.vy,this.jn=this.in.vy,this.Kn=this.in.Cy,this.qn=this.in.vy,this.$n=this.in.vy,this.$n>=100){const t=128*this.zn+64,i=128*this.jn+64,s=this.xf(this.Mn,this.zn,this.jn)-this.Kn,h=t-this.nn,e=s-this.rn,n=i-this.ln,r=0|Math.sqrt(h*h+n*n);this.an=2047&(325.949*Math.atan2(e,r)|0),this.cn=2047&(-325.949*Math.atan2(h,n)|0),this.an<128&&(this.an=128),this.an>383&&(this.an=383)}return this.Vt=-1,!0}if(this.Vt===T.Z.Bp)return this.Lh=this.in.vy,this.Gs=!0,this.Ws=!0,this.Vt=-1,!0;if(this.Vt===T.Z.Gp){const t=this.in.Uy;let i;if(t.endsWith(':tradereq:')){const s=t.substring(0,t.indexOf(':'));i=R.Z.Ru(s);let h=!1;for(let t=0;t<this.fh;t++)if(this.uh[t]===i){h=!0;break}h||0!==this.qs||this.od(4,'wishes to trade with you.',s)}else if(t.endsWith(':duelreq:')){const s=t.substring(0,t.indexOf(':'));i=R.Z.Ru(s);let h=!1;for(let t=0;t<this.fh;t++)if(this.uh[t]===i){h=!0;break}h||0!==this.qs||this.od(8,'wishes to duel with you.',s)}else this.od(0,t,'');return this.Vt=-1,!0}if(this.Vt===T.Z.Hp){const t=this.in.Cy,i=this.in.Cy,s=this.in.Cy,h=n.Z.get(i);return c.Z.To[t].model=h.Qw(50),c.Z.To[t].sa=h.Wp,c.Z.To[t].ra=h.Yp,c.Z.To[t].zoom=100*h.Zp/s|0,this.Vt=-1,!0}if(this.Vt===T.Z.Vp){const t=this.in.Cy;return this.Ep(t),-1!==this.nh&&(this.nh=-1,this.Gs=!0,this.Ws=!0),-1!==this.rh&&(this.rh=-1,this.Hs=!0),this.Gh&&(this.Gh=!1,this.Hs=!0),this.Zs=t,this.we=!1,this.Vt=-1,!0}if(this.Vt===T.Z.Xp){const t=this.in.Cy,i=this.in.Cy,s=i>>10&31,h=i>>5&31,e=31&i;return c.Z.To[t].Ul=(s<<19)+(h<<11)+(e<<3),this.Vt=-1,!0}if(this.Vt===T.Z.zp){for(let t=0;t<this.hr.length;t++){const i=this.hr[t];i&&(i.jp=-1)}for(let t=0;t<this.dr.length;t++){const i=this.dr[t];i&&(i.jp=-1)}return this.Vt=-1,!0}if(this.Vt===T.Z.Kp){const t=this.in.Cy;return c.Z.To[t].hide=1===this.in.vy,this.Vt=-1,!0}if(this.Vt===T.Z.qp){this.fh=this.packetSize/8|0;for(let t=0;t<this.fh;t++)this.uh[t]=this.in.xc;return this.Vt=-1,!0}if(this.Vt===T.Z.$p){this.Ve=!1;for(let t=0;t<5;t++)this.tn[t]=!1;return this.Vt=-1,!0}if(this.Vt===T.Z.Jp)return-1!==this.nh&&(this.nh=-1,this.Gs=!0,this.Ws=!0),-1!==this.rh&&(this.rh=-1,this.Hs=!0),this.Gh&&(this.Gh=!1,this.Hs=!0),this.Zs=-1,this.we=!1,this.Vt=-1,!0;if(this.Vt===T.Z.Qp){const t=this.in.Cy;return c.Z.To[t].text=this.in.Uy,c.Z.To[t].ed===this.Sh[this.Lh]&&(this.Gs=!0),this.Vt=-1,!0}if(this.Vt===T.Z.tm){this.Gs=!0;const t=this.in.vy,i=this.in.Go,s=this.in.vy;this._h[t]=i,this.Ch[t]=s,this.Eh[t]=1;for(let s=0;s<98;s++)i>=this.Th[s]&&(this.Eh[t]=s+2);return this.Vt=-1,!0}if(this.Vt===T.Z.im){for(this.An=this.in.vy,this.In=this.in.vy;this.in.Mc<this.packetSize;){const t=this.in.vy;this.Qy(this.in,t)}return this.Vt=-1,!0}if(this.Vt===T.Z.sm)return 12===this.Lh&&(this.Gs=!0),this.Mr=this.in.vp,this.Vt=-1,!0;if(this.Vt===T.Z.hm){const t=this.in.vy,i=this.in.vy,s=this.in.vy,h=this.in.vy;return this.tn[t]=!0,this.sn[t]=i,this.hn[t]=s,this.en[t]=h,this.Qe[t]=0,this.Vt=-1,!0}if(this.Vt===T.Z.nm){this.Gs=!0;const t=this.in.Cy,i=c.Z.To[t];for(;this.in.Mc<this.packetSize;){const t=this.in.vy,s=this.in.Cy;let h=this.in.vy;255===h&&(h=this.in.Go),i.El&&i.Tl&&t>=0&&t<i.El.length&&(i.El[t]=s,i.Tl[t]=h)}return this.Vt=-1,!0}if(this.Vt===T.Z.rm)return this.om(this.in,this.packetSize),1===this.Ge&&(this.Ge=2,N.Z.lm=this.Mn,this.am()),$.K.ht&&2===this.Ge&&N.Z.lm!==this.Mn&&(this.Pi?.bind(),this.di?.cc(257,151,'Loading - please wait.',A.Z.Nl),this.di?.cc(256,150,'Loading - please wait.',A.Z.yl),this.Pi?.draw(8,11),N.Z.lm=this.Mn,this.am()),this.Mn!==this.mn&&2===this.Ge&&(this.mn=this.Mn,this.Nu(this.Mn)),this.Vt=-1,!0;await this.Iy()}catch(t){console.log(t),await this.Vc()}return!0};am=()=>{try{this.mn=-1,this.Ir.clear(),this.Ar.clear(),this.mr.clear(),this.pr.clear(),d.Z.fm(),this.zf(),this.Be?.reset();for(let t=0;t<G.Z.Rn;t++)this.kn[t]?.reset();const t=new N.Z(G.Z.Zn,G.Z.Zn,this.Gn,this.Hn);N.Z.ht=$.K.ht;const i=this.Tn?.length??0;if(this.vn)for(let t=0;t<i;t++){const i=this.vn[t]>>8,s=255&this.vn[t];if(33===i&&s>=71&&s<=73){N.Z.ht=!1;break}}if($.K.ht?this.Be?.um(this.Mn):this.Be?.um(0),this.vn&&this.Tn){this.Ut.Yc(b.Z.gf);for(let s=0;s<i;s++){const i=64*(this.vn[s]>>8)-this.Cn,h=64*(255&this.vn[s])-this.En,e=this.Tn[s];if(e){const s=new I.Z(new Uint8Array(e)).Go,n=S.Z.read(s,e,e.length-4,4);t.dm(8*(this.gn-6),8*(this._n-6),i,h,n)}else this._n<800&&t.wm(h,i,64,64)}}if(this.vn&&this.bn){this.Ut.Yc(b.Z.gf);for(let s=0;s<i;s++){const i=this.bn[s];if(i){const h=new I.Z(new Uint8Array(i)).Go,e=S.Z.read(h,i,i.length-4,4),n=64*(this.vn[s]>>8)-this.Cn,r=64*(255&this.vn[s])-this.En;t.ym(this.Be,this.Ar,this.kn,e,n,r)}}}this.Ut.Yc(b.Z.gf),t.pm(this.Be,this.kn),this.Pi?.bind(),this.Ut.Yc(b.Z.gf);for(let t=this.Ar.Kw();t;t=this.Ar.qw())2===(this.Hn&&2&this.Hn[1][t.Am][t.Im])&&(t.gm--,t.gm<0&&t.xy());for(let t=0;t<G.Z.Zn;t++)for(let i=0;i<G.Z.Zn;i++)this.zw(t,i);for(let t=this.Cr.Kw();t;t=this.Cr.qw())this.iy(t.Sp,t.x,t.z,t._m,t.angle,t.shape,t.ed)}catch(t){}e.Z.jf?.clear(),d.Z.Ja(20)};Ep=t=>{const i=c.Z.To[t];if(i.hl)for(let t=0;t<i.hl.length&&-1!==i.hl[t];t++){const s=c.Z.To[i.hl[t]];1===s.type&&this.Ep(s.id),s.ol=0,s.rl=0}};hc=()=>{let t=0;for(let i=0;i<99;i++){const s=i+1;t+=s+300*Math.pow(2,s/7)|0,this.Th[i]=t/4|0}};od=(t,i,s)=>{0===t&&-1!==this.Hh&&(this.bh=i,this.Ec=0),-1===this.rh&&(this.Hs=!0);for(let t=99;t>0;t--)this.messageType[t]=this.messageType[t-1],this.Yh[t]=this.Yh[t-1],this.Wh[t]=this.Wh[t-1];this.messageType[0]=t,this.Yh[0]=s,this.Wh[0]=i};rw=async t=>{const i=a.Z.To[t].Cm;if(0!==i){const s=this.ye[t];if(1===i&&(1===s&&d.Z.$a(.9),2===s&&d.Z.$a(.8),3===s&&d.Z.$a(.7),4===s&&d.Z.$a(.6),n.Z.qf?.clear(),this.qt=!0),3===i){const t=this.yo;0===s&&(this.Io=256,(0,j.Em)(256),this.yo=!0),1===s&&(this.Io=192,(0,j.Em)(192),this.yo=!0),2===s&&(this.Io=128,(0,j.Em)(128),this.yo=!0),3===s&&(this.Io=64,(0,j.Em)(64),this.yo=!0),4===s&&(this.yo=!1),this.yo!==t&&(this.yo&&this.po?await this.Bo(this.po,this.mo,this.Ao):(0,j.Co)(),this.wo=0)}4===i&&(0===s&&(this.ao=256,(0,j.Tm)(256),this.no=!0),1===s&&(this.ao=192,(0,j.Tm)(192),this.no=!0),2===s&&(this.ao=128,(0,j.Tm)(128),this.no=!0),3===s&&(this.ao=64,(0,j.Tm)(64),this.no=!0),4===s&&(this.no=!1)),5===i&&(this._e=s),6===i&&(this.zh=s),8===i&&(this.Xh=s,this.Hs=!0)}};bm=(t,i)=>{let s=0;for(let t=0;t<100;t++){if(!this.Wh[t])continue;const h=this.messageType[t],e=this.ah+70+4-14*s;if(e<-20)break;0===h&&s++,1!==h&&2!==h||!(1===h||0===this.kh||1===this.kh&&this.su(this.Yh[t]))||(i>e-14&&i<=e&&this.Lr&&this.Yh[t]!==this.Lr.name&&(this.Fr&&(this.eh[this.hh]='Report abuse @whi@'+this.Yh[t],this.Ce[this.hh]=34,this.hh++),this.eh[this.hh]='Add ignore @whi@'+this.Yh[t],this.Ce[this.hh]=436,this.hh++,this.eh[this.hh]='Add friend @whi@'+this.Yh[t],this.Ce[this.hh]=406,this.hh++),s++),3!==h&&7!==h||0!==this.Xh||!(7===h||0===this.Rh||1===this.Rh&&this.su(this.Yh[t]))||(i>e-14&&i<=e&&(this.Fr&&(this.eh[this.hh]='Report abuse @whi@'+this.Yh[t],this.Ce[this.hh]=34,this.hh++),this.eh[this.hh]='Add ignore @whi@'+this.Yh[t],this.Ce[this.hh]=436,this.hh++,this.eh[this.hh]='Add friend @whi@'+this.Yh[t],this.Ce[this.hh]=406,this.hh++),s++),4===h&&(0===this.Mh||1===this.Mh&&this.su(this.Yh[t]))&&(i>e-14&&i<=e&&(this.eh[this.hh]='Accept trade @whi@'+this.Yh[t],this.Ce[this.hh]=903,this.hh++),s++),(5===h||6===h)&&0===this.Xh&&this.Rh<2&&s++,8===h&&(0===this.Mh||1===this.Mh&&this.su(this.Yh[t]))&&(i>e-14&&i<=e&&(this.eh[this.hh]='Accept duel @whi@'+this.Yh[t],this.Ce[this.hh]=363,this.hh++),s++)}};vm=t=>{if(0==this.Xh)return;let i=0;0!=this.Yt&&(i=1);for(let s=0;s<100;s++)if(null!=this.Wh[s]){const h=this.messageType[s];if((3==h||7==h)&&(7==h||0==this.Rh||1==this.Rh&&this.su(this.Yh[s]))){const h=329-13*i;if(this.Ll>8&&this.Ll<520&&t-11>h-10&&t-11<=h+3&&(this.Fr&&(this.eh[this.hh]='Report abuse @whi@'+this.Yh[s],this.Ce[this.hh]=2034,this.hh++),this.eh[this.hh]='Add ignore @whi@'+this.Yh[s],this.Ce[this.hh]=2436,this.hh++,this.eh[this.hh]='Add friend @whi@'+this.Yh[s],this.Ce[this.hh]=2406,this.hh++),i++,i>=5)return}if((5==h||6==h)&&this.Rh<2&&(i++,i>=5))return}};Om=(t,i,s,h,e,r)=>{if(0!==t.type||!t.hl||t.hide||i<h||s<e||i>h+t.width||s>e+t.height||!t.ul||!t.dl)return;const o=t.hl.length;for(let l=0;l<o;l++){let o=t.ul[l]+h,a=t.dl[l]+e-r;const f=c.Z.To[t.hl[l]];if(o+=f.x,a+=f.y,(f.Lm>=0||0!==f.Gl)&&i>=o&&s>=a&&i<o+f.width&&s<a+f.height&&(f.Lm>=0?this.Le=f.Lm:this.Le=f.id),0===f.type)this.Om(f,i,s,o,a,f.Il),f.scroll>f.height&&this.Ef(i,s,f.scroll,f.height,!0,o+f.width,a,f);else if(2===f.type){let t=0;for(let h=0;h<f.height;h++)for(let e=0;e<f.width;e++){let r=o+e*(f.bl+32),l=a+h*(f.vl+32);if(t<20&&f._l&&f.Cl&&(r+=f._l[t],l+=f.Cl[t]),i<r||s<l||i>=r+32||s>=l+32){t++;continue}if(this.Oe=t,this.ve=f.id,!f.El||f.El[t]<=0){t++;continue}const c=n.Z.get(f.El[t]-1);if(1===this.ne&&f.Sm)f.id===this.oe&&t===this.re||(this.eh[this.hh]='Use '+this.ae+' with @lre@'+c.name,this.Ce[this.hh]=881,this.Ee[this.hh]=c.index,this.Te[this.hh]=t,this.be[this.hh]=f.id,this.hh++);else if(1===this.me&&f.Sm)16==(16&this.Ie)&&(this.eh[this.hh]=this.ge+' @lre@'+c.name,this.Ce[this.hh]=391,this.Ee[this.hh]=c.index,this.Te[this.hh]=t,this.be[this.hh]=f.id,this.hh++);else{if(f.Sm)for(let i=4;i>=3;i--)c.km&&c.km[i]?(this.eh[this.hh]=c.km[i]+' @lre@'+c.name,3===i?this.Ce[this.hh]=478:4===i&&(this.Ce[this.hh]=347),this.Ee[this.hh]=c.index,this.Te[this.hh]=t,this.be[this.hh]=f.id,this.hh++):4===i&&(this.eh[this.hh]='Drop @lre@'+c.name,this.Ce[this.hh]=347,this.Ee[this.hh]=c.index,this.Te[this.hh]=t,this.be[this.hh]=f.id,this.hh++);if(f.Rm&&(this.eh[this.hh]='Use @lre@'+c.name,this.Ce[this.hh]=188,this.Ee[this.hh]=c.index,this.Te[this.hh]=t,this.be[this.hh]=f.id,this.hh++),f.Sm&&c.km)for(let i=2;i>=0;i--)c.km[i]&&(this.eh[this.hh]=c.km[i]+' @lre@'+c.name,0===i?this.Ce[this.hh]=405:1===i?this.Ce[this.hh]=38:2===i&&(this.Ce[this.hh]=422),this.Ee[this.hh]=c.index,this.Te[this.hh]=t,this.be[this.hh]=f.id,this.hh++);if(f.km)for(let i=4;i>=0;i--)f.km[i]&&(this.eh[this.hh]=f.km[i]+' @lre@'+c.name,0===i?this.Ce[this.hh]=602:1===i?this.Ce[this.hh]=596:2===i?this.Ce[this.hh]=22:3===i?this.Ce[this.hh]=892:4===i&&(this.Ce[this.hh]=415),this.Ee[this.hh]=c.index,this.Te[this.hh]=t,this.be[this.hh]=f.id,this.hh++);this.eh[this.hh]='Examine @lre@'+c.name,this.Ce[this.hh]=1773,this.Ee[this.hh]=c.index,f.Tl&&(this.be[this.hh]=f.Tl[t]),this.hh++}t++}}else if(i>=o&&s>=a&&i<o+f.width&&s<a+f.height)if(f.Yl===c.Z.Mm){let t=!1;0!==f.pl&&(t=this.xm(f)),!t&&f.Nm&&(this.eh[this.hh]=f.Nm,this.Ce[this.hh]=951,this.be[this.hh]=f.id,this.hh++)}else if(f.Yl===c.Z.Pm&&0===this.me){let t=f.Zd;t&&-1!==t.indexOf(' ')&&(t=t.substring(0,t.indexOf(' '))),this.eh[this.hh]=t+' @gre@'+f.action,this.Ce[this.hh]=930,this.be[this.hh]=f.id,this.hh++}else f.Yl===c.Z.Dm?(this.eh[this.hh]='Close',this.Ce[this.hh]=947,this.be[this.hh]=f.id,this.hh++):f.Yl===c.Z.Fm&&f.Nm?(this.eh[this.hh]=f.Nm,this.Ce[this.hh]=465,this.be[this.hh]=f.id,this.hh++):f.Yl===c.Z.Um&&f.Nm?(this.eh[this.hh]=f.Nm,this.Ce[this.hh]=960,this.be[this.hh]=f.id,this.hh++):f.Yl===c.Z.Zl&&!this.we&&f.Nm&&(this.eh[this.hh]=f.Nm,this.Ce[this.hh]=44,this.be[this.hh]=f.id,this.hh++)}};xm=t=>{let i=t.pl;return i>=c.Z.ca&&i<=c.Z.da?(i>=c.Z.ua?i-=c.Z.ua:i--,this.eh[this.hh]='Remove @whi@'+this.Qr[i],this.Ce[this.hh]=557,this.hh++,this.eh[this.hh]='Message @whi@'+this.Qr[i],this.Ce[this.hh]=679,this.hh++,!0):i>=c.Z.ya&&i<=c.Z.pa&&(this.eh[this.hh]='Remove @whi@'+t.text,this.Ce[this.hh]=556,this.hh++,!0)};Bm=()=>{0===this.ne&&0===this.me&&(this.eh[this.hh]='Walk here',this.Ce[this.hh]=660,this.Te[this.hh]=this.Ll,this.be[this.hh]=this.Sl,this.hh++);let t=-1;for(let i=0;i<m.Z.Gf;i++){const s=m.Z.Gm[i],h=127&s,r=s>>7&127,o=s>>29&3,l=s>>14&32767;if(s!==t){if(t=s,2===o&&this.Be&&this.Be.Zu(this.Mn,h,r,s)>=0){const t=e.Z.get(l);if(1===this.ne)this.eh[this.hh]='Use '+this.ae+' with @cya@'+t.name,this.Ce[this.hh]=450,this.Ee[this.hh]=s,this.Te[this.hh]=h,this.be[this.hh]=r,this.hh++;else if(1!==this.me){if(t.Hm)for(let i=4;i>=0;i--)t.Hm[i]&&(this.eh[this.hh]=t.Hm[i]+' @cya@'+t.name,0===i&&(this.Ce[this.hh]=285),1===i&&(this.Ce[this.hh]=504),2===i&&(this.Ce[this.hh]=364),3===i&&(this.Ce[this.hh]=581),4===i&&(this.Ce[this.hh]=1501),this.Ee[this.hh]=s,this.Te[this.hh]=h,this.be[this.hh]=r,this.hh++);this.eh[this.hh]='Examine @cya@'+t.name,this.Ce[this.hh]=1175,this.Ee[this.hh]=s,this.Te[this.hh]=h,this.be[this.hh]=r,this.hh++}else 4==(4&this.Ie)&&(this.eh[this.hh]=this.ge+' @cya@'+t.name,this.Ce[this.hh]=55,this.Ee[this.hh]=s,this.Te[this.hh]=h,this.be[this.hh]=r,this.hh++)}if(1===o){const t=this.dr[l];if(t&&t.type&&1===t.type.size&&64==(127&t.x)&&64==(127&t.z))for(let i=0;i<this.wr;i++){const s=this.dr[this.yr[i]];s&&s!==t&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.Wm(s.type,this.yr[i],h,r)}t&&t.type&&this.Wm(t.type,l,h,r)}if(0===o){const t=this.hr[l];if(t&&64==(127&t.x)&&64==(127&t.z)){for(let i=0;i<this.wr;i++){const s=this.dr[this.yr[i]];s&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.Wm(s.type,this.yr[i],h,r)}for(let i=0;i<this.er;i++){const s=this.hr[this.nr[i]];s&&s!==t&&s.x===t.x&&s.z===t.z&&this.Ym(s,this.nr[i],h,r)}}t&&this.Ym(t,l,h,r)}if(3===o){const t=this.gr[this.Mn][h][r];if(!t)continue;for(let i=t.Zm();i;i=t.next()){const t=n.Z.get(i.index);if(1===this.ne)this.eh[this.hh]='Use '+this.ae+' with @lre@'+t.name,this.Ce[this.hh]=217,this.Ee[this.hh]=i.index,this.Te[this.hh]=h,this.be[this.hh]=r,this.hh++;else if(1!==this.me){for(let s=4;s>=0;s--)t.Hm&&t.Hm[s]?(this.eh[this.hh]=t.Hm[s]+' @lre@'+t.name,0===s&&(this.Ce[this.hh]=224),1===s&&(this.Ce[this.hh]=993),2===s&&(this.Ce[this.hh]=99),3===s&&(this.Ce[this.hh]=746),4===s&&(this.Ce[this.hh]=877),this.Ee[this.hh]=i.index,this.Te[this.hh]=h,this.be[this.hh]=r,this.hh++):2===s&&(this.eh[this.hh]='Take @lre@'+t.name,this.Ce[this.hh]=99,this.Ee[this.hh]=i.index,this.Te[this.hh]=h,this.be[this.hh]=r,this.hh++);this.eh[this.hh]='Examine @lre@'+t.name,this.Ce[this.hh]=1102,this.Ee[this.hh]=i.index,this.Te[this.hh]=h,this.be[this.hh]=r,this.hh++}else 1==(1&this.Ie)&&(this.eh[this.hh]=this.ge+' @lre@'+t.name,this.Ce[this.hh]=965,this.Ee[this.hh]=i.index,this.Te[this.hh]=h,this.be[this.hh]=r,this.hh++)}}}}};Wm=(t,i,s,h)=>{if(this.hh>=400)return;let e=t.name;if(0!==t.Vm&&this.Lr&&(e=e+this.Xm(this.Lr.Ga,t.Vm)+' (level-'+t.Vm+')'),1===this.ne)this.eh[this.hh]='Use '+this.ae+' with @yel@'+e,this.Ce[this.hh]=900,this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++;else if(1!==this.me){let n;if(t.Hm)for(n=4;n>=0;n--)t.Hm[n]&&'attack'!==t.Hm[n]?.toLowerCase()&&(this.eh[this.hh]=t.Hm[n]+' @yel@'+e,0===n?this.Ce[this.hh]=728:1===n?this.Ce[this.hh]=542:2===n?this.Ce[this.hh]=6:3===n?this.Ce[this.hh]=963:4===n&&(this.Ce[this.hh]=245),this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++);if(t.Hm)for(n=4;n>=0;n--)if(t.Hm[n]&&'attack'===t.Hm[n]?.toLowerCase()){let r=0;this.Lr&&t.Vm>this.Lr.Ga&&(r=2e3),this.eh[this.hh]=t.Hm[n]+' @yel@'+e,0===n?this.Ce[this.hh]=r+728:1===n?this.Ce[this.hh]=r+542:2===n?this.Ce[this.hh]=r+6:3===n?this.Ce[this.hh]=r+963:4===n&&(this.Ce[this.hh]=r+245),this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++}this.eh[this.hh]='Examine @yel@'+e,this.Ce[this.hh]=1607,this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++}else 2==(2&this.Ie)&&(this.eh[this.hh]=this.ge+' @yel@'+e,this.Ce[this.hh]=265,this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++)};Ym=(t,i,s,h)=>{if(t===this.Lr||this.hh>=400)return;let e=null;this.Lr&&(e=t.name+this.Xm(this.Lr.Ga,t.Ga)+' (level-'+t.Ga+')'),1===this.ne?(this.eh[this.hh]='Use '+this.ae+' with @whi@'+e,this.Ce[this.hh]=367,this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++):1!==this.me?(this.eh[this.hh]='Follow @whi@'+e,this.Ce[this.hh]=1544,this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++,0===this.qs&&(this.eh[this.hh]='Trade with @whi@'+e,this.Ce[this.hh]=1373,this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++),this.Pr>0&&(this.eh[this.hh]='Attack @whi@'+e,this.Lr&&this.Lr.Ga>=t.Ga?this.Ce[this.hh]=151:this.Ce[this.hh]=2151,this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++),1===this.Dr&&(this.eh[this.hh]='Fight @whi@'+e,this.Ce[this.hh]=151,this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++),2===this.Dr&&(this.eh[this.hh]='Duel-with @whi@'+e,this.Ce[this.hh]=1101,this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++)):8==(8&this.Ie)&&(this.eh[this.hh]=this.ge+' @whi@'+e,this.Ce[this.hh]=651,this.Ee[this.hh]=i,this.Te[this.hh]=s,this.be[this.hh]=h,this.hh++);for(let t=0;t<this.hh;t++)if(660===this.Ce[t])return void(this.eh[t]='Walk here @whi@'+e)};Xm=(t,i)=>{const s=t-i;return s<-9?'@red@':s<-6?'@or3@':s<-3?'@or2@':s<0?'@or1@':s>9?'@gre@':s>6?'@gr3@':s>3?'@gr2@':s>0?'@gr1@':'@yel@'};Qc=()=>{if(0===this.te){this.eh[0]='Cancel',this.Ce[0]=1252,this.hh=1,this.vm(this.Sl),this.Le=0,this.Ll>8&&this.Sl>11&&this.Ll<520&&this.Sl<345&&(-1===this.Zs?this.Bm():this.Om(c.Z.To[this.Zs],this.Ll,this.Sl,8,11,0)),this.Le!==this.Kh&&(this.Kh=this.Le),this.Le=0,this.Ll>562&&this.Sl>231&&this.Ll<752&&this.Sl<492&&(-1!==this.nh?this.Om(c.Z.To[this.nh],this.Ll,this.Sl,562,231,0):-1!==this.Sh[this.Lh]&&this.Om(c.Z.To[this.Sh[this.Lh]],this.Ll,this.Sl,562,231,0)),this.Le!==this.qh&&(this.Gs=!0,this.qh=this.Le),this.Le=0,this.Ll>22&&this.Sl>375&&this.Ll<431&&this.Sl<471&&(-1===this.rh?this.bm(this.Ll-22,this.Sl-375):this.Om(c.Z.To[this.rh],this.Ll,this.Sl,22,375,0)),-1!==this.rh&&this.Le!==this.$h&&(this.Hs=!0,this.$h=this.Le);let t=!1;for(;!t;){t=!0;for(let i=0;i<this.hh-1;i++)if(this.Ce[i]<1e3&&this.Ce[i+1]>1e3){const s=this.eh[i];this.eh[i]=this.eh[i+1],this.eh[i+1]=s;const h=this.Ce[i];this.Ce[i]=this.Ce[i+1],this.Ce[i+1]=h;const e=this.Te[i];this.Te[i]=this.Te[i+1],this.Te[i+1]=e;const n=this.be[i];this.be[i]=this.be[i+1],this.be[i+1]=n;const r=this.Ee[i];this.Ee[i]=this.Ee[i+1],this.Ee[i+1]=r,t=!1}}}};sf=()=>{let t=0;if(this.wi){let i;t=this.wi.hu('Choose Option');for(let s=0;s<this.hh;s++)i=this.wi.hu(this.eh[s]),i>t&&(t=i)}t+=8;const i=15*this.hh+21;let s,h;this.Tc>8&&this.bc>11&&this.Tc<520&&this.bc<345&&(s=this.Tc-(t/2|0)-8,s+t>512?s=512-t:s<0&&(s=0),h=this.bc-11,h+i>334?h=334-i:h<0&&(h=0),this.$s=!0,this.Js=0,this.Qs=s,this.th=h,this.ih=t,this.sh=15*this.hh+22),this.Tc>562&&this.bc>231&&this.Tc<752&&this.bc<492&&(s=this.Tc-(t/2|0)-562,s<0?s=0:s+t>190&&(s=190-t),h=this.bc-231,h<0?h=0:h+i>261&&(h=261-i),this.$s=!0,this.Js=1,this.Qs=s,this.th=h,this.ih=t,this.sh=15*this.hh+22),this.Tc>22&&this.bc>375&&this.Tc<501&&this.bc<471&&(s=this.Tc-(t/2|0)-22,s<0?s=0:s+t>479&&(s=479-t),h=this.bc-375,h<0?h=0:h+i>96&&(h=96-i),this.$s=!0,this.Js=2,this.Qs=s,this.th=h,this.ih=t,this.sh=15*this.hh+22)};lf=(t,i,s,h,e,n,r,o,l,a,c)=>{const f=this.kn[this.Mn];if(!f)return!1;const u=G.Z.Zn,d=G.Z.Zn;for(let t=0;t<u;t++)for(let i=0;i<d;i++){const s=G.Z.index(t,i);this.br[s]=0,this.vr[s]=99999999}let w=t,y=i;const p=G.Z.index(t,i);this.br[p]=99,this.vr[p]=0;let m=0,A=0;this.Er[m]=t,this.Tr[m++]=i;let I=!1,g=this.Er.length;const _=f.flags;for(;A!==m;){if(w=this.Er[A],y=this.Tr[A],A=(A+1)%g,w===s&&y===h){I=!0;break}if(l!==D.Z.Xu.id){if((l<D.Z.zm.id||l===D.Z.kw.id)&&f.jm(w,y,s,h,l-1,o)){I=!0;break}if(l<D.Z.kw.id&&f.Km(w,y,s,h,l-1,o)){I=!0;break}}if(0!==n&&0!==r&&f.qm(w,y,s,h,n,r,a)){I=!0;break}const t=this.vr[G.Z.index(w,y)]+1;let i=G.Z.index(w-1,y);w>0&&0===this.br[i]&&(_[i]&H.Z.Bu)===H.Z.OPEN&&(this.Er[m]=w-1,this.Tr[m]=y,m=(m+1)%g,this.br[i]=2,this.vr[i]=t),i=G.Z.index(w+1,y),w<u-1&&0===this.br[i]&&(_[i]&H.Z.Gu)===H.Z.OPEN&&(this.Er[m]=w+1,this.Tr[m]=y,m=(m+1)%g,this.br[i]=8,this.vr[i]=t),i=G.Z.index(w,y-1),y>0&&0===this.br[i]&&(_[i]&H.Z.Hu)===H.Z.OPEN&&(this.Er[m]=w,this.Tr[m]=y-1,m=(m+1)%g,this.br[i]=1,this.vr[i]=t),i=G.Z.index(w,y+1),y<d-1&&0===this.br[i]&&(_[i]&H.Z.Wu)===H.Z.OPEN&&(this.Er[m]=w,this.Tr[m]=y+1,m=(m+1)%g,this.br[i]=4,this.vr[i]=t),i=G.Z.index(w-1,y-1),w>0&&y>0&&0===this.br[i]&&0==(_[i]&H.Z.$m)&&(_[G.Z.index(w-1,y)]&H.Z.Bu)===H.Z.OPEN&&(_[G.Z.index(w,y-1)]&H.Z.Hu)===H.Z.OPEN&&(this.Er[m]=w-1,this.Tr[m]=y-1,m=(m+1)%g,this.br[i]=3,this.vr[i]=t),i=G.Z.index(w+1,y-1),w<u-1&&y>0&&0===this.br[i]&&0==(_[i]&H.Z.Jm)&&(_[G.Z.index(w+1,y)]&H.Z.Gu)===H.Z.OPEN&&(_[G.Z.index(w,y-1)]&H.Z.Hu)===H.Z.OPEN&&(this.Er[m]=w+1,this.Tr[m]=y-1,m=(m+1)%g,this.br[i]=9,this.vr[i]=t),i=G.Z.index(w-1,y+1),w>0&&y<d-1&&0===this.br[i]&&0==(_[i]&H.Z.Qm)&&(_[G.Z.index(w-1,y)]&H.Z.Bu)===H.Z.OPEN&&(_[G.Z.index(w,y+1)]&H.Z.Wu)===H.Z.OPEN&&(this.Er[m]=w-1,this.Tr[m]=y+1,m=(m+1)%g,this.br[i]=6,this.vr[i]=t),i=G.Z.index(w+1,y+1),w<u-1&&y<d-1&&0===this.br[i]&&0==(_[i]&H.Z.tA)&&(_[G.Z.index(w+1,y)]&H.Z.Gu)===H.Z.OPEN&&(_[G.Z.index(w,y+1)]&H.Z.Wu)===H.Z.OPEN&&(this.Er[m]=w+1,this.Tr[m]=y+1,m=(m+1)%g,this.br[i]=12,this.vr[i]=t)}if(this.Or=0,!I){if(c){let t=100;for(let i=1;i<2;i++){for(let e=s-i;e<=s+i;e++)for(let s=h-i;s<=h+i;s++){const i=G.Z.index(e,s);e>=0&&s>=0&&e<G.Z.Zn&&s<G.Z.Zn&&this.vr[i]<t&&(t=this.vr[i],w=e,y=s,this.Or=1,I=!0)}if(I)break}}if(!I)return!1}A=0,this.Er[A]=w,this.Tr[A++]=y;let C=this.br[G.Z.index(w,y)],E=C;for(;w!==t||y!==i;)E!==C&&(C=E,this.Er[A]=w,this.Tr[A++]=y),0!=(2&E)?w++:0!=(8&E)&&w--,0!=(1&E)?y++:0!=(4&E)&&y--,E=this.br[G.Z.index(w,y)];if(A>0){g=Math.min(A,25),A--;const t=this.Er[A],i=this.Tr[A];0===e?(this.Ut.Yc(b.Z.iA),this.Ut.p1(g+g+3)):1===e?(this.Ut.Yc(b.Z.sA),this.Ut.p1(g+g+3+14)):2===e&&(this.Ut.Yc(b.Z.hA),this.Ut.p1(g+g+3)),1===this.qc[5]?this.Ut.p1(1):this.Ut.p1(0),this.Ut.p2(t+this.Cn),this.Ut.p2(i+this.En),this.Ye=this.Er[0],this.Ze=this.Tr[0];for(let s=1;s<g;s++)A--,this.Ut.p1(this.Er[A]-t),this.Ut.p1(this.Tr[A]-i);return!0}return 1!==e};om=(t,i)=>{this.lr=0,this.rr=0,this.eA(t),this.nA(t),this.rA(t,i),this.oA(t);for(let t=0;t<this.lr;t++){const i=this.cr[t],s=this.hr[i];s&&(s.Uf!==this.Pt&&(this.hr[i]=null))}if(t.Mc!==i)throw new Error(`eek! Error packet size mismatch in getplayer pos:${t.Mc} psize:${i}`);for(let t=0;t<this.er;t++)if(!this.hr[this.nr[t]])throw new Error(`eek! ${this.username} null entry in pl list - pos:${t} size:${this.er}`)};eA=t=>{t.lA();if(0!==t.aA(1)){const i=t.aA(2);if(0===i)this.ar[this.rr++]=this.kt;else if(1===i){const i=t.aA(3);this.Lr?.step(!1,i);1===t.aA(1)&&(this.ar[this.rr++]=this.kt)}else if(2===i){const i=t.aA(3);this.Lr?.step(!0,i);const s=t.aA(3);this.Lr?.step(!0,s);1===t.aA(1)&&(this.ar[this.rr++]=this.kt)}else if(3===i){this.Mn=t.aA(2);const i=t.aA(7),s=t.aA(7),h=t.aA(1);this.Lr?.move(1===h,i,s);1===t.aA(1)&&(this.ar[this.rr++]=this.kt)}}};nA=t=>{const i=t.aA(8);if(i<this.er)for(let t=i;t<this.er;t++)this.cr[this.lr++]=this.nr[t];if(i>this.er)throw new Error(`eek! ${this.username} Too many players`);this.er=0;for(let s=0;s<i;s++){const i=this.nr[s],h=this.hr[i];if(0===t.aA(1))this.nr[this.er++]=i,h&&(h.Uf=this.Pt);else{const s=t.aA(2);if(0===s)this.nr[this.er++]=i,h&&(h.Uf=this.Pt),this.ar[this.rr++]=i;else if(1===s){this.nr[this.er++]=i,h&&(h.Uf=this.Pt);const s=t.aA(3);h?.step(!1,s);1===t.aA(1)&&(this.ar[this.rr++]=i)}else if(2===s){this.nr[this.er++]=i,h&&(h.Uf=this.Pt);const s=t.aA(3);h?.step(!0,s);const e=t.aA(3);h?.step(!0,e);1===t.aA(1)&&(this.ar[this.rr++]=i)}else 3===s&&(this.cr[this.lr++]=i)}}};rA=(t,i)=>{let s;for(;t.cA+10<8*i&&(s=t.aA(11),2047!==s);){if(!this.hr[s]){this.hr[s]=new W.Z;const t=this.ur[s];t&&this.hr[s]?.read(t)}this.nr[this.er++]=s;const i=this.hr[s];i&&(i.Uf=this.Pt);let h=t.aA(5);h>15&&(h-=32);let e=t.aA(5);e>15&&(e-=32);const n=t.aA(1);this.Lr&&i?.move(1===n,this.Lr.af[0]+h,this.Lr.cf[0]+e);1===t.aA(1)&&(this.ar[this.rr++]=s)}t.fA()};oA=t=>{for(let i=0;i<this.rr;i++){const s=this.ar[i],h=this.hr[s];if(!h)continue;let e=t.vy;128==(128&e)&&(e+=t.vy<<8),this.uA(h,s,e,t)}};uA=(t,i,s,e)=>{if(t.dA=s,t.wA=this.Pt,1==(1&s)){const s=e.vy,h=new Uint8Array(s),n=new I.Z(h);e.np(s,0,h),this.ur[i]=n,t.read(n)}if(2==(2&s)){let i=e.Cy;65535===i&&(i=-1),i===t.jp&&(t.yA=0);const s=e.vy;(-1===i||-1===t.jp||h.Z.To[i].priority>h.Z.To[t.jp].priority||0===h.Z.To[t.jp].priority)&&(t.jp=i,t.pA=0,t.mA=0,t.AA=s,t.yA=0)}if(4==(4&s)&&(t.IA=e.Cy,65535===t.IA&&(t.IA=-1)),8==(8&s)&&(t.iu=e.Uy,t.eu=0,t.nu=0,t.ru=150,t.name&&this.od(2,t.iu,t.name)),16==(16&s)&&(t.fu=e.vy,t.cu=e.vy,t.ou=this.Pt+400,t.lu=e.vy,t.au=e.vy),32==(32&s)&&(t.gA=e.Cy,t._A=e.Cy,t.CA=t.gA,t.EA=t._A),64==(64&s)){const i=e.Cy,s=e.vy,h=e.vy,n=e.Mc;if(t.name){const n=R.Z.Ru(t.name);let r=!1;if(s<=1)for(let t=0;t<this.fh;t++)if(this.uh[t]===n){r=!0;break}if(!r&&0===this.qs)try{const n=O.Z.Qa(e,h),r=v.Z.filter(n);t.iu=r,t.eu=i>>8,t.nu=255&i,t.ru=150,s>1?this.od(1,r,t.name):this.od(2,r,t.name)}catch(t){}}e.Mc=n+h}if(256==(256&s)){t.TA=e.Cy;const i=e.Go;t.bA=i>>16,t.vA=this.Pt+(65535&i),t.OA=0,t.LA=0,t.vA>this.Pt&&(t.OA=-1),65535===t.TA&&(t.TA=-1)}512==(512&s)&&(t.SA=e.vy,t.kA=e.vy,t.RA=e.vy,t.MA=e.vy,t.xA=e.Cy+this.Pt,t.NA=e.Cy+this.Pt,t.PA=e.vy,t.pathLength=0,t.af[0]=t.RA,t.cf[0]=t.MA)};ky=(t,i)=>{this.lr=0,this.rr=0,this.DA(t),this.FA(t,i),this.UA(t);for(let t=0;t<this.lr;t++){const i=this.cr[t],s=this.dr[i];s&&(s.Uf!==this.Pt&&(s.type=null,this.dr[i]=null))}if(t.Mc!==i)throw new Error(`eek! ${this.username} size mismatch in getnpcpos - pos:${t.Mc} psize:${i}`);for(let t=0;t<this.wr;t++)if(!this.dr[this.yr[t]])throw new Error(`eek! ${this.username} null entry in npc list - pos:${t} size:${this.wr}`)};DA=t=>{t.lA();const i=t.aA(8);if(i<this.wr)for(let t=i;t<this.wr;t++)this.cr[this.lr++]=this.yr[t];if(i>this.wr)throw new Error(`eek! ${this.username} Too many npc!`);this.wr=0;for(let s=0;s<i;s++){const i=this.yr[s],h=this.dr[i];if(0===t.aA(1))this.yr[this.wr++]=i,h&&(h.Uf=this.Pt);else{const s=t.aA(2);if(0===s)this.yr[this.wr++]=i,h&&(h.Uf=this.Pt),this.ar[this.rr++]=i;else if(1===s){this.yr[this.wr++]=i,h&&(h.Uf=this.Pt);const s=t.aA(3);h?.step(!1,s);1===t.aA(1)&&(this.ar[this.rr++]=i)}else if(2===s){this.yr[this.wr++]=i,h&&(h.Uf=this.Pt);const s=t.aA(3);h?.step(!0,s);const e=t.aA(3);h?.step(!0,e);1===t.aA(1)&&(this.ar[this.rr++]=i)}else 3===s&&(this.cr[this.lr++]=i)}}};FA=(t,i)=>{for(;t.cA+21<8*i;){const i=t.aA(13);if(8191===i)break;this.dr[i]||(this.dr[i]=new Y.Z);const s=this.dr[i];this.yr[this.wr++]=i,s?(s.Uf=this.Pt,s.type=r.Z.get(t.aA(11)),s.size=s.type.size,s.BA=s.type.GA,s.HA=s.type.WA,s.YA=s.type.ZA,s.VA=s.type.XA,s.ba=s.type.zA):t.aA(11);let h=t.aA(5);h>15&&(h-=32);let e=t.aA(5);e>15&&(e-=32),this.Lr&&s?.move(!1,this.Lr.af[0]+h,this.Lr.cf[0]+e);1===t.aA(1)&&(this.ar[this.rr++]=i)}t.fA()};UA=t=>{for(let i=0;i<this.rr;i++){const s=this.ar[i],e=this.dr[s];if(!e)continue;const n=t.vy;if(e.dA=n,e.wA=this.Pt,2==(2&n)){let i=t.Cy;65535===i&&(i=-1),i===e.jp&&(e.yA=0);const s=t.vy;(-1===i||-1===e.jp||h.Z.To[i].priority>h.Z.To[e.jp].priority||0===h.Z.To[e.jp].priority)&&(e.jp=i,e.pA=0,e.mA=0,e.AA=s,e.yA=0)}if(4==(4&n)&&(e.IA=t.Cy,65535===e.IA&&(e.IA=-1)),8==(8&n)&&(e.iu=t.Uy,e.ru=100),16==(16&n)&&(e.fu=t.vy,e.cu=t.vy,e.ou=this.Pt+400,e.lu=t.vy,e.au=t.vy),32==(32&n)&&(e.type=r.Z.get(t.Cy),e.BA=e.type.GA,e.HA=e.type.WA,e.YA=e.type.ZA,e.VA=e.type.XA,e.ba=e.type.zA),64==(64&n)){e.TA=t.Cy;const i=t.Go;e.bA=i>>16,e.vA=this.Pt+(65535&i),e.OA=0,e.LA=0,e.vA>this.Pt&&(e.OA=-1),65535===e.TA&&(e.TA=-1)}128==(128&n)&&(e.gA=t.Cy,e._A=t.Cy,e.CA=e.gA,e.EA=e._A)}};Xc=()=>{for(let t=-1;t<this.er;t++){let i;i=-1===t?this.kt:this.nr[t];const s=this.hr[i];s&&this.jA(s)}if($.K.Tt++,$.K.Tt>1406){$.K.Tt=0,this.Ut.Yc(b.Z.KA),this.Ut.p1(0);const t=this.Ut.Mc;this.Ut.p1(162),this.Ut.p1(22),0==(2*Math.random()|0)&&this.Ut.p1(84),this.Ut.p2(31824),this.Ut.p2(13490),0==(2*Math.random()|0)&&this.Ut.p1(123),0==(2*Math.random()|0)&&this.Ut.p1(134),this.Ut.p1(100),this.Ut.p1(94),this.Ut.p2(35521),this.Ut.Pf(this.Ut.Mc-t)}};jA=t=>{(t.x<128||t.z<128||t.x>=13184||t.z>=13184)&&(t.jp=-1,t.TA=-1,t.xA=0,t.NA=0,t.x=128*t.af[0]+64*t.size,t.z=128*t.cf[0]+64*t.size,t.pathLength=0),t===this.Lr&&(t.x<1536||t.z<1536||t.x>=11776||t.z>=11776)&&(t.jp=-1,t.TA=-1,t.xA=0,t.NA=0,t.x=128*t.af[0]+64*t.size,t.z=128*t.cf[0]+64*t.size,t.pathLength=0),t.xA>this.Pt?this.qA(t):t.NA>=this.Pt?this.$A(t):this.JA(t),this.QA(t),this.tI(t)};Of=()=>{if(this.Lr){this.Lr.x>>7===this.Ye&&this.Lr.z>>7===this.Ze&&(this.Ye=0);for(let t=-1;t<this.er;t++){let i,s;if(-1===t?(i=this.Lr,s=this.kt<<14):(i=this.hr[this.nr[t]],s=this.nr[t]<<14),!i||!i.isVisible())continue;i.ht=($.K.ht&&this.er>50||this.er>200)&&-1!==t&&i.iI===i.ba;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.Z.Zn||e<0||e>=G.Z.Zn))if(!i.sI||this.Pt<i.hI||this.Pt>=i.eI){if(64==(127&i.x)&&64==(127&i.z)){if(this.Wn[h][e]===this.We)continue;this.Wn[h][e]=this.We}i.y=this.xf(this.Mn,i.x,i.z),this.Be?.nI(this.Mn,i.x,i.y,i.z,null,i,s,i.rI,60,i.oI)}else i.ht=!1,i.y=this.xf(this.Mn,i.x,i.z),this.Be?.lI(this.Mn,i.x,i.y,i.z,i.aI,i.cI,i.fI,i.uI,null,i,s,i.rI)}}};zc=()=>{for(let t=0;t<this.wr;t++){const i=this.yr[t],s=this.dr[i];s&&s.type&&this.jA(s)}};Lf=()=>{for(let t=0;t<this.wr;t++){const i=this.dr[this.yr[t]],s=536870912+(this.yr[t]<<14)|0;if(!i||!i.isVisible())continue;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.Z.Zn||e<0||e>=G.Z.Zn)){if(1===i.size&&64==(127&i.x)&&64==(127&i.z)){if(this.Wn[h][e]===this.We)continue;this.Wn[h][e]=this.We}this.Be?.nI(this.Mn,i.x,this.xf(this.Mn,i.x,i.z),i.z,null,i,s,i.rI,64*(i.size-1)+60,i.oI)}}};Sf=()=>{for(let t=this.pr.Kw();t;t=this.pr.qw())if(t.level!==this.Mn||this.Pt>t.dI)t.xy();else if(this.Pt>=t.wI){if(t.target>0){const i=this.dr[t.target-1];i&&t.yI(i.x,this.xf(t.level,i.x,i.z)-t.offsetY,i.z,this.Pt)}if(t.target<0){const i=-t.target-1;let s;s=i===this.Rr?this.Lr:this.hr[i],s&&t.yI(s.x,this.xf(t.level,s.x,s.z)-t.offsetY,s.z,this.Pt)}t.update(this.He),this.Be?.nI(this.Mn,0|t.x,0|t.y,0|t.z,null,t,-1,t.rI,60,!1)}};kf=()=>{for(let t=this.mr.Kw();t;t=this.mr.qw())t.level!==this.Mn||t.pI?t.xy():this.Pt>=t.wI&&(t.update(this.He),t.pI?t.xy():this.Be?.nI(t.level,t.x,t.y,t.z,null,t,-1,0,60,!1))};Rf=()=>{for(let t=this.Ar.Kw();t;t=this.Ar.qw()){let i=!1;if(t.rl+=this.He,-1===t.ol&&(t.ol=0,i=!0),t.mI.delay)for(;t.rl>t.mI.delay[t.ol];)if(t.rl-=t.mI.delay[t.ol]+1,t.ol++,i=!0,t.ol>=t.mI.ll&&(t.ol-=t.mI.al,t.ol<0||t.ol>=t.mI.ll)){t.xy(),i=!1;break}if(i&&this.Be){const i=t.gm,s=t.Am,h=t.Im;let n=0;if(0===t.AI?n=this.Be.Yu(i,s,h):1===t.AI?n=this.Be.ey(i,h,s):2===t.AI?n=this.Be.Qu(i,s,h):3===t.AI&&(n=this.Be.Fu(i,s,h)),this.Gn&&0!==n&&(n>>14&32767)===t.index){const r=this.Gn[i][s][h],o=this.Gn[i][s+1][h],l=this.Gn[i][s+1][h+1],a=this.Gn[i][s][h+1],c=e.Z.get(t.index);let f=-1;if(-1!==t.ol&&t.mI.frames&&(f=t.mI.frames[t.ol]),2===t.AI){const t=this.Be.Zu(i,s,h,n);let e=31&t;const u=t>>6;e===D.Z.Rw.id&&(e=D.Z.kw.id),this.Be?.II(i,s,h,c.ha(e,u,r,o,l,a,f))}else if(1===t.AI)this.Be?.gI(i,s,h,c.ha(D.Z._I.id,0,r,o,l,a,f));else if(0===t.AI){const t=this.Be.Zu(i,s,h,n),e=31&t,u=t>>6;if(e===D.Z.zu.id){const t=u+1&3;this.Be?.CI(s,h,i,c.ha(D.Z.zu.id,u+4,r,o,l,a,f),c.ha(D.Z.zu.id,t,r,o,l,a,f))}else this.Be?.EI(i,s,h,c.ha(e,u,r,o,l,a,f))}else if(3===t.AI){const t=this.Be.Zu(i,s,h,n)>>6;this.Be?.TI(i,s,h,c.ha(D.Z.Mw.id,t,r,o,l,a,f))}}else t.xy()}}};jc=()=>{for(let t=-1;t<this.er;t++){let i;i=-1===t?this.kt:this.nr[t];const s=this.hr[i];s&&s.ru>0&&(s.ru--,0===s.ru&&(s.iu=null))}for(let t=0;t<this.wr;t++){const i=this.yr[t],s=this.dr[i];s&&s.ru>0&&(s.ru--,0===s.ru&&(s.iu=null))}};Kc=()=>{if(2===this.Ge){for(let t=this.Ir.Kw();t;t=this.Ir.qw())this.Pt>=t.dI&&(this.iy(t.Sp,t.x,t.z,t._m,t.angle,t.shape,t.ed),t.xy());$.K.vt++,$.K.vt>85&&($.K.vt=0,this.Ut.Yc(b.Z.bI))}};qA=t=>{const i=t.xA-this.Pt,s=128*t.SA+64*t.size,h=128*t.kA+64*t.size;t.x+=(s-t.x)/i|0,t.z+=(h-t.z)/i|0,t.vI=0,0==t.PA&&(t.OI=1024),1==t.PA&&(t.OI=1536),2==t.PA&&(t.OI=0),3==t.PA&&(t.OI=512)};$A=t=>{if(t.NA==this.Pt||-1==t.jp||0!=t.AA||t.mA+1>h.Z.To[t.jp].delay[t.pA]){const i=t.NA-t.xA,s=this.Pt-t.xA,h=128*t.SA+64*t.size,e=128*t.kA+64*t.size,n=128*t.RA+64*t.size,r=128*t.MA+64*t.size;t.x=(h*(i-s)+n*s)/i|0,t.z=(e*(i-s)+r*s)/i|0}t.vI=0,0==t.PA&&(t.OI=1024),1==t.PA&&(t.OI=1536),2==t.PA&&(t.OI=0),3==t.PA&&(t.OI=512),t.rI=t.OI};QA=t=>{if(-1!==t.IA&&t.IA<32768){const i=this.dr[t.IA];if(i){const s=t.x-i.x,h=t.z-i.z;0===s&&0===h||(t.OI=2047&(325.949*Math.atan2(s,h)|0))}}if(t.IA>=32768){let i=t.IA-32768;i===this.Rr&&(i=this.kt);const s=this.hr[i];if(s){const i=t.x-s.x,h=t.z-s.z;0===i&&0===h||(t.OI=2047&(325.949*Math.atan2(i,h)|0))}}if((0!==t.gA||0!==t._A)&&(0===t.pathLength||t.vI>0)){const i=t.x-64*(t.gA-this.Cn-this.Cn),s=t.z-64*(t._A-this.En-this.En);0===i&&0===s||(t.OI=2047&(325.949*Math.atan2(i,s)|0)),t.gA=0,t._A=0}const i=t.OI-t.rI&2047;if(0!==i&&(i<32||i>2016?t.rI=t.OI:i>1024?t.rI-=32:t.rI+=32,t.rI&=2047,t.iI===t.ba&&t.rI!==t.OI)){if(-1!==t.LI)return void(t.iI=t.LI);t.iI=t.BA}};tI=t=>{let i;if(t.oI=!1,-1!==t.iI&&(i=h.Z.To[t.iI],t.SI++,i.delay&&t.kI<i.ll&&t.SI>i.delay[t.kI]&&(t.SI=0,t.kI++),t.kI>=i.ll&&(t.SI=0,t.kI=0)),-1!==t.jp&&0===t.AA){for(i=h.Z.To[t.jp],t.mA++;i.delay&&t.pA<i.ll&&t.mA>i.delay[t.pA];)t.mA-=i.delay[t.pA],t.pA++;t.pA>=i.ll&&(t.pA-=i.al,t.yA++,t.yA>=i.RI&&(t.jp=-1),(t.pA<0||t.pA>=i.ll)&&(t.jp=-1)),t.oI=i.MI}if(t.AA>0&&t.AA--,-1!==t.TA&&this.Pt>=t.vA){for(t.OA<0&&(t.OA=0),i=l.Z.To[t.TA].mI,t.LA++;i&&i.delay&&t.OA<i.ll&&t.LA>i.delay[t.OA];)t.LA-=i.delay[t.OA],t.OA++;i&&t.OA>=i.ll&&(t.OA<0||t.OA>=i.ll)&&(t.TA=-1)}};JA=t=>{if(t.iI=t.ba,0===t.pathLength)return void(t.vI=0);if(-1!==t.jp&&0===t.AA){if(!h.Z.To[t.jp].xI)return void t.vI++}const i=t.x,s=t.z,e=128*t.af[t.pathLength-1]+64*t.size,n=128*t.cf[t.pathLength-1]+64*t.size;if(e-i<=256&&e-i>=-256&&n-s<=256&&n-s>=-256){t.OI=i<e?s<n?1280:s>n?1792:1536:i>e?s<n?768:s>n?256:512:s<n?1024:0;let h=t.OI-t.rI&2047;h>1024&&(h-=2048);let r=t.HA;h>=-256&&h<=256?r=t.BA:h>=256&&h<768?r=t.VA:h>=-768&&h<=-256&&(r=t.YA),-1===r&&(r=t.BA),t.iI=r;let o=4;t.rI!==t.OI&&-1===t.IA&&(o=2),t.pathLength>2&&(o=6),t.pathLength>3&&(o=8),t.vI>0&&t.pathLength>1&&(o=8,t.vI--),t.NI[t.pathLength-1]&&(o<<=1),o>=8&&t.iI===t.BA&&-1!==t.DI&&(t.iI=t.DI),i<e?(t.x+=o,t.x>e&&(t.x=e)):i>e&&(t.x-=o,t.x<e&&(t.x=e)),s<n?(t.z+=o,t.z>n&&(t.z=n)):s>n&&(t.z-=o,t.z<n&&(t.z=n)),t.x===e&&t.z===n&&t.pathLength--}else t.x=e,t.z=n};Ff=()=>{let t=3;if(this.an<310&&this.Lr){let i=this.nn>>7,s=this.ln>>7;const h=this.Lr.x>>7,e=this.Lr.z>>7;let n,r,o,l;if(this.Hn&&0!=(4&this.Hn[this.Mn][i][s])&&(t=this.Mn),n=h>i?h-i:i-h,r=e>s?e-s:s-e,n>r)for(o=65536*r/n|0,l=32768;i!==h;)i<h?i++:i>h&&i--,this.Hn&&0!=(4&this.Hn[this.Mn][i][s])&&(t=this.Mn),l+=o,l>=65536&&(l-=65536,s<e?s++:s>e&&s--,this.Hn&&0!=(4&this.Hn[this.Mn][i][s])&&(t=this.Mn));else for(o=65536*n/r|0,l=32768;s!==e;)s<e?s++:s>e&&s--,this.Hn&&0!=(4&this.Hn[this.Mn][i][s])&&(t=this.Mn),l+=o,l>=65536&&(l-=65536,i<h?i++:i>h&&i--,this.Hn&&0!=(4&this.Hn[this.Mn][i][s])&&(t=this.Mn))}return this.Lr&&this.Hn&&0!=(4&this.Hn[this.Mn][this.Lr.x>>7][this.Lr.z>>7])&&(t=this.Mn),t};Df=()=>{if(!this.Hn)return 0;return this.xf(this.Mn,this.nn,this.ln)-this.rn>=800||0==(4&this.Hn[this.Mn][this.nn>>7][this.ln>>7])?3:this.Mn};xf=(t,i,s)=>{if(!this.Gn)return 0;const h=Math.min(i>>7,G.Z.Zn-1),e=Math.min(s>>7,G.Z.Zn-1);let n=t;t<3&&this.Hn&&2==(2&this.Hn[1][h][e])&&(n=t+1);const r=127&i,o=127&s;return(this.Gn[n][h][e]*(128-r)+this.Gn[n][h+1][e]*r>>7)*(128-o)+(this.Gn[n][h][e+1]*(128-r)+this.Gn[n][h+1][e+1]*r>>7)*o>>7};Mf=(t,i,s,h,e,n)=>{const r=2048-e&2047,o=2048-h&2047;let l,a,c,f=0,u=0,w=n;0!==r&&(l=d.Z.sin[r],a=d.Z.cos[r],c=u*a-n*l>>16,w=u*l+n*a>>16,u=c),0!==o&&(l=d.Z.sin[o],a=d.Z.cos[o],c=w*l+f*a>>16,w=w*a-f*l>>16,f=c),this.nn=t-f,this.rn=i-u,this.ln=s-w,this.an=e,this.cn=h};yf=()=>{if(!this.Lr)return;const t=this.Lr.x+this.ze,i=this.Lr.z+this.je;(this.Un-t<-500||this.Un-t>500||this.Bn-i<-500||this.Bn-i>500)&&(this.Un=t,this.Bn=i),this.Un!==t&&(this.Un+=(t-this.Un)/16|0),this.Bn!==i&&(this.Bn+=(i-this.Bn)/16|0),1===this.qc[1]?this.Dn+=(-this.Dn-24)/2|0:1===this.qc[2]?this.Dn+=(24-this.Dn)/2|0:this.Dn=this.Dn/2|0,1===this.qc[3]?this.Fn+=(12-this.Fn)/2|0:1===this.qc[4]?this.Fn+=(-this.Fn-12)/2|0:this.Fn=this.Fn/2|0,this.Pn=2047&(this.Pn+this.Dn/2|0),this.Nn+=this.Fn/2|0,this.Nn<128&&(this.Nn=128),this.Nn>383&&(this.Nn=383);const s=this.Un>>7,h=this.Bn>>7,e=this.xf(this.Mn,this.Un,this.Bn);let n=0;if(this.Gn&&s>3&&h>3&&s<100&&h<100)for(let t=s-4;t<=s+4;t++)for(let i=h-4;i<=h+4;i++){let s=this.Mn;s<3&&this.Hn&&2==(2&this.Hn[1][t][i])&&s++;const h=e-this.Gn[s][t][i];h>n&&(n=h)}let r=192*n;r>98048&&(r=98048),r<32768&&(r=32768),r>this.fn?this.fn+=(r-this.fn)/24|0:r<this.fn&&(this.fn+=(r-this.fn)/80|0)};pf=()=>{let t=128*this.Jn+64,i=128*this.Qn+64,s=this.xf(this.Mn,this.Jn,this.Qn)-this.tr;this.nn<t&&(this.nn+=this.ir+((t-this.nn)*this.sr/1e3|0),this.nn>t&&(this.nn=t)),this.nn>t&&(this.nn-=this.ir+((this.nn-t)*this.sr/1e3|0),this.nn<t&&(this.nn=t)),this.rn<s&&(this.rn+=this.ir+((s-this.rn)*this.sr/1e3|0),this.rn>s&&(this.rn=s)),this.rn>s&&(this.rn-=this.ir+((this.rn-s)*this.sr/1e3|0),this.rn<s&&(this.rn=s)),this.ln<i&&(this.ln+=this.ir+((i-this.ln)*this.sr/1e3|0),this.ln>i&&(this.ln=i)),this.ln>i&&(this.ln-=this.ir+((this.ln-i)*this.sr/1e3|0),this.ln<i&&(this.ln=i)),t=128*this.zn+64,i=128*this.jn+64,s=this.xf(this.Mn,this.zn,this.jn)-this.Kn;const h=t-this.nn,e=s-this.rn,n=i-this.ln,r=0|Math.sqrt(h*h+n*n);let o=2047&(325.949*Math.atan2(e,r)|0);const l=2047&(-325.949*Math.atan2(h,n)|0);o<128&&(o=128),o>383&&(o=383),this.an<o&&(this.an+=this.qn+((o-this.an)*this.$n/1e3|0),this.an>o&&(this.an=o)),this.an>o&&(this.an-=this.qn+((this.an-o)*this.$n/1e3|0),this.an<o&&(this.an=o));let a=l-this.cn;a>1024&&(a-=2048),a<-1024&&(a+=2048),a>0&&(this.cn+=this.qn+(a*this.$n/1e3|0),this.cn&=2047),a<0&&(this.cn-=this.qn+(-a*this.$n/1e3|0),this.cn&=2047);let c=l-this.cn;c>1024&&(c-=2048),c<-1024&&(c+=2048),(c<0&&a>0||c>0&&a<0)&&(this.cn=l)};Qy=(t,i)=>{const s=t.vy;let n=this.An+(s>>4&7),r=this.In+(7&s);if(i===T.Z.Jy||i===T.Z.$y){const s=t.vy,h=s>>2,e=3&s,o=D.Z.of(h).ed;let l;if(l=i===T.Z.$y?-1:t.Cy,n>=0&&r>=0&&n<G.Z.Zn&&r<G.Z.Zn){let t=null;for(let i=this.Cr.Kw();i;i=this.Cr.qw())if(i.Sp===this.Mn&&i.x===n&&i.z===r&&i.ed===o){t=i;break}if(!t&&this.Be){let i=0,s=-1,h=0,e=0;if(o===P.Z.sy?i=this.Be.Yu(this.Mn,n,r):o===P.Z.hy?i=this.Be.ey(this.Mn,r,n):o===P.Z.ny?i=this.Be.Qu(this.Mn,n,r):o===P.Z.Mw&&(i=this.Be.Fu(this.Mn,n,r)),0!==i){const t=this.Be.Zu(this.Mn,n,r,i);s=i>>14&32767,h=31&t,e=t>>6}t=new U.Z(this.Mn,o,n,r,0,F.Z.ju,D.Z.Xu.id,s,e,h),this.Cr.FI(t)}t&&(t._m=l,t.shape=h,t.angle=e),this.iy(this.Mn,n,r,l,e,h,o)}}else if(i===T.Z.qy){const i=t.vy>>2,s=D.Z.of(i).ed,e=t.Cy;if(n>=0&&r>=0&&n<G.Z.Zn&&r<G.Z.Zn&&this.Be){let t=0;if(s===P.Z.sy?t=this.Be.Yu(this.Mn,n,r):s===P.Z.hy?t=this.Be.ey(this.Mn,r,n):s===P.Z.ny?t=this.Be.Qu(this.Mn,n,r):s===P.Z.Mw&&(t=this.Be.Fu(this.Mn,n,r)),0!==t){const i=new V.Z(t>>14&32767,this.Mn,s,n,r,h.Z.To[e],!1);this.Ar.FI(i)}}}else if(i===T.Z.Ky){const i=t.Cy,s=t.Cy;if(n>=0&&r>=0&&n<G.Z.Zn&&r<G.Z.Zn){const t=new Z.Z(i,s);this.gr[this.Mn][n][r]||(this.gr[this.Mn][n][r]=new k.Z),this.gr[this.Mn][n][r]?.FI(t),this.zw(n,r)}}else if(i===T.Z.jy){const i=t.Cy;if(n>=0&&r>=0&&n<G.Z.Zn&&r<G.Z.Zn){const t=this.gr[this.Mn][n][r];if(t){for(let s=t.Kw();s;s=t.qw())if(s.index===(32767&i)){s.xy();break}t.Kw()||(this.gr[this.Mn][n][r]=null),this.zw(n,r)}}}else if(i===T.Z.zy){let i=n+t.Ty,s=r+t.Ty;const h=t.vp,e=t.Cy,o=t.vy,l=t.vy,a=t.Cy,c=t.Cy,f=t.vy,u=t.vy;if(n>=0&&r>=0&&n<G.Z.Zn&&r<G.Z.Zn&&i>=0&&s>=0&&i<G.Z.Zn&&s<G.Z.Zn){n=128*n+64,r=128*r+64,i=128*i+64,s=128*s+64;const t=new X.Z(e,this.Mn,n,this.xf(this.Mn,n,r)-o,r,a+this.Pt,c+this.Pt,f,u,h,l);t.yI(i,this.xf(this.Mn,i,s)-l,s,a+this.Pt),this.pr.FI(t)}}else if(i===T.Z.Xy){const i=t.Cy,s=t.vy,h=t.Cy;if(n>=0&&r>=0&&n<G.Z.Zn&&r<G.Z.Zn){n=128*n+64,r=128*r+64;const t=new z.Z(i,this.Mn,n,r,this.xf(this.Mn,n,r)-s,this.Pt,h);this.mr.FI(t)}}else if(i===T.Z.Vy){const i=t.Cy,s=t.Cy,h=t.Cy;if(n>=0&&r>=0&&n<G.Z.Zn&&r<G.Z.Zn&&h!==this.Rr){const t=new Z.Z(i,s);this.gr[this.Mn][n][r]||(this.gr[this.Mn][n][r]=new k.Z),this.gr[this.Mn][n][r]?.FI(t),this.zw(n,r)}}else if(i===T.Z.Zy){const i=t.vy,s=i>>2,h=3&i,o=D.Z.of(s).ed,l=t.Cy,a=t.Cy,c=t.Cy,f=t.Cy;let u,d=t.Ty,w=t.Ty,y=t.Ty,p=t.Ty;if(u=f===this.Rr?this.Lr:this.hr[f],u&&this.Gn){const t=new B.Z(this.Mn,o,n,r,-1,h,s,a+this.Pt);this.Ir.FI(t);const i=new B.Z(this.Mn,o,n,r,l,h,s,c+this.Pt);this.Ir.FI(i);const f=this.Gn[this.Mn][n][r],m=this.Gn[this.Mn][n+1][r],A=this.Gn[this.Mn][n+1][r+1],I=this.Gn[this.Mn][n][r+1],g=e.Z.get(l);u.hI=a+this.Pt,u.eI=c+this.Pt,u.sI=g.ha(s,h,f,m,A,I,-1);let _,C=g.width,E=g.length;h!==F.Z.Ku&&h!==F.Z.$u||(C=g.length,E=g.width),u.UI=128*n+64*C,u.BI=128*r+64*E,u.GI=this.xf(this.Mn,u.UI,u.BI),d>y&&(_=d,d=y,y=_),w>p&&(_=w,w=p,p=_),u.aI=n+d,u.fI=n+y,u.cI=r+w,u.uI=r+p}}else if(i===T.Z.Yy){const i=t.Cy,s=t.Cy,h=t.Cy;if(n>=0&&r>=0&&n<G.Z.Zn&&r<G.Z.Zn){const t=this.gr[this.Mn][n][r];if(t){for(let e=t.Kw();e;e=t.qw())if(e.index===(32767&i)&&e.count===s){e.count=h;break}this.zw(n,r)}}}};Vf=t=>{if(!$.K.ht){if(d.Z.HI[17]>=t){const t=d.Z.WI[17];if(!t)return;const i=t.width*t.height-1,s=t.width*this.He*2,h=t.tc,e=this.Sn;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.tc=e,this.Sn=h,d.Z.YI(17)}if(d.Z.HI[24]>=t){const t=d.Z.WI[24];if(!t)return;const i=t.width*t.height-1,s=t.width*this.He*2,h=t.tc,e=this.Sn;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.tc=e,this.Sn=h,d.Z.YI(24)}}};dc=()=>{if(!(this.Ci&&this.Ei&&this._i&&this.Li))return;for(let t=10;t<117;t++){(100*Math.random()|0)<50&&(this.Ci[t+32512]=255)}for(let t=0;t<100;t++){const t=2+(124*Math.random()|0)+(128+(128*Math.random()|0)<<7);this.Ci[t]=192}for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Ei[s]=(this.Ci[s-1]+this.Ci[s+1]+this.Ci[s-128]+this.Ci[s+128])/4|0}this.Si+=128,this.Si>this._i.length&&(this.Si-=this._i.length,this.mc(this.pi[12*Math.random()|0]));for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);let h=this.Ei[s+128]-(this._i[s+this.Si&this._i.length-1]/5|0);h<0&&(h=0),this.Ci[s]=h}for(let t=0;t<255;t++)this.Li[t]=this.Li[t+1];if(this.Li[255]=16*Math.sin(this.Pt/14)+14*Math.sin(this.Pt/15)+12*Math.sin(this.Pt/16)|0,this.ki>0&&(this.ki-=4),this.Ri>0&&(this.Ri-=4),0===this.ki&&0===this.Ri){const t=2e3*Math.random()|0;0===t?this.ki=1024:1===t&&(this.Ri=1024)}};ZI=(t,i,s)=>{const h=256-i;return((16711935&t)*h+(16711935&s)*i&4278255360)+((65280&t)*h+(65280&s)*i&16711680)>>8};wc=()=>{if(!(this.Ti&&this.bi&&this.vi&&this.Oi&&this.Li&&this.Ci))return;const t=256;if(this.ki>0)for(let t=0;t<256;t++)this.ki>768?this.Ti[t]=this.ZI(this.bi[t],1024-this.ki,this.vi[t]):this.ki>256?this.Ti[t]=this.vi[t]:this.Ti[t]=this.ZI(this.vi[t],256-this.ki,this.bi[t]);else if(this.Ri>0)for(let t=0;t<256;t++)this.Ri>768?this.Ti[t]=this.ZI(this.bi[t],1024-this.Ri,this.Oi[t]):this.Ri>256?this.Ti[t]=this.Oi[t]:this.Ti[t]=this.ZI(this.Oi[t],256-this.Ri,this.bi[t]);else for(let t=0;t<256;t++)this.Ti[t]=this.bi[t];for(let t=0;t<33920;t++)this.si&&this.Ai&&(this.si.tc[t]=this.Ai.tc[t]);let i=0,s=1152;for(let h=1;h<255;h++){let e=(this.Li[h]*(t-h)/t|0)+22;e<0&&(e=0),i+=e;for(let t=e;t<128;t++){let t=this.Ci[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Ti[t],this.si){const e=this.si.tc[s];this.si.tc[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}s+=e}this.si?.draw(0,0);for(let t=0;t<33920;t++)this.hi&&this.Ii&&(this.hi.tc[t]=this.Ii.tc[t]);i=0,s=1176;for(let h=1;h<255;h++){const e=this.Li[h]*(t-h)/t|0,n=103-e;s+=e;for(let t=0;t<n;t++){let t=this.Ci[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Ti[t],this.hi){const e=this.hi.tc[s];this.hi.tc[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}i+=128-n,s+=128-n-e}this.hi?.draw(661,0)}}console.log(`RS2 user client - release #${$.K.tt}`),await(0,it.O)(),(new t).VI().then((()=>{})),i()}catch(t){i(t)}}),1)},1995:(t,i,s)=>{s.d(i,{Z:()=>a});var h=s(651),e=s(8078),n=s(1519),r=s(9839),o=s(6884),l=s(6121);class a{static getParameter(t){return new URLSearchParams(window.location.search).get(t)??''}static setParameter(t,i){const s=new URL(window.location.toString());s.searchParams.set(t,i),window.history.pushState(null,'',s.toString())}Au=0;XI=[];zI=0;vo=null;state=0;jI=20;KI=1;qI=[];pu=0;$I=0;JI=[];QI=!0;tg=!1;ig=50;ec=!1;Uc=0;Jc=0;Ll=0;Sl=0;Ec=0;Tc=0;bc=0;qc=[];sg=[];hg=0;eg=0;input=null;ng=!1;rg=!1;og=!1;time=-1;lg=0;ag=0;cg=0;fg=0;ug=0;dg=0;constructor(t=!1){l.wg.tabIndex=-1,l.Yo.fillStyle='black',l.Yo.fillRect(0,0,l.wg.width,l.wg.height),this.tg=t,this.tg?this.resize(window.innerWidth,window.innerHeight):this.resize(l.wg.width,l.wg.height)}get width(){return l.wg.width}get height(){return l.wg.height}resize=(t,i)=>{l.wg.width=t,l.wg.height=i,this.vo=new h.Z(t,i),e.Z.yg()};VI=async()=>{l.wg.addEventListener('resize',(()=>{this.tg&&this.resize(window.innerWidth,window.innerHeight)}),!1),l.wg.onmousedown=this.onmousedown,l.wg.onmouseup=this.onmouseup,l.wg.onmouseenter=this.onmouseenter,l.wg.onmouseleave=this.onmouseleave,l.wg.onmousemove=this.onmousemove,window.onbeforeunload=this._o,l.wg.onfocus=this.onfocus,l.wg.onblur=this.onblur,this.pg?(l.wg.ontouchstart=this.ontouchstart,l.wg.ontouchend=this.ontouchend,l.wg.ontouchmove=this.ontouchmove):(l.wg.onkeydown=this.onkeydown,l.wg.onkeyup=this.onkeyup),l.wg.oncontextmenu=t=>{t.preventDefault()},window.oncontextmenu=t=>{t.preventDefault()},this.pg&&'low'===a.getParameter('detail')&&(this.ig=30),await this.Po(0,'Loading...'),await this.load();for(let t=0;t<10;t++)this.qI[t]=performance.now();let t,i=0,s=256,h=1,e=0;for(;this.state>=0;){if(this.state>0&&(this.state--,0===this.state))return void this.mg();const r=s,o=h;s=300,h=1,t=performance.now();const l=this.qI[i];if(0===l?(s=r,h=o):t>l&&(s=2560*this.jI/(t-l)|0),s<25?s=25:s>256&&(s=256,h=this.jI-(t-l)/10|0),this.qI[i]=t,i=(i+1)%10,h>1)for(let t=0;t<10;t++)0!==this.qI[t]&&(this.qI[t]+=h);for(h<this.KI&&(h=this.KI),await(0,n.Fo)(h);e<256;)await this.update(),this.Ec=0,this.hg=this.eg,e+=s;e&=255,this.jI>0&&(this.pu=1e3*s/(256*this.jI)|0);const a=performance.now();if(this.QI&&this.refresh(),await this.draw(),this.JI[this.$I]=(performance.now()-a)/1e3,this.$I=(this.$I+1)%this.JI.length,this.ig<50){const i=1e3/this.ig-(performance.now()-t);i>0&&await(0,n.Fo)(i)}}-1===this.state&&this.mg()};mg=()=>{this.state=-2,this._o()};Zo=t=>{this.jI=1e3/t|0};Gw=t=>{this.ig=Math.max(Math.min(50,0|t),0)};start=()=>{this.state>=0&&(this.state=0)};stop=()=>{this.state>=0&&(this.state=4e3/this.jI|0)};destroy=()=>{this.state=-1};load=async()=>{};update=async()=>{};_o=()=>{};draw=async()=>{};refresh=()=>{};async Po(t,i){const s=this.width,h=this.height;this.QI&&(l.Yo.fillStyle='black',l.Yo.fillRect(0,0,s,h),this.QI=!1);const e=h/2-18;l.Yo.fillStyle='rgb(140, 17, 17)',l.Yo.rect((s/2|0)-152,e,304,34),l.Yo.fillRect((s/2|0)-150,e+2,3*t,30),l.Yo.fillStyle='black',l.Yo.fillRect((s/2|0)-150+3*t,e+2,300-3*t,30),l.Yo.font='bold 13px helvetica, sans-serif',l.Yo.textAlign='center',l.Yo.fillStyle='white',l.Yo.fillText(i,s/2|0,e+22),await(0,n.Fo)(5)}Oc=()=>{let t=-1;return this.eg!==this.hg&&(t=this.sg[this.hg],this.hg=this.hg+1&127),t};get ms(){const t=this.JI.length;let i=0;for(let s=0;s<t;s++)i+=this.JI[s];const s=i/t;return s>this.Au&&(this.Au=s),this.XI[this.zI]=s,this.zI=(this.zI+1)%250,s}get mu(){return this.XI.reduce(((t,i)=>t+i),0)/250}onkeydown=t=>{console.log(t);const i=t.key;r.v.includes(i)&&t.preventDefault(),this.Uc=0;const s=r.n[i];if(!s||0===t.code.length&&!t.isTrusted)return void console.warn(`Unhandled key: ${i}`);const h=s.key;let e=s.ch;e<30&&(e=0),37===h?e=1:39===h?e=2:38===h?e=3:40===h?e=4:17===h?e=5:8===h||127===h?e=8:9===h?e=9:10===h?e=10:h>=112&&h<=123?e=h+1008-112:36===h?e=1e3:35===h?e=1001:33===h?e=1002:34===h&&(e=1003),e>0&&e<128&&(this.qc[e]=1),e>4&&(this.sg[this.eg]=e,this.eg=this.eg+1&127),o.Z.enabled&&o.Z.Ag(e)};onkeyup=t=>{const i=t.key;r.v.includes(i)&&t.preventDefault(),this.Uc=0;const s=r.n[i];if(!s||0===t.code.length&&!t.isTrusted)return void console.warn(`Unhandled key: ${i}`);const h=s.key;let e=s.ch;e<30&&(e=0),37===h?e=1:39===h?e=2:38===h?e=3:40===h?e=4:17===h?e=5:8===h||127===h?e=8:9===h?e=9:10===h?e=10:h>=112&&h<=123?e=h+1008-112:36===h?e=1e3:35===h?e=1001:33===h?e=1002:34===h&&(e=1003),e>0&&e<128&&(this.qc[e]=0),o.Z.enabled&&o.Z.Ig(e)};onmousedown=t=>{if(this.ng=!1,this.gg(t),this.Uc=0,this.Tc=this.Ll,this.bc=this.Sl,this.pg){if(this._g()||this.Cg()||this.Eg())return this.Ec=1,void(this.Jc=1);t.timeStamp>=this.time+500?(this.Ec=2,this.Jc=2):(this.Ec=1,this.Jc=1)}else 2==t.buttons?(this.Ec=2,this.Jc=2):(this.Ec=1,this.Jc=1);o.Z.enabled&&o.Z.Tg(this.Tc,this.bc,t.buttons)};onmouseup=t=>{this.gg(t),this.Uc=0,this.Jc=0,o.Z.enabled&&o.Z.bg(t.buttons)};onmouseenter=t=>{this.gg(t),o.Z.enabled&&o.Z.vg()};onmouseleave=t=>{this.gg(t),o.Z.enabled&&o.Z.Og()};onmousemove=t=>{this.gg(t),this.Uc=0,o.Z.enabled&&o.Z.Lg(this.Ll,this.Sl)};onfocus=t=>{this.QI=!0,this.refresh(),o.Z.enabled&&o.Z.Sg()};onblur=t=>{o.Z.enabled&&o.Z.kg()};ontouchstart=t=>{if(!this.pg)return;null!==this.input&&(this.input.parentNode?.removeChild(this.input),this.input=null),this.ng=!0;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.lg=this.ug=this.cg=0|i.screenX,this.ag=this.dg=this.fg=0|i.screenY,this.time=t.timeStamp,this.rg=this.Rg(),this.og=this.Mg()};ontouchend=t=>{if(!this.pg||!this.ng)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;if(this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.ug=0|i.screenX,this.dg=0|i.screenY,this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowLeft',code:'ArrowLeft'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowUp',code:'ArrowUp'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowRight',code:'ArrowRight'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowDown',code:'ArrowDown'})),this.rg&&!this.Rg())return void(this.ng=!1);if(this.og&&!this.Mg())return void(this.ng=!1);if(this._g()||this.xg()||this.Cg()||this.Eg()){null!==this.input&&(this.input.parentNode?.contains(this.input)&&this.input.parentNode?.removeChild(this.input),this.input=null);const t=document.createElement('input');return this.Cg()?(t.setAttribute('id','username'),t.setAttribute('placeholder','Username')):this.Eg()?(t.setAttribute('id','password'),t.setAttribute('placeholder','Password')):this._g()?(t.setAttribute('id','chatinput'),t.setAttribute('placeholder','Chatinput')):this.xg()&&(t.setAttribute('id','chatpopup'),t.setAttribute('placeholder','Chatpopup')),this.Ng?t.setAttribute('type','password'):t.setAttribute('type',this.Eg()?'password':'text'),t.setAttribute('autofocus','autofocus'),t.setAttribute('spellcheck','false'),t.setAttribute('autocomplete','off'),t.setAttribute('style',`position: fixed; left: ${s}px; top: ${h}px; width: 1px; height: 1px; opacity: 0;`),document.body.appendChild(t),t.focus(),t.click(),this.Ng&&(t.oninput=t=>{if(!(t instanceof InputEvent))return;const i=t,s=i.data;null!==s&&'insertText'===i.inputType&&this.onkeydown(new KeyboardEvent('keydown',{key:s,code:s}))}),t.onkeydown=t=>{this.Ng&&'Enter'!==t.key&&'Backspace'!==t.key||this.onkeydown(new KeyboardEvent('keydown',{key:t.key,code:t.key}))},t.onkeyup=t=>{this.Ng&&'Enter'!==t.key&&'Backspace'!==t.key||this.onkeyup(new KeyboardEvent('keyup',{key:t.key,code:t.key}))},t.onfocus=t=>{this.input?.parentNode?.removeChild(this.input),this.input=null,this.onfocus(t)},this.input=t,void(this.ng=!1)}const e=t.timeStamp>=this.time+500,n=Math.abs(this.lg-this.ug)>16||Math.abs(this.ag-this.dg)>16;e&&!n?(this.ng=!0,this.onmousedown(new MouseEvent('mousedown',{buttons:2}))):(this.Jc=0,this.ng=!1)};ontouchmove=t=>{if(!this.pg||!this.ng)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.ug=0|i.screenX,this.dg=0|i.screenY,this.rg&&-1===this.Ro()?(this.cg-this.ug>0?this.rotate(2):this.cg-this.ug<0&&this.rotate(0),this.fg-this.dg>0?this.rotate(3):this.fg-this.dg<0&&this.rotate(1)):(this.og||-1!==this.Ro())&&this.onmousedown(new MouseEvent('mousedown',{buttons:1})),this.cg=this.ug,this.fg=this.dg};get pg(){return['Android','webOS','iPhone','iPad','iPod','BlackBerry','Windows Phone'].some((t=>navigator.userAgent.includes(t)))}get Ng(){return['Android'].some((t=>navigator.userAgent.includes(t)))}Rg=()=>this.ec&&this.Ll>=8&&this.Ll<=520&&this.Sl>=11&&this.Sl<=345;_g=()=>this.ec&&-1==this.ko()&&!this.Lo()&&!this.So()&&this.Ll>=11&&this.Ll<=506&&this.Sl>=449&&this.Sl<=482;xg=()=>this.ec&&(this.Lo()||this.So())&&this.Ll>=11&&this.Ll<=506&&this.Sl>=383&&this.Sl<=482;Mg=()=>this.ec&&this.Ll>=562&&this.Ll<=752&&this.Sl>=231&&this.Sl<=492;Cg=()=>!this.ec&&2==this.Oo()&&this.Ll>=301&&this.Ll<=562&&this.Sl>=262&&this.Sl<=279;Eg=()=>!this.ec&&2==this.Oo()&&this.Ll>=301&&this.Ll<=562&&this.Sl>=279&&this.Sl<=296;rotate=t=>{0==t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowRight',code:'ArrowRight'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowLeft',code:'ArrowLeft'}))):1==t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowDown',code:'ArrowDown'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowUp',code:'ArrowUp'}))):2==t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowLeft',code:'ArrowLeft'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowRight',code:'ArrowRight'}))):3==t&&(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowUp',code:'ArrowUp'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowDown',code:'ArrowDown'})))};Pg=()=>null!=document.fullscreenElement;gg=t=>{if(this.Pg()){const i=t.target.getBoundingClientRect(),s=window.innerHeight/l.wg.height,h=(window.innerWidth-l.wg.width*s)/2;this.Ll=0|this.Dg(t.clientX-i.left-h,0,l.wg.width*s,0,789),this.Sl=0|this.Dg(t.clientY-i.top,0,l.wg.height*s,0,532)}else{const i=l.wg.getBoundingClientRect(),s=l.wg.width/i.width,h=l.wg.height/i.height;this.Ll=(t.clientX-i.left)*s|0,this.Sl=(t.clientY-i.top)*h|0}this.Ll<0&&(this.Ll=0),this.Sl<0&&(this.Sl=0),this.Ll>789&&(this.Ll=789),this.Sl>532&&(this.Sl=532)};Dg=(t,i,s,h,e)=>(t-i)*(e-h)/(s-i)+h}},6884:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(2383);class e{static enabled=!1;static Fg=null;static Ug=null;static Bg=0;static Gg=0;static Hg=0;static Wg=0;static Yg=0;static ap=()=>{this.Fg=h.Z.Ft(1),this.Ug=null,this.Bg=performance.now(),this.enabled=!0};static Fc=()=>{this.enabled=!1,this.Fg=null};static flush=()=>{let t=null;return this.Ug&&this.enabled&&(t=this.Ug),this.Ug=null,t};static stop=()=>{let t=null;return this.Fg&&this.Fg.Mc>0&&this.enabled&&(t=this.Fg),this.Fc(),t};static Tg=(t,i,s)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;this.Gg++;const h=performance.now();let e=(h-this.Bg)/10|0;e>250&&(e=250),this.Bg=h,this.Zg(5),1===s?this.Fg?.p1(1):this.Fg?.p1(2),this.Fg?.p1(e),this.Fg?.p3(t+(i<<10))};static bg=t=>{if(!this.enabled)return;this.Gg++;const i=performance.now();let s=(i-this.Bg)/10|0;s>250&&(s=250),this.Bg=i,this.Zg(2),1===t?this.Fg?.p1(3):this.Fg?.p1(4),this.Fg?.p1(s)};static Lg=(t,i)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;const s=performance.now();if(s-this.Hg>=50){this.Hg=s,this.Gg++;let h=(s-this.Bg)/10|0;h>250&&(h=250),this.Bg=s,t-this.Wg<8&&t-this.Wg>=-8&&i-this.Yg<8&&i-this.Yg>=-8?(this.Zg(3),this.Fg?.p1(5),this.Fg?.p1(h),this.Fg?.p1(t+(i-this.Yg+8<<4)+8-this.Wg)):t-this.Wg<128&&t-this.Wg>=-128&&i-this.Yg<128&&i-this.Yg>=-128?(this.Zg(4),this.Fg?.p1(6),this.Fg?.p1(h),this.Fg?.p1(t+128-this.Wg),this.Fg?.p1(i+128-this.Yg)):(this.Zg(5),this.Fg?.p1(7),this.Fg?.p1(h),this.Fg?.p3(t+(i<<10))),this.Wg=t,this.Yg=i}};static Ag=t=>{if(!this.enabled)return;this.Gg++;const i=performance.now();let s=(i-this.Bg)/10|0;s>250&&(s=250),this.Bg=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.Zg(3),this.Fg?.p1(8),this.Fg?.p1(s),this.Fg?.p1(t)};static Ig=t=>{if(!this.enabled)return;this.Gg++;const i=performance.now();let s=(i-this.Bg)/10|0;s>250&&(s=250),this.Bg=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.Zg(3),this.Fg?.p1(9),this.Fg?.p1(s),this.Fg?.p1(t)};static Sg=()=>{if(!this.enabled)return;this.Gg++;const t=performance.now();let i=(t-this.Bg)/10|0;i>250&&(i=250),this.Bg=t,this.Zg(2),this.Fg?.p1(10),this.Fg?.p1(i)};static kg=()=>{if(!this.enabled)return;this.Gg++;const t=performance.now();let i=(t-this.Bg)/10|0;i>250&&(i=250),this.Bg=t,this.Zg(2),this.Fg?.p1(11),this.Fg?.p1(i)};static vg=()=>{if(!this.enabled)return;this.Gg++;const t=performance.now();let i=(t-this.Bg)/10|0;i>250&&(i=250),this.Bg=t,this.Zg(2),this.Fg?.p1(12),this.Fg?.p1(i)};static Og=()=>{if(!this.enabled)return;this.Gg++;const t=performance.now();let i=(t-this.Bg)/10|0;i>250&&(i=250),this.Bg=t,this.Zg(2),this.Fg?.p1(13),this.Fg?.p1(i)};static Zg=t=>{if(this.Fg&&this.Fg.Mc+t>=500){const t=this.Fg;this.Fg=h.Z.Ft(1),this.Ug=t}}}},9839:(t,i,s)=>{s.d(i,{n:()=>h,v:()=>e});const h={'Backspace':{key:8,ch:8},'Enter':{key:10,ch:10},'Shift':{key:16,ch:65535},'Escape':{key:27,ch:27},'Tab':{key:9,ch:9},'CapsLock':{key:20,ch:65535},' ':{key:32,ch:32},'Control':{key:17,ch:65535},'Alt':{key:18,ch:65535},'Meta':{key:524,ch:65535},'ArrowLeft':{key:37,ch:65535},'ArrowRight':{key:39,ch:65535},'ArrowUp':{key:38,ch:65535},'ArrowDown':{key:40,ch:65535},'Insert':{key:155,ch:65535},'Home':{key:36,ch:65535},'PageUp':{key:33,ch:65535},'Delete':{key:127,ch:127},'End':{key:35,ch:65535},'PageDown':{key:34,ch:65535},'`':{key:192,ch:96},'~':{key:192,ch:126},'!':{key:49,ch:33},'@':{key:50,ch:64},'#':{key:51,ch:35},'$':{key:52,ch:36},'%':{key:53,ch:37},'^':{key:54,ch:94},'&':{key:55,ch:38},'*':{key:56,ch:42},'(':{key:57,ch:40},')':{key:48,ch:41},'-':{key:45,ch:45},'_':{key:45,ch:95},'=':{key:61,ch:61},'+':{key:61,ch:43},'[':{key:91,ch:91},'{':{key:91,ch:123},']':{key:93,ch:93},'}':{key:93,ch:125},'\\':{key:92,ch:92},'|':{key:92,ch:124},';':{key:59,ch:59},':':{key:59,ch:58},"'":{key:222,ch:39},'"':{key:222,ch:34},',':{key:44,ch:44},'<':{key:44,ch:60},'.':{key:46,ch:46},'>':{key:46,ch:62},'/':{key:47,ch:47},'?':{key:47,ch:63},'F1':{key:112,ch:65535},'F2':{key:113,ch:65535},'F3':{key:114,ch:65535},'F4':{key:115,ch:65535},'F5':{key:116,ch:65535},'F6':{key:117,ch:65535},'F7':{key:118,ch:65535},'F8':{key:119,ch:65535},'F9':{key:120,ch:65535},'F10':{key:121,ch:65535},'F11':{key:122,ch:65535},'F12':{key:123,ch:65535},0:{key:48,ch:48},1:{key:49,ch:49},2:{key:50,ch:50},3:{key:51,ch:51},4:{key:52,ch:52},5:{key:53,ch:53},6:{key:54,ch:54},7:{key:55,ch:55},8:{key:56,ch:56},9:{key:57,ch:57},'a':{key:65,ch:97},'b':{key:66,ch:98},'c':{key:67,ch:99},'d':{key:68,ch:100},'e':{key:69,ch:101},'f':{key:70,ch:102},'g':{key:71,ch:103},'h':{key:72,ch:104},'i':{key:73,ch:105},'j':{key:74,ch:106},'k':{key:75,ch:107},'l':{key:76,ch:108},'m':{key:77,ch:109},'n':{key:78,ch:110},'o':{key:79,ch:111},'p':{key:80,ch:112},'q':{key:81,ch:113},'r':{key:82,ch:114},'s':{key:83,ch:115},'t':{key:84,ch:116},'u':{key:85,ch:117},'v':{key:86,ch:118},'w':{key:87,ch:119},'x':{key:88,ch:120},'y':{key:89,ch:121},'z':{key:90,ch:122},'A':{key:65,ch:65},'B':{key:66,ch:66},'C':{key:67,ch:67},'D':{key:68,ch:68},'E':{key:69,ch:69},'F':{key:70,ch:70},'G':{key:71,ch:71},'H':{key:72,ch:72},'I':{key:73,ch:73},'J':{key:74,ch:74},'K':{key:75,ch:75},'L':{key:76,ch:76},'M':{key:77,ch:77},'N':{key:78,ch:78},'O':{key:79,ch:79},'P':{key:80,ch:80},'Q':{key:81,ch:81},'R':{key:82,ch:82},'S':{key:83,ch:83},'T':{key:84,ch:84},'U':{key:85,ch:85},'V':{key:86,ch:86},'W':{key:87,ch:87},'X':{key:88,ch:88},'Y':{key:89,ch:89},'Z':{key:90,ch:90}},e=['Tab','F1','F2','F3','F4','F5','F6','F7','F8','F9','F10','ArrowLeft','ArrowRight','ArrowUp','ArrowDown']},2790:(t,i,s)=>{s.d(i,{Z:()=>c});var h=s(2383),e=s(9178),n=s(5542),r=s(6542),o=s(8934),l=s(9345),a=s(2991);class c{static To=[];static Vg=null;static bo=null;static Al=0;static Xg=1;static gl=2;static Fl=3;static Bl=4;static ql=5;static Ql=6;static oa=7;static Mm=1;static Pm=2;static Dm=3;static Fm=4;static Um=5;static Zl=6;static ca=1;static fa=100;static ua=101;static da=200;static ww=201;static yw=202;static wa=203;static pw=205;static Iw=300;static zg=301;static jg=302;static Kg=303;static qg=304;static $g=305;static Jg=306;static Qg=307;static t_=308;static i_=309;static s_=310;static h_=311;static e_=312;static gw=313;static _w=314;static n_=315;static r_=316;static o_=317;static l_=318;static a_=319;static c_=320;static f_=321;static u_=322;static Cw=323;static Sa=324;static ka=325;static Ew=326;static ga=327;static ya=401;static pa=500;static mw=501;static Aw=502;static Ia=503;static Ra=600;static bw=601;static d_=602;static w_=603;static y_=604;static p_=605;static m_=606;static A_=607;static I_=608;static g_=609;static __=610;static C_=611;static Ow=612;static Ma=613;static xa=650;static Da=651;static Fa=652;static Ua=653;static Ba=654;static Na=655;static Qa=(t,i,s)=>{this.Vg=new n.Z(5e4),this.bo=new n.Z(5e4);const e=new h.Z(t.read('data'));let r=-1;for(e.Mc+=2;e.Mc<e.data.length;){let t=e.Cy;65535===t&&(r=e.Cy,t=e.Cy);const h=this.To[t]=new c;h.id=t,h.ed=r,h.type=e.vy,h.Yl=e.vy,h.pl=e.Cy,h.width=e.Cy,h.height=e.Cy,h.Lm=e.vy,0===h.Lm?h.Lm=-1:h.Lm=(h.Lm-1<<8)+e.vy;const n=e.vy;if(n>0){h.Xo=new Uint8Array(n),h.jo=new Uint16Array(n);for(let t=0;t<n;t++)h.Xo[t]=e.vy,h.jo[t]=e.Cy}const o=e.vy;if(o>0){h.scripts=new l.to(o,null);for(let t=0;t<o;t++){const i=e.Cy,s=new Uint16Array(i);h.scripts[t]=s;for(let t=0;t<i;t++)s[t]=e.Cy}}if(h.type===c.Al){h.scroll=e.Cy,h.hide=1===e.vy;const t=e.vy;h.hl=new Array(t),h.ul=new Array(t),h.dl=new Array(t);for(let i=0;i<t;i++)h.hl[i]=e.Cy,h.ul[i]=e.vp,h.dl[i]=e.vp}if(h.type===c.Xg&&(e.Mc+=3),h.type===c.gl){h.El=new Int32Array(h.width*h.height),h.Tl=new Int32Array(h.width*h.height),h.draggable=1===e.vy,h.Sm=1===e.vy,h.Rm=1===e.vy,h.bl=e.vy,h.vl=e.vy,h._l=new Int16Array(20),h.Cl=new Int16Array(20),h.Dl=new l.to(20,null);for(let t=0;t<20;t++)if(1===e.vy){h._l[t]=e.vp,h.Cl[t]=e.vp;const s=e.Uy;if(s.length>0){const e=s.lastIndexOf(',');h.Dl[t]=this.E_(i,s.substring(0,e),parseInt(s.substring(e+1),10))}}h.km=new l.to(5,null);for(let t=0;t<5;t++){const i=e.Uy;h.km[t]=i,0===i.length&&(h.km[t]=null)}}if(h.type===c.Fl&&(h.fill=1===e.vy),h.type===c.Bl||h.type===c.Xg){h.Xl=1===e.vy;const t=e.vy;s&&(h.font=s[t]),h.jl=1===e.vy}if(h.type===c.Bl&&(h.text=e.Uy,h.Wl=e.Uy),h.type!==c.Xg&&h.type!==c.Fl&&h.type!==c.Bl||(h.Ul=e.Go),h.type!==c.Fl&&h.type!==c.Bl||(h.Hl=e.Go,h.Gl=e.Go),h.type===c.ql){const t=e.Uy;if(t.length>0){const s=t.lastIndexOf(',');h.Jl=this.E_(i,t.substring(0,s),parseInt(t.substring(s+1),10))}const s=e.Uy;if(s.length>0){const t=s.lastIndexOf(',');h.$l=this.E_(i,s.substring(0,t),parseInt(s.substring(t+1),10))}}if(h.type===c.Ql){const t=e.vy;0!==t&&(h.model=this.ha((t-1<<8)+e.vy));const i=e.vy;0!==i&&(h.T_=this.ha((i-1<<8)+e.vy)),h.el=e.vy,0===h.el?h.el=-1:h.el=(h.el-1<<8)+e.vy,h.nl=e.vy,0===h.nl?h.nl=-1:h.nl=(h.nl-1<<8)+e.vy,h.zoom=e.Cy,h.sa=e.Cy,h.ra=e.Cy}if(h.type===c.oa){h.El=new Int32Array(h.width*h.height),h.Tl=new Int32Array(h.width*h.height),h.Xl=1===e.vy;const t=e.vy;s&&(h.font=s[t]),h.jl=1===e.vy,h.Ul=e.Go,h.bl=e.vp,h.vl=e.vp,h.Sm=1===e.vy,h.km=new l.to(5,null);for(let t=0;t<5;t++){const i=e.Uy;h.km[t]=i,0===i.length&&(h.km[t]=null)}}h.Yl!==c.Pm&&h.type!==c.gl||(h.Zd=e.Uy,h.action=e.Uy,h.Yd=e.Cy),h.Yl!==c.Mm&&h.Yl!==c.Fm&&h.Yl!==c.Um&&h.Yl!==c.Zl||(h.Nm=e.Uy,0===h.Nm.length&&(h.Yl===c.Mm?h.Nm='Ok':h.Yl===c.Fm||h.Yl===c.Um?h.Nm='Select':h.Yl===c.Zl&&(h.Nm='Continue')))}this.Vg=null,this.bo=null};static E_=(t,i,s)=>{const h=o.Z.b_(i)<<8n|BigInt(s);if(this.Vg){const t=this.Vg.get(h);if(t)return t}let e;try{e=r.Z.Wa(t,i,s),this.Vg?.put(h,e)}catch(t){return null}return e};static ha=t=>{if(this.bo){const i=this.bo.get(BigInt(t));if(i)return i}const i=e.Z.model(t);return this.bo?.put(BigInt(t),i),i};id=-1;ed=-1;type=-1;Yl=-1;pl=0;width=0;height=0;Lm=-1;Xo=null;jo=null;scripts=null;scroll=0;hide=!1;draggable=!1;Sm=!1;Rm=!1;bl=0;vl=0;_l=null;Cl=null;Dl=null;km=null;fill=!1;Xl=!1;font=null;jl=!1;text=null;Wl=null;Ul=0;Hl=0;Gl=0;Jl=null;$l=null;model=null;T_=null;el=-1;nl=-1;zoom=0;sa=0;ra=0;Zd=null;action=null;Yd=-1;Nm=null;hl=null;ul=null;dl=null;x=0;y=0;Il=0;El=null;Tl=null;ol=0;rl=0;ha=(t,i,s)=>{let h=this.model;if(s&&(h=this.T_),!h)return null;if(-1===t&&-1===i&&!h.v_)return h;const n=e.Z.O_(h,!0,!0,!1);return-1===t&&-1===i||n.va(),-1!==t&&n.Oa(t),-1!==i&&n.Oa(i),n.La(64,768,-50,-10,-50,!0),n};L_(){if(this.ed===this.id)return this.x;let t=c.To[this.ed];if(!t.hl||!t.ul||!t.dl)return this.x;let i=t.hl.indexOf(this.id);if(-1===i)return this.x;let s=t.ul[i];for(;t.ed!==t.id;){const h=c.To[t.ed];h.hl&&h.ul&&h.dl&&(i=h.hl.indexOf(t.id),-1!==i&&(s+=h.ul[i])),t=h}return s}S_(){if(this.ed===this.id)return this.y;let t=c.To[this.ed];if(!t.hl||!t.ul||!t.dl)return this.y;let i=t.hl.indexOf(this.id);if(-1===i)return this.y;let s=t.dl[i];for(;t.ed!==t.id;){const h=c.To[t.ed];h.hl&&h.ul&&h.dl&&(i=h.hl.indexOf(t.id),-1!==i&&(s+=h.dl[i])),t=h}return s}outline(t){const i=this.L_(),s=this.S_();a.Z.wl(i,s,this.width,this.height,t)}move(t,i){if(this.ed===this.id)return;this.x=0,this.y=0;const s=c.To[this.ed];if(s.hl&&s.ul&&s.dl){const h=s.hl.indexOf(this.id);-1!==h&&(s.ul[h]=t,s.dl[h]=i)}}delete(){if(this.ed===this.id)return;const t=c.To[this.ed];if(t.hl&&t.ul&&t.dl){const i=t.hl.indexOf(this.id);-1!==i&&(t.hl.splice(i,1),t.ul.splice(i,1),t.dl.splice(i,1))}}}},8107:(t,i,s)=>{s.d(i,{r:()=>h});class h{id=-1;k_=null;R_=(t,i)=>{for(this.id=t;;){const s=i.vy;if(0===s)break;this.decode(t,s,i)}}}},8056:(t,i,s)=>{s.d(i,{Z:()=>n});var h=s(2383),e=s(8107);class n extends e.r{static count=0;static To=[];static Qa=t=>{const i=new h.Z(t.read('flo.dat'));this.count=i.Cy;for(let t=0;t<this.count;t++)this.To[t]=new n,this.To[t].R_(t,i)};static M_=(t,i,s)=>(s>179&&(i=i/2|0),s>192&&(i=i/2|0),s>217&&(i=i/2|0),s>243&&(i=i/2|0),((t/4|0)<<10)+((i/32|0)<<7)+(s/2|0));static x_=(t,i)=>-1===t?12345678:((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);static N_=(t,i)=>-2===t?12345678:-1===t?(i<0?i=0:i>127&&(i=127),127-i):((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);P_=0;texture=-1;D_=!1;F_=!0;name=null;U_=0;B_=0;G_=0;H_=0;W_=0;Y_=0;decode=(t,i,s)=>{1===i?(this.P_=s.Z_,this.setColor(this.P_)):2===i?this.texture=s.vy:3===i?this.D_=!0:5===i?this.F_=!1:6===i?this.name=s.Uy:console.log('Error unrecognised config code: ',i)};setColor=t=>{const i=(t>>16&255)/256,s=(t>>8&255)/256,h=(255&t)/256;let e=i;s<i&&(e=s),h<e&&(e=h);let r=i;s>i&&(r=s),h>r&&(r=h);let o=0,l=0;const a=(e+r)/2;e!==r&&(a<.5&&(l=(r-e)/(r+e)),a>=.5&&(l=(r-e)/(2-r-e)),i===r?o=(s-h)/(r-e):s===r?o=(h-i)/(r-e)+2:h===r&&(o=(i-s)/(r-e)+4)),o/=6,this.U_=256*o|0,this.B_=256*l|0,this.G_=256*a|0,this.B_<0?this.B_=0:this.B_>255&&(this.B_=255),this.G_<0?this.G_=0:this.G_>255&&(this.G_=255),this.H_=a>.5?(1-a)*l*512|0:a*l*512|0,this.H_<1&&(this.H_=1),this.W_=o*this.H_|0;let c=this.U_+(16*Math.random()|0)-8;c<0?c=0:c>255&&(c=255);let f=this.B_+(48*Math.random()|0)-24;f<0?f=0:f>255&&(f=255);let u=this.G_+(48*Math.random()|0)-24;u<0?u=0:u>255&&(u=255),this.Y_=n.M_(c,f,u)}}},8809:(t,i,s)=>{s.d(i,{Z:()=>o});var h=s(2383),e=s(8107),n=s(9178),r=s(9345);class o extends e.r{static count=0;static To=[];static Qa=t=>{const i=new h.Z(t.read('idk.dat'));this.count=i.Cy;for(let t=0;t<this.count;t++)this.To[t]=new o,this.To[t].R_(t,i)};type=-1;V_=null;X_=new Int32Array(5).fill(-1);z_=new Int32Array(6);j_=new Int32Array(6);disable=!1;decode=(t,i,s)=>{if(1===i)this.type=s.vy;else if(2===i){const t=s.vy;this.V_=new Int32Array(t);for(let i=0;i<t;i++)this.V_[i]=s.Cy}else if(3===i)this.disable=!0;else if(i>=40&&i<50)this.z_[i-40]=s.Cy;else if(i>=50&&i<60)this.j_[i-50]=s.Cy;else{if(!(i>=60&&i<70))throw new Error(`Unrecognized idk config code: ${i}`);this.X_[i-60]=s.Cy}};ha=()=>{if(!this.V_)return null;const t=new r.to(this.V_.length,null);for(let i=0;i<this.V_.length;i++)t[i]=n.Z.model(this.V_[i]);let i;i=1===t.length?t[0]:n.Z._a(t,t.length);for(let t=0;t<6&&0!==this.z_[t];t++)i?.Ca(this.z_[t],this.j_[t]);return i};Py=()=>{let t=0;const i=new r.to(5,null);for(let s=0;s<5;s++)-1!==this.X_[s]&&(i[t++]=n.Z.model(this.X_[s]));const s=n.Z._a(i,t);for(let t=0;t<6&&0!==this.z_[t];t++)s.Ca(this.z_[t],this.j_[t]);return s}}},7958:(t,i,s)=>{s.d(i,{Z:()=>c});var h=s(8107),e=s(2383),n=s(5542),r=s(9178),o=s(1908),l=s(5534),a=s(9345);class c extends h.r{static count=0;static cache=null;static K_=null;static q_=null;static J_=0;static jf=new n.Z(500);static Kf=new n.Z(30);static Qa=t=>{this.K_=new e.Z(t.read('loc.dat'));const i=new e.Z(t.read('loc.idx'));this.count=i.Cy,this.q_=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.q_[t]=s,s+=i.Cy;this.cache=new a.to(10,null);for(let t=0;t<10;t++)this.cache[t]=new c};static get=t=>{if(!this.cache||!this.q_||!this.K_)throw new Error('LocType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.index===t)return s}this.J_=(this.J_+1)%10;const i=this.cache[this.J_];return this.K_.Mc=this.q_[t],i.index=t,i.reset(),i.R_(t,this.K_),i.Q_||(i.Q_=new Int32Array(1)),-1===i.tC&&i.Q_&&(i.active=i.Q_.length>0&&i.Q_[0]===o.Z.kw.id,i.Hm&&(i.active=!0)),i};static _o=()=>{this.jf=null,this.Kf=null,this.q_=null,this.cache=null,this.K_=null};index=-1;V_=null;Q_=null;name=null;vd=null;z_=null;j_=null;width=1;length=1;ly=!0;uy=!0;active=!1;tC=-1;iC=!1;sC=!1;F_=!1;el=-1;hC=!1;eC=16;nC=0;rC=0;Hm=null;Uu=-1;Vu=-1;oC=!1;lC=!0;aC=128;cC=128;fC=128;xw=0;uC=0;dC=0;wC=0;yC=!1;decode=(t,i,s)=>{if(1===i){const t=s.vy;this.V_=new Int32Array(t),this.Q_=new Int32Array(t);for(let i=0;i<t;i++)this.V_[i]=s.Cy,this.Q_[i]=s.vy}else if(2===i)this.name=s.Uy;else if(3===i)this.vd=s.Uy;else if(14===i)this.width=s.vy;else if(15===i)this.length=s.vy;else if(17===i)this.ly=!1;else if(18===i)this.uy=!1;else if(19===i)this.tC=s.vy,1===this.tC&&(this.active=!0);else if(21===i)this.iC=!0;else if(22===i)this.sC=!0;else if(23===i)this.F_=!0;else if(24===i)this.el=s.Cy,65535===this.el&&(this.el=-1);else if(25===i)this.hC=!0;else if(28===i)this.eC=s.vy;else if(29===i)this.nC=s.Ty;else if(39===i)this.rC=s.Ty;else if(i>=30&&i<39)this.Hm||(this.Hm=new a.to(5,null)),this.Hm[i-30]=s.Uy,'hidden'===this.Hm[i-30]?.toLowerCase()&&(this.Hm[i-30]=null);else if(40===i){const t=s.vy;this.z_=new Uint16Array(t),this.j_=new Uint16Array(t);for(let i=0;i<t;i++)this.z_[i]=s.Cy,this.j_[i]=s.Cy}else 60===i?this.Uu=s.Cy:62===i?this.oC=!0:64===i?this.lC=!1:65===i?this.aC=s.Cy:66===i?this.cC=s.Cy:67===i?this.fC=s.Cy:68===i?this.Vu=s.Cy:69===i?this.xw=s.vy:70===i?this.uC=s.vp:71===i?this.dC=s.vp:72===i?this.wC=s.vp:73===i&&(this.yC=!0)};ha=(t,i,s,h,e,n,o)=>{if(!this.Q_)return null;let a=-1;for(let i=0;i<this.Q_.length;i++)if(this.Q_[i]===t){a=i;break}if(-1===a)return null;const f=BigInt(BigInt(this.index)<<6n)+BigInt(BigInt(a)<<3n)+BigInt(i)+BigInt(BigInt(o)+1n<<32n);let u=c.Kf?.get(f);if(u){if((this.iC||this.sC)&&(u=r.Z.pC(u,this.iC,this.sC)),this.iC){const t=(s+h+e+n)/4|0;for(let i=0;i<u.mC;i++){const r=u.AC[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(u.IC[i]+64)/128|0);u.gC[i]+=l-t}u._C()}return u}if(!this.V_)return null;if(a>=this.V_.length)return null;let d=this.V_[a];if(-1===d)return null;const w=this.oC!==i>3;w&&(d+=65536);let y=c.jf?.get(BigInt(d));y||(y=r.Z.model(65535&d),w&&y.CC(),c.jf?.put(BigInt(d),y));const p=128!==this.aC||128!==this.cC||128!==this.fC,m=0!==this.uC||0!==this.dC||0!==this.wC;let A=r.Z.O_(y,!this.z_,!this.hC,i===l.Z.ju&&-1===o&&!p&&!m);for(-1!==o&&(A.va(),A.Oa(o),A.EC=null,A.TC=null);i-- >0;)A.bC();if(this.z_&&this.j_)for(let t=0;t<this.z_.length;t++)A.Ca(this.z_[t],this.j_[t]);if(p&&A.scale(this.aC,this.cC,this.fC),m&&A.translate(this.dC,this.uC,this.wC),A.La(64+(255&this.nC),5*(255&this.rC)+768,-50,-10,-50,!this.sC),this.ly&&(A.vC=A.OC),c.Kf?.put(f,A),(this.iC||this.sC)&&(A=r.Z.pC(A,this.iC,this.sC)),this.iC){const t=(s+h+e+n)/4|0;for(let i=0;i<A.mC;i++){const r=A.AC[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(A.IC[i]+64)/128|0);A.gC[i]+=l-t}A._C()}return A};reset=()=>{this.V_=null,this.Q_=null,this.name=null,this.vd=null,this.z_=null,this.j_=null,this.width=1,this.length=1,this.ly=!0,this.uy=!0,this.active=!1,this.tC=-1,this.iC=!1,this.sC=!1,this.F_=!1,this.el=-1,this.eC=16,this.nC=0,this.rC=0,this.Hm=null,this.hC=!1,this.Uu=-1,this.Vu=-1,this.oC=!1,this.lC=!0,this.aC=128,this.cC=128,this.fC=128,this.xw=0,this.uC=0,this.dC=0,this.wC=0,this.yC=!1}}},2441:(t,i,s)=>{s.d(i,{Z:()=>l});var h=s(8107),e=s(2383),n=s(5542),r=s(9178),o=s(9345);class l extends h.r{static count=0;static cache=null;static K_=null;static q_=null;static J_=0;static bo=new n.Z(30);static Qa=t=>{this.K_=new e.Z(t.read('npc.dat'));const i=new e.Z(t.read('npc.idx'));this.count=i.Cy,this.q_=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.q_[t]=s,s+=i.Cy;this.cache=new o.to(20,null);for(let t=0;t<20;t++)this.cache[t]=new l};static get=t=>{if(!this.cache||!this.q_||!this.K_)throw new Error('LocType not loaded!!!');for(let i=0;i<20;i++){const s=this.cache[i];if(s&&s.index===t)return s}this.J_=(this.J_+1)%20;const i=this.cache[this.J_]=new l;return this.K_.Mc=this.q_[t],i.index=t,i.R_(t,this.K_),i};static _o=()=>{this.bo=null,this.q_=null,this.cache=null,this.K_=null};index=-1;name=null;vd=null;size=1;V_=null;X_=null;hC=!1;zA=-1;GA=-1;WA=-1;ZA=-1;XA=-1;LC=!1;z_=null;j_=null;Hm=null;SC=-1;kC=-1;RC=-1;ku=!0;Vm=-1;MC=128;xC=128;decode=(t,i,s)=>{if(1===i){const t=s.vy;this.V_=new Uint16Array(t);for(let i=0;i<t;i++)this.V_[i]=s.Cy}else if(2===i)this.name=s.Uy;else if(3===i)this.vd=s.Uy;else if(12===i)this.size=s.Ty;else if(13===i)this.zA=s.Cy;else if(14===i)this.GA=s.Cy;else if(16===i)this.hC=!0;else if(17===i)this.GA=s.Cy,this.WA=s.Cy,this.ZA=s.Cy,this.XA=s.Cy;else if(i>=30&&i<40)this.Hm||(this.Hm=new o.to(5,null)),this.Hm[i-30]=s.Uy,'hidden'===this.Hm[i-30]?.toLowerCase()&&(this.Hm[i-30]=null);else if(40===i){const t=s.vy;this.z_=new Uint16Array(t),this.j_=new Uint16Array(t);for(let i=0;i<t;i++)this.z_[i]=s.Cy,this.j_[i]=s.Cy}else if(60===i){const t=s.vy;this.X_=new Uint16Array(t);for(let i=0;i<t;i++)this.X_[i]=s.Cy}else 90===i?this.SC=s.Cy:91===i?this.kC=s.Cy:92===i?this.RC=s.Cy:93===i?this.ku=!1:95===i?this.Vm=s.Cy:97===i?this.MC=s.Cy:98===i&&(this.xC=s.Cy)};NC=(t,i,s)=>{let h=null,e=null;if(l.bo&&(e=l.bo.get(BigInt(this.index)),!e&&this.V_)){const t=new o.to(this.V_.length,null);for(let i=0;i<this.V_.length;i++)t[i]=r.Z.model(this.V_[i]);if(e=1===t.length?t[0]:r.Z._a(t,t.length),this.z_&&this.j_)for(let t=0;t<this.z_.length;t++)e?.Ca(this.z_[t],this.j_[t]);e?.va(),e?.La(64,850,-30,-50,-30,!0),e&&l.bo.put(BigInt(this.index),e)}return e?(h=r.Z.PC(e,!this.hC),-1!==t&&-1!==i?h.DC(t,i,s):-1!==t&&h.Oa(t),128===this.MC&&128===this.xC||h.scale(this.MC,this.xC,this.MC),h.FC(),h.EC=null,h.TC=null,1===this.size&&(h.UC=!0),h):null};Py=()=>{if(!this.X_)return null;const t=new o.to(this.X_.length,null);for(let i=0;i<this.X_.length;i++)t[i]=r.Z.model(this.X_[i]);let i;if(i=1===t.length?t[0]:r.Z._a(t,t.length),this.z_&&this.j_)for(let t=0;t<this.z_.length;t++)i?.Ca(this.z_[t],this.j_[t]);return i}}},1840:(t,i,s)=>{s.d(i,{Z:()=>u});var h=s(8107),e=s(2383),n=s(6542),r=s(5542),o=s(9178),l=s(8078),a=s(2991),c=s(312),f=s(9345);class u extends h.r{static count=0;static cache=null;static K_=null;static q_=null;static J_=0;static BC=!0;static bo=new r.Z(50);static qf=new r.Z(200);static Qa=(t,i)=>{this.BC=i,this.K_=new e.Z(t.read('obj.dat'));const s=new e.Z(t.read('obj.idx'));this.count=s.Cy,this.q_=new Int32Array(this.count);let h=2;for(let t=0;t<this.count;t++)this.q_[t]=h,h+=s.Cy;this.cache=new f.to(10,null);for(let t=0;t<10;t++)this.cache[t]=new u};static get=t=>{if(!this.cache||!this.q_||!this.K_)throw new Error('ObjType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.index===t)return s}this.J_=(this.J_+1)%10;const i=this.cache[this.J_];return this.K_.Mc=this.q_[t],i.index=t,i.reset(),i.R_(t,this.K_),-1!==i.GC&&i.HC(),!this.BC&&i.st&&(i.name='Members Object',i.vd="Login to a members' server to use this object.",i.Hm=null,i.km=null),i};static _o=()=>{this.bo=null,this.qf=null,this.q_=null,this.cache=null,this.K_=null};static Ol=(t,i)=>{if(u.qf){let s=u.qf.get(BigInt(t));if(s&&s.xu!==i&&-1!==s.xu&&(s.xy(),s=null),s)return s}let s=u.get(t);if(s.WC||(i=-1),s.WC&&s.YC&&i>1){let t=-1;for(let h=0;h<10;h++)i>=s.YC[h]&&0!==s.YC[h]&&(t=s.WC[h]);-1!==t&&(s=u.get(t))}const h=new n.Z(32,32),e=l.Z.ta,r=l.Z.ia,o=l.Z.sc,f=a.Z.tc,d=a.Z.ZC,w=a.Z.VC,y=a.Z.left,p=a.Z.right,m=a.Z.top,A=a.Z.bottom;l.Z.XC=!1,a.Z.bind(h.tc,32,32),a.Z.fillRect(0,0,32,32,c.Z.Nl),l.Z.yg();const I=s.Qw(1),g=l.Z.sin[s.Wp]*s.Zp>>16,_=l.Z.cos[s.Wp]*s.Zp>>16;I.na(0,s.Yp,s.zC,s.Wp,s.jC,g+(I.OC/2|0)+s.KC,_+s.KC);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.tc[t+32*i]&&(t>0&&h.tc[t+32*i-1]>1||i>0&&h.tc[t+32*(i-1)]>1||t<31&&h.tc[t+32*i+1]>1||i<31&&h.tc[t+32*(i+1)]>1)&&(h.tc[t+32*i]=1);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.tc[t+32*i]&&t>0&&i>0&&h.tc[t+32*(i-1)-1]>0&&(h.tc[t+32*i]=3153952);if(-1!==s.GC){const t=this.Ol(s.qC,10),i=t.Rl,h=t.xu;t.Rl=32,t.xu=32,t.$C(5,5,22,22),t.Rl=i,t.xu=h}return u.qf?.put(BigInt(t),h),a.Z.bind(f,d,w),a.Z.fl(y,m,p,A),l.Z.ta=e,l.Z.ia=r,l.Z.sc=o,l.Z.XC=!0,s.la?h.Rl=33:h.Rl=32,h.xu=i,h};index=-1;model=0;name=null;vd=null;z_=null;j_=null;Zp=2e3;Wp=0;Yp=0;zC=0;jC=0;KC=0;JC=!1;QC=-1;la=!1;$w=1;st=!1;Hm=null;km=null;tE=-1;iE=-1;sE=0;hE=-1;eE=-1;nE=0;rE=-1;oE=-1;lE=-1;aE=-1;cE=-1;fE=-1;WC=null;YC=null;qC=-1;GC=-1;decode=(t,i,s)=>{if(1===i)this.model=s.Cy;else if(2===i)this.name=s.Uy;else if(3===i)this.vd=s.Uy;else if(4===i)this.Zp=s.Cy;else if(5===i)this.Wp=s.Cy;else if(6===i)this.Yp=s.Cy;else if(7===i)this.jC=s.vp,this.jC>32767&&(this.jC-=65536);else if(8===i)this.KC=s.vp,this.KC>32767&&(this.KC-=65536);else if(9===i)this.JC=!0;else if(10===i)this.QC=s.Cy;else if(11===i)this.la=!0;else if(12===i)this.$w=s.Go;else if(16===i)this.st=!0;else if(23===i)this.tE=s.Cy,this.sE=s.Ty;else if(24===i)this.iE=s.Cy;else if(25===i)this.hE=s.Cy,this.nE=s.Ty;else if(26===i)this.eE=s.Cy;else if(i>=30&&i<35)this.Hm||(this.Hm=new f.to(5,null)),this.Hm[i-30]=s.Uy,'hidden'===this.Hm[i-30]?.toLowerCase()&&(this.Hm[i-30]=null);else if(i>=35&&i<40)this.km||(this.km=new f.to(5,null)),this.km[i-35]=s.Uy;else if(40===i){const t=s.vy;this.z_=new Uint16Array(t),this.j_=new Uint16Array(t);for(let i=0;i<t;i++)this.z_[i]=s.Cy,this.j_[i]=s.Cy}else 78===i?this.rE=s.Cy:79===i?this.oE=s.Cy:90===i?this.lE=s.Cy:91===i?this.cE=s.Cy:92===i?this.aE=s.Cy:93===i?this.fE=s.Cy:95===i?this.zC=s.Cy:97===i?this.qC=s.Cy:98===i?this.GC=s.Cy:i>=100&&i<110&&(this.WC&&this.YC||(this.WC=new Uint16Array(10),this.YC=new Uint16Array(10)),this.WC[i-100]=s.Cy,this.YC[i-100]=s.Cy)};uE=t=>{let i=this.tE;if(1===t&&(i=this.hE),-1===i)return null;let s=this.iE,h=this.rE;1===t&&(s=this.eE,h=this.oE);let e=o.Z.model(i);if(-1!==s){const t=o.Z.model(s);if(-1===h){const i=[e,t];e=o.Z._a(i,2)}else{const i=[e,t,o.Z.model(h)];e=o.Z._a(i,3)}}if(0===t&&0!==this.sE&&e.translate(this.sE,0,0),1===t&&0!==this.nE&&e.translate(this.nE,0,0),this.z_&&this.j_)for(let t=0;t<this.z_.length;t++)e.Ca(this.z_[t],this.j_[t]);return e};Py=t=>{let i=this.lE;if(1===t&&(i=this.cE),-1===i)return null;let s=this.aE;1===t&&(s=this.fE);let h=o.Z.model(i);if(-1!==s){const t=[h,o.Z.model(s)];h=o.Z._a(t,2)}if(this.z_&&this.j_)for(let t=0;t<this.z_.length;t++)h.Ca(this.z_[t],this.j_[t]);return h};Qw=t=>{if(this.WC&&this.YC&&t>1){let i=-1;for(let s=0;s<10;s++)t>=this.YC[s]&&0!==this.YC[s]&&(i=this.WC[s]);if(-1!==i)return u.get(i).Qw(1)}if(u.bo){const t=u.bo.get(BigInt(this.index));if(t)return t}const i=o.Z.model(this.model);if(this.z_&&this.j_)for(let t=0;t<this.z_.length;t++)i.Ca(this.z_[t],this.j_[t]);return i.La(64,768,-50,-10,-50,!0),i.UC=!0,u.bo?.put(BigInt(this.index),i),i};HC=()=>{const t=u.get(this.GC);this.model=t.model,this.Zp=t.Zp,this.Wp=t.Wp,this.Yp=t.Yp,this.zC=t.zC,this.jC=t.jC,this.KC=t.KC,this.z_=t.z_,this.j_=t.j_;const i=u.get(this.qC);this.name=i.name,this.st=i.st,this.$w=i.$w;let s='a';const h=(i.name||'').toLowerCase().charAt(0);'a'!==h&&'e'!==h&&'i'!==h&&'o'!==h&&'u'!==h||(s='an'),this.vd=`Swap this note at any bank for ${s} ${i.name}.`,this.la=!0};reset=()=>{this.model=0,this.name=null,this.vd=null,this.z_=null,this.j_=null,this.Zp=2e3,this.Wp=0,this.Yp=0,this.zC=0,this.jC=0,this.KC=0,this.JC=!1,this.QC=-1,this.la=!1,this.$w=1,this.st=!1,this.Hm=null,this.km=null,this.tE=-1,this.iE=-1,this.sE=0,this.hE=-1,this.eE=-1,this.nE=0,this.rE=-1,this.oE=-1,this.lE=-1,this.aE=-1,this.cE=-1,this.fE=-1,this.WC=null,this.YC=null,this.qC=-1,this.GC=-1}}},8067:(t,i,s)=>{s.d(i,{Z:()=>r});var h=s(8107),e=s(2383),n=s(8762);class r extends h.r{static count=0;static To=[];static Qa=t=>{const i=new e.Z(t.read('seq.dat'));this.count=i.Cy;for(let t=0;t<this.count;t++)this.To[t]=new r,this.To[t].R_(t,i),0===this.To[t].ll&&(this.To[t].ll=1,this.To[t].frames=new Int16Array(1),this.To[t].frames[0]=-1,this.To[t].ea=new Int16Array(1),this.To[t].ea[0]=-1,this.To[t].delay=new Int16Array(1),this.To[t].delay[0]=-1)};ll=0;frames=null;ea=null;delay=null;al=-1;xI=null;MI=!1;priority=5;dE=-1;wE=-1;RI=99;duration=0;decode=(t,i,s)=>{if(1===i){this.ll=s.vy,this.frames=new Int16Array(this.ll),this.ea=new Int16Array(this.ll),this.delay=new Int16Array(this.ll);for(let t=0;t<this.ll;t++)this.frames[t]=s.Cy,this.ea[t]=s.Cy,65535===this.ea[t]&&(this.ea[t]=-1),this.delay[t]=s.Cy,0===this.delay[t]&&(this.delay[t]=n.Z.To[this.frames[t]].delay),0===this.delay[t]&&(this.delay[t]=1),this.duration+=this.delay[t]}else if(2===i)this.al=s.Cy;else if(3===i){const t=s.vy;this.xI=new Int32Array(t+1);for(let i=0;i<t;i++)this.xI[i]=s.vy;this.xI[t]=9999999}else if(4===i)this.MI=!0;else if(5===i)this.priority=s.vy;else if(6===i)this.dE=s.Cy;else if(7===i)this.wE=s.Cy;else{if(8!==i)throw new Error(`Unrecognized seq config code: ${i}`);this.RI=s.vy}}}},551:(t,i,s)=>{s.d(i,{Z:()=>l});var h=s(8107),e=s(2383),n=s(8067),r=s(9178),o=s(5542);class l extends h.r{static count=0;static To=[];static bo=new o.Z(30);static Qa=t=>{const i=new e.Z(t.read('spotanim.dat'));this.count=i.Cy;for(let t=0;t<this.count;t++)this.To[t]=new l,this.To[t].index=t,this.To[t].R_(t,i)};index=0;model=0;el=-1;mI=null;hC=!1;z_=new Uint16Array(6);j_=new Uint16Array(6);MC=128;xC=128;orientation=0;nC=0;rC=0;decode=(t,i,s)=>{if(1===i)this.model=s.Cy;else if(2===i)this.el=s.Cy,n.Z.To&&(this.mI=n.Z.To[this.el]);else if(3===i)this.hC=!0;else if(4===i)this.MC=s.Cy;else if(5===i)this.xC=s.Cy;else if(6===i)this.orientation=s.Cy;else if(7===i)this.nC=s.vy;else if(8===i)this.rC=s.vy;else if(i>=40&&i<50)this.z_[i-40]=s.Cy;else{if(!(i>=50&&i<60))throw new Error(`Unrecognized spotanim config code: ${i}`);this.j_[i-50]=s.Cy}};ha=()=>{let t=l.bo?.get(BigInt(this.index));if(t)return t;t=r.Z.model(this.model);for(let i=0;i<6;i++)0!==this.z_[0]&&t.Ca(this.z_[i],this.j_[i]);return l.bo?.put(BigInt(this.index),t),t}}},1089:(t,i,s)=>{s.d(i,{Z:()=>n});var h=s(8107),e=s(2383);class n extends h.r{static count=0;static To=[];static yE=[];static pE=0;static Qa=t=>{const i=new e.Z(t.read('varp.dat'));this.count=i.Cy;for(let t=0;t<this.count;t++)this.To[t]=new n,this.To[t].R_(t,i)};QC=null;mE=0;AE=0;IE=!1;gE=!0;Cm=0;_E=0;CE=!1;EE=!1;decode(t,i,s){if(1===i)this.mE=s.vy;else if(2===i)this.AE=s.vy;else if(3===i)this.IE=!0,n.yE[n.pE++]=t;else if(4===i)this.gE=!1;else if(5===i)this.Cm=s.Cy;else if(6===i)this.CE=!0;else if(7===i)this._E=s.Go;else if(8===i)this.EE=!0;else{if(10!==i)throw new Error(`Error unrecognised config code: ${i}`);this.QC=s.Uy}}}},8603:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static OPEN=0;static TE=1;static bE=2;static vE=4;static OE=8;static LE=h.TE<<4;static SE=h.bE<<4;static kE=h.vE<<4;static RE=h.OE<<4;static ME=256;static xE=512;static NE=1024;static PE=2048;static DE=4096;static FE=h.xE<<4;static UE=h.NE<<4;static BE=h.PE<<4;static GE=h.DE<<4;static HE=h.ME<<9;static WE=524288;static YE=2097152;static ZE=h.YE|h.WE;static VE=h.ME|h.ZE;static Hu=h.bE|h.VE;static Bu=h.OE|h.VE;static $m=h.bE|h.vE|h.Bu;static Wu=h.SE|h.VE;static Qm=h.OE|h.LE|h.Wu;static Gu=h.RE|h.VE;static Jm=h.TE|h.bE|h.Gu;static tA=h.SE|h.kE|h.Gu;static XE=16777215}},3693:(t,i,s)=>{s.d(i,{Z:()=>o});var h=s(8603),e=s(5534),n=s(1908),r=s(6439);class o{static Rn=4;static Zn=104;static index=(t,i)=>t*o.Zn+i;offsetX;zE;sizeX;sizeZ;flags;constructor(){this.offsetX=0,this.zE=0,this.sizeX=o.Zn,this.sizeZ=o.Zn,this.flags=new Int32Array(this.sizeX*this.sizeZ),this.reset()}reset=()=>{for(let t=0;t<this.sizeX;t++)for(let i=0;i<this.sizeZ;i++){const s=o.index(t,i);0===t||0===i||t===this.sizeX-1||i===this.sizeZ-1?this.flags[s]=h.Z.XE:this.flags[s]=h.Z.OPEN}};jE=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.zE)]|=h.Z.YE};my=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.zE)]&=~h.Z.YE};iy=(t,i,s,n,r,o)=>{let l=h.Z.ME;o&&(l|=h.Z.HE);const a=t-this.offsetX,c=i-this.zE;if(r===e.Z.Ku||r===e.Z.$u){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.add(t,i,l)};yy=(t,i,s,n,r,o)=>{let l=h.Z.ME;o&&(l|=h.Z.HE);const a=t-this.offsetX,c=i-this.zE;if(r===e.Z.Ku||r===e.Z.$u){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.remove(t,i,l)};KE=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.zE,c=o?h.Z.GE:h.Z.RE,f=o?h.Z.DE:h.Z.OE,u=o?h.Z.NE:h.Z.bE,d=o?h.Z.UE:h.Z.SE,w=o?h.Z.xE:h.Z.TE,y=o?h.Z.FE:h.Z.LE,p=o?h.Z.PE:h.Z.vE,m=o?h.Z.BE:h.Z.kE;s===n.Z.Xu.id?r===e.Z.ju?(this.add(l,a,c),this.add(l-1,a,f)):r===e.Z.Ku?(this.add(l,a,u),this.add(l,a+1,d)):r===e.Z.qu?(this.add(l,a,f),this.add(l+1,a,c)):r===e.Z.$u&&(this.add(l,a,d),this.add(l,a-1,u)):s===n.Z.qE.id||s===n.Z.Ju.id?r===e.Z.ju?(this.add(l,a,w),this.add(l-1,a+1,y)):r===e.Z.Ku?(this.add(l,a,p),this.add(l+1,a+1,m)):r===e.Z.qu?(this.add(l,a,y),this.add(l+1,a-1,w)):r===e.Z.$u&&(this.add(l,a,m),this.add(l-1,a-1,p)):s===n.Z.zu.id&&(r===e.Z.ju?(this.add(l,a,u|c),this.add(l-1,a,f),this.add(l,a+1,d)):r===e.Z.Ku?(this.add(l,a,u|f),this.add(l,a+1,d),this.add(l+1,a,c)):r===e.Z.qu?(this.add(l,a,d|f),this.add(l+1,a,c),this.add(l,a-1,u)):r===e.Z.$u&&(this.add(l,a,d|c),this.add(l,a-1,u),this.add(l-1,a,f))),o&&this.KE(t,i,s,r,!1)};oy=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.zE,c=o?h.Z.GE:h.Z.RE,f=o?h.Z.DE:h.Z.OE,u=o?h.Z.NE:h.Z.bE,d=o?h.Z.UE:h.Z.SE,w=o?h.Z.xE:h.Z.TE,y=o?h.Z.FE:h.Z.LE,p=o?h.Z.PE:h.Z.vE,m=o?h.Z.BE:h.Z.kE;s===n.Z.Xu.id?r===e.Z.ju?(this.remove(l,a,c),this.remove(l-1,a,f)):r===e.Z.Ku?(this.remove(l,a,u),this.remove(l,a+1,d)):r===e.Z.qu?(this.remove(l,a,f),this.remove(l+1,a,c)):r===e.Z.$u&&(this.remove(l,a,d),this.remove(l,a-1,u)):s===n.Z.qE.id||s===n.Z.Ju.id?r===e.Z.ju?(this.remove(l,a,w),this.remove(l-1,a+1,y)):r===e.Z.Ku?(this.remove(l,a,p),this.remove(l+1,a+1,m)):r===e.Z.qu?(this.remove(l,a,y),this.remove(l+1,a-1,w)):r===e.Z.$u&&(this.remove(l,a,m),this.remove(l-1,a-1,p)):s===n.Z.zu.id&&(r===e.Z.ju?(this.remove(l,a,u|c),this.remove(l-1,a,f),this.remove(l,a+1,d)):r===e.Z.Ku?(this.remove(l,a,u|f),this.remove(l,a+1,d),this.remove(l+1,a,c)):r===e.Z.qu?(this.remove(l,a,d|f),this.remove(l+1,a,c),this.remove(l,a-1,u)):r===e.Z.$u&&(this.remove(l,a,d|c),this.remove(l,a-1,u),this.remove(l-1,a,f))),o&&this.oy(t,i,s,r,!1)};jm=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.zE,u=s-this.offsetX,d=r-this.zE,w=o.index(c,f);if(l===n.Z.Xu.id){if(a===e.Z.ju){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.Z.Wu)===h.Z.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.Z.Hu)===h.Z.OPEN)return!0}else if(a===e.Z.Ku){if(c===u&&f===d+1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.Z.Bu)===h.Z.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.Z.Gu)===h.Z.OPEN)return!0}else if(a===e.Z.qu){if(c===u+1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.Z.Wu)===h.Z.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.Z.Hu)===h.Z.OPEN)return!0}else if(a===e.Z.$u){if(c===u&&f===d-1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.Z.Bu)===h.Z.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.Z.Gu)===h.Z.OPEN)return!0}}else if(l===n.Z.zu.id){if(a===e.Z.ju){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.Z.Gu)===h.Z.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.Z.Hu)===h.Z.OPEN)return!0}else if(a===e.Z.Ku){if(c===u-1&&f===d&&(this.flags[w]&h.Z.Bu)===h.Z.OPEN)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.Z.Hu)===h.Z.OPEN)return!0}else if(a===e.Z.qu){if(c===u-1&&f===d&&(this.flags[w]&h.Z.Bu)===h.Z.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.Z.Wu)===h.Z.OPEN)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1)return!0}else if(a===e.Z.$u){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.Z.Wu)===h.Z.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.Z.Gu)===h.Z.OPEN)return!0;if(c===u&&f===d-1)return!0}}else if(l===n.Z.td.id){if(c===u&&f===d+1&&(this.flags[w]&h.Z.SE)===h.Z.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.Z.bE)===h.Z.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.Z.OE)===h.Z.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.Z.RE)===h.Z.OPEN)return!0}return!1};Km=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.zE,u=s-this.offsetX,d=r-this.zE,w=o.index(c,f);if(l===n.Z.$E.id||l===n.Z.JE.id){if(l===n.Z.JE.id&&(a=a+2&3),a===e.Z.ju){if(c===u+1&&f===d&&(this.flags[w]&h.Z.RE)===h.Z.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.Z.bE)===h.Z.OPEN)return!0}else if(a===e.Z.Ku){if(c===u-1&&f===d&&(this.flags[w]&h.Z.OE)===h.Z.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.Z.bE)===h.Z.OPEN)return!0}else if(a===e.Z.qu){if(c===u-1&&f===d&&(this.flags[w]&h.Z.OE)===h.Z.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.Z.SE)===h.Z.OPEN)return!0}else if(a===e.Z.$u){if(c===u+1&&f===d&&(this.flags[w]&h.Z.RE)===h.Z.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.Z.SE)===h.Z.OPEN)return!0}}else if(l===n.Z.QE.id){if(c===u&&f===d+1&&(this.flags[w]&h.Z.SE)===h.Z.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.Z.bE)===h.Z.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.Z.OE)===h.Z.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.Z.RE)===h.Z.OPEN)return!0}return!1};qm=(t,i,s,e,n,l,a)=>{const c=s+n-1,f=e+l-1,u=o.index(t-this.offsetX,i-this.zE);return t>=s&&t<=c&&i>=e&&i<=f||(t===s-1&&i>=e&&i<=f&&(this.flags[u]&h.Z.OE)===h.Z.OPEN&&(a&r.Z.ju)===h.Z.OPEN||(t===c+1&&i>=e&&i<=f&&(this.flags[u]&h.Z.RE)===h.Z.OPEN&&(a&r.Z.qu)===h.Z.OPEN||(i===e-1&&t>=s&&t<=c&&(this.flags[u]&h.Z.bE)===h.Z.OPEN&&(a&r.Z.$u)===h.Z.OPEN||i===f+1&&t>=s&&t<=c&&(this.flags[u]&h.Z.SE)===h.Z.OPEN&&(a&r.Z.Ku)===h.Z.OPEN)))};add=(t,i,s)=>{this.flags[o.index(t,i)]|=s};remove=(t,i,s)=>{this.flags[o.index(t,i)]&=h.Z.XE-s}}},6439:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static Ku=1;static qu=2;static $u=4;static ju=8;static tT=h.ju|h.$u;static iT=h.ju|h.Ku;static sT=h.qu|h.$u;static hT=h.qu|h.Ku}},5534:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static ju=0;static Ku=1;static qu=2;static $u=3}},3714:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static sy=0;static hy=1;static ny=2;static Mw=3}},1908:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(3714);class e{static Xu=new e(0,h.Z.sy);static qE=new e(1,h.Z.sy);static zu=new e(2,h.Z.sy);static Ju=new e(3,h.Z.sy);static _I=new e(4,h.Z.hy);static zm=new e(5,h.Z.hy);static $E=new e(6,h.Z.hy);static JE=new e(7,h.Z.hy);static QE=new e(8,h.Z.hy);static td=new e(9,h.Z.ny);static kw=new e(10,h.Z.ny);static Rw=new e(11,h.Z.ny);static eT=new e(12,h.Z.ny);static nT=new e(13,h.Z.ny);static rT=new e(14,h.Z.ny);static oT=new e(15,h.Z.ny);static lT=new e(16,h.Z.ny);static aT=new e(17,h.Z.ny);static cT=new e(18,h.Z.ny);static fT=new e(19,h.Z.ny);static uT=new e(20,h.Z.ny);static dT=new e(21,h.Z.ny);static Mw=new e(22,h.Z.Mw);static values(){return[this.Xu,this.qE,this.aT,this.oT,this.zu,this.rT,this.td,this.Ju,this.Mw,this.eT,this.Rw,this.$E,this.uT,this.kw,this.zm,this.nT,this.JE,this._I,this.lT,this.QE,this.fT,this.dT,this.cT]}static of(t){if(t>=0&&t<this.values().length)return this.values()[t];throw Error('shape not found')}id;ed;constructor(t,i){this.id=t,this.ed=i}}},3909:(t,i,s)=>{s.d(i,{Z:()=>p});var h=s(3693),e=s(8056),n=s(2383),r=s(8078),o=s(7221),l=s(7958),a=s(682),c=s(8067),f=s(1908),u=s(5534),d=s(312),w=s(9190),y=s(9345);class p{static wT=Int8Array.of(1,2,4,8);static yT=Uint8Array.of(16,32,64,128);static pT=Int8Array.of(1,0,-1,0);static mT=Int8Array.of(0,-1,0,1);static AT=(17*Math.random()|0)-8;static IT=(33*Math.random()|0)-16;static ht=!0;static lm=0;static gT=!1;static _T=(t,i)=>{let s=this.CT(t+45365,i+91923,4)+(this.CT(t+10294,i+37821,2)-128>>1)+(this.CT(t,i,1)-128>>2)-128;return s=35+(.3*s|0),s<10?s=10:s>60&&(s=60),s};static CT=(t,i,s)=>{const h=t/s|0,e=t&s-1,n=i/s|0,r=i&s-1,o=this.ET(h,n),l=this.ET(h+1,n),a=this.ET(h,n+1),c=this.ET(h+1,n+1),f=this.TT(o,l,e,s),u=this.TT(a,c,e,s);return this.TT(f,u,r,s)};static TT=(t,i,s,h)=>{const e=65536-r.Z.cos[1024*s/h|0]>>1;return(t*(65536-e)>>16)+(i*e>>16)};static ET=(t,i)=>((this.bT(t-1,i-1)+this.bT(t+1,i-1)+this.bT(t-1,i+1)+this.bT(t+1,i+1))/16|0)+((this.bT(t-1,i)+this.bT(t+1,i)+this.bT(t,i-1)+this.bT(t,i+1))/8|0)+(this.bT(t,i)/4|0);static bT=(t,i)=>{const s=t+57*i,h=BigInt(s<<13^s);return 255&Number((h*(h*h*15731n+789221n)+1376312589n&0x7fffffffn)>>19n)};static iy=(t,i,s,h,e,n,r,o,d,w,y)=>{const m=e[y][i][s],A=e[y][i+1][s],I=e[y][i+1][s+1],g=e[y][i][s+1],_=m+A+I+g>>2,C=l.Z.get(o);let E=i+(s<<7)+(o<<14)+1073741824|0;C.active||(E+=-2147483648),E|=0;const T=((w<<6)+d|0)<<24>>24;if(d===f.Z.Mw.id)h?.vT(C.ha(f.Z.Mw.id,w,m,A,I,g,-1),t,i,s,_,E,T),C.ly&&C.active&&r.jE(i,s),-1!==C.el&&n.FI(new a.Z(o,t,3,i,s,c.Z.To[C.el],!0));else if(d===f.Z.kw.id||d===f.Z.Rw.id){const e=C.ha(f.Z.kw.id,w,m,A,I,g,-1);if(e){let n,r,o=0;d===f.Z.Rw.id&&(o+=256),w===u.Z.Ku||w===u.Z.$u?(n=C.length,r=C.width):(n=C.width,r=C.length),h?.iy(t,i,s,_,e,null,E,T,n,r,o)}C.ly&&r.iy(i,s,C.width,C.length,w,C.uy),-1!==C.el&&n.FI(new a.Z(o,t,2,i,s,c.Z.To[C.el],!0))}else if(d>=f.Z.eT.id)h?.iy(t,i,s,_,C.ha(d,w,m,A,I,g,-1),null,E,T,1,1,0),C.ly&&r.iy(i,s,C.width,C.length,w,C.uy),-1!==C.el&&n.FI(new a.Z(o,t,2,i,s,c.Z.To[C.el],!0));else if(d===f.Z.Xu.id)h?.KE(t,i,s,_,p.wT[w],0,C.ha(f.Z.Xu.id,w,m,A,I,g,-1),null,E,T),C.ly&&r.KE(i,s,d,w,C.uy),-1!==C.el&&n.FI(new a.Z(o,t,0,i,s,c.Z.To[C.el],!0));else if(d===f.Z.qE.id)h?.KE(t,i,s,_,p.yT[w],0,C.ha(f.Z.qE.id,w,m,A,I,g,-1),null,E,T),C.ly&&r.KE(i,s,d,w,C.uy),-1!==C.el&&n.FI(new a.Z(o,t,0,i,s,c.Z.To[C.el],!0));else if(d===f.Z.zu.id){const e=w+1&3;h?.KE(t,i,s,_,p.wT[w],p.wT[e],C.ha(f.Z.zu.id,w+4,m,A,I,g,-1),C.ha(f.Z.zu.id,e,m,A,I,g,-1),E,T),C.ly&&r.KE(i,s,d,w,C.uy),-1!==C.el&&n.FI(new a.Z(o,t,0,i,s,c.Z.To[C.el],!0))}else if(d===f.Z.Ju.id)h?.KE(t,i,s,_,p.yT[w],0,C.ha(f.Z.Ju.id,w,m,A,I,g,-1),null,E,T),C.ly&&r.KE(i,s,d,w,C.uy),-1!==C.el&&n.FI(new a.Z(o,t,0,i,s,c.Z.To[C.el],!0));else if(d===f.Z.td.id)h?.iy(t,i,s,_,C.ha(d,w,m,A,I,g,-1),null,E,T,1,1,0),C.ly&&r.iy(i,s,C.width,C.length,w,C.uy),-1!==C.el&&n.FI(new a.Z(o,t,2,i,s,c.Z.To[C.el],!0));else if(d===f.Z._I.id)h?.OT(t,i,s,_,0,0,E,C.ha(f.Z._I.id,u.Z.ju,m,A,I,g,-1),T,512*w,p.wT[w]),-1!==C.el&&n.FI(new a.Z(o,t,1,i,s,c.Z.To[C.el],!0));else if(d===f.Z.zm.id){let e=16;if(h){const n=h.Yu(t,i,s);n>0&&(e=l.Z.get(n>>14&32767).eC)}h?.OT(t,i,s,_,p.pT[w]*e,p.mT[w]*e,E,C.ha(f.Z._I.id,u.Z.ju,m,A,I,g,-1),T,512*w,p.wT[w]),-1!==C.el&&n.FI(new a.Z(o,t,1,i,s,c.Z.To[C.el],!0))}else d===f.Z.$E.id?(h?.OT(t,i,s,_,0,0,E,C.ha(f.Z._I.id,u.Z.ju,m,A,I,g,-1),T,w,256),-1!==C.el&&n.FI(new a.Z(o,t,1,i,s,c.Z.To[C.el],!0))):d===f.Z.JE.id?(h?.OT(t,i,s,_,0,0,E,C.ha(f.Z._I.id,u.Z.ju,m,A,I,g,-1),T,w,512),-1!==C.el&&n.FI(new a.Z(o,t,1,i,s,c.Z.To[C.el],!0))):d===f.Z.QE.id&&(h?.OT(t,i,s,_,0,0,E,C.ha(f.Z._I.id,u.Z.ju,m,A,I,g,-1),T,w,768),-1!==C.el&&n.FI(new a.Z(o,t,1,i,s,c.Z.To[C.el],!0)))};fI;uI;Gn;Hn;LT;ST;kT;RT;MT;xT;NT;PT;DT;FT;UT;BT;constructor(t,i,s,e){this.fI=t,this.uI=i,this.Gn=s,this.Hn=e,this.LT=new y.Va(h.Z.Rn,t,i),this.ST=new y.Va(h.Z.Rn,t,i),this.kT=new y.Va(h.Z.Rn,t,i),this.RT=new y.Va(h.Z.Rn,t,i),this.BT=new y.Xa(h.Z.Rn,t+1,i+1),this.MT=new y.Va(h.Z.Rn,t+1,i+1),this.xT=new y.Yn(t+1,i+1),this.NT=new Int32Array(i),this.PT=new Int32Array(i),this.DT=new Int32Array(i),this.FT=new Int32Array(i),this.UT=new Int32Array(i)}pm=(t,i)=>{for(let t=0;t<h.Z.Rn;t++)for(let s=0;s<h.Z.Zn;s++)for(let e=0;e<h.Z.Zn;e++)if(1==(1&this.Hn[t][s][e])){let h=t;2==(2&this.Hn[1][s][e])&&h--,h>=0&&i[h]?.jE(s,e)}p.AT+=(5*Math.random()|0)-2,p.AT<-8?p.AT=-8:p.AT>8&&(p.AT=8),p.IT+=(5*Math.random()|0)-2,p.IT<-16?p.IT=-16:p.IT>16&&(p.IT=16);for(let i=0;i<h.Z.Rn;i++){const s=this.MT[i],h=96,n=-50,o=-10,l=-50,a=768*(0|Math.sqrt(n*n+o*o+l*l))>>8;for(let t=1;t<this.uI-1;t++)for(let e=1;e<this.fI-1;e++){const r=this.Gn[i][e+1][t]-this.Gn[i][e-1][t],c=this.Gn[i][e][t+1]-this.Gn[i][e][t-1],f=0|Math.sqrt(r*r+c*c+65536),u=h+((n*((r<<8)/f|0)+o*(65536/f|0)+l*((c<<8)/f|0))/a|0),d=(s[e-1][t]>>2)+(s[e+1][t]>>3)+(s[e][t-1]>>2)+(s[e][t+1]>>3)+(s[e][t]>>1);this.xT[e][t]=u-d}for(let t=0;t<this.uI;t++)this.NT[t]=0,this.PT[t]=0,this.DT[t]=0,this.FT[t]=0,this.UT[t]=0;for(let s=-5;s<this.fI+5;s++){for(let t=0;t<this.uI;t++){const h=s+5;let n;if(h>=0&&h<this.fI){const s=255&this.LT[i][h][t];if(s>0){const i=e.Z.To[s-1];this.NT[t]+=i.W_,this.PT[t]+=i.B_,this.DT[t]+=i.G_,this.FT[t]+=i.H_,n=this.UT[t]++}}const r=s-5;if(r>=0&&r<this.fI){const s=255&this.LT[i][r][t];if(s>0){const i=e.Z.To[s-1];this.NT[t]-=i.W_,this.PT[t]-=i.B_,this.DT[t]-=i.G_,this.FT[t]-=i.H_,n=this.UT[t]--}}}if(s>=1&&s<this.fI-1){let h=0,n=0,o=0,l=0,a=0;for(let c=-5;c<this.uI+5;c++){const f=c+5;f>=0&&f<this.uI&&(h+=this.NT[f],n+=this.PT[f],o+=this.DT[f],l+=this.FT[f],a+=this.UT[f]);const y=c-5;if(y>=0&&y<this.uI&&(h-=this.NT[y],n-=this.PT[y],o-=this.DT[y],l-=this.FT[y],a-=this.UT[y]),c>=1&&c<this.uI-1&&(!p.ht||0==(16&this.Hn[i][s][c])&&this.GT(i,s,c)===p.lm)){const f=255&this.LT[i][s][c],y=255&this.ST[i][s][c];if(f>0||y>0){const m=this.Gn[i][s][c],A=this.Gn[i][s+1][c],I=this.Gn[i][s+1][c+1],g=this.Gn[i][s][c+1],_=this.xT[s][c],C=this.xT[s+1][c],E=this.xT[s+1][c+1],T=this.xT[s][c+1];let b=-1,v=-1;if(f>0){const t=256*h/l|0,i=n/a|0;let s=o/a|0;b=e.Z.M_(t,i,s);const r=t+p.AT&255;s+=p.IT,s<0?s=0:s>255&&(s=255),v=e.Z.M_(r,i,s)}if(i>0){let t=0!==f||this.kT[i][s][c]===w.Z.HT;y>0&&!e.Z.To[y-1].F_&&(t=!1),t&&m===A&&m===I&&m===g&&(this.BT[i][s][c]|=2340)}let O=0;if(-1!==b&&(O=r.Z.palette[e.Z.x_(v,96)]),0===y)t?.WT(i,s,c,w.Z.HT,u.Z.ju,-1,m,A,I,g,e.Z.x_(b,_),e.Z.x_(b,C),e.Z.x_(b,E),e.Z.x_(b,T),d.Z.Nl,d.Z.Nl,d.Z.Nl,d.Z.Nl,O,d.Z.Nl);else{const h=this.kT[i][s][c]+1,n=this.RT[i][s][c],o=e.Z.To[y-1];let l,a,f=o.texture;f>=0?(a=r.Z.YT(f),l=-1):o.P_===d.Z.Cc?(a=0,l=-2,f=-1):(l=e.Z.M_(o.U_,o.B_,o.G_),a=r.Z.palette[e.Z.N_(o.Y_,96)]),t?.WT(i,s,c,h,n,f,m,A,I,g,e.Z.x_(b,_),e.Z.x_(b,C),e.Z.x_(b,E),e.Z.x_(b,T),e.Z.N_(l,_),e.Z.N_(l,C),e.Z.N_(l,E),e.Z.N_(l,T),O,a)}}}}}}for(let s=1;s<this.uI-1;s++)for(let h=1;h<this.fI-1;h++)t?.ZT(i,h,s,this.GT(i,h,s))}p.gT||t?.VT(64,768,-50,-10,-50);for(let i=0;i<this.fI;i++)for(let s=0;s<this.uI;s++)2==(2&this.Hn[1][i][s])&&t?.XT(i,s);if(!p.gT){let t=1,i=2,s=4;for(let e=0;e<h.Z.Rn;e++){e>0&&(t<<=3,i<<=3,s<<=3);for(let h=0;h<=e;h++)for(let n=0;n<=this.uI;n++)for(let r=0;r<=this.fI;r++){if(0!=(this.BT[h][r][n]&t)){let i=n,s=n,l=h,a=h;for(;i>0&&0!=(this.BT[h][r][i-1]&t);)i--;for(;s<this.uI&&0!=(this.BT[h][r][s+1]&t);)s++;t:for(;l>0;){for(let h=i;h<=s;h++)if(0==(this.BT[l-1][r][h]&t))break t;l--}t:for(;a<e;){for(let h=i;h<=s;h++)if(0==(this.BT[a+1][r][h]&t))break t;a++}if((a+1-l)*(s+1-i)>=8){const h=this.Gn[a][r][i]-240,n=this.Gn[l][r][i];o.Z.zT(e,1,128*r,h,128*i,128*r,n,128*s+128);for(let h=l;h<=a;h++)for(let e=i;e<=s;e++)this.BT[h][r][e]&=~t}}if(0!=(this.BT[h][r][n]&i)){let t=r,s=r,l=h,a=h;for(;t>0&&0!=(this.BT[h][t-1][n]&i);)t--;for(;s<this.fI&&0!=(this.BT[h][s+1][n]&i);)s++;t:for(;l>0;){for(let h=t;h<=s;h++)if(0==(this.BT[l-1][h][n]&i))break t;l--}t:for(;a<e;){for(let h=t;h<=s;h++)if(0==(this.BT[a+1][h][n]&i))break t;a++}if((a+1-l)*(s+1-t)>=8){const h=this.Gn[a][t][n]-240,r=this.Gn[l][t][n];o.Z.zT(e,2,128*t,h,128*n,128*s+128,r,128*n);for(let h=l;h<=a;h++)for(let e=t;e<=s;e++)this.BT[h][e][n]&=~i}}if(0!=(this.BT[h][r][n]&s)){let t=r,i=r,l=n,a=n;for(;l>0&&0!=(this.BT[h][r][l-1]&s);)l--;for(;a<this.uI&&0!=(this.BT[h][r][a+1]&s);)a++;t:for(;t>0;){for(let i=l;i<=a;i++)if(0==(this.BT[h][t-1][i]&s))break t;t--}t:for(;i<this.fI;){for(let t=l;t<=a;t++)if(0==(this.BT[h][i+1][t]&s))break t;i++}if((i+1-t)*(a+1-l)>=4){const n=this.Gn[h][t][l];o.Z.zT(e,4,128*t,n,128*l,128*i+128,n,128*a+128);for(let e=t;e<=i;e++)for(let t=l;t<=a;t++)this.BT[h][e][t]&=~s}}}}}};wm=(t,i,s,n)=>{let r=0;for(let t=0;t<e.Z.count;t++)if('water'===e.Z.To[t].name?.toLowerCase()){r=t+1<<24>>24;break}for(let e=t;e<t+s;e++)for(let t=i;t<i+n;t++)if(t>=0&&t<this.fI&&e>=0&&e<this.uI){this.ST[0][t][e]=r;for(let i=0;i<h.Z.Rn;i++)this.Gn[i][t][e]=0,this.Hn[i][t][e]=0}};dm=(t,i,s,e,r)=>{const o=new n.Z(new Uint8Array(r));for(let n=0;n<h.Z.Rn;n++)for(let r=0;r<64;r++)for(let l=0;l<64;l++){const a=r+s,c=l+e;let f;if(a>=0&&a<h.Z.Zn&&c>=0&&c<h.Z.Zn)for(this.Hn[n][a][c]=0;;){if(f=o.vy,0===f){0===n?this.Gn[0][a][c]=8*-p._T(a+t+932731,c+556238+i):this.Gn[n][a][c]=this.Gn[n-1][a][c]-240;break}if(1===f){let t=o.vy;1===t&&(t=0),0===n?this.Gn[0][a][c]=8*-t:this.Gn[n][a][c]=this.Gn[n-1][a][c]-8*t;break}f<=49?(this.ST[n][a][c]=o.Ty,this.kT[n][a][c]=((f-2)/4|0)<<24>>24,this.RT[n][a][c]=(f-2&3)<<24>>24):f<=81?this.Hn[n][a][c]=f-49<<24>>24:this.LT[n][a][c]=f-81<<24>>24}else for(;f=o.vy,0!==f;){if(1===f){o.vy;break}f<=49&&o.vy}}};ym=(t,i,s,e,r,o)=>{const l=new n.Z(new Uint8Array(e));let a=-1;for(;;){const e=l.jT;if(0===e)return;a+=e;let n=0;for(;;){const e=l.jT;if(0===e)break;n+=e-1;const c=63&n,f=n>>6&63,u=n>>12,d=l.vy,w=d>>2,y=3&d,p=f+r,m=c+o;if(p>0&&m>0&&p<h.Z.Zn-1&&m<h.Z.Zn-1){let h=u;2==(2&this.Hn[1][p][m])&&(h=u-1);let e=null;h>=0&&(e=s[h]),this.iy(u,p,m,t,i,e,a,w,y)}}}};iy=(t,i,s,h,e,n,r,o,d)=>{if(p.ht){if(0!=(16&this.Hn[t][i][s]))return;if(this.GT(t,i,s)!==p.lm)return}const w=this.Gn[t][i][s],y=this.Gn[t][i+1][s],m=this.Gn[t][i+1][s+1],A=this.Gn[t][i][s+1],I=w+y+m+A>>2,g=l.Z.get(r);let _=i+(s<<7)+(r<<14)+1073741824|0;g.active||(_+=-2147483648),_|=0;const C=((d<<6)+o|0)<<24>>24;if(o===f.Z.Mw.id)(!p.ht||g.active||g.yC)&&(h?.vT(g.ha(f.Z.Mw.id,d,w,y,m,A,-1),t,i,s,I,_,C),g.ly&&g.active&&n&&n.jE(i,s),-1!==g.el&&e.FI(new a.Z(r,t,3,i,s,c.Z.To[g.el],!0)));else if(o===f.Z.kw.id||o===f.Z.Rw.id){const l=g.ha(f.Z.kw.id,d,w,y,m,A,-1);if(l){let e,n,r=0;if(o===f.Z.Rw.id&&(r+=256),d===u.Z.Ku||d===u.Z.$u?(e=g.length,n=g.width):(e=g.width,n=g.length),h?.iy(t,i,s,I,l,null,_,C,e,n,r)&&g.lC)for(let h=0;h<=e;h++)for(let e=0;e<=n;e++){let n=l.KT/4|0;n>30&&(n=30),n>this.MT[t][i+h][s+e]&&(this.MT[t][i+h][s+e]=n<<24>>24)}}g.ly&&n&&n.iy(i,s,g.width,g.length,d,g.uy),-1!==g.el&&e.FI(new a.Z(r,t,2,i,s,c.Z.To[g.el],!0))}else if(o>=f.Z.eT.id)h?.iy(t,i,s,I,g.ha(o,d,w,y,m,A,-1),null,_,C,1,1,0),o>=f.Z.eT.id&&o<=f.Z.aT.id&&o!==f.Z.nT.id&&t>0&&(this.BT[t][i][s]|=2340),g.ly&&n&&n.iy(i,s,g.width,g.length,d,g.uy),-1!==g.el&&e.FI(new a.Z(r,t,2,i,s,c.Z.To[g.el],!0));else if(o===f.Z.Xu.id)h?.KE(t,i,s,I,p.wT[d],0,g.ha(f.Z.Xu.id,d,w,y,m,A,-1),null,_,C),d===u.Z.ju?(g.lC&&(this.MT[t][i][s]=50,this.MT[t][i][s+1]=50),g.F_&&(this.BT[t][i][s]|=585)):d===u.Z.Ku?(g.lC&&(this.MT[t][i][s+1]=50,this.MT[t][i+1][s+1]=50),g.F_&&(this.BT[t][i][s+1]|=1170)):d===u.Z.qu?(g.lC&&(this.MT[t][i+1][s]=50,this.MT[t][i+1][s+1]=50),g.F_&&(this.BT[t][i+1][s]|=585)):d===u.Z.$u&&(g.lC&&(this.MT[t][i][s]=50,this.MT[t][i+1][s]=50),g.F_&&(this.BT[t][i][s]|=1170)),g.ly&&n&&n.KE(i,s,o,d,g.uy),-1!==g.el&&e.FI(new a.Z(r,t,0,i,s,c.Z.To[g.el],!0)),16!==g.eC&&h?.qT(t,i,s,g.eC);else if(o===f.Z.qE.id)h?.KE(t,i,s,I,p.yT[d],0,g.ha(f.Z.qE.id,d,w,y,m,A,-1),null,_,C),g.lC&&(d===u.Z.ju?this.MT[t][i][s+1]=50:d===u.Z.Ku?this.MT[t][i+1][s+1]=50:d===u.Z.qu?this.MT[t][i+1][s]=50:d===u.Z.$u&&(this.MT[t][i][s]=50)),g.ly&&n&&n.KE(i,s,o,d,g.uy),-1!==g.el&&e.FI(new a.Z(r,t,0,i,s,c.Z.To[g.el],!0));else if(o===f.Z.zu.id){const l=d+1&3;h?.KE(t,i,s,I,p.wT[d],p.wT[l],g.ha(f.Z.zu.id,d+4,w,y,m,A,-1),g.ha(f.Z.zu.id,l,w,y,m,A,-1),_,C),g.F_&&(d===u.Z.ju?(this.BT[t][i][s]|=265,this.BT[t][i][s+1]|=1170):d===u.Z.Ku?(this.BT[t][i][s+1]|=1170,this.BT[t][i+1][s]|=585):d===u.Z.qu?(this.BT[t][i+1][s]|=585,this.BT[t][i][s]|=1170):d===u.Z.$u&&(this.BT[t][i][s]|=1170,this.BT[t][i][s]|=585)),g.ly&&n&&n.KE(i,s,o,d,g.uy),-1!==g.el&&e.FI(new a.Z(r,t,0,i,s,c.Z.To[g.el],!0)),16!==g.eC&&h?.qT(t,i,s,g.eC)}else if(o===f.Z.Ju.id)h?.KE(t,i,s,I,p.yT[d],0,g.ha(f.Z.Ju.id,d,w,y,m,A,-1),null,_,C),g.lC&&(d===u.Z.ju?this.MT[t][i][s+1]=50:d===u.Z.Ku?this.MT[t][i+1][s+1]=50:d===u.Z.qu?this.MT[t][i+1][s]=50:d===u.Z.$u&&(this.MT[t][i][s]=50)),g.ly&&n&&n.KE(i,s,o,d,g.uy),-1!==g.el&&e.FI(new a.Z(r,t,0,i,s,c.Z.To[g.el],!0));else if(o===f.Z.td.id)h?.iy(t,i,s,I,g.ha(o,d,w,y,m,A,-1),null,_,C,1,1,0),g.ly&&n&&n.iy(i,s,g.width,g.length,d,g.uy),-1!==g.el&&e.FI(new a.Z(r,t,2,i,s,c.Z.To[g.el],!0));else if(o===f.Z._I.id)h?.OT(t,i,s,I,0,0,_,g.ha(f.Z._I.id,u.Z.ju,w,y,m,A,-1),C,512*d,p.wT[d]),-1!==g.el&&e.FI(new a.Z(r,t,1,i,s,c.Z.To[g.el],!0));else if(o===f.Z.zm.id){let n=16;if(h){const e=h.Yu(t,i,s);e>0&&(n=l.Z.get(e>>14&32767).eC)}h?.OT(t,i,s,I,p.pT[d]*n,p.mT[d]*n,_,g.ha(f.Z._I.id,u.Z.ju,w,y,m,A,-1),C,512*d,p.wT[d]),-1!==g.el&&e.FI(new a.Z(r,t,1,i,s,c.Z.To[g.el],!0))}else o===f.Z.$E.id?(h?.OT(t,i,s,I,0,0,_,g.ha(f.Z._I.id,u.Z.ju,w,y,m,A,-1),C,d,256),-1!==g.el&&e.FI(new a.Z(r,t,1,i,s,c.Z.To[g.el],!0))):o===f.Z.JE.id?(h?.OT(t,i,s,I,0,0,_,g.ha(f.Z._I.id,u.Z.ju,w,y,m,A,-1),C,d,512),-1!==g.el&&e.FI(new a.Z(r,t,1,i,s,c.Z.To[g.el],!0))):o===f.Z.QE.id&&(h?.OT(t,i,s,I,0,0,_,g.ha(f.Z._I.id,u.Z.ju,w,y,m,A,-1),C,d,768),-1!==g.el&&e.FI(new a.Z(r,t,1,i,s,c.Z.To[g.el],!0)))};GT=(t,i,s)=>0==(8&this.Hn[t][i][s])?t<=0||0==(2&this.Hn[1][i][s])?t:t-1:0}},7221:(t,i,s)=>{s.d(i,{Z:()=>I});var h=s(8078),e=s(6539),n=s(220),r=s(4138),o=s(3693),l=s(4155),a=s(3806),c=s(9118),f=s(9080),u=s(6711),d=s(9865),w=s(2991),y=s(8570),p=s(9190),m=s(5534),A=s(9345);class I{static $T=new A.JT(8,32,51,51,!1);static QT=new A.to(100,null);static tb=new Int32Array(o.Z.Rn);static ib=new A.sb(o.Z.Rn,500,null);static hb=new A.to(500,null);static eb=new f.Z;static Uf=0;static nb=0;static rb=0;static ob=0;static lb=0;static ab=0;static cb=0;static fb=0;static ub=0;static wb=0;static yb=0;static pb=0;static mb=0;static Ab=0;static Ib=0;static gb=0;static _b=0;static Cb=0;static Eb=0;static Tb=0;static bb=0;static vb=0;static Ob=!1;static Lb=null;static Sb=Uint8Array.of(19,55,38,155,255,110,137,205,76);static kb=Uint8Array.of(160,192,80,96,0,144,80,48,160);static Rb=Uint8Array.of(76,8,137,4,0,1,38,2,19);static Mb=Int8Array.of(0,0,2,0,0,2,1,1,0);static xb=Int8Array.of(2,0,0,2,0,0,0,4,4);static Nb=Int8Array.of(0,4,4,8,0,0,8,0,0);static Pb=Int8Array.of(1,1,0,0,0,8,0,0,8);static Db=Int8Array.of(53,-53,-53,53);static Fb=Int8Array.of(-53,-53,53,53);static Ub=Int8Array.of(-45,45,45,-45);static Bb=Int8Array.of(45,45,-45,-45);static Gb=[new Int8Array(16),Int8Array.of(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),Int8Array.of(1,0,0,0,1,1,0,0,1,1,1,0,1,1,1,1),Int8Array.of(1,1,0,0,1,1,0,0,1,0,0,0,1,0,0,0),Int8Array.of(0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,1),Int8Array.of(0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1),Int8Array.of(1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1),Int8Array.of(1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0),Int8Array.of(0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0),Int8Array.of(1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,1),Int8Array.of(1,1,1,1,1,1,0,0,1,0,0,0,1,0,0,0),Int8Array.of(0,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1),Int8Array.of(0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1)];static Hb=[Int8Array.of(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15),Int8Array.of(12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3),Int8Array.of(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0),Int8Array.of(3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12)];static Wb=Int32Array.of(41,39248,41,4643,41,41,41,41,41,41,41,41,41,41,41,43086,41,41,41,41,41,41,41,8602,41,28992,41,41,41,41,41,5056,41,41,41,41,41,41,41,41,41,41,41,41,41,41,3131,41,41,41);static Iu=0;static Ll=0;static Sl=0;static nf=-1;static rf=-1;static ht=!0;static init=(t,i,s,e,n)=>{this.nb=0,this.rb=0,this.ob=t,this.lb=i,this.ab=t/2|0,this.cb=i/2|0;const r=new A.JT(9,32,53,53,!1);for(let t=128;t<=384;t+=32)for(let i=0;i<2048;i+=64){this.fb=h.Z.sin[t],this.ub=h.Z.cos[t],this.wb=h.Z.sin[i],this.yb=h.Z.cos[i];const o=(t-128)/32|0,l=i/64|0;for(let t=-26;t<=26;t++)for(let i=-26;i<=26;i++){const h=128*t,a=128*i;let c=!1;for(let t=-s;t<=e;t+=128)if(this.Yb(h,a,n[o]+t)){c=!0;break}r[o][l][t+25+1][i+25+1]=c}}for(let t=0;t<8;t++)for(let i=0;i<32;i++)for(let s=-25;s<25;s++)for(let h=-25;h<25;h++){let e=!1;t:for(let n=-1;n<=1;n++)for(let o=-1;o<=1;o++){if(r[t][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}}this.$T[t][i][s+25][h+25]=e}};static _o=()=>{this.QT=null,this.tb=null,this.ib=null,this.eb=null,this.$T=null,this.hb=null,this.Lb=null,console.log('World3D unloaded!')};static zT=(t,i,s,h,e,n,o,l)=>{I.ib[t][I.tb[t]++]=new r.Z(s/128|0,n/128|0,e/128|0,l/128|0,i,s,n,e,l,h,o)};static Yb=(t,i,s)=>{const h=i*this.wb+t*this.yb>>16,e=i*this.yb-t*this.wb>>16,n=s*this.fb+e*this.ub>>16,r=s*this.ub-e*this.fb>>16;if(n<50||n>3500)return!1;const o=this.ab+((h<<9)/n|0),l=this.cb+((r<<9)/n|0);return o>=this.nb&&o<=this.ob&&l>=this.rb&&l<=this.lb};Zb;fI;uI;Vb;Xb;Ir;zb;jb;Kb;qb=0;$b=0;Jb=0;constructor(t,i,s,h){this.Zb=s,this.fI=h,this.uI=i,this.Xb=new A._r(s,h,i,null),this.zb=new A.Xa(s,h+1,i+1),this.Vb=t,this.Ir=new A.to(5e3,null),this.jb=new Int32Array(1e4),this.Kb=new Int32Array(1e4),this.reset()}reset=()=>{for(let t=0;t<this.Zb;t++)for(let i=0;i<this.fI;i++)for(let s=0;s<this.uI;s++)this.Xb[t][i][s]=null;for(let t=0;t<o.Z.Rn;t++){for(let i=0;i<I.tb[t];i++)I.ib[t][i]=null;I.tb[t]=0}for(let t=0;t<this.qb;t++)this.Ir[t]=null;this.qb=0,I.QT.fill(null)};um=t=>{this.$b=t;for(let i=0;i<this.fI;i++)for(let s=0;s<this.uI;s++)this.Xb[t][i][s]=new n.Z(t,i,s)};XT=(t,i)=>{const s=this.Xb[0][t][i];for(let s=0;s<3;s++){this.Xb[s][t][i]=this.Xb[s+1][t][i];const h=this.Xb[s][t][i];h&&h.level--}this.Xb[0][t][i]||(this.Xb[0][t][i]=new n.Z(0,t,i));const h=this.Xb[0][t][i];h&&(h.Qb=s),this.Xb[3][t][i]=null};ZT=(t,i,s,h)=>{const e=this.Xb[t][i][s];e&&(e.tv=h)};WT=(t,i,s,h,e,r,o,l,a,c,f,u,w,m,A,I,g,_,C,E)=>{if(h===p.Z.HT){for(let h=t;h>=0;h--)this.Xb[h][i][s]||(this.Xb[h][i][s]=new n.Z(h,i,s));const h=this.Xb[t][i][s];h&&(h.iv=new d.Z(f,u,w,m,-1,C,!1))}else if(h===p.Z.sv){for(let h=t;h>=0;h--)this.Xb[h][i][s]||(this.Xb[h][i][s]=new n.Z(h,i,s));const h=this.Xb[t][i][s];h&&(h.iv=new d.Z(A,I,g,_,r,E,o===l&&o===a&&o===c))}else{for(let h=t;h>=0;h--)this.Xb[h][i][s]||(this.Xb[h][i][s]=new n.Z(h,i,s));const d=this.Xb[t][i][s];d&&(d.hv=new y.Z(i,h,I,l,w,e,f,c,E,A,r,_,C,a,g,m,o,s,u))}};vT=(t,i,s,h,e,r,o)=>{this.Xb[i][s][h]||(this.Xb[i][s][h]=new n.Z(i,s,h));const a=this.Xb[i][s][h];a&&(a.ev=new l.Z(e,128*s+64,128*h+64,t,r,o))};py=(t,i,s)=>{const h=this.Xb[t][i][s];h&&(h.ev=null)};ty=(t,i,s,h,e,r,o,l)=>{let a=0;const c=this.Xb[h][t][i];if(c)for(let t=0;t<c.nv;t++){const i=c.rv[t];if(!i||!i.model)continue;const s=i.model.vC;s>a&&(a=s)}else this.Xb[h][t][i]=new n.Z(h,t,i);const f=this.Xb[h][t][i];f&&(f.ov=new u.Z(s,128*t+64,128*i+64,r,o,l,e,a))};jw=(t,i,s)=>{const h=this.Xb[t][i][s];h&&(h.ov=null)};KE=(t,i,s,h,e,r,o,l,c,f)=>{if(!o&&!l)return;for(let h=t;h>=0;h--)this.Xb[h][i][s]||(this.Xb[h][i][s]=new n.Z(h,i,s));const u=this.Xb[t][i][s];u&&(u.lv=new a.Z(h,128*i+64,128*s+64,e,r,o,l,c,f))};oy=(t,i,s,h)=>{const e=this.Xb[t][i][s];1===h&&e&&(e.lv=null)};OT=(t,i,s,h,e,r,o,l,a,f,u)=>{if(!l)return;for(let h=t;h>=0;h--)this.Xb[h][i][s]||(this.Xb[h][i][s]=new n.Z(h,i,s));const d=this.Xb[t][i][s];d&&(d.av=new c.Z(h,128*i+e+64,128*s+r+64,u,f,l,o,a))};wy=(t,i,s)=>{const h=this.Xb[t][i][s];h&&(h.av=null)};qT=(t,i,s,h)=>{const e=this.Xb[t][i][s];if(!e)return;const n=e.av;if(!n)return;const r=128*i+64,o=128*s+64;n.x=r+((n.x-r)*h/16|0),n.z=o+((n.z-o)*h/16|0)};gI=(t,i,s,h)=>{if(!h)return;const e=this.Xb[t][i][s];if(!e)return;const n=e.av;n&&(n.model=h)};TI=(t,i,s,h)=>{if(!h)return;const e=this.Xb[t][i][s];if(!e)return;const n=e.ev;n&&(n.model=h)};EI=(t,i,s,h)=>{if(!h)return;const e=this.Xb[t][i][s];if(!e)return;const n=e.lv;n&&(n.cv=h)};CI=(t,i,s,h,e)=>{if(!h)return;const n=this.Xb[s][t][i];if(!n)return;const r=n.lv;r&&(r.cv=h,r.fv=e)};iy=(t,i,s,h,e,n,r,o,l,a,c)=>{if(!e&&!n)return!0;const f=128*i+64*l,u=128*s+64*a;return this.uv(f,u,h,t,i,s,l,a,e,n,r,o,c,!1)};nI=(t,i,s,h,e,n,r,o,l,a)=>{if(!e&&!n)return!0;let c=i-l,f=h-l,u=i+l,d=h+l;return a&&(o>640&&o<1408&&(d+=128),o>1152&&o<1920&&(u+=128),(o>1664||o<384)&&(f-=128),o>128&&o<896&&(c-=128)),c=c/128|0,f=f/128|0,u=u/128|0,d=d/128|0,this.uv(i,h,s,t,c,f,u+1-c,d-f+1,e,n,r,0,o,!0)};lI=(t,i,s,h,e,n,r,o,l,a,c,f)=>!l&&!a||this.uv(i,h,s,t,e,n,r+1-e,o-n+1,l,a,c,0,f,!0);yy=(t,i,s)=>{const h=this.Xb[t][i][s];if(h)for(let t=0;t<h.nv;t++){const e=h.rv[t];if(e&&2==(e.dv>>29&3)&&e.wv===i&&e.yv===s)return void this.pv(e)}};II=(t,i,s,h)=>{if(!h)return;const e=this.Xb[t][i][s];if(e)for(let t=0;t<e.nv;t++){const i=e.rv[t];if(i&&2==(i.dv>>29&3))return void(i.model=h)}};Hf=()=>{for(let t=0;t<this.qb;t++){const i=this.Ir[t];i&&this.pv(i),this.Ir[t]=null}this.qb=0};Yu=(t,i,s)=>{const h=this.Xb[t][i][s];return h&&h.lv?h.lv.dv:0};ey=(t,i,s)=>{const h=this.Xb[t][s][i];return h&&h.av?h.av.dv:0};Qu=(t,i,s)=>{const h=this.Xb[t][i][s];if(!h)return 0;for(let t=0;t<h.nv;t++){const e=h.rv[t];if(e&&2==(e.dv>>29&3)&&e.wv===i&&e.yv===s)return e.dv}return 0};Fu=(t,i,s)=>{const h=this.Xb[t][i][s];return h&&h.ev?h.ev.dv:0};Zu=(t,i,s,h)=>{const e=this.Xb[t][i][s];if(e){if(e.lv&&e.lv.dv===h)return 255&e.lv.info;if(e.av&&e.av.dv===h)return 255&e.av.info;if(e.ev&&e.ev.dv===h)return 255&e.ev.info;for(let t=0;t<e.nv;t++){const i=e.rv[t];if(i&&i.dv===h)return 255&i.info}return-1}return-1};VT=(t,i,s,h,e)=>{const n=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;for(let i=0;i<this.Zb;i++)for(let r=0;r<this.fI;r++)for(let o=0;o<this.uI;o++){const l=this.Xb[i][r][o];if(!l)continue;const a=l.lv;a&&a.cv&&a.cv.mv&&(this.Av(i,r,o,1,1,a.cv),a.fv&&a.fv.mv&&(this.Av(i,r,o,1,1,a.fv),this.Iv(a.cv,a.fv,0,0,0,!1),a.fv.gv(t,n,s,h,e)),a.cv.gv(t,n,s,h,e));for(let a=0;a<l.nv;a++){const c=l.rv[a];c&&c.model&&c.model.mv&&(this.Av(i,r,o,c._v+1-c.wv,c.Cv-c.yv+1,c.model),c.model.gv(t,n,s,h,e))}const c=l.ev;c&&c.model&&c.model.mv&&(this.Ev(i,r,o,c.model),c.model.gv(t,n,s,h,e))}};Ev=(t,i,s,h)=>{if(i<this.fI){const e=this.Xb[t][i+1][s];e&&e.ev&&e.ev.model&&e.ev.model.mv&&this.Iv(h,e.ev.model,128,0,0,!0)}if(s<this.fI){const e=this.Xb[t][i][s+1];e&&e.ev&&e.ev.model&&e.ev.model.mv&&this.Iv(h,e.ev.model,0,0,128,!0)}if(i<this.fI&&s<this.uI){const e=this.Xb[t][i+1][s+1];e&&e.ev&&e.ev.model&&e.ev.model.mv&&this.Iv(h,e.ev.model,128,0,128,!0)}if(i<this.fI&&s>0){const e=this.Xb[t][i+1][s-1];e&&e.ev&&e.ev.model&&e.ev.model.mv&&this.Iv(h,e.ev.model,128,0,-128,!0)}};Av=(t,i,s,h,e,n)=>{let r=!0,o=i;const l=i+h,a=s-1,c=s+e;for(let f=t;f<=t+1;f++)if(f!==this.Zb){for(let u=o;u<=l;u++)if(!(u<0||u>=this.fI))for(let o=a;o<=c;o++){if(o<0||o>=this.uI||r&&u<l&&o<c&&(o>=s||u===i))continue;const a=this.Xb[f][u][o];if(!a)continue;const d=128*(u-i)+64*(1-h),w=128*(o-s)+64*(1-e),y=((this.Vb[f][u][o]+this.Vb[f][u+1][o]+this.Vb[f][u][o+1]+this.Vb[f][u+1][o+1])/4|0)-((this.Vb[t][i][s]+this.Vb[t][i+1][s]+this.Vb[t][i][s+1]+this.Vb[t][i+1][s+1])/4|0),p=a.lv;p&&p.cv&&p.cv.mv&&this.Iv(n,p.cv,d,y,w,r),p&&p.fv&&p.fv.mv&&this.Iv(n,p.fv,d,y,w,r);for(let t=0;t<a.nv;t++){const o=a.rv[t];if(!o||!o.model||!o.model.mv)continue;const l=o._v+1-o.wv,c=o.Cv+1-o.yv;this.Iv(n,o.model,128*(o.wv-i)+64*(l-h),y,128*(o.yv-s)+64*(c-e),r)}}o--,r=!1}};Iv=(t,i,s,h,e,n)=>{this.Jb++;let r=0;const o=i.AC,l=i.mC;if(t.mv&&t.Tv)for(let n=0;n<t.mC;n++){const a=t.mv[n],c=t.Tv[n];if(c&&0!==c.w){const f=t.gC[n]-h;if(f>i.bv)continue;const u=t.AC[n]-s;if(u<i.vv||u>i.Ov)continue;const d=t.IC[n]-e;if(d<i.Lv||d>i.Sv)continue;if(i.mv&&i.Tv)for(let t=0;t<l;t++){const s=i.mv[t],h=i.Tv[t];u!==o[t]||d!==i.IC[t]||f!==i.gC[t]||h&&0===h.w||(a&&s&&h&&(a.x+=h.x,a.y+=h.y,a.z+=h.z,a.w+=h.w,s.x+=c.x,s.y+=c.y,s.z+=c.z,s.w+=c.w,r++),this.jb[n]=this.Jb,this.Kb[t]=this.Jb)}}}if(!(r<3)&&n){if(t.kv)for(let i=0;i<t.Rv;i++)this.jb[t.Mv[i]]===this.Jb&&this.jb[t.xv[i]]===this.Jb&&this.jb[t.Nv[i]]===this.Jb&&(t.kv[i]=-1);if(i.kv)for(let t=0;t<i.Rv;t++)this.Kb[i.Mv[t]]===this.Jb&&this.Kb[i.xv[t]]===this.Jb&&this.Kb[i.Nv[t]]===this.Jb&&(i.kv[t]=-1)}};Pu=(t,i,s,h,e,n)=>{const r=this.Xb[t][i][s];if(!r)return;const o=r.iv;if(o){const t=o.color;if(0!==t)for(let i=0;i<4;i++)h[e]=t,h[e+1]=t,h[e+2]=t,h[e+3]=t,e+=n;return}const l=r.hv;if(!l)return;const a=l.shape,c=l.rotation,f=l.Pv,u=l.Dv,d=I.Gb[a],w=I.Hb[c];let y=0;if(0===f)for(let t=0;t<4;t++)0!==d[w[y++]]&&(h[e]=u),0!==d[w[y++]]&&(h[e+1]=u),0!==d[w[y++]]&&(h[e+2]=u),0!==d[w[y++]]&&(h[e+3]=u),e+=n;else for(let t=0;t<4;t++)h[e]=0===d[w[y++]]?f:u,h[e+1]=0===d[w[y++]]?f:u,h[e+2]=0===d[w[y++]]?f:u,h[e+3]=0===d[w[y++]]?f:u,e+=n};click=(t,i)=>{I.Ob=!0,I.Ll=t,I.Sl=i,I.nf=-1,I.rf=-1};draw=(t,i,s,e,n,r,o)=>{t<0?t=0:t>=128*this.fI&&(t=128*this.fI-1),s<0?s=0:s>=128*this.uI&&(s=128*this.uI-1),I.Uf++,I.fb=h.Z.sin[r],I.ub=h.Z.cos[r],I.wb=h.Z.sin[n],I.yb=h.Z.cos[n],I.Lb=I.$T[(r-128)/32|0][n/64|0],I.pb=t,I.mb=i,I.Ab=s,I.Ib=t/128|0,I.gb=s/128|0,I.bb=e,I._b=I.Ib-25,I._b<0&&(I._b=0),I.Eb=I.gb-25,I.Eb<0&&(I.Eb=0),I.Cb=I.Ib+25,I.Cb>this.fI&&(I.Cb=this.fI),I.Tb=I.gb+25,I.Tb>this.uI&&(I.Tb=this.uI),this.Fv(),I.vb=0;for(let t=this.$b;t<this.Zb;t++){const s=this.Xb[t];for(let h=I._b;h<I.Cb;h++)for(let n=I.Eb;n<I.Tb;n++){const r=s[h][n];r&&(r.tv<=e&&(I.Lb[h+25-I.Ib][n+25-I.gb]||this.Vb[t][h][n]-i>=2e3)?(r.visible=!0,r.update=!0,r.Uv=r.nv>0,I.vb++):(r.visible=!1,r.update=!1,r.Bv=0))}}for(let t=this.$b;t<this.Zb;t++){const i=this.Xb[t];for(let t=-25;t<=0;t++){const s=I.Ib+t,h=I.Ib-t;if(!(s<I._b&&h>=I.Cb))for(let t=-25;t<=0;t++){const e=I.gb+t,n=I.gb-t;let r;if(s>=I._b&&(e>=I.Eb&&(r=i[s][e],r&&r.visible&&this.Gv(r,!0,o)),n<I.Tb&&(r=i[s][n],r&&r.visible&&this.Gv(r,!0,o))),h<I.Cb&&(e>=I.Eb&&(r=i[h][e],r&&r.visible&&this.Gv(r,!0,o)),n<I.Tb&&(r=i[h][n],r&&r.visible&&this.Gv(r,!0,o))),0===I.vb)return void(I.Ob=!1)}}}for(let t=this.$b;t<this.Zb;t++){const i=this.Xb[t];for(let t=-25;t<=0;t++){const s=I.Ib+t,h=I.Ib-t;if(!(s<I._b&&h>=I.Cb))for(let t=-25;t<=0;t++){const e=I.gb+t,n=I.gb-t;let r;if(s>=I._b&&(e>=I.Eb&&(r=i[s][e],r&&r.visible&&this.Gv(r,!1,o)),n<I.Tb&&(r=i[s][n],r&&r.visible&&this.Gv(r,!1,o))),h<I.Cb&&(e>=I.Eb&&(r=i[h][e],r&&r.visible&&this.Gv(r,!1,o)),n<I.Tb&&(r=i[h][n],r&&r.visible&&this.Gv(r,!1,o))),0===I.vb)return void(I.Ob=!1)}}}};uv=(t,i,s,h,r,o,l,a,c,f,u,d,w,y)=>{if(!c&&!f)return!1;for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){if(t<0||i<0||t>=this.fI||i>=this.uI)return!1;const s=this.Xb[h][t][i];if(s&&s.nv>=5)return!1}const p=new e.Z(h,s,t,i,c,f,w,r,r+l-1,o,o+a-1,u,d);for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){let s=0;t>r&&(s|=1),t<r+l-1&&(s+=4),i>o&&(s+=8),i<o+a-1&&(s+=2);for(let s=h;s>=0;s--)this.Xb[s][t][i]||(this.Xb[s][t][i]=new n.Z(s,t,i));const e=this.Xb[h][t][i];e&&(e.rv[e.nv]=p,e.Hv[e.nv]=s,e.Wv|=s,e.nv++)}return y&&(this.Ir[this.qb++]=p),!0};pv=t=>{for(let i=t.wv;i<=t._v;i++)for(let s=t.yv;s<=t.Cv;s++){const h=this.Xb[t.level][i][s];if(h){for(let i=0;i<h.nv;i++)if(h.rv[i]===t){h.nv--;for(let t=i;t<h.nv;t++)h.rv[t]=h.rv[t+1],h.Hv[t]=h.Hv[t+1];h.rv[h.nv]=null;break}h.Wv=0;for(let t=0;t<h.nv;t++)h.Wv|=h.Hv[t]}}};Fv=()=>{const t=I.tb[I.bb],i=I.ib[I.bb];I.Iu=0;for(let s=0;s<t;s++){const t=i[s];if(!t)continue;let h,e,n,r;if(1===t.type){if(h=t.aI+25-I.Ib,h>=0&&h<=50){e=t.cI+25-I.gb,e<0&&(e=0),n=t.uI+25-I.gb,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.Lb&&I.Lb[h][e++]){i=!0;break}if(i){if(r=I.pb-t.vv,r>32)t.mode=1;else{if(r>=-32)continue;t.mode=2,r=-r}t.Yv=(t.Lv-I.Ab<<8)/r|0,t.Zv=(t.Sv-I.Ab<<8)/r|0,t.Vv=(t.bv-I.mb<<8)/r|0,t.Xv=(t.OC-I.mb<<8)/r|0,I.hb[I.Iu++]=t}}}else if(2===t.type){if(h=t.cI+25-I.gb,h>=0&&h<=50){e=t.aI+25-I.Ib,e<0&&(e=0),n=t.fI+25-I.Ib,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.Lb&&I.Lb[e++][h]){i=!0;break}if(i){if(r=I.Ab-t.Lv,r>32)t.mode=3;else{if(r>=-32)continue;t.mode=4,r=-r}t.zv=(t.vv-I.pb<<8)/r|0,t.jv=(t.Ov-I.pb<<8)/r|0,t.Vv=(t.bv-I.mb<<8)/r|0,t.Xv=(t.OC-I.mb<<8)/r|0,I.hb[I.Iu++]=t}}}else if(4===t.type&&(h=t.bv-I.mb,h>128&&(e=t.cI+25-I.gb,e<0&&(e=0),n=t.uI+25-I.gb,n>50&&(n=50),e<=n))){let i=t.aI+25-I.Ib;i<0&&(i=0),r=t.fI+25-I.Ib,r>50&&(r=50);let s=!1;t:for(let t=i;t<=r;t++)for(let i=e;i<=n;i++)if(I.Lb&&I.Lb[t][i]){s=!0;break t}s&&(t.mode=5,t.zv=(t.vv-I.pb<<8)/h|0,t.jv=(t.Ov-I.pb<<8)/h|0,t.Yv=(t.Lv-I.Ab<<8)/h|0,t.Zv=(t.Sv-I.Ab<<8)/h|0,I.hb[I.Iu++]=t)}}};Gv=(t,i,s)=>{for(I.eb.FI(t);;){let t;do{if(t=I.eb.Kv(),!t)return}while(!t.update);const h=t.x,e=t.z,n=t.level,r=t.qv,o=this.Xb[n];if(t.visible){if(i){if(n>0){const t=this.Xb[n-1][h][e];if(t&&t.update)continue}if(h<=I.Ib&&h>I._b){const i=o[h-1][e];if(i&&i.update&&(i.visible||0==(1&t.Wv)))continue}if(h>=I.Ib&&h<I.Cb-1){const i=o[h+1][e];if(i&&i.update&&(i.visible||0==(4&t.Wv)))continue}if(e<=I.gb&&e>I.Eb){const i=o[h][e-1];if(i&&i.update&&(i.visible||0==(8&t.Wv)))continue}if(e>=I.gb&&e<I.Tb-1){const i=o[h][e+1];if(i&&i.update&&(i.visible||0==(2&t.Wv)))continue}}else i=!0;if(t.visible=!1,t.Qb){const i=t.Qb;i.iv?this.$v(0,h,e)||this.Jv(i.iv,0,h,e,I.fb,I.ub,I.wb,I.yb):i.hv&&!this.$v(0,h,e)&&this.Qv(h,e,i.hv,I.fb,I.ub,I.wb,I.yb);const n=i.lv;n&&n.cv?.draw(0,I.fb,I.ub,I.wb,I.yb,n.x-I.pb,n.y-I.mb,n.z-I.Ab,n.dv);for(let t=0;t<i.nv;t++){const h=i.rv[t];if(h){let t=h.model;t||(t=h.tO?.draw(s)??null),t?.draw(h.rI,I.fb,I.ub,I.wb,I.yb,h.x-I.pb,h.y-I.mb,h.z-I.Ab,h.dv)}}}let l=!1;t.iv?this.$v(r,h,e)||(l=!0,this.Jv(t.iv,r,h,e,I.fb,I.ub,I.wb,I.yb)):t.hv&&!this.$v(r,h,e)&&(l=!0,this.Qv(h,e,t.hv,I.fb,I.ub,I.wb,I.yb));let a=0,c=0;const f=t.lv,u=t.av;if((f||u)&&(I.Ib===h?a+=1:I.Ib<h&&(a+=2),I.gb===e?a+=3:I.gb>e&&(a+=6),c=I.Sb[a],t.iO=I.Rb[a]),f&&(0==(f.sO&I.kb[a])?t.Bv=0:16===f.sO?(t.Bv=3,t.hO=I.Mb[a],t.eO=3-t.hO):32===f.sO?(t.Bv=6,t.hO=I.xb[a],t.eO=6-t.hO):64===f.sO?(t.Bv=12,t.hO=I.Nb[a],t.eO=12-t.hO):(t.Bv=9,t.hO=I.Pb[a],t.eO=9-t.hO),0==(f.sO&c)||this.nO(r,h,e,f.sO)||f.cv?.draw(0,I.fb,I.ub,I.wb,I.yb,f.x-I.pb,f.y-I.mb,f.z-I.Ab,f.dv),0==(f.rO&c)||this.nO(r,h,e,f.rO)||f.fv?.draw(0,I.fb,I.ub,I.wb,I.yb,f.x-I.pb,f.y-I.mb,f.z-I.Ab,f.dv)),u&&!this.visible(r,h,e,u.model.OC))if(0!=(u.type&c))u.model.draw(u.angle,I.fb,I.ub,I.wb,I.yb,u.x-I.pb,u.y-I.mb,u.z-I.Ab,u.dv);else if(0!=(768&u.type)){const t=u.x-I.pb,i=u.y-I.mb,s=u.z-I.Ab,h=u.angle;let e,n;if(e=h===m.Z.Ku||h===m.Z.qu?-t:t,n=h===m.Z.qu||h===m.Z.$u?-s:s,0!=(256&u.type)&&n<e){const e=t+I.Db[h],n=s+I.Fb[h];u.model.draw(512*h+256,I.fb,I.ub,I.wb,I.yb,e,i,n,u.dv)}if(0!=(512&u.type)&&n>e){const e=t+I.Ub[h],n=s+I.Bb[h];u.model.draw(512*h+1280&2047,I.fb,I.ub,I.wb,I.yb,e,i,n,u.dv)}}if(l){const i=t.ev;i&&i.model?.draw(0,I.fb,I.ub,I.wb,I.yb,i.x-I.pb,i.y-I.mb,i.z-I.Ab,i.dv);const s=t.ov;s&&0===s.offset&&(s.oO&&s.oO.draw(0,I.fb,I.ub,I.wb,I.yb,s.x-I.pb,s.y-I.mb,s.z-I.Ab,s.dv),s.lO&&s.lO.draw(0,I.fb,I.ub,I.wb,I.yb,s.x-I.pb,s.y-I.mb,s.z-I.Ab,s.dv),s.aO&&s.aO.draw(0,I.fb,I.ub,I.wb,I.yb,s.x-I.pb,s.y-I.mb,s.z-I.Ab,s.dv))}const d=t.Wv;if(0!==d){if(h<I.Ib&&0!=(4&d)){const t=o[h+1][e];t&&t.update&&I.eb.FI(t)}if(e<I.gb&&0!=(2&d)){const t=o[h][e+1];t&&t.update&&I.eb.FI(t)}if(h>I.Ib&&0!=(1&d)){const t=o[h-1][e];t&&t.update&&I.eb.FI(t)}if(e>I.gb&&0!=(8&d)){const t=o[h][e-1];t&&t.update&&I.eb.FI(t)}}}if(0!==t.Bv){let i=!0;for(let s=0;s<t.nv;s++){const h=t.rv[s];if(h&&(h.Uf!==I.Uf&&(t.Hv[s]&t.Bv)===t.hO)){i=!1;break}}if(i){const i=t.lv;i&&!this.nO(r,h,e,i.sO)&&i.cv?.draw(0,I.fb,I.ub,I.wb,I.yb,i.x-I.pb,i.y-I.mb,i.z-I.Ab,i.dv),t.Bv=0}}if(t.Uv){const i=t.nv;t.Uv=!1;let n=0;t:for(let s=0;s<i;s++){const i=t.rv[s];if(!i||i.Uf===I.Uf)continue;for(let s=i.wv;s<=i._v;s++)for(let h=i.yv;h<=i.Cv;h++){const e=o[s][h];if(e){if(!e.visible){if(0===e.Bv)continue;let n=0;if(s>i.wv&&(n+=1),s<i._v&&(n+=4),h>i.yv&&(n+=8),h<i.Cv&&(n+=2),(n&e.Bv)!==t.eO)continue}t.Uv=!0;continue t}}I.QT[n++]=i;let h=I.Ib-i.wv;const e=i._v-I.Ib;e>h&&(h=e);const r=I.gb-i.yv,l=i.Cv-I.gb;i.cO=l>r?h+l:h+r}for(;;){let t=-50,i=-1;for(let s=0;s<n;s++){const h=I.QT[s];h&&(h.Uf!==I.Uf&&h.cO>t&&(t=h.cO,i=s))}if(-1===i)break;const l=I.QT[i];if(l){l.Uf=I.Uf;let t=l.model;t||(t=l.tO?.draw(s)??null),t&&!this.fO(r,l.wv,l._v,l.yv,l.Cv,t.OC)&&t.draw(l.rI,I.fb,I.ub,I.wb,I.yb,l.x-I.pb,l.y-I.mb,l.z-I.Ab,l.dv);for(let t=l.wv;t<=l._v;t++)for(let i=l.yv;i<=l.Cv;i++){const s=o[t][i];s&&(0!==s.Bv?I.eb.FI(s):t===h&&i===e||!s.update||I.eb.FI(s))}}}if(t.Uv)continue}if(!t.update||0!==t.Bv)continue;if(h<=I.Ib&&h>I._b){const t=o[h-1][e];if(t&&t.update)continue}if(h>=I.Ib&&h<I.Cb-1){const t=o[h+1][e];if(t&&t.update)continue}if(e<=I.gb&&e>I.Eb){const t=o[h][e-1];if(t&&t.update)continue}if(e>=I.gb&&e<I.Tb-1){const t=o[h][e+1];if(t&&t.update)continue}t.update=!1,I.vb--;const l=t.ov;if(l&&0!==l.offset&&(l.oO&&l.oO.draw(0,I.fb,I.ub,I.wb,I.yb,l.x-I.pb,l.y-I.mb-l.offset,l.z-I.Ab,l.dv),l.lO&&l.lO.draw(0,I.fb,I.ub,I.wb,I.yb,l.x-I.pb,l.y-I.mb-l.offset,l.z-I.Ab,l.dv),l.aO&&l.aO.draw(0,I.fb,I.ub,I.wb,I.yb,l.x-I.pb,l.y-I.mb-l.offset,l.z-I.Ab,l.dv)),0!==t.iO){const i=t.av;if(i&&!this.visible(r,h,e,i.model.OC))if(0!=(i.type&t.iO))i.model.draw(i.angle,I.fb,I.ub,I.wb,I.yb,i.x-I.pb,i.y-I.mb,i.z-I.Ab,i.dv);else if(0!=(768&i.type)){const t=i.x-I.pb,s=i.y-I.mb,h=i.z-I.Ab,e=i.angle;let n,r;if(n=e===m.Z.Ku||e===m.Z.qu?-t:t,r=e===m.Z.qu||e===m.Z.$u?-h:h,0!=(256&i.type)&&r>=n){const n=t+I.Db[e],r=h+I.Fb[e];i.model.draw(512*e+256,I.fb,I.ub,I.wb,I.yb,n,s,r,i.dv)}if(0!=(512&i.type)&&r<=n){const n=t+I.Ub[e],r=h+I.Bb[e];i.model.draw(512*e+1280&2047,I.fb,I.ub,I.wb,I.yb,n,s,r,i.dv)}}const s=t.lv;s&&(0==(s.rO&t.iO)||this.nO(r,h,e,s.rO)||s.fv?.draw(0,I.fb,I.ub,I.wb,I.yb,s.x-I.pb,s.y-I.mb,s.z-I.Ab,s.dv),0==(s.sO&t.iO)||this.nO(r,h,e,s.sO)||s.cv?.draw(0,I.fb,I.ub,I.wb,I.yb,s.x-I.pb,s.y-I.mb,s.z-I.Ab,s.dv))}if(n<this.Zb-1){const t=this.Xb[n+1][h][e];t&&t.update&&I.eb.FI(t)}if(h<I.Ib){const t=o[h+1][e];t&&t.update&&I.eb.FI(t)}if(e<I.gb){const t=o[h][e+1];t&&t.update&&I.eb.FI(t)}if(h>I.Ib){const t=o[h-1][e];t&&t.update&&I.eb.FI(t)}if(e>I.gb){const t=o[h][e-1];t&&t.update&&I.eb.FI(t)}}};Jv=(t,i,s,e,n,r,o,l)=>{let a,c,f,u,d=a=(s<<7)-I.pb,y=c=(e<<7)-I.Ab,p=f=d+128,m=u=y+128,A=this.Vb[i][s][e]-I.mb,g=this.Vb[i][s+1][e]-I.mb,_=this.Vb[i][s+1][e+1]-I.mb,C=this.Vb[i][s][e+1]-I.mb,E=y*o+d*l>>16;if(y=y*l-d*o>>16,d=E,E=A*r-y*n>>16,y=A*n+y*r>>16,A=E,y<50)return;if(E=c*o+p*l>>16,c=c*l-p*o>>16,p=E,E=g*r-c*n>>16,c=g*n+c*r>>16,g=E,c<50)return;if(E=m*o+f*l>>16,m=m*l-f*o>>16,f=E,E=_*r-m*n>>16,m=_*n+m*r>>16,_=E,m<50)return;if(E=u*o+a*l>>16,u=u*l-a*o>>16,a=E,E=C*r-u*n>>16,u=C*n+u*r>>16,C=E,u<50)return;const T=h.Z.ta+((d<<9)/y|0),b=h.Z.ia+((A<<9)/y|0),v=h.Z.ta+((p<<9)/c|0),O=h.Z.ia+((g<<9)/c|0),L=h.Z.ta+((f<<9)/m|0),S=h.Z.ia+((_<<9)/m|0),k=h.Z.ta+((a<<9)/u|0),R=h.Z.ia+((C<<9)/u|0);if(h.Z.alpha=0,(L-k)*(O-R)-(S-R)*(v-k)>0)if(h.Z.uO=L<0||k<0||v<0||L>w.Z.dO||k>w.Z.dO||v>w.Z.dO,I.Ob&&this.wO(I.Ll,I.Sl,S,R,O,L,k,v)&&(I.nf=s,I.rf=e),-1===t.yO)12345678!==t.pO&&h.Z.mO(L,k,v,S,R,O,t.pO,t.AO,t.IO);else if(I.ht){const i=I.Wb[t.yO];h.Z.mO(L,k,v,S,R,O,this.gO(i,t.pO),this.gO(i,t.AO),this.gO(i,t.IO))}else t.flat?h.Z._O(L,k,v,S,R,O,t.pO,t.AO,t.IO,d,A,y,p,a,g,C,c,u,t.yO):h.Z._O(L,k,v,S,R,O,t.pO,t.AO,t.IO,f,_,m,a,p,C,g,u,c,t.yO);if(!((T-v)*(R-O)-(b-O)*(k-v)<=0))if(h.Z.uO=T<0||v<0||k<0||T>w.Z.dO||v>w.Z.dO||k>w.Z.dO,I.Ob&&this.wO(I.Ll,I.Sl,b,O,R,T,v,k)&&(I.nf=s,I.rf=e),-1!==t.yO){if(!I.ht)return void h.Z._O(T,v,k,b,O,R,t.CO,t.IO,t.AO,d,A,y,p,a,g,C,c,u,t.yO);const i=I.Wb[t.yO];h.Z.mO(T,v,k,b,O,R,this.gO(i,t.CO),this.gO(i,t.IO),this.gO(i,t.AO))}else 12345678!==t.CO&&h.Z.mO(T,v,k,b,O,R,t.CO,t.IO,t.AO)};Qv=(t,i,s,e,n,r,o)=>{let l=s.AC.length;for(let t=0;t<l;t++){let i=s.AC[t]-I.pb,l=s.gC[t]-I.mb,a=s.IC[t]-I.Ab,c=a*r+i*o>>16;if(a=a*o-i*r>>16,i=c,c=l*n-a*e>>16,a=l*e+a*n>>16,l=c,a<50)return;s.EO&&(y.Z.TO[t]=i,y.Z.bO[t]=l,y.Z.vO[t]=a),y.Z.OO[t]=h.Z.ta+((i<<9)/a|0),y.Z.LO[t]=h.Z.ia+((l<<9)/a|0)}h.Z.alpha=0,l=s.SO.length;for(let e=0;e<l;e++){const n=s.SO[e],r=s.kO[e],o=s.RO[e],l=y.Z.OO[n],a=y.Z.OO[r],c=y.Z.OO[o],f=y.Z.LO[n],u=y.Z.LO[r],d=y.Z.LO[o];if((l-a)*(d-u)-(f-u)*(c-a)>0)if(h.Z.uO=l<0||a<0||c<0||l>w.Z.dO||a>w.Z.dO||c>w.Z.dO,I.Ob&&this.wO(I.Ll,I.Sl,f,u,d,l,a,c)&&(I.nf=t,I.rf=i),s.EO&&-1!==s.EO[e])if(I.ht){const t=I.Wb[s.EO[e]];h.Z.mO(l,a,c,f,u,d,this.gO(t,s.MO[e]),this.gO(t,s.xO[e]),this.gO(t,s.NO[e]))}else s.flat?h.Z._O(l,a,c,f,u,d,s.MO[e],s.xO[e],s.NO[e],y.Z.TO[0],y.Z.bO[0],y.Z.vO[0],y.Z.TO[1],y.Z.TO[3],y.Z.bO[1],y.Z.bO[3],y.Z.vO[1],y.Z.vO[3],s.EO[e]):h.Z._O(l,a,c,f,u,d,s.MO[e],s.xO[e],s.NO[e],y.Z.TO[n],y.Z.bO[n],y.Z.vO[n],y.Z.TO[r],y.Z.TO[o],y.Z.bO[r],y.Z.bO[o],y.Z.vO[r],y.Z.vO[o],s.EO[e]);else 12345678!==s.MO[e]&&h.Z.mO(l,a,c,f,u,d,s.MO[e],s.xO[e],s.NO[e])}};$v=(t,i,s)=>{const h=this.zb[t][i][s];if(h===-I.Uf)return!1;if(h===I.Uf)return!0;{const h=i<<7,e=s<<7;return this.PO(h+1,this.Vb[t][i][s],e+1)&&this.PO(h+128-1,this.Vb[t][i+1][s],e+1)&&this.PO(h+128-1,this.Vb[t][i+1][s+1],e+128-1)&&this.PO(h+1,this.Vb[t][i][s+1],e+128-1)?(this.zb[t][i][s]=I.Uf,!0):(this.zb[t][i][s]=-I.Uf,!1)}};nO=(t,i,s,h)=>{if(!this.$v(t,i,s))return!1;const e=i<<7,n=s<<7,r=this.Vb[t][i][s]-1,o=r-120,l=r-230,a=r-238;if(h<16){if(1===h){if(e>I.pb){if(!this.PO(e,r,n))return!1;if(!this.PO(e,r,n+128))return!1}if(t>0){if(!this.PO(e,o,n))return!1;if(!this.PO(e,o,n+128))return!1}return!!this.PO(e,l,n)&&this.PO(e,l,n+128)}if(2===h){if(n<I.Ab){if(!this.PO(e,r,n+128))return!1;if(!this.PO(e+128,r,n+128))return!1}if(t>0){if(!this.PO(e,o,n+128))return!1;if(!this.PO(e+128,o,n+128))return!1}return!!this.PO(e,l,n+128)&&this.PO(e+128,l,n+128)}if(4===h){if(e<I.pb){if(!this.PO(e+128,r,n))return!1;if(!this.PO(e+128,r,n+128))return!1}if(t>0){if(!this.PO(e+128,o,n))return!1;if(!this.PO(e+128,o,n+128))return!1}return!!this.PO(e+128,l,n)&&this.PO(e+128,l,n+128)}if(8===h){if(n>I.Ab){if(!this.PO(e,r,n))return!1;if(!this.PO(e+128,r,n))return!1}if(t>0){if(!this.PO(e,o,n))return!1;if(!this.PO(e+128,o,n))return!1}return!!this.PO(e,l,n)&&this.PO(e+128,l,n)}}return!!this.PO(e+64,a,n+64)&&(16===h?this.PO(e,l,n+128):32===h?this.PO(e+128,l,n+128):64===h?this.PO(e+128,l,n):128===h?this.PO(e,l,n):(console.warn('Warning unsupported wall type!'),!0))};visible=(t,i,s,h)=>{if(this.$v(t,i,s)){const e=i<<7,n=s<<7;return this.PO(e+1,this.Vb[t][i][s]-h,n+1)&&this.PO(e+128-1,this.Vb[t][i+1][s]-h,n+1)&&this.PO(e+128-1,this.Vb[t][i+1][s+1]-h,n+128-1)&&this.PO(e+1,this.Vb[t][i][s+1]-h,n+128-1)}return!1};fO=(t,i,s,h,e,n)=>{let r,o;if(i!==s||h!==e){for(r=i;r<=s;r++)for(o=h;o<=e;o++)if(this.zb[t][r][o]===-I.Uf)return!1;o=1+(i<<7);const l=2+(h<<7),a=this.Vb[t][i][h]-n;if(!this.PO(o,a,l))return!1;const c=(s<<7)-1;if(!this.PO(c,a,l))return!1;const f=(e<<7)-1;return!!this.PO(o,a,f)&&this.PO(c,a,f)}return!!this.$v(t,i,h)&&(r=i<<7,o=h<<7,this.PO(r+1,this.Vb[t][i][h]-n,o+1)&&this.PO(r+128-1,this.Vb[t][i+1][h]-n,o+1)&&this.PO(r+128-1,this.Vb[t][i+1][h+1]-n,o+128-1)&&this.PO(r+1,this.Vb[t][i][h+1]-n,o+128-1))};PO=(t,i,s)=>{for(let h=0;h<I.Iu;h++){const e=I.hb[h];if(e)if(1===e.mode){const h=e.vv-t;if(h>0){const t=e.Lv+(e.Yv*h>>8),n=e.Sv+(e.Zv*h>>8),r=e.bv+(e.Vv*h>>8),o=e.OC+(e.Xv*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(2===e.mode){const h=t-e.vv;if(h>0){const t=e.Lv+(e.Yv*h>>8),n=e.Sv+(e.Zv*h>>8),r=e.bv+(e.Vv*h>>8),o=e.OC+(e.Xv*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(3===e.mode){const h=e.Lv-s;if(h>0){const s=e.vv+(e.zv*h>>8),n=e.Ov+(e.jv*h>>8),r=e.bv+(e.Vv*h>>8),o=e.OC+(e.Xv*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(4===e.mode){const h=s-e.Lv;if(h>0){const s=e.vv+(e.zv*h>>8),n=e.Ov+(e.jv*h>>8),r=e.bv+(e.Vv*h>>8),o=e.OC+(e.Xv*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(5===e.mode){const h=i-e.bv;if(h>0){const i=e.vv+(e.zv*h>>8),n=e.Ov+(e.jv*h>>8),r=e.Lv+(e.Yv*h>>8),o=e.Sv+(e.Zv*h>>8);if(t>=i&&t<=n&&s>=r&&s<=o)return!0}}}return!1};wO=(t,i,s,h,e,n,r,o)=>{if(i<s&&i<h&&i<e)return!1;if(i>s&&i>h&&i>e)return!1;if(t<n&&t<r&&t<o)return!1;if(t>n&&t>r&&t>o)return!1;const l=(i-h)*(o-r)-(t-r)*(e-h);return((i-s)*(r-n)-(t-n)*(h-s))*l>0&&l*((i-e)*(n-o)-(t-o)*(s-e))>0};gO=(t,i)=>((i=(127-i)*(127&t)/160|0)<2?i=2:i>126&&(i=126),(65408&t)+i)}},9129:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(3064);class e extends h.Z{}},682:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(3064);class e extends h.Z{gm;AI;Am;Im;index;mI;ol;rl;constructor(t,i,s,h,e,n,r){super(),this.gm=i,this.AI=s,this.Am=h,this.Im=e,this.index=t,this.mI=n,r&&-1!==n.al&&this.mI.delay?(this.ol=Math.random()*this.mI.ll|0,this.rl=Math.random()*this.mI.delay[this.ol]|0):(this.ol=-1,this.rl=0)}}},1353:(t,i,s)=>{s.d(i,{Z:()=>o});var h=s(8839),e=s(9178),n=s(551),r=s(8067);class o extends h.Z{type=null;draw=()=>{if(!this.type)return null;if(-1===this.TA||-1===this.OA)return this.NC();const t=this.NC();if(!t)return null;const i=n.Z.To[this.TA],s=e.Z.O_(i.ha(),!0,!i.hC,!1);s.translate(-this.bA,0,0),s.va(),i.mI&&i.mI.frames&&s.Oa(i.mI.frames[this.OA]),s.EC=null,s.TC=null,128===i.MC&&128===i.xC||s.scale(i.MC,i.xC,i.MC),s.La(64+i.nC,850+i.rC,-30,-50,-30,!0);const h=[t,s],r=e.Z.DO(h,2);return 1===this.type.size&&(r.UC=!0),r};isVisible=()=>null!==this.type;NC=()=>{if(!this.type)return null;if(this.jp>=0&&0===this.AA){const t=r.Z.To[this.jp].frames;if(t){const i=t[this.pA];let s=-1;if(this.iI>=0&&this.iI!==this.ba){const t=r.Z.To[this.iI].frames;t&&(s=t[this.kI])}return this.type.NC(i,s,r.Z.To[this.jp].xI)}}let t=-1;if(this.iI>=0){const i=r.Z.To[this.iI].frames;i&&(t=i[this.kI])}const i=this.type.NC(t,-1,null);return i?(this.height=i.OC,i):null}}},7973:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(3064);class e extends h.Z{index;count;constructor(t,i){super(),this.index=t,this.count=i}}},8839:(t,i,s)=>{s.d(i,{Z:()=>r});var h=s(9129),e=s(8067),n=s(9345);class r extends h.Z{x=0;z=0;rI=0;oI=!1;size=1;ba=-1;LI=-1;BA=-1;HA=-1;YA=-1;VA=-1;DI=-1;iu=null;ru=100;eu=0;nu=0;fu=0;cu=0;ou=-1e3;lu=0;au=0;IA=-1;gA=0;_A=0;iI=-1;kI=0;SI=0;jp=-1;pA=0;mA=0;AA=0;yA=0;TA=-1;OA=0;LA=0;vA=0;bA=0;SA=0;RA=0;kA=0;MA=0;xA=0;NA=0;PA=0;Uf=0;height=0;OI=0;pathLength=0;af=new Int32Array(10);cf=new Int32Array(10);NI=new n.to(10,!1);vI=0;dA=-1;wA=-1;CA=-1;EA=-1;move=(t,i,s)=>{if(-1!==this.jp&&e.Z.To[this.jp].priority<=1&&(this.jp=-1),!t){const t=i-this.af[0],h=s-this.cf[0];if(t>=-8&&t<=8&&h>=-8&&h<=8){this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.af[t]=this.af[t-1],this.cf[t]=this.cf[t-1],this.NI[t]=this.NI[t-1];return this.af[0]=i,this.cf[0]=s,void(this.NI[0]=!1)}}this.pathLength=0,this.vI=0,this.af[0]=i,this.cf[0]=s,this.x=128*this.af[0]+64*this.size,this.z=128*this.cf[0]+64*this.size};step=(t,i)=>{let s=this.af[0],h=this.cf[0];0===i?(s--,h++):1===i?h++:2===i?(s++,h++):3===i?s--:4===i?s++:5===i?(s--,h--):6===i?h--:7===i&&(s++,h--),-1!==this.jp&&e.Z.To[this.jp].priority<=1&&(this.jp=-1),this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.af[t]=this.af[t-1],this.cf[t]=this.cf[t-1],this.NI[t]=this.NI[t-1];this.af[0]=s,this.cf[0]=h,this.NI[0]=t}}},4191:(t,i,s)=>{s.d(i,{Z:()=>u});var h=s(8839),e=s(9178),n=s(5542),r=s(551),o=s(8067),l=s(8809),a=s(1840),c=s(8934),f=s(9345);class u extends h.Z{static Ta=[9104,10275,7595,3610,7975,8526,918,38802,24466,10145,58654,5027,1457,16565,34991,25486];static Ea=[[6798,107,10283,16,4797,7744,5799,4634,33697,22433,2983,54193],[8741,12,64030,43162,7735,8404,1701,38430,24094,10153,56621,4783,1341,16578,35003,25239],[25238,8742,12,64030,43162,7735,8404,1701,38430,24094,10153,56621,4783,1341,16578,35003],[4626,11146,6439,12,4758,10270],[4550,4537,5681,5673,5790,6806,8076,4574]];static bo=new n.Z(200);name=null;visible=!1;FO=0;tu=0;UO=new Uint16Array(12);BO=new Uint16Array(5);Ga=0;GO=0n;y=0;hI=0;eI=0;UI=0;GI=0;BI=0;sI=null;aI=0;cI=0;fI=0;uI=0;ht=!1;draw(t){if(!this.visible)return null;let i=this.NC();if(this.height=i.OC,i.UC=!0,this.ht)return i;if(-1!==this.TA&&-1!==this.OA){const t=r.Z.To[this.TA],s=e.Z.O_(t.ha(),!0,!t.hC,!1);s.translate(-this.bA,0,0),s.va(),t.mI&&t.mI.frames&&s.Oa(t.mI.frames[this.OA]),s.EC=null,s.TC=null,128===t.MC&&128===t.xC||s.scale(t.MC,t.xC,t.MC),s.La(t.nC+64,t.rC+850,-30,-50,-30,!0);const h=[i,s];i=e.Z.DO(h,2)}if(this.sI&&(t>=this.eI&&(this.sI=null),t>=this.hI&&t<this.eI)){const t=this.sI;if(t){t.translate(this.GI-this.y,this.UI-this.x,this.BI-this.z),512===this.OI?(t.bC(),t.bC(),t.bC()):1024===this.OI?(t.bC(),t.bC()):1536===this.OI&&t.bC();const s=[i,t];i=e.Z.DO(s,2),512===this.OI?t.bC():1024===this.OI?(t.bC(),t.bC()):1536===this.OI&&(t.bC(),t.bC(),t.bC()),t.translate(this.y-this.GI,this.x-this.UI,this.z-this.BI)}}return i.UC=!0,i}isVisible=()=>this.visible;read=t=>{t.Mc=0,this.FO=t.vy,this.tu=t.vy;for(let i=0;i<12;i++){const s=t.vy;this.UO[i]=0===s?0:(s<<8)+t.vy}for(let i=0;i<5;i++){let s=t.vy;(s<0||s>=u.Ea[i].length)&&(s=0),this.BO[i]=s}this.ba=t.Cy,65535===this.ba&&(this.ba=-1),this.LI=t.Cy,65535===this.LI&&(this.LI=-1),this.BA=t.Cy,65535===this.BA&&(this.BA=-1),this.HA=t.Cy,65535===this.HA&&(this.HA=-1),this.YA=t.Cy,65535===this.YA&&(this.YA=-1),this.VA=t.Cy,65535===this.VA&&(this.VA=-1),this.DI=t.Cy,65535===this.DI&&(this.DI=-1),this.name=c.Z.ma(c.Z.Aa(t.xc)),this.Ga=t.vy,this.visible=!0,this.GO=0n;for(let t=0;t<12;t++)this.GO<<=0x4n,this.UO[t]>=256&&(this.GO+=BigInt(this.UO[t])-256n);this.UO[0]>=256&&(this.GO+=BigInt(this.UO[0])-256n>>4n),this.UO[1]>=256&&(this.GO+=BigInt(this.UO[1])-256n>>8n);for(let t=0;t<5;t++)this.GO<<=0x3n,this.GO+=BigInt(this.BO[t]);this.GO<<=0x1n,this.GO+=BigInt(this.FO)};Py=()=>{if(!this.visible)return null;const t=new f.to(12,null);let i=0;for(let s=0;s<12;s++){const h=this.UO[s];if(h>=256&&h<512&&(t[i++]=l.Z.To[h-256].Py()),h>=512){const s=a.Z.get(h-512).Py(this.FO);s&&(t[i++]=s)}}const s=e.Z._a(t,i);for(let t=0;t<5;t++)0!==this.BO[t]&&(s.Ca(u.Ea[t][0],u.Ea[t][this.BO[t]]),1===t&&s.Ca(u.Ta[0],u.Ta[this.BO[t]]));return s};NC=()=>{let t=this.GO,i=-1,s=-1,h=-1,n=-1;if(this.jp>=0&&0===this.AA){const e=o.Z.To[this.jp];if(e.frames&&(i=e.frames[this.pA]),this.iI>=0&&this.iI!==this.ba){const t=o.Z.To[this.iI].frames;t&&(s=t[this.kI])}e.dE>=0&&(h=e.dE,t+=BigInt(h-this.UO[5])<<8n),e.wE>=0&&(n=e.wE,t+=BigInt(n-this.UO[3])<<16n)}else if(this.iI>=0){const t=o.Z.To[this.iI].frames;t&&(i=t[this.kI])}let r=u.bo?.get(t);if(!r){const i=new f.to(12,null);let s=0;for(let t=0;t<12;t++){let e=this.UO[t];if(n>=0&&3===t&&(e=n),h>=0&&5===t&&(e=h),e>=256&&e<512){const t=l.Z.To[e-256].ha();t&&(i[s++]=t)}if(e>=512){const t=a.Z.get(e-512).uE(this.FO);t&&(i[s++]=t)}}r=e.Z._a(i,s);for(let t=0;t<5;t++)0!==this.BO[t]&&(r.Ca(u.Ea[t][0],u.Ea[t][this.BO[t]]),1===t&&r.Ca(u.Ta[0],u.Ta[this.BO[t]]));r.va(),r.La(64,850,-30,-50,-30,!0),u.bo?.put(t,r)}if(this.ht)return r;const c=e.Z.PC(r,!0);return-1!==i&&-1!==s?c.DC(i,s,o.Z.To[this.jp].xI):-1!==i&&c.Oa(i),c.FC(),c.EC=null,c.TC=null,c}}},1810:(t,i,s)=>{s.d(i,{Z:()=>r});var h=s(551),e=s(9129),n=s(9178);class r extends e.Z{HO;level;WO;YO;ZO;offsetY;wI;dI;VO;arc;target;mobile=!1;x=0;z=0;y=0;velocityX=0;XO=0;zO=0;velocityY=0;jO=0;rI=0;pitch=0;ol=0;rl=0;constructor(t,i,s,e,n,r,o,l,a,c,f){super(),this.HO=h.Z.To[t],this.level=i,this.WO=s,this.YO=n,this.ZO=e,this.wI=r,this.dI=o,this.VO=l,this.arc=a,this.target=c,this.offsetY=f}yI=(t,i,s,h)=>{if(!this.mobile){const i=t-this.WO,h=s-this.YO,e=Math.sqrt(i*i+h*h);this.x=this.WO+i*this.arc/e,this.z=this.YO+h*this.arc/e,this.y=this.ZO}const e=this.dI+1-h;this.velocityX=(t-this.x)/e,this.XO=(s-this.z)/e,this.zO=Math.sqrt(this.velocityX*this.velocityX+this.XO*this.XO),this.mobile||(this.velocityY=-this.zO*Math.tan(.02454369*this.VO)),this.jO=2*(i-this.y-this.velocityY*e)/(e*e)};update=t=>{if(this.mobile=!0,this.x+=this.velocityX*t,this.z+=this.XO*t,this.y+=this.velocityY*t+.5*this.jO*t*t,this.velocityY+=this.jO*t,this.rI=2047&(325.949*Math.atan2(this.velocityX,this.XO)+1024|0),this.pitch=2047&(325.949*Math.atan2(this.velocityY,this.zO)|0),this.HO.mI&&this.HO.mI.delay)for(this.rl+=t;this.rl>this.HO.mI.delay[this.ol];)this.rl-=this.HO.mI.delay[this.ol]+1,this.ol++,this.ol>=this.HO.mI.ll&&(this.ol=0)};draw=()=>{const t=this.HO.ha(),i=n.Z.O_(t,!0,!this.HO.hC,!1);return this.HO.mI&&this.HO.mI.frames&&(i.va(),i.Oa(this.HO.mI.frames[this.ol]),i.EC=null,i.TC=null),128===this.HO.MC&&128===this.HO.xC||i.scale(this.HO.MC,this.HO.xC,this.HO.MC),i.KO(this.pitch),i.La(64+this.HO.nC,850+this.HO.rC,-30,-50,-30,!0),i}}},5659:(t,i,s)=>{s.d(i,{Z:()=>r});var h=s(9129),e=s(551),n=s(9178);class r extends h.Z{type;level;x;z;y;wI;pI=!1;ol=0;rl=0;constructor(t,i,s,h,n,r,o){super(),this.type=e.Z.To[t],this.level=i,this.x=s,this.z=h,this.y=n,this.wI=r+o}update=t=>{if(this.type.mI&&this.type.mI.delay)for(this.rl+=t;this.rl>this.type.mI.delay[this.ol];)this.rl-=this.type.mI.delay[this.ol]+1,this.ol++,this.ol>=this.type.mI.ll&&(this.ol=0,this.pI=!0)};draw=()=>{const t=this.type.ha(),i=n.Z.O_(t,!0,!this.type.hC,!1);return!this.pI&&this.type.mI&&this.type.mI.frames&&(i.va(),i.Oa(this.type.mI.frames[this.ol]),i.EC=null,i.TC=null),128===this.type.MC&&128===this.type.xC||i.scale(this.type.MC,this.type.xC,this.type.MC),0!==this.type.orientation&&(90===this.type.orientation?i.bC():180===this.type.orientation?(i.bC(),i.bC()):270===this.type.orientation&&(i.bC(),i.bC(),i.bC())),i.La(64+this.type.nC,850+this.type.rC,-30,-50,-30,!0),i}}},4155:(t,i,s)=>{s.d(i,{Z:()=>h});class h{y;x;z;model;dv;info;constructor(t,i,s,h,e,n){this.y=t,this.x=i,this.z=s,this.model=h,this.dv=e,this.info=n}}},6539:(t,i,s)=>{s.d(i,{Z:()=>h});class h{level;y;x;z;model;tO;rI;wv;_v;yv;Cv;dv;info;cO=0;Uf=0;constructor(t,i,s,h,e,n,r,o,l,a,c,f,u){this.level=t,this.y=i,this.x=s,this.z=h,this.model=e,this.tO=n,this.rI=r,this.wv=o,this._v=l,this.yv=a,this.Cv=c,this.dv=f,this.info=u}}},7396:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(3064);class e extends h.Z{Sp;ed;x;z;_m;angle;shape;dI;constructor(t,i,s,h,e,n,r,o){super(),this.Sp=t,this.ed=i,this.x=s,this.z=h,this._m=e,this.angle=n,this.shape=r,this.dI=o}}},6150:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(3064);class e extends h.Z{Sp;ed;x;z;_m;angle;shape;kp;Rp;Mp;constructor(t,i,s,h,e,n,r,o,l,a){super(),this.Sp=t,this.ed=i,this.x=s,this.z=h,this._m=e,this.angle=n,this.shape=r,this.kp=o,this.Rp=l,this.Mp=a}}},6711:(t,i,s)=>{s.d(i,{Z:()=>h});class h{y;x;z;aO;lO;oO;dv;offset;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.aO=h,this.lO=e,this.oO=n,this.dv=r,this.offset=o}}},4138:(t,i,s)=>{s.d(i,{Z:()=>h});class h{aI;fI;cI;uI;type;vv;Ov;Lv;Sv;bv;OC;mode=0;zv=0;jv=0;Yv=0;Zv=0;Vv=0;Xv=0;constructor(t,i,s,h,e,n,r,o,l,a,c){this.aI=t,this.fI=i,this.cI=s,this.uI=h,this.type=e,this.vv=n,this.Ov=r,this.Lv=o,this.Sv=l,this.bv=a,this.OC=c}}},220:(t,i,s)=>{s.d(i,{Z:()=>n});var h=s(3064),e=s(9345);class n extends h.Z{level;x;z;qv;rv;Hv;iv=null;hv=null;lv=null;av=null;ev=null;ov=null;Qb=null;nv=0;Wv=0;tv=0;visible=!1;update=!1;Uv=!1;Bv=0;hO=0;eO=0;iO=0;constructor(t,i,s){super(),this.qv=this.level=t,this.x=i,this.z=s,this.rv=new e.to(5,null),this.Hv=new Int32Array(5)}}},8570:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static OO=new Int32Array(6);static LO=new Int32Array(6);static TO=new Int32Array(6);static bO=new Int32Array(6);static vO=new Int32Array(6);static qO=[Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,2,6),Int8Array.of(1,3,5,7,2,8),Int8Array.of(1,3,5,7,2,8),Int8Array.of(1,3,5,7,11,12),Int8Array.of(1,3,5,7,11,12),Int8Array.of(1,3,5,7,13,14)];static $O=[Int8Array.of(0,1,2,3,0,0,1,3),Int8Array.of(1,1,2,3,1,0,1,3),Int8Array.of(0,1,2,3,1,0,1,3),Int8Array.of(0,0,1,2,0,0,2,4,1,0,4,3),Int8Array.of(0,0,1,4,0,0,4,3,1,1,2,4),Int8Array.of(0,0,4,3,1,0,1,2,1,0,2,4),Int8Array.of(0,1,2,4,1,0,1,4,1,0,4,3),Int8Array.of(0,4,1,2,0,4,2,5,1,0,4,5,1,0,5,3),Int8Array.of(0,4,1,2,0,4,2,3,0,4,3,5,1,0,4,5),Int8Array.of(0,0,4,5,1,4,1,2,1,4,2,3,1,4,3,5),Int8Array.of(0,0,1,5,0,1,4,5,0,1,2,4,1,0,5,3,1,5,4,3,1,4,2,3),Int8Array.of(1,0,1,5,1,1,4,5,1,1,2,4,0,0,5,3,0,5,4,3,0,4,2,3),Int8Array.of(1,0,5,4,1,0,1,5,0,0,4,3,0,4,5,3,0,5,2,3,0,1,2,5)];static JO=128;static QO=this.JO/2|0;static tL=this.JO/4|0;static iL=3*this.JO/4|0;AC;gC;IC;MO;xO;NO;SO;kO;RO;EO;flat;shape;rotation;Pv;Dv;constructor(t,i,s,e,n,r,o,l,a,c,f,u,d,w,y,p,m,A,I){this.flat=!(m!==e||m!==w||m!==l),this.shape=i,this.rotation=r,this.Pv=d,this.Dv=a;const g=h.qO[i],_=g.length;this.AC=new Int32Array(_),this.gC=new Int32Array(_),this.IC=new Int32Array(_);const C=new Int32Array(_),E=new Int32Array(_),T=t*h.JO,b=A*h.JO;for(let t=0;t<_;t++){let i,a,f,d,A,_=g[t];0==(1&_)&&_<=8&&(_=1+(_-r-r-1&7)),_>8&&_<=12&&(_=9+(_-r-9&3)),_>12&&_<=16&&(_=13+(_-r-13&3)),1===_?(i=T,a=b,f=m,d=o,A=c):2===_?(i=T+h.QO,a=b,f=m+e>>1,d=o+I>>1,A=c+s>>1):3===_?(i=T+h.JO,a=b,f=e,d=I,A=s):4===_?(i=T+h.JO,a=b+h.QO,f=e+w>>1,d=I+n>>1,A=s+y>>1):5===_?(i=T+h.JO,a=b+h.JO,f=w,d=n,A=y):6===_?(i=T+h.QO,a=b+h.JO,f=w+l>>1,d=n+p>>1,A=y+u>>1):7===_?(i=T,a=b+h.JO,f=l,d=p,A=u):8===_?(i=T,a=b+h.QO,f=l+m>>1,d=p+o>>1,A=u+c>>1):9===_?(i=T+h.QO,a=b+h.tL,f=m+e>>1,d=o+I>>1,A=c+s>>1):10===_?(i=T+h.iL,a=b+h.QO,f=e+w>>1,d=I+n>>1,A=s+y>>1):11===_?(i=T+h.QO,a=b+h.iL,f=w+l>>1,d=n+p>>1,A=y+u>>1):12===_?(i=T+h.tL,a=b+h.QO,f=l+m>>1,d=p+o>>1,A=u+c>>1):13===_?(i=T+h.tL,a=b+h.tL,f=m,d=o,A=c):14===_?(i=T+h.iL,a=b+h.tL,f=e,d=I,A=s):15===_?(i=T+h.iL,a=b+h.iL,f=w,d=n,A=y):(i=T+h.tL,a=b+h.iL,f=l,d=p,A=u),this.AC[t]=i,this.gC[t]=f,this.IC[t]=a,C[t]=d,E[t]=A}const v=h.$O[i],O=v.length/4|0;this.SO=new Int32Array(O),this.kO=new Int32Array(O),this.RO=new Int32Array(O),this.MO=new Int32Array(O),this.xO=new Int32Array(O),this.NO=new Int32Array(O),this.EO=-1!==f?new Int32Array(O):null;let L=0;for(let t=0;t<O;t++){const i=v[L];let s=v[L+1],h=v[L+2],e=v[L+3];L+=4,s<4&&(s=s-r&3),h<4&&(h=h-r&3),e<4&&(e=e-r&3),this.SO[t]=s,this.kO[t]=h,this.RO[t]=e,0===i?(this.MO[t]=C[s],this.xO[t]=C[h],this.NO[t]=C[e],this.EO&&(this.EO[t]=-1)):(this.MO[t]=E[s],this.xO[t]=E[h],this.NO[t]=E[e],this.EO&&(this.EO[t]=f))}}}},9190:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static HT=0;static sv=1;static sL=2;static hL=3;static eL=4;static nL=5;static QO=6;static tL=7;static iL=8;static rL=9;static oL=10;static lL=11}},9865:(t,i,s)=>{s.d(i,{Z:()=>h});class h{CO;IO;pO;AO;yO;color;flat;constructor(t,i,s,h,e,n,r){this.CO=t,this.IO=i,this.pO=s,this.AO=h,this.yO=e,this.color=n,this.flat=r}}},3806:(t,i,s)=>{s.d(i,{Z:()=>h});class h{y;x;z;sO;rO;cv;fv;dv;info;constructor(t,i,s,h,e,n,r,o,l){this.y=t,this.x=i,this.z=s,this.sO=h,this.rO=e,this.cv=n,this.fv=r,this.dv=o,this.info=l}}},9118:(t,i,s)=>{s.d(i,{Z:()=>h});class h{y;x;z;type;angle;model;dv;info;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.type=h,this.angle=e,this.model=n,this.dv=r,this.info=o}}},3832:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(3064);class e{size;aL;constructor(t){this.size=t,this.aL=[];for(let i=0;i<t;i++)this.aL[i]=new h.Z}get=t=>{const i=this.aL[Number(t&BigInt(this.size-1))];if(!i.qw)return null;for(let s=i.qw;s!==i;s=s.qw)if(s&&s.id===t)return s;return null};put=(t,i)=>{i.next&&i.xy();const s=this.aL[Number(t&BigInt(this.size-1))];i.next=s.next,i.qw=s,i.next&&(i.next.qw=i),i.qw.next=i,i.id=t}}},6327:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(3064);class e extends h.Z{cL;fL;constructor(){super(),this.cL=this,this.fL=this}uL=()=>{this.fL&&this.cL&&(this.fL.cL=this.cL,this.cL.fL=this.fL,this.cL=null,this.fL=null)}}},8934:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static dL=['_','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9'];static Ru=t=>{t=t.trim();let i=0n;for(let s=0;s<t.length&&s<12;s++){const h=t.charCodeAt(s);i*=37n,h>=65&&h<=90?i+=BigInt(h+1-65):h>=97&&h<=122?i+=BigInt(h+1-97):h>=48&&h<=57&&(i+=BigInt(h+27-48))}return i};static Aa=t=>{if(t<0n||t>=6582952005840035281n)return'invalid_name';if(t%37n===0n)return'invalid_name';let i=0;const s=Array(12);for(;0n!==t;){const h=t;t/=37n,s[11-i++]=this.dL[Number(h-37n*t)]}return s.slice(12-i).join('')};static Fw=t=>{const i=[...t.toLowerCase()];let s=!0;for(let t=0;t<i.length;t++){const h=i[t];s&&h>='a'&&h<='z'&&(i[t]=h.toUpperCase(),s=!1),'.'!==h&&'!'!==h||(s=!0)}return i.join('')};static Sc=t=>{let i='';for(let s=0;s<t.length;s++)i+='*';return i};static Pa=t=>(t>>24&255)+'.'+(t>>16&255)+'.'+(t>>8&255)+'.'+(255&t);static ma=t=>{if(0===t.length)return t;const i=[...t];for(let t=0;t<i.length;t++)'_'===i[t]&&(i[t]=' ',t+1<i.length&&i[t+1]>='a'&&i[t+1]<='z'&&(i[t+1]=String.fromCharCode(i[t+1].charCodeAt(0)+'A'.charCodeAt(0)-97)));return i[0]>='a'&&i[0]<='z'&&(i[0]=String.fromCharCode(i[0].charCodeAt(0)+'A'.charCodeAt(0)-97)),i.join('')};static b_=t=>{const i=t.toUpperCase();let s=0n;for(let t=0;t<i.length;t++)s=61n*s+BigInt(i.charCodeAt(t))-32n,s=s+(s>>56n)&0xffffffffffffffn;return s}}},9080:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(3064);class e{head;wL=null;constructor(){const t=new h.Z;t.qw=t,t.next=t,this.head=t}FI=t=>{t.next&&t.xy(),t.next=this.head.next,t.qw=this.head,t.next&&(t.next.qw=t),t.qw.next=t};Jw=t=>{t.next&&t.xy(),t.next=this.head,t.qw=this.head.qw,t.next.qw=t,t.qw&&(t.qw.next=t)};Kv=()=>{const t=this.head.qw;return t===this.head?null:(t?.xy(),t)};Kw=()=>{const t=this.head.qw;return t===this.head?(this.wL=null,null):(this.wL=t?.qw||null,t)};Zm=()=>{const t=this.head.next;return t===this.head?(this.wL=null,null):(this.wL=t?.next||null,t)};qw=()=>{const t=this.wL;return t===this.head?(this.wL=null,null):(this.wL=t?.qw||null,t)};next=()=>{const t=this.wL;return t===this.head?(this.wL=null,null):(this.wL=t?.next||null,t)};clear=()=>{for(;;){const t=this.head.qw;if(t===this.head)return;t?.xy()}}}},3064:(t,i,s)=>{s.d(i,{Z:()=>h});class h{id;qw;next;constructor(){this.id=0n,this.qw=this,this.next=this}xy=()=>{this.next&&this.qw&&(this.next.qw=this.qw,this.qw.next=this.next,this.qw=null,this.next=null)}}},5542:(t,i,s)=>{s.d(i,{Z:()=>n});var h=s(8329),e=s(3832);class n{yL;pL;history;available;constructor(t){this.yL=t,this.available=t,this.pL=new e.Z(1024),this.history=new h.Z}get=t=>{const i=this.pL.get(t);return i&&this.history.push(i),i};put=(t,i)=>{if(0===this.available){const t=this.history.pop();t?.xy(),t?.uL()}else this.available--;this.pL.put(t,i),this.history.push(i)};clear=()=>{const t=this.history.pop();t?(t.xy(),t.uL()):this.available=this.yL}}},8329:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(6327);class e{head;constructor(){this.head=new h.Z}push=t=>{t.fL&&t.uL(),t.fL=this.head.fL,t.cL=this.head,t.fL&&(t.fL.cL=t),t.cL.fL=t};pop=()=>{const t=this.head.cL;return t===this.head?null:(t?.uL(),t)}}},6121:(t,i,s)=>{s.d(i,{Yo:()=>e,mL:()=>r,wg:()=>h,AL:()=>n,IL:()=>o});const h=document.getElementById('canvas'),e=h.getContext('2d',{willReadFrequently:!0}),n=document.createElement('canvas'),r=document.createElement('img'),o=n.getContext('2d',{willReadFrequently:!0})},312:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static RED=16711680;static GREEN=65280;static BLUE=255;static Pl=16776960;static _c=65535;static Cc=16711935;static yl=16777215;static Nl=0;static gL=16748608;static bu=8388608;static Tu=128;static _L=16756736;static CL=16740352;static EL=16723968;static TL=12648192;static bL=8453888;static vL=4259584;static fc=9179409;static hd=6116423;static qo=2301979;static $o=5063219;static Qo=7759444;static il=3353893;static vu=8388736;static Ou=13350793;static uu=Int32Array.of(h.Pl,h.RED,h.GREEN,h._c,h.Cc,h.yl)}},2991:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(6327);class e extends h.Z{static tc=new Int32Array;static ZC=0;static VC=0;static top=0;static bottom=0;static left=0;static right=0;static dO=0;static OL=0;static LL=0;static bind=(t,i,s)=>{this.tc=t,this.ZC=i,this.VC=s,this.fl(0,0,i,s)};static wu=()=>{this.left=0,this.top=0,this.right=this.ZC,this.bottom=this.VC,this.dO=this.right-1,this.OL=this.right/2|0};static fl=(t,i,s,h)=>{t<0&&(t=0),i<0&&(i=0),s>this.ZC&&(s=this.ZC),h>this.VC&&(h=this.VC),this.top=i,this.bottom=h,this.left=t,this.right=s,this.dO=this.right-1,this.OL=this.right/2|0,this.LL=this.bottom/2|0};static clear=()=>{const t=this.ZC*this.VC;for(let i=0;i<t;i++)this.tc[i]=0};static wl=(t,i,s,h,e)=>{this.tl(t,i,e,s),this.tl(t,i+h-1,e,s),this.Jo(t,i,e,h),this.Jo(t+s-1,i,e,h)};static tl=(t,i,s,h)=>{if(i<this.top||i>=this.bottom)return;t<this.left&&(h-=this.left-t,t=this.left),t+h>this.right&&(h=this.right-t);const e=t+i*this.ZC;for(let t=0;t<h;t++)this.tc[e+t]=s};static Jo=(t,i,s,h)=>{if(t<this.left||t>=this.right)return;i<this.top&&(h-=this.top-i,i=this.top),i+h>this.bottom&&(h=this.bottom-i);const e=t+i*this.ZC;for(let t=0;t<h;t++)this.tc[e+t*this.ZC]=s};static SL=(t,i,s,h,e)=>{const n=Math.abs(s-t),r=Math.abs(h-i),o=t<s?1:-1,l=i<h?1:-1;let a=n-r;for(;t>=this.left&&t<this.right&&i>=this.top&&i<this.bottom&&(this.tc[t+i*this.ZC]=e),t!==s||i!==h;){const s=2*a;s>-r&&(a-=r,t+=o),s<n&&(a+=n,i+=l)}};static fillRect=(t,i,s,h,e)=>{t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const n=this.ZC-s;let r=t+i*this.ZC;for(let t=-h;t<0;t++){for(let t=-s;t<0;t++)this.tc[r++]=e;r+=n}};static kL=(t,i,s)=>{t<this.left||t>=this.right||i<this.top||i>=this.bottom||(this.tc[t+i*this.ZC]=s)}}},8078:(t,i,s)=>{s.d(i,{Z:()=>r});var h=s(2991),e=s(664),n=s(9345);class r extends h.Z{static ht=!1;static RL=new Int32Array(512);static ML=new Int32Array(2048);static sin=new Int32Array(2048);static cos=new Int32Array(2048);static palette=new Int32Array(65536);static WI=new n.to(50,null);static xL=0;static sc=new Int32Array;static ta=0;static ia=0;static XC=!0;static uO=!1;static alpha=0;static NL=null;static PL=new n.to(50,null);static DL=0;static Uf=0;static HI=new Int32Array(50);static FL=new n.to(50,null);static UL=!1;static BL=new n.to(50,!1);static GL=new Int32Array(50);static{for(let t=1;t<512;t++)this.RL[t]=32768/t|0;for(let t=1;t<2048;t++)this.ML[t]=65536/t|0;for(let t=0;t<2048;t++)this.sin[t]=65536*Math.sin(.0030679615757712823*t)|0,this.cos[t]=65536*Math.cos(.0030679615757712823*t)|0}static _o=()=>{this.RL=null,this.RL=null,this.sin=null,this.cos=null,this.sc=null,this.WI=null,this.BL=null,this.GL=null,this.NL=null,this.PL=null,this.HI=null,this.palette=null,this.FL=null,console.log('Draw3D unloaded!')};static yg=()=>{this.sc=new Int32Array(this.VC);for(let t=0;t<this.VC;t++)this.sc[t]=this.ZC*t;this.ta=this.ZC/2|0,this.ia=this.VC/2|0};static ic=(t,i)=>{this.sc=new Int32Array(i);for(let s=0;s<i;s++)this.sc[s]=t*s;this.ta=t/2|0,this.ia=i/2|0};static fm=()=>{this.NL=null,this.PL.fill(null)};static qa=t=>{this.xL=0;for(let i=0;i<50;i++)try{this.WI[i]=e.Z.Wa(t,i.toString()),this.ht&&128===this.WI[i]?.Rl?this.WI[i]?.HL():this.WI[i]?.$C(),this.xL++}catch(t){}};static YT=t=>{if(0!==this.GL[t])return this.GL[t];const i=this.FL[t];if(!i)return 0;let s=0,h=0,e=0;const n=i.length;for(let t=0;t<n;t++)s+=i[t]>>16&255,h+=i[t]>>8&255,e+=255&i[t];let r=((s/n|0)<<16)+((h/n|0)<<8)+(e/n|0);return r=this.WL(r,1.4),0===r&&(r=1),this.GL[t]=r,r};static $a=t=>{const i=t+.03*Math.random()-.015;let s=0;for(let t=0;t<512;t++){const h=(t/8|0)/64+.0078125,e=(7&t)/8+.0625;for(let t=0;t<128;t++){const n=t/128;let r=n,o=n,l=n;if(0!==e){let t;t=n<.5?n*(e+1):n+e-n*e;const i=2*n-t;let s=h+.3333333333333333;s>1&&s--;let a=h-.3333333333333333;a<0&&a++,r=6*s<1?i+6*(t-i)*s:2*s<1?t:3*s<2?i+(t-i)*(.6666666666666666-s)*6:i,o=6*h<1?i+6*(t-i)*h:2*h<1?t:3*h<2?i+(t-i)*(.6666666666666666-h)*6:i,l=6*a<1?i+6*(t-i)*a:2*a<1?t:3*a<2?i+(t-i)*(.6666666666666666-a)*6:i}const a=((256*r|0)<<16)+((256*o|0)<<8)+(256*l|0);this.palette[s++]=this.WL(a,i)}}for(let t=0;t<50;t++){const s=this.WI[t];if(!s)continue;const h=s.palette;this.FL[t]=new Int32Array(h.length);for(let s=0;s<h.length;s++){const e=this.FL[t];e&&(e[s]=this.WL(h[s],i))}}for(let t=0;t<50;t++)this.YI(t)};static WL=(t,i)=>{const s=(t>>16)/256,h=(t>>8&255)/256,e=(255&t)/256;return((256*Math.pow(s,i)|0)<<16)+((256*Math.pow(h,i)|0)<<8)+(256*Math.pow(e,i)|0)};static Ja=t=>{this.NL||(this.DL=t,this.ht?this.NL=new n.Yn(t,16384):this.NL=new n.Yn(t,65536),this.PL.fill(null))};static mO=(t,i,s,h,e,n,r,o,l)=>{let a=0,c=0;e!==h&&(a=(i-t<<16)/(e-h)|0,c=(o-r<<15)/(e-h)|0);let f=0,u=0;n!==e&&(f=(s-i<<16)/(n-e)|0,u=(l-o<<15)/(n-e)|0);let d=0,w=0;if(n!==h&&(d=(t-s<<16)/(h-n)|0,w=(r-l<<15)/(h-n)|0),h<=e&&h<=n){if(h<this.bottom)if(e>this.bottom&&(e=this.bottom),n>this.bottom&&(n=this.bottom),e<n)if(s=t<<=16,l=r<<=15,h<0&&(s-=d*h,t-=a*h,l-=w*h,r-=c*h,h=0),i<<=16,o<<=15,e<0&&(i-=f*e,o-=u*e,e=0),h!==e&&d<a||h===e&&d>f)for(n-=e,e-=h,h=this.sc[h];;){if(--e<0)for(;;){if(--n<0)return;this.YL(s>>16,i>>16,l>>7,o>>7,this.tc,h,0),s+=d,i+=f,l+=w,o+=u,h+=this.ZC}this.YL(s>>16,t>>16,l>>7,r>>7,this.tc,h,0),s+=d,t+=a,l+=w,r+=c,h+=this.ZC}else for(n-=e,e-=h,h=this.sc[h];;){if(--e<0)for(;;){if(--n<0)return;this.YL(i>>16,s>>16,o>>7,l>>7,this.tc,h,0),s+=d,i+=f,l+=w,o+=u,h+=this.ZC}this.YL(t>>16,s>>16,r>>7,l>>7,this.tc,h,0),s+=d,t+=a,l+=w,r+=c,h+=this.ZC}else if(i=t<<=16,o=r<<=15,h<0&&(i-=d*h,t-=a*h,o-=w*h,r-=c*h,h=0),s<<=16,l<<=15,n<0&&(s-=f*n,l-=u*n,n=0),h!==n&&d<a||h===n&&f>a)for(e-=n,n-=h,h=this.sc[h];;){if(--n<0)for(;;){if(--e<0)return;this.YL(s>>16,t>>16,l>>7,r>>7,this.tc,h,0),s+=f,t+=a,l+=u,r+=c,h+=this.ZC}this.YL(i>>16,t>>16,o>>7,r>>7,this.tc,h,0),i+=d,t+=a,o+=w,r+=c,h+=this.ZC}else for(e-=n,n-=h,h=this.sc[h];;){if(--n<0)for(;;){if(--e<0)return;this.YL(t>>16,s>>16,r>>7,l>>7,this.tc,h,0),s+=f,t+=a,l+=u,r+=c,h+=this.ZC}this.YL(t>>16,i>>16,r>>7,o>>7,this.tc,h,0),i+=d,t+=a,o+=w,r+=c,h+=this.ZC}}else if(e<=n){if(e<this.bottom)if(n>this.bottom&&(n=this.bottom),h>this.bottom&&(h=this.bottom),n<h)if(t=i<<=16,r=o<<=15,e<0&&(t-=a*e,i-=f*e,r-=c*e,o-=u*e,e=0),s<<=16,l<<=15,n<0&&(s-=d*n,l-=w*n,n=0),e!==n&&a<f||e===n&&a>d)for(h-=n,n-=e,e=this.sc[e];;){if(--n<0)for(;;){if(--h<0)return;this.YL(t>>16,s>>16,r>>7,l>>7,this.tc,e,0),t+=a,s+=d,r+=c,l+=w,e+=this.ZC}this.YL(t>>16,i>>16,r>>7,o>>7,this.tc,e,0),t+=a,i+=f,r+=c,o+=u,e+=this.ZC}else for(h-=n,n-=e,e=this.sc[e];;){if(--n<0)for(;;){if(--h<0)return;this.YL(s>>16,t>>16,l>>7,r>>7,this.tc,e,0),t+=a,s+=d,r+=c,l+=w,e+=this.ZC}this.YL(i>>16,t>>16,o>>7,r>>7,this.tc,e,0),t+=a,i+=f,r+=c,o+=u,e+=this.ZC}else if(s=i<<=16,l=o<<=15,e<0&&(s-=a*e,i-=f*e,l-=c*e,o-=u*e,e=0),t<<=16,r<<=15,h<0&&(t-=d*h,r-=w*h,h=0),n-=h,h-=e,e=this.sc[e],a<f)for(;;){if(--h<0)for(;;){if(--n<0)return;this.YL(t>>16,i>>16,r>>7,o>>7,this.tc,e,0),t+=d,i+=f,r+=w,o+=u,e+=this.ZC}this.YL(s>>16,i>>16,l>>7,o>>7,this.tc,e,0),s+=a,i+=f,l+=c,o+=u,e+=this.ZC}else for(;;){if(--h<0)for(;;){if(--n<0)return;this.YL(i>>16,t>>16,o>>7,r>>7,this.tc,e,0),t+=d,i+=f,r+=w,o+=u,e+=this.ZC}this.YL(i>>16,s>>16,o>>7,l>>7,this.tc,e,0),s+=a,i+=f,l+=c,o+=u,e+=this.ZC}}else if(n<this.bottom)if(h>this.bottom&&(h=this.bottom),e>this.bottom&&(e=this.bottom),h<e)if(i=s<<=16,o=l<<=15,n<0&&(i-=f*n,s-=d*n,o-=u*n,l-=w*n,n=0),t<<=16,r<<=15,h<0&&(t-=a*h,r-=c*h,h=0),e-=h,h-=n,n=this.sc[n],f<d)for(;;){if(--h<0)for(;;){if(--e<0)return;this.YL(i>>16,t>>16,o>>7,r>>7,this.tc,n,0),i+=f,t+=a,o+=u,r+=c,n+=this.ZC}this.YL(i>>16,s>>16,o>>7,l>>7,this.tc,n,0),i+=f,s+=d,o+=u,l+=w,n+=this.ZC}else for(;;){if(--h<0)for(;;){if(--e<0)return;this.YL(t>>16,i>>16,r>>7,o>>7,this.tc,n,0),i+=f,t+=a,o+=u,r+=c,n+=this.ZC}this.YL(s>>16,i>>16,l>>7,o>>7,this.tc,n,0),i+=f,s+=d,o+=u,l+=w,n+=this.ZC}else if(t=s<<=16,r=l<<=15,n<0&&(t-=f*n,s-=d*n,r-=u*n,l-=w*n,n=0),i<<=16,o<<=15,e<0&&(i-=a*e,o-=c*e,e=0),h-=e,e-=n,n=this.sc[n],f<d)for(;;){if(--e<0)for(;;){if(--h<0)return;this.YL(i>>16,s>>16,o>>7,l>>7,this.tc,n,0),i+=a,s+=d,o+=c,l+=w,n+=this.ZC}this.YL(t>>16,s>>16,r>>7,l>>7,this.tc,n,0),t+=f,s+=d,r+=u,l+=w,n+=this.ZC}else for(;;){if(--e<0)for(;;){if(--h<0)return;this.YL(s>>16,i>>16,l>>7,o>>7,this.tc,n,0),i+=a,s+=d,o+=c,l+=w,n+=this.ZC}this.YL(s>>16,t>>16,l>>7,r>>7,this.tc,n,0),t+=f,s+=d,r+=u,l+=w,n+=this.ZC}};static YL=(t,i,s,h,e,n,r)=>{let o;if(this.XC){let l;if(this.uO){if(l=i-t>3?(h-s)/(i-t)|0:0,i>this.dO&&(i=this.dO),t<0&&(s-=t*l,t=0),t>=i)return;n+=t,r=i-t>>2,l<<=2}else{if(!(t<i))return;n+=t,l=(r=i-t>>2)>0?(h-s)*this.RL[r]>>15:0}if(0===this.alpha)for(;;){if(--r<0){if((r=i-t&3)>0){o=this.palette[s>>8];do{e[n++]=o,r--}while(r>0);return}break}o=this.palette[s>>8],s+=l,e[n++]=o,e[n++]=o,e[n++]=o,e[n++]=o}else{const h=this.alpha,a=256-this.alpha;for(;;){if(--r<0){if((r=i-t&3)>0){o=this.palette[s>>8],o=((16711935&o)*a>>8&16711935)+((65280&o)*a>>8&65280);do{e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),r--}while(r>0)}break}o=this.palette[s>>8],s+=l,o=((16711935&o)*a>>8&16711935)+((65280&o)*a>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280),e[n++]=o+((16711935&e[n])*h>>8&16711935)+((65280&e[n])*h>>8&65280)}}}else if(t<i){const l=(h-s)/(i-t)|0;if(this.uO&&(i>this.dO&&(i=this.dO),t<0&&(s-=t*l,t=0),t>=i))return;if(n+=t,r=i-t,0===this.alpha)do{e[n++]=this.palette[s>>8],s+=l,r--}while(r>0);else{const t=this.alpha,i=256-this.alpha;do{o=this.palette[s>>8],s+=l,o=((16711935&o)*i>>8&16711935)+((65280&o)*i>>8&65280),e[n++]=o+((16711935&e[n])*t>>8&16711935)+((65280&e[n])*t>>8&65280),r--}while(r>0)}}};static ZL=(t,i,s,h,e,n,r)=>{let o=0;e!==h&&(o=(i-t<<16)/(e-h)|0);let l=0;n!==e&&(l=(s-i<<16)/(n-e)|0);let a=0;if(n!==h&&(a=(t-s<<16)/(h-n)|0),h<=e&&h<=n){if(h<this.bottom)if(e>this.bottom&&(e=this.bottom),n>this.bottom&&(n=this.bottom),e<n)if(s=t<<=16,h<0&&(s-=a*h,t-=o*h,h=0),i<<=16,e<0&&(i-=l*e,e=0),h!==e&&a<o||h===e&&a>l)for(n-=e,e-=h,h=this.sc[h];;){if(--e<0)for(;;){if(--n<0)return;this.VL(s>>16,i>>16,this.tc,h,r),s+=a,i+=l,h+=this.ZC}this.VL(s>>16,t>>16,this.tc,h,r),s+=a,t+=o,h+=this.ZC}else for(n-=e,e-=h,h=this.sc[h];;){if(--e<0)for(;;){if(--n<0)return;this.VL(i>>16,s>>16,this.tc,h,r),s+=a,i+=l,h+=this.ZC}this.VL(t>>16,s>>16,this.tc,h,r),s+=a,t+=o,h+=this.ZC}else if(i=t<<=16,h<0&&(i-=a*h,t-=o*h,h=0),s<<=16,n<0&&(s-=l*n,n=0),h!==n&&a<o||h===n&&l>o)for(e-=n,n-=h,h=this.sc[h];;){if(--n<0)for(;;){if(--e<0)return;this.VL(s>>16,t>>16,this.tc,h,r),s+=l,t+=o,h+=this.ZC}this.VL(i>>16,t>>16,this.tc,h,r),i+=a,t+=o,h+=this.ZC}else for(e-=n,n-=h,h=this.sc[h];;){if(--n<0)for(;;){if(--e<0)return;this.VL(t>>16,s>>16,this.tc,h,r),s+=l,t+=o,h+=this.ZC}this.VL(t>>16,i>>16,this.tc,h,r),i+=a,t+=o,h+=this.ZC}}else if(e<=n){if(e<this.bottom)if(n>this.bottom&&(n=this.bottom),h>this.bottom&&(h=this.bottom),n<h)if(t=i<<=16,e<0&&(t-=o*e,i-=l*e,e=0),s<<=16,n<0&&(s-=a*n,n=0),e!==n&&o<l||e===n&&o>a)for(h-=n,n-=e,e=this.sc[e];;){if(--n<0)for(;;){if(--h<0)return;this.VL(t>>16,s>>16,this.tc,e,r),t+=o,s+=a,e+=this.ZC}this.VL(t>>16,i>>16,this.tc,e,r),t+=o,i+=l,e+=this.ZC}else for(h-=n,n-=e,e=this.sc[e];;){if(--n<0)for(;;){if(--h<0)return;this.VL(s>>16,t>>16,this.tc,e,r),t+=o,s+=a,e+=this.ZC}this.VL(i>>16,t>>16,this.tc,e,r),t+=o,i+=l,e+=this.ZC}else if(s=i<<=16,e<0&&(s-=o*e,i-=l*e,e=0),t<<=16,h<0&&(t-=a*h,h=0),o<l)for(n-=h,h-=e,e=this.sc[e];;){if(--h<0)for(;;){if(--n<0)return;this.VL(t>>16,i>>16,this.tc,e,r),t+=a,i+=l,e+=this.ZC}this.VL(s>>16,i>>16,this.tc,e,r),s+=o,i+=l,e+=this.ZC}else for(n-=h,h-=e,e=this.sc[e];;){if(--h<0)for(;;){if(--n<0)return;this.VL(i>>16,t>>16,this.tc,e,r),t+=a,i+=l,e+=this.ZC}this.VL(i>>16,s>>16,this.tc,e,r),s+=o,i+=l,e+=this.ZC}}else if(n<this.bottom)if(h>this.bottom&&(h=this.bottom),e>this.bottom&&(e=this.bottom),h<e)if(i=s<<=16,n<0&&(i-=l*n,s-=a*n,n=0),t<<=16,h<0&&(t-=o*h,h=0),l<a)for(e-=h,h-=n,n=this.sc[n];;){if(--h<0)for(;;){if(--e<0)return;this.VL(i>>16,t>>16,this.tc,n,r),i+=l,t+=o,n+=this.ZC}this.VL(i>>16,s>>16,this.tc,n,r),i+=l,s+=a,n+=this.ZC}else for(e-=h,h-=n,n=this.sc[n];;){if(--h<0)for(;;){if(--e<0)return;this.VL(t>>16,i>>16,this.tc,n,r),i+=l,t+=o,n+=this.ZC}this.VL(s>>16,i>>16,this.tc,n,r),i+=l,s+=a,n+=this.ZC}else if(t=s<<=16,n<0&&(t-=l*n,s-=a*n,n=0),i<<=16,e<0&&(i-=o*e,e=0),l<a)for(h-=e,e-=n,n=this.sc[n];;){if(--e<0)for(;;){if(--h<0)return;this.VL(i>>16,s>>16,this.tc,n,r),i+=o,s+=a,n+=this.ZC}this.VL(t>>16,s>>16,this.tc,n,r),t+=l,s+=a,n+=this.ZC}else for(h-=e,e-=n,n=this.sc[n];;){if(--e<0)for(;;){if(--h<0)return;this.VL(s>>16,i>>16,this.tc,n,r),i+=o,s+=a,n+=this.ZC}this.VL(s>>16,t>>16,this.tc,n,r),t+=l,s+=a,n+=this.ZC}};static _O=(t,i,s,h,e,n,r,o,l,a,c,f,u,d,w,y,p,m,A)=>{const I=this.XL(A);this.UL=!this.BL[A];const g=a-u,_=c-w,C=f-p,E=d-a,T=y-c,b=m-f;let v=E*c-T*a<<14;const O=T*f-b*c<<8,L=b*a-E*f<<5;let S=g*c-_*a<<14;const k=_*f-C*c<<8,R=C*a-g*f<<5;let M=_*E-g*T<<14;const x=C*T-_*b<<8,N=g*b-C*E<<5;let P=0,D=0;e!==h&&(P=(i-t<<16)/(e-h)|0,D=(o-r<<16)/(e-h)|0);let F=0,U=0;n!==e&&(F=(s-i<<16)/(n-e)|0,U=(l-o<<16)/(n-e)|0);let B=0,G=0;if(n!==h&&(B=(t-s<<16)/(h-n)|0,G=(r-l<<16)/(h-n)|0),h<=e&&h<=n){if(h<this.bottom)if(e>this.bottom&&(e=this.bottom),n>this.bottom&&(n=this.bottom),e<n){s=t<<=16,l=r<<=16,h<0&&(s-=B*h,t-=P*h,l-=G*h,r-=D*h,h=0),i<<=16,o<<=16,e<0&&(i-=F*e,o-=U*e,e=0);const a=h-this.ia;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,h!==e&&B<P||h===e&&B>F)for(n-=e,e-=h,h=this.sc[h];;){if(--e<0)for(;;){if(--n<0)return;this.zL(s>>16,i>>16,this.tc,h,I,0,0,v,S,M,O,k,x,l>>8,o>>8),s+=B,i+=F,l+=G,o+=U,h+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(s>>16,t>>16,this.tc,h,I,0,0,v,S,M,O,k,x,l>>8,r>>8),s+=B,t+=P,l+=G,r+=D,h+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(n-=e,e-=h,h=this.sc[h];;){if(--e<0)for(;;){if(--n<0)return;this.zL(i>>16,s>>16,this.tc,h,I,0,0,v,S,M,O,k,x,o>>8,l>>8),s+=B,i+=F,l+=G,o+=U,h+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(t>>16,s>>16,this.tc,h,I,0,0,v,S,M,O,k,x,r>>8,l>>8),s+=B,t+=P,l+=G,r+=D,h+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}else{i=t<<=16,o=r<<=16,h<0&&(i-=B*h,t-=P*h,o-=G*h,r-=D*h,h=0),s<<=16,l<<=16,n<0&&(s-=F*n,l-=U*n,n=0);const a=h-this.ia;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,(h===n||B>=P)&&(h!==n||F<=P))for(e-=n,n-=h,h=this.sc[h];;){if(--n<0)for(;;){if(--e<0)return;this.zL(t>>16,s>>16,this.tc,h,I,0,0,v,S,M,O,k,x,r>>8,l>>8),s+=F,t+=P,l+=U,r+=D,h+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(t>>16,i>>16,this.tc,h,I,0,0,v,S,M,O,k,x,r>>8,o>>8),i+=B,t+=P,o+=G,r+=D,h+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(e-=n,n-=h,h=this.sc[h];;){if(--n<0)for(;;){if(--e<0)return;this.zL(s>>16,t>>16,this.tc,h,I,0,0,v,S,M,O,k,x,l>>8,r>>8),s+=F,t+=P,l+=U,r+=D,h+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(i>>16,t>>16,this.tc,h,I,0,0,v,S,M,O,k,x,o>>8,r>>8),i+=B,t+=P,o+=G,r+=D,h+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}}else if(e<=n){if(e<this.bottom)if(n>this.bottom&&(n=this.bottom),h>this.bottom&&(h=this.bottom),n<h){t=i<<=16,r=o<<=16,e<0&&(t-=P*e,i-=F*e,r-=D*e,o-=U*e,e=0),s<<=16,l<<=16,n<0&&(s-=B*n,l-=G*n,n=0);const a=e-this.ia;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,e!==n&&P<F||e===n&&P>B)for(h-=n,n-=e,e=this.sc[e];;){if(--n<0)for(;;){if(--h<0)return;this.zL(t>>16,s>>16,this.tc,e,I,0,0,v,S,M,O,k,x,r>>8,l>>8),t+=P,s+=B,r+=D,l+=G,e+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(t>>16,i>>16,this.tc,e,I,0,0,v,S,M,O,k,x,r>>8,o>>8),t+=P,i+=F,r+=D,o+=U,e+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(h-=n,n-=e,e=this.sc[e];;){if(--n<0)for(;;){if(--h<0)return;this.zL(s>>16,t>>16,this.tc,e,I,0,0,v,S,M,O,k,x,l>>8,r>>8),t+=P,s+=B,r+=D,l+=G,e+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(i>>16,t>>16,this.tc,e,I,0,0,v,S,M,O,k,x,o>>8,r>>8),t+=P,i+=F,r+=D,o+=U,e+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}else{s=i<<=16,l=o<<=16,e<0&&(s-=P*e,i-=F*e,l-=D*e,o-=U*e,e=0),t<<=16,r<<=16,h<0&&(t-=B*h,r-=G*h,h=0);const a=e-this.ia;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,n-=h,h-=e,e=this.sc[e],P<F)for(;;){if(--h<0)for(;;){if(--n<0)return;this.zL(t>>16,i>>16,this.tc,e,I,0,0,v,S,M,O,k,x,r>>8,o>>8),t+=B,i+=F,r+=G,o+=U,e+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(s>>16,i>>16,this.tc,e,I,0,0,v,S,M,O,k,x,l>>8,o>>8),s+=P,i+=F,l+=D,o+=U,e+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(;;){if(--h<0)for(;;){if(--n<0)return;this.zL(i>>16,t>>16,this.tc,e,I,0,0,v,S,M,O,k,x,o>>8,r>>8),t+=B,i+=F,r+=G,o+=U,e+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(i>>16,s>>16,this.tc,e,I,0,0,v,S,M,O,k,x,o>>8,l>>8),s+=P,i+=F,l+=D,o+=U,e+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}}else if(n<this.bottom)if(h>this.bottom&&(h=this.bottom),e>this.bottom&&(e=this.bottom),h<e){i=s<<=16,o=l<<=16,n<0&&(i-=F*n,s-=B*n,o-=U*n,l-=G*n,n=0),t<<=16,r<<=16,h<0&&(t-=P*h,r-=D*h,h=0);const a=n-this.ia;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,e-=h,h-=n,n=this.sc[n],F<B)for(;;){if(--h<0)for(;;){if(--e<0)return;this.zL(i>>16,t>>16,this.tc,n,I,0,0,v,S,M,O,k,x,o>>8,r>>8),i+=F,t+=P,o+=U,r+=D,n+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(i>>16,s>>16,this.tc,n,I,0,0,v,S,M,O,k,x,o>>8,l>>8),i+=F,s+=B,o+=U,l+=G,n+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(;;){if(--h<0)for(;;){if(--e<0)return;this.zL(t>>16,i>>16,this.tc,n,I,0,0,v,S,M,O,k,x,r>>8,o>>8),i+=F,t+=P,o+=U,r+=D,n+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(s>>16,i>>16,this.tc,n,I,0,0,v,S,M,O,k,x,l>>8,o>>8),i+=F,s+=B,o+=U,l+=G,n+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}else{t=s<<=16,r=l<<=16,n<0&&(t-=F*n,s-=B*n,r-=U*n,l-=G*n,n=0),i<<=16,o<<=16,e<0&&(i-=P*e,o-=D*e,e=0);const a=n-this.ia;if(v+=L*a,S+=R*a,M+=N*a,v|=0,S|=0,M|=0,h-=e,e-=n,n=this.sc[n],F<B)for(;;){if(--e<0)for(;;){if(--h<0)return;this.zL(i>>16,s>>16,this.tc,n,I,0,0,v,S,M,O,k,x,o>>8,l>>8),i+=P,s+=B,o+=D,l+=G,n+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(t>>16,s>>16,this.tc,n,I,0,0,v,S,M,O,k,x,r>>8,l>>8),t+=F,s+=B,r+=U,l+=G,n+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}else for(;;){if(--e<0)for(;;){if(--h<0)return;this.zL(s>>16,i>>16,this.tc,n,I,0,0,v,S,M,O,k,x,l>>8,o>>8),i+=P,s+=B,o+=D,l+=G,n+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}this.zL(s>>16,t>>16,this.tc,n,I,0,0,v,S,M,O,k,x,l>>8,r>>8),t+=F,s+=B,r+=U,l+=G,n+=this.ZC,v+=L,S+=R,M+=N,v|=0,S|=0,M|=0}}};static zL=(t,i,s,h,e,n,r,o,l,a,c,f,u,d,w)=>{if(t>=i)return;let y,p,m,A,I,g,_,C,E;if(this.uO){if(y=(w-d)/(i-t)|0,i>this.dO&&(i=this.dO),t<0&&(d-=t*y,t=0),t>=i)return;p=i-t>>3,y<<=12}else i-t>7?(p=i-t>>3,y=(w-d)*this.RL[p]>>6):(p=0,y=0);if(d<<=9,h+=t,this.ht&&e)if(m=0,A=0,g=t-this.ta,o+=(c>>3)*g,l+=(f>>3)*g,a+=(u>>3)*g,o|=0,l|=0,I=(a|=0)>>12,0!==I&&(r=l/I|0,(n=o/I|0)<0?n=0:n>4032&&(n=4032)),o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>12,0!==I&&(m=o/I|0,A=l/I|0,m<7?m=7:m>4032&&(m=4032)),_=m-n>>3,C=A-r>>3,n+=d>>3&786432,E=d>>23,this.UL){for(;p-- >0;)s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C,s[h++]=e[(4032&r)+(n>>6)]>>>E,n=m,r=A,o+=c,l+=f,I=(a+=u)>>12,0!==I&&(m=o/I|0,A=l/I|0,m<7?m=7:m>4032&&(m=4032)),_=m-n>>3,C=A-r>>3,n+=(d+=y)>>3&786432,E=d>>23;for(p=i-t&7;p-- >0;)s[h++]=e[(4032&r)+(n>>6)]>>>E,n+=_,r+=C}else{for(;p-- >0;){let t;0!=(t=e[(4032&r)+(n>>6)]>>>E)&&(s[h]=t),h+=1,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h++,0!=(t=e[(4032&(r+=C))+((n+=_)>>6)]>>>E)&&(s[h]=t),h+=1,n=m,r=A,o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>12,0!==I&&(m=o/I|0,A=l/I|0,m<7?m=7:m>4032&&(m=4032)),_=m-n>>3,C=A-r>>3,n+=(d+=y)>>3&786432,E=d>>23}for(p=i-t&7;p-- >0;){let t;0!=(t=e[(4032&r)+(n>>6)]>>>E)&&(s[h]=t),h++,n+=_,r+=C}}else if(m=0,A=0,g=t-this.ta,o+=(c>>3)*g,l+=(f>>3)*g,a+=(u>>3)*g,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(r=l/I|0,(n=o/I|0)<0?n=0:n>16256&&(n=16256)),o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(m=o/I|0,A=l/I|0,m<7?m=7:m>16256&&(m=16256)),_=m-n>>3,C=A-r>>3,n+=6291456&d,E=d>>23,this.UL&&e){for(;p-- >0;)s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C,s[h++]=e[(16256&r)+(n>>7)]>>>E,n=m,r=A,o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(m=o/I|0,A=l/I|0,m<7?m=7:m>16256&&(m=16256)),_=m-n>>3,C=A-r>>3,n+=6291456&(d+=y),E=d>>23;for(p=i-t&7;p-- >0;)s[h++]=e[(16256&r)+(n>>7)]>>>E,n+=_,r+=C}else{for(;p-- >0&&e;){let t;0!=(t=e[(16256&r)+(n>>7)]>>>E)&&(s[h]=t),h+=1,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,0!=(t=e[(16256&(r+=C))+((n+=_)>>7)]>>>E)&&(s[h]=t),h++,n=m,r=A,o+=c,l+=f,a+=u,o|=0,l|=0,I=(a|=0)>>14,0!==I&&(m=o/I|0,A=l/I|0,m<7?m=7:m>16256&&(m=16256)),_=m-n>>3,C=A-r>>3,n+=6291456&(d+=y),E=d>>23}for(p=i-t&7;p-- >0&&e;){let t;0!=(t=e[(16256&r)+(n>>7)]>>>E)&&(s[h]=t),h++,n+=_,r+=C}}};static VL=(t,i,s,h,e)=>{if(this.uO&&(i>this.dO&&(i=this.dO),t<0&&(t=0)),t>=i)return;h+=t;let n=i-t>>2;if(0===this.alpha)for(;;){if(n--,n<0)for(n=i-t&3;;){if(n--,n<0)return;s[h++]=e}s[h++]=e,s[h++]=e,s[h++]=e,s[h++]=e}const r=this.alpha,o=256-this.alpha;for(e=((16711935&e)*o>>8&16711935)+((65280&e)*o>>8&65280);;){if(n--,n<0)for(n=i-t&3;;){if(n--,n<0)return;s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280)}s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280),s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280),s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280),s[h++]=e+((16711935&s[h])*r>>8&16711935)+((65280&s[h])*r>>8&65280)}};static YI=t=>{this.PL[t]&&this.NL&&(this.NL[this.DL++]=this.PL[t],this.PL[t]=null)};static XL=t=>{if(this.HI[t]=this.Uf++,this.PL[t])return this.PL[t];let i;if(this.DL>0&&this.NL)i=this.NL[--this.DL],this.NL[this.DL]=null;else{let t=0,s=-1;for(let i=0;i<this.xL;i++)this.PL[i]&&(this.HI[i]<t||-1===s)&&(t=this.HI[i],s=i);i=this.PL[s],this.PL[s]=null}this.PL[t]=i;const s=this.WI[t],h=this.FL[t];if(!i||!s||!h)return null;if(this.ht){this.BL[t]=!1;for(let e=0;e<4096;e++){const n=i[e]=16316671&h[s.tc[e]];0===n&&(this.BL[t]=!0),i[e+4096]=n-(n>>>3)&16316671,i[e+8192]=n-(n>>>2)&16316671,i[e+12288]=n-(n>>>2)-(n>>>3)&16316671}}else{if(64===s.width)for(let t=0;t<128;t++)for(let e=0;e<128;e++)i[e+(t<<7|0)]=h[s.tc[(e>>1)+(t>>1<<6|0)]];else for(let t=0;t<16384;t++)i[t]=h[s.tc[t]];this.BL[t]=!1;for(let s=0;s<16384;s++){i[s]&=16316671;const h=i[s];0===h&&(this.BL[t]=!0),i[s+16384]=h-(h>>>3)&16316671,i[s+32768]=h-(h>>>2)&16316671,i[s+49152]=h-(h>>>2)-(h>>>3)&16316671}}return i}}},5147:(t,i,s)=>{s.d(i,{Y:()=>e});var h=s(6121);const e=async t=>{255!==t[0]&&(t[0]=255),URL.revokeObjectURL(h.mL.src),h.mL.src=URL.createObjectURL(new Blob([t],{type:'image/jpeg'})),await new Promise((t=>h.mL.onload=()=>t())),h.IL.clearRect(0,0,h.AL.width,h.AL.height);const i=h.mL.naturalWidth,s=h.mL.naturalHeight;return h.AL.width=i,h.AL.height=s,h.IL.drawImage(h.mL,0,0),h.IL.getImageData(0,0,i,s)}},9178:(t,i,s)=>{s.d(i,{Z:()=>f});var h=s(2383),e=s(2991),n=s(8078),r=s(8762),o=s(6327),l=s(9345);class a{mC=0;Rv=0;jL=0;KL=-1;qL=-1;$L=-1;JL=-1;QL=-1;tS=-1;iS=-1;sS=-1;hS=-1;eS=0;nS=-1;rS=-1;oS=-1;data=null}class c{x=0;y=0;z=0;w=0}class f extends o.Z{static metadata=null;static head=null;static lS=null;static aS=null;static cS=null;static fS=null;static uS=null;static dS=null;static wS=null;static yS=null;static pS=null;static mS=null;static AS=null;static IS=null;static axis=null;static gS=new l.to(4096,!1);static _S=new l.to(4096,!1);static CS=new Int32Array(4096);static ES=new Int32Array(4096);static TS=new Int32Array(4096);static bS=new Int32Array(4096);static vS=new Int32Array(4096);static OS=new Int32Array(4096);static LS=new Int32Array(1500);static SS=new l.Yn(1500,512);static kS=new Int32Array(12);static RS=new l.Yn(12,2e3);static MS=new Int32Array(2e3);static xS=new Int32Array(2e3);static NS=new Int32Array(12);static PS=new Int32Array(10);static DS=new Int32Array(10);static FS=new Int32Array(10);static An=0;static US=0;static In=0;static Bf=!1;static Ll=0;static Sl=0;static Gf=0;static Gm=new Int32Array(1e3);static BS=!1;static Qa(t){try{f.head=new h.Z(t.read('ob_head.dat')),f.lS=new h.Z(t.read('ob_face1.dat')),f.aS=new h.Z(t.read('ob_face2.dat')),f.cS=new h.Z(t.read('ob_face3.dat')),f.fS=new h.Z(t.read('ob_face4.dat')),f.uS=new h.Z(t.read('ob_face5.dat')),f.dS=new h.Z(t.read('ob_point1.dat')),f.wS=new h.Z(t.read('ob_point2.dat')),f.yS=new h.Z(t.read('ob_point3.dat')),f.pS=new h.Z(t.read('ob_point4.dat')),f.mS=new h.Z(t.read('ob_point5.dat')),f.AS=new h.Z(t.read('ob_vertex1.dat')),f.IS=new h.Z(t.read('ob_vertex2.dat')),f.axis=new h.Z(t.read('ob_axis.dat')),f.head.Mc=0,f.dS.Mc=0,f.wS.Mc=0,f.yS.Mc=0,f.pS.Mc=0,f.AS.Mc=0,f.IS.Mc=0;const i=f.head.Cy;f.metadata=new l.to(i+100,null);let s=0,e=0,n=0,r=0,o=0,c=0,u=0;for(let t=0;t<i;t++){const t=f.head.Cy,i=new a;i.mC=f.head.Cy,i.Rv=f.head.Cy,i.jL=f.head.vy,i.KL=f.dS.Mc,i.qL=f.wS.Mc,i.$L=f.yS.Mc,i.JL=f.pS.Mc,i.tS=f.AS.Mc,i.iS=f.IS.Mc;const h=f.head.vy,l=f.head.vy,d=f.head.vy,w=f.head.vy,y=f.head.vy;for(let t=0;t<i.mC;t++){const t=f.dS.vy;0!=(1&t)&&f.wS.GS,0!=(2&t)&&f.yS.GS,0!=(4&t)&&f.pS.GS}for(let t=0;t<i.Rv;t++){1===f.IS.vy&&(f.AS.GS,f.AS.GS),f.AS.GS}i.sS=n,n+=2*i.Rv,1===h&&(i.hS=r,r+=i.Rv),255===l?(i.eS=o,o+=i.Rv):i.eS=-l-1,1===d&&(i.nS=c,c+=i.Rv),1===w&&(i.rS=u,u+=i.Rv),1===y&&(i.QL=e,e+=i.mC),i.oS=s,s+=i.jL,f.metadata[t]=i}}catch(t){console.log('Error loading model index'),console.error(t)}}static HS(t,i){if(null===f.metadata&&(f.metadata=[]),null===t){const t=new a;return t.mC=0,t.Rv=0,t.jL=0,void(f.metadata[i]=t)}const s=new h.Z(t);s.Mc=s.length-18;const e=new a;e.data=t,e.mC=s.Cy,e.Rv=s.Cy,e.jL=s.vy,f.metadata[i]=e;const n=s.vy,r=s.vy,o=s.vy,l=s.vy,c=s.vy,u=s.Cy,d=s.Cy,w=s.Cy,y=s.Cy;let p=0;e.KL=p,p+=e.mC,e.iS=p,p+=e.Rv,e.eS=p,255===r?p+=e.Rv:e.eS=-r-1,e.rS=p,1===l?p+=e.Rv:e.rS=-1,e.hS=p,1===n?p+=e.Rv:e.hS=-1,e.QL=p,1===c?p+=e.mC:e.QL=-1,e.nS=p,1===o?p+=e.Rv:e.nS=-1,e.tS=p,p+=y,e.sS=p,p+=2*e.Rv,e.oS=p,p+=6*e.jL,e.qL=p,p+=u,e.$L=p,p+=d,e.JL=p,p+=w}static _o(){f.metadata=null,f.head=null,f.lS=null,f.aS=null,f.cS=null,f.fS=null,f.uS=null,f.dS=null,f.wS=null,f.yS=null,f.pS=null,f.mS=null,f.AS=null,f.IS=null,f.axis=null,f.gS=null,f._S=null,f.CS=null,f.ES=null,f.TS=null,f.bS=null,f.vS=null,f.OS=null,f.LS=null,f.SS=null,f.kS=null,f.RS=null,f.MS=null,f.xS=null,f.NS=null}static WS(t,i,s){return 2==(2&s)?(i<0?i=0:i>127&&(i=127),127-i):((i=i*(127&t)>>7)<2?i=2:i>126&&(i=126),(65408&t)+i)}static pC=(t,i,s)=>{const h=t.mC,e=t.Rv,n=t.jL;let r,o,a,u,d;if(i){r=new Int32Array(h);for(let i=0;i<h;i++)r[i]=t.gC[i]}else r=t.gC;let w=null,y=null;if(s){o=new Int32Array(e),a=new Int32Array(e),u=new Int32Array(e);for(let i=0;i<e;i++)t.YS&&(o[i]=t.YS[i]),t.ZS&&(a[i]=t.ZS[i]),t.VS&&(u[i]=t.VS[i]);if(d=new Int32Array(e),t.kv)for(let i=0;i<e;i++)d[i]=t.kv[i];else for(let t=0;t<e;t++)d[t]=0;w=new l.to(h,null);for(let i=0;i<h;i++){const s=w[i]=new c;if(t.mv){const h=t.mv[i];h&&(s.x=h.x,s.y=h.y,s.z=h.z,s.w=h.w)}}y=t.Tv}else o=t.YS,a=t.ZS,u=t.VS,d=t.kv;return new f({mC:h,AC:t.AC,gC:r,IC:t.IC,Rv:e,Mv:t.Mv,xv:t.xv,Nv:t.Nv,YS:o,ZS:a,VS:u,kv:d,XS:t.XS,zS:t.zS,v_:t.v_,priority:t.priority,jL:n,jS:t.jS,KS:t.KS,qS:t.qS,vv:t.vv,Ov:t.Ov,Lv:t.Lv,Sv:t.Sv,KT:t.KT,bv:t.bv,OC:t.OC,$S:t.$S,JS:t.JS,mv:w,Tv:y})};static O_=(t,i,s,h)=>{const e=t.mC,n=t.Rv,r=t.jL;let o,l,a,c,u;if(h)o=t.AC,l=t.gC,a=t.IC;else{o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e);for(let i=0;i<e;i++)o[i]=t.AC[i],l[i]=t.gC[i],a[i]=t.IC[i]}if(i)c=t.v_;else{c=new Int32Array(n);for(let i=0;i<n;i++)t.v_&&(c[i]=t.v_[i])}if(s)u=t.zS;else if(u=new Int32Array(n),t.zS)for(let i=0;i<n;i++)u[i]=t.zS[i];else for(let t=0;t<n;t++)u[t]=0;return new f({mC:e,AC:o,gC:l,IC:a,Rv:n,Mv:t.Mv,xv:t.xv,Nv:t.Nv,YS:null,ZS:null,VS:null,kv:t.kv,XS:t.XS,zS:u,v_:c,priority:t.priority,jL:r,jS:t.jS,KS:t.KS,qS:t.qS,QS:t.QS,tk:t.tk})};static PC=(t,i)=>{const s=t.mC,h=t.Rv,e=t.jL,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s);for(let i=0;i<s;i++)n[i]=t.AC[i],r[i]=t.gC[i],o[i]=t.IC[i];let l;if(i)l=t.zS;else if(l=new Int32Array(h),t.zS)for(let i=0;i<h;i++)l[i]=t.zS[i];else for(let t=0;t<h;t++)l[t]=0;return new f({mC:s,AC:n,gC:r,IC:o,Rv:h,Mv:t.Mv,xv:t.xv,Nv:t.Nv,YS:t.YS,ZS:t.ZS,VS:t.VS,kv:t.kv,XS:t.XS,zS:l,v_:t.v_,priority:t.priority,jL:e,jS:t.jS,KS:t.KS,qS:t.qS,TC:t.TC,EC:t.EC})};static DO=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.mC,o+=i.Rv,l+=i.jL,s||=null!==i.kv,i.XS?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.zS,n||=null!==i.v_)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(o),y=new Int32Array(o),p=new Int32Array(o),m=new Int32Array(o),A=new Int32Array(o),I=new Int32Array(o),g=new Int32Array(l),_=new Int32Array(l),C=new Int32Array(l);let E=null;s&&(E=new Int32Array(o));let T=null;h&&(T=new Int32Array(o));let b=null;e&&(b=new Int32Array(o));let v=null;n&&(v=new Int32Array(o)),r=0,o=0,l=0;for(let a=0;a<i;a++){const i=t[a];if(i){const t=r;for(let t=0;t<i.mC;t++)c[r]=i.AC[t],u[r]=i.gC[t],d[r]=i.IC[t],r++;for(let r=0;r<i.Rv;r++)w[o]=i.Mv[r]+t,y[o]=i.xv[r]+t,p[o]=i.Nv[r]+t,i.YS&&(m[o]=i.YS[r]),i.ZS&&(A[o]=i.ZS[r]),i.VS&&(I[o]=i.VS[r]),s&&(i.kv?E&&(E[o]=i.kv[r]):E&&(E[o]=0)),h&&(i.XS?T&&(T[o]=i.XS[r]):T&&(T[o]=i.priority)),e&&(i.zS?b&&(b[o]=i.zS[r]):b&&(b[o]=0)),n&&i.v_&&v&&(v[o]=i.v_[r]),o++;for(let s=0;s<i.jL;s++)g[l]=i.jS[s]+t,_[l]=i.KS[s]+t,C[l]=i.qS[s]+t,l++}}const O=new f({mC:r,AC:c,gC:u,IC:d,Rv:o,Mv:w,xv:y,Nv:p,YS:m,ZS:A,VS:I,kv:E,XS:T,zS:b,v_:v,priority:a,jL:l,jS:g,KS:_,qS:C});return O.FC(),O};static _a=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.mC,o+=i.Rv,l+=i.jL,s||=null!==i.kv,i.XS?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.zS,n||=null!==i.tk)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(r),y=new Int32Array(o),p=new Int32Array(o),m=new Int32Array(o),A=new Int32Array(l),I=new Int32Array(l),g=new Int32Array(l);let _=null;s&&(_=new Int32Array(o));let C=null;h&&(C=new Int32Array(o));let E=null;e&&(E=new Int32Array(o));let T=null;n&&(T=new Int32Array(o));const b=new Int32Array(o);r=0,o=0,l=0;const v=(t,i,s,h,e,n,r)=>{let o=-1;const l=t.AC[i],a=t.gC[i],c=t.IC[i];for(let t=0;t<r;t++)if(l===s[t]&&a===h[t]&&c===e[t]){o=t;break}return-1===o&&(s[r]=l,h[r]=a,e[r]=c,n&&t.QS&&(n[r]=t.QS[i]),o=r++),{vertex:o,mC:r}};for(let a=0;a<i;a++){const i=t[a];if(i){for(let t=0;t<i.Rv;t++){s&&(i.kv?_&&(_[o]=i.kv[t]):_&&(_[o]=0)),h&&(i.XS?C&&(C[o]=i.XS[t]):C&&(C[o]=i.priority)),e&&(i.zS?E&&(E[o]=i.zS[t]):E&&(E[o]=0)),n&&i.tk&&T&&(T[o]=i.tk[t]),i.v_&&(b[o]=i.v_[t]);const l=v(i,i.Mv[t],c,u,d,w,r);r=l.mC;const a=v(i,i.xv[t],c,u,d,w,r);r=a.mC;const f=v(i,i.Nv[t],c,u,d,w,r);r=f.mC,y[o]=l.vertex,p[o]=a.vertex,m[o]=f.vertex,o++}for(let t=0;t<i.jL;t++){const s=v(i,i.jS[t],c,u,d,w,r);r=s.mC;const h=v(i,i.KS[t],c,u,d,w,r);r=h.mC;const e=v(i,i.qS[t],c,u,d,w,r);r=e.mC,A[l]=s.vertex,I[l]=h.vertex,g[l]=e.vertex,l++}}}return new f({mC:r,AC:c,gC:u,IC:d,Rv:o,Mv:y,xv:p,Nv:m,YS:null,ZS:null,VS:null,kv:_,XS:C,zS:E,v_:b,priority:a,jL:l,jS:A,KS:I,qS:g,QS:w,tk:T})};static model=t=>{if(!f.metadata)throw new Error('cant loading model metadata!!!!!');const i=f.metadata[t];if(!i)throw console.log(`Error model:${t} not found!`),new Error('cant loading model metadata!!!!!');if(!(f.head&&f.lS&&f.aS&&f.cS&&f.fS&&f.uS&&f.dS&&f.wS&&f.yS&&f.pS&&f.mS&&f.AS&&f.IS&&f.axis))throw new Error('cant loading model!!!!!');const s=i.mC,h=i.Rv,e=i.jL,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s),l=new Int32Array(h),a=new Int32Array(h),c=new Int32Array(h),u=new Int32Array(e),d=new Int32Array(e),w=new Int32Array(e);let y=null;i.QL>=0&&(y=new Int32Array(s));let p=null;i.hS>=0&&(p=new Int32Array(h));let m=null,A=0;i.eS>=0?m=new Int32Array(h):A=-i.eS-1;let I=null;i.nS>=0&&(I=new Int32Array(h));let g=null;i.rS>=0&&(g=new Int32Array(h));const _=new Int32Array(h);f.dS.Mc=i.KL,f.wS.Mc=i.qL,f.yS.Mc=i.$L,f.pS.Mc=i.JL,f.mS.Mc=i.QL;let C,E,T,b=0,v=0,O=0;for(let t=0;t<s;t++){const i=f.dS.vy;C=0,0!=(1&i)&&(C=f.wS.GS),E=0,0!=(2&i)&&(E=f.yS.GS),T=0,0!=(4&i)&&(T=f.pS.GS),n[t]=b+C,r[t]=v+E,o[t]=O+T,b=n[t],v=r[t],O=o[t],y&&(y[t]=f.mS.vy)}f.lS.Mc=i.sS,f.aS.Mc=i.hS,f.cS.Mc=i.eS,f.fS.Mc=i.nS,f.uS.Mc=i.rS;for(let t=0;t<h;t++)_[t]=f.lS.Cy,p&&(p[t]=f.aS.vy),m&&(m[t]=f.cS.vy),I&&(I[t]=f.fS.vy),g&&(g[t]=f.uS.vy);f.AS.Mc=i.tS,f.IS.Mc=i.iS,C=0,E=0,T=0;let L=0;for(let t=0;t<h;t++){const i=f.IS.vy;if(1===i)C=f.AS.GS+L,L=C,E=f.AS.GS+L,L=E,T=f.AS.GS+L,L=T;else if(2===i)E=T,T=f.AS.GS+L,L=T;else if(3===i)C=T,T=f.AS.GS+L,L=T;else if(4===i){const t=C;C=E,E=t,T=f.AS.GS+L,L=T}l[t]=C,a[t]=E,c[t]=T}f.axis.Mc=6*i.oS;for(let t=0;t<e;t++)u[t]=f.axis.Cy,d[t]=f.axis.Cy,w[t]=f.axis.Cy;return new f({mC:s,AC:n,gC:r,IC:o,Rv:h,Mv:l,xv:a,Nv:c,YS:null,ZS:null,VS:null,kv:p,XS:m,zS:I,v_:_,priority:A,jL:e,jS:u,KS:d,qS:w,QS:y,tk:g})};static ik=(t,i)=>{if(!f.metadata||!f.metadata[i])throw new Error('No model metadata');const s=f.metadata[i];if(s.data=t,!s.data.length)throw new Error('No model data');const e=s.mC,n=s.Rv,r=s.jL,o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e),c=new Int32Array(n),u=new Int32Array(n),d=new Int32Array(n),w=new Int32Array(r),y=new Int32Array(r),p=new Int32Array(r);let m=null;s.QL>=0&&(m=new Int32Array(e));let A=null;s.hS>=0&&(A=new Int32Array(n));let I=null,g=0;s.eS>=0?I=new Int32Array(n):g=-s.eS-1;let _=null;s.nS>=0&&(_=new Int32Array(n));let C=null;s.rS>=0&&(C=new Int32Array(n));const E=new Int32Array(n),T=new h.Z(s.data);T.Mc=s.KL;const b=new h.Z(s.data);b.Mc=s.qL;const v=new h.Z(s.data);v.Mc=s.$L;const O=new h.Z(s.data);O.Mc=s.JL;const L=new h.Z(s.data);L.Mc=s.QL;let S,k,R,M=0,x=0,N=0;for(let t=0;t<e;t++){const i=T.vy;S=0,0!=(1&i)&&(S=b.GS),k=0,0!=(2&i)&&(k=v.GS),R=0,0!=(4&i)&&(R=O.GS),o[t]=M+S,l[t]=x+k,a[t]=N+R,M=o[t],x=l[t],N=a[t],m&&(m[t]=L.vy)}const P=new h.Z(s.data);P.Mc=s.sS;const D=new h.Z(s.data);D.Mc=s.hS;const F=new h.Z(s.data);F.Mc=s.eS;const U=new h.Z(s.data);U.Mc=s.nS;const B=new h.Z(s.data);B.Mc=s.rS;for(let t=0;t<n;t++)E[t]=P.Cy,A&&(A[t]=D.vy),I&&(I[t]=F.vy),_&&(_[t]=U.vy),C&&(C[t]=B.vy);const G=new h.Z(s.data);G.Mc=s.tS;const H=new h.Z(s.data);H.Mc=s.iS,S=0,k=0,R=0;let W=0;for(let t=0;t<n;t++){const i=H.vy;if(1===i)S=G.GS+W,W=S,k=G.GS+W,W=k,R=G.GS+W,W=R;else if(2===i)k=R,R=G.GS+W,W=R;else if(3===i)S=R,R=G.GS+W,W=R;else if(4===i){const t=S;S=k,k=t,R=G.GS+W,W=R}c[t]=S,u[t]=k,d[t]=R}const Y=new h.Z(s.data);Y.Mc=6*s.oS;for(let t=0;t<r;t++)w[t]=Y.Cy,y[t]=Y.Cy,p[t]=Y.Cy;return new f({mC:e,AC:o,gC:l,IC:a,Rv:n,Mv:c,xv:u,Nv:d,YS:null,ZS:null,VS:null,kv:A,XS:I,zS:_,v_:E,priority:g,jL:r,jS:w,KS:y,qS:p,QS:m,tk:C})};mC;AC;gC;IC;Rv;Mv;xv;Nv;YS;ZS;VS;kv;XS;zS;v_;priority;jL;jS;KS;qS;vv;Ov;Lv;Sv;KT;bv;OC;$S;JS;QS;tk;TC;EC;mv;Tv;vC=0;UC=!1;sk=-1;hk=-1;constructor(t){super(),this.mC=t.mC,this.AC=t.AC,this.gC=t.gC,this.IC=t.IC,this.Rv=t.Rv,this.Mv=t.Mv,this.xv=t.xv,this.Nv=t.Nv,this.YS=t.YS,this.ZS=t.ZS,this.VS=t.VS,this.kv=t.kv,this.XS=t.XS,this.zS=t.zS,this.v_=t.v_,this.priority=t.priority,this.jL=t.jL,this.jS=t.jS,this.KS=t.KS,this.qS=t.qS,this.vv=t.vv??0,this.Ov=t.Ov??0,this.Lv=t.Lv??0,this.Sv=t.Sv??0,this.KT=t.KT??0,this.bv=t.bv??0,this.OC=t.OC??0,this.$S=t.$S??0,this.JS=t.JS??0,this.QS=t.QS??null,this.tk=t.tk??null,this.TC=t.TC??null,this.EC=t.EC??null,this.mv=t.mv??null,this.Tv=t.Tv??null}FC=()=>{this.OC=0,this.KT=0,this.bv=0;for(let t=0;t<this.mC;t++){const i=this.AC[t],s=this.gC[t],h=this.IC[t];-s>this.OC&&(this.OC=-s),s>this.bv&&(this.bv=s);const e=i*i+h*h;e>this.KT&&(this.KT=e)}this.KT=Math.sqrt(this.KT)+.99|0,this.JS=Math.sqrt(this.KT*this.KT+this.OC*this.OC)+.99|0,this.$S=this.JS+(Math.sqrt(this.KT*this.KT+this.bv*this.bv)+.99|0)};_C=()=>{this.OC=0,this.bv=0;for(let t=0;t<this.mC;t++){const i=this.gC[t];-i>this.OC&&(this.OC=-i),i>this.bv&&(this.bv=i)}this.JS=Math.sqrt(this.KT*this.KT+this.OC*this.OC)+.99|0,this.$S=this.JS+(Math.sqrt(this.KT*this.KT+this.bv*this.bv)+.99|0)};va=()=>{if(this.QS){const t=new Int32Array(256);let i=0;for(let s=0;s<this.mC;s++){const h=this.QS[s];t[h]++,h>i&&(i=h)}this.TC=new l.to(i+1,null);for(let s=0;s<=i;s++)this.TC[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.mC;){const i=this.QS[s],h=this.TC[i];h&&(h[t[i]++]=s++)}this.QS=null}if(this.tk){const t=new Int32Array(256);let i=0;for(let s=0;s<this.Rv;s++){const h=this.tk[s];t[h]++,h>i&&(i=h)}this.EC=new l.to(i+1,null);for(let s=0;s<=i;s++)this.EC[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.Rv;){const i=this.tk[s],h=this.EC[i];h&&(h[t[i]++]=s++)}this.tk=null}};DC=(t,i,s)=>{if(-1!==t)if(s&&-1!==i){const h=r.Z.To[t],e=r.Z.To[i],n=h.ek;f.An=0,f.US=0,f.In=0;let o=0,l=s[o++];for(let t=0;t<h.length;t++){if(!h.nk)continue;const i=h.nk[t];for(;i>l;)l=s[o++];n&&n.types&&h.x&&h.y&&h.z&&n.labels&&(i!==l||0===n.types[i])&&this.rk(h.x[t],h.y[t],h.z[t],n.labels[i],n.types[i])}f.An=0,f.US=0,f.In=0,o=0,l=s[o++];for(let t=0;t<e.length;t++){if(!e.nk)continue;const i=e.nk[t];for(;i>l;)l=s[o++];n&&n.types&&e.x&&e.y&&e.z&&n.labels&&(i===l||0===n.types[i])&&this.rk(e.x[t],e.y[t],e.z[t],n.labels[i],n.types[i])}}else this.Oa(t)};Oa=t=>{if(!this.TC||-1===t||!r.Z.To[t])return;const i=r.Z.To[t],s=i.ek;f.An=0,f.US=0,f.In=0;for(let t=0;t<i.length;t++){if(!(i.nk&&i.x&&i.y&&i.z&&s&&s.labels&&s.types))continue;const h=i.nk[t];this.rk(i.x[t],i.y[t],i.z[t],s.labels[h],s.types[h])}};bC=()=>{for(let t=0;t<this.mC;t++){const i=this.AC[t];this.AC[t]=this.IC[t],this.IC[t]=-i}};KO=t=>{const i=n.Z.sin[t],s=n.Z.cos[t];for(let t=0;t<this.mC;t++){const h=this.gC[t]*s-this.IC[t]*i>>16;this.IC[t]=this.gC[t]*i+this.IC[t]*s>>16,this.gC[t]=h}};translate=(t,i,s)=>{for(let h=0;h<this.mC;h++)this.AC[h]+=i,this.gC[h]+=t,this.IC[h]+=s};Ca=(t,i)=>{if(this.v_)for(let s=0;s<this.Rv;s++)this.v_[s]===t&&(this.v_[s]=i)};CC=()=>{for(let t=0;t<this.mC;t++)this.IC[t]=-this.IC[t];for(let t=0;t<this.Rv;t++){const i=this.Mv[t];this.Mv[t]=this.Nv[t],this.Nv[t]=i}};scale=(t,i,s)=>{for(let h=0;h<this.mC;h++)this.AC[h]=this.AC[h]*t/128|0,this.gC[h]=this.gC[h]*i/128|0,this.IC[h]=this.IC[h]*s/128|0};La=(t,i,s,h,e,n)=>{const r=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;if(this.YS&&this.ZS&&this.VS||(this.YS=new Int32Array(this.Rv),this.ZS=new Int32Array(this.Rv),this.VS=new Int32Array(this.Rv)),!this.mv){this.mv=new l.to(this.mC,null);for(let t=0;t<this.mC;t++)this.mv[t]=new c}for(let i=0;i<this.Rv;i++){const n=this.Mv[i],o=this.xv[i],l=this.Nv[i],a=this.AC[o]-this.AC[n],c=this.gC[o]-this.gC[n],u=this.IC[o]-this.IC[n],d=this.AC[l]-this.AC[n],w=this.gC[l]-this.gC[n],y=this.IC[l]-this.IC[n];let p=c*y-w*u,m=u*d-y*a,A=a*w-d*c;for(;p>8192||m>8192||A>8192||p<-8192||m<-8192||A<-8192;)p>>=1,m>>=1,A>>=1;let I=0|Math.sqrt(p*p+m*m+A*A);if(I<=0&&(I=1),p=256*p/I|0,m=256*m/I|0,A=256*A/I|0,this.kv&&0!=(1&this.kv[i])){const n=t+((s*p+h*m+e*A)/(r+(r/2|0))|0);this.v_&&(this.YS[i]=f.WS(this.v_[i],n,this.kv[i]))}else{let t=this.mv[n];t&&(t.x+=p,t.y+=m,t.z+=A,t.w++),t=this.mv[o],t&&(t.x+=p,t.y+=m,t.z+=A,t.w++),t=this.mv[l],t&&(t.x+=p,t.y+=m,t.z+=A,t.w++)}}if(n)this.gv(t,r,s,h,e);else{this.Tv=new l.to(this.mC,null);for(let t=0;t<this.mC;t++){const i=this.mv[t],s=new c;i&&(s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w),this.Tv[t]=s}}n?this.FC():this.lk()};gv=(t,i,s,h,e)=>{for(let n=0;n<this.Rv;n++){const r=this.Mv[n],o=this.xv[n],l=this.Nv[n];if(!this.kv&&this.v_&&this.mv&&this.YS&&this.ZS&&this.VS){const a=this.v_[n],c=this.mv[r];c&&(this.YS[n]=f.WS(a,t+((s*c.x+h*c.y+e*c.z)/(i*c.w)|0),0));const u=this.mv[o];u&&(this.ZS[n]=f.WS(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),0));const d=this.mv[l];d&&(this.VS[n]=f.WS(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),0))}else if(this.kv&&0==(1&this.kv[n])&&this.v_&&this.mv&&this.YS&&this.ZS&&this.VS){const a=this.v_[n],c=this.kv[n],u=this.mv[r];u&&(this.YS[n]=f.WS(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),c));const d=this.mv[o];d&&(this.ZS[n]=f.WS(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),c));const w=this.mv[l];w&&(this.VS[n]=f.WS(a,t+((s*w.x+h*w.y+e*w.z)/(i*w.w)|0),c))}}if(this.mv=null,this.Tv=null,this.QS=null,this.tk=null,this.kv)for(let t=0;t<this.Rv;t++)if(2==(2&this.kv[t]))return;this.v_=null};na=(t,i,s,h,e,r,o)=>{const l=n.Z.sin[t],a=n.Z.cos[t],c=n.Z.sin[i],u=n.Z.cos[i],d=n.Z.sin[s],w=n.Z.cos[s],y=n.Z.sin[h],p=n.Z.cos[h],m=r*y+o*p>>16;for(let h=0;h<this.mC;h++){let A,I=this.AC[h],g=this.gC[h],_=this.IC[h];0!==s&&(A=g*d+I*w>>16,g=g*w-I*d>>16,I=A),0!==t&&(A=g*a-_*l>>16,_=g*l+_*a>>16,g=A),0!==i&&(A=_*c+I*u>>16,_=_*u-I*c>>16,I=A),I+=e,g+=r,_+=o,A=g*p-_*y>>16,_=g*y+_*p>>16,g=A,f.CS&&f.ES&&f.TS&&(f.TS[h]=_-m,f.CS[h]=n.Z.ta+((I<<9)/_|0),f.ES[h]=n.Z.ia+((g<<9)/_|0)),this.jL>0&&f.bS&&f.vS&&f.OS&&(f.bS[h]=I,f.vS[h]=g,f.OS[h]=_)}try{this.ak(!1,!1,0)}catch(t){}};draw=(t,i,s,h,r,o,l,a,c)=>{const u=a*r-o*h>>16,d=l*i+u*s>>16,w=this.KT*s>>16,y=d+w;if(y<=50||d>=3500)return;const p=a*h+o*r>>16;let m=p-this.KT<<9;if((m/y|0)>=e.Z.OL)return;let A=p+this.KT<<9;if((A/y|0)<=-e.Z.OL)return;const I=l*s-u*i>>16,g=this.KT*i>>16;let _=I+g<<9;if((_/y|0)<=-e.Z.LL)return;let C=I-(g+(this.OC*s>>16))<<9;if((C/y|0)>=e.Z.LL)return;let E=d-(w+(this.OC*i>>16))<=50,T=!1;if(c>0&&f.Bf){let t=d-w;t<=50&&(t=50),p>0?(m=m/y|0,A=A/t|0):(A=A/y|0,m=m/t|0),I>0?(C=C/y|0,_=_/t|0):(_=_/y|0,C=C/t|0);const i=f.Ll-n.Z.ta,s=f.Sl-n.Z.ia;i>m&&i<A&&s>C&&s<_&&(this.UC?f.Gm[f.Gf++]=c:T=!0)}const b=n.Z.ta,v=n.Z.ia;let O=0,L=0;0!==t&&(O=n.Z.sin[t],L=n.Z.cos[t]);for(let e=0;e<this.mC;e++){let n,c=this.AC[e],u=this.gC[e],w=this.IC[e];0!==t&&(n=w*O+c*L>>16,w=w*L-c*O>>16,c=n),c+=o,u+=l,w+=a,n=w*h+c*r>>16,w=w*r-c*h>>16,c=n,n=u*s-w*i>>16,w=u*i+w*s>>16,u=n,f.TS&&(f.TS[e]=w-d),w>=50&&f.CS&&f.ES?(f.CS[e]=b+((c<<9)/w|0),f.ES[e]=v+((u<<9)/w|0)):f.CS&&(f.CS[e]=-5e3,E=!0),(E||this.jL>0)&&f.bS&&f.vS&&f.OS&&(f.bS[e]=c,f.vS[e]=u,f.OS[e]=w)}try{this.ak(E,T,c)}catch(t){}};ak=(t,i,s,h=!1)=>{f.BS&&(this.sk=-1,this.hk=-1);for(let t=0;t<this.$S;t++)f.LS&&(f.LS[t]=0);for(let h=0;h<this.Rv;h++)if((!this.kv||-1!==this.kv[h])&&f.CS&&f.ES&&f.TS&&f.SS&&f.LS){const n=this.Mv[h],r=this.xv[h],o=this.Nv[h],l=f.CS[n],a=f.CS[r],c=f.CS[o],u=f.ES[n],d=f.ES[r],w=f.ES[o],y=f.TS[n],p=f.TS[r],m=f.TS[o];if(!t||-5e3!==l&&-5e3!==a&&-5e3!==c){i&&this.ck(f.Ll,f.Sl,u,d,w,l,a,c)&&(f.Gm[f.Gf++]=s,i=!1);if((l-a)*(w-d)-(u-d)*(c-a)<=0)continue;if(f._S&&(f._S[h]=!1),f.gS&&(f.gS[h]=l<0||a<0||c<0||l>e.Z.dO||a>e.Z.dO||c>e.Z.dO),f.SS&&f.LS){const t=((y+p+m)/3|0)+this.JS;f.SS[t][f.LS[t]++]=h,f.BS&&this.ck(f.Ll,f.Sl,u,d,w,l,a,c)&&this.hk<t&&(this.sk=h,this.hk=t)}}else if(f._S&&(f._S[h]=!0),f.SS&&f.LS){const t=((y+p+m)/3|0)+this.JS;f.SS[t][f.LS[t]++]=h}}if(!this.XS&&f.LS){for(let t=this.$S-1;t>=0;t--){const i=f.LS[t];if(!(i<=0)&&f.SS){const s=f.SS[t];for(let t=0;t<i;t++)this.fk(s[t],h)}}return}for(let t=0;t<12;t++)f.kS&&f.NS&&(f.kS[t]=0,f.NS[t]=0);if(f.LS)for(let t=this.$S-1;t>=0;t--){const i=f.LS[t];if(i>0&&f.SS){const s=f.SS[t];for(let h=0;h<i;h++)if(this.XS&&f.kS&&f.RS){const i=s[h],e=this.XS[i],n=f.kS[e]++;f.RS[e][n]=i,e<10&&f.NS?f.NS[e]+=t:10===e&&f.MS?f.MS[n]=t:f.xS&&(f.xS[n]=t)}}}let n=0;f.kS&&f.NS&&(f.kS[1]>0||f.kS[2]>0)&&(n=(f.NS[1]+f.NS[2])/(f.kS[1]+f.kS[2])|0);let r=0;f.kS&&f.NS&&(f.kS[3]>0||f.kS[4]>0)&&(r=(f.NS[3]+f.NS[4])/(f.kS[3]+f.kS[4])|0);let o=0;if(f.kS&&f.NS&&(f.kS[6]>0||f.kS[8]>0)&&(o=(f.NS[6]+f.NS[8])/(f.kS[6]+f.kS[8])|0),f.kS&&f.RS){let t,i=0,s=f.kS[10],e=f.RS[10],l=f.MS;i===s&&(i=0,s=f.kS[11],e=f.RS[11],l=f.xS),t=i<s&&l?l[i]:-1e3;for(let a=0;a<10;a++){for(;0===a&&t>n;)this.fk(e[i++],h),i===s&&e!==f.RS[11]&&(i=0,s=f.kS[11],e=f.RS[11],l=f.xS),t=i<s&&l?l[i]:-1e3;for(;3===a&&t>r;)this.fk(e[i++],h),i===s&&e!==f.RS[11]&&(i=0,s=f.kS[11],e=f.RS[11],l=f.xS),t=i<s&&l?l[i]:-1e3;for(;5===a&&t>o;)this.fk(e[i++],h),i===s&&e!==f.RS[11]&&(i=0,s=f.kS[11],e=f.RS[11],l=f.xS),t=i<s&&l?l[i]:-1e3;const c=f.kS[a],u=f.RS[a];for(let t=0;t<c;t++)this.fk(u[t],h)}for(;-1e3!==t;)this.fk(e[i++],h),i===s&&e!==f.RS[11]&&(i=0,e=f.RS[11],s=f.kS[11],l=f.xS),t=i<s&&l?l[i]:-1e3}};fk=(t,i=!1)=>{if(f._S&&f._S[t])return void this.uk(t,i);const s=this.Mv[t],h=this.xv[t],e=this.Nv[t];let r;if(f.gS&&(n.Z.uO=f.gS[t]),this.zS?n.Z.alpha=this.zS[t]:n.Z.alpha=0,r=this.kv?3&this.kv[t]:0,i&&f.CS&&f.ES&&this.YS&&this.ZS&&this.VS)n.Z.SL(f.CS[s],f.ES[s],f.CS[h],f.ES[h],n.Z.palette[this.YS[t]]),n.Z.SL(f.CS[h],f.ES[h],f.CS[e],f.ES[e],n.Z.palette[this.ZS[t]]),n.Z.SL(f.CS[e],f.ES[e],f.CS[s],f.ES[s],n.Z.palette[this.VS[t]]);else if(0===r&&this.YS&&this.ZS&&this.VS&&f.CS&&f.ES)n.Z.mO(f.CS[s],f.CS[h],f.CS[e],f.ES[s],f.ES[h],f.ES[e],this.YS[t],this.ZS[t],this.VS[t]);else if(1===r&&this.YS&&f.CS&&f.ES)n.Z.ZL(f.CS[s],f.CS[h],f.CS[e],f.ES[s],f.ES[h],f.ES[e],n.Z.palette[this.YS[t]]);else if(2===r&&this.kv&&this.v_&&this.YS&&this.ZS&&this.VS&&f.CS&&f.ES&&f.bS&&f.vS&&f.OS){const i=this.kv[t]>>2,r=this.jS[i],o=this.KS[i],l=this.qS[i];n.Z._O(f.CS[s],f.CS[h],f.CS[e],f.ES[s],f.ES[h],f.ES[e],this.YS[t],this.ZS[t],this.VS[t],f.bS[r],f.vS[r],f.OS[r],f.bS[o],f.bS[l],f.vS[o],f.vS[l],f.OS[o],f.OS[l],this.v_[t])}else if(3===r&&this.kv&&this.v_&&this.YS&&f.CS&&f.ES&&f.bS&&f.vS&&f.OS){const i=this.kv[t]>>2,r=this.jS[i],o=this.KS[i],l=this.qS[i];n.Z._O(f.CS[s],f.CS[h],f.CS[e],f.ES[s],f.ES[h],f.ES[e],this.YS[t],this.YS[t],this.YS[t],f.bS[r],f.vS[r],f.OS[r],f.bS[o],f.bS[l],f.vS[o],f.vS[l],f.OS[o],f.OS[l],this.v_[t])}};uk=(t,i=!1)=>{let s=0;if(f.OS){const i=n.Z.ta,h=n.Z.ia,e=this.Mv[t],r=this.xv[t],o=this.Nv[t],l=f.OS[e],a=f.OS[r],c=f.OS[o];if(l>=50&&f.CS&&f.ES&&this.YS)f.PS[s]=f.CS[e],f.DS[s]=f.ES[e],f.FS[s++]=this.YS[t];else if(f.bS&&f.vS&&this.YS){const u=f.bS[e],d=f.vS[e],w=this.YS[t];if(c>=50&&this.VS){const e=(50-l)*n.Z.ML[c-l];f.PS[s]=i+((u+((f.bS[o]-u)*e>>16)<<9)/50|0),f.DS[s]=h+((d+((f.vS[o]-d)*e>>16)<<9)/50|0),f.FS[s++]=w+((this.VS[t]-w)*e>>16)}if(a>=50&&this.ZS){const e=(50-l)*n.Z.ML[a-l];f.PS[s]=i+((u+((f.bS[r]-u)*e>>16)<<9)/50|0),f.DS[s]=h+((d+((f.vS[r]-d)*e>>16)<<9)/50|0),f.FS[s++]=w+((this.ZS[t]-w)*e>>16)}}if(a>=50&&f.CS&&f.ES&&this.ZS)f.PS[s]=f.CS[r],f.DS[s]=f.ES[r],f.FS[s++]=this.ZS[t];else if(f.bS&&f.vS&&this.ZS){const u=f.bS[r],d=f.vS[r],w=this.ZS[t];if(l>=50&&this.YS){const r=(50-a)*n.Z.ML[l-a];f.PS[s]=i+((u+((f.bS[e]-u)*r>>16)<<9)/50|0),f.DS[s]=h+((d+((f.vS[e]-d)*r>>16)<<9)/50|0),f.FS[s++]=w+((this.YS[t]-w)*r>>16)}if(c>=50&&this.VS){const e=(50-a)*n.Z.ML[c-a];f.PS[s]=i+((u+((f.bS[o]-u)*e>>16)<<9)/50|0),f.DS[s]=h+((d+((f.vS[o]-d)*e>>16)<<9)/50|0),f.FS[s++]=w+((this.VS[t]-w)*e>>16)}}if(c>=50&&f.CS&&f.ES&&this.VS)f.PS[s]=f.CS[o],f.DS[s]=f.ES[o],f.FS[s++]=this.VS[t];else if(f.bS&&f.vS&&this.VS){const u=f.bS[o],d=f.vS[o],w=this.VS[t];if(a>=50&&this.ZS){const e=(50-c)*n.Z.ML[a-c];f.PS[s]=i+((u+((f.bS[r]-u)*e>>16)<<9)/50|0),f.DS[s]=h+((d+((f.vS[r]-d)*e>>16)<<9)/50|0),f.FS[s++]=w+((this.ZS[t]-w)*e>>16)}if(l>=50&&this.YS){const r=(50-c)*n.Z.ML[l-c];f.PS[s]=i+((u+((f.bS[e]-u)*r>>16)<<9)/50|0),f.DS[s]=h+((d+((f.vS[e]-d)*r>>16)<<9)/50|0),f.FS[s++]=w+((this.YS[t]-w)*r>>16)}}}const h=f.PS[0],r=f.PS[1],o=f.PS[2],l=f.DS[0],a=f.DS[1],c=f.DS[2];if(!((h-r)*(c-a)-(l-a)*(o-r)<=0))if(n.Z.uO=!1,3===s){let s;if((h<0||r<0||o<0||h>e.Z.dO||r>e.Z.dO||o>e.Z.dO)&&(n.Z.uO=!0),s=this.kv?3&this.kv[t]:0,i)n.Z.SL(h,r,l,a,f.FS[0]),n.Z.SL(r,o,a,c,f.FS[1]),n.Z.SL(o,h,c,l,f.FS[2]);else if(0===s)n.Z.mO(h,r,o,l,a,c,f.FS[0],f.FS[1],f.FS[2]);else if(1===s&&this.YS)n.Z.ZL(h,r,o,l,a,c,n.Z.palette[this.YS[t]]);else if(2===s&&this.kv&&this.v_&&f.bS&&f.vS&&f.OS){const i=this.kv[t]>>2,s=this.jS[i],e=this.KS[i],u=this.qS[i];n.Z._O(h,r,o,l,a,c,f.FS[0],f.FS[1],f.FS[2],f.bS[s],f.vS[s],f.OS[s],f.bS[e],f.bS[u],f.vS[e],f.vS[u],f.OS[e],f.OS[u],this.v_[t])}else if(3===s&&this.kv&&this.v_&&this.YS&&f.bS&&f.vS&&f.OS){const i=this.kv[t]>>2,s=this.jS[i],e=this.KS[i],u=this.qS[i];n.Z._O(h,r,o,l,a,c,this.YS[t],this.YS[t],this.YS[t],f.bS[s],f.vS[s],f.OS[s],f.bS[e],f.bS[u],f.vS[e],f.vS[u],f.OS[e],f.OS[u],this.v_[t])}}else if(4===s){let s;if((h<0||r<0||o<0||h>e.Z.dO||r>e.Z.dO||o>e.Z.dO||f.PS[3]<0||f.PS[3]>e.Z.dO)&&(n.Z.uO=!0),s=this.kv?3&this.kv[t]:0,i)n.Z.SL(h,r,l,a,f.FS[0]),n.Z.SL(r,o,a,c,f.FS[1]),n.Z.SL(o,f.PS[3],c,f.DS[3],f.FS[2]),n.Z.SL(f.PS[3],h,f.DS[3],l,f.FS[3]);else if(0===s)n.Z.mO(h,r,o,l,a,c,f.FS[0],f.FS[1],f.FS[2]),n.Z.mO(h,o,f.PS[3],l,c,f.DS[3],f.FS[0],f.FS[2],f.FS[3]);else if(1===s){if(this.YS){const i=n.Z.palette[this.YS[t]];n.Z.ZL(h,r,o,l,a,c,i),n.Z.ZL(h,o,f.PS[3],l,c,f.DS[3],i)}}else if(2===s&&this.kv&&this.v_&&f.bS&&f.vS&&f.OS){const i=this.kv[t]>>2,s=this.jS[i],e=this.KS[i],u=this.qS[i];n.Z._O(h,r,o,l,a,c,f.FS[0],f.FS[1],f.FS[2],f.bS[s],f.vS[s],f.OS[s],f.bS[e],f.bS[u],f.vS[e],f.vS[u],f.OS[e],f.OS[u],this.v_[t]),n.Z._O(h,o,f.PS[3],l,c,f.DS[3],f.FS[0],f.FS[2],f.FS[3],f.bS[s],f.vS[s],f.OS[s],f.bS[e],f.bS[u],f.vS[e],f.vS[u],f.OS[e],f.OS[u],this.v_[t])}else if(3===s&&this.kv&&this.v_&&this.YS&&f.bS&&f.vS&&f.OS){const i=this.kv[t]>>2,s=this.jS[i],e=this.KS[i],u=this.qS[i];n.Z._O(h,r,o,l,a,c,this.YS[t],this.YS[t],this.YS[t],f.bS[s],f.vS[s],f.OS[s],f.bS[e],f.bS[u],f.vS[e],f.vS[u],f.OS[e],f.OS[u],this.v_[t]),n.Z._O(h,o,f.PS[3],l,c,f.DS[3],this.YS[t],this.YS[t],this.YS[t],f.bS[s],f.vS[s],f.OS[s],f.bS[e],f.bS[u],f.vS[e],f.vS[u],f.OS[e],f.OS[u],this.v_[t])}}};rk=(t,i,s,h,e)=>{if(!h)return;const r=h.length;if(0===e){let e=0;f.An=0,f.US=0,f.In=0;for(let t=0;t<r;t++){if(!this.TC)continue;const i=h[t];if(i<this.TC.length){const t=this.TC[i];if(t)for(let i=0;i<t.length;i++){const s=t[i];f.An+=this.AC[s],f.US+=this.gC[s],f.In+=this.IC[s],e++}}}e>0?(f.An=(f.An/e|0)+t,f.US=(f.US/e|0)+i,f.In=(f.In/e|0)+s):(f.An=t,f.US=i,f.In=s)}else if(1===e)for(let e=0;e<r;e++){const n=h[e];if(!this.TC||n>=this.TC.length)continue;const r=this.TC[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.AC[e]+=t,this.gC[e]+=i,this.IC[e]+=s}}else if(2===e)for(let e=0;e<r;e++){const r=h[e];if(!this.TC||r>=this.TC.length)continue;const o=this.TC[r];if(o)for(let h=0;h<o.length;h++){const e=o[h];this.AC[e]-=f.An,this.gC[e]-=f.US,this.IC[e]-=f.In;const r=8*(255&t),l=8*(255&i),a=8*(255&s);let c,u;if(0!==a){c=n.Z.sin[a],u=n.Z.cos[a];const t=this.gC[e]*c+this.AC[e]*u>>16;this.gC[e]=this.gC[e]*u-this.AC[e]*c>>16,this.AC[e]=t}if(0!==r){c=n.Z.sin[r],u=n.Z.cos[r];const t=this.gC[e]*u-this.IC[e]*c>>16;this.IC[e]=this.gC[e]*c+this.IC[e]*u>>16,this.gC[e]=t}if(0!==l){c=n.Z.sin[l],u=n.Z.cos[l];const t=this.IC[e]*c+this.AC[e]*u>>16;this.IC[e]=this.IC[e]*u-this.AC[e]*c>>16,this.AC[e]=t}this.AC[e]+=f.An,this.gC[e]+=f.US,this.IC[e]+=f.In}}else if(3===e)for(let e=0;e<r;e++){const n=h[e];if(!this.TC||n>=this.TC.length)continue;const r=this.TC[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.AC[e]-=f.An,this.gC[e]-=f.US,this.IC[e]-=f.In,this.AC[e]=this.AC[e]*t/128|0,this.gC[e]=this.gC[e]*i/128|0,this.IC[e]=this.IC[e]*s/128|0,this.AC[e]+=f.An,this.gC[e]+=f.US,this.IC[e]+=f.In}}else if(5===e&&this.EC&&this.zS)for(let i=0;i<r;i++){const s=h[i];if(s>=this.EC.length)continue;const e=this.EC[s];if(e)for(let i=0;i<e.length;i++){const s=e[i];this.zS[s]+=8*t,this.zS[s]<0&&(this.zS[s]=0),this.zS[s]>255&&(this.zS[s]=255)}}};lk=()=>{this.OC=0,this.KT=0,this.bv=0,this.vv=999999,this.Ov=-999999,this.Sv=-99999,this.Lv=99999;for(let t=0;t<this.mC;t++){const i=this.AC[t],s=this.gC[t],h=this.IC[t];i<this.vv&&(this.vv=i),i>this.Ov&&(this.Ov=i),h<this.Lv&&(this.Lv=h),h>this.Sv&&(this.Sv=h),-s>this.OC&&(this.OC=-s),s>this.bv&&(this.bv=s);const e=i*i+h*h;e>this.KT&&(this.KT=e)}this.KT=0|Math.sqrt(this.KT),this.JS=0|Math.sqrt(this.KT*this.KT+this.OC*this.OC),this.$S=this.JS+(0|Math.sqrt(this.KT*this.KT+this.bv*this.bv))};ck=(t,i,s,h,e,n,r,o)=>!(i<s&&i<h&&i<e)&&(!(i>s&&i>h&&i>e)&&(!(t<n&&t<r&&t<o)&&(t<=n||t<=r||t<=o)));dk=t=>{if(!(f.CS&&f.ES&&this.YS&&this.ZS&&this.VS))return;const i=this.Mv[t],s=this.xv[t],h=this.Nv[t];n.Z.SL(f.CS[i],f.ES[i],f.CS[s],f.ES[s],n.Z.palette[1e3]),n.Z.SL(f.CS[s],f.ES[s],f.CS[h],f.ES[h],n.Z.palette[1e3]),n.Z.SL(f.CS[h],f.ES[h],f.CS[i],f.ES[i],n.Z.palette[1e3])}}},6542:(t,i,s)=>{s.d(i,{Z:()=>o});var h=s(2991),e=s(2383),n=s(6327),r=s(5147);class o extends n.Z{tc;width;height;Ac;Ic;Rl;xu;constructor(t,i){super(),this.tc=new Int32Array(t*i),this.width=this.Rl=t,this.height=this.xu=i,this.Ac=this.Ic=0}static yc=async(t,i)=>{const s=t.read(i+'.dat');if(!s)throw new Error(`${i} jpeg not found!`);const h=await(0,r.Y)(s),e=new o(h.width,h.height),n=new Uint32Array(h.data.buffer),l=e.tc;for(let t=0;t<l.length;t++){const i=n[t];l[t]=(i>>24&255)<<24|(255&i)<<16|(i>>8&255)<<8|i>>16&255}return e};static Wa=(t,i,s=0)=>{const h=new e.Z(t.read(i+'.dat')),n=new e.Z(t.read('index.dat'));n.Mc=h.Cy;const r=n.Cy,l=n.Cy,a=[],c=n.vy-1;for(let t=0;t<c;t++)a[t+1]=n.Z_,0===a[t+1]&&(a[t+1]=1);for(let t=0;t<s;t++)n.Mc+=2,h.Mc+=n.Cy*n.Cy,n.Mc+=1;if(h.Mc>h.data.length||n.Mc>n.data.length)throw new Error;const f=n.vy,u=n.vy,d=n.Cy,w=n.Cy,y=new o(d,w);y.Ac=f,y.Ic=u,y.Rl=r,y.xu=l;const p=n.vy;if(0===p){const t=y.width*y.height;for(let i=0;i<t;i++)y.tc[i]=a[h.vy]}else if(1===p){const t=y.width;for(let i=0;i<t;i++){const s=y.height;for(let e=0;e<s;e++)y.tc[i+e*t]=a[h.vy]}}return y};bind=()=>{h.Z.bind(this.tc,this.width,this.height)};draw=(t,i)=>{t|=0,i|=0;let s=(t+=this.Ac)+(i+=this.Ic)*h.Z.ZC,e=0,n=this.height,r=this.width,o=h.Z.ZC-r,l=0;if(i<h.Z.top){const t=h.Z.top-i;n-=t,i=h.Z.top,e+=t*r,s+=t*h.Z.ZC}if(i+n>h.Z.bottom&&(n-=i+n-h.Z.bottom),t<h.Z.left){const i=h.Z.left-t;r-=i,t=h.Z.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.Z.right){const i=t+r-h.Z.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.wk(r,n,this.tc,e,l,h.Z.tc,s,o)};kl=(t,i,s)=>{i|=0,s|=0;let e=(i+=this.Ac)+(s+=this.Ic)*h.Z.ZC,n=0,r=this.height,o=this.width,l=h.Z.ZC-o,a=0;if(s<h.Z.top){const t=h.Z.top-s;r-=t,s=h.Z.top,n+=t*o,e+=t*h.Z.ZC}if(s+r>h.Z.bottom&&(r-=s+r-h.Z.bottom),i<h.Z.left){const t=h.Z.left-i;o-=t,i=h.Z.left,n+=t,e+=t,a+=t,l+=t}if(i+o>h.Z.right){const t=i+o-h.Z.right;o-=t,a+=t,l+=t}o>0&&r>0&&this.yk(o,r,this.tc,n,a,h.Z.tc,e,l,t)};Ka=(t,i)=>{t|=0,i|=0;let s=(t+=this.Ac)+(i+=this.Ic)*h.Z.ZC,e=0,n=this.height,r=this.width,o=h.Z.ZC-r,l=0;if(i<h.Z.top){const t=h.Z.top-i;n-=t,i=h.Z.top,e+=t*r,s+=t*h.Z.ZC}if(i+n>h.Z.bottom&&(n-=i+n-h.Z.bottom),t<h.Z.left){const i=h.Z.left-t;r-=i,t=h.Z.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.Z.right){const i=t+r-h.Z.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.pk(r,n,this.tc,e,l,h.Z.tc,s,o)};za=()=>{const t=this.tc,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}};ja=()=>{const t=this.tc,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}};translate=(t,i,s)=>{for(let h=0;h<this.tc.length;h++){const e=this.tc[h];if(0!==e){let n=e>>16&255;n+=t,n<1?n=1:n>255&&(n=255);let r=e>>8&255;r+=i,r<1?r=1:r>255&&(r=255);let o=255&e;o+=s,o<1?o=1:o>255&&(o=255),this.tc[h]=(n<<16)+(r<<8)+o}}};$C=(t,i,s,e)=>{t|=0,i|=0,s|=0,e|=0;try{const n=this.width;let r=0,o=0;const l=this.Rl,a=this.xu,c=(l<<16)/s|0,f=(a<<16)/e|0;t+=(this.Ac*s+l-1)/l|0,i+=(this.Ic*e+a-1)/a|0,this.Ac*s%l!=0&&(r=(l-this.Ac*s%l<<16)/s|0),this.Ic*e%a!=0&&(o=(a-this.Ic*e%a<<16)/e|0),s=s*(this.width-(r>>16))/l|0,e=e*(this.height-(o>>16))/a|0;let u=t+i*h.Z.ZC,d=h.Z.ZC-s;if(i<h.Z.top){const t=h.Z.top-i;e-=t,i=0,u+=t*h.Z.ZC,o+=f*t}if(i+e>h.Z.bottom&&(e-=i+e-h.Z.bottom),t<h.Z.left){const i=h.Z.left-t;s-=i,t=0,u+=i,r+=c*i,d+=i}if(t+s>h.Z.right){const i=t+s-h.Z.right;s-=i,d+=i}this.scale(s,e,this.tc,r,o,h.Z.tc,d,u,n,c,f)}catch(t){console.error('error in sprite clipping routine')}};Lu=(t,i,s,e,n,r,o,l,a,c)=>{t|=0,i|=0,s|=0,e|=0;try{const f=-s/2|0,u=-e/2|0,d=65536*Math.sin(a/326.11)|0,w=65536*Math.cos(a/326.11)|0,y=d*c>>8,p=w*c>>8;let m=(o<<16)+u*y+f*p,A=u*p-f*y+(l<<16),I=t+i*h.Z.ZC;for(let t=0;t<e;t++){const i=n[t];let s=I+i,e=m+p*i,o=A-y*i;for(let i=-r[t];i<0;i++)h.Z.tc[s++]=this.tc[(e>>16)+(o>>16)*this.width],e+=p,o-=y;m+=y,A+=p,I+=h.Z.ZC}}catch(t){}};Mu=(t,i,s)=>{t|=0,i|=0;let e=(t+=this.Ac)+(i+=this.Ic)*h.Z.ZC,n=0,r=this.height,o=this.width,l=h.Z.ZC-o,a=0;if(i<h.Z.top){const t=h.Z.top-i;r-=t,i=h.Z.top,n+=t*o,e+=t*h.Z.ZC}if(i+r>h.Z.bottom&&(r-=i+r-h.Z.bottom),t<h.Z.left){const i=h.Z.left-t;o-=i,t=h.Z.left,n+=i,e+=i,a+=i,l+=i}if(t+o>h.Z.right){const i=t+o-h.Z.right;o-=i,a+=i,l+=i}o>0&&r>0&&this.mk(o,r,this.tc,a,n,h.Z.tc,e,l,s.tc)};scale=(t,i,s,h,e,n,r,o,l,a,c)=>{try{const f=h;for(let u=-i;u<0;u++){const i=(e>>16)*l;for(let e=-t;e<0;e++){const t=s[(h>>16)+i];0===t?o++:n[o++]=t,h+=a}e+=c,h=f,o+=r}}catch(t){console.error('error in plot_scale')}};pk=(t,i,s,h,e,n,r,o)=>{const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++)n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++];for(let i=t;i<0;i++)n[r++]=s[h++];r+=o,h+=e}};yk=(t,i,s,h,e,n,r,o,l)=>{const a=256-l;for(let c=-i;c<0;c++){for(let i=-t;i<0;i++){const t=s[h++];if(0===t)r++;else{const i=n[r];n[r++]=((16711935&t)*l+(16711935&i)*a&4278255360)+((65280&t)*l+(65280&i)*a&16711680)>>8}}r+=o,h+=e}};wk=(t,i,s,h,e,n,r,o)=>{const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=t}r+=o,h+=e}};mk=(t,i,s,h,e,n,r,o,l)=>{const a=-(t>>2);t=-(3&t);for(let c=-i;c<0;c++){for(let t=a;t<0;t++){let t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++}for(let i=t;i<0;i++){const t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++}r+=o,e+=h}}}},664:(t,i,s)=>{s.d(i,{Z:()=>r});var h=s(2991),e=s(2383),n=s(6327);class r extends n.Z{tc;width;height;Ac;Ic;Rl;xu;palette;constructor(t,i,s){super(),this.tc=new Int8Array(t*i),this.width=this.Rl=t,this.height=this.xu=i,this.Ac=this.Ic=0,this.palette=s}static Wa=(t,i,s=0)=>{const h=new e.Z(t.read(i+'.dat')),n=new e.Z(t.read('index.dat'));n.Mc=h.Cy;const o=n.Cy,l=n.Cy,a=n.vy,c=new Int32Array(a);for(let t=1;t<a;t++)c[t]=n.Z_,0===c[t]&&(c[t]=1);for(let t=0;t<s;t++)n.Mc+=2,h.Mc+=n.Cy*n.Cy,n.Mc+=1;if(h.Mc>h.data.length||n.Mc>n.data.length)throw new Error;const f=n.vy,u=n.vy,d=n.Cy,w=n.Cy,y=new r(d,w,c);y.Ac=f,y.Ic=u,y.Rl=o,y.xu=l;const p=y.tc,m=n.vy;if(0===m){const t=y.width*y.height;for(let i=0;i<t;i++)p[i]=h.Ty}else if(1===m){const t=y.width,i=y.height;for(let s=0;s<t;s++)for(let e=0;e<i;e++)p[s+e*t]=h.Ty}return y};draw=(t,i)=>{t|=0,i|=0;let s=(t+=this.Ac)+(i+=this.Ic)*h.Z.ZC,e=0,n=this.height,r=this.width,o=h.Z.ZC-r,l=0;if(i<h.Z.top){const t=h.Z.top-i;n-=t,i=h.Z.top,e+=t*r,s+=t*h.Z.ZC}if(i+n>h.Z.bottom&&(n-=i+n-h.Z.bottom),t<h.Z.left){const i=h.Z.left-t;r-=i,t=h.Z.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.Z.right){const i=t+r-h.Z.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.Ak(r,n,this.tc,e,l,h.Z.tc,s,o)};za=()=>{const t=this.tc,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}};ja=()=>{const t=this.tc,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}};translate=(t,i,s)=>{for(let h=0;h<this.palette.length;h++){let e=this.palette[h]>>16&255;e+=t,e<0?e=0:e>255&&(e=255);let n=this.palette[h]>>8&255;n+=i,n<0?n=0:n>255&&(n=255);let r=255&this.palette[h];r+=s,r<0?r=0:r>255&&(r=255),this.palette[h]=(e<<16)+(n<<8)+r}};HL=()=>{this.Rl|=0,this.xu|=0,this.Rl/=2,this.xu/=2,this.Rl|=0,this.xu|=0;const t=new Int8Array(this.Rl*this.xu);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[(h+this.Ac>>1)+(s+this.Ic>>1)*this.Rl]=this.tc[i++];this.tc=t,this.width=this.Rl,this.height=this.xu,this.Ac=0,this.Ic=0};$C=()=>{if(this.width===this.Rl&&this.height===this.xu)return;const t=new Int8Array(this.Rl*this.xu);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[h+this.Ac+(s+this.Ic)*this.Rl]=this.tc[i++];this.tc=t,this.width=this.Rl,this.height=this.xu,this.Ac=0,this.Ic=0};Ak=(t,i,s,h,e,n,r,o)=>{const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t]}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=this.palette[255&t]}r+=o,h+=e}}}},4628:(t,i,s)=>{s.d(i,{Z:()=>l});var h=s(2991),e=s(2383),n=s(6327);class r{seed;constructor(t){this.seed=(0x5deece66dn^t)&(1n<<48n)-1n}Ik=t=>{this.seed=(0x5deece66dn^t)&(1n<<48n)-1n};gy=()=>this.next(32);next=t=>(this.seed=0x5deece66dn*this.seed+0xbn&(1n<<48n)-1n,Number(this.seed)>>>48-t)}var o=s(312);class l extends n.Z{static Lc='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!"$%^&*()-_=+[{]};:\'@#~,<.>/?\\| ';static gk=[];static{for(let t=0;t<256;t++){let i=l.Lc.indexOf(String.fromCharCode(t));-1===i&&(i=74),l.gk[t]=i}}_k=[];Ck=new Int32Array(94);Ek=new Int32Array(94);Tk=new Int32Array(94);bk=new Int32Array(94);vk=new Int32Array(95);Ok=new Int32Array(256);random=new r(BigInt(Date.now()));height=0;static Wa=(t,i)=>{const s=new e.Z(t.read(i+'.dat')),h=new e.Z(t.read('index.dat'));h.Mc=s.Cy+4;const n=h.vy;n>0&&(h.Mc+=3*(n-1));const r=new l;for(let t=0;t<94;t++){r.Tk[t]=h.vy,r.bk[t]=h.vy;const i=r.Ck[t]=h.Cy,e=r.Ek[t]=h.Cy,n=h.vy,o=i*e;if(r._k[t]=new Int8Array(o),0===n)for(let h=0;h<i*e;h++)r._k[t][h]=s.Ty;else if(1===n)for(let h=0;h<i;h++)for(let n=0;n<e;n++)r._k[t][h+n*i]=s.Ty;e>r.height&&(r.height=e),r.Tk[t]=1,r.vk[t]=i+2;{let s=0;for(let h=e/7|0;h<e;h++)s+=r._k[t][h*i];s<=(e/7|0)&&(r.vk[t]--,r.Tk[t]=0)}{let s=0;for(let h=e/7|0;h<e;h++)s+=r._k[t][i+h*i-1];s<=(e/7|0)&&r.vk[t]--}}r.vk[94]=r.vk[8];for(let t=0;t<256;t++)r.Ok[t]=r.vk[l.gk[t]];return r};Ml=(t,i,s,h)=>{if(!s)return;t|=0,i|=0;const e=s.length;i-=this.height;for(let n=0;n<e;n++){const e=l.gk[s.charCodeAt(n)];94!==e&&this.Lk(this._k[e],t+this.Tk[e],i+this.bk[e],this.Ck[e],this.Ek[e],h),t+=this.vk[e]}};Kl=(t,i,s,h,e)=>{t|=0,i|=0;const n=s.length;i-=this.height;for(let r=0;r<n;r++)if('@'===s.charAt(r)&&r+4<n&&'@'===s.charAt(r+4))h=this.Sk(s.substring(r+1,r+4)),r+=4;else{const n=l.gk[s.charCodeAt(r)];94!==n&&(e&&this.Lk(this._k[n],t+this.Tk[n]+1,i+this.bk[n]+1,this.Ck[n],this.Ek[n],o.Z.Nl),this.Lk(this._k[n],t+this.Tk[n],i+this.bk[n],this.Ck[n],this.Ek[n],h)),t+=this.vk[n]}};hu=t=>{if(!t)return 0;const i=t.length;let s=0;for(let h=0;h<i;h++)'@'===t.charAt(h)&&h+4<i&&'@'===t.charAt(h+4)?h+=4:s+=this.Ok[t.charCodeAt(h)];return s};zl=(t,i,s,h,e)=>{t|=0,i|=0,this.Kl(t-this.hu(s)/2,i,s,h,e)};cc=(t,i,s,h)=>{s&&(t|=0,i|=0,this.Ml(t-this.hu(s)/2,i,s,h))};sd=(t,i,s,h,e,n)=>{t|=0,i|=0,this.random.Ik(BigInt(n));const r=192+(31&this.random.gy()),a=i-this.height;for(let i=0;i<s.length;i++)if('@'===s.charAt(i)&&i+4<s.length&&'@'===s.charAt(i+4))h=this.Sk(s.substring(i+1,i+4)),i+=4;else{const n=l.gk[s.charCodeAt(i)];94!==n&&(e&&this.kk(t+this.Tk[n]+1,a+this.bk[n]+1,this.Ck[n],this.Ek[n],o.Z.Nl,192,this._k[n]),this.kk(t+this.Tk[n],a+this.bk[n],this.Ck[n],this.Ek[n],h,r,this._k[n])),t+=this.vk[n],0==(3&this.random.gy())&&t++}};yu=(t,i,s,h,e=!0)=>{t|=0,i|=0,e&&this.Ml(t-this.hu(s)+1,i+1,s,o.Z.Nl),this.Ml(t-this.hu(s),i,s,h)};du=(t,i,s,h,e)=>{if(!s)return;t|=0,i|=0,t-=this.hu(s)/2|0;const n=i-this.height;for(let i=0;i<s.length;i++){const r=l.gk[s.charCodeAt(i)];94!=r&&this.Lk(this._k[r],t+this.Tk[r],n+this.bk[r]+(5*Math.sin(i/2+e/5)|0),this.Ck[r],this.Ek[r],h),t+=this.vk[r]}};Lk=(t,i,s,e,n,r)=>{e|=0,n|=0;let o=(i|=0)+(s|=0)*h.Z.ZC,l=h.Z.ZC-e,a=0,c=0;if(s<h.Z.top){const t=h.Z.top-s;n-=t,s=h.Z.top,c+=t*e,o+=t*h.Z.ZC}if(s+n>=h.Z.bottom&&(n-=s+n+1-h.Z.bottom),i<h.Z.left){const t=h.Z.left-i;e-=t,i=h.Z.left,c+=t,o+=t,a+=t,l+=t}if(i+e>=h.Z.right){const t=i+e+1-h.Z.right;e-=t,a+=t,l+=t}e>0&&n>0&&this.Rk(e,n,t,c,a,h.Z.tc,o,l,r)};kk=(t,i,s,e,n,r,o)=>{s|=0,e|=0;let l=(t|=0)+(i|=0)*h.Z.ZC,a=h.Z.ZC-s,c=0,f=0;if(i<h.Z.top){const t=h.Z.top-i;e-=t,i=h.Z.top,f+=t*s,l+=t*h.Z.ZC}if(i+e>=h.Z.bottom&&(e-=i+e+1-h.Z.bottom),t<h.Z.left){const i=h.Z.left-t;s-=i,t=h.Z.left,f+=i,l+=i,c+=i,a+=i}if(t+s>=h.Z.right){const i=t+s+1-h.Z.right;s-=i,c+=i,a+=i}s>0&&e>0&&this.Mk(s,e,h.Z.tc,l,a,o,f,c,n,r)};Rk=(t,i,s,h,e,n,r,o,l)=>{const a=-((t|=0)>>2);t=-(3&t);for(let c=-(i|=0);c<0;c++){for(let t=a;t<0;t++)0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l;for(let i=t;i<0;i++)0===s[h++]?r++:n[r++]=l;r+=o,h+=e}};Mk=(t,i,s,h,e,n,r,o,l,a)=>{t|=0;const c=((16711935&l)*a&4278255360)+((65280&l)*a&16711680)>>8,f=256-a;for(let l=-(i|=0);l<0;l++){for(let i=-t;i<0;i++)if(0===n[r++])h++;else{const t=s[h];s[h++]=(((16711935&t)*f&4278255360)+((65280&t)*f&16711680)>>8)+c}h+=e,r+=o}};Sk=t=>'red'===t?o.Z.RED:'gre'===t?o.Z.GREEN:'blu'===t?o.Z.BLUE:'yel'===t?o.Z.Pl:'cya'===t?o.Z._c:'mag'===t?o.Z.Cc:'whi'===t?o.Z.yl:'bla'===t?o.Z.Nl:'lre'===t?o.Z.gL:'dre'===t?o.Z.bu:'dbl'===t?o.Z.Tu:'or1'===t?o.Z._L:'or2'===t?o.Z.CL:'or3'===t?o.Z.EL:'gr1'===t?o.Z.TL:'gr2'===t?o.Z.bL:'gr3'===t?o.Z.vL:o.Z.Nl;split(t,i){if(0===t.length)return[t];const s=[];for(;t.length>0;){if(this.hu(t)<=i&&-1===t.indexOf('|')){s.push(t);break}let h=t.length;for(let s=0;s<t.length;s++)if(' '===t[s]){if(this.hu(t.substring(0,s))>i)break;h=s}else if('|'===t[s]){h=s;break}s.push(t.substring(0,h)),t=t.substring(h+1)}return s}}},651:(t,i,s)=>{s.d(i,{Z:()=>n});var h=s(2991),e=s(6121);class n{xk;width;height;Nk;Pk;tc;constructor(t,i,s=e.Yo){this.Nk=s,this.xk=this.Nk.getImageData(0,0,t,i),this.Pk=new Uint32Array(this.xk.data.buffer),this.tc=new Int32Array(t*i),this.width=t,this.height=i,this.bind()}clear=()=>{this.tc.fill(0)};bind=()=>{h.Z.bind(this.tc,this.width,this.height)};draw=(t,i)=>{this.#t(),this.Nk.putImageData(this.xk,t,i)};#t=()=>{const t=this.tc.length,i=this.tc,s=this.Pk;for(let h=0;h<t;h++){const t=i[h];s[h]=t>>16&255|(t>>8&255)<<8|(255&t)<<16|4278190080}}}},2157:(t,i,s)=>{s.d(i,{Z:()=>n});var h=s(2383),e=s(9345);class n{static To=[];static Qa=t=>{const i=new h.Z(t.read('base_head.dat')),s=new h.Z(t.read('base_type.dat')),r=new h.Z(t.read('base_label.dat')),o=i.Cy;i.Mc+=2;for(let t=0;t<o;t++){const t=i.Cy,h=i.vy,o=new Uint8Array(h),l=new e.to(h,null);for(let t=0;t<h;t++){o[t]=s.vy;const i=r.vy,h=new Uint8Array(i);for(let t=0;t<i;t++)h[t]=r.vy;l[t]=h}this.To[t]=new n,this.To[t].length=h,this.To[t].types=o,this.To[t].labels=l}};length=0;types=null;labels=null}},8762:(t,i,s)=>{s.d(i,{Z:()=>n});var h=s(2157),e=s(2383);class n{static To=[];static Qa=t=>{const i=new e.Z(t.read('frame_head.dat')),s=new e.Z(t.read('frame_tran1.dat')),r=new e.Z(t.read('frame_tran2.dat')),o=new e.Z(t.read('frame_del.dat')),l=i.Cy;i.Mc+=2;const a=new Int32Array(500),c=new Int32Array(500),f=new Int32Array(500),u=new Int32Array(500);for(let t=0;t<l;t++){const t=i.Cy,e=this.To[t]=new n;e.delay=o.vy;const l=i.Cy,d=h.Z.To[l];e.ek=d;const w=i.vy;let y=-1,p=0;for(let t=0;t<w;t++){if(!d.types)throw new Error('SeqBase not loaded!!!');const i=s.vy;if(i>0){if(0!==d.types[t])for(let i=t-1;i>y;i--)if(0===d.types[i]){a[p]=i,c[p]=0,f[p]=0,u[p]=0,p++;break}a[p]=t;let s=0;3===d.types[a[p]]&&(s=128),c[p]=0==(1&i)?s:r.GS,f[p]=0==(2&i)?s:r.GS,u[p]=0==(4&i)?s:r.GS,y=t,p++}}e.length=p,e.nk=new Int32Array(p),e.x=new Int32Array(p),e.y=new Int32Array(p),e.z=new Int32Array(p);for(let t=0;t<p;t++)e.nk[t]=a[t],e.x[t]=c[t],e.y[t]=f[t],e.z[t]=u[t]}};delay=0;ek=null;length=0;nk=null;x=null;y=null;z=null}},9995:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static My=150;static Af=70;static gf=108;static Zc=81;static $c=189;static tw=7;static Id=88;static yd=30;static Ed=176;static fd=220;static hw=66;static jd=17;static Md=2;static $d=238;static Nw=233;static Nf=146;static ef=215;static If=236;static bI=85;static KA=219;static Fd=140;static Hd=40;static Gd=200;static Ud=178;static Bd=247;static sw=138;static bd=239;static Cd=194;static Ad=8;static gd=27;static _d=113;static Td=100;static Pd=134;static Rd=202;static Od=245;static Wd=172;static nw=96;static iw=97;static ew=116;static Dd=9;static ad=75;static rd=164;static xd=53;static Nd=185;static nd=206;static dw=177;static lw=248;static pd=195;static md=71;static wd=133;static ud=157;static dd=211;static Sd=48;static Ld=130;static qd=31;static Qd=59;static zd=212;static Jd=38;static Kd=6;static Xd=155;static kd=235;static Ay=231;static Bw=237;static vf=175;static hA=93;static Lw=190;static sA=165;static tf=159;static Xw=171;static Vw=79;static Tw=52;static Uw=244;static Pw=148;static Zw=11;static Yw=118;static Hw=4;static Ww=158;static iA=181}},1812:(t,i,s)=>{s.d(i,{Z:()=>h});class h{Dk;Fk;Uk;closed=!1;Bk=!1;static kc=async t=>await new Promise(((i,s)=>{const h=t.host.startsWith('https'),e=h?'wss':'ws',n=t.host.substring(t.host.indexOf('//')+2),r=h?t.port+2:t.port+1,o=new WebSocket(`${e}://${n}:${r}`,'binary');o.addEventListener('open',(()=>{console.log('connection open!'),i(o)})),o.addEventListener('error',(()=>{console.log('connection error!'),s(o)}))}));constructor(t){t.onclose=this.onclose,t.onerror=this.onerror,this.Fk=new n(t,5e3),this.Uk=new e(t,5e3),this.Dk=t}get host(){return this.Dk.url.split('/')[2]}get port(){return parseInt(this.Dk.url.split(':')[2],10)}get available(){return this.closed?0:this.Fk.available}write=(t,i)=>{this.Uk.write(t,i)};read=async()=>this.closed?0:await this.Fk.read();Rc=async(t,i,s)=>{if(!this.closed)for(;s>0;){const h=await this.Fk.Rc(t,i,s);if(h.length<=0)throw new Error('EOF');i+=h.length,s-=h.length}};close=()=>{this.closed=!0,this.Dk.close(),this.Fk.close(),this.Uk.close(),console.log('connection close!'),this.Bk&&console.log('connection error!')};onclose=t=>{this.closed||this.close()};onerror=t=>{this.closed||(this.Bk=!0,this.close())}}class e{Dk;Gk;closed=!1;Bk=!1;constructor(t,i){this.Dk=t,this.Gk=i}write=(t,i)=>{if(!this.closed){if(this.Bk)throw this.Bk=!1,new Error('Error in writer thread');if(i>this.Gk||t.length>this.Gk)throw new Error('buffer overflow');try{this.Dk.send(t.subarray(0,i))}catch(t){this.Bk=!0}}};close=()=>{this.closed=!0}}class n{Gk;buffer=[];Hk=null;closed=!1;constructor(t,i){this.Gk=i,t.binaryType='arraybuffer',t.onmessage=this.onmessage}onmessage=t=>{if(this.closed)throw new Error('WebSocketReader is closed!');const i=new Uint8Array(t.data);if(this.buffer.push(...i),this.Hk&&(this.Hk(this.buffer),this.Hk=null,this.buffer.length>this.Gk))throw new Error('buffer overflow')};Rc=async(t,i,s)=>{if(this.closed)throw new Error('WebSocketReader is closed!');for(;this.buffer.length<s;)await new Promise((t=>this.Hk=t));for(;s--;)t[i++]=this.buffer.shift();return t};read=async()=>{if(this.closed)throw new Error('WebSocketReader is closed!');for(;this.buffer.length<1;)await new Promise((t=>this.Hk=t));return this.buffer.shift()};get available(){return this.buffer.length}close=()=>{this.Hk=null,this.buffer=[],this.closed=!0}}},8432:(t,i,s)=>{s.d(i,{Z:()=>h});class h{db;constructor(t){t.onerror=this.onerror,t.onclose=this.onclose,this.db=t}static openDatabase=async()=>await new Promise(((t,i)=>{const s=indexedDB.open('lostcity',1);s.onsuccess=i=>{const s=i.target;console.log('database success!'),t(s.result)},s.onupgradeneeded=t=>{t.target.result.createObjectStore('cache')},s.onerror=t=>{const s=t.target;console.error('database error!: ',s.error),i(s.result)}}));xo=async t=>await new Promise((i=>{const s=this.db.transaction('cache','readonly').objectStore('cache').get(t);s.onsuccess=()=>{i(s.result)},s.onerror=t=>{i(void 0)}}));Uo=async(t,i)=>await new Promise(((s,h)=>{const e=this.db.transaction('cache','readwrite').objectStore('cache').put(i,t);e.onsuccess=()=>{s()},e.onerror=t=>{h()}}));onclose=t=>{console.log('database close!')};onerror=t=>{console.log('database error!')};Wk=t=>{const i=t.trim();let s=0;for(let t=0;t<i.length&&t<12;t++){const h=i.charAt(t);s*=37,h>='A'&&h<='Z'?s+=h.charCodeAt(0)+1-65:h>='a'&&h<='z'?s+=h.charCodeAt(0)+1-97:h>='0'&&h<='9'&&(s+=h.charCodeAt(0)+27-48)}return s}}},7576:(t,i,s)=>{s.d(i,{Z:()=>h});class h{count=0;Yk=new Int32Array(256);Zk=new Int32Array(256);a=0;b=0;c=0;constructor(t){for(let i=0;i<t.length;i++)this.Yk[i]=t[i];this.init()}get gy(){return 0==this.count--&&(this.Vk(),this.count=255),this.Yk[this.count]}init=()=>{let t=2654435769,i=2654435769,s=2654435769,h=2654435769,e=2654435769,n=2654435769,r=2654435769,o=2654435769;for(let l=0;l<4;l++)t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i;for(let l=0;l<256;l+=8)t+=this.Yk[l],i+=this.Yk[l+1],s+=this.Yk[l+2],h+=this.Yk[l+3],e+=this.Yk[l+4],n+=this.Yk[l+5],r+=this.Yk[l+6],o+=this.Yk[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.Zk[l]=t,this.Zk[l+1]=i,this.Zk[l+2]=s,this.Zk[l+3]=h,this.Zk[l+4]=e,this.Zk[l+5]=n,this.Zk[l+6]=r,this.Zk[l+7]=o;for(let l=0;l<256;l+=8)t+=this.Zk[l],i+=this.Zk[l+1],s+=this.Zk[l+2],h+=this.Zk[l+3],e+=this.Zk[l+4],n+=this.Zk[l+5],r+=this.Zk[l+6],o+=this.Zk[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.Zk[l]=t,this.Zk[l+1]=i,this.Zk[l+2]=s,this.Zk[l+3]=h,this.Zk[l+4]=e,this.Zk[l+5]=n,this.Zk[l+6]=r,this.Zk[l+7]=o;this.Vk(),this.count=256};Vk=()=>{this.c++,this.b+=this.c;for(let t=0;t<256;t++){const i=this.Zk[t],s=3&t;let h;0===s?this.a^=this.a<<13:1===s?this.a^=this.a>>>6:2===s?this.a^=this.a<<2:3===s&&(this.a^=this.a>>>16),this.a+=this.Zk[t+128&255],this.Zk[t]=h=this.Zk[i>>>2&255]+this.a+this.b,this.Yk[t]=this.b=this.Zk[h>>>8>>>2&255]+i}}}},2028:(t,i,s)=>{s.d(i,{Z:()=>n});var h=s(2383),e=s(5810);class n{static Wk=t=>{let i=0;t=t.toUpperCase();for(let s=0;s<t.length;s++)i=61*i+t.charCodeAt(s)-32|0;return i};buffer;Xk;zk;jk;Kk;qk;$k;Jk=[];constructor(t){t instanceof Uint8Array&&(t=new Int8Array(t));let i=new h.Z(new Uint8Array(t));const s=i.Z_,n=i.Z_;s===n?(this.buffer=t,this.Xk=!1):(this.buffer=e.Z.read(s,t,n,6),i=new h.Z(new Uint8Array(this.buffer)),this.Xk=!0),this.zk=i.Cy,this.jk=[],this.Kk=[],this.qk=[],this.$k=[];let r=i.Mc+10*this.zk;for(let t=0;t<this.zk;t++)this.jk.push(i.Go),this.Kk.push(i.Z_),this.qk.push(i.Z_),this.$k.push(r),r+=this.qk[t]}read=t=>{const i=n.Wk(t),s=this.jk.indexOf(i);return-1===s?null:this.Qk(s)};Qk=t=>{if(t<0||t>=this.zk)return null;if(this.Jk[t])return this.Jk[t];const i=this.$k[t],s=i+this.qk[t];if(this.Xk){const h=Uint8Array.from(this.buffer.subarray(i,i+s));return this.Jk[t]=h,h}{const i=Uint8Array.from(e.Z.read(this.Kk[t],this.buffer,this.qk[t],this.$k[t]));return this.Jk[t]=i,i}}}},2383:(t,i,s)=>{s.d(i,{Z:()=>r});var h=s(1519),e=s(9080),n=s(6327);class r extends n.Z{static tR=3988292384;static iR=new Int32Array(256);static sR=new Uint32Array(33);static hR=new e.Z;static eR=new e.Z;static nR=new e.Z;static rR=0;static oR=0;static lR=0;static{for(let t=0;t<32;t++)r.sR[t]=(1<<t)-1;r.sR[32]=4294967295;for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)1==(1&i)?i=i>>>1^r.tR:i>>>=1;r.iR[t]=i}}static No=t=>{let i=4294967295;for(let s=0;s<t.length;s++)i=i>>>8^r.iR[255&(i^t[s])];return~i};data;Mc;cA=0;random=null;constructor(t){if(!t)throw new Error('Input src packet array was null!');super(),t instanceof Int8Array?this.data=new Uint8Array(t):this.data=t,this.Mc=0}get length(){return this.data.length}get available(){return this.data.length-this.Mc}static Ft=t=>{let i=null;return 0===t&&r.rR>0?(r.rR--,i=r.hR.Kv()):1===t&&r.oR>0?(r.oR--,i=r.eR.Kv()):2===t&&r.lR>0&&(r.lR--,i=r.nR.Kv()),i?(i.Mc=0,i):new r(0===t?new Uint8Array(100):1===t?new Uint8Array(5e3):new Uint8Array(3e4))};release=()=>{this.Mc=0,100===this.data.length&&r.rR<1e3?(r.hR.FI(this),r.rR++):5e3===this.data.length&&r.oR<250?(r.eR.FI(this),r.oR++):3e4===this.data.length&&r.lR<50&&(r.nR.FI(this),r.lR++)};get vy(){return this.data[this.Mc++]}get Ty(){return this.data[this.Mc++]<<24>>24}get Cy(){return this.data[this.Mc++]<<8|this.data[this.Mc++]}get vp(){let t=this.data[this.Mc++]<<8|this.data[this.Mc++];return t>32767&&(t-=65536),t}get Z_(){return this.data[this.Mc++]<<16|this.data[this.Mc++]<<8|this.data[this.Mc++]}get Go(){return this.data[this.Mc++]<<24|this.data[this.Mc++]<<16|this.data[this.Mc++]<<8|this.data[this.Mc++]}get xc(){return(0xffffffffn&BigInt(this.Go))<<32n|0xffffffffn&BigInt(this.Go)}get GS(){return this.data[this.Mc]<128?this.vy-64:this.Cy-49152}get jT(){return this.data[this.Mc]<128?this.vy:this.Cy-32768}get Uy(){let t='';for(;10!==this.data[this.Mc]&&this.Mc<this.data.length;)t+=String.fromCharCode(this.data[this.Mc++]);return this.Mc++,t}np=(t,i,s)=>{for(let h=i;h<i+t;h++)s[h]=this.data[this.Mc++]};Yc=t=>{this.data[this.Mc++]=t+(this.random?.gy??0)&255};p1=t=>{this.data[this.Mc++]=t};p2=t=>{this.data[this.Mc++]=t>>>8,this.data[this.Mc++]=t};aR=t=>{this.data[this.Mc++]=t,this.data[this.Mc++]=t>>>8};p3=t=>{this.data[this.Mc++]=t>>>16,this.data[this.Mc++]=t>>>8,this.data[this.Mc++]=t};p4=t=>{this.data[this.Mc++]=t>>>24,this.data[this.Mc++]=t>>>16,this.data[this.Mc++]=t>>>8,this.data[this.Mc++]=t};cR=t=>{this.data[this.Mc++]=t,this.data[this.Mc++]=t>>>8,this.data[this.Mc++]=t>>>16,this.data[this.Mc++]=t>>>24};Sw=t=>{this.p4(Number(t>>32n)),this.p4(Number(0xffffffffn&t))};Nc=t=>{for(let i=0;i<t.length;i++)this.data[this.Mc++]=t.charCodeAt(i);this.data[this.Mc++]=10};Dc=(t,i,s)=>{for(let h=s;h<s+i;h++)this.data[this.Mc++]=t[h]};Pf=t=>{this.data[this.Mc-t-1]=t};lA=()=>{this.cA=8*this.Mc};fA=()=>{this.Mc=(this.cA+7)/8|0};aA=t=>{let i=this.cA>>>3,s=8-(7&this.cA),h=0;for(this.cA+=t;t>s;s=8)h+=(this.data[i++]&r.sR[s])<<t-s,t-=s;return h+=t===s?this.data[i]&r.sR[s]:this.data[i]>>>s-t&r.sR[t],h};Pc=(t,i)=>{const s=new Uint8Array(this.Mc);(0,h.gc)(this.data,0,s,0,this.Mc);const e=(0,h.fR)(s),n=(0,h.uR)(e,i,t),r=(0,h.dR)(n);this.Mc=0,this.p1(r.length),this.Dc(r,r.length,0)}}},741:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static wR=[95,218,67,50,253,222,194,60,101,128,8,251,92,111,24,33,223,66,232,59,227,113,153,105,126,98,167,102,177,238,62,190,147,23,150,151,156,144,193,155,81,0,198,22,137,210,179,16,168,170,32,181,248,141,58,87,208,106,180,191,221,241,40,176,196,154,65,145,230,78,30,161,188,41,14,129,18,199,47,247,225,34,51,10,159,75,12,56,61,31,39,91,46,242,134,5,122,123,209,228,104,195,21,3,11,44,107,172,6,186,110,215,205,103,27,185,124,77,252,117,86,115,127,207,52,79,43,97,219,116,169,7,118,162,108,36,20,233,88,135,80,19,42,237,57,152,71,9,250,17,4,119,234,130,26,200,189,163,254,245,197,171,220,235,140,244,184,94,211,231,99,246,121,212,112,204,63,148,83,178,1,255,131,13,183,142,236,45,55,35,243,136,37,85,100,160,38,224,146,174,82,48,109,132,125,90,143,138,240,173,165,164,192,175,29,74,28,114,213,73,64,206,76,139,96,2,229,15,93,25,239,202,49,70,214,201,72,203,68,89,69,157,216,217,249,120,226,84,149,187,54,53,158,166,182,133,0];static _y=[0,-2,4,6,-1,0,0,2,0,0,0,0,5,4,2,2,0,0,0,0,2,-2,2,14,0,6,3,0,4,0,0,0,3,0,0,0,0,0,0,0,0,-1,4,2,6,0,6,0,0,3,7,0,0,0,-1,0,0,0,0,4,0,0,0,0,0,0,0,0,1,15,0,0,0,0,6,0,2,0,0,0,2,0,0,0,1,0,0,4,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,-2,0,0,2,0,0,0,2,9,0,0,0,0,0,4,0,0,0,3,7,9,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,3,2,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,-2,2,0,0,0,0,0,6,0,0,0,2,0,2,0,0,0,-2,0,0,4,0,0,0,0,6,0,0,-2,-2,0,0,0,0,0,0,-2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0]}},9782:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static Tp=14;static tp=28;static Jp=129;static hp=167;static Vp=168;static Cp=195;static Xp=2;static Kp=26;static Hp=46;static Bp=84;static Pp=87;static gp=103;static sp=146;static Ny=197;static Qp=201;static Ap=204;static bp=209;static dp=126;static Dp=185;static fp=15;static op=98;static nm=213;static Op=3;static hm=13;static Up=74;static $p=239;static Sy=1;static rm=184;static rp=133;static lp=226;static Gp=4;static qp=21;static _p=32;static Pw=41;static by=152;static Hy=19;static sm=22;static Dy=25;static Oy=43;static tm=44;static Fp=68;static zp=136;static Wy=139;static up=140;static By=142;static cp=243;static yp=254;static Gy=20;static Ly=80;static xp=132;static ep=220;static Ry=237;static Ey=150;static ip=175;static Np=193;static pp=12;static Fy=54;static wp=212;static Ip=7;static Lp=135;static im=162;static Zy=23;static qy=42;static jy=49;static Vy=50;static Jy=59;static zy=69;static $y=76;static Yy=151;static Xy=191;static Ky=223}},6970:(t,i,s)=>{s.d(i,{Z:()=>o});class h{start=0;end=0;form=0;length=0;yR=null;pR=null;threshold=0;position=0;delta=0;amplitude=0;mR=0;read=t=>{this.form=t.vy,this.start=t.Go,this.end=t.Go,this.length=t.vy,this.yR=new Int32Array(this.length),this.pR=new Int32Array(this.length);for(let i=0;i<this.length;i++)this.yR[i]=t.Cy,this.pR[i]=t.Cy};reset=()=>{this.threshold=0,this.position=0,this.delta=0,this.amplitude=0,this.mR=0};evaluate=t=>(this.mR>=this.threshold&&this.pR&&this.yR&&(this.amplitude=this.pR[this.position++]<<15,this.position>=this.length&&(this.position=this.length-1),this.threshold=this.yR[this.position]/65536*t|0,this.threshold>this.mR&&(this.delta=((this.pR[this.position]<<15)-this.amplitude)/(this.threshold-this.mR)|0)),this.amplitude+=this.delta,this.mR++,this.amplitude-this.delta>>15)}class e{static buffer=null;static bT=null;static sin=null;static AR=new Int32Array(5);static IR=new Int32Array(5);static gR=new Int32Array(5);static _R=new Int32Array(5);static CR=new Int32Array(5);ER=null;TR=null;bR=null;vR=null;OR=null;LR=null;release=null;attack=null;SR=new Int32Array(5);kR=new Int32Array(5);RR=new Int32Array(5);start=0;length=500;MR=100;xR=0;static init=()=>{this.bT=new Int32Array(32768);for(let t=0;t<32768;t++)Math.random()>.5?this.bT[t]=1:this.bT[t]=-1;this.sin=new Int32Array(32768);for(let t=0;t<32768;t++)this.sin[t]=16384*Math.sin(t/5215.1903)|0;this.buffer=new Int32Array(220500)};Hc=(t,i)=>{for(let i=0;i<t;i++)e.buffer[i]=0;if(i<10)return e.buffer;const s=t/i|0;this.ER?.reset(),this.TR?.reset();let h=0,n=0,r=0;this.bR&&this.vR&&(this.bR.reset(),this.vR.reset(),h=32.768*(this.bR.end-this.bR.start)/s|0,n=32.768*this.bR.start/s|0);let o=0,l=0,a=0;this.OR&&this.LR&&(this.OR.reset(),this.LR.reset(),o=32.768*(this.OR.end-this.OR.start)/s|0,l=32.768*this.OR.start/s|0);for(let t=0;t<5;t++)this.ER&&0!==this.SR[t]&&(e.AR[t]=0,e.IR[t]=this.RR[t]*s,e.gR[t]=(this.SR[t]<<14)/100|0,e._R[t]=32.768*(this.ER.end-this.ER.start)*Math.pow(1.0057929410678534,this.kR[t])/s|0,e.CR[t]=32.768*this.ER.start/s|0);if(this.ER&&this.TR)for(let i=0;i<t;i++){let s=this.ER.evaluate(t),c=this.TR.evaluate(t);if(this.bR&&this.vR){const i=this.bR.evaluate(t),e=this.vR.evaluate(t);s+=this.NR(e,r,this.bR.form)>>1,r+=(i*h>>16)+n}if(this.OR&&this.LR){const i=this.OR.evaluate(t),s=this.LR.evaluate(t);c=c*(32768+(this.NR(s,a,this.OR.form)>>1))>>15,a+=(i*o>>16)+l}for(let h=0;h<5;h++)if(0!==this.SR[h]){const n=i+e.IR[h];n<t&&(e.buffer[n]+=this.NR(c*e.gR[h]>>15,e.AR[h],this.ER.form),e.AR[h]+=(s*e._R[h]>>16)+e.CR[h])}}if(this.release&&this.attack){this.release.reset(),this.attack.reset();let i=0,s=!0;for(let h=0;h<t;h++){const n=this.release.evaluate(t),r=this.attack.evaluate(t);let o;o=s?this.release.start+((this.release.end-this.release.start)*n>>8):this.release.start+((this.release.end-this.release.start)*r>>8),i+=256,i>=o&&(i=0,s=!s),s&&(e.buffer[h]=0)}}if(this.xR>0&&this.MR>0){const i=this.xR*s;for(let s=i;s<t;s++)e.buffer[s]+=e.buffer[s-i]*this.MR/100|0,e.buffer[s]|=0}for(let i=0;i<t;i++)e.buffer[i]<-32768&&(e.buffer[i]=-32768),e.buffer[i]>32767&&(e.buffer[i]=32767);return e.buffer};NR=(t,i,s)=>1===s?(32767&i)<16384?t:-t:2===s?e.sin[32767&i]*t>>14:3===s?((32767&i)*t>>14)-t:4===s?e.bT[32767&(i/2607|0)]*t:0;read=t=>{this.ER=new h,this.ER.read(t),this.TR=new h,this.TR.read(t),0!==t.vy&&(t.Mc--,this.bR=new h,this.bR.read(t),this.vR=new h,this.vR.read(t)),0!==t.vy&&(t.Mc--,this.OR=new h,this.OR.read(t),this.LR=new h,this.LR.read(t)),0!==t.vy&&(t.Mc--,this.release=new h,this.release.read(t),this.attack=new h,this.attack.read(t));for(let i=0;i<10;i++){const s=t.jT;if(0===s)break;this.SR[i]=s,this.kR[i]=t.GS,this.RR[i]=t.jT}this.xR=t.jT,this.MR=t.jT,this.length=t.Cy,this.start=t.Cy}}var n=s(2383),r=s(9345);class o{static mp=new Int32Array(1e3);static PR=null;static DR=null;static FR=new r.to(1e3,null);UR=new r.to(10,null);BR=0;loopEnd=0;static Qa=t=>{const i=new n.Z(t.read('sounds.dat'));for(this.PR=new Uint8Array(441e3),this.DR=new n.Z(this.PR),e.init();;){const t=i.Cy;if(65535===t)break;const s=new o;s.read(i),this.FR[t]=s,this.mp[t]=s.trim()}};static Hc=(t,i)=>{if(!this.FR[t])return null;const s=this.FR[t];return s?.GR(i)??null};read=t=>{for(let i=0;i<10;i++)0!==t.vy&&(t.Mc--,this.UR[i]=new e,this.UR[i]?.read(t));this.BR=t.Cy,this.loopEnd=t.Cy};trim=()=>{let t=9999999;for(let i=0;i<10;i++)this.UR[i]&&(this.UR[i].start/20|0)<t&&(t=this.UR[i].start/20|0);if(this.BR<this.loopEnd&&(this.BR/20|0)<t&&(t=this.BR/20|0),9999999===t||0===t)return 0;for(let i=0;i<10;i++)this.UR[i]&&(this.UR[i].start-=20*t);return this.BR<this.loopEnd&&(this.BR-=20*t,this.loopEnd-=20*t),t};GR=t=>{const i=this.Hc(t);return o.DR.Mc=0,o.DR?.p4(1380533830),o.DR?.cR(i+36),o.DR?.p4(1463899717),o.DR?.p4(1718449184),o.DR?.cR(16),o.DR?.aR(1),o.DR?.aR(1),o.DR?.cR(22050),o.DR?.cR(22050),o.DR?.aR(1),o.DR?.aR(8),o.DR?.p4(1684108385),o.DR?.cR(i),o.DR.Mc+=i,o.DR};Hc=t=>{let i=0;for(let t=0;t<10;t++)this.UR[t]&&this.UR[t].length+this.UR[t].start>i&&(i=this.UR[t].length+this.UR[t].start);if(0===i)return 0;let s=22050*i/1e3|0,h=22050*this.BR/1e3|0,e=22050*this.loopEnd/1e3|0;(h<0||e<0||e>s||h>=e)&&(t=0);let n=s+(e-h)*(t-1);for(let t=44;t<n+44;t++)o.PR&&(o.PR[t]=-128);for(let t=0;t<10;t++)if(this.UR[t]){const i=22050*this.UR[t].length/1e3|0,s=22050*this.UR[t].start/1e3|0,h=this.UR[t].Hc(i,this.UR[t].length);for(let t=0;t<i;t++)o.PR&&(o.PR[t+s+44]+=h[t]>>8<<24>>24)}if(t>1){h+=44,e+=44,s+=44,n+=44;const i=n-s;for(let t=s-1;t>=e;t--)o.PR&&(o.PR[t+i]=o.PR[t]);for(let i=1;i<t;i++){const t=(e-h)*i;for(let i=h;i<e;i++)o.PR&&(o.PR[i+t]=o.PR[i])}n-=44}return n}}},9345:(t,i,s)=>{s.d(i,{Xa:()=>a,sb:()=>e,_r:()=>n,Yn:()=>l,JT:()=>r,to:()=>h,Va:()=>o});class h extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=i}}class e extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=s}}}class n extends Array{constructor(t,i,s,h){super(t);for(let e=0;e<t;e++){this[e]=new Array(i);for(let t=0;t<i;t++){this[e][t]=new Array(s);for(let i=0;i<s;i++)this[e][t][i]=h}}}}class r extends Array{constructor(t,i,s,h,e){super(t);for(let n=0;n<t;n++){this[n]=new Array(i);for(let t=0;t<i;t++){this[n][t]=new Array(s);for(let i=0;i<s;i++){this[n][t][i]=new Array(h);for(let s=0;s<h;s++)this[n][t][i][s]=e}}}}}class o extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Uint8Array(s)}}}class l extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=new Int32Array(i)}}class a extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Int32Array(s)}}}},1519:(t,i,s)=>{s.d(i,{Ha:()=>n,Do:()=>e,Fo:()=>h,gc:()=>r,dR:()=>l,fR:()=>o,uR:()=>a});const h=async t=>new Promise((i=>setTimeout(i,t))),e=async t=>new Int8Array(await(await fetch(t)).arrayBuffer()),n=async t=>(await fetch(t)).text(),r=(t,i,s,h,e)=>{for(;e--;)s[h++]=t[i++]},o=t=>{let i=0n;for(let s=0;s<t.length;s++)i=(i<<8n)+BigInt(t[s]);return i},l=t=>{const i=[];for(;t>0n;)i.unshift(Number(255n&t)),t>>=8n;return new Uint8Array(i)},a=(t,i,s)=>{let h=1n;for(;i>0n;)i%2n===1n&&(h=h*t%s),t=t*t%s,i>>=1n;return h}},9897:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(2383);class e{static HR=new Uint16Array(['d','o','t'].join('').split('').map((t=>t.charCodeAt(0))));static WR=new Uint16Array(['(','a',')'].join('').split('').map((t=>t.charCodeAt(0))));static YR=new Uint16Array(['s','l','a','s','h'].join('').split('').map((t=>t.charCodeAt(0))));static ZR=['cook',"cook's",'cooks','seeks','sheet'];static VR=[];static XR=[];static zR=[];static jR=[];static KR=[];static qR=[];static Qa=t=>{const i=new h.Z(t.read('fragmentsenc.txt')),s=new h.Z(t.read('badenc.txt')),e=new h.Z(t.read('domainenc.txt')),n=new h.Z(t.read('tldlist.txt'));this.read(s,e,i,n)};static filter=t=>{const i=[...t];this.format(i);const s=i.join('').trim(),h=s.toLowerCase(),e=[...h];this.$R(e),this.JR(e),this.QR(e),this.tM(e);for(let t=0;t<this.ZR.length;t++){let i=-1;for(;-1!==(i=h.indexOf(this.ZR[t],i+1));){const s=[...this.ZR[t]];for(let t=0;t<s.length;t++)e[t+i]=s[t]}}return this.iM(e,[...s]),this.sM(e),e.join('').trim()};static read=(t,i,s,h)=>{this.hM(t),this.eM(i),this.nM(s),this.rM(h)};static rM=t=>{const i=t.Go;for(let s=0;s<i;s++)this.XR[s]=t.vy,this.VR[s]=new Uint16Array(t.vy).map((()=>t.vy))};static hM=t=>{const i=t.Go;for(let s=0;s<i;s++){this.zR[s]=new Uint16Array(t.vy).map((()=>t.vy));const i=new Array(t.vy).fill([]).map((()=>[t.Ty,t.Ty]));i.length>0&&(this.jR[s]=i)}};static eM=t=>{const i=t.Go;for(let s=0;s<i;s++)this.KR[s]=new Uint16Array(t.vy).map((()=>t.vy))};static nM=t=>{const i=t.Go;for(let s=0;s<i;s++)this.qR[s]=t.Cy};static $R=t=>{const i=[...t],s=[...t];this.oM(null,i,this.HR),this.oM(null,s,this.YR);for(let h=0;h<this.VR.length;h++)this.lM(s,this.XR[h],t,this.VR[h],i)};static JR=t=>{for(let i=0;i<2;i++)for(let i=this.zR.length-1;i>=0;i--)this.oM(this.jR[i],t,this.zR[i])};static QR=t=>{const i=[...t],s=[...t];this.oM(null,i,this.WR),this.oM(null,s,this.HR);for(let h=this.KR.length-1;h>=0;h--)this.aM(s,i,this.KR[h],t)};static tM=t=>{for(let i=0;i<t.length;){const s=this.cM(t,i);if(-1===s)return;let h=!1;for(let e=i;e>=0&&e<s&&!h;e++)this.fM(t[e])||this.uM(t[e])||(h=!0);let e=0;h&&(e=0),0===e&&(e=1,i=s);let n=0;for(let h=s;h<t.length&&h<i;h++)n=10*n+t[h].charCodeAt(0)-48;n<=255&&i-s<=8?e++:e=0,4===e&&(this.dM(s,i,t),e=0),i=this.wM(i,t)}};static yM=t=>{if(this.pM(t))return!0;const i=this.mM(t),s=this.qR,h=s.length;if(i===s[0]||i===s[h-1])return!0;let e=0,n=h-1;for(;e<=n;){const t=(e+n)/2|0;if(i===s[t])return!0;i<s[t]?n=t-1:e=t+1}return!1};static mM=t=>{if(t.length>6)return 0;let i=0;for(let s=0;s<t.length;s++){const h=t[t.length-s-1];if(this.AM(h))i=38*i+h.charCodeAt(0)+1-'a'.charCodeAt(0);else if("'"===h)i=38*i+27;else if(this.IM(h))i=38*i+h.charCodeAt(0)+28-'0'.charCodeAt(0);else if('\0'!==h)return 0}return i};static cM=(t,i)=>{for(let s=i;s<t.length&&s>=0;s++)if(this.IM(t[s]))return s;return-1};static wM=(t,i)=>{for(let s=t;s<i.length&&s>=0;s++)if(!this.IM(i[s]))return s;return i.length};static gM=(t,i,s)=>i===s||'o'===i&&'0'===s?1:'o'===i&&'('===s&&')'===t?2:'c'!==i||'('!==s&&'<'!==s&&'['!==s?'e'===i&&''===s||'s'===i&&'$'===s||'l'===i&&'i'===s?1:0:1;static aM=(t,i,s,h)=>{const e=s.length,n=h.length;for(let r=0;r<=n-e;r++){const{_M:e,CM:n}=this.EM(r,s,h);if(!e)continue;const o=this.TM(r,h,3,i,['@']),l=this.bM(n-1,h,3,t,['.',',']);(o>2||l>2)&&this.dM(r,n,h)}};static EM=(t,i,s)=>{const h=i.length;let e=t,n=0;for(;e<s.length&&n<h;){const r=s[e],o=e+1<s.length?s[e+1]:'\0',l=this.gM(o,String.fromCharCode(i[n]),r);if(l>0)e+=l,n++;else{if(0===n)break;const s=this.gM(o,String.fromCharCode(i[n-1]),r);if(s>0)e+=s,1===n&&t++;else{if(n>=h||!this.fM(r))break;e++}}}return{_M:n>=h,CM:e}};static oM=(t,i,s)=>{if(!(s.length>i.length))for(let h=0;h<=i.length-s.length;h++){let e=h;const{CM:n,vM:r,OM:o,LM:l,SM:a}=this.kM(i,s,e);e=n;let c=i[e],f=e+1<i.length?i[e+1]:'\0';if(!(r>=s.length)||l&&a)continue;let u,d=!0;if(o){let t=!1,s=!1;if((h-1<0||this.fM(i[h-1])&&"'"!==i[h-1])&&(t=!0),(e>=i.length||this.fM(i[e])&&"'"!==i[e])&&(s=!0),!t||!s){let s=!1;for(u=h-2,t&&(u=h);!s&&u<e;){if(u>=0&&(!this.fM(i[u])||"'"===i[u])){const t=[];let h;for(h=0;h<3&&u+h<i.length&&(!this.fM(i[u+h])||"'"===i[u+h]);h++)t[h]=i[u+h];let e=!0;0===h&&(e=!1),h<3&&u-1>=0&&(!this.fM(i[u-1])||"'"===i[u-1])&&(e=!1),e&&!this.yM(t)&&(s=!0)}u++}s||(d=!1)}}else{c=' ',h-1>=0&&(c=i[h-1]),f=' ',e<i.length&&(f=i[e]);const s=this.RM(c),n=this.RM(f);t&&this.MM(s,t,n)&&(d=!1)}if(!d)continue;let w=0,y=0;for(let t=h;t<e;t++)this.IM(i[t])?w++:this.xM(i[t])&&y++;w<=y&&this.dM(h,e,i)}};static kM=(t,i,s)=>{let h=s,e=0,n=0,r=!1,o=!1,l=!1;for(;h<t.length&&(!o||!l)&&!(h>=t.length||o&&l);){const a=t[h],c=h+1<t.length?t[h+1]:'\0';let f;if(e<i.length&&(f=this.NM(c,String.fromCharCode(i[e]),a))>0)1===f&&this.IM(a)&&(o=!0),2===f&&(this.IM(a)||this.IM(c))&&(o=!0),h+=f,e++;else{if(0===e)break;let t;if((t=this.NM(c,String.fromCharCode(i[e-1]),a))>0)h+=t;else{if(e>=i.length||!this.uM(a))break;if(this.fM(a)&&"'"!==a&&(r=!0),this.IM(a)&&(l=!0),h++,n++,(100*n/(h-s)|0)>90)break}}}return{CM:h,vM:e,OM:r,LM:o,SM:l}};static NM=(t,i,s)=>{if(i===s)return 1;if(i>='a'&&i<='m'){if('a'===i)return'4'!==s&&'@'!==s&&'^'!==s?'/'===s&&'\\'===t?2:0:1;if('b'===i)return'6'!==s&&'8'!==s?'1'===s&&'3'===t?2:0:1;if('c'===i)return'('!==s&&'<'!==s&&'{'!==s&&'['!==s?0:1;if('d'===i)return'['===s&&')'===t?2:0;if('e'===i)return'3'!==s&&''!==s?0:1;if('f'===i)return'p'===s&&'h'===t?2:''===s?1:0;if('g'===i)return'9'!==s&&'6'!==s?0:1;if('h'===i)return'#'===s?1:0;if('i'===i)return'y'!==s&&'l'!==s&&'j'!==s&&'1'!==s&&'!'!==s&&':'!==s&&';'!==s&&'|'!==s?0:1;if('j'===i)return 0;if('k'===i)return 0;if('l'===i)return'1'!==s&&'|'!==s&&'i'!==s?0:1;if('m'===i)return 0}if(i>='n'&&i<='z'){if('n'===i)return 0;if('o'===i)return'0'!==s&&'*'!==s?'('===s&&')'===t||'['===s&&']'===t||'{'===s&&'}'===t||'<'===s&&'>'===t?2:0:1;if('p'===i)return 0;if('q'===i)return 0;if('r'===i)return 0;if('s'===i)return'5'!==s&&'z'!==s&&'$'!==s&&'2'!==s?0:1;if('t'===i)return'7'!==s&&'+'!==s?0:1;if('u'===i)return'v'===s?1:'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('v'===i)return'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('w'===i)return'v'===s&&'v'===t?2:0;if('x'===i)return')'===s&&'('===t||'}'===s&&'{'===t||']'===s&&'['===t||'>'===s&&'<'===t?2:0;if('y'===i)return 0;if('z'===i)return 0}return i>='0'&&i<='9'?'0'===i?'o'===s||'O'===s?1:'('===s&&')'===t||'{'===s&&'}'===t||'['===s&&']'===t?2:0:'1'===i&&'l'===s?1:0:','===i?'.'===s?1:0:'.'===i?','===s?1:0:'!'===i&&'i'===s?1:0};static MM=(t,i,s)=>{let h=0,e=i.length-1;for(;h<=e;){const n=(h+e)/2|0;if(i[n][0]===t&&i[n][1]===s)return!0;t<i[n][0]||t===i[n][0]&&s<i[n][1]?e=n-1:h=n+1}return!1};static RM=t=>this.AM(t)?t.charCodeAt(0)+1-'a'.charCodeAt(0):"'"===t?28:this.IM(t)?t.charCodeAt(0)+29-'0'.charCodeAt(0):27;static lM=(t,i,s,h,e)=>{if(!(h.length>s.length))for(let n=0;n<=s.length-h.length;n++){const{CM:r,PM:o}=this.DM(s,h,n);if(o<h.length)continue;let l=!1;const a=this.TM(n,s,3,e,[',','.']),c=this.bM(r-1,s,5,t,['\\','/']);if(1===i&&a>0&&c>0&&(l=!0),2===i&&(a>2&&c>0||a>0&&c>2)&&(l=!0),3===i&&a>0&&c>2&&(l=!0),!l)continue;let f,u=n,d=r-1,w=!1;if(a>2){if(4===a)for(w=!1,f=n-1;f>=0;f--)if(w){if('*'!==e[f])break;u=f}else'*'===e[f]&&(u=f,w=!0);for(w=!1,f=u-1;f>=0;f--)if(w){if(this.fM(s[f]))break;u=f}else this.fM(s[f])||(w=!0,u=f)}if(c>2){if(4===c)for(w=!1,f=d+1;f<s.length;f++)if(w){if('*'!==t[f])break;d=f}else'*'===t[f]&&(d=f,w=!0);for(w=!1,f=d+1;f<s.length;f++)if(w){if(this.fM(s[f]))break;d=f}else this.fM(s[f])||(w=!0,d=f)}this.dM(u,d+1,s)}};static DM=(t,i,s)=>{let h=0;for(;s<t.length&&h<i.length;){const e=t[s],n=s+1<t.length?t[s+1]:'\0';let r;if((r=this.gM(n,String.fromCharCode(i[h]),e))>0)s+=r,h++;else{if(0===h)break;let t;if((t=this.gM(n,String.fromCharCode(i[h-1]),e))>0)s+=t;else{if(!this.fM(e))break;s++}}}return{CM:s,PM:h}};static fM=t=>!this.xM(t)&&!this.IM(t);static uM=t=>!this.AM(t)||('v'===t||'x'===t||'j'===t||'q'===t||'z'===t);static xM=t=>this.AM(t)||this.FM(t);static IM=t=>t>='0'&&t<='9';static AM=t=>t>='a'&&t<='z';static FM=t=>t>='A'&&t<='Z';static pM=t=>{for(let i=0;i<t.length;i++)if(!this.IM(t[i])&&'\0'!==t[i])return!1;return!0};static dM=(t,i,s)=>{for(let h=t;h<i;h++)s[h]='*'};static UM=(t,i)=>{let s=0;for(let h=i-1;h>=0&&this.fM(t[h]);h--)'*'===t[h]&&s++;return s};static BM=(t,i)=>{let s=0;for(let h=i+1;h<t.length&&this.fM(t[h]);h++)'*'===t[h]&&s++;return s};static GM=(t,i,s,h,e)=>(e?this.UM(i,s):this.BM(i,s))>=h?4:this.fM(e?t[s-1]:t[s+1])?1:0;static TM=(t,i,s,h,e)=>{if(0===t)return 2;for(let s=t-1;s>=0&&this.fM(i[s]);s--)if(e.includes(i[s]))return 3;return this.GM(i,h,t,s,!0)};static bM=(t,i,s,h,e)=>{if(t+1===i.length)return 2;for(let s=t+1;s<i.length&&this.fM(i[s]);s++)if(e.includes(i[s]))return 3;return this.GM(i,h,t,s,!1)};static format=t=>{let i=0;for(let s=0;s<t.length;s++)this.HM(t[s])?t[i]=t[s]:t[i]=' ',0!==i&&' '===t[i]&&' '===t[i-1]||i++;for(let s=i;s<t.length;s++)t[s]=' '};static HM=t=>t>=' '&&t<=''||' '===t||'\n'===t||'\t'===t||''===t||''===t;static iM=(t,i)=>{for(let s=0;s<i.length;s++)'*'!==t[s]&&this.FM(i[s])&&(t[s]=i[s])};static sM=t=>{let i=!0;for(let s=0;s<t.length;s++){const h=t[s];this.xM(h)?i?this.AM(h)&&(i=!1):this.FM(h)&&(t[s]=String.fromCharCode(h.charCodeAt(0)+'a'.charCodeAt(0)-65)):i=!0}}}},6054:(t,i,s)=>{s.d(i,{Z:()=>h});class h{static WM=[' ','e','t','a','o','i','h','n','s','r','d','l','u','m','w','c','y','f','g','p','b','v','k','x','j','q','z','0','1','2','3','4','5','6','7','8','9',' ','!','?','.',',',':',';','(',')','-','&','*','\\','\'','@','#','+','=','','$','%','"','[',']'];static YM=[];static Qa=(t,i)=>{let s,h=0,e=-1;for(let n=0;n<i&&h<100;n++){const i=t.vy;s=i>>4&15,-1!==e?(this.YM[h++]=this.WM[(e<<4)+s-195],e=-1):s<13?this.YM[h++]=this.WM[s]:e=s,s=15&i,-1!==e?(this.YM[h++]=this.WM[(e<<4)+s-195],e=-1):s<13?this.YM[h++]=this.WM[s]:e=s}let n=!0;for(let t=0;t<h;t++){const i=this.YM[t];n&&i>='a'&&i<='z'&&(this.YM[t]=i.toUpperCase(),n=!1),'.'!==i&&'!'!==i||(n=!0)}return this.YM.slice(0,h).join('')};static Dw=(t,i)=>{i.length>80&&(i=i.substring(0,80)),i=i.toLowerCase();let s=-1;for(let h=0;h<i.length;h++){const e=i.charAt(h);let n=0;for(let t=0;t<this.WM.length;t++)if(e===this.WM[t]){n=t;break}n>12&&(n+=195),-1===s?n<13?s=n:t.p1(n):n<13?(t.p1((s<<4)+n),s=-1):(t.p1((s<<4)+(n>>4)),s=15&n)}-1!==s&&t.p1(s<<4)}}},5810:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(937);class e{static ZM=null;static state=null;static load=async t=>{const i=new WebAssembly.Module(t),s=await(0,h._)(i,{env:void 0});this.ZM=s,this.state=s.newBzip2State()};static read=(t,i,s,h)=>{if(!this.ZM||!this.state)throw new Error('bz2 not found!!');return this.ZM.read(t,i,s,h,this.state)}}},3584:(t,i,s)=>{let h;async function e(t,i){n(i);try{const i=await window.audioContext.decodeAudioData(Uint8Array.from(t).buffer);let s=window.audioContext.createBufferSource();s.buffer=i,s.connect(h),s.start()}catch(t){console.log(t)}}function n(t){h||(h=window.audioContext.createGain(),h.connect(window.audioContext.destination)),h.gain.value=t/256}function r(t,i){window._tinyMidiPlay&&window._tinyMidiPlay(t,i/256)}function o(t){window._tinyMidiVolume&&window._tinyMidiVolume(t/256)}function l(){window._tinyMidiStop&&window._tinyMidiStop()}s.d(i,{Ho:()=>r,Tm:()=>n,Em:()=>o,Co:()=>l,Wc:()=>e})},937:(t,i,s)=>{async function h(t,i={}){const s={env:Object.assign(Object.create(globalThis),i.env||{},{abort(t,i,s,h){t=r(t>>>0),i=r(i>>>0),s>>>=0,h>>>=0,(()=>{throw Error(`${t} in ${i}:${s}:${h}`)})()}})},{exports:h}=await WebAssembly.instantiate(t,s),e=h.memory||i.env.memory,n=Object.setPrototypeOf({newBzip2State(){return(t=h.newBzip2State()>>>0)?{stream:a(Int8Array,g(t+0)),VM:a(Int8Array,g(t+4)),XM:I(t+8),zM:I(t+12),jM:I(t+16),KM:I(t+20),qM:I(t+24),$M:I(t+28),JM:I(t+32),QM:I(t+36),tx:A(t+40),ix:I(t+44),sx:0!=A(t+48),hx:I(t+52),nx:I(t+56),ox:I(t+60),lx:I(t+64),ux:I(t+68),wx:I(t+72),yx:I(t+76),mx:I(t+80),Ax:I(t+84),Ix:f(I,2,g(t+88)),gx:f(I,2,g(t+92)),_x:f(I,2,g(t+96)),Cx:f((t=>0!=A(t)),0,g(t+100)),Ex:f((t=>0!=A(t)),0,g(t+104)),Tx:f(A,0,g(t+108)),bx:f(A,0,g(t+112)),vx:f(I,2,g(t+116)),selector:f(A,0,g(t+120)),Ox:f(A,0,g(t+124)),Lx:o((t=>f(A,0,g(t))),2,g(t+128)),Gk:o((t=>f(I,2,g(t))),2,g(t+132)),ek:o((t=>f(I,2,g(t))),2,g(t+136)),Sx:o((t=>f(I,2,g(t))),2,g(t+140)),kx:f(I,2,g(t+144))}:null;var t},read(t,i,s,e,n){i=function(t){if(t){const i=d.get(t);i?d.set(t,i+1):d.set(h.__pin(t),1)}return t}(c(Int8Array,6,0,i)||w()),n=function(t){if(null==t)return 0;const i=h.__pin(h.__new(148,5));return m(i+0,c(Int8Array,6,0,t.stream)||w()),m(i+4,c(Int8Array,6,0,t.VM)||w()),m(i+8,t.XM),m(i+12,t.zM),m(i+16,t.jM),m(i+20,t.KM),m(i+24,t.qM),m(i+28,t.$M),m(i+32,t.JM),m(i+36,t.QM),p(i+40,t.tx),m(i+44,t.ix),p(i+48,t.sx?1:0),m(i+52,t.hx),m(i+56,t.nx),m(i+60,t.ox),m(i+64,t.lx),m(i+68,t.ux),m(i+72,t.wx),m(i+76,t.yx),m(i+80,t.mx),m(i+84,t.Ax),m(i+88,u(m,4,2,t.Ix,Int32Array)||w()),m(i+92,u(m,4,2,t.gx,Int32Array)||w()),m(i+96,u(m,4,2,t._x,Int32Array)||w()),m(i+100,u(p,7,0,t.Cx,Uint8Array)||w()),m(i+104,u(p,7,0,t.Ex,Uint8Array)||w()),m(i+108,u(p,8,0,t.Tx,Uint8Array)||w()),m(i+112,u(p,8,0,t.bx,Uint8Array)||w()),m(i+116,u(m,4,2,t.vx,Int32Array)||w()),m(i+120,u(p,8,0,t.selector,Uint8Array)||w()),m(i+124,u(p,8,0,t.Ox,Uint8Array)||w()),m(i+128,l(((t,i)=>{m(t,u(p,8,0,i,Uint8Array)||w())}),9,2,t.Lx)||w()),m(i+132,l(((t,i)=>{m(t,u(m,4,2,i,Int32Array)||w())}),10,2,t.Gk)||w()),m(i+136,l(((t,i)=>{m(t,u(m,4,2,i,Int32Array)||w())}),10,2,t.ek)||w()),m(i+140,l(((t,i)=>{m(t,u(m,4,2,i,Int32Array)||w())}),10,2,t.Sx)||w()),m(i+144,u(m,4,2,t.kx,Int32Array)||w()),h.__unpin(i),i}(n)||w();try{return a(Int8Array,h.read(t,i,s,e,n)>>>0)}finally{!function(t){if(t){const i=d.get(t);if(1===i)h.__unpin(t),d.delete(t);else{if(!i)throw Error(`invalid refcount '${i}' for reference '${t}'`);d.set(t,i-1)}}}(i)}}},h);function r(t){if(!t)return null;const i=t+new Uint32Array(e.buffer)[t-4>>>2]>>>1,s=new Uint16Array(e.buffer);let h=t>>>1,n="";for(;i-h>1024;)n+=String.fromCharCode(...s.subarray(h,h+=1024));return n+String.fromCharCode(...s.subarray(h,i))}function o(t,i,s){if(!s)return null;const h=g(s+4),e=y.getUint32(s+12,!0),n=new Array(e);for(let s=0;s<e;++s)n[s]=t(h+(s<<i>>>0));return n}function l(t,i,s,e){if(null==e)return 0;const n=e.length,r=h.__pin(h.__new(n<<s,1))>>>0,o=h.__pin(h.__new(16,i))>>>0;m(o+0,r),y.setUint32(o+4,r,!0),y.setUint32(o+8,n<<s,!0),y.setUint32(o+12,n,!0);for(let i=0;i<n;++i)t(r+(i<<s>>>0),e[i]);return h.__unpin(r),h.__unpin(o),o}function a(t,i){return i?new t(e.buffer,g(i+4),y.getUint32(i+8,!0)/t.BYTES_PER_ELEMENT).slice():null}function c(t,i,s,n){if(null==n)return 0;const r=n.length,o=h.__pin(h.__new(r<<s,1))>>>0,l=h.__new(12,i)>>>0;return m(l+0,o),y.setUint32(l+4,o,!0),y.setUint32(l+8,r<<s,!0),new t(e.buffer,o,r).set(n),h.__unpin(o),l}function f(t,i,s){if(!s)return null;const h=g(s-4)>>>i,e=new Array(h);for(let n=0;n<h;++n)e[n]=t(s+(n<<i>>>0));return e}function u(t,i,s,n,r){if(null==n)return 0;const o=n.length,l=h.__pin(h.__new(o<<s,i))>>>0;if(r)new r(e.buffer,l,o).set(n);else for(let i=0;i<o;i++)t(l+(i<<s>>>0),n[i]);return h.__unpin(l),l}const d=new Map;function w(){throw TypeError("value must not be null")}let y=new DataView(e.buffer);function p(t,i){try{y.setUint8(t,i,!0)}catch{y=new DataView(e.buffer),y.setUint8(t,i,!0)}}function m(t,i){try{y.setUint32(t,i,!0)}catch{y=new DataView(e.buffer),y.setUint32(t,i,!0)}}function A(t){try{return y.getUint8(t,!0)}catch{return y=new DataView(e.buffer),y.getUint8(t,!0)}}function I(t){try{return y.getInt32(t,!0)}catch{return y=new DataView(e.buffer),y.getInt32(t,!0)}}function g(t){try{return y.getUint32(t,!0)}catch{return y=new DataView(e.buffer),y.getUint32(t,!0)}}return n}s.d(i,{_:()=>h})},1527:(t,i,s)=>{var h=s(1928);!function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(window.audioContext=new window.AudioContext);var t=function(i){if(window.audioContext){var s=window.audioContext.createBuffer(1,1,22050),h=window.audioContext.createBufferSource();h.buffer=s,h.connect(window.audioContext.destination),h.start?h.start(0):h.play?h.play(0):h.noteOn&&h.noteOn(0)}document.removeEventListener('touchstart',t),document.removeEventListener('touchend',t),document.removeEventListener('click',t)};document.addEventListener('touchstart',t),document.addEventListener('touchend',t),document.addEventListener('click',t)}(),(async()=>{let t=new Float32Array,i=window.audioContext.createGain();i.gain.value=.1,i.connect(window.audioContext.destination);let s=window.audioContext.currentTime,e=[];const n=new h.Z({Rx:30,Mx:i=>{let s=new Float32Array(i.buffer),h=new Float32Array(t.length+s.length);h.set(t,0),h.set(s,t.length),t=h},xx:t=>{},bufferSize:102400});await n.init();const r=await fetch('./SCC1_Florestan.sf2'),o=new Uint8Array(await r.arrayBuffer());function l(){if(!window.audioContext||!t.length)return;let h=window.audioContext.createBufferSource();const n=t.length/2,r=window.audioContext.createBuffer(2,n,44100);for(let i=0;i<2;i++){const s=r.getChannelData(i);let h=i;for(let i=0;i<n;i++)s[i]=t[h],h+=2}s<window.audioContext.currentTime&&(s=window.audioContext.currentTime),h.buffer=r,h.connect(i),h.start(s),e.push(h),s+=r.duration,t=new Float32Array}let a;n.Nx(o),window._tinyMidiStop=async()=>{if(a&&clearInterval(a),t=new Float32Array,e.length){let t=i.gain.value;i.gain.value=0,e.forEach((t=>{t.stop(window.audioContext.currentTime)})),e=[],i.gain.value=t}},window._tinyMidiVolume=(t=1)=>{i.gain.value=t},window._tinyMidiPlay=async(t,i=1)=>{t&&(await window._tinyMidiStop(),-1!=i&&window._tinyMidiVolume(i),s=window.audioContext.currentTime,a=setInterval(l,250),n.Px(t))}})()},1928:(t,i,s)=>{s.d(i,{Z:()=>e});var h=s(1885);const e=class{constructor(t={}){this.Dx=void 0,this.Fx=0,this.Ux=0,this.Bx=0,this.Rx=t.Rx||100,this.sampleRate=t.sampleRate||44100,this.Gx=t.Gx||2,this.gain=t.gain||0,t.bufferSize?this.bufferSize=t.bufferSize:this.Hx(1),this.Mx=t.Mx||(()=>{}),this.xx=t.xx||(()=>{}),this.Wx=void 0,this.test=0}async init(){if(!this.Dx){if('undefined'!=typeof process){const{Yx:t}=await import('path'),{Zx:i}=await import('module');globalThis.__dirname=t("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js"),globalThis.require=i("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js")}this.Dx=await(0,h.Z)(),this.Vx=this.Dx._malloc(this.bufferSize),this.Xx=this.Dx._malloc(8)}}Hx(t){this.bufferSize=4*this.sampleRate*this.Gx*t}zx(){if(!this.Dx)throw new Error(`${this.constructor.name} not initalized. call .init()`)}Nx(t){this.zx();const{_malloc:i,_free:s,_tsf_load_memory:h,_tsf_set_output:e,_tsf_channel_set_bank_preset:n,_tsf_set_max_voices:r,_tsf_channel_set_presetnumber:o}=this.Dx;s(this.Fx),this.Fx=i(t.length),this.Dx.HEAPU8.set(t,this.Fx),this.Ux=h(this.Fx,t.length),e(this.Ux,2===this.Gx?0:2,this.sampleRate,this.gain)}jx(){this.zx();const t=new Uint8Array(this.bufferSize);return t.set(this.Dx.HEAPU8.subarray(this.Vx,this.Vx+this.bufferSize)),t}Kx(t){const{_malloc:i,_free:s,_tml_load_memory:h}=this.Dx;return s(this.Bx),this.Bx=i(t.length),this.Dx.HEAPU8.set(t,this.Bx),h(this.Bx,t.length)}qx(t){const{_midi_render:i}=this.Dx;return i(this.Ux,t,this.Gx,this.sampleRate,this.Vx,this.bufferSize,this.Xx)}Px(t){if(this.zx(),!this.Ux)throw new Error('no soundfont buffer set. call .setSoundfont');window.clearTimeout(this.Wx);const{setValue:i,getValue:s}=this.Dx;i(this.Xx,0,'double'),this.Dx._tsf_reset(this.Ux),this.Dx._tsf_channel_set_bank_preset(this.Ux,9,128,0),t[0]==='R'.charCodeAt(0)&&(t=t.slice(20));let h=this.Kx(t);const e=()=>{h=this.qx(h);const t=this.jx();this.Mx(t),h?this.Wx=setTimeout(e,this.Rx):this.xx(s(this.Xx,'double'))};this.Wx=setTimeout(e,16)}}},5621:(t,i,s)=>{t.exports=s.p+"9f86b5397894e28b5ae2.wasm"},1885:(t,i,s)=>{var h;s.d(i,{Z:()=>e});const e=(h="file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/tinymidipcm.mjs",function(t){var i,e,n=void 0!==(t=t||{})?t:{};n.ready=new Promise((function(t,s){i=t,e=s})),["_tsf_load_memory","_tsf_set_output","_tsf_channel_set_bank_preset","_tsf_set_max_voices","_tsf_channel_set_presetnumber","_tsf_reset","_tsf_close","_tml_load_memory","_midi_render","_malloc","_realloc","_free","_fflush","onRuntimeInitialized"].forEach((t=>{Object.getOwnPropertyDescriptor(n.ready,t)||Object.defineProperty(n.ready,t,{get:()=>z('You are getting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),set:()=>z('You are setting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js')})}));var r=Object.assign({},n),o=[],l='object'==typeof window,a='function'==typeof importScripts,c='object'==typeof process&&'object'==typeof process.versions&&'string'==typeof process.versions.node,f=!l&&!c&&!a;if(n.ENVIRONMENT)throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');var u,d,w,y='';if(c){if('undefined'==typeof process||!process.release||'node'!==process.release.name)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');var p,m;y=a?require('path').Yx(y)+'/':__dirname+'/';var A=()=>{m||(p=require('fs'),m=require('path'))};u=(t,i)=>(A(),t=m.normalize(t),p.$x(t,i?void 0:'utf8')),w=t=>{var i=u(t,!0);return i.buffer||(i=new Uint8Array(i)),N(i.buffer),i},d=(t,i,s)=>{A(),t=m.normalize(t),p.Jx(t,(function(t,h){t?s(t):i(h.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,'/'),o=process.argv.slice(2),process.on('uncaughtException',(function(t){if(!(t instanceof et))throw t})),process.on('unhandledRejection',(function(t){throw t})),n.inspect=function(){return'[Emscripten Module object]'}}else if(f){if('object'==typeof process&&'function'==typeof require||'object'==typeof window||'function'==typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');'undefined'!=typeof read&&(u=function(t){return read(t)}),w=function(t){let i;return'function'==typeof readbuffer?new Uint8Array(readbuffer(t)):(i=read(t,'binary'),N('object'==typeof i),i)},d=function(t,i,s){setTimeout((()=>i(w(t))),0)},'undefined'!=typeof scriptArgs?o=scriptArgs:void 0!==arguments&&(o=arguments),'undefined'!=typeof print&&('undefined'==typeof console&&(console={}),console.log=print,console.warn=console.error='undefined'!=typeof printErr?printErr:print)}else{if(!l&&!a)throw new Error('environment detection error');if(a?y=self.location.href:'undefined'!=typeof document&&document.currentScript&&(y=document.currentScript.src),h&&(y=h),y=0!==y.indexOf('blob:')?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf('/')+1):'','object'!=typeof window&&'function'!=typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');u=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.send(null),i.responseText},a&&(w=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.responseType='arraybuffer',i.send(null),new Uint8Array(i.response)}),d=(t,i,s)=>{var h=new XMLHttpRequest;h.open('GET',t,!0),h.responseType='arraybuffer',h.onload=()=>{200==h.status||0==h.status&&h.response?i(h.response):s()},h.onerror=s,h.send(null)}}n.print||console.log.bind(console);var I,g,_=n.printErr||console.warn.bind(console);function C(t,i){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){z('Module.'+t+' has been replaced with plain '+i+' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)')}})}function E(t){return'FS_createPath'===t||'FS_createDataFile'===t||'FS_createPreloadedFile'===t||'FS_unlink'===t||'addRunDependency'===t||'FS_createLazyFile'===t||'FS_createDevice'===t||'removeRunDependency'===t}Object.assign(n,r),r=null,I='fetchSettings',Object.getOwnPropertyDescriptor(n,I)&&z('`Module.'+I+'` was supplied but `'+I+'` not included in INCOMING_MODULE_JS_API'),n.arguments&&(o=n.arguments),C('arguments','arguments_'),n.thisProgram&&n.thisProgram,C('thisProgram','thisProgram'),n.quit&&n.quit,C('quit','quit_'),N(void 0===n.memoryInitializerPrefixURL,'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.pthreadMainPrefixURL,'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.cdInitializerPrefixURL,'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.filePackagePrefixURL,'Module.filePackagePrefixURL option was removed, use Module.locateFile instead'),N(void 0===n.read,'Module.read option was removed (modify read_ in JS)'),N(void 0===n.readAsync,'Module.readAsync option was removed (modify readAsync in JS)'),N(void 0===n.readBinary,'Module.readBinary option was removed (modify readBinary in JS)'),N(void 0===n.setWindowTitle,'Module.setWindowTitle option was removed (modify setWindowTitle in JS)'),N(void 0===n.TOTAL_MEMORY,'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY'),C('read','read_'),C('readAsync','readAsync'),C('readBinary','readBinary'),C('setWindowTitle','setWindowTitle'),N(!f,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),n.wasmBinary&&(g=n.wasmBinary),C('wasmBinary','wasmBinary');var T;n.noExitRuntime;C('noExitRuntime','noExitRuntime'),'object'!=typeof WebAssembly&&z('no native wasm support detected');var b,v,O,L,S,k,R,M,x=!1;function N(t,i){t||z('Assertion failed'+(i?': '+i:''))}function P(t){b=t,n.HEAP8=v=new Int8Array(t),n.HEAP16=L=new Int16Array(t),n.HEAP32=S=new Int32Array(t),n.HEAPU8=O=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=k=new Uint32Array(t),n.HEAPF32=R=new Float32Array(t),n.HEAPF64=M=new Float64Array(t)}'undefined'!=typeof TextDecoder&&new TextDecoder('utf8');var D=5242880;n.TOTAL_STACK&&N(D===n.TOTAL_STACK,'the stack size can no longer be determined at runtime');var F=n.INITIAL_MEMORY||16777216;function U(){if(!x){var t=ft(),i=k[t>>2],s=k[t+4>>2];34821223==i&&2310721022==s||z('Stack overflow! Stack cookie has been overwritten at 0x'+t.toString(16)+', expected hex dwords 0x89BACDFE and 0x2135467, but received 0x'+s.toString(16)+' 0x'+i.toString(16)),1668509029!==k[0]&&z('Runtime error: The application has corrupted its heap memory area (address zero)!')}}C('INITIAL_MEMORY','INITIAL_MEMORY'),N(F>=D,'INITIAL_MEMORY should be larger than TOTAL_STACK, was '+F+'! (TOTAL_STACK='+D+')'),N('undefined'!=typeof Int32Array&&'undefined'!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,'JS engine does not provide full typed array support'),N(!n.wasmMemory,'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally'),N(16777216==F,'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically'),function(){var t=new Int16Array(1),i=new Int8Array(t.buffer);if(t[0]=25459,115!==i[0]||99!==i[1])throw'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)'}();var B=[],G=[],H=[],W=!1;N(Math.imul,'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),N(Math.fround,'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),N(Math.clz32,'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),N(Math.trunc,'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');var Y=0,Z=null,V=null,X={};function z(t){n.onAbort&&n.onAbort(t),_(t='Aborted('+t+')'),x=!0;var i=new WebAssembly.RuntimeError(t);throw e(i),i}var j={error:function(){z('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM')},init:function(){j.error()},Qx:function(){j.error()},tN:function(){j.error()},iN:function(){j.error()},open:function(){j.error()},sN:function(){j.error()},hN:function(){j.error()},eN:function(){j.error()},nN:function(){j.error()},rN:function(){j.error()}};n.FS_createDataFile=j.Qx,n.FS_createPreloadedFile=j.tN;var K,q,$,J,Q='data:application/octet-stream;base64,';function tt(t){return t.startsWith(Q)}function it(t){return t.startsWith('file://')}function st(t,i){return function(){var s=t,h=i;return i||(h=n.asm),N(W,'native function `'+s+'` called before runtime initialization'),h[t]||N(h[t],'exported native function `'+s+'` not found'),h[t].apply(null,arguments)}}function ht(t){try{if(t==K&&g)return new Uint8Array(g);if(w)return w(t);throw"both async and sync fetching of the wasm failed"}catch(t){z(t)}}function et(t){this.name='ExitStatus',this.message='Program terminated with exit('+t+')',this.status=t}function nt(t){for(;t.length>0;)t.shift()(n)}function rt(t){rt.oN||(rt.oN={}),rt.oN[t]||(rt.oN[t]=1,c&&(t='warning: '+t),_(t))}function ot(t){try{return T.lN(t-b.byteLength+65535>>>16),P(T.buffer),1}catch(i){_('emscripten_realloc_buffer: Attempted to grow heap from '+b.byteLength+' bytes to '+t+' bytes, but got error: '+i)}}n.locateFile?tt(K='tinymidipcm.wasm')||(q=K,K=n.locateFile?n.locateFile(q,y):y+q):K=new URL(s(5621),s.b).toString();var lt,at={"emscripten_memcpy_big":function(t,i,s){O.copyWithin(t,i,i+s)},"emscripten_resize_heap":function(t){var i=O.length;N((t>>>=0)>i);var s,h,e=2147483648;if(t>e)return _('Cannot enlarge memory, asked to go up to '+t+' bytes, but the limit is '+e+' bytes!'),!1;for(var n=1;n<=4;n*=2){var r=i*(1+.2/n);r=Math.min(r,t+100663296);var o=Math.min(e,(s=Math.max(t,r))+((h=65536)-s%h)%h);if(ot(o))return!0}return _('Failed to grow the heap from '+i+' bytes to '+o+' bytes, not enough memory!'),!1}},ct=(function(){var t,i={'env':at,'wasi_snapshot_preview1':at};function s(t,i){var s,h=t.exports;n.asm=h,N(T=n.asm.memory,"memory not found in wasm exports"),P(T.buffer),N(n.asm.__indirect_function_table,"table not found in wasm exports"),s=n.asm.__wasm_call_ctors,G.unshift(s),function(t){if(Y--,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(N(X[t]),delete X[t]):_('warning: run dependency removed without ID'),0==Y&&(null!==Z&&(clearInterval(Z),Z=null),V)){var i=V;V=null,i()}}('wasm-instantiate')}t='wasm-instantiate',Y++,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(N(!X[t]),X[t]=1,null===Z&&'undefined'!=typeof setInterval&&(Z=setInterval((function(){if(x)return clearInterval(Z),void(Z=null);var t=!1;for(var i in X)t||(t=!0,_('still waiting on run dependencies:')),_('dependency: '+i);t&&_('(end of list)')}),1e4))):_('warning: run dependency added without ID');var h=n;function r(t){N(n===h,'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?'),h=null,s(t.instance)}function o(t){return function(){if(!g&&(l||a)){if('function'==typeof fetch&&!it(K))return fetch(K,{credentials:'same-origin'}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+K+"'";return t.arrayBuffer()})).catch((function(){return ht(K)}));if(d)return new Promise((function(t,i){d(K,(function(i){t(new Uint8Array(i))}),i)}))}return Promise.resolve().then((function(){return ht(K)}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){_('failed to asynchronously prepare wasm: '+t),it(K)&&_('warning: Loading from a file URI ('+K+') is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing'),z(t)}))}if(n.instantiateWasm)try{return n.instantiateWasm(i,s)}catch(t){_('Module.instantiateWasm callback failed with error: '+t),e(t)}(g||'function'!=typeof WebAssembly.instantiateStreaming||tt(K)||it(K)||c||'function'!=typeof fetch?o(r):fetch(K,{credentials:'same-origin'}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(r,(function(t){return _('wasm streaming compile failed: '+t),_('falling back to ArrayBuffer instantiation'),o(r)}))}))).catch(e)}(),n.___wasm_call_ctors=st("__wasm_call_ctors"),n._malloc=st("malloc"),n._free=st("free"),n._tsf_load_memory=st("tsf_load_memory"),n._tsf_close=st("tsf_close"),n._tsf_reset=st("tsf_reset"),n._tsf_set_output=st("tsf_set_output"),n._tsf_set_max_voices=st("tsf_set_max_voices"),n._realloc=st("realloc"),n._tsf_channel_set_presetnumber=st("tsf_channel_set_presetnumber"),n._tsf_channel_set_bank_preset=st("tsf_channel_set_bank_preset"),n._tml_load_memory=st("tml_load_memory"),n._midi_render=st("midi_render"),n.___errno_location=st("__errno_location"),n._fflush=st("fflush"),n._emscripten_stack_init=function(){return(ct=n._emscripten_stack_init=n.asm.emscripten_stack_init).apply(null,arguments)}),ft=(n._emscripten_stack_get_free=function(){return(n._emscripten_stack_get_free=n.asm.emscripten_stack_get_free).apply(null,arguments)},n._emscripten_stack_get_base=function(){return(n._emscripten_stack_get_base=n.asm.emscripten_stack_get_base).apply(null,arguments)},n._emscripten_stack_get_end=function(){return(ft=n._emscripten_stack_get_end=n.asm.emscripten_stack_get_end).apply(null,arguments)});function ut(){var t;ct(),N(0==(3&(t=ft()))),k[t>>2]=34821223,k[t+4>>2]=2310721022,k[0]=1668509029}function dt(t){function s(){lt||(lt=!0,n.calledRun=!0,x||(N(!W),W=!0,U(),nt(G),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),N(!n._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(U(),n.postRun)for('function'==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)t=n.postRun.shift(),H.unshift(t);var t;nt(H)}()))}t=t||o,Y>0||(ut(),function(){if(n.preRun)for('function'==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)t=n.preRun.shift(),B.unshift(t);var t;nt(B)}(),Y>0||(n.setStatus?(n.setStatus('Running...'),setTimeout((function(){setTimeout((function(){n.setStatus('')}),1),s()}),1)):s(),U()))}if(n.stackSave=st("stackSave"),n.stackRestore=st("stackRestore"),n.stackAlloc=st("stackAlloc"),n.setValue=function(t,i,s="i8"){switch(s.endsWith('*')&&(s='*'),s){case'i1':case'i8':v[t>>0]=i;break;case'i16':L[t>>1]=i;break;case'i32':S[t>>2]=i;break;case'i64':J=[i>>>0,($=i,+Math.abs($)>=1?$>0?(0|Math.min(+Math.floor($/4294967296),4294967295))>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],S[t>>2]=J[0],S[t+4>>2]=J[1];break;case'float':R[t>>2]=i;break;case'double':M[t>>3]=i;break;case'*':k[t>>2]=i;break;default:z('invalid type for setValue: '+s)}},n.getValue=function(t,i="i8"){switch(i.endsWith('*')&&(i='*'),i){case'i1':case'i8':return v[t>>0];case'i16':return L[t>>1];case'i32':case'i64':return S[t>>2];case'float':return R[t>>2];case'double':return M[t>>3];case'*':return k[t>>2];default:z('invalid type for getValue: '+i)}return null},['run','UTF8ArrayToString','UTF8ToString','stringToUTF8Array','stringToUTF8','lengthBytesUTF8','addOnPreRun','addOnInit','addOnPreMain','addOnExit','addOnPostRun','addRunDependency','removeRunDependency','FS_createFolder','FS_createPath','FS_createDataFile','FS_createPreloadedFile','FS_createLazyFile','FS_createLink','FS_createDevice','FS_unlink','getLEB','getFunctionTables','alignFunctionTables','registerFunctions','prettyPrint','getCompilerSetting','print','printErr','callMain','abort','keepRuntimeAlive','wasmMemory','stackAlloc','stackSave','stackRestore','getTempRet0','setTempRet0','writeStackCookie','checkStackCookie','ptrToString','zeroMemory','stringToNewUTF8','exitJS','getHeapMax','emscripten_realloc_buffer','ENV','ERRNO_CODES','ERRNO_MESSAGES','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','DNS','getHostByName','Protocols','Sockets','getRandomDevice','warnOnce','traverseStack','UNWIND_CACHE','convertPCtoSourceLocation','readAsmConstArgsArray','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','handleException','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','freeTableIndexes','functionsInTableMap','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','PATH','PATH_FS','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16Decoder','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeArrayToMemory','writeAsciiToMemory','SYSCALLS','getSocketFromFD','getSocketAddress','JSEvents','registerKeyEventCallback','specialHTMLTargets','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','currentFullscreenStrategy','restoreOldWindowedStyle','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','demangle','demangleAll','jsStackTrace','stackTrace','ExitStatus','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','dlopenMissingError','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','uncaughtExceptionCount','exceptionLast','exceptionCaught','ExceptionInfo','exception_addRef','exception_decRef','Browser','setMainLoop','wget','FS','MEMFS','TTY','PIPEFS','SOCKFS','_setNetworkCallback','tempFixedLengthArray','miniTempWebGLFloatBuffers','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','GL','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','AL','SDL_unicode','SDL_ttfContext','SDL_audio','SDL','SDL_gfx','GLUT','EGL','GLFW_Window','GLFW','GLEW','IDBStore','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){var i="'"+t+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";E(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),z(i)}})})),['ptrToString','zeroMemory','stringToNewUTF8','exitJS','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','getHostByName','getRandomDevice','traverseStack','convertPCtoSourceLocation','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeAsciiToMemory','getSocketFromFD','getSocketAddress','registerKeyEventCallback','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','ExceptionInfo','exception_addRef','exception_decRef','setMainLoop','_setNetworkCallback','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','SDL_unicode','SDL_ttfContext','SDL_audio','GLFW_Window','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){'undefined'==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{configurable:!0,get:function(){var i='`'+t+'` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line';E(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),rt(i)}})})),V=function t(){lt||dt(),lt||(V=t)},n.preInit)for('function'==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return dt(),t.ready})}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,r),s.exports}r.m=e,t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",i="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",h=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},r.a=(e,n,r)=>{var o;r&&((o=[]).d=-1);var l,a,c,f=new Set,u=e.exports,d=new Promise(((t,i)=>{c=i,a=t}));d[i]=u,d[t]=t=>(o&&t(o),f.forEach(t),d.catch((t=>{}))),e.exports=d,n((e=>{var n;l=(e=>e.map((e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var n=[];n.d=0,e.then((t=>{r[i]=t,h(n)}),(t=>{r[s]=t,h(n)}));var r={};return r[t]=t=>t(n),r}}var o={};return o[t]=t=>{},o[i]=e,o})))(e);var r=()=>l.map((t=>{if(t[s])throw t[s];return t[i]})),a=new Promise((i=>{(n=()=>i(r)).r=0;var s=t=>t!==o&&!f.has(t)&&(f.add(t),t&&!t.d&&(n.r++,t.push(n)));l.map((i=>i[t](s)))}));return n.r?a:r()}),(t=>(t?c(d[s]=t):a(u),h(o)))),o&&o.d<0&&(o.d=0)},r.d=(t,i)=>{for(var s in i)r.o(i,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},r.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r.p="/Client2/",r.b=document.baseURI||self.location.href;r(1979)})();