(()=>{"use strict";var t,i,s,h,e={9165:(t,i,s)=>{s.d(i,{K:()=>k});var h=s(1120),e=s(4583),n=s(1069),r=s(4702);class o{static tt=t=>{let i=0;t=t.toUpperCase();for(let s=0;s<t.length;s++)i=61*i+t.charCodeAt(s)-32|0;return i};buffer;it;st;ht;et;nt;rt;ot=[];constructor(t){t instanceof Uint8Array&&(t=new Int8Array(t));let i=new n.A(new Uint8Array(t));const s=i.lt,h=i.lt;s===h?(this.buffer=t,this.it=!1):(this.buffer=r.A.read(s,t,h,6),i=new n.A(new Uint8Array(this.buffer)),this.it=!0),this.st=i.ct,this.ht=[],this.et=[],this.nt=[],this.rt=[];let e=i.ft+10*this.st;for(let t=0;t<this.st;t++)this.ht.push(i.ut),this.et.push(i.lt),this.nt.push(i.lt),this.rt.push(e),e+=this.nt[t]}read(t){const i=o.tt(t),s=this.ht.indexOf(i);return-1===s?null:this.dt(s)}dt(t){if(t<0||t>=this.st)return null;if(this.ot[t])return this.ot[t];const i=this.rt[t],s=i+this.nt[t];if(this.it){const h=Uint8Array.from(this.buffer.subarray(i,i+s));return this.ot[t]=h,h}{const i=Uint8Array.from(r.A.read(this.et[t],this.buffer,this.nt[t],this.rt[t]));return this.ot[t]=i,i}}}var l=s(8370),a=(s(8902),s(6666)),c=s(198),f=s(818),u=s(670),d=s(8268),w=s(3867),y=s(7854),A=s(8950),p=s(1302),m=s(9298),I=s(8665),_=s(1312),E=s(3819),g=s(8317),C=s(9234),T=s(123),O=s(5637),b=s(6948),v=s(2164),L=s(8738),R=s(3764),S=s(8534),M=s(6730);class k extends l.A{static wt=225;static yt=10;static portOffset=0;static members=!0;static At=!1;static It='';static _t='';static Et=!1;static gt=2;static Ct=!1;static Tt='https://raw.githubusercontent.com/2004scape/Server/main';static exponent=58778699976184461502525193738213253649000149147835990136706041084440742975821n;static Ot=7162900525229798032761816791230527296329313291232324290237849263501208207972894053929065636522363163621000728841182238772712427862772219676577293600221789n;static bt=0;static vt=0;static Lt=0;static Rt=0;static St=0;static Mt=0;static kt=0;static xt=0;static Dt=0;static Nt=0;static Pt=0;static Ft=0;static Ut=0;static Bt=0;static Gt=0;static Ht=()=>{c.A.At=!1,e.A.At=!1,k.At=!1,f.A.At=!1};static Wt=()=>{c.A.At=!0,e.A.At=!0,k.At=!0,f.A.At=!0};Yt=2048;Vt=2047;Kt=!1;Xt=!1;zt=!1;jt=!1;db=null;Zt=0;qt=[];stream=null;in=n.A.$t(1);Jt=n.A.$t(1);Qt=n.A.$t(1);ti=0n;ii=0;si=0;hi=0;ei=null;ni=0;packetSize=0;ri=0;oi=0;li=0;ai=null;ci=!0;fi=0;ui=0;di=null;wi=null;yi=null;Ai=null;pi=null;mi=null;Ii=null;_i=null;Ei=null;gi=null;Ci=null;Ti='';Oi='';username='';password='';bi=null;vi=null;Li=null;Ri=null;Si=[];Mi=!1;ki=null;xi=null;Di=null;Ni=null;Pi=null;Fi=null;Ui=null;Bi=null;Gi=null;Hi=null;Wi=new Int32Array(256);Yi=0;Vi=0;Ki=0;Xi=null;zi=null;ji=null;Zi=null;qi=null;$i=null;Ji=null;Qi=null;ts=null;ss=null;hs=null;es=null;ns=null;rs=null;os=null;ls=null;cs=null;fs=null;us=null;ds=null;ws=null;ys=new Int32Array(33);As=new Int32Array(33);ps=new Int32Array(151);Is=new Int32Array(151);_s=null;Es=null;gs=null;Cs=null;Ts=null;Os=null;bs=new w.vs(13,null);Ls=null;Rs=null;Ss=new w.vs(50,null);Ms=new w.vs(50,null);ks=new w.vs(20,null);xs=new w.vs(20,null);Ds=null;Ns=new w.vs(8,null);Ps=null;Fs=null;Us=null;Bs=null;Gs=null;Hs=null;Ws=null;Ys=null;Vs=null;Ks=null;Xs=null;zs=null;js=null;Zs=null;qs=null;$s=null;Js=null;Qs=null;th=new w.vs(1e3,null);ih=!1;sh=!1;hh=!1;eh=!1;nh=-1;rh=0;oh=0;lh=0;ah=0;fh=0;uh=0;dh=!1;wh=0;yh=0;Ah=0;ph=0;mh=0;Ih=0;_h=[];Eh=-1;gh=-1;Ch=new h.A;Th=78;Oh=0;bh=0;Lh=[];Rh=0;Sh=0;Mh=0;kh=0;xh=0;Dh=0;Nh=0;Ph=0;Fh=[];Uh=[];Bh=[];Gh=[];Hh=null;Wh=-1;Yh=3;Vh=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];Kh=0;Xh=0;zh=0;jh=!1;Zh=0;qh=!1;$h='';Jh='';Qh=0;te='';ie=!1;se=-1;he=new w.vs(100,null);ee=new w.vs(100,null);messageType=new Int32Array(100);ne=new Int32Array(100);re=0;oe=0;le=0;ae='';ce=0;fe=0;ue=0;de=0;we=0;ye=0;Ae=0;pe=0;me=0;Ie=!1;_e=0;Ee=0;ge=0;Ce=0;Te=null;Oe=0;be=0;ve=0;Le=0;Re=!1;Se=[];Me=[];ke=0;xe=0;De=0;Ne=null;Pe=0;Fe=new Int32Array(500);Ue=new Int32Array(500);Be=new Int32Array(500);Ge=new Int32Array(500);He=0;We=0;Ye=0;Ve='';Ke=!1;Xe=-1;ze=0;je=0;Ze=0;qe=0;$e=0;Je=new Int32Array(1e3);Qe=new Int32Array(1e3);tn=null;sn=0;hn=0;en=0;nn=0;rn=0;ln=!1;an=0;cn=0;fn=0;un=0;dn=2;wn=2;yn=1;An=new Int32Array(5);pn=new w.vs(5,!1);mn=new Int32Array(5);In=new Int32Array(5);_n=new Int32Array(5);En=0;gn=0;Cn=0;Tn=0;On=0;bn=0;vn=0;Ln=0;Rn=0;Sn=1;Mn=2;kn=-1;xn=0;Dn=0;Nn=0;Pn=0;Fn=0;Un=0;Bn=null;Gn=null;Hn=null;Wn=0;Yn=0;Vn=new Int8Array(16384);Kn=new w.vs(u.A.Xn,null);zn=0;jn=0;Zn=128;qn=0;$n=0;Jn=0;Qn=0;tr=0;ir=null;sr=null;hr=new w.er(u.A.nr,u.A.nr);rr=0;lr=0;ar=0;cr=0;ur=0;dr=0;wr=0;yr=0;Ar=0;pr=0;mr=0;Ir=0;_r=new w.vs(this.Yt,null);Er=0;gr=new Int32Array(this.Yt);Cr=0;Tr=0;Or=new Int32Array(this.Yt);br=new Int32Array(1e3);vr=new w.vs(this.Yt,null);Lr=new w.vs(8192,null);Rr=0;Sr=new Int32Array(8192);Mr=new a.A;kr=new a.A;Dr=new a.A;Nr=new a.A;Pr=new w.Fr(u.A.Xn,u.A.nr,u.A.nr,null);Ur=new a.A;Br=new Int32Array(4e3);Gr=new Int32Array(4e3);Hr=new Int32Array(u.A.nr*u.A.nr);Wr=new Int32Array(u.A.nr*u.A.nr);Yr=0;Vr=null;Kr=0;Xr=0;zr=-1;jr=0;Zr=0;qr=0;$r=0;Jr=!1;Qr=!0;io=!1;so=new Int32Array(7);ho=new Int32Array(5);eo=0;no=0;static ro=50;oo=new Int32Array(k.ro);lo=new Int32Array(k.ro);ao=new Int32Array(k.ro);co=new Int32Array(k.ro);fo=new Int32Array(k.ro);uo=new Int32Array(k.ro);do=new Int32Array(k.ro);wo=new w.vs(k.ro,null);yo=new w.vs(100,null);Ao=new BigInt64Array(100);po=new Int32Array(100);mo=null;Io=0;_o=!0;Eo=new Int32Array(50);Co=new Int32Array(50);To=new Int32Array(50);Oo=192;bo=-1;vo=-1;Lo=0;Ro=0;So=0;Mo=!0;ko=null;xo=0;Do=0;No=192;Po=new w.vs(16,null);Fo=0;Uo=!1;Bo=()=>{try{this.stream&&this.stream.close()}catch(t){}this.stream=null,(0,T.Go)(),this.Jt=null,this.Qt=null,this.in=null,this.Hn=null,this.Bn=null,this.Gn=null,this.ir=null,this.sr=null,this.tn=null,this.Kn=null,this.Hr=null,this.Wr=null,this.Br=null,this.Gr=null,this.Vn=null,this.zi=null,this.ji=null,this.Zi=null,this.qi=null,this.$i=null,this.Ji=null,this.Qi=null,this.ts=null,this.ss=null,this.hs=null,this.es=null,this.ns=null,this.rs=null,this.os=null,this.ls=null,this.cs=null,this.fs=null,this._s=null,this.gs=null,this.Es=null,this.Cs=null,this.Ts=null,this.Os=null,this.bs=null,this.Ws=null,this.Ys=null,this.Vs=null,this.Ks=null,this.Xs=null,this.zs=null,this.js=null,this.Zs=null,this.qs=null,this.$s=null,this.Rs=null,this.ks=null,this.xs=null,this.Ns=null,this.Ps=null,this.Fs=null,this.Us=null,this.Bs=null,this.Ss=null,this.Ms=null,this.hr=null,this._r=null,this.gr=null,this.Or=null,this.vr=null,this.br=null,this.Lr=null,this.Sr=null,this.Pr=null,this.Ur=null,this.Nr=null,this.Mr=null,this.kr=null,this.Dr=null,this.Be=null,this.Ge=null,this.Fe=null,this.Ue=null,this._h=null,this.Se=null,this.Je=null,this.Qe=null,this.th=null,this.Ls=null,this.yo=null,this.Ao=null,this.po=null,this.Ai=null,this.pi=null,this.di=null,this.wi=null,this.yi=null,this.mi=null,this.Ii=null,this._i=null,this.Ei=null,this.Ho(),O.A.Bo(),b.A.Bo(),p.A.Bo(),v.A.Wo=null,g.A.Wo=null,h.A.Wo=null,_.A.Wo=null,L.A.Wo=null,L.A.Yo=null,R.A.Wo=null,this.Vo=null,d.A.Yo=null,e.A.Bo(),c.A.Bo(),I.A.Bo(),S.A.Wo=[],M.A.Wo=[]};Ko(){return this.fi}Xo(){return this.ie}zo(){return this.qh}jo(){return this.gh}Zo(){return this.nh}Ho=()=>{this.Mi=!1,this.Xi&&(clearInterval(this.Xi),this.Xi=null),this.gi=null,this.Ci=null,this.Si=[],this.Ui=null,this.Bi=null,this.Gi=null,this.Hi=null,this.Ni=null,this.Di=null,this.Pi=null,this.Fi=null,this.ki=null,this.xi=null};qo=async(t,i,s,h)=>{let e=5,r=await(this.db?.$o(t));if(r&&n.A.Jo(r)!==s&&(r=void 0),r)return new o(r);for(;!r;){await this.Qo(h,`Requesting ${i}`);try{r=await(0,C.tl)(`${k._t}/${t}${s}`)}catch(t){r=void 0;for(let t=e;t>0;t--)await this.Qo(h,`Error loading - Will retry in ${t} secs.`),await(0,C.il)(1e3);e*=2,e>60&&(e=60)}}return await(this.db?.sl(t,r)),new o(r)};hl=async(t,i,s)=>{let h=await(this.db?.$o(t+'.mid'));if(h&&12345678!==i&&n.A.Jo(h)!==i&&(h=void 0),!h)try{h=await(0,C.tl)(`${k._t}/${t}_${i}.mid`),s!==h.length&&(h=h.slice(0,s))}catch(t){}if(!h)return;await(this.db?.sl(t+'.mid',h));const e=new n.A(Uint8Array.from(h)).ut,o=r.A.read(e,h,s,4);(0,T.el)(o,this.No)};nl=()=>{if(y.rl.fillStyle='black',y.rl.fillRect(0,0,this.width,this.height),this.ol(1),this.zt){this.Mi=!1,y.rl.font='bold 16px helvetica, sans-serif',y.rl.textAlign='left',y.rl.fillStyle='yellow';let t=35;y.rl.fillText('Sorry, an error has occured whilst loading RuneScape',30,t),t+=50,y.rl.fillStyle='white',y.rl.fillText('To fix this try the following (in order):',30,t),t+=50,y.rl.font='bold 12px helvetica, sans-serif',y.rl.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,y.rl.fillText('2: Try clearing your web-browsers cache from tools->internet options',30,t),t+=30,y.rl.fillText('3: Try using a different game-world',30,t),t+=30,y.rl.fillText('4: Try rebooting your computer',30,t),t+=30,y.rl.fillText('5: Try selecting a different version of Java from the play-game menu',30,t)}if(this.jt&&(this.Mi=!1,y.rl.font='bold 20px helvetica, sans-serif',y.rl.textAlign='left',y.rl.fillStyle='white',y.rl.fillText('Error - unable to load game!',50,50),y.rl.fillText('To play RuneScape make sure you play from',50,100),y.rl.fillText('https://2004scape.org',50,150)),this.Xt){this.Mi=!1,y.rl.font='bold 13px helvetica, sans-serif',y.rl.textAlign='left',y.rl.fillStyle='yellow';let t=35;y.rl.fillText('Error a copy of RuneScape already appears to be loaded',30,t),t+=50,y.rl.fillStyle='white',y.rl.fillText('To fix this try the following (in order):',30,t),t+=50,y.rl.font='bold 12px helvetica, sans-serif',y.rl.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,y.rl.fillText('2: Try rebooting your computer, and reloading',30,t)}};ll=t=>{if(!t.al)return!1;for(let i=0;i<t.al.length;i++){const s=this.cl(t,i);if(!t.fl)return!1;const h=t.fl[i];if(2===t.al[i]){if(s>=h)return!1}else if(3===t.al[i]){if(s<=h)return!1}else if(4===t.al[i]){if(s===h)return!1}else if(s!==h)return!1}return!0};ul=(t,i,s,h,e)=>{this.Gs?.draw(t,i),this.Hs?.draw(t,i+e-16),A.A.fillRect(t,i+16,16,e-32,m.A.dl);let n=(e-32)*e/h|0;n<8&&(n=8);const r=(e-n-32)*s/(h-e)|0;A.A.fillRect(t,i+r+16,16,n,m.A.wl),A.A.yl(t,i+r+16,m.A.Al,n),A.A.yl(t+1,i+r+16,m.A.Al,n),A.A.pl(t,i+r+16,m.A.Al,16),A.A.pl(t,i+r+17,m.A.Al,16),A.A.yl(t+15,i+r+16,m.A.ml,n),A.A.yl(t+14,i+r+17,m.A.ml,n-1),A.A.pl(t,i+r+n+15,m.A.ml,16),A.A.pl(t+1,i+r+n+14,m.A.ml,15)};Il=(t,i)=>{let s=!1;const e=h.A.Wo[t];if(!e._l)return!1;for(let t=0;t<e._l.length&&-1!==e._l[t];t++){const n=h.A.Wo[e._l[t]];if(1===n.type&&(s||=this.Il(n.id,i)),6===n.type&&(-1!==n.El||-1!==n.gl)){let t;if(t=this.ll(n)?n.gl:n.El,-1!==t){const h=_.A.Wo[t];if(n.Cl+=i,h.delay)for(;n.Cl>h.delay[n.Tl];)n.Cl-=h.delay[n.Tl]+1,n.Tl++,n.Tl>=h.Ol&&(n.Tl-=h.bl,(n.Tl<0||n.Tl>=h.Ol)&&(n.Tl=0)),s=!0}}}return s};vl=(t,i,s,n,r=!1)=>{if(0!==t.type||!t._l||t.hide&&this.ce!==t.id&&this.fe!==t.id&&this.ue!==t.id)return;const o=A.A.left,l=A.A.top,a=A.A.right,c=A.A.bottom;A.A.Ll(i,s,i+t.width,s+t.height);const f=t._l.length;for(let o=0;o<f;o++){if(!t.Rl||!t.Sl)continue;let l=t.Rl[o]+i,a=t.Sl[o]+s-n;const c=h.A.Wo[t._l[o]];if(l+=c.x,a+=c.y,r&&A.A.Ml(l,a,c.width,c.height,m.A.kl),c.xl>0&&this.Dl(c),c.type===h.A.Nl)c.Pl>c.scroll-c.height&&(c.Pl=c.scroll-c.height),c.Pl<0&&(c.Pl=0),this.vl(c,l,a,c.Pl,r),c.scroll>c.height&&this.ul(l+c.width,a,c.Pl,c.scroll,c.height);else if(c.type===h.A.Fl){let t=0;for(let i=0;i<c.height;i++)for(let s=0;s<c.width;s++){if(!(c.Ul&&c.Bl&&c.Gl&&c.Hl))continue;let h=l+s*(c.Wl+32),e=a+i*(c.Yl+32);if(t<20&&(h+=c.Ul[t],e+=c.Bl[t]),c.Gl[t]>0){let i=0,s=0;const n=c.Gl[t]-1;if(h>=-32&&h<=512&&e>=-32&&e<=334||0!==this.ye&&this.we===t){const r=p.A.Vl(n,c.Hl[t]);if(0!==this.ye&&this.we===t&&this.de===c.id?(i=this.Kl-this.Ae,s=this.Xl-this.pe,i<5&&i>-5&&(i=0),s<5&&s>-5&&(s=0),this.me<5&&(i=0,s=0),r.zl(128,h+i,e+s)):0!==this.Oe&&this.be===t&&this.ve===c.id?r.zl(128,h,e):r.draw(h,e),33===r.jl||1!==c.Hl[t]){const n=c.Hl[t];this.bi?.Zl(h+i+1,e+10+s,this.ql(n),m.A.$l),this.bi?.Zl(h+i,e+9+s,this.ql(n),m.A.Jl)}}}else if(c.Ql&&t<20){const i=c.Ql[t];i?.draw(h,e)}t++}}else if(c.type===h.A.ta)c.fill?A.A.fillRect(l,a,c.width,c.height,c.ia):A.A.Ml(l,a,c.width,c.height,c.ia);else if(c.type===h.A.sa){const t=c.font;let i=c.ia,s=c.text;if(this.ue!==c.id&&this.fe!==c.id&&this.ce!==c.id||0===c.ha||(i=c.ha),this.ll(c)&&(i=c.ea,c.na&&c.na.length>0&&(s=c.na)),c.ra===h.A.oa&&this.Re&&(s='Please wait...',i=c.ia),!t||!s)continue;for(let h=a+t.height;s.length>0;h+=t.height){if(-1!==s.indexOf('%')){for(;;){const t=s.indexOf('%1');if(-1===t)break;s=s.substring(0,t)+this.la(this.cl(c,0))+s.substring(t+2)}for(;;){const t=s.indexOf('%2');if(-1===t)break;s=s.substring(0,t)+this.la(this.cl(c,1))+s.substring(t+2)}for(;;){const t=s.indexOf('%3');if(-1===t)break;s=s.substring(0,t)+this.la(this.cl(c,2))+s.substring(t+2)}for(;;){const t=s.indexOf('%4');if(-1===t)break;s=s.substring(0,t)+this.la(this.cl(c,3))+s.substring(t+2)}for(;;){const t=s.indexOf('%5');if(-1===t)break;s=s.substring(0,t)+this.la(this.cl(c,4))+s.substring(t+2)}}const e=s.indexOf('\\n');let n;-1!==e?(n=s.substring(0,e),s=s.substring(e+2)):(n=s,s=''),c.aa?t.ca(l+(c.width/2|0),h,n,i,c.fa):t.ua(l,h,n,i,c.fa)}}else if(c.type===h.A.da){let t;t=this.ll(c)?c.wa:c.ya,t?.draw(l,a)}else if(c.type===h.A.Aa){const t=e.A.pa,i=e.A.ma;e.A.pa=l+(c.width/2|0),e.A.ma=a+(c.height/2|0);const s=e.A.sin[c.Ia]*c.zoom>>16,h=e.A.cos[c.Ia]*c.zoom>>16,n=this.ll(c);let r;r=n?c.gl:c.El;let o=null;if(-1===r)o=c._a(-1,-1,n);else{const t=_.A.Wo[r];t.frames&&t.Ea&&(o=c._a(t.frames[c.Tl],t.Ea[c.Tl],n))}o&&o.ga(0,c.Ca,0,c.Ia,0,s,h),e.A.pa=t,e.A.ma=i}else if(c.type===h.A.Ta){const t=c.font;if(!t||!c.Gl||!c.Hl)continue;let i=0;for(let s=0;s<c.height;s++)for(let h=0;h<c.width;h++){if(c.Gl[i]>0){const e=p.A.get(c.Gl[i]-1);let n=e.name;if((e.Oa||1!==c.Hl[i])&&(n=n+' x'+this.ba(c.Hl[i])),!n)continue;const r=l+h*(c.Wl+115),o=a+s*(c.Yl+12);c.aa?t.ca(r+(c.width/2|0),o,n,c.ia,c.fa):t.ua(r,o,n,c.ia,c.fa)}i++}}}A.A.Ll(o,l,a,c)};Dl=t=>{let i=t.xl;if(i>=h.A.va&&i<=h.A.La)i--,i>=this.eo?(t.text='',t.ra=0):(t.text=this.yo[i],t.ra=1);else if(i>=h.A.Ra&&i<=h.A.Sa)i-=h.A.Ra,i>=this.eo?(t.text='',t.ra=0):(0===this.po[i]?t.text='@red@Offline':this.po[i]===k.yt?t.text='@gre@World-'+(this.po[i]-9):t.text='@yel@World-'+(this.po[i]-9),t.ra=1);else if(i===h.A.Ma)t.scroll=15*this.eo+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i>=h.A.ka&&i<=h.A.xa)i-=h.A.ka,i>=this.bh?(t.text='',t.ra=0):(t.text=E.A.Da(E.A.Na(this.Lh[i])),t.ra=1);else if(i===h.A.Pa)t.scroll=15*this.bh+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i===h.A.Fa){if(t.Ia=150,t.Ca=256*Math.sin(this.Zt/40)&2047,this.io){this.io=!1;const i=new w.vs(7,null);let s=0;for(let t=0;t<7;t++){const h=this.so[t];h>=0&&(i[s++]=g.A.Wo[h]._a())}const h=I.A.Ua(i,s);for(let t=0;t<5;t++)0!==this.ho[t]&&(h.Ba(d.A.Ga[t][0],d.A.Ga[t][this.ho[t]]),1===t&&h.Ba(d.A.Ha[0],d.A.Ha[this.ho[t]]));if(this.Vr){const i=_.A.Wo[this.Vr.Wa].frames;i&&(h.Ya(),h.Va(i[0]),h.Ka(64,850,-30,-50,-30,!0),t.model=h)}}}else if(i===h.A.Xa)this.Js||(this.Js=t.ya,this.Qs=t.wa),this.Qr?t.ya=this.Qs:t.ya=this.Js;else if(i===h.A.za)this.Js||(this.Js=t.ya,this.Qs=t.wa),this.Qr?t.ya=this.Js:t.ya=this.Qs;else if(i===h.A.ja)t.text=this.Ve,this.Zt%20<10?t.text=t.text+'|':t.text=t.text+' ';else if(i===h.A.Za)this.Jr?this.Ke?(t.ia=m.A.RED,t.text='Moderator option: Mute player for 48 hours: <ON>'):(t.ia=m.A.kl,t.text='Moderator option: Mute player for 48 hours: <OFF>'):t.text='';else if(i===h.A.qa||i===h.A.$a)if(0===this.ze)t.text='';else{let i;i=0===this.je?'earlier today':1===this.je?'yesterday':this.je+' days ago',t.text='You last logged in '+i+' from: '+E.A.Ja(this.ze)}else if(i===h.A.Qa)0===this.qe&&(t.text='0 unread messages',t.ia=m.A.Jl),1===this.qe&&(t.text='1 unread message',t.ia=m.A.GREEN),this.qe>1&&(t.text=this.qe+' unread messages',t.ia=m.A.GREEN);else if(i===h.A.tc)if(201===this.Ze)t.text='';else if(200===this.Ze)t.text='You have not yet set any password recovery questions.';else{let i;i=0===this.Ze?'Earlier today':1===this.Ze?'Yesterday':this.Ze+' days ago',t.text=i+' you changed your recovery questions'}else i===h.A.ic?201===this.Ze?t.text='':200===this.Ze?t.text='We strongly recommend you do so now to secure your account.':t.text='If you do not remember making this change then cancel it immediately':i===h.A.sc&&(201===this.Ze?t.text='':(this.Ze,t.text="Do this from the 'account management' area on our front webpage"))};cl=(t,i)=>{if(!t.scripts||i>=t.scripts.length)return-2;try{const s=t.scripts[i];if(!s)return-1;let e=0,n=0;for(;;){const t=s[n++];if(0===t)return e;if(1===t)e+=this.Uh[s[n++]];else if(2===t)e+=this.Bh[s[n++]];else if(3===t)e+=this.Fh[s[n++]];else if(4===t){const t=h.A.Wo[s[n++]],i=s[n++]+1;if(t.Gl&&t.Hl)for(let s=0;s<t.Gl.length;s++)t.Gl[s]===i&&(e+=t.Hl[s]);else e+=0}else if(5===t)e+=this.Se[s[n++]];else if(6===t)e+=this.Gh[this.Bh[s[n++]]-1];else if(7===t)e+=100*this.Se[s[n++]]/46875|0;else if(8===t)e+=this.Vr?.hc||0;else if(9===t)for(let t=0;t<19;t++)18===t&&(t=20),e+=this.Bh[t];else if(10===t){const t=h.A.Wo[s[n++]],i=s[n++]+1;for(let s=0;s<t.Gl.length;s++)if(t.Gl[s]===i){e+=999999999;break}}else if(11===t)e+=this.Kr;else if(12===t)e+=this.jr;else if(13===t){const t=this.Se[s[n++]];e+=t&1<<s[n++]?1:0}}}catch(t){return-1}};la=t=>t<999999999?String(t):'*';ba=t=>{let i=String(t);for(let t=i.length-3;t>0;t-=3)i=i.substring(0,t)+','+i.substring(t);return i.length>8?i='@gre@'+i.substring(0,i.length-8)+' million @whi@('+i+')':i.length>4&&(i='@cya@'+i.substring(0,i.length-4)+'K @whi@('+i+')'),' '+i};ql=t=>t<1e5?String(t):t<1e7?(t/1e3|0)+'K':(t/1e6|0)+'M'}},7604:(t,i,s)=>{s.d(i,{w:()=>r});var h=s(8370),e=s(9165),n=s(9234);async function r(){await async function(){0===h.A.getParameter('world').length&&h.A.setParameter('world','1');'0'===h.A.getParameter('world')?(e.K.It='http://localhost',e.K._t='http://localhost',e.K.portOffset=0):await async function(t){const i=await o(t,parseInt(h.A.getParameter('world'),10)),s=new URL(i.address);e.K.yt=10+i.id-1,e.K.It=`${s.protocol}//${s.hostname}`,e.K._t=`${s.protocol}//${s.hostname}:${s.port}`,t||(e.K.It=e.K.It.replace('https:','http:'));e.K.portOffset=i.portOffset,e.K.members=!0===i?.members,h.A.setParameter('world',i.id.toString(10))}(window.location.protocol.startsWith('https'))}(),function(){0===h.A.getParameter('detail').length&&h.A.setParameter('detail','high');'low'===h.A.getParameter('detail')?e.K.Wt():e.K.Ht()}(),0===h.A.getParameter('method').length&&h.A.setParameter('method','0')}async function o(t,i,s=0){if(s>=10)throw new Error('could not find world to connect!');const h=t?'https:':'http:';let e;try{e=JSON.parse(await(0,n.ec)(`${h}//2004scape.org/api/v1/worldlist`))}catch(h){return await(0,n.il)(1e3),o(t,i,++s)}e.push({id:0,region:'Local Development',address:'http://localhost',portOffset:0,members:!0,_r:0});const r=e.find((t=>t.id===i));return r||o(t,i,10)}},7906:(t,i,s)=>{s.a(t,(async(t,i)=>{try{var h=s(1312),e=s(5637),n=s(1302),r=s(6948),o=s(8317),l=s(8738),a=s(3764),c=s(1120),f=s(1183),u=s(8950),d=s(4583),w=s(1673),y=s(1122),A=s(2682),p=s(8665),m=s(9298),I=s(1069),_=s(3554),E=s(353),g=s(2634),C=s(4544),T=s(2215),O=s(3955),b=s(7953),v=s(2646),L=s(3937),R=(s(8902),s(4702)),S=s(6666),M=s(3819),k=s(2595),x=s(198),D=s(818),N=s(5599),P=s(1023),F=s(6169),U=s(2630),B=s(5327),G=s(670),H=s(9456),W=s(8268),Y=s(8412),V=s(3606),K=s(4197),X=s(254),z=s(7628),j=s(123),Z=s(9234),q=s(3867),$=s(9165),J=s(8534),Q=s(6730),tt=s(2164),it=s(7604),st=s(3795),ht=s(4909);class t extends $.K{load=async()=>{if(this.Kt)this.Xt=!0;else{this.Kt=!0;try{await this.Qo(10,'Connecting to fileserver'),await R.A.load(await(await fetch('bz2.wasm')).arrayBuffer()),this.db=new C.A(await C.A.openDatabase());const t=new I.A(new Uint8Array(await(0,Z.tl)(`${$.K._t}/crc`)));for(let i=0;i<9;i++)this.qt[i]=t.ut;$.K.At||await this.hl('scape_main',12345678,4e4);const i=await this.qo('title','title screen',this.qt[1],10);this.ai=i,this.bi=A.A.nc(i,'p11'),this.vi=A.A.nc(i,'p12'),this.Li=A.A.nc(i,'b12'),this.Ri=A.A.nc(i,'q8'),await this.rc(),this.oc();const s=await this.qo('config','config',this.qt[2],15),u=await this.qo('interface','interface',this.qt[3],20),m=await this.qo('media','2d graphics',this.qt[4],30),_=await this.qo('models','3d graphics',this.qt[5],40),E=await this.qo('textures','textures',this.qt[6],60),g=await this.qo('wordenc','chat system',this.qt[7],65),T=await this.qo('sounds','sound effects',this.qt[8],70);this.sr=new q.lc(G.A.Xn,G.A.nr,G.A.nr),this.ir=new q.ac(G.A.Xn,G.A.nr+1,G.A.nr+1),this.ir&&(this.tn=new x.A(this.ir,G.A.nr,G.A.Xn,G.A.nr));for(let t=0;t<G.A.Xn;t++)this.Kn[t]=new G.A;this.Ls=new y.A(512,512),await this.Qo(75,'Unpacking media'),this._s=w.A.nc(m,'invback',0),this.Es=w.A.nc(m,'chatback',0),this.gs=w.A.nc(m,'mapback',0),this.Cs=w.A.nc(m,'backbase1',0),this.Ts=w.A.nc(m,'backbase2',0),this.Os=w.A.nc(m,'backhmid1',0);for(let t=0;t<13;t++)this.bs[t]=w.A.nc(m,'sideicons',t);this.Rs=y.A.nc(m,'compass',0);try{for(let t=0;t<50;t++)22!==t&&(this.Ss[t]=w.A.nc(m,'mapscene',t))}catch(t){}try{for(let t=0;t<50;t++)this.Ms[t]=y.A.nc(m,'mapfunction',t)}catch(t){}try{for(let t=0;t<20;t++)this.ks[t]=y.A.nc(m,'hitmarks',t)}catch(t){}try{for(let t=0;t<20;t++)this.xs[t]=y.A.nc(m,'headicons',t)}catch(t){}this.Ds=y.A.nc(m,'mapflag',0);for(let t=0;t<8;t++)this.Ns[t]=y.A.nc(m,'cross',t);this.Ps=y.A.nc(m,'mapdots',0),this.Fs=y.A.nc(m,'mapdots',1),this.Us=y.A.nc(m,'mapdots',2),this.Bs=y.A.nc(m,'mapdots',3),this.Gs=w.A.nc(m,'scrollbar',0),this.Hs=w.A.nc(m,'scrollbar',1),this.Ws=w.A.nc(m,'redstone1',0),this.Ys=w.A.nc(m,'redstone2',0),this.Vs=w.A.nc(m,'redstone3',0),this.Ks=w.A.nc(m,'redstone1',0),this.Ks?.cc(),this.Xs=w.A.nc(m,'redstone2',0),this.Xs?.cc(),this.zs=w.A.nc(m,'redstone1',0),this.zs?.fc(),this.js=w.A.nc(m,'redstone2',0),this.js?.fc(),this.Zs=w.A.nc(m,'redstone3',0),this.Zs?.fc(),this.qs=w.A.nc(m,'redstone1',0),this.qs?.cc(),this.qs?.fc(),this.$s=w.A.nc(m,'redstone2',0),this.$s?.cc(),this.$s?.fc();const O=y.A.nc(m,'backleft1',0);this.ts=new f.A(O.width,O.height),O.uc(0,0);const v=y.A.nc(m,'backleft2',0);this.ss=new f.A(v.width,v.height),v.uc(0,0);const S=y.A.nc(m,'backright1',0);this.hs=new f.A(S.width,S.height),S.uc(0,0);const M=y.A.nc(m,'backright2',0);this.es=new f.A(M.width,M.height),M.uc(0,0);const k=y.A.nc(m,'backtop1',0);this.ns=new f.A(k.width,k.height),k.uc(0,0);const D=y.A.nc(m,'backtop2',0);this.rs=new f.A(D.width,D.height),D.uc(0,0);const N=y.A.nc(m,'backvmid1',0);this.os=new f.A(N.width,N.height),N.uc(0,0);const P=y.A.nc(m,'backvmid2',0);this.ls=new f.A(P.width,P.height),P.uc(0,0);const F=y.A.nc(m,'backvmid3',0);this.cs=new f.A(F.width,F.height),F.uc(0,0);const U=y.A.nc(m,'backhmid2',0);this.fs=new f.A(U.width,U.height),U.uc(0,0);const B=(21*Math.random()|0)-10,H=(21*Math.random()|0)-10,W=(21*Math.random()|0)-10,Y=(41*Math.random()|0)-20;for(let t=0;t<50;t++)this.Ms[t]&&this.Ms[t]?.translate(B+Y,H+Y,W+Y),this.Ss[t]&&this.Ss[t]?.translate(B+Y,H+Y,W+Y);await this.Qo(80,'Unpacking textures'),d.A.dc(E),d.A.wc(.8),d.A.yc(20),await this.Qo(83,'Unpacking models'),p.A.Ac(_),J.A.Ac(_),Q.A.Ac(_),await this.Qo(86,'Unpacking config'),h.A.Ac(s),e.A.Ac(s),tt.A.Ac(s),n.A.Ac(s,$.K.members),r.A.Ac(s),o.A.Ac(s),l.A.Ac(s),a.A.Ac(s),$.K.At||(await this.Qo(90,'Unpacking sounds'),L.A.Ac(T)),await this.Qo(92,'Unpacking interfaces'),c.A.Ac(u,m,[this.bi,this.vi,this.Li,this.Ri]),await this.Qo(97,'Preparing game engine');for(let t=0;t<33;t++){let i=999,s=0;for(let h=0;h<35;h++)if(0===this.gs.mc[h+t*this.gs.width])999===i&&(i=h);else if(999!==i){s=h;break}this.ys[t]=i,this.As[t]=s-i}for(let t=9;t<160;t++){let i=999,s=0;for(let h=10;h<168;h++)if(0===this.gs.mc[h+t*this.gs.width]&&(h>34||t>34))999===i&&(i=h);else if(999!==i){s=h;break}this.ps[t-9]=i-21,this.Is[t-9]=s-i}d.A.Ic(479,96),this.us=d.A._c,d.A.Ic(190,261),this.ds=d.A._c,d.A.Ic(512,334),this.ws=d.A._c;const V=new Int32Array(9);for(let t=0;t<9;t++){const i=32*t+128+15,s=3*i+600,h=d.A.sin[i];V[t]=s*h>>16}x.A.init(512,334,500,800,V),b.A.Ac(g),this.Ec()}catch(t){console.error(t),this.zt=!0}}};update=async()=>{this.Xt||this.zt||this.jt||(this.Zt++,this.gc?await this.Cc():await this.Tc())};draw=async()=>{this.Xt||this.zt||this.jt?this.nl():(this.gc?this.Oc():await this.bc(),this.rh=0)};refresh=()=>{this.ci=!0};Qo=async(t,i)=>{if(console.log(`${t}%: ${i}`),await this.vc(),!this.ai)return void await super.Qo(t,i);this.yi?.bind();this.Li?.Lc(180,54,'RuneScape is loading - please wait...',m.A.kl);u.A.Ml(28,62,304,34,m.A.Rc),u.A.Ml(29,63,302,32,m.A.$l),u.A.fillRect(30,64,3*t,30,m.A.Rc),u.A.fillRect(30+3*t,64,300-3*t,30,m.A.$l),this.Li?.Lc(180,85,i,m.A.kl),this.yi?.draw(214,186),this.ci&&(this.ci=!1,this.Mi||(this.Ai?.draw(0,0),this.pi?.draw(661,0)),this.di?.draw(128,0),this.wi?.draw(214,386),this.mi?.draw(0,265),this.Ii?.draw(574,265),this._i?.draw(128,186),this.Ei?.draw(574,186)),await(0,Z.il)(5)};Sc=()=>{this.Mi&&(this.Mc(),this.Mc(),this.kc())};vc=async()=>{this.di||(this.Vo=null,this.qi=null,this.ji=null,this.zi=null,this.Zi=null,this.$i=null,this.Ji=null,this.Qi=null,this.Ai=new f.A(128,265),u.A.clear(),this.pi=new f.A(128,265),u.A.clear(),this.di=new f.A(533,186),u.A.clear(),this.wi=new f.A(360,146),u.A.clear(),this.yi=new f.A(360,200),u.A.clear(),this.mi=new f.A(214,267),u.A.clear(),this.Ii=new f.A(215,267),u.A.clear(),this._i=new f.A(86,79),u.A.clear(),this.Ei=new f.A(87,79),u.A.clear(),this.ai&&(await this.rc(),this.oc()),this.ci=!0)};rc=async()=>{if(!this.ai)return;const t=await y.A.xc(this.ai,'title');this.Ai?.bind(),t.uc(0,0),this.pi?.bind(),t.uc(-661,0),this.di?.bind(),t.uc(-128,0),this.wi?.bind(),t.uc(-214,-386),this.yi?.bind(),t.uc(-214,-186),this.mi?.bind(),t.uc(0,-265),this.Ii?.bind(),t.uc(-128,-186),this._i?.bind(),t.uc(-128,-186),this.Ei?.bind(),t.uc(-574,-186),t.cc(),this.Ai?.bind(),t.uc(394,0),this.pi?.bind(),t.uc(-267,0),this.di?.bind(),t.uc(266,0),this.wi?.bind(),t.uc(180,-386),this.yi?.bind(),t.uc(180,-186),this.mi?.bind(),t.uc(394,-265),this.Ii?.bind(),t.uc(-180,-265),this._i?.bind(),t.uc(212,-186),this.Ei?.bind(),t.uc(-180,-186);const i=y.A.nc(this.ai,'logo');this.di?.bind(),i.draw((this.width/2|0)-(i.width/2|0)-128,18)};Dc=t=>{if(!this.Ni||!this.Di)return;this.Ni.fill(0);for(let t=0;t<5e3;t++){const t=128*Math.random()*256|0;this.Ni[t]=256*Math.random()|0}for(let t=0;t<20;t++){for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Di[s]=(this.Ni[s-1]+this.Ni[s+1]+this.Ni[s-128]+this.Ni[s+128])/4|0}const t=this.Ni;this.Ni=this.Di,this.Di=t}if(t){let i=0;for(let s=0;s<t.height;s++)for(let h=0;h<t.width;h++)if(0!==t.mc[i++]){const i=h+t.Nc+16+(s+t.Pc+16<<7);this.Ni[i]=0}}};oc=()=>{if(this.ai){this.gi=w.A.nc(this.ai,'titlebox'),this.Ci=w.A.nc(this.ai,'titlebutton');for(let t=0;t<12;t++)this.Si[t]=w.A.nc(this.ai,'runes',t);this.ki=new y.A(128,265),this.xi=new y.A(128,265),this.Ai&&(0,Z.Fc)(this.Ai.mc,0,this.ki.mc,0,33920),this.pi&&(0,Z.Fc)(this.pi.mc,0,this.xi.mc,0,33920),this.Bi=new Int32Array(256);for(let t=0;t<64;t++)this.Bi[t]=262144*t;for(let t=0;t<64;t++)this.Bi[t+64]=1024*t+m.A.RED;for(let t=0;t<64;t++)this.Bi[t+128]=4*t+m.A.Jl;for(let t=0;t<64;t++)this.Bi[t+192]=m.A.kl;this.Gi=new Int32Array(256);for(let t=0;t<64;t++)this.Gi[t]=1024*t;for(let t=0;t<64;t++)this.Gi[t+64]=4*t+m.A.GREEN;for(let t=0;t<64;t++)this.Gi[t+128]=262144*t+m.A.Uc;for(let t=0;t<64;t++)this.Gi[t+192]=m.A.kl;this.Hi=new Int32Array(256);for(let t=0;t<64;t++)this.Hi[t]=4*t;for(let t=0;t<64;t++)this.Hi[t+64]=262144*t+m.A.BLUE;for(let t=0;t<64;t++)this.Hi[t+128]=1024*t+m.A.Bc;for(let t=0;t<64;t++)this.Hi[t+192]=m.A.kl;this.Ui=new Int32Array(256),this.Ni=new Int32Array(32768),this.Di=new Int32Array(32768),this.Dc(null),this.Pi=new Int32Array(32768),this.Fi=new Int32Array(32768),this.Qo(10,'Connecting to fileserver').then((()=>{this.Mi||(this.Mi=!0,this.Xi=setInterval(this.Sc,35))}))}};Tc=async()=>{if(0===this.fi){let t=(this.width/2|0)-80,i=20+(this.height/2|0);i+=20,1===this.Gc&&this.Hc>=t-75&&this.Hc<=t+75&&this.Wc>=i-20&&this.Wc<=i+20&&(this.fi=3,this.ui=0),t=80+(this.width/2|0),1===this.Gc&&this.Hc>=t-75&&this.Hc<=t+75&&this.Wc>=i-20&&this.Wc<=i+20&&(this.Ti='',this.Oi='Enter your username & password.',this.fi=2,this.ui=0)}else if(2===this.fi){let t=(this.height/2|0)-40;t+=30,t+=25,1===this.Gc&&this.Wc>=t-15&&this.Wc<t&&(this.ui=0),t+=15,1===this.Gc&&this.Wc>=t-15&&this.Wc<t&&(this.ui=1);let i=(this.width/2|0)-80,s=50+(this.height/2|0);for(s+=20,1===this.Gc&&this.Hc>=i-75&&this.Hc<=i+75&&this.Wc>=s-20&&this.Wc<=s+20&&await this.Yc(this.username,this.password,!1),i=80+(this.width/2|0),1===this.Gc&&this.Hc>=i-75&&this.Hc<=i+75&&this.Wc>=s-20&&this.Wc<=s+20&&(this.fi=0,this.username='',this.password='');;){const t=this.Vc();if(-1===t)return;let i=!1;for(let s=0;s<A.A.Kc.length;s++)if(String.fromCharCode(t)===A.A.Kc.charAt(s)){i=!0;break}0===this.ui?(8===t&&this.username.length>0&&(this.username=this.username.substring(0,this.username.length-1)),9!==t&&10!==t&&13!==t||(this.ui=1),i&&(this.username=this.username+String.fromCharCode(t)),this.username.length>12&&(this.username=this.username.substring(0,12))):1===this.ui&&(8===t&&this.password.length>0&&(this.password=this.password.substring(0,this.password.length-1)),9!==t&&10!==t&&13!==t||(this.ui=0),i&&(this.password=this.password+String.fromCharCode(t)),this.password.length>20&&(this.password=this.password.substring(0,20)))}}else if(3===this.fi){const t=this.width/2|0;let i=50+(this.height/2|0);i+=20,1===this.Gc&&this.Hc>=t-75&&this.Hc<=t+75&&this.Wc>=i-20&&this.Wc<=i+20&&(this.fi=0)}};bc=async()=>{await this.vc(),this.yi?.bind(),this.gi?.draw(0,0);if(0===this.fi){let t=180,i=80;this.Li?.ca(t,i,'Welcome to RuneScape',m.A.Jl,!0),t=100,i=120,this.Ci?.draw(t-73,i-20),this.Li?.ca(t,i+5,'New user',m.A.kl,!0),t=260,this.Ci?.draw(t-73,i-20),this.Li?.ca(t,i+5,'Existing User',m.A.kl,!0)}else if(2===this.fi){let t=100,i=60;this.Ti.length>0?(this.Li?.ca(180,i-15,this.Ti,m.A.Jl,!0),this.Li?.ca(180,i,this.Oi,m.A.Jl,!0),i+=30):(this.Li?.ca(180,i-7,this.Oi,m.A.Jl,!0),i+=30),this.Li?.ua(90,i,`Username: ${this.username}${0===this.ui&&this.Zt%40<20?'@yel@|':''}`,m.A.kl,!0),i+=15,this.Li?.ua(92,i,`Password: ${M.A.Xc(this.password)}${1===this.ui&&this.Zt%40<20?'@yel@|':''}`,m.A.kl,!0),i=150,this.Ci?.draw(t-73,i-20),this.Li?.ca(t,i+5,'Login',m.A.kl,!0),t=260,this.Ci?.draw(t-73,i-20),this.Li?.ca(t,i+5,'Cancel',m.A.kl,!0)}else if(3===this.fi){this.Li?.ca(180,40,'Create a free account',m.A.Jl,!0);const t=180;let i=65;this.Li?.ca(180,i,'To create a new account you need to',m.A.kl,!0),i+=15,this.Li?.ca(180,i,'go back to the main RuneScape webpage',m.A.kl,!0),i+=15,this.Li?.ca(180,i,"and choose the red 'create account'",m.A.kl,!0),i+=15,this.Li?.ca(180,i,'button at the top right of that page.',m.A.kl,!0),i=150,this.Ci?.draw(t-73,i-20),this.Li?.ca(t,i+5,'Cancel',m.A.kl,!0)}this.yi?.draw(214,186),this.ci&&(this.ci=!1,this.di?.draw(128,0),this.wi?.draw(214,386),this.mi?.draw(0,265),this.Ii?.draw(574,265),this._i?.draw(128,186),this.Ei?.draw(574,186))};Yc=async(t,i,s)=>{try{s||(this.Ti='',this.Oi='Connecting to server...',await this.bc()),this.stream=new _.A(await _.A.zc({host:$.K.It,port:43594+$.K.portOffset})),await(this.stream?.jc(this.in.data,0,8)),this.in.ft=0,this.ti=this.in.Zc;const h=new Int32Array([Math.floor(99999999*Math.random()),Math.floor(99999999*Math.random()),Number(this.ti>>32n),Number(this.ti&BigInt(4294967295))]);this.Jt.ft=0,this.Jt.p1(10),this.Jt.p4(h[0]),this.Jt.p4(h[1]),this.Jt.p4(h[2]),this.Jt.p4(h[3]),this.Jt.p4(0),this.Jt.qc(t),this.Jt.qc(i),this.Jt.$c($.K.Ot,$.K.exponent),this.Qt.ft=0,s?this.Qt.p1(18):this.Qt.p1(16),this.Qt.p1(this.Jt.ft+36+1+1),this.Qt.p1($.K.wt),this.Qt.p1($.K.At?1:0);for(let t=0;t<9;t++)this.Qt.p4(this.qt[t]);this.Qt.Jc(this.Jt.data,this.Jt.ft,0),this.Jt.random=new g.A(h);for(let t=0;t<4;t++)h[t]+=50;this.ei=new g.A(h),this.stream?.write(this.Qt.data,this.Qt.ft);const e=await this.stream.read();if(1===e)return await(0,Z.il)(2e3),void await this.Yc(t,i,s);if(2===e||18===e){this.Jr=18===e,k.A.Qc(),this.gc=!0,this.Jt.ft=0,this.in.ft=0,this.ni=-1,this.ri=-1,this.oi=-1,this.li=-1,this.packetSize=0,this.ii=0,this.hi=0,this.si=0,this.Rh=0,this.Ih=0,this.dh=!1,this.tf=0;for(let t=0;t<100;t++)this.he[t]=null;this._e=0,this.ke=0,this.sn=0,this.Io=0,this.cn=(100*Math.random()|0)-50,this.fn=(110*Math.random()|0)-55,this.un=(80*Math.random()|0)-40,this.Ln=(120*Math.random()|0)-60,this.Rn=(30*Math.random()|0)-20,this.qn=(20*Math.random()|0)-10&2047,this.kn=-1,this.nn=0,this.rn=0,this.Er=0,this.Rr=0;for(let t=0;t<this.Yt;t++)this._r[t]=null,this.vr[t]=null;for(let t=0;t<8192;t++)this.Lr[t]=null;this.Vr=this._r[this.Vt]=new W.A,this.Mr.clear(),this.kr.clear(),this.Nr.clear();for(let t=0;t<G.A.Xn;t++)for(let i=0;i<G.A.nr;i++)for(let s=0;s<G.A.nr;s++)this.Pr[t][i][s]=null;this.Ur=new S.A,this.eo=0,this.se=-1,this.gh=-1,this.nh=-1,this.Eh=-1,this.Re=!1,this.Yh=3,this.ie=!1,this.dh=!1,this.qh=!1,this.Hh=null,this.Xr=0,this.Wh=-1,this.Qr=!0,this.if();for(let t=0;t<5;t++)this.ho[t]=0;return(0,j.Go)(),$.K.kt=0,$.K.xt=0,$.K.Dt=0,$.K.Nt=0,$.K.Pt=0,$.K.Ft=0,$.K.Ut=0,$.K.Bt=0,$.K.Gt=0,void this.sf()}if(3===e)return this.Ti='',void(this.Oi='Invalid username or password.');if(4===e)return this.Ti='Your account has been disabled.',void(this.Oi='Please check your message-centre for details.');if(5===e)return this.Ti='Your account is already logged in.',void(this.Oi='Try again in 60 secs...');if(6===e)return this.Ti='RuneScape has been updated!',void(this.Oi='Please reload this page.');if(7===e)return this.Ti='This world is full.',void(this.Oi='Please use a different world.');if(8===e)return this.Ti='Unable to connect.',void(this.Oi='Login server offline.');if(9===e)return this.Ti='Login limit exceeded.',void(this.Oi='Too many connections from your address.');if(10===e)return this.Ti='Unable to connect.',void(this.Oi='Bad session id.');if(11===e)return this.Oi='Login server rejected session.',void(this.Oi='Please try again.');if(12===e)return this.Ti='You need a members account to login to this world.',void(this.Oi='Please subscribe, or use a different world.');if(13===e)return this.Ti='Could not complete login.',void(this.Oi='Please try using a different world.');if(14===e)return this.Ti='The server is being updated.',void(this.Oi='Please wait 1 minute and try again.');if(15===e)return this.gc=!0,this.Jt.ft=0,this.in.ft=0,this.ni=-1,this.ri=-1,this.oi=-1,this.li=-1,this.packetSize=0,this.ii=0,this.hi=0,this.Ih=0,void(this.dh=!1);if(16===e)return this.Ti='Login attempts exceeded.',void(this.Oi='Please wait 1 minute and try again.');17===e&&(this.Ti='You are standing in a members-only area.',this.Oi='To play on this world move to a free area first')}catch(t){console.log(t),this.Ti='',this.Oi='Error connecting to server.'}};Cc=async()=>{if(null!==this._r){this.hi>1&&this.hi--,this.si>0&&this.si--;for(let t=0;t<5&&await this.read();t++);if(this.gc){for(let t=0;t<this.Io;t++)if(this.To[t]<=0){try{const i=L.A.hf(this.Eo[t],this.Co[t]);if(!i)throw new Error;Date.now()+(i.ft/22|0)>this.Ro+(this.Lo/22|0)&&(this.Lo=i.ft,this.Ro=Date.now(),this.bo=this.Eo[t],this.vo=this.Co[t],await(0,j.ef)(i.data.slice(0,i.ft),this.Oo))}catch(t){console.error(t)}this.Io--;for(let i=t;i<this.Io;i++)this.Eo[i]=this.Eo[i+1],this.Co[i]=this.Co[i+1],this.To[i]=this.To[i+1];t--}else this.To[t]--;this.So>0&&(this.So-=20,this.So<0&&(this.So=0),0===this.So&&this.Mo&&!$.K.At&&this.ko&&await this.hl(this.ko,this.xo,this.Do));const t=k.A.flush();if(t&&(this.Jt.nf(O.A.rf),this.Jt.p2(t.ft),this.Jt.Jc(t.data,t.ft,0),t.release()),this.ii++,this.ii>750&&await this.lf(),this.af(),this.cf(),this.ff(),this.uf(),(1===this.df[1]||1===this.df[2]||1===this.df[3]||1===this.df[4])&&this.jn++>5&&(this.jn=0,this.Jt.nf(O.A.wf),this.Jt.p2(this.Zn),this.Jt.p2(this.qn),this.Jt.p1(this.Ln),this.Jt.p1(this.Rn)),this.hn++,0!==this.oh&&(this.lh+=20,this.lh>=400&&(this.oh=0)),0!==this.Oe&&(this.Le++,this.Le>=15&&(2===this.Oe&&(this.ih=!0),3===this.Oe&&(this.sh=!0),this.Oe=0)),0!==this.ye&&(this.me++,(this.Kl>this.Ae+5||this.Kl<this.Ae-5||this.Xl>this.pe+5||this.Xl<this.pe-5)&&(this.Ie=!0),0===this.yf)){if(2===this.ye&&(this.ih=!0),3===this.ye&&(this.sh=!0),this.ye=0,this.Ie&&this.me>=5){if(this.He=-1,this.Af(),this.He===this.de&&this.We!==this.we){const t=c.A.Wo[this.de];if(t.Gl){const i=t.Gl[this.We];t.Gl[this.We]=t.Gl[this.we],t.Gl[this.we]=i}if(t.Hl){const i=t.Hl[this.We];t.Hl[this.We]=t.Hl[this.we],t.Hl[this.we]=i}this.Jt.nf(O.A.pf),this.Jt.p2(this.de),this.Jt.p2(this.we),this.Jt.p2(this.We)}}else(1===this.Pe||this.mf(this.Ih-1))&&this.Ih>2?this.If():this.Ih>0&&await this._f(this.Ih-1);this.Le=10,this.Gc=0}if($.K.Lt++,$.K.Lt>127&&($.K.Lt=0,this.Jt.nf(O.A.Ef),this.Jt.p3(4991788)),-1!==x.A.gf&&this.Vr){const t=x.A.gf,i=x.A.Cf,s=this.Tf(this.Vr.Of[0],this.Vr.bf[0],t,i,0,0,0,0,0,0,!0);x.A.gf=-1,s&&(this.ah=this.Hc,this.fh=this.Wc,this.oh=1,this.lh=0)}1===this.Gc&&this.Hh&&(this.Hh=null,this.sh=!0,this.Gc=0),await this.vf(),this.Lf(),this.Rf(),this.Sf(),1!==this.yf&&1!==this.Gc||this.rh++,2===this.sn&&($.K.Ct?this.Mf():this.kf()),2===this.sn&&this.ln&&this.xf();for(let t=0;t<5;t++)this.An[t]++;if(await this.Df(),this.tf++,this.tf>4500&&(this.si=250,this.tf-=500,this.Jt.nf(O.A.Nf)),this.an++,this.an>500){this.an=0;const t=8*Math.random()|0;1&~t||(this.cn+=this.dn),2&~t||(this.fn+=this.wn),4&~t||(this.un+=this.yn)}if(this.cn<-50&&(this.dn=2),this.cn>50&&(this.dn=-2),this.fn<-55&&(this.wn=2),this.fn>55&&(this.wn=-2),this.un<-40&&(this.yn=1),this.un>40&&(this.yn=-1),this.vn++,this.vn>500){this.vn=0;const t=8*Math.random()|0;1&~t||(this.Ln+=this.Mn),2&~t||(this.Rn+=this.Sn)}this.Ln<-60&&(this.Mn=2),this.Ln>60&&(this.Mn=-2),this.Rn<-20&&(this.Sn=1),this.Rn>10&&(this.Sn=-1),$.K.Rt++,$.K.Rt>110&&($.K.Rt=0,this.Jt.nf(O.A.Pf),this.Jt.p4(0)),this.Zr++,this.Zr>50&&this.Jt.nf(O.A.Ff);try{this.stream&&this.Jt.ft>0&&(this.stream.write(this.Jt.data,this.Jt.ft),this.Jt.ft=0,this.Zr=0)}catch(t){console.log(t),await this.lf()}}}};Oc=()=>{if(null===this._r)return;this.ci&&(this.ci=!1,this.ts?.draw(0,11),this.ss?.draw(0,375),this.hs?.draw(729,5),this.es?.draw(752,231),this.ns?.draw(0,0),this.rs?.draw(561,0),this.os?.draw(520,11),this.ls?.draw(520,231),this.cs?.draw(501,375),this.fs?.draw(0,345),this.ih=!0,this.sh=!0,this.hh=!0,this.eh=!0,2!==this.sn&&(this.Zi?.draw(8,11),this.ji?.draw(561,5))),2===this.sn&&this.Uf(),this.dh&&1===this.wh&&(this.ih=!0);let t=!1;if(-1!==this.Eh&&(t=this.Il(this.Eh,this.hn),t&&(this.ih=!0)),2===this.Oe&&(this.ih=!0),2===this.ye&&(this.ih=!0),this.ih&&(this.Bf(),this.ih=!1),-1===this.gh){this.Ch.Pl=this.Th-this.Oh-77,this.Kl>453&&this.Kl<565&&this.Xl>350&&this.Gf(this.Kl-22,this.Xl-375,this.Th,77,!1,463,0,this.Ch);let t=this.Th-this.Ch.Pl-77;t<0&&(t=0),t>this.Th-77&&(t=this.Th-77),this.Oh!==t&&(this.Oh=t,this.sh=!0)}-1!==this.gh&&(t=this.Il(this.gh,this.hn),t&&(this.sh=!0)),3===this.Oe&&(this.sh=!0),3===this.ye&&(this.sh=!0),this.Hh&&(this.sh=!0),this.dh&&2===this.wh&&(this.sh=!0),this.sh&&(this.Hf(),this.sh=!1),2===this.sn&&(this.Wf(),this.ji?.draw(561,5)),-1!==this.Wh&&(this.hh=!0),this.hh&&(-1!==this.Wh&&this.Wh===this.Yh&&(this.Wh=-1,this.Jt.nf(O.A.Yf),this.Jt.p1(this.Yh)),this.hh=!1,this.Qi?.bind(),this.Os?.draw(0,0),-1===this.Eh&&(-1!==this.Vh[this.Yh]&&(0===this.Yh?this.Ws?.draw(29,30):1===this.Yh?this.Ys?.draw(59,29):2===this.Yh?this.Ys?.draw(87,29):3===this.Yh?this.Vs?.draw(115,29):4===this.Yh?this.Xs?.draw(156,29):5===this.Yh?this.Xs?.draw(184,29):6===this.Yh&&this.Ks?.draw(212,30)),-1!==this.Vh[0]&&(0!==this.Wh||this.Zt%20<10)&&this.bs[0]?.draw(35,34),-1!==this.Vh[1]&&(1!==this.Wh||this.Zt%20<10)&&this.bs[1]?.draw(59,32),-1!==this.Vh[2]&&(2!==this.Wh||this.Zt%20<10)&&this.bs[2]?.draw(86,32),-1!==this.Vh[3]&&(3!==this.Wh||this.Zt%20<10)&&this.bs[3]?.draw(121,33),-1!==this.Vh[4]&&(4!==this.Wh||this.Zt%20<10)&&this.bs[4]?.draw(157,34),-1!==this.Vh[5]&&(5!==this.Wh||this.Zt%20<10)&&this.bs[5]?.draw(185,32),-1!==this.Vh[6]&&(6!==this.Wh||this.Zt%20<10)&&this.bs[6]?.draw(212,34)),this.Qi?.draw(520,165),this.Ji?.bind(),this.Ts?.draw(0,0),-1===this.Eh&&(-1!==this.Vh[this.Yh]&&(7===this.Yh?this.zs?.draw(49,0):8===this.Yh?this.js?.draw(81,0):9===this.Yh?this.js?.draw(108,0):10===this.Yh?this.Zs?.draw(136,1):11===this.Yh?this.$s?.draw(178,0):12===this.Yh?this.$s?.draw(205,0):13===this.Yh&&this.qs?.draw(233,0)),-1!==this.Vh[8]&&(8!==this.Wh||this.Zt%20<10)&&this.bs[7]?.draw(80,2),-1!==this.Vh[9]&&(9!==this.Wh||this.Zt%20<10)&&this.bs[8]?.draw(107,3),-1!==this.Vh[10]&&(10!==this.Wh||this.Zt%20<10)&&this.bs[9]?.draw(142,4),-1!==this.Vh[11]&&(11!==this.Wh||this.Zt%20<10)&&this.bs[10]?.draw(179,2),-1!==this.Vh[12]&&(12!==this.Wh||this.Zt%20<10)&&this.bs[11]?.draw(206,2),-1!==this.Vh[13]&&(13!==this.Wh||this.Zt%20<10)&&this.bs[12]?.draw(230,2)),this.Ji?.draw(501,492),this.Zi?.bind()),this.eh&&(this.eh=!1,this.$i?.bind(),this.Cs?.draw(0,0),this.vi?.ca(57,33,'Public chat',m.A.kl,!0),0===this.Kh&&this.vi?.ca(57,46,'On',m.A.GREEN,!0),1===this.Kh&&this.vi?.ca(57,46,'Friends',m.A.Jl,!0),2===this.Kh&&this.vi?.ca(57,46,'Off',m.A.RED,!0),3===this.Kh&&this.vi?.ca(57,46,'Hide',m.A.Uc,!0),this.vi?.ca(186,33,'Private chat',m.A.kl,!0),0===this.Xh&&this.vi?.ca(186,46,'On',m.A.GREEN,!0),1===this.Xh&&this.vi?.ca(186,46,'Friends',m.A.Jl,!0),2===this.Xh&&this.vi?.ca(186,46,'Off',m.A.RED,!0),this.vi?.ca(326,33,'Trade/duel',m.A.kl,!0),0===this.zh&&this.vi?.ca(326,46,'On',m.A.GREEN,!0),1===this.zh&&this.vi?.ca(326,46,'Friends',m.A.Jl,!0),2===this.zh&&this.vi?.ca(326,46,'Off',m.A.RED,!0),this.vi?.ca(462,38,'Report abuse',m.A.kl,!0),this.$i?.draw(0,471),this.Zi?.bind()),this.hn=0};Uf=()=>{if(this.en++,this.Vf(),this.Kf(),this.Xf(),this.zf(),this.jf(),!this.ln){let t=this.Zn;(this.bn/256|0)>t&&(t=this.bn/256|0),this.pn[4]&&this.In[4]+128>t&&(t=this.In[4]+128);const i=this.qn+this.un&2047;if(this.Vr&&this.Zf(this.Qn,this.qf(this.zn,this.Vr.x,this.Vr.z)-50,this.tr,i,t,3*t+600),$.K.vt++,$.K.vt>1802){$.K.vt=0,this.Jt.nf(O.A.$f),this.Jt.p1(0);const t=this.Jt.ft;this.Jt.p2(29711),this.Jt.p1(70),this.Jt.p1(256*Math.random()|0),this.Jt.p1(242),this.Jt.p1(186),this.Jt.p1(39),this.Jt.p1(61),2*Math.random()|0||this.Jt.p1(13),2*Math.random()|0||this.Jt.p2(57856),this.Jt.p2(65536*Math.random()|0),this.Jt.Jf(this.Jt.ft-t)}}let t;t=this.ln?this.Qf():this.tu();const i=this.En,s=this.gn,h=this.Cn,e=this.Tn,n=this.On;let r;for(let t=0;t<5;t++)this.pn[t]&&(r=Math.random()*(2*this.mn[t]+1)-this.mn[t]+Math.sin(this.An[t]*(this._n[t]/100))*this.In[t]|0,0===t&&(this.En+=r),1===t&&(this.gn+=r),2===t&&(this.Cn+=r),3===t&&(this.On=this.On+r&2047),4===t&&(this.Tn+=r,this.Tn<128&&(this.Tn=128),this.Tn>383&&(this.Tn=383)));r=d.A.iu,p.A.su=!0,p.A.hu=0,p.A.Kl=this.Kl-8,p.A.Xl=this.Xl-11,u.A.clear(),this.tn?.draw(this.En,this.gn,this.Cn,t,this.On,this.Tn,this.Zt),this.tn?.eu(),this.nu(),this.ru(),$.K.Et&&this.ou(),this.lu(r),this.au(),this.Zi?.draw(8,11),this.En=i,this.gn=s,this.Cn=h,this.Tn=e,this.On=n};cu=()=>{e.A.fu?.clear(),e.A.uu?.clear(),r.A.Yo?.clear(),n.A.Yo?.clear(),n.A.du?.clear(),W.A.Yo?.clear(),l.A.Yo?.clear()};wu=(t,i)=>{this.yu(t.x,i,t.z)};yu=(t,i,s)=>{if(t<128||s<128||t>13056||s>13056)return this.rr=-1,void(this.lr=-1);const h=this.qf(this.zn,t,s)-i;this.Au(t,h,s)};Au=(t,i,s)=>{let h=t-this.En,e=i-this.gn,n=s-this.Cn;const r=d.A.sin[this.Tn],o=d.A.cos[this.Tn],l=d.A.sin[this.On],a=d.A.cos[this.On];let c=n*l+h*a>>16;n=n*a-h*l>>16,h=c,c=e*o-n*r>>16,n=e*r+n*o>>16,e=c,n>=50?(this.rr=d.A.pa+((h<<9)/n|0),this.lr=d.A.ma+((e<<9)/n|0)):(this.rr=-1,this.lr=-1)};nu=()=>{this.no=0;for(let t=-1;t<this.Er+this.Rr;t++){let i=null;if(i=-1===t?this.Vr:t<this.Er?this._r[this.gr[t]]:this.Lr[this.Sr[t-this.Er]],i&&i.isVisible()){if(t<this.Er){let s=30;const h=i;if(0!==h.pu&&(this.wu(i,i.height+15),this.rr>-1))for(let t=0;t<8;t++)h.pu&1<<t&&(this.xs[t]?.draw(this.rr-12,this.lr-s),s-=25);t>=0&&10===this.Rh&&this.xh===this.gr[t]&&(this.wu(i,i.height+15),this.rr>-1&&this.xs[7]?.draw(this.rr-12,this.lr-s))}else 1===this.Rh&&this.Sh===this.Sr[t-this.Er]&&this.Zt%20<10&&(this.wu(i,i.height+15),this.rr>-1&&this.xs[2]?.draw(this.rr-12,this.lr-28));if(i.mu&&(t>=this.Er||0===this.Kh||3===this.Kh||1===this.Kh&&this.Iu(i.name))&&(this.wu(i,i.height),this.rr>-1&&this.no<$.K.ro&&this.Li&&(this.co[this.no]=this.Li._u(i.mu)/2|0,this.ao[this.no]=this.Li.height,this.oo[this.no]=this.rr,this.lo[this.no]=this.lr,this.fo[this.no]=i.Eu,this.uo[this.no]=i.gu,this.do[this.no]=i.Cu,this.wo[this.no++]=i.mu,0===this.le&&1===i.gu&&(this.ao[this.no]+=10,this.lo[this.no]+=5),0===this.le&&2===i.gu&&(this.co[this.no]=60))),i.Tu>this.Zt+100&&(this.wu(i,i.height+15),this.rr>-1)){let t=30*i.Ou/i.bu|0;t>30&&(t=30),u.A.fillRect(this.rr-15,this.lr-3,t,5,m.A.GREEN),u.A.fillRect(this.rr-15+t,this.lr-3,30-t,5,m.A.RED)}if(i.Tu>this.Zt+330&&(this.wu(i,i.height/2|0),this.rr>-1&&(this.ks[i.vu]?.draw(this.rr-12,this.lr-12),this.bi?.Lc(this.rr,this.lr+4,i.Lu.toString(),m.A.$l),this.bi?.Lc(this.rr-1,this.lr+3,i.Lu.toString(),m.A.kl))),$.K.Et){if(i.pathLength>0||i.Ru>=this.Zt||i.Su>this.Zt){const t=64*i.size;this.Mu(128*i.Of[0]+t,128*i.bf[0]+t,this.zn,i.size,65535,!1)}this.Mu(i.x,i.z,this.zn,i.size,6710886,!1);let s=0;if(this.wu(i,i.height+30),t<this.Er){const t=i;if(this.bi?.Lc(this.rr,this.lr+s,t.name,m.A.kl),s-=15,-1!==t.ku&&this.Zt-t.xu<30){if((t.ku&W.A.Du)===W.A.Du&&(this.bi?.Lc(this.rr,this.lr+s,'Appearance Update',m.A.kl),s-=15),(t.ku&W.A.Nu)===W.A.Nu&&(this.bi?.Lc(this.rr,this.lr+s,'Play Seq: '+t.Pu,m.A.kl),s-=15),(t.ku&W.A.Fu)===W.A.Fu){let i=t.Uu;i>32767&&(i-=32768),this.bi?.Lc(this.rr,this.lr+s,'Face Entity: '+i,m.A.kl),s-=15}(t.ku&W.A.Bu)===W.A.Bu&&(this.bi?.Lc(this.rr,this.lr+s,'Say',m.A.kl),s-=15),(t.ku&W.A.Gu)===W.A.Gu&&(this.bi?.Lc(this.rr,this.lr+s,'Hit: Type '+t.vu+' Amount '+t.Lu+' HP '+t.Ou+'/'+t.bu,m.A.kl),s-=15),(t.ku&W.A.Hu)===W.A.Hu&&(this.bi?.Lc(this.rr,this.lr+s,'Face Coord: '+t.Wu/2+' '+t.Yu/2,m.A.kl),s-=15),(t.ku&W.A.Vu)===W.A.Vu&&(this.bi?.Lc(this.rr,this.lr+s,'Chat',m.A.kl),s-=15),(t.ku&W.A.Ku)===W.A.Ku&&(this.bi?.Lc(this.rr,this.lr+s,'Play Spotanim: '+t.Xu,m.A.kl),s-=15),(t.ku&W.A.zu)===W.A.zu&&(this.bi?.Lc(this.rr,this.lr+s,'Exact Move',m.A.kl),s-=15)}}else{const t=i;let s=0;if(this.wu(i,i.height+30),this.bi?.Lc(this.rr,this.lr+s,t.type?.name??null,m.A.kl),s-=15,-1!==t.ku&&this.Zt-t.xu<30){if((t.ku&Y.A.Nu)===Y.A.Nu&&(this.bi?.Lc(this.rr,this.lr+s,'Play Seq: '+t.Pu,m.A.kl),s-=15),(t.ku&Y.A.Fu)===Y.A.Fu){let i=t.Uu;i>32767&&(i-=32768),this.bi?.Lc(this.rr,this.lr+s,'Face Entity: '+i,m.A.kl),s-=15}(t.ku&Y.A.Bu)===Y.A.Bu&&(this.bi?.Lc(this.rr,this.lr+s,'Say',m.A.kl),s-=15),(t.ku&Y.A.Gu)===Y.A.Gu&&(this.bi?.Lc(this.rr,this.lr+s,'Hit: Type '+t.vu+' Amount '+t.Lu+' HP '+t.Ou+'/'+t.bu,m.A.kl),s-=15),(t.ku&Y.A.ju)===Y.A.ju&&(this.bi?.Lc(this.rr,this.lr+s,'Change Type: '+t.type?.id??null,m.A.kl),s-=15),(t.ku&Y.A.Ku)===Y.A.Ku&&(this.bi?.Lc(this.rr,this.lr+s,'Play Spotanim: '+t.Xu,m.A.kl),s-=15),(t.ku&Y.A.Hu)===Y.A.Hu&&(this.bi?.Lc(this.rr,this.lr+s,'Face Coord: '+t.Wu/2+' '+t.Yu/2,m.A.kl),s-=15)}}}}}if($.K.Et)for(let t=0;t<this.Po.length;t++){const i=this.Po[t];!i||i.level!==this.zn||i.x<0||i.z<0||i.x>=104||i.z>=104||this.Mu(128*i.x+64,128*i.z+64,i.level,1,16776960,!1)}for(let t=0;t<this.no;t++){const i=this.oo[t];let s=this.lo[t];const h=this.co[t],e=this.ao[t];let n=!0;for(;n;){n=!1;for(let r=0;r<t;r++)s+2>this.lo[r]-this.ao[r]&&s-e<this.lo[r]+2&&i-h<this.oo[r]+this.co[r]&&i+h>this.oo[r]-this.co[r]&&this.lo[r]-this.ao[r]<s&&(s=this.lo[r]-this.ao[r],n=!0)}this.rr=this.oo[t],this.lr=this.lo[t]=s;const r=this.wo[t];if(0===this.le){let i=m.A.Jl;if(this.fo[t]<6&&(i=m.A.Zu[this.fo[t]]),6===this.fo[t]&&(i=this.en%20<10?m.A.RED:m.A.Jl),7===this.fo[t]&&(i=this.en%20<10?m.A.BLUE:m.A.Uc),8===this.fo[t]&&(i=this.en%20<10?45056:8454016),9===this.fo[t]){const s=150-this.do[t];s<50?i=1280*s+m.A.RED:s<100?i=m.A.Jl-327680*(s-50):s<150&&(i=5*(s-100)+m.A.GREEN)}if(10===this.fo[t]){const s=150-this.do[t];s<50?i=5*s+m.A.RED:s<100?i=m.A.Bc-327680*(s-50):s<150&&(i=327680*(s-100)+m.A.BLUE-5*(s-100))}if(11===this.fo[t]){const s=150-this.do[t];s<50?i=m.A.kl-327685*s:s<100?i=327685*(s-50)+m.A.GREEN:s<150&&(i=m.A.kl-327680*(s-100))}if(0===this.uo[t]&&(this.Li?.Lc(this.rr,this.lr+1,r,m.A.$l),this.Li?.Lc(this.rr,this.lr,r,i)),1===this.uo[t]&&(this.Li?.qu(this.rr,this.lr+1,r,m.A.$l,this.en),this.Li?.qu(this.rr,this.lr,r,i,this.en)),2===this.uo[t]){const s=this.Li?._u(r)??0,h=(150-this.do[t])*(s+100)/150;u.A.Ll(334,this.rr+50,0,this.rr-50),this.Li?.Zl(this.rr+50-h,this.lr+1,r,m.A.$l),this.Li?.Zl(this.rr+50-h,this.lr,r,i),u.A.$u()}}else this.Li?.Lc(this.rr,this.lr+1,r,m.A.$l),this.Li?.Lc(this.rr,this.lr,r,m.A.Jl)}};ru=()=>{2===this.Rh&&this.xs[2]&&(this.yu((this.Dh-this.Fn<<7)+this.Mh,2*this.Ph,(this.Nh-this.Un<<7)+this.kh),this.rr>-1&&this.Zt%20<10&&this.xs[2].draw(this.rr-12,this.lr-28))};ou=()=>{const t=507;let i=13;this.Uo?this.bi?.Ju(t,i,'tock',m.A.Jl,!0):this.Li?.Ju(t,i,'tick',m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,`Fps: ${this.Qu}, ${this.td} ms`,m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,`Draw: ${this.ms.toFixed(1)}, Avg: ${this.sd.toFixed(1)}, Slow: ${this.hd.toFixed(1)} ms`,m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,`Occluders: ${x.A.ed[x.A.nd]} Active: ${x.A.rd}`,m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,'Local Pos: '+(this.Vr?.x??-1)+', '+(this.Vr?.z??-1)+', '+(this.Vr?.y??-1),m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,'Camera Pos: '+this.En+', '+this.Cn+', '+this.gn,m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,'Camera Angle: '+this.On+', '+this.Tn,m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,'Cutscene Source: '+this.yr+', '+this.Ar+' '+this.pr+'; '+this.mr+', '+this.Ir,m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,'Cutscene Destination: '+this.ar+', '+this.cr+' '+this.ur+'; '+this.dr+', '+this.wr,m.A.Jl,!0),$.K.Ct&&(i+=13,this.bi?.Ju(t,i,'Instructions:',m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,'- Arrows to move Camera',m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,'- Shift to control Source or Dest',m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,'- Alt to control Height',m.A.Jl,!0),i+=13,this.bi?.Ju(t,i,'- Ctrl to control Modifier',m.A.Jl,!0))};Mu=(t,i,s,h,e,n)=>{const r=this.qf(s,t,i),o=64*h;this.Au(t-o,r,i-o);const l=this.rr,a=this.lr;this.Au(t+o,r,i-o);const c=this.rr,f=this.lr;this.Au(t-o,r,i+o);const d=this.rr,w=this.lr;this.Au(t+o,r,i+o);const y=this.rr,A=this.lr;-1!==l&&-1!==c&&-1!==d&&-1!==y&&(n&&(u.A.od(l,a,y,A,(16711422&e)>>1),u.A.od(c,f,d,w,(16711422&e)>>1)),u.A.od(l,a,c,f,e),u.A.od(l,a,d,w,e),u.A.od(c,f,y,A,e),u.A.od(d,w,y,A,e))};Mf(){const t=1==this.df[5]?2:1;1==this.df[6]?(1==this.df[1]?(this.ar-=t,this.ar<1&&(this.ar=1)):1==this.df[2]&&(this.ar+=t,this.ar>102&&(this.ar=102)),1==this.df[3]?1==this.df[7]?this.ur+=2*t:(this.cr+=1,this.cr>102&&(this.cr=102)):1==this.df[4]&&(1==this.df[7]?this.ur-=2*t:(this.cr-=1,this.cr<1&&(this.cr=1)))):(1==this.df[1]?(this.yr-=t,this.yr<1&&(this.yr=1)):1==this.df[2]&&(this.yr+=t,this.yr>102&&(this.yr=102)),1==this.df[3]?1==this.df[7]?this.pr+=2*t:(this.Ar+=t,this.Ar>102&&(this.Ar=102)):1==this.df[4]&&(1==this.df[7]?this.pr-=2*t:(this.Ar-=t,this.Ar<1&&(this.Ar=1)))),this.En=128*this.yr+64,this.Cn=128*this.Ar+64,this.gn=this.qf(this.zn,this.yr,this.Ar)-this.pr;const i=128*this.ar+64,s=128*this.cr+64,h=this.qf(this.zn,this.ar,this.cr)-this.ur,e=i-this.En,n=h-this.gn,r=s-this.Cn,o=0|Math.sqrt(e*e+r*r);this.Tn=325.949*Math.atan2(n,o)&2047,this.On=-325.949*Math.atan2(e,r)&2047,this.Tn<128&&(this.Tn=128),this.Tn>383&&(this.Tn=383)}au=()=>{if(this.ld(),1===this.oh&&this.Ns[this.lh/100|0]?.draw(this.ah-8-8,this.fh-8-11),2===this.oh&&this.Ns[4+(this.lh/100|0)]?.draw(this.ah-8-8,this.fh-8-11),-1!==this.nh&&(this.Il(this.nh,this.hn),this.vl(c.A.Wo[this.nh],0,0,0)),this.ad(),this.dh?0===this.wh&&this.fd():(this.Af(),this.ud()),1===this.Xr&&(this.qr>0||1===this.$r?this.xs[1]?.draw(472,258):this.xs[1]?.draw(472,296)),this.qr>0&&(this.xs[0]?.draw(472,296),this.vi?.Lc(484,329,'Level: '+this.qr,m.A.Jl)),1===this.$r&&(this.xs[6]?.draw(472,296),this.vi?.Lc(484,329,'Arena',m.A.Jl)),0!==this.hi){let t=this.hi/50|0;const i=t/60|0;t%=60,t<10?this.vi?.Zl(4,329,'System update in: '+i+':0'+t,m.A.Jl):this.vi?.Zl(4,329,'System update in: '+i+':'+t,m.A.Jl)}};ld=()=>{if(0===this.oe)return;const t=this.vi;let i=0;0!==this.hi&&(i=1);for(let s=0;s<100;s++){if(!this.he[s])continue;const h=this.messageType[s];let e;if((3===h||7===h)&&(7===h||0===this.Xh||1===this.Xh&&this.Iu(this.ee[s]))&&(e=329-13*i,t?.Zl(4,e,'From '+this.ee[s]+': '+this.he[s],m.A.$l),t?.Zl(4,e-1,'From '+this.ee[s]+': '+this.he[s],m.A.Uc),i++,i>=5))return;if(5===h&&this.Xh<2&&(e=329-13*i,t?.Zl(4,e,this.he[s],m.A.$l),t?.Zl(4,e-1,this.he[s],m.A.Uc),i++,i>=5))return;if(6===h&&this.Xh<2&&(e=329-13*i,t?.Zl(4,e,'To '+this.ee[s]+': '+this.he[s],m.A.$l),t?.Zl(4,e-1,'To '+this.ee[s]+': '+this.he[s],m.A.Uc),i++,i>=5))return}};ad=()=>{if(!this.Vr)return;const t=(this.Vr.x>>7)+this.Fn,i=(this.Vr.z>>7)+this.Un;if(this.qr=t>=2944&&t<3392&&i>=3520&&i<6400?1+((i-3520)/8|0):t>=2944&&t<3392&&i>=9920&&i<12800?1+((i-9920)/8|0):0,this.$r=0,t>=3328&&t<3392&&i>=3200&&i<3264){const s=63&t,h=63&i;(s>=4&&s<=29&&h>=44&&h<=58||s>=36&&s<=61&&h>=44&&h<=58||s>=4&&s<=29&&h>=25&&h<=39||s>=36&&s<=61&&h>=25&&h<=39||s>=4&&s<=29&&h>=6&&h<=20||s>=36&&s<=61&&h>=6&&h<=20)&&(this.$r=1)}0===this.$r&&t>=3328&&t<=3393&&i>=3203&&i<=3325&&(this.$r=2),this.uh=0,(t>=3053&&t<=3156&&i>=3056&&i<=3136||t>=3072&&t<=3118&&i>=9492&&i<=9535)&&(this.uh=1),1===this.uh&&t>=3139&&t<=3199&&i>=3008&&i<=3062&&(this.uh=0)};Bf=()=>{this.zi?.bind(),this.ds&&(d.A._c=this.ds),this._s?.draw(0,0),-1!==this.Eh?this.vl(c.A.Wo[this.Eh],0,0,0):-1!==this.Vh[this.Yh]&&this.vl(c.A.Wo[this.Vh[this.Yh]],0,0,0),this.dh&&1===this.wh&&this.fd(),this.zi?.draw(562,231),this.Zi?.bind(),this.ws&&(d.A._c=this.ws)};Hf=()=>{if(this.qi?.bind(),this.us&&(d.A._c=this.us),this.Es?.draw(0,0),this.qh)this.Li?.Lc(239,40,this.$h,m.A.$l),this.Li?.Lc(239,60,this.Jh+'*',m.A.dd);else if(this.ie)this.Li?.Lc(239,40,'Enter amount:',m.A.$l),this.Li?.Lc(239,60,this.te+'*',m.A.dd);else if(this.Hh)this.Li?.Lc(239,40,this.Hh,m.A.$l),this.Li?.Lc(239,60,'Click to continue',m.A.dd);else if(-1!==this.gh)this.vl(c.A.Wo[this.gh],0,0,0);else if(-1===this.se){let t=this.vi;0===$.K.gt&&(t=this.Ri);let i=0;u.A.Ll(0,0,463,77);for(let s=0;s<100;s++){const h=this.he[s];if(!h)continue;const e=this.messageType[s],n=this.Oh+70-14*i;0===e&&(n>0&&n<110&&t?.Zl(4,n,h,m.A.$l),i++),1===e&&(n>0&&n<110&&(t?.Zl(4,n,this.ee[s]+':',m.A.kl),t?.Zl(t._u(this.ee[s])+12,n,h,m.A.BLUE)),i++),2===e&&(0===this.Kh||1===this.Kh&&this.Iu(this.ee[s]))&&(n>0&&n<110&&(t?.Zl(4,n,this.ee[s]+':',m.A.$l),t?.Zl(t._u(this.ee[s])+12,n,h,m.A.BLUE)),i++),3!==e&&7!==e||0!==this.oe||!(7===e||0===this.Xh||1===this.Xh&&this.Iu(this.ee[s]))||(n>0&&n<110&&(t?.Zl(4,n,'From '+this.ee[s]+':',m.A.$l),t?.Zl(t._u('From '+this.ee[s])+12,n,h,m.A.wd)),i++),4===e&&(0===this.zh||1===this.zh&&this.Iu(this.ee[s]))&&(n>0&&n<110&&t?.Zl(4,n,this.ee[s]+' '+this.he[s],m.A.yd),i++),5===e&&0===this.oe&&this.Xh<2&&(n>0&&n<110&&t?.Zl(4,n,h,m.A.wd),i++),6===e&&0===this.oe&&this.Xh<2&&(n>0&&n<110&&(t?.Zl(4,n,'To '+this.ee[s]+':',m.A.$l),t?.Zl(t._u('To '+this.ee[s])+12,n,h,m.A.wd)),i++),8===e&&(0===this.zh||1===this.zh&&this.Iu(this.ee[s]))&&(n>0&&n<110&&t?.Zl(4,n,this.ee[s]+' '+this.he[s],m.A.Ad),i++)}u.A.$u(),this.Th=14*i+7,this.Th<78&&(this.Th=78),this.ul(463,0,this.Th-this.Oh-77,this.Th,77),0==$.K.gt?t?.Zl(3,90,this.ae+'*',m.A.$l):1==$.K.gt?t?.Zl(3,90,this.ae+'*',m.A.BLUE):(t?.Zl(4,90,M.A.Da(this.username)+':',m.A.$l),t?.Zl(t._u(this.username+': ')+6,90,this.ae+'*',m.A.BLUE)),u.A.pl(0,77,m.A.$l,479)}else this.vl(c.A.Wo[this.se],0,0,0);this.dh&&2===this.wh&&this.fd(),this.qi?.draw(22,375),this.Zi?.bind(),this.ws&&(d.A._c=this.ws)};Wf=()=>{if(this.ji?.bind(),!this.Vr)return;const t=this.qn+this.Ln&2047;let i=48+(this.Vr.x/32|0),s=464-(this.Vr.z/32|0);this.Ls?.pd(21,9,146,151,this.ps,this.Is,i,s,t,this.Rn+256),this.Rs?.pd(0,0,33,33,this.ys,this.As,25,25,this.qn,256);for(let t=0;t<this.$e;t++)i=4*this.Je[t]+2-(this.Vr.x/32|0),s=4*this.Qe[t]+2-(this.Vr.z/32|0),this.md(s,this.th[t],i);for(let t=0;t<G.A.nr;t++)for(let h=0;h<G.A.nr;h++){this.Pr[this.zn][t][h]&&(i=4*t+2-(this.Vr.x/32|0),s=4*h+2-(this.Vr.z/32|0),this.md(s,this.Ps,i))}for(let t=0;t<this.Rr;t++){const h=this.Lr[this.Sr[t]];h&&h.isVisible()&&h.type&&h.type.Id&&(i=(h.x/32|0)-(this.Vr.x/32|0),s=(h.z/32|0)-(this.Vr.z/32|0),this.md(s,this.Fs,i))}for(let t=0;t<this.Er;t++){const h=this._r[this.gr[t]];if(h&&h.isVisible()&&h.name){i=(h.x/32|0)-(this.Vr.x/32|0),s=(h.z/32|0)-(this.Vr.z/32|0);let t=!1;const e=M.A._d(h.name);for(let i=0;i<this.eo;i++)if(e===this.Ao[i]&&0!==this.po[i]){t=!0;break}t?this.md(s,this.Bs,i):this.md(s,this.Us,i)}}0!==this.nn&&(i=4*this.nn+2-(this.Vr.x/32|0),s=4*this.rn+2-(this.Vr.z/32|0),this.md(s,this.Ds,i)),u.A.fillRect(93,82,3,3,m.A.kl),this.Zi?.bind()};md=(t,i,s)=>{if(!i)return;const h=this.qn+this.Ln&2047,e=s*s+t*t;if(e>6400)return;let n=d.A.sin[h],r=d.A.cos[h];n=256*n/(this.Rn+256)|0,r=256*r/(this.Rn+256)|0;const o=t*n+s*r>>16,l=t*r-s*n>>16;e>2500&&this.gs?i.Ed(o+94-(i.jl/2|0),83-l-(i.gd/2|0),this.gs):i.draw(o+94-(i.jl/2|0),83-l-(i.gd/2|0))};Cd=t=>{if(!this.Ls)return;const i=this.Ls.mc,s=i.length;for(let t=0;t<s;t++)i[t]=0;for(let s=1;s<G.A.nr-1;s++){let h=512*(G.A.nr-1-s)*4+24628;for(let e=1;e<G.A.nr-1;e++)!this.sr||24&this.sr[t][e][s]||this.tn?.Td(t,e,s,i,h,512),t<3&&this.sr&&8&this.sr[t+1][e][s]&&this.tn?.Td(t+1,e,s,i,h,512),h+=4}const h=(238+(20*Math.random()|0)-10<<16)+(238+(20*Math.random()|0)-10<<8)+(20*Math.random()|0)+238-10,n=238+(20*Math.random()|0)-10<<16;this.Ls.bind();for(let i=1;i<G.A.nr-1;i++)for(let s=1;s<G.A.nr-1;s++)!this.sr||24&this.sr[t][s][i]||this.Od(s,i,t,h,n),t<3&&this.sr&&8&this.sr[t+1][s][i]&&this.Od(s,i,t+1,h,n);this.Zi?.bind(),this.$e=0;for(let t=0;t<G.A.nr;t++)for(let i=0;i<G.A.nr;i++){let s=this.tn?.bd(this.zn,t,i)??0;if(0===s)continue;s=s>>14&32767;const h=e.A.get(s).vd;if(h<0)continue;let n=t,r=i;if(22!==h&&29!==h&&34!==h&&36!==h&&46!==h&&47!==h&&48!==h){const s=G.A.nr,h=G.A.nr,e=this.Kn[this.zn];if(e){const o=e.flags;for(let e=0;e<10;e++){const e=4*Math.random()|0;0===e&&n>0&&n>t-3&&(o[G.A.index(n-1,r)]&H.A.Ld)===H.A.OPEN&&n--,1===e&&n<s-1&&n<t+3&&(o[G.A.index(n+1,r)]&H.A.Rd)===H.A.OPEN&&n++,2===e&&r>0&&r>i-3&&(o[G.A.index(n,r-1)]&H.A.Sd)===H.A.OPEN&&r--,3===e&&r<h-1&&r<i+3&&(o[G.A.index(n,r+1)]&H.A.Md)===H.A.OPEN&&r++}}}this.th[this.$e]=this.Ms[h],this.Je[this.$e]=n,this.Qe[this.$e]=r,this.$e++}};Od=(t,i,s,h,n)=>{if(!this.tn||!this.Ls)return;let r=this.tn.kd(s,t,i);if(0!==r){const o=this.tn.xd(s,t,i,r),l=o>>6&3,a=31&o;let c=h;r>0&&(c=n);const f=this.Ls.mc,u=4*t+512*(103-i)*4+24624,d=r>>14&32767,w=e.A.get(d);if(-1===w.Dd)a!==P.A.Nd.id&&a!==P.A.Pd.id||(l===F.A.Fd?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.A.Ud?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.A.Bd?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.A.Gd&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c)),a===P.A.Hd.id&&(l===F.A.Fd?f[u]=c:l===F.A.Ud?f[u+3]=c:l===F.A.Bd?f[u+3+1536]=c:l===F.A.Gd&&(f[u+1536]=c)),a===P.A.Pd.id&&(l===F.A.Gd?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.A.Fd?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.A.Ud?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.A.Bd&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c));else{const s=this.Ss[w.Dd];if(s){const h=(4*w.width-s.width)/2|0,e=(4*w.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.A.nr-i-w.length)+e+48)}}}if(r=this.tn.Wd(s,t,i),0!==r){const h=this.tn.xd(s,t,i,r),n=h>>6&3,o=31&h,l=r>>14&32767,a=e.A.get(l);if(-1!==a.Dd){const s=this.Ss[a.Dd];if(s){const h=(4*a.width-s.width)/2|0,e=(4*a.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.A.nr-i-a.length)+e+48)}}else if(o===P.A.Yd.id){let s=15658734;r>0&&(s=15597568);const h=this.Ls.mc,e=4*t+512*(G.A.nr-1-i)*4+24624;n===F.A.Fd||n===F.A.Bd?(h[e+1536]=s,h[e+1024+1]=s,h[e+512+2]=s,h[e+3]=s):(h[e]=s,h[e+512+1]=s,h[e+1024+2]=s,h[e+1536+3]=s)}}if(r=this.tn.bd(s,t,i),0!==r){const s=e.A.get(r>>14&32767);if(-1!==s.Dd){const h=this.Ss[s.Dd];if(h){const e=(4*s.width-h.width)/2|0,n=(4*s.length-h.height)/2|0;h.draw(4*t+48+e,4*(G.A.nr-i-s.length)+n+48)}}}};ud=()=>{if(this.Ih<2&&0===this._e&&0===this.ke)return;let t;t=1===this._e&&this.Ih<2?'Use '+this.Te+' with...':1===this.ke&&this.Ih<2?this.Ne+'...':this._h[this.Ih-1],this.Ih>2&&(t=t+'@whi@ / '+(this.Ih-2)+' more options'),this.Li?.Vd(4,15,t,m.A.kl,!0,this.Zt/1e3|0)};fd=()=>{const t=this.yh,i=this.Ah,s=this.ph,h=this.mh,e=m.A.Kd;u.A.fillRect(t,i,s,h,e),u.A.fillRect(t+1,i+1,s-2,16,m.A.$l),u.A.Ml(t+1,i+18,s-2,h-19,m.A.$l),this.Li?.Zl(t+3,i+14,'Choose Option',e);let n=this.Kl,r=this.Xl;0===this.wh&&(n-=8,r-=11),1===this.wh&&(n-=562,r-=231),2===this.wh&&(n-=22,r-=375);for(let h=0;h<this.Ih;h++){const e=i+15*(this.Ih-1-h)+31;let o=m.A.kl;n>t&&n<t+s&&r>e-13&&r<e+3&&(o=m.A.Jl),this.Li?.ua(t+3,e,this._h[h],o,!0)}};vf=async()=>{if(0!==this.ye)return;let t=this.Gc;if(1===this.ke&&this.Hc>=520&&this.Wc>=165&&this.Hc<=788&&this.Wc<=230&&(t=0),this.dh){if(1!==t){let t=this.Kl,i=this.Xl;0===this.wh?(t-=8,i-=11):1===this.wh?(t-=562,i-=231):2===this.wh&&(t-=22,i-=375),(t<this.yh-10||t>this.yh+this.ph+10||i<this.Ah-10||i>this.Ah+this.mh+10)&&(this.dh=!1,1===this.wh&&(this.ih=!0),2===this.wh&&(this.sh=!0))}if(1===t){const t=this.yh,i=this.Ah,s=this.ph;let h=this.Hc,e=this.Wc;0===this.wh?(h-=8,e-=11):1===this.wh?(h-=562,e-=231):2===this.wh&&(h-=22,e-=375);let n=-1;for(let r=0;r<this.Ih;r++){const o=i+15*(this.Ih-1-r)+31;h>t&&h<t+s&&e>o-13&&e<o+3&&(n=r)}-1!==n&&await this._f(n),this.dh=!1,1===this.wh?this.ih=!0:2===this.wh&&(this.sh=!0)}}else{if(1===t&&this.Ih>0){const t=this.Fe[this.Ih-1];if(602===t||596===t||22===t||892===t||415===t||405===t||38===t||422===t||478===t||347===t||188===t){const t=this.Be[this.Ih-1],i=this.Ge[this.Ih-1];if(c.A.Wo[i].draggable)return this.Ie=!1,this.me=0,this.de=i,this.we=t,this.ye=2,this.Ae=this.Hc,this.pe=this.Wc,c.A.Wo[i].Xd===this.nh&&(this.ye=1),void(c.A.Wo[i].Xd===this.gh&&(this.ye=3))}}if(1===t&&(1===this.Pe||this.mf(this.Ih-1))&&this.Ih>2&&(t=2),1===t&&this.Ih>0&&await this._f(this.Ih-1),2!==t||this.Ih<=0)return;this.If()}};Lf=()=>{if(1===this.Gc&&this.Vr){let t=this.Hc-21-561,i=this.Wc-9-5;if(t>=0&&i>=0&&t<146&&i<151){t-=73,i-=75;const s=this.qn+this.Ln&2047;let h=d.A.sin[s],e=d.A.cos[s];h=h*(this.Rn+256)>>8,e=e*(this.Rn+256)>>8;const n=i*h+t*e>>11,r=i*e-t*h>>11,o=this.Vr.x+n>>7,l=this.Vr.z-r>>7;this.Tf(this.Vr.Of[0],this.Vr.bf[0],o,l,1,0,0,0,0,0,!0)&&(this.Jt.p1(t),this.Jt.p1(i),this.Jt.p2(this.qn),this.Jt.p1(57),this.Jt.p1(this.Ln),this.Jt.p1(this.Rn),this.Jt.p1(89),this.Jt.p2(this.Vr.x),this.Jt.p2(this.Vr.z),this.Jt.p1(this.Yr),this.Jt.p1(63))}}};mf=t=>{if(t<0)return!1;let i=this.Fe[t];return i>=2e3&&(i-=2e3),406===i};_f=async t=>{if(t<0)return;this.ie&&(this.ie=!1,this.sh=!0);let i=this.Fe[t];const s=this.Ue[t],h=this.Be[t],r=this.Ge[t];if(i>=2e3&&(i-=2e3),903===i||363===i){let s=this._h[t];const h=s.indexOf('@whi@');if(-1!==h){s=s.substring(h+5).trim();const t=M.A.Da(M.A.Na(M.A._d(s)));let e=!1;for(let s=0;s<this.Er;s++){const h=this._r[this.gr[s]];if(h&&h.name&&h.name.toLowerCase()===t.toLowerCase()&&this.Vr){this.Tf(this.Vr.Of[0],this.Vr.bf[0],h.Of[0],h.bf[0],2,1,1,0,0,0,!1),903===i?this.Jt.nf(O.A.zd):363===i&&this.Jt.nf(O.A.jd),this.Jt.p2(this.gr[s]),e=!0;break}}e||this.Zd(0,'Unable to find '+t,'')}}else if(450===i&&this.qd(O.A.$d,h,r,s))this.Jt.p2(this.Ce),this.Jt.p2(this.Ee),this.Jt.p2(this.ge);else if(405===i||38===i||422===i||478===i||347===i)478===i?(3&h||$.K.Pt++,$.K.Pt>=90&&this.Jt.nf(O.A.Jd),this.Jt.nf(O.A.Qd)):347===i?this.Jt.nf(O.A.tw):422===i?this.Jt.nf(O.A.iw):405===i?($.K.Dt+=s,$.K.Dt>=97&&(this.Jt.nf(O.A.sw),this.Jt.p3(14953816)),this.Jt.nf(O.A.hw)):38===i&&this.Jt.nf(O.A.ew),this.Jt.p2(s),this.Jt.p2(h),this.Jt.p2(r),this.Le=0,this.ve=r,this.be=h,this.Oe=2,c.A.Wo[r].Xd===this.nh&&(this.Oe=1),c.A.Wo[r].Xd===this.gh&&(this.Oe=3);else if(728===i||542===i||6===i||963===i||245===i){const t=this.Lr[s];t&&this.Vr&&(this.Tf(this.Vr.Of[0],this.Vr.bf[0],t.Of[0],t.bf[0],2,1,1,0,0,0,!1),this.ah=this.Hc,this.fh=this.Wc,this.oh=2,this.lh=0,542===i?this.Jt.nf(O.A.nw):6===i?(3&s||$.K.xt++,$.K.xt>=124&&(this.Jt.nf(O.A.rw),this.Jt.p4(0)),this.Jt.nf(O.A.ow)):963===i?this.Jt.nf(O.A.lw):728===i?this.Jt.nf(O.A.aw):245===i&&(3&s||$.K.Nt++,$.K.Nt>=85&&(this.Jt.nf(O.A.cw),this.Jt.p2(39596)),this.Jt.nf(O.A.fw)),this.Jt.p2(s))}else if(217===i){if(this.Vr){this.Tf(this.Vr.Of[0],this.Vr.bf[0],h,r,2,0,0,0,0,0,!1)||this.Tf(this.Vr.Of[0],this.Vr.bf[0],h,r,2,1,1,0,0,0,!1),this.ah=this.Hc,this.fh=this.Wc,this.oh=2,this.lh=0,this.Jt.nf(O.A.uw),this.Jt.p2(h+this.Fn),this.Jt.p2(r+this.Un),this.Jt.p2(s),this.Jt.p2(this.Ce),this.Jt.p2(this.Ee),this.Jt.p2(this.ge)}}else if(1175===i){const t=s>>14&32767,i=e.A.get(t);let h;h=i.dw?i.dw:"It's a "+i.name+'.',this.Zd(0,h,'')}else if(285===i)this.qd(O.A.ww,h,r,s);else if(881===i)this.Jt.nf(O.A.yw),this.Jt.p2(s),this.Jt.p2(h),this.Jt.p2(r),this.Jt.p2(this.Ce),this.Jt.p2(this.Ee),this.Jt.p2(this.ge),this.Le=0,this.ve=r,this.be=h,this.Oe=2,c.A.Wo[r].Xd===this.nh&&(this.Oe=1),c.A.Wo[r].Xd===this.gh&&(this.Oe=3);else if(391===i)this.Jt.nf(O.A.Aw),this.Jt.p2(s),this.Jt.p2(h),this.Jt.p2(r),this.Jt.p2(this.xe),this.Le=0,this.ve=r,this.be=h,this.Oe=2,c.A.Wo[r].Xd===this.nh&&(this.Oe=1),c.A.Wo[r].Xd===this.gh&&(this.Oe=3);else if(660===i)this.dh?this.tn?.click(h-8,r-11):this.tn?.click(this.Hc-8,this.Wc-11);else{if(188===i)return this._e=1,this.Ee=h,this.ge=r,this.Ce=s,this.Te=n.A.get(s).name,void(this.ke=0);if(44===i)this.Re||(this.Jt.nf(O.A.pw),this.Jt.p2(r),this.Re=!0);else if(1773===i){const t=n.A.get(s);let i;i=r>=1e5?r+' x '+t.name:t.dw?t.dw:"It's a "+t.name+'.',this.Zd(0,i,'')}else if(900===i){const t=this.Lr[s];t&&this.Vr&&(this.Tf(this.Vr.Of[0],this.Vr.bf[0],t.Of[0],t.bf[0],2,1,1,0,0,0,!1),this.ah=this.Hc,this.fh=this.Wc,this.oh=2,this.lh=0,this.Jt.nf(O.A.mw),this.Jt.p2(s),this.Jt.p2(this.Ce),this.Jt.p2(this.Ee),this.Jt.p2(this.ge))}else if(1373===i||1544===i||151===i||1101===i){const t=this._r[s];t&&this.Vr&&(this.Tf(this.Vr.Of[0],this.Vr.bf[0],t.Of[0],t.bf[0],2,1,1,0,0,0,!1),this.ah=this.Hc,this.fh=this.Wc,this.oh=2,this.lh=0,1101===i?this.Jt.nf(O.A.jd):151===i?($.K.Bt++,$.K.Bt>=90&&(this.Jt.nf(O.A.Iw),this.Jt.p2(31114)),this.Jt.nf(O.A._w)):1373===i?this.Jt.nf(O.A.zd):1544===i&&this.Jt.nf(O.A.Ew),this.Jt.p2(s))}else if(265===i){const t=this.Lr[s];t&&this.Vr&&(this.Tf(this.Vr.Of[0],this.Vr.bf[0],t.Of[0],t.bf[0],2,1,1,0,0,0,!1),this.ah=this.Hc,this.fh=this.Wc,this.oh=2,this.lh=0,this.Jt.nf(O.A.gw),this.Jt.p2(s),this.Jt.p2(this.xe))}else if(679===i){const i=this._h[t],s=i.indexOf('@whi@');if(-1!==s){const t=M.A._d(i.substring(s+5).trim());let h=-1;for(let i=0;i<this.eo;i++)if(this.Ao[i]===t){h=i;break}-1!==h&&this.po[h]>0&&(this.sh=!0,this.ie=!1,this.qh=!0,this.Jh='',this.Qh=3,this.mo=this.Ao[h],this.$h='Enter message to send to '+this.yo[h])}}else if(55===i)this.qd(O.A.Cw,h,r,s)&&this.Jt.p2(this.xe);else if(224===i||993===i||99===i||746===i||877===i){if(this.Vr){this.Tf(this.Vr.Of[0],this.Vr.bf[0],h,r,2,0,0,0,0,0,!1)||this.Tf(this.Vr.Of[0],this.Vr.bf[0],h,r,2,1,1,0,0,0,!1),this.ah=this.Hc,this.fh=this.Wc,this.oh=2,this.lh=0,224===i?this.Jt.nf(O.A.Tw):746===i?this.Jt.nf(O.A.Ow):877===i?this.Jt.nf(O.A.bw):99===i?this.Jt.nf(O.A.Lw):993===i&&this.Jt.nf(O.A.Rw),this.Jt.p2(h+this.Fn),this.Jt.p2(r+this.Un),this.Jt.p2(s)}}else if(1607===i){const t=this.Lr[s];if(t&&t.type){let i;i=t.type.dw?t.type.dw:"It's a "+t.type.name+'.',this.Zd(0,i,'')}}else if(504===i)this.qd(O.A.Sw,h,r,s);else{if(930===i){const t=c.A.Wo[r];this.ke=1,this.xe=r,this.De=t.Mw,this._e=0;let i=t.kw;i&&-1!==i.indexOf(' ')&&(i=i.substring(0,i.indexOf(' ')));let s=t.kw;return s&&-1!==s.indexOf(' ')&&(s=s.substring(s.indexOf(' ')+1)),this.Ne=i+' '+t.action+' '+s,void(16===this.De&&(this.ih=!0,this.Yh=3,this.hh=!0))}if(951===i){const t=c.A.Wo[r];let i=!0;t.xl>0&&(i=this.xw(t)),i&&(this.Jt.nf(O.A.Dw),this.Jt.p2(r))}else if(602===i||596===i||22===i||892===i||415===i)22===i?this.Jt.nf(O.A.Nw):415===i?(3&r||$.K.Ut++,$.K.Ut>=55&&(this.Jt.nf(O.A.Pw),this.Jt.p4(0)),this.Jt.nf(O.A.Fw)):602===i?this.Jt.nf(O.A.Uw):892===i?(3&h||$.K.Gt++,$.K.Gt>=130&&(this.Jt.nf(O.A.Bw),this.Jt.p1(177)),this.Jt.nf(O.A.Gw)):596===i&&this.Jt.nf(O.A.Hw),this.Jt.p2(s),this.Jt.p2(h),this.Jt.p2(r),this.Le=0,this.ve=r,this.be=h,this.Oe=2,c.A.Wo[r].Xd===this.nh&&(this.Oe=1),c.A.Wo[r].Xd===this.gh&&(this.Oe=3);else if(581===i)3&s||$.K.kt++,$.K.kt>=99&&(this.Jt.nf(O.A.Ww),this.Jt.p4(0)),this.qd(O.A.Yw,h,r,s);else if(965===i){if(this.Vr){this.Tf(this.Vr.Of[0],this.Vr.bf[0],h,r,2,0,0,0,0,0,!1)||this.Tf(this.Vr.Of[0],this.Vr.bf[0],h,r,2,1,1,0,0,0,!1),this.ah=this.Hc,this.fh=this.Wc,this.oh=2,this.lh=0,this.Jt.nf(O.A.Vw),this.Jt.p2(h+this.Fn),this.Jt.p2(r+this.Un),this.Jt.p2(s),this.Jt.p2(this.xe)}}else if(1501===i)$.K.Ft+=this.Un,$.K.Ft>=92&&(this.Jt.nf(O.A.Kw),this.Jt.p4(0)),this.qd(O.A.Xw,h,r,s);else if(364===i)this.qd(O.A.zw,h,r,s);else if(1102===i){const t=n.A.get(s);let i;i=t.dw?t.dw:"It's a "+t.name+'.',this.Zd(0,i,'')}else if(960===i){this.Jt.nf(O.A.Dw),this.Jt.p2(r);const t=c.A.Wo[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];t.fl&&this.Se[i]!==t.fl[0]&&(this.Se[i]=t.fl[0],await this.jw(i),this.ih=!0)}}else if(34===i){const i=this._h[t],s=i.indexOf('@whi@');if(-1!==s){this.Zw(),this.Ve=i.substring(s+5).trim(),this.Ke=!1;for(let t=0;t<c.A.Wo.length;t++)if(c.A.Wo[t]&&c.A.Wo[t].xl===c.A.ja){this.Xe=this.nh=c.A.Wo[t].Xd;break}}}else if(947===i)this.Zw();else if(367===i){const t=this._r[s];t&&this.Vr&&(this.Tf(this.Vr.Of[0],this.Vr.bf[0],t.Of[0],t.bf[0],2,1,1,0,0,0,!1),this.ah=this.Hc,this.fh=this.Wc,this.oh=2,this.lh=0,this.Jt.nf(O.A.qw),this.Jt.p2(s),this.Jt.p2(this.Ce),this.Jt.p2(this.Ee),this.Jt.p2(this.ge))}else if(465===i){this.Jt.nf(O.A.Dw),this.Jt.p2(r);const t=c.A.Wo[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];this.Se[i]=1-this.Se[i],await this.jw(i),this.ih=!0}}else if(406===i||436===i||557===i||556===i){const s=this._h[t],h=s.indexOf('@whi@');if(-1!==h){const t=M.A._d(s.substring(h+5).trim());406===i?this.$w(t):436===i?this.Jw(t):557===i?this.Qw(t):556===i&&this.ty(t)}}else if(651===i){const t=this._r[s];t&&this.Vr&&(this.Tf(this.Vr.Of[0],this.Vr.bf[0],t.Of[0],t.bf[0],2,1,1,0,0,0,!1),this.ah=this.Hc,this.fh=this.Wc,this.oh=2,this.lh=0,this.Jt.nf(O.A.iy),this.Jt.p2(s),this.Jt.p2(this.xe))}}}this._e=0,this.ke=0};xw=t=>{const i=t.xl;if(i===c.A.sy&&(this.sh=!0,this.ie=!1,this.qh=!0,this.Jh='',this.Qh=1,this.$h='Enter name of friend to add to list'),i===c.A.hy&&(this.sh=!0,this.ie=!1,this.qh=!0,this.Jh='',this.Qh=2,this.$h='Enter name of friend to delete from list'),i===c.A.ey)return this.si=250,!0;if(i===c.A.ny&&(this.sh=!0,this.ie=!1,this.qh=!0,this.Jh='',this.Qh=4,this.$h='Enter name of player to add to list'),i===c.A.oy&&(this.sh=!0,this.ie=!1,this.qh=!0,this.Jh='',this.Qh=5,this.$h='Enter name of player to delete from list'),i>=c.A.ly&&i<=c.A.uy){const t=(i-300)/2|0,s=1&i;let h=this.so[t];if(-1!==h)for(;;)if(0===s&&(h--,h<0&&(h=o.A.count-1)),1===s&&(h++,h>=o.A.count&&(h=0)),!o.A.Wo[h].disable&&o.A.Wo[h].type===t+(this.Qr?0:7)){this.so[t]=h,this.io=!0;break}}if(i>=c.A.wy&&i<=c.A.yy){const t=(i-314)/2|0,s=1&i;let h=this.ho[t];0===s&&(h--,h<0&&(h=W.A.Ga[t].length-1)),1===s&&(h++,h>=W.A.Ga[t].length&&(h=0)),this.ho[t]=h,this.io=!0}if(i!==c.A.Xa||this.Qr||(this.Qr=!0,this.if()),i===c.A.za&&this.Qr&&(this.Qr=!1,this.if()),i===c.A.Ay){this.Jt.nf(O.A.py),this.Jt.p1(this.Qr?0:1);for(let t=0;t<7;t++)this.Jt.p1(this.so[t]);for(let t=0;t<5;t++)this.Jt.p1(this.ho[t]);return!0}return i===c.A.Za&&(this.Ke=!this.Ke),i>=c.A.my&&i<=c.A.Iy&&(this.Zw(),this.Ve.length>0&&(this.Jt.nf(O.A._y),this.Jt.Ey(M.A._d(this.Ve)),this.Jt.p1(i-601),this.Jt.p1(this.Ke?1:0))),!1};if=()=>{this.io=!0;for(let t=0;t<7;t++){this.so[t]=-1;for(let i=0;i<o.A.count;i++)if(!o.A.Wo[i].disable&&o.A.Wo[i].type===t+(this.Qr?0:7)){this.so[t]=i;break}}};qd=(t,i,s,h)=>{if(!this.Vr||!this.tn)return!1;const n=h>>14&32767,r=this.tn.xd(this.zn,i,s,h);if(-1===r)return!1;const o=31&r,l=r>>6&3;if(o===P.A.gy.id||o===P.A.Cy.id||o===P.A.Ty.id){const t=e.A.get(n);let h,r;l===F.A.Fd||l===F.A.Bd?(h=t.width,r=t.length):(h=t.length,r=t.width);let o=t.Oy;0!==l&&(o=(o<<l&15)+(o>>4-l)),this.Tf(this.Vr.Of[0],this.Vr.bf[0],i,s,2,h,r,0,0,o,!1)}else this.Tf(this.Vr.Of[0],this.Vr.bf[0],i,s,2,0,0,l,o+1,0,!1);return this.ah=this.Hc,this.fh=this.Wc,this.oh=2,this.lh=0,this.Jt.nf(t),this.Jt.p2(i+this.Fn),this.Jt.p2(s+this.Un),this.Jt.p2(n),!0};Rf=()=>{1===this.Gc&&(this.Hc>=549&&this.Hc<=583&&this.Wc>=195&&this.Wc<231&&-1!==this.Vh[0]?(this.ih=!0,this.Yh=0,this.hh=!0):this.Hc>=579&&this.Hc<=609&&this.Wc>=194&&this.Wc<231&&-1!==this.Vh[1]?(this.ih=!0,this.Yh=1,this.hh=!0):this.Hc>=607&&this.Hc<=637&&this.Wc>=194&&this.Wc<231&&-1!==this.Vh[2]?(this.ih=!0,this.Yh=2,this.hh=!0):this.Hc>=635&&this.Hc<=679&&this.Wc>=194&&this.Wc<229&&-1!==this.Vh[3]?(this.ih=!0,this.Yh=3,this.hh=!0):this.Hc>=676&&this.Hc<=706&&this.Wc>=194&&this.Wc<231&&-1!==this.Vh[4]?(this.ih=!0,this.Yh=4,this.hh=!0):this.Hc>=704&&this.Hc<=734&&this.Wc>=194&&this.Wc<231&&-1!==this.Vh[5]?(this.ih=!0,this.Yh=5,this.hh=!0):this.Hc>=732&&this.Hc<=766&&this.Wc>=195&&this.Wc<231&&-1!==this.Vh[6]?(this.ih=!0,this.Yh=6,this.hh=!0):this.Hc>=550&&this.Hc<=584&&this.Wc>=492&&this.Wc<528&&-1!==this.Vh[7]?(this.ih=!0,this.Yh=7,this.hh=!0):this.Hc>=582&&this.Hc<=612&&this.Wc>=492&&this.Wc<529&&-1!==this.Vh[8]?(this.ih=!0,this.Yh=8,this.hh=!0):this.Hc>=609&&this.Hc<=639&&this.Wc>=492&&this.Wc<529&&-1!==this.Vh[9]?(this.ih=!0,this.Yh=9,this.hh=!0):this.Hc>=637&&this.Hc<=681&&this.Wc>=493&&this.Wc<528&&-1!==this.Vh[10]?(this.ih=!0,this.Yh=10,this.hh=!0):this.Hc>=679&&this.Hc<=709&&this.Wc>=492&&this.Wc<529&&-1!==this.Vh[11]?(this.ih=!0,this.Yh=11,this.hh=!0):this.Hc>=706&&this.Hc<=736&&this.Wc>=492&&this.Wc<529&&-1!==this.Vh[12]?(this.ih=!0,this.Yh=12,this.hh=!0):this.Hc>=734&&this.Hc<=768&&this.Wc>=492&&this.Wc<528&&-1!==this.Vh[13]&&(this.ih=!0,this.Yh=13,this.hh=!0),$.K.bt++,$.K.bt>150&&($.K.bt=0,this.Jt.nf(O.A.by),this.Jt.p1(43)))};Df=async()=>{for(;;){let t;do{for(;;){if(t=this.Vc(),-1===t)return;if(-1!==this.nh&&this.nh===this.Xe){8===t&&this.Ve.length>0&&(this.Ve=this.Ve.substring(0,this.Ve.length-1));break}if(this.qh){if(t>=32&&t<=122&&this.Jh.length<80&&(this.Jh=this.Jh+String.fromCharCode(t),this.sh=!0),8===t&&this.Jh.length>0&&(this.Jh=this.Jh.substring(0,this.Jh.length-1),this.sh=!0),13===t||10===t){let t;if(this.qh=!1,this.sh=!0,1===this.Qh&&(t=M.A._d(this.Jh),this.$w(t)),2===this.Qh&&this.eo>0&&(t=M.A._d(this.Jh),this.Qw(t)),3===this.Qh&&this.Jh.length>0&&this.mo){this.Jt.nf(O.A.vy),this.Jt.p1(0);const t=this.Jt.ft;this.Jt.Ey(this.mo),v.A.Ly(this.Jt,this.Jh),this.Jt.Jf(this.Jt.ft-t),this.Jh=M.A.Ry(this.Jh),this.Jh=b.A.filter(this.Jh),this.Zd(6,this.Jh,M.A.Da(M.A.Na(this.mo))),2===this.Xh&&(this.Xh=1,this.eh=!0,this.Jt.nf(O.A.Sy),this.Jt.p1(this.Kh),this.Jt.p1(this.Xh),this.Jt.p1(this.zh))}4===this.Qh&&this.bh<100&&(t=M.A._d(this.Jh),this.Jw(t)),5===this.Qh&&this.bh>0&&(t=M.A._d(this.Jh),this.ty(t))}}else if(this.ie){if(t>=48&&t<=57&&this.te.length<10&&(this.te=this.te+String.fromCharCode(t),this.sh=!0),8===t&&this.te.length>0&&(this.te=this.te.substring(0,this.te.length-1),this.sh=!0),13===t||10===t){if(this.te.length>0){let t=0;try{t=parseInt(this.te,10)}catch(t){}this.Jt.nf(O.A.My),this.Jt.p4(t)}this.ie=!1,this.sh=!0}}else if(-1===this.gh&&(t>=32&&t<=122&&this.ae.length<80&&(this.ae=this.ae+String.fromCharCode(t),this.sh=!0),8===t&&this.ae.length>0&&(this.ae=this.ae.substring(0,this.ae.length-1),this.sh=!0),(13===t||10===t)&&this.ae.length>0)){if('::clientdrop'===this.ae)await this.lf();else if(this.Jr&&'::noclip'===this.ae)for(let t=0;t<G.A.Xn;t++)for(let i=1;i<G.A.nr-1;i++)for(let s=1;s<G.A.nr-1;s++){const h=this.Kn[t];h&&(h.flags[G.A.index(i,s)]=0)}else if('::debug'===this.ae)$.K.Et=!$.K.Et;else if('::chat'===this.ae)$.K.gt=($.K.gt+1)%3;else if(this.ae.startsWith('::fps '))try{this.ky(parseInt(this.ae.substring(6),10))}catch(t){}else if(this.ae.startsWith('::camera'))$.K.Ct=!$.K.Ct,this.ln=$.K.Ct,this.ar=52,this.cr=52,this.yr=52,this.Ar=52,this.pr=1e3,this.ur=1e3;else if(this.ae.startsWith('::camsrc ')){const t=this.ae.split(' ');3===t.length?(this.yr=parseInt(t[1],10),this.Ar=parseInt(t[2],10)):4===t.length&&(this.yr=parseInt(t[1],10),this.Ar=parseInt(t[2],10),this.pr=parseInt(t[3],10))}else if(this.ae.startsWith('::camdst ')){const t=this.ae.split(' ');3===t.length?(this.ar=parseInt(t[1],10),this.cr=parseInt(t[2],10)):4===t.length&&(this.ar=parseInt(t[1],10),this.cr=parseInt(t[2],10),this.ur=parseInt(t[3],10))}if(this.ae.startsWith('::'))this.Jt.nf(O.A.xy),this.Jt.p1(this.ae.length-1),this.Jt.qc(this.ae.substring(2));else{let t=0;this.ae.startsWith('yellow:')?(t=0,this.ae=this.ae.substring(7)):this.ae.startsWith('red:')?(t=1,this.ae=this.ae.substring(4)):this.ae.startsWith('green:')?(t=2,this.ae=this.ae.substring(6)):this.ae.startsWith('cyan:')?(t=3,this.ae=this.ae.substring(5)):this.ae.startsWith('purple:')?(t=4,this.ae=this.ae.substring(7)):this.ae.startsWith('white:')?(t=5,this.ae=this.ae.substring(6)):this.ae.startsWith('flash1:')?(t=6,this.ae=this.ae.substring(7)):this.ae.startsWith('flash2:')?(t=7,this.ae=this.ae.substring(7)):this.ae.startsWith('flash3:')?(t=8,this.ae=this.ae.substring(7)):this.ae.startsWith('glow1:')?(t=9,this.ae=this.ae.substring(6)):this.ae.startsWith('glow2:')?(t=10,this.ae=this.ae.substring(6)):this.ae.startsWith('glow3:')&&(t=11,this.ae=this.ae.substring(6));let i=0;this.ae.startsWith('wave:')&&(i=1,this.ae=this.ae.substring(5)),this.ae.startsWith('scroll:')&&(i=2,this.ae=this.ae.substring(7)),this.Jt.nf(O.A.Dy),this.Jt.p1(0);const s=this.Jt.ft;this.Jt.p1(t),this.Jt.p1(i),v.A.Ly(this.Jt,this.ae),this.Jt.Jf(this.Jt.ft-s),this.ae=M.A.Ry(this.ae),this.ae=b.A.filter(this.ae),this.Vr&&this.Vr.name&&(this.Vr.mu=this.ae,this.Vr.Eu=t,this.Vr.gu=i,this.Vr.Cu=150,this.Zd(2,this.Vr.mu,this.Vr.name)),2===this.Kh&&(this.Kh=3,this.eh=!0,this.Jt.nf(O.A.Sy),this.Jt.p1(this.Kh),this.Jt.p1(this.Xh),this.Jt.p1(this.zh))}this.ae='',this.sh=!0}}}while((t<97||t>122)&&(t<65||t>90)&&(t<48||t>57)&&32!==t);this.Ve.length<12&&(this.Ve=this.Ve+String.fromCharCode(t))}};Sf=()=>{if(1===this.Gc)if(this.Hc>=8&&this.Hc<=108&&this.Wc>=490&&this.Wc<=522)this.Kh=(this.Kh+1)%4,this.eh=!0,this.sh=!0,this.Jt.nf(O.A.Sy),this.Jt.p1(this.Kh),this.Jt.p1(this.Xh),this.Jt.p1(this.zh);else if(this.Hc>=137&&this.Hc<=237&&this.Wc>=490&&this.Wc<=522)this.Xh=(this.Xh+1)%3,this.eh=!0,this.sh=!0,this.Jt.nf(O.A.Sy),this.Jt.p1(this.Kh),this.Jt.p1(this.Xh),this.Jt.p1(this.zh);else if(this.Hc>=275&&this.Hc<=375&&this.Wc>=490&&this.Wc<=522)this.zh=(this.zh+1)%3,this.eh=!0,this.sh=!0,this.Jt.nf(O.A.Sy),this.Jt.p1(this.Kh),this.Jt.p1(this.Xh),this.Jt.p1(this.zh);else if(this.Hc>=416&&this.Hc<=516&&this.Wc>=490&&this.Wc<=522){this.Zw(),this.Ve='',this.Ke=!1;for(let t=0;t<c.A.Wo.length;t++)if(c.A.Wo[t]&&600===c.A.Wo[t].xl)return void(this.Xe=this.nh=c.A.Wo[t].Xd)}};Gf=(t,i,s,h,e,n,r,o)=>{if(this.jh?this.Zh=32:this.Zh=0,this.jh=!1,t>=n&&t<n+16&&i>=r&&i<r+16)o.Pl-=4*this.rh,e&&(this.ih=!0);else if(t>=n&&t<n+16&&i>=r+h-16&&i<r+h)o.Pl+=4*this.rh,e&&(this.ih=!0);else if(t>=n-this.Zh&&t<n+this.Zh+16&&i>=r+16&&i<r+h-16&&this.rh>0){let t=(h-32)*h/s|0;t<8&&(t=8);const n=i-r-(t/2|0)-16,l=h-t-32;o.Pl=(s-h)*n/l|0,e&&(this.ih=!0),this.jh=!0}};sf=()=>{this.qi||(this.Ho(),this.Vo=null,this.di=null,this.wi=null,this.yi=null,this.Ai=null,this.pi=null,this.mi=null,this.Ii=null,this._i=null,this.Ei=null,this.qi=new f.A(479,96),this.ji=new f.A(168,160),u.A.clear(),this.gs?.draw(0,0),this.zi=new f.A(190,261),this.Zi=new f.A(512,334),u.A.clear(),this.$i=new f.A(501,61),this.Ji=new f.A(288,40),this.Qi=new f.A(269,66),this.ci=!0)};Iu=t=>{if(!t)return!1;for(let i=0;i<this.eo;i++)if(t.toLowerCase()===this.yo[i]?.toLowerCase())return!0;return!!this.Vr&&t.toLowerCase()===this.Vr.name?.toLowerCase()};$w=t=>{if(0n===t)return;if(this.eo>=100)return void this.Zd(0,'Your friends list is full. Max of 100 hit','');const i=M.A.Da(M.A.Na(t));for(let s=0;s<this.eo;s++)if(this.Ao[s]===t)return void this.Zd(0,i+' is already on your friend list','');for(let s=0;s<this.bh;s++)if(this.Lh[s]===t)return void this.Zd(0,'Please remove '+i+' from your ignore list first','');this.Vr&&this.Vr.name&&i!==this.Vr.name&&(this.yo[this.eo]=i,this.Ao[this.eo]=t,this.po[this.eo]=0,this.eo++,this.ih=!0,this.Jt.nf(O.A.Ny),this.Jt.Ey(t))};Qw=t=>{if(0n!==t)for(let i=0;i<this.eo;i++)if(this.Ao[i]===t){this.eo--,this.ih=!0;for(let t=i;t<this.eo;t++)this.yo[t]=this.yo[t+1],this.po[t]=this.po[t+1],this.Ao[t]=this.Ao[t+1];return this.Jt.nf(O.A.Py),void this.Jt.Ey(t)}};Jw=t=>{if(0n===t)return;if(this.bh>=100)return void this.Zd(0,'Your ignore list is full. Max of 100 hit','');const i=M.A.Da(M.A.Na(t));for(let s=0;s<this.bh;s++)if(this.Lh[s]===t)return void this.Zd(0,i+' is already on your ignore list','');for(let s=0;s<this.eo;s++)if(this.Ao[s]===t)return void this.Zd(0,'Please remove '+i+' from your friend list first','');this.Lh[this.bh++]=t,this.ih=!0,this.Jt.nf(O.A.Fy),this.Jt.Ey(t)};ty=t=>{if(0n!==t)for(let i=0;i<this.bh;i++)if(this.Lh[i]===t){this.bh--,this.ih=!0;for(let t=i;t<this.bh;t++)this.Lh[t]=this.Lh[t+1];return this.Jt.nf(O.A.Uy),void this.Jt.Ey(t)}};By=(t,i)=>{const s=this.Pr[this.zn][t][i];if(!s)return void this.tn?.Gy(this.zn,t,i);let h=-99999999,e=null;for(let t=s.head();t;t=s.next()){const i=n.A.get(t.index);let s=i.Hy;i.Oa&&(s*=t.count+1),s>h&&(h=s,e=t)}if(!e)return;s.Wy(e);let r=-1,o=-1,l=0,a=0;for(let t=s.head();t;t=s.next())t.index!==e.index&&-1===r&&(r=t.index,l=t.count),t.index!==e.index&&t.index!==r&&-1===o&&(o=t.index,a=t.count);let c=null;-1!==r&&(c=n.A.get(r).Yy(l));let f=null;-1!==o&&(f=n.A.get(o).Yy(a));const u=t+(i<<7)+1610612736|0,d=n.A.get(e.index);this.tn?.Vy(t,i,this.qf(this.zn,128*t+64,128*i+64),this.zn,u,d.Yy(e.count),f,c)};Ky=(t,i,s,h,n,r,o)=>{if(i<1||s<1||i>102||s>102)return;if($.K.At&&t!==this.zn)return;if(!this.tn)return;let l=0;if(o===N.A.Xy&&(l=this.tn.kd(t,i,s)),o===N.A.zy&&(l=this.tn.jy(t,s,i)),o===N.A.Zy&&(l=this.tn.Wd(t,i,s)),o===N.A.Ty&&(l=this.tn.bd(t,i,s)),0!==l){const h=this.tn.xd(t,i,s,l),n=l>>14&32767,r=31&h,a=h>>6;if(o===N.A.Xy){this.tn?.qy(t,i,s,1);const h=e.A.get(n);h.$y&&this.Kn[t]?.qy(i,s,r,a,h.Jy)}if(o===N.A.zy&&this.tn?.Qy(t,i,s),o===N.A.Zy){this.tn.tA(t,i,s);const h=e.A.get(n);if(i+h.width>G.A.nr-1||s+h.width>G.A.nr-1||i+h.length>G.A.nr-1||s+h.length>G.A.nr-1)return;h.$y&&this.Kn[t]?.tA(i,s,h.width,h.length,a,h.Jy)}if(o===N.A.Ty){this.tn?.iA(t,i,s);const h=e.A.get(n);h.$y&&h.active&&this.Kn[t]?.sA(i,s)}}if(h>=0){let e=t;this.sr&&t<3&&!(2&~this.sr[1][i][s])&&(e=t+1),this.ir&&D.A.Ky(t,i,s,this.tn,this.ir,this.Dr,this.Kn[t],h,r,n,e)}};Zw=()=>{this.Jt.nf(O.A.hA),-1!==this.Eh&&(this.Eh=-1,this.ih=!0,this.Re=!1,this.hh=!0),-1!==this.gh&&(this.gh=-1,this.sh=!0,this.Re=!1),this.nh=-1};lf=async()=>{this.si>0?await this.eA():(this.Zi?.bind(),this.vi?.Lc(257,144,'Connection lost',m.A.$l),this.vi?.Lc(256,143,'Connection lost',m.A.kl),this.vi?.Lc(257,159,'Please wait - attempting to reestablish',m.A.$l),this.vi?.Lc(256,158,'Please wait - attempting to reestablish',m.A.kl),this.Zi?.draw(8,11),this.nn=0,this.stream?.close(),this.gc=!1,await this.Yc(this.username,this.password,!0),this.gc||await this.eA())};eA=async()=>{this.stream&&this.stream.close(),this.stream=null,this.gc=!1,this.fi=0,this.username='',this.password='',k.A.Qc(),this.cu(),this.tn?.reset();for(let t=0;t<G.A.Xn;t++)this.Kn[t]?.reset();(0,j.Go)(),this.ko=null,this.So=0,$.K.At||await this.hl('scape_main',12345678,4e4)};read=async()=>{if(!this.stream)return!1;try{let t=this.stream.available;if(0===t)return!1;if(-1===this.ni&&(await this.stream.jc(this.in.data,0,1),this.ni=255&this.in.data[0],this.ei&&(this.ni=this.ni-this.ei.nA&255),this.packetSize=E.A.rA[this.ni],t--),-1===this.packetSize){if(t<=0)return!1;await this.stream.jc(this.in.data,0,1),this.packetSize=255&this.in.data[0],t--}if(-2===this.packetSize){if(t<=1)return!1;await this.stream.jc(this.in.data,0,2),this.in.ft=0,this.packetSize=this.in.ct,t-=2}if(t<this.packetSize)return!1;if(this.in.ft=0,await this.stream.jc(this.in.data,0,this.packetSize),this.ii=0,this.li=this.oi,this.oi=this.ri,this.ri=this.ni,this.ni===T.A.oA){const t=this.in.ct,i=this.in.lA;return this.Me[t]=i,this.Se[t]!==i&&(this.Se[t]=i,await this.jw(t),this.ih=!0,-1!==this.se&&(this.sh=!0)),this.ni=-1,!0}if(this.ni===T.A.aA){const t=this.in.Zc,i=this.in.cA;let s=M.A.Da(M.A.Na(t));for(let h=0;h<this.eo;h++)if(t===this.Ao[h]){this.po[h]!==i&&(this.po[h]=i,this.ih=!0,i>0&&this.Zd(5,s+' has logged in.',''),0===i&&this.Zd(5,s+' has logged out.','')),s=null;break}s&&this.eo<100&&(this.Ao[this.eo]=t,this.yo[this.eo]=s,this.po[this.eo]=i,this.eo++,this.ih=!0);let h=!1;for(;!h;){h=!0;for(let t=0;t<this.eo-1;t++)if(this.po[t]!==$.K.yt&&this.po[t+1]===$.K.yt||0===this.po[t]&&0!==this.po[t+1]){const i=this.po[t];this.po[t]=this.po[t+1],this.po[t+1]=i;const s=this.yo[t];this.yo[t]=this.yo[t+1],this.yo[t+1]=s;const e=this.Ao[t];this.Ao[t]=this.Ao[t+1],this.Ao[t+1]=e,this.ih=!0,h=!1}}return this.ni=-1,!0}if(this.ni===T.A.fA)return this.hi=30*this.in.ct,this.ni=-1,!0;if(this.ni===T.A.uA){const t=this.in.cA,i=this.in.cA;let s=-1;if(this.Hn)for(let h=0;h<this.Hn.length;h++)this.Hn[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.Bn;if(h){const e=h[s];-1!==s&&e&&(this.db?.sl(`m${t}_${i}`,e),this.sn=1)}}return this.ni=-1,!0}if(this.ni===T.A.dA)return this.wA(this.in,this.packetSize),this.ni=-1,!0;if(this.ni===T.A.yA){const t=this.in.ct,i=this.in.ct;if(this.Nn===t&&this.Pn===i&&0!==this.sn)return this.ni=-1,!0;this.Nn=t,this.Pn=i,this.Fn=8*(this.Nn-6),this.Un=8*(this.Pn-6),this.sn=1,this.Zi?.bind(),this.vi?.Lc(257,151,'Loading - please wait.',m.A.$l),this.vi?.Lc(256,150,'Loading - please wait.',m.A.kl),this.Zi?.draw(8,11);const s=(this.packetSize-2)/10|0;this.Bn=new q.vs(s,null),this.Gn=new q.vs(s,null),this.Hn=new Int32Array(s),this.Jt.nf(O.A.AA),this.Jt.p1(0);let h=0;for(let t=0;t<s;t++){const i=this.in.cA,s=this.in.cA,e=this.in.ut,n=this.in.ut;let r;this.Hn[t]=(i<<8)+s,0!==e&&(r=await(this.db?.$o(`m${i}_${s}`)),r&&I.A.Jo(r)!==e&&(r=void 0),r?this.Bn[t]=r:(this.sn=0,this.Jt.p1(0),this.Jt.p1(i),this.Jt.p1(s),h+=3)),0!==n&&(r=await(this.db?.$o(`l${i}_${s}`)),r&&I.A.Jo(r)!==n&&(r=void 0),r?this.Gn[t]=r:(this.sn=0,this.Jt.p1(1),this.Jt.p1(i),this.Jt.p1(s),h+=3))}this.Jt.Jf(h),this.Zi?.bind(),0===this.sn&&(this.vi?.Lc(257,166,'Map area updated since last visit, so load will take longer this time only',m.A.$l),this.vi?.Lc(256,165,'Map area updated since last visit, so load will take longer this time only',m.A.kl)),this.Zi?.draw(8,11);const e=this.Fn-this.Wn,n=this.Un-this.Yn;this.Wn=this.Fn,this.Yn=this.Un;for(let t=0;t<8192;t++){const i=this.Lr[t];if(i){for(let t=0;t<10;t++)i.Of[t]-=e,i.bf[t]-=n;i.x-=128*e,i.z-=128*n}}for(let t=0;t<this.Yt;t++){const i=this._r[t];if(i){for(let t=0;t<10;t++)i.Of[t]-=e,i.bf[t]-=n;i.x-=128*e,i.z-=128*n}}let r=0,o=G.A.nr,l=1;e<0&&(r=G.A.nr-1,o=-1,l=-1);let a=0,c=G.A.nr,f=1;n<0&&(a=G.A.nr-1,c=-1,f=-1);for(let t=r;t!==o;t+=l)for(let i=a;i!==c;i+=f){const s=t+e,h=i+n;for(let e=0;e<G.A.Xn;e++)s>=0&&h>=0&&s<G.A.nr&&h<G.A.nr?this.Pr[e][t][i]=this.Pr[e][s][h]:this.Pr[e][t][i]=null}for(let t=this.Ur.head();t;t=this.Ur.next())t.x-=e,t.z-=n,(t.x<0||t.z<0||t.x>=G.A.nr||t.z>=G.A.nr)&&t.pA();return 0!==this.nn&&(this.nn-=e,this.rn-=n),this.ln=!1,this.ni=-1,!0}if(this.ni===T.A.mA)return c.A.Wo[this.in.ct].model=this.Vr?.IA()||null,this.ni=-1,!0;if(this.ni===T.A._A)return this.Rh=this.in.cA,1===this.Rh&&(this.Sh=this.in.ct),this.Rh>=2&&this.Rh<=6&&(2===this.Rh&&(this.Mh=64,this.kh=64),3===this.Rh&&(this.Mh=0,this.kh=64),4===this.Rh&&(this.Mh=128,this.kh=64),5===this.Rh&&(this.Mh=64,this.kh=0),6===this.Rh&&(this.Mh=64,this.kh=128),this.Rh=2,this.Dh=this.in.ct,this.Nh=this.in.ct,this.Ph=this.in.cA),10===this.Rh&&(this.xh=this.in.ct),this.ni=-1,!0;if(this.ni===T.A.EA){const t=this.in.gA,i=this.in.ut,s=this.in.ut;return t!==this.ko&&this.Mo&&!$.K.At&&await this.hl(t,i,s),this.ko=t,this.xo=i,this.Do=s,this.So=0,this.ni=-1,!0}if(this.ni===T.A.CA)return await this.eA(),this.ni=-1,!1;if(this.ni===T.A.TA){const t=this.in.cA,i=this.in.cA;let s=-1;if(this.Hn)for(let h=0;h<this.Hn.length;h++)this.Hn[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.Gn;if(h){const e=h[s];-1!==s&&e&&(this.db?.sl(`l${t}_${i}`,e),this.sn=1)}}return this.ni=-1,!0}if(this.ni===T.A.OA)return this.nn=0,this.ni=-1,!0;if(this.ni===T.A.bA)return this.zr=this.in.ct,this.ni=-1,!0;if(this.ni===T.A.vA||this.ni===T.A.LA||this.ni===T.A.RA||this.ni===T.A.SA||this.ni===T.A.MA||this.ni===T.A.kA||this.ni===T.A.xA||this.ni===T.A.DA||this.ni===T.A.NA||this.ni===T.A.PA)return this.FA(this.in,this.ni),this.ni=-1,!0;if(this.ni===T.A.UA){const t=this.in.ct,i=this.in.ct;return-1!==this.gh&&(this.gh=-1,this.sh=!0),this.ie&&(this.ie=!1,this.sh=!0),this.nh=t,this.Eh=i,this.ih=!0,this.hh=!0,this.Re=!1,this.ni=-1,!0}if(this.ni===T.A.BA){const t=this.in.ct,i=this.in.ut;return this.Me[t]=i,this.Se[t]!==i&&(this.Se[t]=i,await this.jw(t),this.ih=!0,-1!==this.se&&(this.sh=!0)),this.ni=-1,!0}if(this.ni===T.A.GA){const t=this.in.ct;return c.A.Wo[t].El=this.in.ct,this.ni=-1,!0}if(this.ni===T.A.HA){let t=this.in.ct;const i=this.in.cA;return 65535===t&&(t=-1),this.Vh[i]=t,this.ih=!0,this.hh=!0,this.ni=-1,!0}if(this.ni===T.A.WA){const t=this.in.cA,i=this.in.cA,s=this.in.ct,h=this.in.ct;let e=-1;if(this.Hn)for(let s=0;s<this.Hn.length;s++)this.Hn[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.Gn){this.Gn[e]&&this.Gn[e]?.length===h||(this.Gn[e]=new Int8Array(h));const t=this.Gn[e];t&&this.in.YA(this.packetSize-6,s,t)}return this.ni=-1,!0}if(this.ni===T.A.VA){const t=k.A.stop();return t&&(this.Jt.nf(O.A.rf),this.Jt.p2(t.ft),this.Jt.Jc(t.data,t.ft,0),t.release()),this.ni=-1,!0}if(this.ni===T.A.KA){this.ih=!0;const t=this.in.ct,i=c.A.Wo[t],s=this.in.cA;if(i.Gl&&i.Hl){for(let t=0;t<s;t++){i.Gl[t]=this.in.ct;let s=this.in.cA;255===s&&(s=this.in.ut),i.Hl[t]=s}for(let t=s;t<i.Gl.length;t++)i.Gl[t]=0,i.Hl[t]=0}else for(let t=0;t<s;t++)this.in.ct,255===this.in.cA&&this.in.ut;return this.ni=-1,!0}if(this.ni===T.A.XA)return k.A.zA(),this.ni=-1,!0;if(this.ni===T.A.jA)return this.qh=!1,this.ie=!0,this.te='',this.sh=!0,this.ni=-1,!0;if(this.ni===T.A.ZA){const t=c.A.Wo[this.in.ct];if(t.Gl)for(let i=0;i<t.Gl.length;i++)t.Gl[i]=-1,t.Gl[i]=0;return this.ni=-1,!0}if(this.ni===T.A.qA){if(this.ze=this.in.ut,this.je=this.in.ct,this.Ze=this.in.cA,this.qe=this.in.ct,0!==this.ze&&-1===this.nh){this.Zw();let t=650;201!==this.Ze&&(t=655),this.Ve='',this.Ke=!1;for(let i=0;i<c.A.Wo.length;i++)if(c.A.Wo[i]&&c.A.Wo[i].xl===t){this.nh=c.A.Wo[i].Xd;break}}return this.ni=-1,!0}if(this.ni===T.A.$A)return this.Wh=this.in.cA,this.Wh===this.Yh&&(3===this.Wh?this.Yh=1:this.Yh=3,this.ih=!0),this.ni=-1,!0;if(this.ni===T.A.JA){if(this.Mo&&!$.K.At){const t=this.in.ct,i=this.in.ut,s=this.packetSize-6,h=R.A.read(i,Int8Array.from(this.in.data),s,this.in.ft);(0,j.el)(h,this.No),this.So=t}return this.ni=-1,!0}if(this.ni===T.A.QA)return this.Xr=this.in.cA,this.ni=-1,!0;if(this.ni===T.A.tp){const t=this.in.ct,i=this.in.cA,s=this.in.ct;return this._o&&!$.K.At&&this.Io<50&&(this.Eo[this.Io]=t,this.Co[this.Io]=i,this.To[this.Io]=s+L.A.ip[t],this.Io++),this.ni=-1,!0}if(this.ni===T.A.sp){const t=this.in.ct,i=this.in.ct,s=r.A.get(i);return c.A.Wo[t].model=s.IA(),this.ni=-1,!0}if(this.ni===T.A.hp)return this.xn=this.in.cA,this.Dn=this.in.cA,this.ni=-1,!0;if(this.ni===T.A.ep){const t=this.in.ct,i=this.in.ct,s=this.in.ct,h=c.A.Wo[t].model;return h?.Ba(i,s),this.ni=-1,!0}if(this.ni===T.A.np)return this.Kh=this.in.cA,this.Xh=this.in.cA,this.zh=this.in.cA,this.eh=!0,this.sh=!0,this.ni=-1,!0;if(this.ni===T.A.rp){const t=this.in.ct;return this.op(t),-1!==this.gh&&(this.gh=-1,this.sh=!0),this.ie&&(this.ie=!1,this.sh=!0),this.Eh=t,this.ih=!0,this.hh=!0,this.nh=-1,this.Re=!1,this.ni=-1,!0}if(this.ni===T.A.lp){const t=this.in.ct;return this.op(t),-1!==this.Eh&&(this.Eh=-1,this.ih=!0,this.hh=!0),this.gh=t,this.sh=!0,this.nh=-1,this.Re=!1,this.ni=-1,!0}if(this.ni===T.A.ap){const t=this.in.ct,i=this.in.cp,s=this.in.cp,h=c.A.Wo[t];return h.x=i,h.y=s,this.ni=-1,!0}if(this.ni===T.A.fp)return this.ln=!0,this.yr=this.in.cA,this.Ar=this.in.cA,this.pr=this.in.ct,this.mr=this.in.cA,this.Ir=this.in.cA,this.Ir>=100&&(this.En=128*this.yr+64,this.Cn=128*this.Ar+64,this.gn=this.qf(this.zn,this.yr,this.Ar)-this.pr),this.ni=-1,!0;if(this.ni===T.A.up){this.xn=this.in.cA,this.Dn=this.in.cA;for(let t=this.xn;t<this.xn+8;t++)for(let i=this.Dn;i<this.Dn+8;i++)this.Pr[this.zn][t][i]&&(this.Pr[this.zn][t][i]=null,this.By(t,i));for(let t=this.Ur.head();t;t=this.Ur.next())t.x>=this.xn&&t.x<this.xn+8&&t.z>=this.Dn&&t.z<this.Dn+8&&t.dp===this.zn&&(this.Ky(t.dp,t.x,t.z,t.wp,t.yp,t.Ap,t.Xd),t.pA());return this.ni=-1,!0}if(this.ni===T.A.pp){const t=this.in.cA,i=this.in.cA,s=this.in.ct,h=this.in.ct;let e=-1;if(this.Hn)for(let s=0;s<this.Hn.length;s++)this.Hn[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.Bn){this.Bn[e]&&this.Bn[e]?.length===h||(this.Bn[e]=new Int8Array(h));const t=this.Bn[e];t&&this.in.YA(this.packetSize-6,s,t)}return this.ni=-1,!0}if(this.ni===T.A.vy){const t=this.in.Zc,i=this.in.ut,s=this.in.cA;let h=!1;for(let t=0;t<100;t++)if(this.ne[t]===i){h=!0;break}if(s<=1)for(let i=0;i<this.bh;i++)if(this.Lh[i]===t){h=!0;break}if(!h&&0===this.uh)try{this.ne[this.re]=i,this.re=(this.re+1)%100;const h=v.A.Ac(this.in,this.packetSize-13),e=b.A.filter(h);s>1?this.Zd(7,e,M.A.Da(M.A.Na(t))):this.Zd(3,e,M.A.Da(M.A.Na(t)))}catch(t){}return this.ni=-1,!0}if(this.ni===T.A.mp){for(let t=0;t<this.Se.length;t++)this.Se[t]!==this.Me[t]&&(this.Se[t]=this.Me[t],await this.jw(t),this.ih=!0);return this.ni=-1,!0}if(this.ni===T.A.Ip){const t=this.in.ct,i=this.in.ct;return c.A.Wo[t].model=p.A.model(i),this.ni=-1,!0}if(this.ni===T.A._p)return this.se=this.in.cp,this.sh=!0,this.ni=-1,!0;if(this.ni===T.A.Ep)return 12===this.Yh&&(this.ih=!0),this.Kr=this.in.cA,this.ni=-1,!0;if(this.ni===T.A.gp){if(this.ln=!0,this.ar=this.in.cA,this.cr=this.in.cA,this.ur=this.in.ct,this.dr=this.in.cA,this.wr=this.in.cA,this.wr>=100){const t=128*this.ar+64,i=128*this.cr+64,s=this.qf(this.zn,this.ar,this.cr)-this.ur,h=t-this.En,e=s-this.gn,n=i-this.Cn,r=0|Math.sqrt(h*h+n*n);this.Tn=325.949*Math.atan2(e,r)&2047,this.On=-325.949*Math.atan2(h,n)&2047,this.Tn<128&&(this.Tn=128),this.Tn>383&&(this.Tn=383)}return this.ni=-1,!0}if(this.ni===T.A.Cp)return this.Yh=this.in.cA,this.ih=!0,this.hh=!0,this.ni=-1,!0;if(this.ni===T.A.Tp){const t=this.in.gA;let i;if(t.endsWith(':tradereq:')){const s=t.substring(0,t.indexOf(':'));i=M.A._d(s);let h=!1;for(let t=0;t<this.bh;t++)if(this.Lh[t]===i){h=!0;break}h||0!==this.uh||this.Zd(4,'wishes to trade with you.',s)}else if(t.endsWith(':duelreq:')){const s=t.substring(0,t.indexOf(':'));i=M.A._d(s);let h=!1;for(let t=0;t<this.bh;t++)if(this.Lh[t]===i){h=!0;break}h||0!==this.uh||this.Zd(8,'wishes to duel with you.',s)}else this.Zd(0,t,'');return this.ni=-1,!0}if(this.ni===T.A.Op){const t=this.in.ct,i=this.in.ct,s=this.in.ct,h=n.A.get(i);return c.A.Wo[t].model=h.Yy(50),c.A.Wo[t].Ia=h.bp,c.A.Wo[t].Ca=h.vp,c.A.Wo[t].zoom=100*h.Lp/s|0,this.ni=-1,!0}if(this.ni===T.A.Rp){const t=this.in.ct;return this.op(t),-1!==this.Eh&&(this.Eh=-1,this.ih=!0,this.hh=!0),-1!==this.gh&&(this.gh=-1,this.sh=!0),this.ie&&(this.ie=!1,this.sh=!0),this.nh=t,this.Re=!1,this.ni=-1,!0}if(this.ni===T.A.Sp){const t=this.in.ct,i=this.in.ct,s=i>>10&31,h=i>>5&31,e=31&i;return c.A.Wo[t].ia=(s<<19)+(h<<11)+(e<<3),this.ni=-1,!0}if(this.ni===T.A.Mp){for(let t=0;t<this._r.length;t++){const i=this._r[t];i&&(i.Pu=-1)}for(let t=0;t<this.Lr.length;t++){const i=this.Lr[t];i&&(i.Pu=-1)}return this.ni=-1,!0}if(this.ni===T.A.kp){const t=this.in.ct;return c.A.Wo[t].hide=1===this.in.cA,this.ni=-1,!0}if(this.ni===T.A.xp){this.bh=this.packetSize/8|0;for(let t=0;t<this.bh;t++)this.Lh[t]=this.in.Zc;return this.ni=-1,!0}if(this.ni===T.A.Dp){this.ln=!1;for(let t=0;t<5;t++)this.pn[t]=!1;return this.ni=-1,!0}if(this.ni===T.A.Np)return-1!==this.Eh&&(this.Eh=-1,this.ih=!0,this.hh=!0),-1!==this.gh&&(this.gh=-1,this.sh=!0),this.ie&&(this.ie=!1,this.sh=!0),this.nh=-1,this.Re=!1,this.ni=-1,!0;if(this.ni===T.A.Pp){const t=this.in.ct;return c.A.Wo[t].text=this.in.gA,c.A.Wo[t].Xd===this.Vh[this.Yh]&&(this.ih=!0),this.ni=-1,!0}if(this.ni===T.A.Fp){this.ih=!0;const t=this.in.cA,i=this.in.ut,s=this.in.cA;this.Fh[t]=i,this.Uh[t]=s,this.Bh[t]=1;for(let s=0;s<98;s++)i>=this.Gh[s]&&(this.Bh[t]=s+2);return this.ni=-1,!0}if(this.ni===T.A.Up){for(this.xn=this.in.cA,this.Dn=this.in.cA;this.in.ft<this.packetSize;){const t=this.in.cA;this.FA(this.in,t)}return this.ni=-1,!0}if(this.ni===T.A.Bp)return 12===this.Yh&&(this.ih=!0),this.jr=this.in.cp,this.ni=-1,!0;if(this.ni===T.A.Gp){const t=this.in.cA,i=this.in.cA,s=this.in.cA,h=this.in.cA;return this.pn[t]=!0,this.mn[t]=i,this.In[t]=s,this._n[t]=h,this.An[t]=0,this.ni=-1,!0}if(this.ni===T.A.Hp){this.ih=!0;const t=this.in.ct,i=c.A.Wo[t];for(;this.in.ft<this.packetSize;){const t=this.in.cA,s=this.in.ct;let h=this.in.cA;255===h&&(h=this.in.ut),i.Gl&&i.Hl&&t>=0&&t<i.Gl.length&&(i.Gl[t]=s,i.Hl[t]=h)}return this.ni=-1,!0}if(this.ni===T.A.Wp)return this.Uo=!this.Uo,this.Yp(this.in,this.packetSize),1===this.sn&&(this.sn=2,D.A.Vp=this.zn,this.Kp()),$.K.At&&2===this.sn&&D.A.Vp!==this.zn&&(this.Zi?.bind(),this.vi?.Lc(257,151,'Loading - please wait.',m.A.$l),this.vi?.Lc(256,150,'Loading - please wait.',m.A.kl),this.Zi?.draw(8,11),D.A.Vp=this.zn,this.Kp()),this.zn!==this.kn&&2===this.sn&&(this.kn=this.zn,this.Cd(this.zn)),this.ni=-1,!0;await this.eA()}catch(t){console.log(t),await this.lf()}return!0};Kp=()=>{try{this.kn=-1,this.Nr.clear(),this.Dr.clear(),this.kr.clear(),this.Mr.clear(),d.A.Xp(),this.cu(),this.tn?.reset();for(let t=0;t<G.A.Xn;t++)this.Kn[t]?.reset();const t=new D.A(G.A.nr,G.A.nr,this.ir,this.sr);D.A.At=$.K.At;const i=this.Bn?.length??0;if(this.Hn)for(let t=0;t<i;t++){const i=this.Hn[t]>>8,s=255&this.Hn[t];if(33===i&&s>=71&&s<=73){D.A.At=!1;break}}if($.K.At?this.tn?.zp(this.zn):this.tn?.zp(0),this.Hn&&this.Bn){this.Jt.nf(O.A.Ff);for(let s=0;s<i;s++){const i=64*(this.Hn[s]>>8)-this.Fn,h=64*(255&this.Hn[s])-this.Un,e=this.Bn[s];if(e){const s=new I.A(new Uint8Array(e)).ut,n=R.A.read(s,e,e.length-4,4);t.jp(8*(this.Nn-6),8*(this.Pn-6),i,h,n)}else this.Pn<800&&t.Zp(h,i,64,64)}}if(this.Hn&&this.Gn){this.Jt.nf(O.A.Ff);for(let s=0;s<i;s++){const i=this.Gn[s];if(i){const h=new I.A(new Uint8Array(i)).ut,e=R.A.read(h,i,i.length-4,4),n=64*(this.Hn[s]>>8)-this.Fn,r=64*(255&this.Hn[s])-this.Un;t.qp(this.tn,this.Dr,this.Kn,e,n,r)}}}this.Jt.nf(O.A.Ff),t.$p(this.tn,this.Kn),this.Zi?.bind(),this.Jt.nf(O.A.Ff);for(let t=this.Dr.head();t;t=this.Dr.next())2===(this.sr&&2&this.sr[1][t.Jp][t.Qp])&&(t.tm--,t.tm<0&&t.pA());for(let t=0;t<G.A.nr;t++)for(let i=0;i<G.A.nr;i++)this.By(t,i);for(let t=this.Ur.head();t;t=this.Ur.next())this.Ky(t.dp,t.x,t.z,t.im,t.angle,t.shape,t.Xd)}catch(t){}e.A.fu?.clear(),d.A.yc(20)};op=t=>{const i=c.A.Wo[t];if(i._l)for(let t=0;t<i._l.length&&-1!==i._l[t];t++){const s=c.A.Wo[i._l[t]];1===s.type&&this.op(s.id),s.Tl=0,s.Cl=0}};Ec=()=>{let t=0;for(let i=0;i<99;i++){const s=i+1;t+=s+300*Math.pow(2,s/7)|0,this.Gh[i]=t/4|0}};Zd=(t,i,s)=>{0===t&&-1!==this.se&&(this.Hh=i,this.Gc=0),-1===this.gh&&(this.sh=!0);for(let t=99;t>0;t--)this.messageType[t]=this.messageType[t-1],this.ee[t]=this.ee[t-1],this.he[t]=this.he[t-1];$.K.Et&&0===t&&(i='['+(this.Zt/30|0)+']: '+i),this.messageType[0]=t,this.ee[0]=s,this.he[0]=i};jw=async t=>{const i=a.A.Wo[t].sm;if(0!==i){const s=this.Se[t];if(1===i&&(1===s&&d.A.wc(.9),2===s&&d.A.wc(.8),3===s&&d.A.wc(.7),4===s&&d.A.wc(.6),n.A.du?.clear(),this.ci=!0),3===i){const t=this.Mo;0===s&&(this.No=256,(0,j.hm)(256),this.Mo=!0),1===s&&(this.No=192,(0,j.hm)(192),this.Mo=!0),2===s&&(this.No=128,(0,j.hm)(128),this.Mo=!0),3===s&&(this.No=64,(0,j.hm)(64),this.Mo=!0),4===s&&(this.Mo=!1),this.Mo!==t&&(this.Mo&&this.ko?await this.hl(this.ko,this.xo,this.Do):(0,j.Go)(),this.So=0)}4===i&&(0===s&&(this.Oo=256,(0,j.nm)(256),this._o=!0),1===s&&(this.Oo=192,(0,j.nm)(192),this._o=!0),2===s&&(this.Oo=128,(0,j.nm)(128),this._o=!0),3===s&&(this.Oo=64,(0,j.nm)(64),this._o=!0),4===s&&(this._o=!1)),5===i&&(this.Pe=s),6===i&&(this.le=s),8===i&&(this.oe=s,this.sh=!0)}};rm=(t,i)=>{let s=0;for(let t=0;t<100;t++){if(!this.he[t])continue;const h=this.messageType[t],e=this.Oh+70+4-14*s;if(e<-20)break;0===h&&s++,1!==h&&2!==h||!(1===h||0===this.Kh||1===this.Kh&&this.Iu(this.ee[t]))||(i>e-14&&i<=e&&this.Vr&&this.ee[t]!==this.Vr.name&&(this.Jr&&(this._h[this.Ih]='Report abuse @whi@'+this.ee[t],this.Fe[this.Ih]=34,this.Ih++),this._h[this.Ih]='Add ignore @whi@'+this.ee[t],this.Fe[this.Ih]=436,this.Ih++,this._h[this.Ih]='Add friend @whi@'+this.ee[t],this.Fe[this.Ih]=406,this.Ih++),s++),3!==h&&7!==h||0!==this.oe||!(7===h||0===this.Xh||1===this.Xh&&this.Iu(this.ee[t]))||(i>e-14&&i<=e&&(this.Jr&&(this._h[this.Ih]='Report abuse @whi@'+this.ee[t],this.Fe[this.Ih]=34,this.Ih++),this._h[this.Ih]='Add ignore @whi@'+this.ee[t],this.Fe[this.Ih]=436,this.Ih++,this._h[this.Ih]='Add friend @whi@'+this.ee[t],this.Fe[this.Ih]=406,this.Ih++),s++),4===h&&(0===this.zh||1===this.zh&&this.Iu(this.ee[t]))&&(i>e-14&&i<=e&&(this._h[this.Ih]='Accept trade @whi@'+this.ee[t],this.Fe[this.Ih]=903,this.Ih++),s++),(5===h||6===h)&&0===this.oe&&this.Xh<2&&s++,8===h&&(0===this.zh||1===this.zh&&this.Iu(this.ee[t]))&&(i>e-14&&i<=e&&(this._h[this.Ih]='Accept duel @whi@'+this.ee[t],this.Fe[this.Ih]=363,this.Ih++),s++)}};om=t=>{if(0===this.oe)return;let i=0;0!==this.hi&&(i=1);for(let s=0;s<100;s++)if(null!==this.he[s]){const h=this.messageType[s];if((3===h||7===h)&&(7===h||0===this.Xh||1===this.Xh&&this.Iu(this.ee[s]))){const h=329-13*i;if(this.Kl>8&&this.Kl<520&&t-11>h-10&&t-11<=h+3&&(this.Jr&&(this._h[this.Ih]='Report abuse @whi@'+this.ee[s],this.Fe[this.Ih]=2034,this.Ih++),this._h[this.Ih]='Add ignore @whi@'+this.ee[s],this.Fe[this.Ih]=2436,this.Ih++,this._h[this.Ih]='Add friend @whi@'+this.ee[s],this.Fe[this.Ih]=2406,this.Ih++),i++,i>=5)return}if((5===h||6===h)&&this.Xh<2&&(i++,i>=5))return}};lm=(t,i,s,h,e,r)=>{if(0!==t.type||!t._l||t.hide||i<h||s<e||i>h+t.width||s>e+t.height||!t.Rl||!t.Sl)return;const o=t._l.length;for(let l=0;l<o;l++){let o=t.Rl[l]+h,a=t.Sl[l]+e-r;const f=c.A.Wo[t._l[l]];if(o+=f.x,a+=f.y,(f.am>=0||0!==f.ha)&&i>=o&&s>=a&&i<o+f.width&&s<a+f.height&&(f.am>=0?this.Ye=f.am:this.Ye=f.id),0===f.type)this.lm(f,i,s,o,a,f.Pl),f.scroll>f.height&&this.Gf(i,s,f.scroll,f.height,!0,o+f.width,a,f);else if(2===f.type){let t=0;for(let h=0;h<f.height;h++)for(let e=0;e<f.width;e++){let r=o+e*(f.Wl+32),l=a+h*(f.Yl+32);if(t<20&&f.Ul&&f.Bl&&(r+=f.Ul[t],l+=f.Bl[t]),i<r||s<l||i>=r+32||s>=l+32){t++;continue}if(this.We=t,this.He=f.id,!f.Gl||f.Gl[t]<=0){t++;continue}const c=n.A.get(f.Gl[t]-1);if(1===this._e&&f.fm)f.id===this.ge&&t===this.Ee||(this._h[this.Ih]='Use '+this.Te+' with @lre@'+c.name,this.Fe[this.Ih]=881,this.Ue[this.Ih]=c.id,this.Be[this.Ih]=t,this.Ge[this.Ih]=f.id,this.Ih++);else if(1===this.ke&&f.fm)16&~this.De||(this._h[this.Ih]=this.Ne+' @lre@'+c.name,this.Fe[this.Ih]=391,this.Ue[this.Ih]=c.id,this.Be[this.Ih]=t,this.Ge[this.Ih]=f.id,this.Ih++);else{if(f.fm)for(let i=4;i>=3;i--)c.um&&c.um[i]?(this._h[this.Ih]=c.um[i]+' @lre@'+c.name,3===i?this.Fe[this.Ih]=478:4===i&&(this.Fe[this.Ih]=347),this.Ue[this.Ih]=c.id,this.Be[this.Ih]=t,this.Ge[this.Ih]=f.id,this.Ih++):4===i&&(this._h[this.Ih]='Drop @lre@'+c.name,this.Fe[this.Ih]=347,this.Ue[this.Ih]=c.id,this.Be[this.Ih]=t,this.Ge[this.Ih]=f.id,this.Ih++);if(f.dm&&(this._h[this.Ih]='Use @lre@'+c.name,this.Fe[this.Ih]=188,this.Ue[this.Ih]=c.id,this.Be[this.Ih]=t,this.Ge[this.Ih]=f.id,this.Ih++),f.fm&&c.um)for(let i=2;i>=0;i--)c.um[i]&&(this._h[this.Ih]=c.um[i]+' @lre@'+c.name,0===i?this.Fe[this.Ih]=405:1===i?this.Fe[this.Ih]=38:2===i&&(this.Fe[this.Ih]=422),this.Ue[this.Ih]=c.id,this.Be[this.Ih]=t,this.Ge[this.Ih]=f.id,this.Ih++);if(f.wm)for(let i=4;i>=0;i--)f.wm[i]&&(this._h[this.Ih]=f.wm[i]+' @lre@'+c.name,0===i?this.Fe[this.Ih]=602:1===i?this.Fe[this.Ih]=596:2===i?this.Fe[this.Ih]=22:3===i?this.Fe[this.Ih]=892:4===i&&(this.Fe[this.Ih]=415),this.Ue[this.Ih]=c.id,this.Be[this.Ih]=t,this.Ge[this.Ih]=f.id,this.Ih++);this._h[this.Ih]='Examine @lre@'+c.name,$.K.Et&&(this._h[this.Ih]+='@whi@ ('+c.id+')'),this.Fe[this.Ih]=1773,this.Ue[this.Ih]=c.id,f.Hl&&(this.Ge[this.Ih]=f.Hl[t]),this.Ih++}t++}}else if(i>=o&&s>=a&&i<o+f.width&&s<a+f.height)if(f.ra===c.A.ym){let t=!1;0!==f.xl&&(t=this.Am(f)),!t&&f.pm&&(this._h[this.Ih]=f.pm,this.Fe[this.Ih]=951,this.Ge[this.Ih]=f.id,this.Ih++)}else if(f.ra===c.A.Im&&0===this.ke){let t=f.kw;t&&-1!==t.indexOf(' ')&&(t=t.substring(0,t.indexOf(' '))),this._h[this.Ih]=t+' @gre@'+f.action,this.Fe[this.Ih]=930,this.Ge[this.Ih]=f.id,this.Ih++}else f.ra===c.A._m?(this._h[this.Ih]='Close',this.Fe[this.Ih]=947,this.Ge[this.Ih]=f.id,this.Ih++):f.ra===c.A.Em&&f.pm?(this._h[this.Ih]=f.pm,this.Fe[this.Ih]=465,this.Ge[this.Ih]=f.id,this.Ih++):f.ra===c.A.gm&&f.pm?(this._h[this.Ih]=f.pm,this.Fe[this.Ih]=960,this.Ge[this.Ih]=f.id,this.Ih++):f.ra===c.A.oa&&!this.Re&&f.pm&&(this._h[this.Ih]=f.pm,this.Fe[this.Ih]=44,this.Ge[this.Ih]=f.id,this.Ih++)}};Am=t=>{let i=t.xl;return i>=c.A.va&&i<=c.A.Sa?(i>=c.A.Ra?i-=c.A.Ra:i--,this._h[this.Ih]='Remove @whi@'+this.yo[i],this.Fe[this.Ih]=557,this.Ih++,this._h[this.Ih]='Message @whi@'+this.yo[i],this.Fe[this.Ih]=679,this.Ih++,!0):i>=c.A.ka&&i<=c.A.xa&&(this._h[this.Ih]='Remove @whi@'+t.text,this.Fe[this.Ih]=556,this.Ih++,!0)};Cm=()=>{0===this._e&&0===this.ke&&(this._h[this.Ih]='Walk here',this.Fe[this.Ih]=660,this.Be[this.Ih]=this.Kl,this.Ge[this.Ih]=this.Xl,this.Ih++);let t=-1;for(let i=0;i<p.A.hu;i++){const s=p.A.Tm[i],h=127&s,r=s>>7&127,o=s>>29&3,l=s>>14&32767;if(s!==t){if(t=s,2===o&&this.tn&&this.tn.xd(this.zn,h,r,s)>=0){const t=e.A.get(l);if(1===this._e)this._h[this.Ih]='Use '+this.Te+' with @cya@'+t.name,this.Fe[this.Ih]=450,this.Ue[this.Ih]=s,this.Be[this.Ih]=h,this.Ge[this.Ih]=r,this.Ih++;else if(1!==this.ke){if(t.Om)for(let i=4;i>=0;i--)t.Om[i]&&(this._h[this.Ih]=t.Om[i]+' @cya@'+t.name,0===i&&(this.Fe[this.Ih]=285),1===i&&(this.Fe[this.Ih]=504),2===i&&(this.Fe[this.Ih]=364),3===i&&(this.Fe[this.Ih]=581),4===i&&(this.Fe[this.Ih]=1501),this.Ue[this.Ih]=s,this.Be[this.Ih]=h,this.Ge[this.Ih]=r,this.Ih++);this._h[this.Ih]='Examine @cya@'+t.name,$.K.Et&&(this._h[this.Ih]+='@whi@ ('+t.id+')'),this.Fe[this.Ih]=1175,this.Ue[this.Ih]=s,this.Be[this.Ih]=h,this.Ge[this.Ih]=r,this.Ih++}else 4&~this.De||(this._h[this.Ih]=this.Ne+' @cya@'+t.name,this.Fe[this.Ih]=55,this.Ue[this.Ih]=s,this.Be[this.Ih]=h,this.Ge[this.Ih]=r,this.Ih++)}if(1===o){const t=this.Lr[l];if(t&&t.type&&1===t.type.size&&64==(127&t.x)&&64==(127&t.z))for(let i=0;i<this.Rr;i++){const s=this.Lr[this.Sr[i]];s&&s!==t&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.bm(s.type,this.Sr[i],h,r)}t&&t.type&&this.bm(t.type,l,h,r)}if(0===o){const t=this._r[l];if(t&&64==(127&t.x)&&64==(127&t.z)){for(let i=0;i<this.Rr;i++){const s=this.Lr[this.Sr[i]];s&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.bm(s.type,this.Sr[i],h,r)}for(let i=0;i<this.Er;i++){const s=this._r[this.gr[i]];s&&s!==t&&s.x===t.x&&s.z===t.z&&this.vm(s,this.gr[i],h,r)}}t&&this.vm(t,l,h,r)}if(3===o){const t=this.Pr[this.zn][h][r];if(!t)continue;for(let i=t.Lm();i;i=t.Rm()){const t=n.A.get(i.index);if(1===this._e)this._h[this.Ih]='Use '+this.Te+' with @lre@'+t.name,this.Fe[this.Ih]=217,this.Ue[this.Ih]=i.index,this.Be[this.Ih]=h,this.Ge[this.Ih]=r,this.Ih++;else if(1!==this.ke){for(let s=4;s>=0;s--)t.Om&&t.Om[s]?(this._h[this.Ih]=t.Om[s]+' @lre@'+t.name,0===s&&(this.Fe[this.Ih]=224),1===s&&(this.Fe[this.Ih]=993),2===s&&(this.Fe[this.Ih]=99),3===s&&(this.Fe[this.Ih]=746),4===s&&(this.Fe[this.Ih]=877),this.Ue[this.Ih]=i.index,this.Be[this.Ih]=h,this.Ge[this.Ih]=r,this.Ih++):2===s&&(this._h[this.Ih]='Take @lre@'+t.name,this.Fe[this.Ih]=99,this.Ue[this.Ih]=i.index,this.Be[this.Ih]=h,this.Ge[this.Ih]=r,this.Ih++);this._h[this.Ih]='Examine @lre@'+t.name,$.K.Et&&(this._h[this.Ih]+='@whi@ ('+i.index+')'),this.Fe[this.Ih]=1102,this.Ue[this.Ih]=i.index,this.Be[this.Ih]=h,this.Ge[this.Ih]=r,this.Ih++}else 1&~this.De||(this._h[this.Ih]=this.Ne+' @lre@'+t.name,this.Fe[this.Ih]=965,this.Ue[this.Ih]=i.index,this.Be[this.Ih]=h,this.Ge[this.Ih]=r,this.Ih++)}}}}};bm=(t,i,s,h)=>{if(this.Ih>=400)return;let e=t.name;if(0!==t.Sm&&this.Vr&&(e=e+this.Mm(this.Vr.hc,t.Sm)+' (level-'+t.Sm+')'),1===this._e)this._h[this.Ih]='Use '+this.Te+' with @yel@'+e,this.Fe[this.Ih]=900,this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++;else if(1!==this.ke){let n;if(t.Om)for(n=4;n>=0;n--)t.Om[n]&&'attack'!==t.Om[n]?.toLowerCase()&&(this._h[this.Ih]=t.Om[n]+' @yel@'+e,0===n?this.Fe[this.Ih]=728:1===n?this.Fe[this.Ih]=542:2===n?this.Fe[this.Ih]=6:3===n?this.Fe[this.Ih]=963:4===n&&(this.Fe[this.Ih]=245),this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++);if(t.Om)for(n=4;n>=0;n--)if(t.Om[n]&&'attack'===t.Om[n]?.toLowerCase()){let r=0;this.Vr&&t.Sm>this.Vr.hc&&(r=2e3),this._h[this.Ih]=t.Om[n]+' @yel@'+e,0===n?this.Fe[this.Ih]=r+728:1===n?this.Fe[this.Ih]=r+542:2===n?this.Fe[this.Ih]=r+6:3===n?this.Fe[this.Ih]=r+963:4===n&&(this.Fe[this.Ih]=r+245),this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++}this._h[this.Ih]='Examine @yel@'+e,$.K.Et&&(this._h[this.Ih]+='@whi@ ('+t.id+')'),this.Fe[this.Ih]=1607,this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++}else 2&~this.De||(this._h[this.Ih]=this.Ne+' @yel@'+e,this.Fe[this.Ih]=265,this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++)};vm=(t,i,s,h)=>{if(t===this.Vr||this.Ih>=400)return;let e=null;this.Vr&&(e=t.name+this.Mm(this.Vr.hc,t.hc)+' (level-'+t.hc+')'),1===this._e?(this._h[this.Ih]='Use '+this.Te+' with @whi@'+e,this.Fe[this.Ih]=367,this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++):1!==this.ke?(this._h[this.Ih]='Follow @whi@'+e,this.Fe[this.Ih]=1544,this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++,0===this.uh&&(this._h[this.Ih]='Trade with @whi@'+e,this.Fe[this.Ih]=1373,this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++),this.qr>0&&(this._h[this.Ih]='Attack @whi@'+e,this.Vr&&this.Vr.hc>=t.hc?this.Fe[this.Ih]=151:this.Fe[this.Ih]=2151,this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++),1===this.$r&&(this._h[this.Ih]='Fight @whi@'+e,this.Fe[this.Ih]=151,this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++),2===this.$r&&(this._h[this.Ih]='Duel-with @whi@'+e,this.Fe[this.Ih]=1101,this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++)):8&~this.De||(this._h[this.Ih]=this.Ne+' @whi@'+e,this.Fe[this.Ih]=651,this.Ue[this.Ih]=i,this.Be[this.Ih]=s,this.Ge[this.Ih]=h,this.Ih++);for(let t=0;t<this.Ih;t++)if(660===this.Fe[t])return void(this._h[t]='Walk here @whi@'+e)};Mm=(t,i)=>{const s=t-i;return s<-9?'@red@':s<-6?'@or3@':s<-3?'@or2@':s<0?'@or1@':s>9?'@gre@':s>6?'@gr3@':s>3?'@gr2@':s>0?'@gr1@':'@yel@'};Af=()=>{if(0===this.ye){this._h[0]='Cancel',this.Fe[0]=1252,this.Ih=1,this.om(this.Xl),this.Ye=0,this.Kl>8&&this.Xl>11&&this.Kl<520&&this.Xl<345&&(-1===this.nh?this.Cm():this.lm(c.A.Wo[this.nh],this.Kl,this.Xl,8,11,0)),this.Ye!==this.ce&&(this.ce=this.Ye),this.Ye=0,this.Kl>562&&this.Xl>231&&this.Kl<752&&this.Xl<492&&(-1!==this.Eh?this.lm(c.A.Wo[this.Eh],this.Kl,this.Xl,562,231,0):-1!==this.Vh[this.Yh]&&this.lm(c.A.Wo[this.Vh[this.Yh]],this.Kl,this.Xl,562,231,0)),this.Ye!==this.fe&&(this.ih=!0,this.fe=this.Ye),this.Ye=0,this.Kl>22&&this.Xl>375&&this.Kl<431&&this.Xl<471&&(-1===this.gh?this.rm(this.Kl-22,this.Xl-375):this.lm(c.A.Wo[this.gh],this.Kl,this.Xl,22,375,0)),-1!==this.gh&&this.Ye!==this.ue&&(this.sh=!0,this.ue=this.Ye);let t=!1;for(;!t;){t=!0;for(let i=0;i<this.Ih-1;i++)if(this.Fe[i]<1e3&&this.Fe[i+1]>1e3){const s=this._h[i];this._h[i]=this._h[i+1],this._h[i+1]=s;const h=this.Fe[i];this.Fe[i]=this.Fe[i+1],this.Fe[i+1]=h;const e=this.Be[i];this.Be[i]=this.Be[i+1],this.Be[i+1]=e;const n=this.Ge[i];this.Ge[i]=this.Ge[i+1],this.Ge[i+1]=n;const r=this.Ue[i];this.Ue[i]=this.Ue[i+1],this.Ue[i+1]=r,t=!1}}}};If=()=>{let t=0;if(this.Li){let i;t=this.Li._u('Choose Option');for(let s=0;s<this.Ih;s++)i=this.Li._u(this._h[s]),i>t&&(t=i)}t+=8;const i=15*this.Ih+21;let s,h;this.Hc>8&&this.Wc>11&&this.Hc<520&&this.Wc<345&&(s=this.Hc-(t/2|0)-8,s+t>512?s=512-t:s<0&&(s=0),h=this.Wc-11,h+i>334?h=334-i:h<0&&(h=0),this.dh=!0,this.wh=0,this.yh=s,this.Ah=h,this.ph=t,this.mh=15*this.Ih+22),this.Hc>562&&this.Wc>231&&this.Hc<752&&this.Wc<492&&(s=this.Hc-(t/2|0)-562,s<0?s=0:s+t>190&&(s=190-t),h=this.Wc-231,h<0?h=0:h+i>261&&(h=261-i),this.dh=!0,this.wh=1,this.yh=s,this.Ah=h,this.ph=t,this.mh=15*this.Ih+22),this.Hc>22&&this.Wc>375&&this.Hc<501&&this.Wc<471&&(s=this.Hc-(t/2|0)-22,s<0?s=0:s+t>479&&(s=479-t),h=this.Wc-375,h<0?h=0:h+i>96&&(h=96-i),this.dh=!0,this.wh=2,this.yh=s,this.Ah=h,this.ph=t,this.mh=15*this.Ih+22)};Tf=(t,i,s,h,e,n,r,o,l,a,c)=>{const f=this.Kn[this.zn];if(!f)return!1;const u=G.A.nr,d=G.A.nr;for(let t=0;t<u;t++)for(let i=0;i<d;i++){const s=G.A.index(t,i);this.Hr[s]=0,this.Wr[s]=99999999}let w=t,y=i;const A=G.A.index(t,i);this.Hr[A]=99,this.Wr[A]=0;let p=0,m=0;this.Br[p]=t,this.Gr[p++]=i;let I=!1,_=this.Br.length;const E=f.flags;for(;m!==p;){if(w=this.Br[m],y=this.Gr[m],m=(m+1)%_,w===s&&y===h){I=!0;break}if(l!==P.A.Nd.id){if((l<P.A.km.id||l===P.A.gy.id)&&f.xm(w,y,s,h,l-1,o)){I=!0;break}if(l<P.A.gy.id&&f.Dm(w,y,s,h,l-1,o)){I=!0;break}}if(0!==n&&0!==r&&f.Nm(w,y,s,h,n,r,a)){I=!0;break}const t=this.Wr[G.A.index(w,y)]+1;let i=G.A.index(w-1,y);w>0&&0===this.Hr[i]&&(E[i]&H.A.Ld)===H.A.OPEN&&(this.Br[p]=w-1,this.Gr[p]=y,p=(p+1)%_,this.Hr[i]=2,this.Wr[i]=t),i=G.A.index(w+1,y),w<u-1&&0===this.Hr[i]&&(E[i]&H.A.Rd)===H.A.OPEN&&(this.Br[p]=w+1,this.Gr[p]=y,p=(p+1)%_,this.Hr[i]=8,this.Wr[i]=t),i=G.A.index(w,y-1),y>0&&0===this.Hr[i]&&(E[i]&H.A.Sd)===H.A.OPEN&&(this.Br[p]=w,this.Gr[p]=y-1,p=(p+1)%_,this.Hr[i]=1,this.Wr[i]=t),i=G.A.index(w,y+1),y<d-1&&0===this.Hr[i]&&(E[i]&H.A.Md)===H.A.OPEN&&(this.Br[p]=w,this.Gr[p]=y+1,p=(p+1)%_,this.Hr[i]=4,this.Wr[i]=t),i=G.A.index(w-1,y-1),w>0&&y>0&&0===this.Hr[i]&&!(E[i]&H.A.Pm)&&(E[G.A.index(w-1,y)]&H.A.Ld)===H.A.OPEN&&(E[G.A.index(w,y-1)]&H.A.Sd)===H.A.OPEN&&(this.Br[p]=w-1,this.Gr[p]=y-1,p=(p+1)%_,this.Hr[i]=3,this.Wr[i]=t),i=G.A.index(w+1,y-1),w<u-1&&y>0&&0===this.Hr[i]&&!(E[i]&H.A.Fm)&&(E[G.A.index(w+1,y)]&H.A.Rd)===H.A.OPEN&&(E[G.A.index(w,y-1)]&H.A.Sd)===H.A.OPEN&&(this.Br[p]=w+1,this.Gr[p]=y-1,p=(p+1)%_,this.Hr[i]=9,this.Wr[i]=t),i=G.A.index(w-1,y+1),w>0&&y<d-1&&0===this.Hr[i]&&!(E[i]&H.A.Um)&&(E[G.A.index(w-1,y)]&H.A.Ld)===H.A.OPEN&&(E[G.A.index(w,y+1)]&H.A.Md)===H.A.OPEN&&(this.Br[p]=w-1,this.Gr[p]=y+1,p=(p+1)%_,this.Hr[i]=6,this.Wr[i]=t),i=G.A.index(w+1,y+1),w<u-1&&y<d-1&&0===this.Hr[i]&&!(E[i]&H.A.Bm)&&(E[G.A.index(w+1,y)]&H.A.Rd)===H.A.OPEN&&(E[G.A.index(w,y+1)]&H.A.Md)===H.A.OPEN&&(this.Br[p]=w+1,this.Gr[p]=y+1,p=(p+1)%_,this.Hr[i]=12,this.Wr[i]=t)}if(this.Yr=0,!I){if(c){let t=100;for(let i=1;i<2;i++){for(let e=s-i;e<=s+i;e++)for(let s=h-i;s<=h+i;s++){const i=G.A.index(e,s);e>=0&&s>=0&&e<G.A.nr&&s<G.A.nr&&this.Wr[i]<t&&(t=this.Wr[i],w=e,y=s,this.Yr=1,I=!0)}if(I)break}}if(!I)return!1}m=0,this.Br[m]=w,this.Gr[m++]=y;let g=this.Hr[G.A.index(w,y)],C=g;for(;w!==t||y!==i;)C!==g&&(g=C,this.Br[m]=w,this.Gr[m++]=y),C&ht.A.Bd?w++:C&ht.A.Fd&&w--,C&ht.A.Ud?y++:C&ht.A.Gd&&y--,C=this.Hr[G.A.index(w,y)];if(m>0){_=Math.min(m,25),m--;const t=this.Br[m],i=this.Gr[m];if($.K.Et&&1===this.df[6]&&1===this.df[7]){for(let t=0;t<this.Po.length;t++){const i=this.Po[t];if(i&&i.x===x.A.gf&&i.z===x.A.Cf)return this.Po[t]=null,!1}return this.Po[this.Fo]=new st.A(this.zn,x.A.gf,x.A.Cf),this.Fo=this.Fo+1&this.Po.length-1,!1}0===e?(this.Jt.nf(O.A.Gm),this.Jt.p1(_+_+3)):1===e?(this.Jt.nf(O.A.Hm),this.Jt.p1(_+_+3+14)):2===e&&(this.Jt.nf(O.A.Wm),this.Jt.p1(_+_+3)),1===this.df[5]?this.Jt.p1(1):this.Jt.p1(0),this.Jt.p2(t+this.Fn),this.Jt.p2(i+this.Un),this.nn=this.Br[0],this.rn=this.Gr[0];for(let s=1;s<_;s++)m--,this.Jt.p1(this.Br[m]-t),this.Jt.p1(this.Gr[m]-i);return!0}return 1!==e};Yp=(t,i)=>{this.Tr=0,this.Cr=0,this.Ym(t),this.Vm(t),this.Km(t,i),this.Xm(t);for(let t=0;t<this.Tr;t++){const i=this.br[t],s=this._r[i];s&&(s.iu!==this.Zt&&(this._r[i]=null))}if(t.ft!==i)throw new Error(`eek! Error packet size mismatch in getplayer pos:${t.ft} psize:${i}`);for(let t=0;t<this.Er;t++)if(!this._r[this.gr[t]])throw new Error(`eek! ${this.username} null entry in pl list - pos:${t} size:${this.Er}`)};Ym=t=>{t.zm();if(0!==t.jm(1)){const i=t.jm(2);if(0===i)this.Or[this.Cr++]=this.Vt;else if(1===i){const i=t.jm(3);this.Vr?.step(!1,i);1===t.jm(1)&&(this.Or[this.Cr++]=this.Vt)}else if(2===i){const i=t.jm(3);this.Vr?.step(!0,i);const s=t.jm(3);this.Vr?.step(!0,s);1===t.jm(1)&&(this.Or[this.Cr++]=this.Vt)}else if(3===i){this.zn=t.jm(2);const i=t.jm(7),s=t.jm(7),h=t.jm(1);this.Vr?.move(1===h,i,s);1===t.jm(1)&&(this.Or[this.Cr++]=this.Vt)}}};Vm=t=>{const i=t.jm(8);if(i<this.Er)for(let t=i;t<this.Er;t++)this.br[this.Tr++]=this.gr[t];if(i>this.Er)throw new Error(`eek! ${this.username} Too many players`);this.Er=0;for(let s=0;s<i;s++){const i=this.gr[s],h=this._r[i];if(0===t.jm(1))this.gr[this.Er++]=i,h&&(h.iu=this.Zt);else{const s=t.jm(2);if(0===s)this.gr[this.Er++]=i,h&&(h.iu=this.Zt),this.Or[this.Cr++]=i;else if(1===s){this.gr[this.Er++]=i,h&&(h.iu=this.Zt);const s=t.jm(3);h?.step(!1,s);1===t.jm(1)&&(this.Or[this.Cr++]=i)}else if(2===s){this.gr[this.Er++]=i,h&&(h.iu=this.Zt);const s=t.jm(3);h?.step(!0,s);const e=t.jm(3);h?.step(!0,e);1===t.jm(1)&&(this.Or[this.Cr++]=i)}else 3===s&&(this.br[this.Tr++]=i)}}};Km=(t,i)=>{let s;for(;t.Zm+10<8*i&&(s=t.jm(11),2047!==s);){if(!this._r[s]){this._r[s]=new W.A;const t=this.vr[s];t&&this._r[s]?.read(t)}this.gr[this.Er++]=s;const i=this._r[s];i&&(i.iu=this.Zt);let h=t.jm(5);h>15&&(h-=32);let e=t.jm(5);e>15&&(e-=32);const n=t.jm(1);this.Vr&&i?.move(1===n,this.Vr.Of[0]+h,this.Vr.bf[0]+e);1===t.jm(1)&&(this.Or[this.Cr++]=s)}t.qm()};Xm=t=>{for(let i=0;i<this.Cr;i++){const s=this.Or[i],h=this._r[s];if(!h)continue;let e=t.cA;(e&W.A.$m)===W.A.$m&&(e+=t.cA<<8),this.Jm(h,s,e,t)}};Jm=(t,i,s,e)=>{if(t.ku=s,t.xu=this.Zt,(s&W.A.Du)===W.A.Du){const s=e.cA,h=new Uint8Array(s),n=new I.A(h);e.YA(s,0,h),this.vr[i]=n,t.read(n)}if((s&W.A.Nu)===W.A.Nu){let i=e.ct;65535===i&&(i=-1),i===t.Pu&&(t.Qm=0);const s=e.cA;(-1===i||-1===t.Pu||h.A.Wo[i].priority>h.A.Wo[t.Pu].priority||0===h.A.Wo[t.Pu].priority)&&(t.Pu=i,t.tI=0,t.iI=0,t.sI=s,t.Qm=0)}if((s&W.A.Fu)===W.A.Fu&&(t.Uu=e.ct,65535===t.Uu&&(t.Uu=-1)),(s&W.A.Bu)===W.A.Bu&&(t.mu=e.gA,t.Eu=0,t.gu=0,t.Cu=150,t.name&&this.Zd(2,t.mu,t.name)),(s&W.A.Gu)===W.A.Gu&&(t.Lu=e.cA,t.vu=e.cA,t.Tu=this.Zt+400,t.Ou=e.cA,t.bu=e.cA),(s&W.A.Hu)===W.A.Hu&&(t.hI=e.ct,t.eI=e.ct,t.Wu=t.hI,t.Yu=t.eI),(s&W.A.Vu)===W.A.Vu){const i=e.ct,s=e.cA,h=e.cA,n=e.ft;if(t.name){const n=M.A._d(t.name);let r=!1;if(s<=1)for(let t=0;t<this.bh;t++)if(this.Lh[t]===n){r=!0;break}if(!r&&0===this.uh)try{const n=v.A.Ac(e,h),r=b.A.filter(n);t.mu=r,t.Eu=i>>8,t.gu=255&i,t.Cu=150,s>1?this.Zd(1,r,t.name):this.Zd(2,r,t.name)}catch(t){}}e.ft=n+h}if((s&W.A.Ku)===W.A.Ku){t.Xu=e.ct;const i=e.ut;t.nI=i>>16,t.rI=this.Zt+(65535&i),t.oI=0,t.lI=0,t.rI>this.Zt&&(t.oI=-1),65535===t.Xu&&(t.Xu=-1)}(s&W.A.zu)===W.A.zu&&(t.aI=e.cA,t.cI=e.cA,t.fI=e.cA,t.uI=e.cA,t.Ru=e.ct+this.Zt,t.Su=e.ct+this.Zt,t.dI=e.cA,t.pathLength=0,t.Of[0]=t.fI,t.bf[0]=t.uI)};wA=(t,i)=>{this.Tr=0,this.Cr=0,this.wI(t),this.yI(t,i),this.AI(t);for(let t=0;t<this.Tr;t++){const i=this.br[t],s=this.Lr[i];s&&(s.iu!==this.Zt&&(s.type=null,this.Lr[i]=null))}if(t.ft!==i)throw new Error(`eek! ${this.username} size mismatch in getnpcpos - pos:${t.ft} psize:${i}`);for(let t=0;t<this.Rr;t++)if(!this.Lr[this.Sr[t]])throw new Error(`eek! ${this.username} null entry in npc list - pos:${t} size:${this.Rr}`)};wI=t=>{t.zm();const i=t.jm(8);if(i<this.Rr)for(let t=i;t<this.Rr;t++)this.br[this.Tr++]=this.Sr[t];if(i>this.Rr)throw new Error(`eek! ${this.username} Too many npcs`);this.Rr=0;for(let s=0;s<i;s++){const i=this.Sr[s],h=this.Lr[i];if(0===t.jm(1))this.Sr[this.Rr++]=i,h&&(h.iu=this.Zt);else{const s=t.jm(2);if(0===s)this.Sr[this.Rr++]=i,h&&(h.iu=this.Zt),this.Or[this.Cr++]=i;else if(1===s){this.Sr[this.Rr++]=i,h&&(h.iu=this.Zt);const s=t.jm(3);h?.step(!1,s);1===t.jm(1)&&(this.Or[this.Cr++]=i)}else if(2===s){this.Sr[this.Rr++]=i,h&&(h.iu=this.Zt);const s=t.jm(3);h?.step(!0,s);const e=t.jm(3);h?.step(!0,e);1===t.jm(1)&&(this.Or[this.Cr++]=i)}else 3===s&&(this.br[this.Tr++]=i)}}};yI=(t,i)=>{for(;t.Zm+21<8*i;){const i=t.jm(13);if(8191===i)break;this.Lr[i]||(this.Lr[i]=new Y.A);const s=this.Lr[i];this.Sr[this.Rr++]=i,s?(s.iu=this.Zt,s.type=r.A.get(t.jm(11)),s.size=s.type.size,s.pI=s.type.mI,s.II=s.type._I,s.EI=s.type.gI,s.CI=s.type.TI,s.Wa=s.type.OI):t.jm(11);let h=t.jm(5);h>15&&(h-=32);let e=t.jm(5);e>15&&(e-=32),this.Vr&&s?.move(!1,this.Vr.Of[0]+h,this.Vr.bf[0]+e);1===t.jm(1)&&(this.Or[this.Cr++]=i)}t.qm()};AI=t=>{for(let i=0;i<this.Cr;i++){const s=this.Or[i],e=this.Lr[s];if(!e)continue;const n=t.cA;if(e.ku=n,e.xu=this.Zt,(n&Y.A.Nu)===Y.A.Nu){let i=t.ct;65535===i&&(i=-1),i===e.Pu&&(e.Qm=0);const s=t.cA;(-1===i||-1===e.Pu||h.A.Wo[i].priority>h.A.Wo[e.Pu].priority||0===h.A.Wo[e.Pu].priority)&&(e.Pu=i,e.tI=0,e.iI=0,e.sI=s,e.Qm=0)}if((n&Y.A.Fu)===Y.A.Fu&&(e.Uu=t.ct,65535===e.Uu&&(e.Uu=-1)),(n&Y.A.Bu)===Y.A.Bu&&(e.mu=t.gA,e.Cu=100),(n&Y.A.Gu)===Y.A.Gu&&(e.Lu=t.cA,e.vu=t.cA,e.Tu=this.Zt+400,e.Ou=t.cA,e.bu=t.cA),(n&Y.A.ju)===Y.A.ju&&(e.type=r.A.get(t.ct),e.pI=e.type.mI,e.II=e.type._I,e.EI=e.type.gI,e.CI=e.type.TI,e.Wa=e.type.OI),(n&Y.A.Ku)===Y.A.Ku){e.Xu=t.ct;const i=t.ut;e.nI=i>>16,e.rI=this.Zt+(65535&i),e.oI=0,e.lI=0,e.rI>this.Zt&&(e.oI=-1),65535===e.Xu&&(e.Xu=-1)}(n&Y.A.Hu)===Y.A.Hu&&(e.hI=t.ct,e.eI=t.ct,e.Wu=e.hI,e.Yu=e.eI)}};af=()=>{for(let t=-1;t<this.Er;t++){let i;i=-1===t?this.Vt:this.gr[t];const s=this._r[i];s&&this.bI(s)}if($.K.Mt++,$.K.Mt>1406){$.K.Mt=0,this.Jt.nf(O.A.vI),this.Jt.p1(0);const t=this.Jt.ft;this.Jt.p1(162),this.Jt.p1(22),2*Math.random()|0||this.Jt.p1(84),this.Jt.p2(31824),this.Jt.p2(13490),2*Math.random()|0||this.Jt.p1(123),2*Math.random()|0||this.Jt.p1(134),this.Jt.p1(100),this.Jt.p1(94),this.Jt.p2(35521),this.Jt.Jf(this.Jt.ft-t)}};bI=t=>{(t.x<128||t.z<128||t.x>=13184||t.z>=13184)&&(t.Pu=-1,t.Xu=-1,t.Ru=0,t.Su=0,t.x=128*t.Of[0]+64*t.size,t.z=128*t.bf[0]+64*t.size,t.pathLength=0),t===this.Vr&&(t.x<1536||t.z<1536||t.x>=11776||t.z>=11776)&&(t.Pu=-1,t.Xu=-1,t.Ru=0,t.Su=0,t.x=128*t.Of[0]+64*t.size,t.z=128*t.bf[0]+64*t.size,t.pathLength=0),t.Ru>this.Zt?this.LI(t):t.Su>=this.Zt?this.RI(t):this.SI(t),this.MI(t),this.kI(t)};Vf=()=>{if(this.Vr){this.Vr.x>>7===this.nn&&this.Vr.z>>7===this.rn&&(this.nn=0);for(let t=-1;t<this.Er;t++){let i,s;if(-1===t?(i=this.Vr,s=this.Vt<<14):(i=this._r[this.gr[t]],s=this.gr[t]<<14),!i||!i.isVisible())continue;i.At=($.K.At&&this.Er>50||this.Er>200)&&-1!==t&&i.xI===i.Wa;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.A.nr||e<0||e>=G.A.nr))if(!i.DI||this.Zt<i.NI||this.Zt>=i.FI){if(64==(127&i.x)&&64==(127&i.z)){if(this.hr[h][e]===this.en)continue;this.hr[h][e]=this.en}i.y=this.qf(this.zn,i.x,i.z),this.tn?.UI(this.zn,i.x,i.y,i.z,null,i,s,i.BI,60,i.GI)}else i.At=!1,i.y=this.qf(this.zn,i.x,i.z),this.tn?.HI(this.zn,i.x,i.y,i.z,i.WI,i.YI,i.VI,i.KI,null,i,s,i.BI)}}};cf=()=>{for(let t=0;t<this.Rr;t++){const i=this.Sr[t],s=this.Lr[i];s&&s.type&&this.bI(s)}};Kf=()=>{for(let t=0;t<this.Rr;t++){const i=this.Lr[this.Sr[t]],s=536870912+(this.Sr[t]<<14)|0;if(!i||!i.isVisible())continue;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.A.nr||e<0||e>=G.A.nr)){if(1===i.size&&64==(127&i.x)&&64==(127&i.z)){if(this.hr[h][e]===this.en)continue;this.hr[h][e]=this.en}this.tn?.UI(this.zn,i.x,this.qf(this.zn,i.x,i.z),i.z,null,i,s,i.BI,64*(i.size-1)+60,i.GI)}}};Xf=()=>{for(let t=this.Mr.head();t;t=this.Mr.next())if(t.level!==this.zn||this.Zt>t.XI)t.pA();else if(this.Zt>=t.zI){if(t.target>0){const i=this.Lr[t.target-1];i&&t.jI(i.x,this.qf(t.level,i.x,i.z)-t.offsetY,i.z,this.Zt)}if(t.target<0){const i=-t.target-1;let s;s=i===this.zr?this.Vr:this._r[i],s&&t.jI(s.x,this.qf(t.level,s.x,s.z)-t.offsetY,s.z,this.Zt)}t.update(this.hn),this.tn?.UI(this.zn,0|t.x,0|t.y,0|t.z,null,t,-1,t.BI,60,!1)}};zf=()=>{for(let t=this.kr.head();t;t=this.kr.next())t.level!==this.zn||t.ZI?t.pA():this.Zt>=t.zI&&(t.update(this.hn),t.ZI?t.pA():this.tn?.UI(t.level,t.x,t.y,t.z,null,t,-1,0,60,!1))};jf=()=>{for(let t=this.Dr.head();t;t=this.Dr.next()){let i=!1;if(t.Cl+=this.hn,-1===t.Tl&&(t.Tl=0,i=!0),t.qI.delay)for(;t.Cl>t.qI.delay[t.Tl];)if(t.Cl-=t.qI.delay[t.Tl]+1,t.Tl++,i=!0,t.Tl>=t.qI.Ol&&(t.Tl-=t.qI.bl,t.Tl<0||t.Tl>=t.qI.Ol)){t.pA(),i=!1;break}if(i&&this.tn){const i=t.tm,s=t.Jp,h=t.Qp;let n=0;if(0===t.$I?n=this.tn.kd(i,s,h):1===t.$I?n=this.tn.jy(i,h,s):2===t.$I?n=this.tn.Wd(i,s,h):3===t.$I&&(n=this.tn.bd(i,s,h)),this.ir&&0!==n&&(n>>14&32767)===t.index){const r=this.ir[i][s][h],o=this.ir[i][s+1][h],l=this.ir[i][s+1][h+1],a=this.ir[i][s][h+1],c=e.A.get(t.index);let f=-1;if(-1!==t.Tl&&t.qI.frames&&(f=t.qI.frames[t.Tl]),2===t.$I){const t=this.tn.xd(i,s,h,n);let e=31&t;const u=t>>6;e===P.A.Cy.id&&(e=P.A.gy.id),this.tn?.JI(i,s,h,c._a(e,u,r,o,l,a,f))}else if(1===t.$I)this.tn?.QI(i,s,h,c._a(P.A.t_.id,0,r,o,l,a,f));else if(0===t.$I){const t=this.tn.xd(i,s,h,n),e=31&t,u=t>>6;if(e===P.A.Pd.id){const t=u+1&3;this.tn?.i_(s,h,i,c._a(P.A.Pd.id,u+4,r,o,l,a,f),c._a(P.A.Pd.id,t,r,o,l,a,f))}else this.tn?.s_(i,s,h,c._a(e,u,r,o,l,a,f))}else if(3===t.$I){const t=this.tn.xd(i,s,h,n)>>6;this.tn?.h_(i,s,h,c._a(P.A.Ty.id,t,r,o,l,a,f))}}else t.pA()}}};ff=()=>{for(let t=-1;t<this.Er;t++){let i;i=-1===t?this.Vt:this.gr[t];const s=this._r[i];s&&s.Cu>0&&(s.Cu--,0===s.Cu&&(s.mu=null))}for(let t=0;t<this.Rr;t++){const i=this.Sr[t],s=this.Lr[i];s&&s.Cu>0&&(s.Cu--,0===s.Cu&&(s.mu=null))}};uf=()=>{if(2===this.sn){for(let t=this.Nr.head();t;t=this.Nr.next())this.Zt>=t.XI&&(this.Ky(t.dp,t.x,t.z,t.im,t.angle,t.shape,t.Xd),t.pA());$.K.St++,$.K.St>85&&($.K.St=0,this.Jt.nf(O.A.e_))}};LI=t=>{const i=t.Ru-this.Zt,s=128*t.aI+64*t.size,h=128*t.cI+64*t.size;t.x+=(s-t.x)/i|0,t.z+=(h-t.z)/i|0,t.n_=0,0===t.dI&&(t.r_=1024),1===t.dI&&(t.r_=1536),2===t.dI&&(t.r_=0),3===t.dI&&(t.r_=512)};RI=t=>{if(t.Su===this.Zt||-1===t.Pu||0!==t.sI||t.iI+1>h.A.Wo[t.Pu].delay[t.tI]){const i=t.Su-t.Ru,s=this.Zt-t.Ru,h=128*t.aI+64*t.size,e=128*t.cI+64*t.size,n=128*t.fI+64*t.size,r=128*t.uI+64*t.size;t.x=(h*(i-s)+n*s)/i|0,t.z=(e*(i-s)+r*s)/i|0}t.n_=0,0===t.dI&&(t.r_=1024),1===t.dI&&(t.r_=1536),2===t.dI&&(t.r_=0),3===t.dI&&(t.r_=512),t.BI=t.r_};MI=t=>{if(-1!==t.Uu&&t.Uu<32768){const i=this.Lr[t.Uu];if(i){const s=t.x-i.x,h=t.z-i.z;0===s&&0===h||(t.r_=325.949*Math.atan2(s,h)&2047)}}if(t.Uu>=32768){let i=t.Uu-32768;i===this.zr&&(i=this.Vt);const s=this._r[i];if(s){const i=t.x-s.x,h=t.z-s.z;0===i&&0===h||(t.r_=325.949*Math.atan2(i,h)&2047)}}if((0!==t.hI||0!==t.eI)&&(0===t.pathLength||t.n_>0)){const i=t.x-64*(t.hI-this.Fn-this.Fn),s=t.z-64*(t.eI-this.Un-this.Un);0===i&&0===s||(t.r_=325.949*Math.atan2(i,s)&2047),t.hI=0,t.eI=0}const i=t.r_-t.BI&2047;if(0!==i&&(i<32||i>2016?t.BI=t.r_:i>1024?t.BI-=32:t.BI+=32,t.BI&=2047,t.xI===t.Wa&&t.BI!==t.r_)){if(-1!==t.o_)return void(t.xI=t.o_);t.xI=t.pI}};kI=t=>{let i;if(t.GI=!1,-1!==t.xI&&(i=h.A.Wo[t.xI],t.l_++,i.delay&&t.a_<i.Ol&&t.l_>i.delay[t.a_]&&(t.l_=0,t.a_++),t.a_>=i.Ol&&(t.l_=0,t.a_=0)),-1!==t.Pu&&0===t.sI){for(i=h.A.Wo[t.Pu],t.iI++;i.delay&&t.tI<i.Ol&&t.iI>i.delay[t.tI];)t.iI-=i.delay[t.tI],t.tI++;t.tI>=i.Ol&&(t.tI-=i.bl,t.Qm++,t.Qm>=i.c_&&(t.Pu=-1),(t.tI<0||t.tI>=i.Ol)&&(t.Pu=-1)),t.GI=i.f_}if(t.sI>0&&t.sI--,-1!==t.Xu&&this.Zt>=t.rI){for(t.oI<0&&(t.oI=0),i=l.A.Wo[t.Xu].qI,t.lI++;i&&i.delay&&t.oI<i.Ol&&t.lI>i.delay[t.oI];)t.lI-=i.delay[t.oI],t.oI++;i&&t.oI>=i.Ol&&(t.oI<0||t.oI>=i.Ol)&&(t.Xu=-1)}};SI=t=>{if(t.xI=t.Wa,0===t.pathLength)return void(t.n_=0);if(-1!==t.Pu&&0===t.sI){if(!h.A.Wo[t.Pu].u_)return void t.n_++}const i=t.x,s=t.z,e=128*t.Of[t.pathLength-1]+64*t.size,n=128*t.bf[t.pathLength-1]+64*t.size;if(e-i<=256&&e-i>=-256&&n-s<=256&&n-s>=-256){t.r_=i<e?s<n?1280:s>n?1792:1536:i>e?s<n?768:s>n?256:512:s<n?1024:0;let h=t.r_-t.BI&2047;h>1024&&(h-=2048);let r=t.II;h>=-256&&h<=256?r=t.pI:h>=256&&h<768?r=t.CI:h>=-768&&h<=-256&&(r=t.EI),-1===r&&(r=t.pI),t.xI=r;let o=4;t.BI!==t.r_&&-1===t.Uu&&(o=2),t.pathLength>2&&(o=6),t.pathLength>3&&(o=8),t.n_>0&&t.pathLength>1&&(o=8,t.n_--),t.d_[t.pathLength-1]&&(o<<=1),o>=8&&t.xI===t.pI&&-1!==t.w_&&(t.xI=t.w_),i<e?(t.x+=o,t.x>e&&(t.x=e)):i>e&&(t.x-=o,t.x<e&&(t.x=e)),s<n?(t.z+=o,t.z>n&&(t.z=n)):s>n&&(t.z-=o,t.z<n&&(t.z=n)),t.x===e&&t.z===n&&t.pathLength--}else t.x=e,t.z=n};tu=()=>{let t=3;if(this.Tn<310&&this.Vr){let i=this.En>>7,s=this.Cn>>7;const h=this.Vr.x>>7,e=this.Vr.z>>7;let n,r,o,l;if(this.sr&&4&this.sr[this.zn][i][s]&&(t=this.zn),n=h>i?h-i:i-h,r=e>s?e-s:s-e,n>r)for(o=65536*r/n|0,l=32768;i!==h;)i<h?i++:i>h&&i--,this.sr&&4&this.sr[this.zn][i][s]&&(t=this.zn),l+=o,l>=65536&&(l-=65536,s<e?s++:s>e&&s--,this.sr&&4&this.sr[this.zn][i][s]&&(t=this.zn));else for(o=65536*n/r|0,l=32768;s!==e;)s<e?s++:s>e&&s--,this.sr&&4&this.sr[this.zn][i][s]&&(t=this.zn),l+=o,l>=65536&&(l-=65536,i<h?i++:i>h&&i--,this.sr&&4&this.sr[this.zn][i][s]&&(t=this.zn))}return this.Vr&&this.sr&&4&this.sr[this.zn][this.Vr.x>>7][this.Vr.z>>7]&&(t=this.zn),t};Qf=()=>{if(!this.sr)return 0;return this.qf(this.zn,this.En,this.Cn)-this.gn>=800||!(4&this.sr[this.zn][this.En>>7][this.Cn>>7])?3:this.zn};qf=(t,i,s)=>{if(!this.ir)return 0;const h=Math.min(i>>7,G.A.nr-1),e=Math.min(s>>7,G.A.nr-1);let n=t;t<3&&this.sr&&!(2&~this.sr[1][h][e])&&(n=t+1);const r=127&i,o=127&s;return(this.ir[n][h][e]*(128-r)+this.ir[n][h+1][e]*r>>7)*(128-o)+(this.ir[n][h][e+1]*(128-r)+this.ir[n][h+1][e+1]*r>>7)*o>>7};Zf=(t,i,s,h,e,n)=>{const r=2048-e&2047,o=2048-h&2047;let l,a,c,f=0,u=0,w=n;0!==r&&(l=d.A.sin[r],a=d.A.cos[r],c=u*a-n*l>>16,w=u*l+n*a>>16,u=c),0!==o&&(l=d.A.sin[o],a=d.A.cos[o],c=w*l+f*a>>16,w=w*a-f*l>>16,f=c),this.En=t-f,this.gn=i-u,this.Cn=s-w,this.Tn=e,this.On=h};kf=()=>{if(!this.Vr)return;const t=this.Vr.x+this.cn,i=this.Vr.z+this.fn;(this.Qn-t<-500||this.Qn-t>500||this.tr-i<-500||this.tr-i>500)&&(this.Qn=t,this.tr=i),this.Qn!==t&&(this.Qn+=(t-this.Qn)/16|0),this.tr!==i&&(this.tr+=(i-this.tr)/16|0),1===this.df[1]?this.$n+=(-this.$n-24)/2|0:1===this.df[2]?this.$n+=(24-this.$n)/2|0:this.$n=this.$n/2|0,1===this.df[3]?this.Jn+=(12-this.Jn)/2|0:1===this.df[4]?this.Jn+=(-this.Jn-12)/2|0:this.Jn=this.Jn/2|0,this.qn=this.qn+this.$n/2&2047,this.Zn+=this.Jn/2|0,this.Zn<128&&(this.Zn=128),this.Zn>383&&(this.Zn=383);const s=this.Qn>>7,h=this.tr>>7,e=this.qf(this.zn,this.Qn,this.tr);let n=0;if(this.ir&&s>3&&h>3&&s<100&&h<100)for(let t=s-4;t<=s+4;t++)for(let i=h-4;i<=h+4;i++){let s=this.zn;s<3&&this.sr&&!(2&~this.sr[1][t][i])&&s++;const h=e-this.ir[s][t][i];h>n&&(n=h)}let r=192*n;r>98048&&(r=98048),r<32768&&(r=32768),r>this.bn?this.bn+=(r-this.bn)/24|0:r<this.bn&&(this.bn+=(r-this.bn)/80|0)};xf=()=>{let t=128*this.yr+64,i=128*this.Ar+64,s=this.qf(this.zn,this.yr,this.Ar)-this.pr;this.En<t&&(this.En+=this.mr+((t-this.En)*this.Ir/1e3|0),this.En>t&&(this.En=t)),this.En>t&&(this.En-=this.mr+((this.En-t)*this.Ir/1e3|0),this.En<t&&(this.En=t)),this.gn<s&&(this.gn+=this.mr+((s-this.gn)*this.Ir/1e3|0),this.gn>s&&(this.gn=s)),this.gn>s&&(this.gn-=this.mr+((this.gn-s)*this.Ir/1e3|0),this.gn<s&&(this.gn=s)),this.Cn<i&&(this.Cn+=this.mr+((i-this.Cn)*this.Ir/1e3|0),this.Cn>i&&(this.Cn=i)),this.Cn>i&&(this.Cn-=this.mr+((this.Cn-i)*this.Ir/1e3|0),this.Cn<i&&(this.Cn=i)),t=128*this.ar+64,i=128*this.cr+64,s=this.qf(this.zn,this.ar,this.cr)-this.ur;const h=t-this.En,e=s-this.gn,n=i-this.Cn,r=0|Math.sqrt(h*h+n*n);let o=325.949*Math.atan2(e,r)&2047;const l=-325.949*Math.atan2(h,n)&2047;o<128&&(o=128),o>383&&(o=383),this.Tn<o&&(this.Tn+=this.dr+((o-this.Tn)*this.wr/1e3|0),this.Tn>o&&(this.Tn=o)),this.Tn>o&&(this.Tn-=this.dr+((this.Tn-o)*this.wr/1e3|0),this.Tn<o&&(this.Tn=o));let a=l-this.On;a>1024&&(a-=2048),a<-1024&&(a+=2048),a>0&&(this.On+=this.dr+(a*this.wr/1e3|0),this.On&=2047),a<0&&(this.On-=this.dr+(-a*this.wr/1e3|0),this.On&=2047);let c=l-this.On;c>1024&&(c-=2048),c<-1024&&(c+=2048),(c<0&&a>0||c>0&&a<0)&&(this.On=l)};FA=(t,i)=>{const s=t.cA;let n=this.xn+(s>>4&7),r=this.Dn+(7&s);if(i===T.A.PA||i===T.A.NA){const s=t.cA,h=s>>2,e=3&s,o=P.A.of(h).Xd;let l;if(l=i===T.A.NA?-1:t.ct,n>=0&&r>=0&&n<G.A.nr&&r<G.A.nr){let t=null;for(let i=this.Ur.head();i;i=this.Ur.next())if(i.dp===this.zn&&i.x===n&&i.z===r&&i.Xd===o){t=i;break}if(!t&&this.tn){let i=0,s=-1,h=0,e=0;if(o===N.A.Xy?i=this.tn.kd(this.zn,n,r):o===N.A.zy?i=this.tn.jy(this.zn,r,n):o===N.A.Zy?i=this.tn.Wd(this.zn,n,r):o===N.A.Ty&&(i=this.tn.bd(this.zn,n,r)),0!==i){const t=this.tn.xd(this.zn,n,r,i);s=i>>14&32767,h=31&t,e=t>>6}t=new U.A(this.zn,o,n,r,0,F.A.Fd,P.A.Nd.id,s,e,h),this.Ur.y_(t)}t&&(t.im=l,t.shape=h,t.angle=e),this.Ky(this.zn,n,r,l,e,h,o)}}else if(i===T.A.DA){const i=t.cA>>2,s=P.A.of(i).Xd,e=t.ct;if(n>=0&&r>=0&&n<G.A.nr&&r<G.A.nr&&this.tn){let t=0;if(s===N.A.Xy?t=this.tn.kd(this.zn,n,r):s===N.A.zy?t=this.tn.jy(this.zn,r,n):s===N.A.Zy?t=this.tn.Wd(this.zn,n,r):s===N.A.Ty&&(t=this.tn.bd(this.zn,n,r)),0!==t){const i=new K.A(t>>14&32767,this.zn,s,n,r,h.A.Wo[e],!1);this.Dr.y_(i)}}}else if(i===T.A.xA){const i=t.ct,s=t.ct;if(n>=0&&r>=0&&n<G.A.nr&&r<G.A.nr){const t=new V.A(i,s);this.Pr[this.zn][n][r]||(this.Pr[this.zn][n][r]=new S.A),this.Pr[this.zn][n][r]?.y_(t),this.By(n,r)}}else if(i===T.A.kA){const i=t.ct;if(n>=0&&r>=0&&n<G.A.nr&&r<G.A.nr){const t=this.Pr[this.zn][n][r];if(t){for(let s=t.head();s;s=t.next())if(s.index===(32767&i)){s.pA();break}t.head()||(this.Pr[this.zn][n][r]=null),this.By(n,r)}}}else if(i===T.A.MA){let i=n+t.lA,s=r+t.lA;const h=t.cp,e=t.ct,o=t.cA,l=t.cA,a=t.ct,c=t.ct,f=t.cA,u=t.cA;if(n>=0&&r>=0&&n<G.A.nr&&r<G.A.nr&&i>=0&&s>=0&&i<G.A.nr&&s<G.A.nr){n=128*n+64,r=128*r+64,i=128*i+64,s=128*s+64;const t=new X.A(e,this.zn,n,this.qf(this.zn,n,r)-o,r,a+this.Zt,c+this.Zt,f,u,h,l);t.jI(i,this.qf(this.zn,i,s)-l,s,a+this.Zt),this.Mr.y_(t)}}else if(i===T.A.SA){const i=t.ct,s=t.cA,h=t.ct;if(n>=0&&r>=0&&n<G.A.nr&&r<G.A.nr){n=128*n+64,r=128*r+64;const t=new z.A(i,this.zn,n,r,this.qf(this.zn,n,r)-s,this.Zt,h);this.kr.y_(t)}}else if(i===T.A.RA){const i=t.ct,s=t.ct,h=t.ct;if(n>=0&&r>=0&&n<G.A.nr&&r<G.A.nr&&h!==this.zr){const t=new V.A(i,s);this.Pr[this.zn][n][r]||(this.Pr[this.zn][n][r]=new S.A),this.Pr[this.zn][n][r]?.y_(t),this.By(n,r)}}else if(i===T.A.LA){const i=t.cA,s=i>>2,h=3&i,o=P.A.of(s).Xd,l=t.ct,a=t.ct,c=t.ct,f=t.ct;let u,d=t.lA,w=t.lA,y=t.lA,A=t.lA;if(u=f===this.zr?this.Vr:this._r[f],u&&this.ir){const t=new B.A(this.zn,o,n,r,-1,h,s,a+this.Zt);this.Nr.y_(t);const i=new B.A(this.zn,o,n,r,l,h,s,c+this.Zt);this.Nr.y_(i);const f=this.ir[this.zn][n][r],p=this.ir[this.zn][n+1][r],m=this.ir[this.zn][n+1][r+1],I=this.ir[this.zn][n][r+1],_=e.A.get(l);u.NI=a+this.Zt,u.FI=c+this.Zt,u.DI=_._a(s,h,f,p,m,I,-1);let E,g=_.width,C=_.length;h!==F.A.Ud&&h!==F.A.Gd||(g=_.length,C=_.width),u.A_=128*n+64*g,u.p_=128*r+64*C,u.m_=this.qf(this.zn,u.A_,u.p_),d>y&&(E=d,d=y,y=E),w>A&&(E=w,w=A,A=E),u.WI=n+d,u.VI=n+y,u.YI=r+w,u.KI=r+A}}else if(i===T.A.vA){const i=t.ct,s=t.ct,h=t.ct;if(n>=0&&r>=0&&n<G.A.nr&&r<G.A.nr){const t=this.Pr[this.zn][n][r];if(t){for(let e=t.head();e;e=t.next())if(e.index===(32767&i)&&e.count===s){e.count=h;break}this.By(n,r)}}}};lu=t=>{if(!$.K.At){if(d.A.I_[17]>=t){const t=d.A.__[17];if(!t)return;const i=t.width*t.height-1,s=t.width*this.hn*2,h=t.mc,e=this.Vn;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.mc=e,this.Vn=h,d.A.E_(17)}if(d.A.I_[24]>=t){const t=d.A.__[24];if(!t)return;const i=t.width*t.height-1,s=t.width*this.hn*2,h=t.mc,e=this.Vn;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.mc=e,this.Vn=h,d.A.E_(24)}}};Mc=()=>{if(!(this.Pi&&this.Fi&&this.Ni&&this.Wi))return;for(let t=10;t<117;t++){(100*Math.random()|0)<50&&(this.Pi[t+32512]=255)}for(let t=0;t<100;t++){const t=2+(124*Math.random()|0)+(128+(128*Math.random()|0)<<7);this.Pi[t]=192}for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Fi[s]=(this.Pi[s-1]+this.Pi[s+1]+this.Pi[s-128]+this.Pi[s+128])/4|0}this.Yi+=128,this.Yi>this.Ni.length&&(this.Yi-=this.Ni.length,this.Dc(this.Si[12*Math.random()|0]));for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);let h=this.Fi[s+128]-(this.Ni[s+this.Yi&this.Ni.length-1]/5|0);h<0&&(h=0),this.Pi[s]=h}for(let t=0;t<255;t++)this.Wi[t]=this.Wi[t+1];if(this.Wi[255]=16*Math.sin(this.Zt/14)+14*Math.sin(this.Zt/15)+12*Math.sin(this.Zt/16)|0,this.Vi>0&&(this.Vi-=4),this.Ki>0&&(this.Ki-=4),0===this.Vi&&0===this.Ki){const t=2e3*Math.random()|0;0===t?this.Vi=1024:1===t&&(this.Ki=1024)}};g_=(t,i,s)=>{const h=256-i;return((16711935&t)*h+(16711935&s)*i&4278255360)+((65280&t)*h+(65280&s)*i&16711680)>>8};kc=()=>{if(!(this.Ui&&this.Bi&&this.Gi&&this.Hi&&this.Wi&&this.Pi))return;const t=256;if(this.Vi>0)for(let t=0;t<256;t++)this.Vi>768?this.Ui[t]=this.g_(this.Bi[t],1024-this.Vi,this.Gi[t]):this.Vi>256?this.Ui[t]=this.Gi[t]:this.Ui[t]=this.g_(this.Gi[t],256-this.Vi,this.Bi[t]);else if(this.Ki>0)for(let t=0;t<256;t++)this.Ki>768?this.Ui[t]=this.g_(this.Bi[t],1024-this.Ki,this.Hi[t]):this.Ki>256?this.Ui[t]=this.Hi[t]:this.Ui[t]=this.g_(this.Hi[t],256-this.Ki,this.Bi[t]);else for(let t=0;t<256;t++)this.Ui[t]=this.Bi[t];for(let t=0;t<33920;t++)this.Ai&&this.ki&&(this.Ai.mc[t]=this.ki.mc[t]);let i=0,s=1152;for(let h=1;h<255;h++){let e=(this.Wi[h]*(t-h)/t|0)+22;e<0&&(e=0),i+=e;for(let t=e;t<128;t++){let t=this.Pi[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Ui[t],this.Ai){const e=this.Ai.mc[s];this.Ai.mc[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}s+=e}this.Ai?.draw(0,0);for(let t=0;t<33920;t++)this.pi&&this.xi&&(this.pi.mc[t]=this.xi.mc[t]);i=0,s=1176;for(let h=1;h<255;h++){const e=this.Wi[h]*(t-h)/t|0,n=103-e;s+=e;for(let t=0;t<n;t++){let t=this.Pi[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Ui[t],this.pi){const e=this.pi.mc[s];this.pi.mc[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}i+=128-n,s+=128-n-e}this.pi?.draw(661,0)}}console.log(`RS2 user client - release #${$.K.wt}`),await(0,it.w)(),(new t).run().then((()=>{})),i()}catch(t){i(t)}}),1)},8370:(t,i,s)=>{s.d(i,{A:()=>c});var h=s(1183),e=s(4583),n=s(9234);const r=['F11','F12'],o={'Backspace':{code:8,ch:8},'Enter':{code:10,ch:10},'Shift':{code:16,ch:65535},'Escape':{code:27,ch:27},'Tab':{code:9,ch:9},'CapsLock':{code:20,ch:65535},' ':{code:32,ch:32},'Control':{code:17,ch:65535},'Alt':{code:18,ch:65535},'Meta':{code:524,ch:65535},'ArrowLeft':{code:37,ch:65535},'ArrowRight':{code:39,ch:65535},'ArrowUp':{code:38,ch:65535},'ArrowDown':{code:40,ch:65535},'Insert':{code:155,ch:65535},'Home':{code:36,ch:65535},'PageUp':{code:33,ch:65535},'Delete':{code:127,ch:127},'End':{code:35,ch:65535},'PageDown':{code:34,ch:65535},'`':{code:192,ch:96},'~':{code:192,ch:126},'!':{code:49,ch:33},'@':{code:50,ch:64},'#':{code:51,ch:35},'$':{code:52,ch:36},'%':{code:53,ch:37},'^':{code:54,ch:94},'&':{code:55,ch:38},'*':{code:56,ch:42},'(':{code:57,ch:40},')':{code:48,ch:41},'-':{code:45,ch:45},'_':{code:45,ch:95},'=':{code:61,ch:61},'+':{code:61,ch:43},'[':{code:91,ch:91},'{':{code:91,ch:123},']':{code:93,ch:93},'}':{code:93,ch:125},'\\':{code:92,ch:92},'|':{code:92,ch:124},';':{code:59,ch:59},':':{code:59,ch:58},"'":{code:222,ch:39},'"':{code:222,ch:34},',':{code:44,ch:44},'<':{code:44,ch:60},'.':{code:46,ch:46},'>':{code:46,ch:62},'/':{code:47,ch:47},'?':{code:47,ch:63},'F1':{code:112,ch:65535},'F2':{code:113,ch:65535},'F3':{code:114,ch:65535},'F4':{code:115,ch:65535},'F5':{code:116,ch:65535},'F6':{code:117,ch:65535},'F7':{code:118,ch:65535},'F8':{code:119,ch:65535},'F9':{code:120,ch:65535},'F10':{code:121,ch:65535},'F11':{code:122,ch:65535},'F12':{code:123,ch:65535},0:{code:48,ch:48},1:{code:49,ch:49},2:{code:50,ch:50},3:{code:51,ch:51},4:{code:52,ch:52},5:{code:53,ch:53},6:{code:54,ch:54},7:{code:55,ch:55},8:{code:56,ch:56},9:{code:57,ch:57},'a':{code:65,ch:97},'b':{code:66,ch:98},'c':{code:67,ch:99},'d':{code:68,ch:100},'e':{code:69,ch:101},'f':{code:70,ch:102},'g':{code:71,ch:103},'h':{code:72,ch:104},'i':{code:73,ch:105},'j':{code:74,ch:106},'k':{code:75,ch:107},'l':{code:76,ch:108},'m':{code:77,ch:109},'n':{code:78,ch:110},'o':{code:79,ch:111},'p':{code:80,ch:112},'q':{code:81,ch:113},'r':{code:82,ch:114},'s':{code:83,ch:115},'t':{code:84,ch:116},'u':{code:85,ch:117},'v':{code:86,ch:118},'w':{code:87,ch:119},'x':{code:88,ch:120},'y':{code:89,ch:121},'z':{code:90,ch:122},'A':{code:65,ch:65},'B':{code:66,ch:66},'C':{code:67,ch:67},'D':{code:68,ch:68},'E':{code:69,ch:69},'F':{code:70,ch:70},'G':{code:71,ch:71},'H':{code:72,ch:72},'I':{code:73,ch:73},'J':{code:74,ch:74},'K':{code:75,ch:75},'L':{code:76,ch:76},'M':{code:77,ch:77},'N':{code:78,ch:78},'O':{code:79,ch:79},'P':{code:80,ch:80},'Q':{code:81,ch:81},'R':{code:82,ch:82},'S':{code:83,ch:83},'T':{code:84,ch:84},'U':{code:85,ch:85},'V':{code:86,ch:86},'W':{code:87,ch:87},'X':{code:88,ch:88},'Y':{code:89,ch:89},'Z':{code:90,ch:90}};var l=s(2595),a=s(7854);class c{static getParameter(t){return new URLSearchParams(window.location.search).get(t)??''}static setParameter(t,i){const s=new URL(window.location.toString());s.searchParams.set(t,i),window.history.pushState(null,'',s.toString())}hd=0;C_=[];T_=0;Vo=null;state=0;td=20;O_=1;b_=[];Qu=0;v_=0;L_=[];R_=!0;S_=!1;M_=50;hasFocus=!0;gc=!1;tf=0;yf=0;Kl=0;Xl=0;Gc=0;Hc=0;Wc=0;df=[];k_=[];x_=0;D_=0;input=null;N_=!1;P_=!1;F_=!1;time=-1;U_=0;B_=0;G_=0;H_=0;W_=0;Y_=0;constructor(t=!1){a.V_.tabIndex=-1,a.rl.fillStyle='black',a.rl.fillRect(0,0,a.V_.width,a.V_.height),this.S_=t,this.S_?this.resize(window.innerWidth,window.innerHeight):this.resize(a.V_.width,a.V_.height)}get width(){return a.V_.width}get height(){return a.V_.height}resize=(t,i)=>{a.V_.width=t,a.V_.height=i,this.Vo=new h.A(t,i),e.A.K_()};run=async()=>{a.V_.addEventListener('resize',(()=>{this.S_&&this.resize(window.innerWidth,window.innerHeight)}),!1),a.V_.onmousedown=this.onmousedown,a.V_.onmouseup=this.onmouseup,a.V_.onmouseenter=this.onmouseenter,a.V_.onmouseleave=this.onmouseleave,a.V_.onmousemove=this.onmousemove,window.onbeforeunload=this.Bo,a.V_.onfocus=this.onfocus,a.V_.onblur=this.onblur,this.X_?(a.V_.ontouchstart=this.ontouchstart,a.V_.ontouchend=this.ontouchend,a.V_.ontouchmove=this.ontouchmove):(a.V_.onkeydown=this.onkeydown,a.V_.onkeyup=this.onkeyup),a.V_.oncontextmenu=t=>{t.preventDefault()},window.oncontextmenu=t=>{t.preventDefault()},this.X_&&'low'===c.getParameter('detail')&&(this.M_=30),await this.Qo(0,'Loading...'),await this.load();for(let t=0;t<10;t++)this.b_[t]=performance.now();let t,i=0,s=256,h=1,e=0;for(;this.state>=0;){if(this.state>0&&(this.state--,0===this.state))return void this.z_();const r=s,o=h;s=300,h=1,t=performance.now();const l=this.b_[i];if(0===l?(s=r,h=o):t>l&&(s=2560*this.td/(t-l)|0),s<25?s=25:s>256&&(s=256,h=this.td-(t-l)/10|0),this.b_[i]=t,i=(i+1)%10,h>1)for(let t=0;t<10;t++)0!==this.b_[t]&&(this.b_[t]+=h);for(h<this.O_&&(h=this.O_),await(0,n.il)(h);e<256;)await this.update(),this.Gc=0,this.x_=this.D_,e+=s;e&=255,this.td>0&&(this.Qu=1e3*s/(256*this.td)|0);const a=performance.now();if(this.R_&&this.refresh(),await this.draw(),this.L_[this.v_]=(performance.now()-a)/1e3,this.v_=(this.v_+1)%this.L_.length,this.M_<50){const i=1e3/this.M_-(performance.now()-t);i>0&&await(0,n.il)(i)}}-1===this.state&&this.z_()};z_=()=>{this.state=-2,this.Bo()};ol=t=>{this.td=1e3/t|0};ky=t=>{this.M_=Math.max(Math.min(50,0|t),0)};start=()=>{this.state>=0&&(this.state=0)};stop=()=>{this.state>=0&&(this.state=4e3/this.td|0)};destroy=()=>{this.state=-1};load=async()=>{};update=async()=>{};Bo=()=>{};draw=async()=>{};refresh=()=>{};async Qo(t,i){const s=this.width,h=this.height;this.R_&&(a.rl.fillStyle='black',a.rl.fillRect(0,0,s,h),this.R_=!1);const e=h/2-18;a.rl.fillStyle='rgb(140, 17, 17)',a.rl.rect((s/2|0)-152,e,304,34),a.rl.fillRect((s/2|0)-150,e+2,3*t,30),a.rl.fillStyle='black',a.rl.fillRect((s/2|0)-150+3*t,e+2,300-3*t,30),a.rl.font='bold 13px helvetica, sans-serif',a.rl.textAlign='center',a.rl.fillStyle='white',a.rl.fillText(i,s/2|0,e+22),await(0,n.il)(5)}Vc=()=>{let t=-1;return this.D_!==this.x_&&(t=this.k_[this.x_],this.x_=this.x_+1&127),t};get ms(){const t=this.L_.length;let i=0;for(let s=0;s<t;s++)i+=this.L_[s];const s=i/t*1e3;return s>this.hd&&(this.hd=s),this.C_[this.T_]=s,this.T_=(this.T_+1)%250,s}get sd(){return this.C_.reduce(((t,i)=>t+i),0)/250}onkeydown=t=>{const i=t.key;this.tf=0;const s=o[i];if(!s||0===t.code.length&&!t.isTrusted)return void console.warn(`Unhandled key: ${i}`);const h=s.code;let e=s.ch;t.ctrlKey&&(e>='A'.charCodeAt(0)&&e<=']'.charCodeAt(0)||e=='_'.charCodeAt(0)?e-='A'.charCodeAt(0)-1:e>='a'.charCodeAt(0)&&e<='z'.charCodeAt(0)&&(e-='a'.charCodeAt(0)-1)),e<30&&(e=0),h===o.ArrowLeft.code?e=1:h===o.ArrowRight.code?e=2:h===o.ArrowUp.code?e=3:h===o.ArrowDown.code?e=4:h===o.Control.code?e=5:h===o.Shift.code?e=6:h===o.Alt.code?e=7:h===o.Backspace.code||h===o.Delete.code?e=8:h===o.Tab.code?e=9:h===o.Enter.code?e=10:h>=o.F1.code&&h<=o.F12.code?e=h+1008-o.F1.code:h===o.Home.code?e=1e3:h===o.End.code?e=1001:h===o.PageUp.code?e=1002:h===o.PageDown.code&&(e=1003),e>0&&e<128&&(this.df[e]=1),e>4&&(this.k_[this.D_]=e,this.D_=this.D_+1&127),l.A.enabled&&l.A.j_(e),r.includes(i)||t.preventDefault()};onkeyup=t=>{const i=t.key;this.tf=0;const s=o[i];if(!s||0===t.code.length&&!t.isTrusted)return void console.warn(`Unhandled key: ${i}`);const h=s.code;let e=s.ch;e<30&&(e=0),h===o.ArrowLeft.code?e=1:h===o.ArrowRight.code?e=2:h===o.ArrowUp.code?e=3:h===o.ArrowDown.code?e=4:h===o.Control.code?e=5:h===o.Shift.code?e=6:h===o.Alt.code?e=7:h===o.Backspace.code||h===o.Delete.code?e=8:h===o.Tab.code?e=9:h===o.Enter.code?e=10:h>=o.F1.code&&h<=o.F12.code?e=h+1008-o.F1.code:h===o.Home.code?e=1e3:h===o.End.code?e=1001:h===o.PageUp.code?e=1002:h===o.PageDown.code&&(e=1003),e>0&&e<128&&(this.df[e]=0),l.A.enabled&&l.A.Z_(e),r.includes(i)||t.preventDefault()};onmousedown=t=>{if(this.N_=!1,(t.clientX>0||t.clientY>0)&&this.q_(t),this.tf=0,this.Hc=this.Kl,this.Wc=this.Xl,this.X_&&!this.J_){if(this.Q_()||this.tE()||this.iE())return this.Gc=1,void(this.yf=1);t.timeStamp>=this.time+500?(this.Gc=2,this.yf=2):(this.Gc=1,this.yf=1)}else 2===t.button?(this.Gc=2,this.yf=2):(this.Gc=1,this.yf=1);l.A.enabled&&l.A.sE(this.Hc,this.Wc,t.buttons)};onmouseup=t=>{this.q_(t),this.tf=0,this.yf=0,l.A.enabled&&l.A.hE(t.buttons)};onmouseenter=t=>{this.q_(t),l.A.enabled&&l.A.eE()};onmouseleave=t=>{this.q_(t),this.tf=0,this.Kl=-1,this.Xl=-1,this.yf=0,this.Hc=-1,this.Wc=-1,l.A.enabled&&l.A.nE()};onmousemove=t=>{this.q_(t),this.tf=0,l.A.enabled&&l.A.rE(this.Kl,this.Xl)};onfocus=t=>{this.hasFocus=!0,this.R_=!0,this.refresh(),l.A.enabled&&l.A.oE()};onblur=t=>{this.hasFocus=!1,l.A.enabled&&l.A.lE()};ontouchstart=t=>{if(!this.X_)return;null!==this.input&&(this.input.parentNode?.removeChild(this.input),this.input=null),this.N_=!0;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.U_=this.W_=this.G_=0|i.screenX,this.B_=this.Y_=this.H_=0|i.screenY,this.time=t.timeStamp,this.P_=this.aE(),this.F_=this.cE()};ontouchend=t=>{if(!this.X_||!this.N_)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;if(this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.W_=0|i.screenX,this.Y_=0|i.screenY,this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowLeft',code:'ArrowLeft'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowUp',code:'ArrowUp'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowRight',code:'ArrowRight'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowDown',code:'ArrowDown'})),this.P_&&!this.aE())return void(this.N_=!1);if(this.F_&&!this.cE())return void(this.N_=!1);if(this.Q_()||this.fE()||this.tE()||this.iE()){null!==this.input&&(this.input.parentNode?.contains(this.input)&&this.input.parentNode?.removeChild(this.input),this.input=null);const t=document.createElement('input');return this.tE()?(t.setAttribute('id','username'),t.setAttribute('placeholder','Username')):this.iE()?(t.setAttribute('id','password'),t.setAttribute('placeholder','Password')):this.Q_()?(t.setAttribute('id','chatinput'),t.setAttribute('placeholder','Chatinput')):this.fE()&&(t.setAttribute('id','chatpopup'),t.setAttribute('placeholder','Chatpopup')),this.uE?t.setAttribute('type','password'):t.setAttribute('type',this.iE()?'password':'text'),t.setAttribute('autofocus','autofocus'),t.setAttribute('spellcheck','false'),t.setAttribute('autocomplete','off'),t.setAttribute('style',`position: fixed; left: ${s}px; top: ${h}px; width: 1px; height: 1px; opacity: 0;`),document.body.appendChild(t),t.focus(),t.click(),this.uE&&(t.oninput=t=>{if(!(t instanceof InputEvent))return;const i=t,s=i.data;null!==s&&'insertText'===i.inputType&&this.onkeydown(new KeyboardEvent('keydown',{key:s,code:s}))}),t.onkeydown=t=>{this.uE&&'Enter'!==t.key&&'Backspace'!==t.key||this.onkeydown(new KeyboardEvent('keydown',{key:t.key,code:t.key}))},t.onkeyup=t=>{this.uE&&'Enter'!==t.key&&'Backspace'!==t.key||this.onkeyup(new KeyboardEvent('keyup',{key:t.key,code:t.key}))},t.onfocus=t=>{this.input?.parentNode?.removeChild(this.input),this.input=null,this.onfocus(t)},this.input=t,void(this.N_=!1)}const e=t.timeStamp>=this.time+500,n=Math.abs(this.U_-this.W_)>16||Math.abs(this.B_-this.Y_)>16;e&&!n?(this.N_=!0,this.onmousedown(new MouseEvent('mousedown',{buttons:2}))):(this.yf=0,this.N_=!1)};ontouchmove=t=>{if(!this.X_||!this.N_)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.W_=0|i.screenX,this.Y_=0|i.screenY,this.P_&&-1===this.Zo()?(this.G_-this.W_>0?this.rotate(2):this.G_-this.W_<0&&this.rotate(0),this.H_-this.Y_>0?this.rotate(3):this.H_-this.Y_<0&&this.rotate(1)):(this.F_||-1!==this.Zo())&&this.onmousedown(new MouseEvent('mousedown',{buttons:1})),this.G_=this.W_,this.H_=this.Y_};get X_(){return['Android','webOS','iPhone','iPad','iPod','BlackBerry','Windows Phone'].some((t=>navigator.userAgent.includes(t)))}get uE(){return['Android'].some((t=>navigator.userAgent.includes(t)))}get J_(){return['Capacitor'].some((t=>navigator.userAgent.includes(t)))}aE=()=>this.gc&&this.Kl>=8&&this.Kl<=520&&this.Xl>=11&&this.Xl<=345;Q_=()=>this.gc&&-1===this.jo()&&!this.Xo()&&!this.zo()&&this.Kl>=11&&this.Kl<=506&&this.Xl>=449&&this.Xl<=482;fE=()=>this.gc&&(this.Xo()||this.zo())&&this.Kl>=11&&this.Kl<=506&&this.Xl>=383&&this.Xl<=482;cE=()=>this.gc&&this.Kl>=562&&this.Kl<=752&&this.Xl>=231&&this.Xl<=492;tE=()=>!this.gc&&2===this.Ko()&&this.Kl>=301&&this.Kl<=562&&this.Xl>=262&&this.Xl<=279;iE=()=>!this.gc&&2===this.Ko()&&this.Kl>=301&&this.Kl<=562&&this.Xl>=279&&this.Xl<=296;rotate=t=>{0===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowRight',code:'ArrowRight'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowLeft',code:'ArrowLeft'}))):1===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowDown',code:'ArrowDown'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowUp',code:'ArrowUp'}))):2===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowLeft',code:'ArrowLeft'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowRight',code:'ArrowRight'}))):3===t&&(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowUp',code:'ArrowUp'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowDown',code:'ArrowDown'})))};dE=()=>null!==document.fullscreenElement;q_=t=>{if(this.dE()){const i=t.target.getBoundingClientRect(),s=window.innerHeight/a.V_.height,h=(window.innerWidth-a.V_.width*s)/2;this.Kl=0|this.wE(t.clientX-i.left-h,0,a.V_.width*s,0,789),this.Xl=0|this.wE(t.clientY-i.top,0,a.V_.height*s,0,532)}else{const i=a.V_.getBoundingClientRect(),s=a.V_.width/i.width,h=a.V_.height/i.height;this.Kl=(t.clientX-i.left)*s|0,this.Xl=(t.clientY-i.top)*h|0}this.Kl<0&&(this.Kl=0),this.Xl<0&&(this.Xl=0),this.Kl>789&&(this.Kl=789),this.Xl>532&&(this.Xl=532)};wE=(t,i,s,h,e)=>(t-i)*(e-h)/(s-i)+h}},2595:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1069);class e{static enabled=!1;static yE=null;static AE=null;static pE=0;static mE=0;static IE=0;static _E=0;static EE=0;static zA=()=>{this.yE=h.A.$t(1),this.AE=null,this.pE=performance.now(),this.enabled=!0};static Qc=()=>{this.enabled=!1,this.yE=null};static flush=()=>{let t=null;return this.AE&&this.enabled&&(t=this.AE),this.AE=null,t};static stop=()=>{let t=null;return this.yE&&this.yE.ft>0&&this.enabled&&(t=this.yE),this.Qc(),t};static sE=(t,i,s)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;this.mE++;const h=performance.now();let e=(h-this.pE)/10|0;e>250&&(e=250),this.pE=h,this.gE(5),1===s?this.yE?.p1(1):this.yE?.p1(2),this.yE?.p1(e),this.yE?.p3(t+(i<<10))};static hE=t=>{if(!this.enabled)return;this.mE++;const i=performance.now();let s=(i-this.pE)/10|0;s>250&&(s=250),this.pE=i,this.gE(2),1===t?this.yE?.p1(3):this.yE?.p1(4),this.yE?.p1(s)};static rE=(t,i)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;const s=performance.now();if(s-this.IE>=50){this.IE=s,this.mE++;let h=(s-this.pE)/10|0;h>250&&(h=250),this.pE=s,t-this._E<8&&t-this._E>=-8&&i-this.EE<8&&i-this.EE>=-8?(this.gE(3),this.yE?.p1(5),this.yE?.p1(h),this.yE?.p1(t+(i-this.EE+8<<4)+8-this._E)):t-this._E<128&&t-this._E>=-128&&i-this.EE<128&&i-this.EE>=-128?(this.gE(4),this.yE?.p1(6),this.yE?.p1(h),this.yE?.p1(t+128-this._E),this.yE?.p1(i+128-this.EE)):(this.gE(5),this.yE?.p1(7),this.yE?.p1(h),this.yE?.p3(t+(i<<10))),this._E=t,this.EE=i}};static j_=t=>{if(!this.enabled)return;this.mE++;const i=performance.now();let s=(i-this.pE)/10|0;s>250&&(s=250),this.pE=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.gE(3),this.yE?.p1(8),this.yE?.p1(s),this.yE?.p1(t)};static Z_=t=>{if(!this.enabled)return;this.mE++;const i=performance.now();let s=(i-this.pE)/10|0;s>250&&(s=250),this.pE=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.gE(3),this.yE?.p1(9),this.yE?.p1(s),this.yE?.p1(t)};static oE=()=>{if(!this.enabled)return;this.mE++;const t=performance.now();let i=(t-this.pE)/10|0;i>250&&(i=250),this.pE=t,this.gE(2),this.yE?.p1(10),this.yE?.p1(i)};static lE=()=>{if(!this.enabled)return;this.mE++;const t=performance.now();let i=(t-this.pE)/10|0;i>250&&(i=250),this.pE=t,this.gE(2),this.yE?.p1(11),this.yE?.p1(i)};static eE=()=>{if(!this.enabled)return;this.mE++;const t=performance.now();let i=(t-this.pE)/10|0;i>250&&(i=250),this.pE=t,this.gE(2),this.yE?.p1(12),this.yE?.p1(i)};static nE=()=>{if(!this.enabled)return;this.mE++;const t=performance.now();let i=(t-this.pE)/10|0;i>250&&(i=250),this.pE=t,this.gE(2),this.yE?.p1(13),this.yE?.p1(i)};static gE=t=>{if(this.yE&&this.yE.ft+t>=500){const t=this.yE;this.yE=h.A.$t(1),this.AE=t}}}},1120:(t,i,s)=>{s.d(i,{A:()=>c});var h=s(1069),e=s(8665),n=s(2031),r=s(1122),o=s(3819),l=s(3867),a=s(8950);class c{static Wo=[];static CE=null;static Yo=null;static Nl=0;static TE=1;static Fl=2;static ta=3;static sa=4;static da=5;static Aa=6;static Ta=7;static ym=1;static Im=2;static _m=3;static Em=4;static gm=5;static oa=6;static va=1;static La=100;static Ra=101;static Sa=200;static sy=201;static hy=202;static Ma=203;static ey=205;static ly=300;static OE=301;static bE=302;static vE=303;static LE=304;static RE=305;static SE=306;static ME=307;static kE=308;static xE=309;static DE=310;static NE=311;static PE=312;static uy=313;static wy=314;static FE=315;static UE=316;static BE=317;static GE=318;static HE=319;static WE=320;static YE=321;static VE=322;static yy=323;static Xa=324;static za=325;static Ay=326;static Fa=327;static ka=401;static xa=500;static ny=501;static oy=502;static Pa=503;static ja=600;static my=601;static KE=602;static XE=603;static zE=604;static jE=605;static ZE=606;static qE=607;static $E=608;static JE=609;static QE=610;static tg=611;static Iy=612;static Za=613;static qa=650;static Qa=651;static tc=652;static ic=653;static sc=654;static $a=655;static Ac=(t,i,s)=>{this.CE=new n.A(5e4),this.Yo=new n.A(5e4);const e=new h.A(t.read('data'));let r=-1;for(e.ft+=2;e.ft<e.length;){let t=e.ct;65535===t&&(r=e.ct,t=e.ct);const h=this.Wo[t]=new c;h.id=t,h.Xd=r,h.type=e.cA,h.ra=e.cA,h.xl=e.ct,h.width=e.ct,h.height=e.ct,h.am=e.cA,0===h.am?h.am=-1:h.am=(h.am-1<<8)+e.cA;const n=e.cA;if(n>0){h.al=new Uint8Array(n),h.fl=new Uint16Array(n);for(let t=0;t<n;t++)h.al[t]=e.cA,h.fl[t]=e.ct}const o=e.cA;if(o>0){h.scripts=new l.vs(o,null);for(let t=0;t<o;t++){const i=e.ct,s=new Uint16Array(i);h.scripts[t]=s;for(let t=0;t<i;t++)s[t]=e.ct}}if(h.type===c.Nl){h.scroll=e.ct,h.hide=1===e.cA;const t=e.cA;h._l=new Array(t),h.Rl=new Array(t),h.Sl=new Array(t);for(let i=0;i<t;i++)h._l[i]=e.ct,h.Rl[i]=e.cp,h.Sl[i]=e.cp}if(h.type===c.TE&&(e.ft+=3),h.type===c.Fl){h.Gl=new Int32Array(h.width*h.height),h.Hl=new Int32Array(h.width*h.height),h.draggable=1===e.cA,h.fm=1===e.cA,h.dm=1===e.cA,h.Wl=e.cA,h.Yl=e.cA,h.Ul=new Int16Array(20),h.Bl=new Int16Array(20),h.Ql=new l.vs(20,null);for(let t=0;t<20;t++)if(1===e.cA){h.Ul[t]=e.cp,h.Bl[t]=e.cp;const s=e.gA;if(s.length>0){const e=s.lastIndexOf(',');h.Ql[t]=this.ig(i,s.substring(0,e),parseInt(s.substring(e+1),10))}}h.wm=new l.vs(5,null);for(let t=0;t<5;t++){const i=e.gA;h.wm[t]=i,0===i.length&&(h.wm[t]=null)}}if(h.type===c.ta&&(h.fill=1===e.cA),h.type===c.sa||h.type===c.TE){h.aa=1===e.cA;const t=e.cA;s&&(h.font=s[t]),h.fa=1===e.cA}if(h.type===c.sa&&(h.text=e.gA,h.na=e.gA),h.type!==c.TE&&h.type!==c.ta&&h.type!==c.sa||(h.ia=e.ut),h.type!==c.ta&&h.type!==c.sa||(h.ea=e.ut,h.ha=e.ut),h.type===c.da){const t=e.gA;if(t.length>0){const s=t.lastIndexOf(',');h.ya=this.ig(i,t.substring(0,s),parseInt(t.substring(s+1),10))}const s=e.gA;if(s.length>0){const t=s.lastIndexOf(',');h.wa=this.ig(i,s.substring(0,t),parseInt(s.substring(t+1),10))}}if(h.type===c.Aa){const t=e.cA;0!==t&&(h.model=this._a((t-1<<8)+e.cA));const i=e.cA;0!==i&&(h.sg=this._a((i-1<<8)+e.cA)),h.El=e.cA,0===h.El?h.El=-1:h.El=(h.El-1<<8)+e.cA,h.gl=e.cA,0===h.gl?h.gl=-1:h.gl=(h.gl-1<<8)+e.cA,h.zoom=e.ct,h.Ia=e.ct,h.Ca=e.ct}if(h.type===c.Ta){h.Gl=new Int32Array(h.width*h.height),h.Hl=new Int32Array(h.width*h.height),h.aa=1===e.cA;const t=e.cA;s&&(h.font=s[t]),h.fa=1===e.cA,h.ia=e.ut,h.Wl=e.cp,h.Yl=e.cp,h.fm=1===e.cA,h.wm=new l.vs(5,null);for(let t=0;t<5;t++){const i=e.gA;h.wm[t]=i,0===i.length&&(h.wm[t]=null)}}h.ra!==c.Im&&h.type!==c.Fl||(h.kw=e.gA,h.action=e.gA,h.Mw=e.ct),h.ra!==c.ym&&h.ra!==c.Em&&h.ra!==c.gm&&h.ra!==c.oa||(h.pm=e.gA,0===h.pm.length&&(h.ra===c.ym?h.pm='Ok':h.ra===c.Em||h.ra===c.gm?h.pm='Select':h.ra===c.oa&&(h.pm='Continue')))}this.CE=null,this.Yo=null};static ig=(t,i,s)=>{const h=o.A.hg(i)<<8n|BigInt(s);if(this.CE){const t=this.CE.get(h);if(t)return t}let e;try{e=r.A.nc(t,i,s),this.CE?.put(h,e)}catch(t){return null}return e};static _a=t=>{if(this.Yo){const i=this.Yo.get(BigInt(t));if(i)return i}const i=e.A.model(t);return this.Yo?.put(BigInt(t),i),i};id=-1;Xd=-1;type=-1;ra=-1;xl=0;width=0;height=0;am=-1;al=null;fl=null;scripts=null;scroll=0;hide=!1;draggable=!1;fm=!1;dm=!1;Wl=0;Yl=0;Ul=null;Bl=null;Ql=null;wm=null;fill=!1;aa=!1;font=null;fa=!1;text=null;na=null;ia=0;ea=0;ha=0;ya=null;wa=null;model=null;sg=null;El=-1;gl=-1;zoom=0;Ia=0;Ca=0;kw=null;action=null;Mw=-1;pm=null;_l=null;Rl=null;Sl=null;x=0;y=0;Pl=0;Gl=null;Hl=null;Tl=0;Cl=0;_a(t,i,s){let h=this.model;if(s&&(h=this.sg),!h)return null;if(-1===t&&-1===i&&!h.eg)return h;const n=e.A.ng(h,!0,!0,!1);return-1===t&&-1===i||n.Ya(),-1!==t&&n.Va(t),-1!==i&&n.Va(i),n.Ka(64,768,-50,-10,-50,!0),n}rg(){if(this.Xd===this.id)return this.x;let t=c.Wo[this.Xd];if(!t._l||!t.Rl||!t.Sl)return this.x;let i=t._l.indexOf(this.id);if(-1===i)return this.x;let s=t.Rl[i];for(;t.Xd!==t.id;){const h=c.Wo[t.Xd];h._l&&h.Rl&&h.Sl&&(i=h._l.indexOf(t.id),-1!==i&&(s+=h.Rl[i])),t=h}return s}og(){if(this.Xd===this.id)return this.y;let t=c.Wo[this.Xd];if(!t._l||!t.Rl||!t.Sl)return this.y;let i=t._l.indexOf(this.id);if(-1===i)return this.y;let s=t.Sl[i];for(;t.Xd!==t.id;){const h=c.Wo[t.Xd];h._l&&h.Rl&&h.Sl&&(i=h._l.indexOf(t.id),-1!==i&&(s+=h.Sl[i])),t=h}return s}outline(t){const i=this.rg(),s=this.og();a.A.Ml(i,s,this.width,this.height,t)}move(t,i){if(this.Xd===this.id)return;this.x=0,this.y=0;const s=c.Wo[this.Xd];if(s._l&&s.Rl&&s.Sl){const h=s._l.indexOf(this.id);-1!==h&&(s.Rl[h]=t,s.Sl[h]=i)}}delete(){if(this.Xd===this.id)return;const t=c.Wo[this.Xd];if(t._l&&t.Rl&&t.Sl){const i=t._l.indexOf(this.id);-1!==i&&(t._l.splice(i,1),t.Rl.splice(i,1),t.Sl.splice(i,1))}}}},6333:(t,i,s)=>{s.d(i,{$:()=>h});class h{id;lg=null;constructor(t){this.id=t}ag(t){for(;;){const i=t.cA;if(0===i)break;this.decode(i,t)}return this}}},2164:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(6333);class n extends e.${static count=0;static Wo=[];static Ac=t=>{const i=new h.A(t.read('flo.dat'));this.count=i.ct;for(let t=0;t<this.count;t++)this.Wo[t]=new n(t).ag(i)};static cg=(t,i,s)=>(s>179&&(i=i/2|0),s>192&&(i=i/2|0),s>217&&(i=i/2|0),s>243&&(i=i/2|0),(t/4<<10)+(i/32<<7)+(s/2|0));static fg=(t,i)=>-1===t?12345678:((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);static ug=(t,i)=>-2===t?12345678:-1===t?(i<0?i=0:i>127&&(i=127),127-i):((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);dg=0;texture=-1;wg=!1;yg=!0;Ag=0;pg=0;mg=0;Ig=0;_g=0;Eg=0;decode(t,i){1===t?(this.dg=i.lt,this.setColor(this.dg)):2===t?this.texture=i.cA:3===t?this.wg=!0:5===t?this.yg=!1:6===t?this.lg=i.gA:console.log('Error unrecognised config code: ',t)}setColor(t){const i=(t>>16&255)/256,s=(t>>8&255)/256,h=(255&t)/256;let e=i;s<i&&(e=s),h<e&&(e=h);let r=i;s>i&&(r=s),h>r&&(r=h);let o=0,l=0;const a=(e+r)/2;e!==r&&(a<.5&&(l=(r-e)/(r+e)),a>=.5&&(l=(r-e)/(2-r-e)),i===r?o=(s-h)/(r-e):s===r?o=(h-i)/(r-e)+2:h===r&&(o=(i-s)/(r-e)+4)),o/=6,this.Ag=256*o|0,this.pg=256*l|0,this.mg=256*a|0,this.pg<0?this.pg=0:this.pg>255&&(this.pg=255),this.mg<0?this.mg=0:this.mg>255&&(this.mg=255),this.Ig=a>.5?(1-a)*l*512|0:a*l*512|0,this.Ig<1&&(this.Ig=1),this._g=o*this.Ig|0;let c=this.Ag+(16*Math.random()|0)-8;c<0?c=0:c>255&&(c=255);let f=this.pg+(48*Math.random()|0)-24;f<0?f=0:f>255&&(f=255);let u=this.mg+(48*Math.random()|0)-24;u<0?u=0:u>255&&(u=255),this.Eg=n.cg(c,f,u)}}},8317:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(1069),e=s(6333),n=s(8665),r=s(3867);class o extends e.${static count=0;static Wo=[];static Ac=t=>{const i=new h.A(t.read('idk.dat'));this.count=i.ct;for(let t=0;t<this.count;t++)this.Wo[t]=new o(t).ag(i)};type=-1;gg=null;Cg=new Int32Array(5).fill(-1);Tg=new Int32Array(6);Og=new Int32Array(6);disable=!1;decode(t,i){if(1===t)this.type=i.cA;else if(2===t){const t=i.cA;this.gg=new Int32Array(t);for(let s=0;s<t;s++)this.gg[s]=i.ct}else if(3===t)this.disable=!0;else if(t>=40&&t<50)this.Tg[t-40]=i.ct;else if(t>=50&&t<60)this.Og[t-50]=i.ct;else{if(!(t>=60&&t<70))throw new Error(`Unrecognized idk config code: ${t}`);this.Cg[t-60]=i.ct}}_a(){if(!this.gg)return null;const t=new r.vs(this.gg.length,null);for(let i=0;i<this.gg.length;i++)t[i]=n.A.model(this.gg[i]);let i;i=1===t.length?t[0]:n.A.Ua(t,t.length);for(let t=0;t<6&&0!==this.Tg[t];t++)i?.Ba(this.Tg[t],this.Og[t]);return i}IA(){let t=0;const i=new r.vs(5,null);for(let s=0;s<5;s++)-1!==this.Cg[s]&&(i[t++]=n.A.model(this.Cg[s]));const s=n.A.Ua(i,t);for(let t=0;t<6&&0!==this.Tg[t];t++)s.Ba(this.Tg[t],this.Og[t]);return s}}},5637:(t,i,s)=>{s.d(i,{A:()=>c});var h=s(6333),e=s(1069),n=s(2031),r=s(8665),o=s(1023),l=s(6169),a=s(3867);class c extends h.${static count=0;static cache=null;static bg=null;static vg=null;static Lg=0;static fu=new n.A(500);static uu=new n.A(30);static Ac=t=>{this.bg=new e.A(t.read('loc.dat'));const i=new e.A(t.read('loc.idx'));this.count=i.ct,this.vg=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.vg[t]=s,s+=i.ct;this.cache=new a.vs(10,null);for(let t=0;t<10;t++)this.cache[t]=new c(-1)};static get=t=>{if(!this.cache||!this.vg||!this.bg)throw new Error('LocType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.Lg=(this.Lg+1)%10;const i=this.cache[this.Lg];return this.bg.ft=this.vg[t],i.id=t,i.reset(),i.ag(this.bg),i.Rg||(i.Rg=new Int32Array(1)),-1===i.Sg&&i.Rg&&(i.active=i.Rg.length>0&&i.Rg[0]===o.A.gy.id,i.Om&&(i.active=!0)),i};static Bo=()=>{this.fu=null,this.uu=null,this.vg=null,this.cache=null,this.bg=null};gg=null;Rg=null;name=null;dw=null;Tg=null;Og=null;width=1;length=1;$y=!0;Jy=!0;active=!1;Sg=-1;Mg=!1;kg=!1;yg=!1;El=-1;xg=!1;Dg=16;Ng=0;Pg=0;Om=null;vd=-1;Dd=-1;Fg=!1;Ug=!0;Bg=128;Gg=128;Hg=128;Oy=0;Wg=0;Yg=0;Vg=0;Kg=!1;decode(t,i){if(1===t){const t=i.cA;this.gg=new Int32Array(t),this.Rg=new Int32Array(t);for(let s=0;s<t;s++)this.gg[s]=i.ct,this.Rg[s]=i.cA}else if(2===t)this.name=i.gA;else if(3===t)this.dw=i.gA;else if(14===t)this.width=i.cA;else if(15===t)this.length=i.cA;else if(17===t)this.$y=!1;else if(18===t)this.Jy=!1;else if(19===t)this.Sg=i.cA,1===this.Sg&&(this.active=!0);else if(21===t)this.Mg=!0;else if(22===t)this.kg=!0;else if(23===t)this.yg=!0;else if(24===t)this.El=i.ct,65535===this.El&&(this.El=-1);else if(25===t)this.xg=!0;else if(28===t)this.Dg=i.cA;else if(29===t)this.Ng=i.lA;else if(39===t)this.Pg=i.lA;else if(t>=30&&t<39)this.Om||(this.Om=new a.vs(5,null)),this.Om[t-30]=i.gA,'hidden'===this.Om[t-30]?.toLowerCase()&&(this.Om[t-30]=null);else if(40===t){const t=i.cA;this.Tg=new Uint16Array(t),this.Og=new Uint16Array(t);for(let s=0;s<t;s++)this.Tg[s]=i.ct,this.Og[s]=i.ct}else 60===t?this.vd=i.ct:62===t?this.Fg=!0:64===t?this.Ug=!1:65===t?this.Bg=i.ct:66===t?this.Gg=i.ct:67===t?this.Hg=i.ct:68===t?this.Dd=i.ct:69===t?this.Oy=i.cA:70===t?this.Wg=i.cp:71===t?this.Yg=i.cp:72===t?this.Vg=i.cp:73===t&&(this.Kg=!0)}_a(t,i,s,h,e,n,o){if(!this.Rg)return null;let a=-1;for(let i=0;i<this.Rg.length;i++)if(this.Rg[i]===t){a=i;break}if(-1===a)return null;const f=BigInt(BigInt(this.id)<<6n)+BigInt(BigInt(a)<<3n)+BigInt(i)+BigInt(BigInt(o)+1n<<32n);let u=c.uu?.get(f);if(u){if((this.Mg||this.kg)&&(u=r.A.Xg(u,this.Mg,this.kg)),this.Mg){const t=(s+h+e+n)/4|0;for(let i=0;i<u.zg;i++){const r=u.jg[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(u.Zg[i]+64)/128|0);u.qg[i]+=l-t}u.$g()}return u}if(!this.gg)return null;if(a>=this.gg.length)return null;let d=this.gg[a];if(-1===d)return null;const w=this.Fg!==i>3;w&&(d+=65536);let y=c.fu?.get(BigInt(d));y||(y=r.A.model(65535&d),w&&y.Jg(),c.fu?.put(BigInt(d),y));const A=128!==this.Bg||128!==this.Gg||128!==this.Hg,p=0!==this.Wg||0!==this.Yg||0!==this.Vg;let m=r.A.ng(y,!this.Tg,!this.xg,i===l.A.Fd&&-1===o&&!A&&!p);for(-1!==o&&(m.Ya(),m.Va(o),m.Qg=null,m.tC=null);i-- >0;)m.iC();if(this.Tg&&this.Og)for(let t=0;t<this.Tg.length;t++)m.Ba(this.Tg[t],this.Og[t]);if(A&&m.scale(this.Bg,this.Gg,this.Hg),p&&m.translate(this.Yg,this.Wg,this.Vg),m.Ka(64+(255&this.Ng),5*(255&this.Pg)+768,-50,-10,-50,!this.kg),this.$y&&(m.sC=m.hC),c.uu?.put(f,m),(this.Mg||this.kg)&&(m=r.A.Xg(m,this.Mg,this.kg)),this.Mg){const t=(s+h+e+n)/4|0;for(let i=0;i<m.zg;i++){const r=m.jg[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(m.Zg[i]+64)/128|0);m.qg[i]+=l-t}m.$g()}return m}reset(){this.gg=null,this.Rg=null,this.name=null,this.dw=null,this.Tg=null,this.Og=null,this.width=1,this.length=1,this.$y=!0,this.Jy=!0,this.active=!1,this.Sg=-1,this.Mg=!1,this.kg=!1,this.yg=!1,this.El=-1,this.Dg=16,this.Ng=0,this.Pg=0,this.Om=null,this.xg=!1,this.vd=-1,this.Dd=-1,this.Fg=!1,this.Ug=!0,this.Bg=128,this.Gg=128,this.Hg=128,this.Oy=0,this.Wg=0,this.Yg=0,this.Vg=0,this.Kg=!1}}},6948:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(6333),e=s(1069),n=s(2031),r=s(8665),o=s(3867);class l extends h.${static count=0;static cache=null;static bg=null;static vg=null;static Lg=0;static Yo=new n.A(30);static Ac=t=>{this.bg=new e.A(t.read('npc.dat'));const i=new e.A(t.read('npc.idx'));this.count=i.ct,this.vg=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.vg[t]=s,s+=i.ct;this.cache=new o.vs(20,null);for(let t=0;t<20;t++)this.cache[t]=new l(-1)};static get=t=>{if(!this.cache||!this.vg||!this.bg)throw new Error('NpcType not loaded!!!');for(let i=0;i<20;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.Lg=(this.Lg+1)%20;const i=this.cache[this.Lg]=new l(t);return this.bg.ft=this.vg[t],i.ag(this.bg),i};static Bo=()=>{this.Yo=null,this.vg=null,this.cache=null,this.bg=null};name=null;dw=null;size=1;gg=null;Cg=null;xg=!1;OI=-1;mI=-1;_I=-1;gI=-1;TI=-1;Tg=null;Og=null;Om=null;Bg=-1;Gg=-1;Hg=-1;Id=!0;Sm=-1;eC=128;nC=128;decode(t,i){if(1===t){const t=i.cA;this.gg=new Uint16Array(t);for(let s=0;s<t;s++)this.gg[s]=i.ct}else if(2===t)this.name=i.gA;else if(3===t)this.dw=i.gA;else if(12===t)this.size=i.lA;else if(13===t)this.OI=i.ct;else if(14===t)this.mI=i.ct;else if(16===t)this.xg=!0;else if(17===t)this.mI=i.ct,this._I=i.ct,this.gI=i.ct,this.TI=i.ct;else if(t>=30&&t<40)this.Om||(this.Om=new o.vs(5,null)),this.Om[t-30]=i.gA,'hidden'===this.Om[t-30]?.toLowerCase()&&(this.Om[t-30]=null);else if(40===t){const t=i.cA;this.Tg=new Uint16Array(t),this.Og=new Uint16Array(t);for(let s=0;s<t;s++)this.Tg[s]=i.ct,this.Og[s]=i.ct}else if(60===t){const t=i.cA;this.Cg=new Uint16Array(t);for(let s=0;s<t;s++)this.Cg[s]=i.ct}else 90===t?this.Bg=i.ct:91===t?this.Gg=i.ct:92===t?this.Hg=i.ct:93===t?this.Id=!1:95===t?this.Sm=i.ct:97===t?this.eC=i.ct:98===t&&(this.nC=i.ct)}rC(t,i,s){let h=null,e=null;if(l.Yo&&(e=l.Yo.get(BigInt(this.id)),!e&&this.gg)){const t=new o.vs(this.gg.length,null);for(let i=0;i<this.gg.length;i++)t[i]=r.A.model(this.gg[i]);if(e=1===t.length?t[0]:r.A.Ua(t,t.length),this.Tg&&this.Og)for(let t=0;t<this.Tg.length;t++)e?.Ba(this.Tg[t],this.Og[t]);e?.Ya(),e?.Ka(64,850,-30,-50,-30,!0),e&&l.Yo.put(BigInt(this.id),e)}return e?(h=r.A.oC(e,!this.xg),-1!==t&&-1!==i?h.lC(t,i,s):-1!==t&&h.Va(t),128===this.eC&&128===this.nC||h.scale(this.eC,this.nC,this.eC),h.aC(),h.Qg=null,h.tC=null,1===this.size&&(h.cC=!0),h):null}IA(){if(!this.Cg)return null;const t=new o.vs(this.Cg.length,null);for(let i=0;i<this.Cg.length;i++)t[i]=r.A.model(this.Cg[i]);let i;if(i=1===t.length?t[0]:r.A.Ua(t,t.length),this.Tg&&this.Og)for(let t=0;t<this.Tg.length;t++)i?.Ba(this.Tg[t],this.Og[t]);return i}}},1302:(t,i,s)=>{s.d(i,{A:()=>u});var h=s(6333),e=s(1069),n=s(1122),r=s(2031),o=s(8665),l=s(4583),a=s(8950),c=s(9298),f=s(3867);class u extends h.${static count=0;static cache=null;static bg=null;static vg=null;static Lg=0;static fC=!0;static Yo=new r.A(50);static du=new r.A(200);static Ac=(t,i)=>{this.fC=i,this.bg=new e.A(t.read('obj.dat'));const s=new e.A(t.read('obj.idx'));this.count=s.ct,this.vg=new Int32Array(this.count);let h=2;for(let t=0;t<this.count;t++)this.vg[t]=h,h+=s.ct;this.cache=new f.vs(10,null);for(let t=0;t<10;t++)this.cache[t]=new u(-1)};static get=t=>{if(!this.cache||!this.vg||!this.bg)throw new Error('ObjType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.Lg=(this.Lg+1)%10;const i=this.cache[this.Lg];return this.bg.ft=this.vg[t],i.id=t,i.reset(),i.ag(this.bg),-1!==i.uC&&i.dC(),!this.fC&&i.members&&(i.name='Members Object',i.dw="Login to a members' server to use this object.",i.Om=null,i.um=null),i};static Bo=()=>{this.Yo=null,this.du=null,this.vg=null,this.cache=null,this.bg=null};static Vl=(t,i)=>{if(u.du){let s=u.du.get(BigInt(t));if(s&&s.gd!==i&&-1!==s.gd&&(s.pA(),s=null),s)return s}let s=u.get(t);if(s.wC||(i=-1),s.wC&&s.yC&&i>1){let t=-1;for(let h=0;h<10;h++)i>=s.yC[h]&&0!==s.yC[h]&&(t=s.wC[h]);-1!==t&&(s=u.get(t))}const h=new n.A(32,32),e=l.A.pa,r=l.A.ma,o=l.A._c,f=a.A.mc,d=a.A.AC,w=a.A.pC,y=a.A.left,A=a.A.right,p=a.A.top,m=a.A.bottom;l.A.mC=!1,a.A.bind(h.mc,32,32),a.A.fillRect(0,0,32,32,c.A.$l),l.A.K_();const I=s.Yy(1),_=l.A.sin[s.bp]*s.Lp>>16,E=l.A.cos[s.bp]*s.Lp>>16;I.ga(0,s.vp,s.IC,s.bp,s._C,_+(I.hC/2|0)+s.EC,E+s.EC);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.mc[t+32*i]&&(t>0&&h.mc[t+32*i-1]>1||i>0&&h.mc[t+32*(i-1)]>1||t<31&&h.mc[t+32*i+1]>1||i<31&&h.mc[t+32*(i+1)]>1)&&(h.mc[t+32*i]=1);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.mc[t+32*i]&&t>0&&i>0&&h.mc[t+32*(i-1)-1]>0&&(h.mc[t+32*i]=3153952);if(-1!==s.uC){const t=this.Vl(s.gC,10),i=t.jl,h=t.gd;t.jl=32,t.gd=32,t.CC(5,5,22,22),t.jl=i,t.gd=h}return u.du?.put(BigInt(t),h),a.A.bind(f,d,w),a.A.Ll(y,p,A,m),l.A.pa=e,l.A.ma=r,l.A._c=o,l.A.mC=!0,s.Oa?h.jl=33:h.jl=32,h.gd=i,h};model=0;name=null;dw=null;Tg=null;Og=null;Lp=2e3;bp=0;vp=0;IC=0;_C=0;EC=0;TC=!1;OC=-1;Oa=!1;Hy=1;members=!1;Om=null;um=null;bC=-1;vC=-1;LC=0;RC=-1;SC=-1;MC=0;kC=-1;xC=-1;DC=-1;NC=-1;PC=-1;FC=-1;wC=null;yC=null;gC=-1;uC=-1;decode(t,i){if(1===t)this.model=i.ct;else if(2===t)this.name=i.gA;else if(3===t)this.dw=i.gA;else if(4===t)this.Lp=i.ct;else if(5===t)this.bp=i.ct;else if(6===t)this.vp=i.ct;else if(7===t)this._C=i.cp,this._C>32767&&(this._C-=65536);else if(8===t)this.EC=i.cp,this.EC>32767&&(this.EC-=65536);else if(9===t)this.TC=!0;else if(10===t)this.OC=i.ct;else if(11===t)this.Oa=!0;else if(12===t)this.Hy=i.ut;else if(16===t)this.members=!0;else if(23===t)this.bC=i.ct,this.LC=i.lA;else if(24===t)this.vC=i.ct;else if(25===t)this.RC=i.ct,this.MC=i.lA;else if(26===t)this.SC=i.ct;else if(t>=30&&t<35)this.Om||(this.Om=new f.vs(5,null)),this.Om[t-30]=i.gA,'hidden'===this.Om[t-30]?.toLowerCase()&&(this.Om[t-30]=null);else if(t>=35&&t<40)this.um||(this.um=new f.vs(5,null)),this.um[t-35]=i.gA;else if(40===t){const t=i.cA;this.Tg=new Uint16Array(t),this.Og=new Uint16Array(t);for(let s=0;s<t;s++)this.Tg[s]=i.ct,this.Og[s]=i.ct}else 78===t?this.kC=i.ct:79===t?this.xC=i.ct:90===t?this.DC=i.ct:91===t?this.PC=i.ct:92===t?this.NC=i.ct:93===t?this.FC=i.ct:95===t?this.IC=i.ct:97===t?this.gC=i.ct:98===t?this.uC=i.ct:t>=100&&t<110&&(this.wC&&this.yC||(this.wC=new Uint16Array(10),this.yC=new Uint16Array(10)),this.wC[t-100]=i.ct,this.yC[t-100]=i.ct)}UC(t){let i=this.bC;if(1===t&&(i=this.RC),-1===i)return null;let s=this.vC,h=this.kC;1===t&&(s=this.SC,h=this.xC);let e=o.A.model(i);if(-1!==s){const t=o.A.model(s);if(-1===h){const i=[e,t];e=o.A.Ua(i,2)}else{const i=[e,t,o.A.model(h)];e=o.A.Ua(i,3)}}if(0===t&&0!==this.LC&&e.translate(this.LC,0,0),1===t&&0!==this.MC&&e.translate(this.MC,0,0),this.Tg&&this.Og)for(let t=0;t<this.Tg.length;t++)e.Ba(this.Tg[t],this.Og[t]);return e}IA(t){let i=this.DC;if(1===t&&(i=this.PC),-1===i)return null;let s=this.NC;1===t&&(s=this.FC);let h=o.A.model(i);if(-1!==s){const t=[h,o.A.model(s)];h=o.A.Ua(t,2)}if(this.Tg&&this.Og)for(let t=0;t<this.Tg.length;t++)h.Ba(this.Tg[t],this.Og[t]);return h}Yy(t){if(this.wC&&this.yC&&t>1){let i=-1;for(let s=0;s<10;s++)t>=this.yC[s]&&0!==this.yC[s]&&(i=this.wC[s]);if(-1!==i)return u.get(i).Yy(1)}if(u.Yo){const t=u.Yo.get(BigInt(this.id));if(t)return t}const i=o.A.model(this.model);if(this.Tg&&this.Og)for(let t=0;t<this.Tg.length;t++)i.Ba(this.Tg[t],this.Og[t]);return i.Ka(64,768,-50,-10,-50,!0),i.cC=!0,u.Yo?.put(BigInt(this.id),i),i}dC(){const t=u.get(this.uC);this.model=t.model,this.Lp=t.Lp,this.bp=t.bp,this.vp=t.vp,this.IC=t.IC,this._C=t._C,this.EC=t.EC,this.Tg=t.Tg,this.Og=t.Og;const i=u.get(this.gC);this.name=i.name,this.members=i.members,this.Hy=i.Hy;let s='a';const h=(i.name||'').toLowerCase().charAt(0);'a'!==h&&'e'!==h&&'i'!==h&&'o'!==h&&'u'!==h||(s='an'),this.dw=`Swap this note at any bank for ${s} ${i.name}.`,this.Oa=!0}reset(){this.model=0,this.name=null,this.dw=null,this.Tg=null,this.Og=null,this.Lp=2e3,this.bp=0,this.vp=0,this.IC=0,this._C=0,this.EC=0,this.TC=!1,this.OC=-1,this.Oa=!1,this.Hy=1,this.members=!1,this.Om=null,this.um=null,this.bC=-1,this.vC=-1,this.LC=0,this.RC=-1,this.SC=-1,this.MC=0,this.kC=-1,this.xC=-1,this.DC=-1,this.NC=-1,this.PC=-1,this.FC=-1,this.wC=null,this.yC=null,this.gC=-1,this.uC=-1}}},1312:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(6333),e=s(1069),n=s(6730);class r extends h.${static count=0;static Wo=[];static Ac=t=>{const i=new e.A(t.read('seq.dat'));this.count=i.ct;for(let t=0;t<this.count;t++){const s=new r(t).ag(i);0===s.Ol&&(s.Ol=1,s.frames=new Int16Array(1),s.frames[0]=-1,s.Ea=new Int16Array(1),s.Ea[0]=-1,s.delay=new Int16Array(1),s.delay[0]=-1),this.Wo[t]=s}};Ol=0;frames=null;Ea=null;delay=null;bl=-1;u_=null;f_=!1;priority=5;BC=-1;GC=-1;c_=99;duration=0;decode(t,i){if(1===t){this.Ol=i.cA,this.frames=new Int16Array(this.Ol),this.Ea=new Int16Array(this.Ol),this.delay=new Int16Array(this.Ol);for(let t=0;t<this.Ol;t++)this.frames[t]=i.ct,this.Ea[t]=i.ct,65535===this.Ea[t]&&(this.Ea[t]=-1),this.delay[t]=i.ct,0===this.delay[t]&&(this.delay[t]=n.A.Wo[this.frames[t]].delay),0===this.delay[t]&&(this.delay[t]=1),this.duration+=this.delay[t]}else if(2===t)this.bl=i.ct;else if(3===t){const t=i.cA;this.u_=new Int32Array(t+1);for(let s=0;s<t;s++)this.u_[s]=i.cA;this.u_[t]=9999999}else if(4===t)this.f_=!0;else if(5===t)this.priority=i.cA;else if(6===t)this.BC=i.ct;else if(7===t)this.GC=i.ct;else{if(8!==t)throw new Error(`Unrecognized seq config code: ${t}`);this.c_=i.cA}}}},8738:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(6333),e=s(1069),n=s(1312),r=s(8665),o=s(2031);class l extends h.${static count=0;static Wo=[];static Yo=new o.A(30);static Ac=t=>{const i=new e.A(t.read('spotanim.dat'));this.count=i.ct;for(let t=0;t<this.count;t++)this.Wo[t]=new l(t).ag(i)};model=0;El=-1;qI=null;xg=!1;Tg=new Uint16Array(6);Og=new Uint16Array(6);eC=128;nC=128;orientation=0;Ng=0;Pg=0;decode(t,i){if(1===t)this.model=i.ct;else if(2===t)this.El=i.ct,n.A.Wo&&(this.qI=n.A.Wo[this.El]);else if(3===t)this.xg=!0;else if(4===t)this.eC=i.ct;else if(5===t)this.nC=i.ct;else if(6===t)this.orientation=i.ct;else if(7===t)this.Ng=i.cA;else if(8===t)this.Pg=i.cA;else if(t>=40&&t<50)this.Tg[t-40]=i.ct;else{if(!(t>=50&&t<60))throw new Error(`Unrecognized spotanim config code: ${t}`);this.Og[t-50]=i.ct}}_a(){let t=l.Yo?.get(BigInt(this.id));if(t)return t;t=r.A.model(this.model);for(let i=0;i<6;i++)0!==this.Tg[0]&&t.Ba(this.Tg[i],this.Og[i]);return l.Yo?.put(BigInt(this.id),t),t}}},3764:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(6333),e=s(1069);class n extends h.${static count=0;static Wo=[];static HC=[];static WC=0;static Ac=t=>{const i=new e.A(t.read('varp.dat'));this.count=i.ct;for(let t=0;t<this.count;t++)this.Wo[t]=new n(t).ag(i)};scope=0;type=0;HC=!1;YC=!0;sm=0;VC=0;KC=!1;XC=!1;decode(t,i){if(1===t)this.scope=i.cA;else if(2===t)this.type=i.cA;else if(3===t)this.HC=!0,n.HC[n.WC++]=this.id;else if(4===t)this.YC=!1;else if(5===t)this.sm=i.ct;else if(6===t)this.KC=!0;else if(7===t)this.VC=i.ut;else if(8===t)this.XC=!0;else{if(10!==t)throw new Error(`Error unrecognised config code: ${t}`);this.lg=i.gA}}}},9456:(t,i,s)=>{s.d(i,{A:()=>h});class h{static OPEN=0;static zC=1;static jC=2;static ZC=4;static qC=8;static $C=h.zC<<4;static JC=h.jC<<4;static QC=h.ZC<<4;static tT=h.qC<<4;static iT=256;static sT=512;static hT=1024;static eT=2048;static nT=4096;static rT=h.sT<<4;static oT=h.hT<<4;static lT=h.eT<<4;static aT=h.nT<<4;static cT=h.iT<<9;static fT=524288;static uT=2097152;static dT=h.uT|h.fT;static wT=h.iT|h.dT;static Sd=h.jC|h.wT;static Ld=h.qC|h.wT;static Pm=h.jC|h.ZC|h.Ld;static Md=h.JC|h.wT;static Um=h.qC|h.$C|h.Md;static Rd=h.tT|h.wT;static Fm=h.zC|h.jC|h.Rd;static Bm=h.JC|h.QC|h.Rd;static yT=16777215}},670:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(9456),e=s(6169),n=s(1023),r=s(4909);class o{static Xn=4;static nr=104;static index=(t,i)=>t*o.nr+i;offsetX;AT;sizeX;sizeZ;flags;constructor(){this.offsetX=0,this.AT=0,this.sizeX=o.nr,this.sizeZ=o.nr,this.flags=new Int32Array(this.sizeX*this.sizeZ),this.reset()}reset=()=>{for(let t=0;t<this.sizeX;t++)for(let i=0;i<this.sizeZ;i++){const s=o.index(t,i);0===t||0===i||t===this.sizeX-1||i===this.sizeZ-1?this.flags[s]=h.A.yT:this.flags[s]=h.A.OPEN}};pT=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.AT)]|=h.A.uT};sA=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.AT)]&=~h.A.uT};Ky=(t,i,s,n,r,o)=>{let l=h.A.iT;o&&(l|=h.A.cT);const a=t-this.offsetX,c=i-this.AT;if(r===e.A.Ud||r===e.A.Gd){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.add(t,i,l)};tA=(t,i,s,n,r,o)=>{let l=h.A.iT;o&&(l|=h.A.cT);const a=t-this.offsetX,c=i-this.AT;if(r===e.A.Ud||r===e.A.Gd){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.remove(t,i,l)};mT=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.AT,c=o?h.A.aT:h.A.tT,f=o?h.A.nT:h.A.qC,u=o?h.A.hT:h.A.jC,d=o?h.A.oT:h.A.JC,w=o?h.A.sT:h.A.zC,y=o?h.A.rT:h.A.$C,A=o?h.A.eT:h.A.ZC,p=o?h.A.lT:h.A.QC;s===n.A.Nd.id?r===e.A.Fd?(this.add(l,a,c),this.add(l-1,a,f)):r===e.A.Ud?(this.add(l,a,u),this.add(l,a+1,d)):r===e.A.Bd?(this.add(l,a,f),this.add(l+1,a,c)):r===e.A.Gd&&(this.add(l,a,d),this.add(l,a-1,u)):s===n.A.IT.id||s===n.A.Hd.id?r===e.A.Fd?(this.add(l,a,w),this.add(l-1,a+1,y)):r===e.A.Ud?(this.add(l,a,A),this.add(l+1,a+1,p)):r===e.A.Bd?(this.add(l,a,y),this.add(l+1,a-1,w)):r===e.A.Gd&&(this.add(l,a,p),this.add(l-1,a-1,A)):s===n.A.Pd.id&&(r===e.A.Fd?(this.add(l,a,u|c),this.add(l-1,a,f),this.add(l,a+1,d)):r===e.A.Ud?(this.add(l,a,u|f),this.add(l,a+1,d),this.add(l+1,a,c)):r===e.A.Bd?(this.add(l,a,d|f),this.add(l+1,a,c),this.add(l,a-1,u)):r===e.A.Gd&&(this.add(l,a,d|c),this.add(l,a-1,u),this.add(l-1,a,f))),o&&this.mT(t,i,s,r,!1)};qy=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.AT,c=o?h.A.aT:h.A.tT,f=o?h.A.nT:h.A.qC,u=o?h.A.hT:h.A.jC,d=o?h.A.oT:h.A.JC,w=o?h.A.sT:h.A.zC,y=o?h.A.rT:h.A.$C,A=o?h.A.eT:h.A.ZC,p=o?h.A.lT:h.A.QC;s===n.A.Nd.id?r===e.A.Fd?(this.remove(l,a,c),this.remove(l-1,a,f)):r===e.A.Ud?(this.remove(l,a,u),this.remove(l,a+1,d)):r===e.A.Bd?(this.remove(l,a,f),this.remove(l+1,a,c)):r===e.A.Gd&&(this.remove(l,a,d),this.remove(l,a-1,u)):s===n.A.IT.id||s===n.A.Hd.id?r===e.A.Fd?(this.remove(l,a,w),this.remove(l-1,a+1,y)):r===e.A.Ud?(this.remove(l,a,A),this.remove(l+1,a+1,p)):r===e.A.Bd?(this.remove(l,a,y),this.remove(l+1,a-1,w)):r===e.A.Gd&&(this.remove(l,a,p),this.remove(l-1,a-1,A)):s===n.A.Pd.id&&(r===e.A.Fd?(this.remove(l,a,u|c),this.remove(l-1,a,f),this.remove(l,a+1,d)):r===e.A.Ud?(this.remove(l,a,u|f),this.remove(l,a+1,d),this.remove(l+1,a,c)):r===e.A.Bd?(this.remove(l,a,d|f),this.remove(l+1,a,c),this.remove(l,a-1,u)):r===e.A.Gd&&(this.remove(l,a,d|c),this.remove(l,a-1,u),this.remove(l-1,a,f))),o&&this.qy(t,i,s,r,!1)};xm=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.AT,u=s-this.offsetX,d=r-this.AT,w=o.index(c,f);if(l===n.A.Nd.id){if(a===e.A.Fd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.Md)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.Sd)===h.A.OPEN)return!0}else if(a===e.A.Ud){if(c===u&&f===d+1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.Ld)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.Rd)===h.A.OPEN)return!0}else if(a===e.A.Bd){if(c===u+1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.Md)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.Sd)===h.A.OPEN)return!0}else if(a===e.A.Gd){if(c===u&&f===d-1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.Ld)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.Rd)===h.A.OPEN)return!0}}else if(l===n.A.Pd.id){if(a===e.A.Fd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.Rd)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.Sd)===h.A.OPEN)return!0}else if(a===e.A.Ud){if(c===u-1&&f===d&&(this.flags[w]&h.A.Ld)===h.A.OPEN)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.Sd)===h.A.OPEN)return!0}else if(a===e.A.Bd){if(c===u-1&&f===d&&(this.flags[w]&h.A.Ld)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.Md)===h.A.OPEN)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1)return!0}else if(a===e.A.Gd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.Md)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.Rd)===h.A.OPEN)return!0;if(c===u&&f===d-1)return!0}}else if(l===n.A.Yd.id){if(c===u&&f===d+1&&(this.flags[w]&h.A.JC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.jC)===h.A.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.qC)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.tT)===h.A.OPEN)return!0}return!1};Dm=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.AT,u=s-this.offsetX,d=r-this.AT,w=o.index(c,f);if(l===n.A._T.id||l===n.A.ET.id){if(l===n.A.ET.id&&(a=a+2&3),a===e.A.Fd){if(c===u+1&&f===d&&(this.flags[w]&h.A.tT)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.jC)===h.A.OPEN)return!0}else if(a===e.A.Ud){if(c===u-1&&f===d&&(this.flags[w]&h.A.qC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.jC)===h.A.OPEN)return!0}else if(a===e.A.Bd){if(c===u-1&&f===d&&(this.flags[w]&h.A.qC)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.JC)===h.A.OPEN)return!0}else if(a===e.A.Gd){if(c===u+1&&f===d&&(this.flags[w]&h.A.tT)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.JC)===h.A.OPEN)return!0}}else if(l===n.A.gT.id){if(c===u&&f===d+1&&(this.flags[w]&h.A.JC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.jC)===h.A.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.qC)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.tT)===h.A.OPEN)return!0}return!1};Nm=(t,i,s,e,n,l,a)=>{const c=s+n-1,f=e+l-1,u=o.index(t-this.offsetX,i-this.AT);return t>=s&&t<=c&&i>=e&&i<=f||(t===s-1&&i>=e&&i<=f&&(this.flags[u]&h.A.qC)===h.A.OPEN&&(a&r.A.Fd)===h.A.OPEN||(t===c+1&&i>=e&&i<=f&&(this.flags[u]&h.A.tT)===h.A.OPEN&&(a&r.A.Bd)===h.A.OPEN||(i===e-1&&t>=s&&t<=c&&(this.flags[u]&h.A.jC)===h.A.OPEN&&(a&r.A.Gd)===h.A.OPEN||i===f+1&&t>=s&&t<=c&&(this.flags[u]&h.A.JC)===h.A.OPEN&&(a&r.A.Ud)===h.A.OPEN)))};add=(t,i,s)=>{this.flags[o.index(t,i)]|=s};remove=(t,i,s)=>{this.flags[o.index(t,i)]&=h.A.yT-s}}},4909:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Ud=1;static Bd=2;static Gd=4;static Fd=8}},6169:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Fd=0;static Ud=1;static Bd=2;static Gd=3}},5599:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Xy=0;static zy=1;static Zy=2;static Ty=3}},1023:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(5599);class e{static Nd=new e(0,h.A.Xy);static IT=new e(1,h.A.Xy);static Pd=new e(2,h.A.Xy);static Hd=new e(3,h.A.Xy);static t_=new e(4,h.A.zy);static km=new e(5,h.A.zy);static _T=new e(6,h.A.zy);static ET=new e(7,h.A.zy);static gT=new e(8,h.A.zy);static Yd=new e(9,h.A.Zy);static gy=new e(10,h.A.Zy);static Cy=new e(11,h.A.Zy);static CT=new e(12,h.A.Zy);static TT=new e(13,h.A.Zy);static OT=new e(14,h.A.Zy);static bT=new e(15,h.A.Zy);static vT=new e(16,h.A.Zy);static LT=new e(17,h.A.Zy);static RT=new e(18,h.A.Zy);static ST=new e(19,h.A.Zy);static MT=new e(20,h.A.Zy);static kT=new e(21,h.A.Zy);static Ty=new e(22,h.A.Ty);static values(){return[this.Nd,this.IT,this.LT,this.bT,this.Pd,this.OT,this.Yd,this.Hd,this.Ty,this.CT,this.Cy,this._T,this.MT,this.gy,this.km,this.TT,this.ET,this.t_,this.vT,this.gT,this.ST,this.kT,this.RT]}static of(t){const i=this.values();for(let s=0;s<i.length;s++){const h=i[s];if(h.id===t)return h}throw Error('shape not found')}id;Xd;constructor(t,i){this.id=t,this.Xd=i}}},818:(t,i,s)=>{s.d(i,{A:()=>A});var h=s(670),e=s(2164),n=s(1069),r=s(4583),o=s(198),l=s(5637),a=s(4197),c=s(1312),f=s(1023),u=s(6169),d=s(9298),w=s(5518),y=s(3867);class A{static xT=Int8Array.of(1,2,4,8);static DT=Uint8Array.of(16,32,64,128);static NT=Int8Array.of(1,0,-1,0);static PT=Int8Array.of(0,-1,0,1);static FT=(17*Math.random()|0)-8;static UT=(33*Math.random()|0)-16;static At=!0;static Vp=0;static BT=!1;static GT=(t,i)=>{let s=this.HT(t+45365,i+91923,4)+(this.HT(t+10294,i+37821,2)-128>>1)+(this.HT(t,i,1)-128>>2)-128;return s=35+(.3*s|0),s<10?s=10:s>60&&(s=60),s};static HT=(t,i,s)=>{const h=t/s|0,e=t&s-1,n=i/s|0,r=i&s-1,o=this.WT(h,n),l=this.WT(h+1,n),a=this.WT(h,n+1),c=this.WT(h+1,n+1),f=this.YT(o,l,e,s),u=this.YT(a,c,e,s);return this.YT(f,u,r,s)};static YT=(t,i,s,h)=>{const e=65536-r.A.cos[1024*s/h|0]>>1;return(t*(65536-e)>>16)+(i*e>>16)};static WT=(t,i)=>((this.VT(t-1,i-1)+this.VT(t+1,i-1)+this.VT(t-1,i+1)+this.VT(t+1,i+1))/16|0)+((this.VT(t-1,i)+this.VT(t+1,i)+this.VT(t,i-1)+this.VT(t,i+1))/8|0)+(this.VT(t,i)/4|0);static VT=(t,i)=>{const s=t+57*i,h=BigInt(s<<13^s);return 255&Number((h*(h*h*15731n+789221n)+1376312589n&0x7fffffffn)>>19n)};static Ky=(t,i,s,h,e,n,r,o,d,w,y)=>{const p=e[y][i][s],m=e[y][i+1][s],I=e[y][i+1][s+1],_=e[y][i][s+1],E=p+m+I+_>>2,g=l.A.get(o);let C=i+(s<<7)+(o<<14)+1073741824|0;g.active||(C+=-2147483648),C|=0;const T=(w<<6)+d<<24>>24;if(d===f.A.Ty.id)h?.KT(g._a(f.A.Ty.id,w,p,m,I,_,-1),t,i,s,E,C,T),g.$y&&g.active&&r?.pT(i,s),-1!==g.El&&n.y_(new a.A(o,t,3,i,s,c.A.Wo[g.El],!0));else if(d===f.A.gy.id||d===f.A.Cy.id){const e=g._a(f.A.gy.id,w,p,m,I,_,-1);if(e){let n,r,o=0;d===f.A.Cy.id&&(o+=256),w===u.A.Ud||w===u.A.Gd?(n=g.length,r=g.width):(n=g.width,r=g.length),h?.Ky(t,i,s,E,e,null,C,T,n,r,o)}g.$y&&r?.Ky(i,s,g.width,g.length,w,g.Jy),-1!==g.El&&n.y_(new a.A(o,t,2,i,s,c.A.Wo[g.El],!0))}else if(d>=f.A.CT.id)h?.Ky(t,i,s,E,g._a(d,w,p,m,I,_,-1),null,C,T,1,1,0),g.$y&&r?.Ky(i,s,g.width,g.length,w,g.Jy),-1!==g.El&&n.y_(new a.A(o,t,2,i,s,c.A.Wo[g.El],!0));else if(d===f.A.Nd.id)h?.mT(t,i,s,E,A.xT[w],0,g._a(f.A.Nd.id,w,p,m,I,_,-1),null,C,T),g.$y&&r?.mT(i,s,d,w,g.Jy),-1!==g.El&&n.y_(new a.A(o,t,0,i,s,c.A.Wo[g.El],!0));else if(d===f.A.IT.id)h?.mT(t,i,s,E,A.DT[w],0,g._a(f.A.IT.id,w,p,m,I,_,-1),null,C,T),g.$y&&r?.mT(i,s,d,w,g.Jy),-1!==g.El&&n.y_(new a.A(o,t,0,i,s,c.A.Wo[g.El],!0));else if(d===f.A.Pd.id){const e=w+1&3;h?.mT(t,i,s,E,A.xT[w],A.xT[e],g._a(f.A.Pd.id,w+4,p,m,I,_,-1),g._a(f.A.Pd.id,e,p,m,I,_,-1),C,T),g.$y&&r?.mT(i,s,d,w,g.Jy),-1!==g.El&&n.y_(new a.A(o,t,0,i,s,c.A.Wo[g.El],!0))}else if(d===f.A.Hd.id)h?.mT(t,i,s,E,A.DT[w],0,g._a(f.A.Hd.id,w,p,m,I,_,-1),null,C,T),g.$y&&r?.mT(i,s,d,w,g.Jy),-1!==g.El&&n.y_(new a.A(o,t,0,i,s,c.A.Wo[g.El],!0));else if(d===f.A.Yd.id)h?.Ky(t,i,s,E,g._a(d,w,p,m,I,_,-1),null,C,T,1,1,0),g.$y&&r?.Ky(i,s,g.width,g.length,w,g.Jy),-1!==g.El&&n.y_(new a.A(o,t,2,i,s,c.A.Wo[g.El],!0));else if(d===f.A.t_.id)h?.XT(t,i,s,E,0,0,C,g._a(f.A.t_.id,u.A.Fd,p,m,I,_,-1),T,512*w,A.xT[w]),-1!==g.El&&n.y_(new a.A(o,t,1,i,s,c.A.Wo[g.El],!0));else if(d===f.A.km.id){let e=16;if(h){const n=h.kd(t,i,s);n>0&&(e=l.A.get(n>>14&32767).Dg)}h?.XT(t,i,s,E,A.NT[w]*e,A.PT[w]*e,C,g._a(f.A.t_.id,u.A.Fd,p,m,I,_,-1),T,512*w,A.xT[w]),-1!==g.El&&n.y_(new a.A(o,t,1,i,s,c.A.Wo[g.El],!0))}else d===f.A._T.id?(h?.XT(t,i,s,E,0,0,C,g._a(f.A.t_.id,u.A.Fd,p,m,I,_,-1),T,w,256),-1!==g.El&&n.y_(new a.A(o,t,1,i,s,c.A.Wo[g.El],!0))):d===f.A.ET.id?(h?.XT(t,i,s,E,0,0,C,g._a(f.A.t_.id,u.A.Fd,p,m,I,_,-1),T,w,512),-1!==g.El&&n.y_(new a.A(o,t,1,i,s,c.A.Wo[g.El],!0))):d===f.A.gT.id&&(h?.XT(t,i,s,E,0,0,C,g._a(f.A.t_.id,u.A.Fd,p,m,I,_,-1),T,w,768),-1!==g.El&&n.y_(new a.A(o,t,1,i,s,c.A.Wo[g.El],!0)))};VI;KI;ir;sr;zT;jT;ZT;qT;$T;JT;QT;tO;iO;sO;hO;eO;constructor(t,i,s,e){this.VI=t,this.KI=i,this.ir=s,this.sr=e,this.zT=new y.lc(h.A.Xn,t,i),this.jT=new y.lc(h.A.Xn,t,i),this.ZT=new y.lc(h.A.Xn,t,i),this.qT=new y.lc(h.A.Xn,t,i),this.eO=new y.ac(h.A.Xn,t+1,i+1),this.$T=new y.lc(h.A.Xn,t+1,i+1),this.JT=new y.er(t+1,i+1),this.QT=new Int32Array(i),this.tO=new Int32Array(i),this.iO=new Int32Array(i),this.sO=new Int32Array(i),this.hO=new Int32Array(i)}$p=(t,i)=>{for(let t=0;t<h.A.Xn;t++)for(let s=0;s<h.A.nr;s++)for(let e=0;e<h.A.nr;e++)if(!(1&~this.sr[t][s][e])){let h=t;2&~this.sr[1][s][e]||h--,h>=0&&i[h]?.pT(s,e)}A.FT+=(5*Math.random()|0)-2,A.FT<-8?A.FT=-8:A.FT>8&&(A.FT=8),A.UT+=(5*Math.random()|0)-2,A.UT<-16?A.UT=-16:A.UT>16&&(A.UT=16);for(let i=0;i<h.A.Xn;i++){const s=this.$T[i],h=96,n=-50,o=-10,l=-50,a=768*(0|Math.sqrt(n*n+o*o+l*l))>>8;for(let t=1;t<this.KI-1;t++)for(let e=1;e<this.VI-1;e++){const r=this.ir[i][e+1][t]-this.ir[i][e-1][t],c=this.ir[i][e][t+1]-this.ir[i][e][t-1],f=0|Math.sqrt(r*r+c*c+65536),u=h+((n*((r<<8)/f|0)+o*(65536/f|0)+l*((c<<8)/f|0))/a|0),d=(s[e-1][t]>>2)+(s[e+1][t]>>3)+(s[e][t-1]>>2)+(s[e][t+1]>>3)+(s[e][t]>>1);this.JT[e][t]=u-d}for(let t=0;t<this.KI;t++)this.QT[t]=0,this.tO[t]=0,this.iO[t]=0,this.sO[t]=0,this.hO[t]=0;for(let s=-5;s<this.VI+5;s++){for(let t=0;t<this.KI;t++){const h=s+5;let n;if(h>=0&&h<this.VI){const s=255&this.zT[i][h][t];if(s>0){const i=e.A.Wo[s-1];this.QT[t]+=i._g,this.tO[t]+=i.pg,this.iO[t]+=i.mg,this.sO[t]+=i.Ig,n=this.hO[t]++}}const r=s-5;if(r>=0&&r<this.VI){const s=255&this.zT[i][r][t];if(s>0){const i=e.A.Wo[s-1];this.QT[t]-=i._g,this.tO[t]-=i.pg,this.iO[t]-=i.mg,this.sO[t]-=i.Ig,n=this.hO[t]--}}}if(s>=1&&s<this.VI-1){let h=0,n=0,o=0,l=0,a=0;for(let c=-5;c<this.KI+5;c++){const f=c+5;f>=0&&f<this.KI&&(h+=this.QT[f],n+=this.tO[f],o+=this.iO[f],l+=this.sO[f],a+=this.hO[f]);const y=c-5;if(y>=0&&y<this.KI&&(h-=this.QT[y],n-=this.tO[y],o-=this.iO[y],l-=this.sO[y],a-=this.hO[y]),c>=1&&c<this.KI-1&&(!A.At||!(16&this.sr[i][s][c])&&this.nO(i,s,c)===A.Vp)){const f=255&this.zT[i][s][c],y=255&this.jT[i][s][c];if(f>0||y>0){const p=this.ir[i][s][c],m=this.ir[i][s+1][c],I=this.ir[i][s+1][c+1],_=this.ir[i][s][c+1],E=this.JT[s][c],g=this.JT[s+1][c],C=this.JT[s+1][c+1],T=this.JT[s][c+1];let O=-1,b=-1;if(f>0){const t=256*h/l|0,i=n/a|0;let s=o/a|0;O=e.A.cg(t,i,s);const r=t+A.FT&255;s+=A.UT,s<0?s=0:s>255&&(s=255),b=e.A.cg(r,i,s)}if(i>0){let t=0!==f||this.ZT[i][s][c]===w.A.rO;y>0&&!e.A.Wo[y-1].yg&&(t=!1),t&&p===m&&p===I&&p===_&&(this.eO[i][s][c]|=2340)}let v=0;if(-1!==O&&(v=r.A.palette[e.A.fg(b,96)]),0===y)t?.oO(i,s,c,w.A.rO,u.A.Fd,-1,p,m,I,_,e.A.fg(O,E),e.A.fg(O,g),e.A.fg(O,C),e.A.fg(O,T),d.A.$l,d.A.$l,d.A.$l,d.A.$l,v,d.A.$l);else{const h=this.ZT[i][s][c]+1,n=this.qT[i][s][c],o=e.A.Wo[y-1];let l,a,f=o.texture;f>=0?(a=r.A.lO(f),l=-1):o.dg===d.A.Bc?(a=0,l=-2,f=-1):(l=e.A.cg(o.Ag,o.pg,o.mg),a=r.A.palette[e.A.ug(o.Eg,96)]),t?.oO(i,s,c,h,n,f,p,m,I,_,e.A.fg(O,E),e.A.fg(O,g),e.A.fg(O,C),e.A.fg(O,T),e.A.ug(l,E),e.A.ug(l,g),e.A.ug(l,C),e.A.ug(l,T),v,a)}}}}}}for(let s=1;s<this.KI-1;s++)for(let h=1;h<this.VI-1;h++)t?.aO(i,h,s,this.nO(i,h,s))}A.BT||t?.cO(64,768,-50,-10,-50);for(let i=0;i<this.VI;i++)for(let s=0;s<this.KI;s++)2&~this.sr[1][i][s]||t?.fO(i,s);if(!A.BT){let t=1,i=2,s=4;for(let e=0;e<h.A.Xn;e++){e>0&&(t<<=3,i<<=3,s<<=3);for(let h=0;h<=e;h++)for(let n=0;n<=this.KI;n++)for(let r=0;r<=this.VI;r++){if(this.eO[h][r][n]&t){let i=n,s=n,l=h,a=h;for(;i>0&&this.eO[h][r][i-1]&t;)i--;for(;s<this.KI&&this.eO[h][r][s+1]&t;)s++;t:for(;l>0;){for(let h=i;h<=s;h++)if(!(this.eO[l-1][r][h]&t))break t;l--}t:for(;a<e;){for(let h=i;h<=s;h++)if(!(this.eO[a+1][r][h]&t))break t;a++}if((a+1-l)*(s+1-i)>=8){const h=this.ir[a][r][i]-240,n=this.ir[l][r][i];o.A.uO(e,1,128*r,h,128*i,128*r,n,128*s+128);for(let h=l;h<=a;h++)for(let e=i;e<=s;e++)this.eO[h][r][e]&=~t}}if(this.eO[h][r][n]&i){let t=r,s=r,l=h,a=h;for(;t>0&&this.eO[h][t-1][n]&i;)t--;for(;s<this.VI&&this.eO[h][s+1][n]&i;)s++;t:for(;l>0;){for(let h=t;h<=s;h++)if(!(this.eO[l-1][h][n]&i))break t;l--}t:for(;a<e;){for(let h=t;h<=s;h++)if(!(this.eO[a+1][h][n]&i))break t;a++}if((a+1-l)*(s+1-t)>=8){const h=this.ir[a][t][n]-240,r=this.ir[l][t][n];o.A.uO(e,2,128*t,h,128*n,128*s+128,r,128*n);for(let h=l;h<=a;h++)for(let e=t;e<=s;e++)this.eO[h][e][n]&=~i}}if(this.eO[h][r][n]&s){let t=r,i=r,l=n,a=n;for(;l>0&&this.eO[h][r][l-1]&s;)l--;for(;a<this.KI&&this.eO[h][r][a+1]&s;)a++;t:for(;t>0;){for(let i=l;i<=a;i++)if(!(this.eO[h][t-1][i]&s))break t;t--}t:for(;i<this.VI;){for(let t=l;t<=a;t++)if(!(this.eO[h][i+1][t]&s))break t;i++}if((i+1-t)*(a+1-l)>=4){const n=this.ir[h][t][l];o.A.uO(e,4,128*t,n,128*l,128*i+128,n,128*a+128);for(let e=t;e<=i;e++)for(let t=l;t<=a;t++)this.eO[h][e][t]&=~s}}}}}};Zp=(t,i,s,n)=>{let r=0;for(let t=0;t<e.A.count;t++)if('water'===e.A.Wo[t].lg?.toLowerCase()){r=t+1<<24>>24;break}for(let e=t;e<t+s;e++)for(let t=i;t<i+n;t++)if(t>=0&&t<this.VI&&e>=0&&e<this.KI){this.jT[0][t][e]=r;for(let i=0;i<h.A.Xn;i++)this.ir[i][t][e]=0,this.sr[i][t][e]=0}};jp=(t,i,s,e,r)=>{const o=new n.A(new Uint8Array(r));for(let n=0;n<h.A.Xn;n++)for(let r=0;r<64;r++)for(let l=0;l<64;l++){const a=r+s,c=l+e;let f;if(a>=0&&a<h.A.nr&&c>=0&&c<h.A.nr)for(this.sr[n][a][c]=0;;){if(f=o.cA,0===f){0===n?this.ir[0][a][c]=8*-A.GT(a+t+932731,c+556238+i):this.ir[n][a][c]=this.ir[n-1][a][c]-240;break}if(1===f){let t=o.cA;1===t&&(t=0),0===n?this.ir[0][a][c]=8*-t:this.ir[n][a][c]=this.ir[n-1][a][c]-8*t;break}f<=49?(this.jT[n][a][c]=o.lA,this.ZT[n][a][c]=(f-2)/4<<24>>24,this.qT[n][a][c]=(f-2&3)<<24>>24):f<=81?this.sr[n][a][c]=f-49<<24>>24:this.zT[n][a][c]=f-81<<24>>24}else for(;f=o.cA,0!==f;){if(1===f){o.cA;break}f<=49&&o.cA}}};qp=(t,i,s,e,r,o)=>{const l=new n.A(new Uint8Array(e));let a=-1;for(;;){const e=l.dO;if(0===e)return;a+=e;let n=0;for(;;){const e=l.dO;if(0===e)break;n+=e-1;const c=63&n,f=n>>6&63,u=n>>12,d=l.cA,w=d>>2,y=3&d,A=f+r,p=c+o;if(A>0&&p>0&&A<h.A.nr-1&&p<h.A.nr-1){let h=u;2&~this.sr[1][A][p]||(h=u-1);let e=null;h>=0&&(e=s[h]),this.Ky(u,A,p,t,i,e,a,w,y)}}}};Ky=(t,i,s,h,e,n,r,o,d)=>{if(A.At){if(16&this.sr[t][i][s])return;if(this.nO(t,i,s)!==A.Vp)return}const w=this.ir[t][i][s],y=this.ir[t][i+1][s],p=this.ir[t][i+1][s+1],m=this.ir[t][i][s+1],I=w+y+p+m>>2,_=l.A.get(r);let E=i+(s<<7)+(r<<14)+1073741824|0;_.active||(E+=-2147483648),E|=0;const g=(d<<6)+o<<24>>24;if(o===f.A.Ty.id)(!A.At||_.active||_.Kg)&&(h?.KT(_._a(f.A.Ty.id,d,w,y,p,m,-1),t,i,s,I,E,g),_.$y&&_.active&&n?.pT(i,s),-1!==_.El&&e.y_(new a.A(r,t,3,i,s,c.A.Wo[_.El],!0)));else if(o===f.A.gy.id||o===f.A.Cy.id){const l=_._a(f.A.gy.id,d,w,y,p,m,-1);if(l){let e,n,r=0;if(o===f.A.Cy.id&&(r+=256),d===u.A.Ud||d===u.A.Gd?(e=_.length,n=_.width):(e=_.width,n=_.length),h?.Ky(t,i,s,I,l,null,E,g,e,n,r)&&_.Ug)for(let h=0;h<=e;h++)for(let e=0;e<=n;e++){let n=l.wO/4|0;n>30&&(n=30),n>this.$T[t][i+h][s+e]&&(this.$T[t][i+h][s+e]=n<<24>>24)}}_.$y&&n?.Ky(i,s,_.width,_.length,d,_.Jy),-1!==_.El&&e.y_(new a.A(r,t,2,i,s,c.A.Wo[_.El],!0))}else if(o>=f.A.CT.id)h?.Ky(t,i,s,I,_._a(o,d,w,y,p,m,-1),null,E,g,1,1,0),o>=f.A.CT.id&&o<=f.A.LT.id&&o!==f.A.TT.id&&t>0&&(this.eO[t][i][s]|=2340),_.$y&&n?.Ky(i,s,_.width,_.length,d,_.Jy),-1!==_.El&&e.y_(new a.A(r,t,2,i,s,c.A.Wo[_.El],!0));else if(o===f.A.Nd.id)h?.mT(t,i,s,I,A.xT[d],0,_._a(f.A.Nd.id,d,w,y,p,m,-1),null,E,g),d===u.A.Fd?(_.Ug&&(this.$T[t][i][s]=50,this.$T[t][i][s+1]=50),_.yg&&(this.eO[t][i][s]|=585)):d===u.A.Ud?(_.Ug&&(this.$T[t][i][s+1]=50,this.$T[t][i+1][s+1]=50),_.yg&&(this.eO[t][i][s+1]|=1170)):d===u.A.Bd?(_.Ug&&(this.$T[t][i+1][s]=50,this.$T[t][i+1][s+1]=50),_.yg&&(this.eO[t][i+1][s]|=585)):d===u.A.Gd&&(_.Ug&&(this.$T[t][i][s]=50,this.$T[t][i+1][s]=50),_.yg&&(this.eO[t][i][s]|=1170)),_.$y&&n?.mT(i,s,o,d,_.Jy),-1!==_.El&&e.y_(new a.A(r,t,0,i,s,c.A.Wo[_.El],!0)),16!==_.Dg&&h?.yO(t,i,s,_.Dg);else if(o===f.A.IT.id)h?.mT(t,i,s,I,A.DT[d],0,_._a(f.A.IT.id,d,w,y,p,m,-1),null,E,g),_.Ug&&(d===u.A.Fd?this.$T[t][i][s+1]=50:d===u.A.Ud?this.$T[t][i+1][s+1]=50:d===u.A.Bd?this.$T[t][i+1][s]=50:d===u.A.Gd&&(this.$T[t][i][s]=50)),_.$y&&n?.mT(i,s,o,d,_.Jy),-1!==_.El&&e.y_(new a.A(r,t,0,i,s,c.A.Wo[_.El],!0));else if(o===f.A.Pd.id){const l=d+1&3;h?.mT(t,i,s,I,A.xT[d],A.xT[l],_._a(f.A.Pd.id,d+4,w,y,p,m,-1),_._a(f.A.Pd.id,l,w,y,p,m,-1),E,g),_.yg&&(d===u.A.Fd?(this.eO[t][i][s]|=265,this.eO[t][i][s+1]|=1170):d===u.A.Ud?(this.eO[t][i][s+1]|=1170,this.eO[t][i+1][s]|=585):d===u.A.Bd?(this.eO[t][i+1][s]|=585,this.eO[t][i][s]|=1170):d===u.A.Gd&&(this.eO[t][i][s]|=1170,this.eO[t][i][s]|=585)),_.$y&&n?.mT(i,s,o,d,_.Jy),-1!==_.El&&e.y_(new a.A(r,t,0,i,s,c.A.Wo[_.El],!0)),16!==_.Dg&&h?.yO(t,i,s,_.Dg)}else if(o===f.A.Hd.id)h?.mT(t,i,s,I,A.DT[d],0,_._a(f.A.Hd.id,d,w,y,p,m,-1),null,E,g),_.Ug&&(d===u.A.Fd?this.$T[t][i][s+1]=50:d===u.A.Ud?this.$T[t][i+1][s+1]=50:d===u.A.Bd?this.$T[t][i+1][s]=50:d===u.A.Gd&&(this.$T[t][i][s]=50)),_.$y&&n?.mT(i,s,o,d,_.Jy),-1!==_.El&&e.y_(new a.A(r,t,0,i,s,c.A.Wo[_.El],!0));else if(o===f.A.Yd.id)h?.Ky(t,i,s,I,_._a(o,d,w,y,p,m,-1),null,E,g,1,1,0),_.$y&&n?.Ky(i,s,_.width,_.length,d,_.Jy),-1!==_.El&&e.y_(new a.A(r,t,2,i,s,c.A.Wo[_.El],!0));else if(o===f.A.t_.id)h?.XT(t,i,s,I,0,0,E,_._a(f.A.t_.id,u.A.Fd,w,y,p,m,-1),g,512*d,A.xT[d]),-1!==_.El&&e.y_(new a.A(r,t,1,i,s,c.A.Wo[_.El],!0));else if(o===f.A.km.id){let n=16;if(h){const e=h.kd(t,i,s);e>0&&(n=l.A.get(e>>14&32767).Dg)}h?.XT(t,i,s,I,A.NT[d]*n,A.PT[d]*n,E,_._a(f.A.t_.id,u.A.Fd,w,y,p,m,-1),g,512*d,A.xT[d]),-1!==_.El&&e.y_(new a.A(r,t,1,i,s,c.A.Wo[_.El],!0))}else o===f.A._T.id?(h?.XT(t,i,s,I,0,0,E,_._a(f.A.t_.id,u.A.Fd,w,y,p,m,-1),g,d,256),-1!==_.El&&e.y_(new a.A(r,t,1,i,s,c.A.Wo[_.El],!0))):o===f.A.ET.id?(h?.XT(t,i,s,I,0,0,E,_._a(f.A.t_.id,u.A.Fd,w,y,p,m,-1),g,d,512),-1!==_.El&&e.y_(new a.A(r,t,1,i,s,c.A.Wo[_.El],!0))):o===f.A.gT.id&&(h?.XT(t,i,s,I,0,0,E,_._a(f.A.t_.id,u.A.Fd,w,y,p,m,-1),g,d,768),-1!==_.El&&e.y_(new a.A(r,t,1,i,s,c.A.Wo[_.El],!0)))};nO=(t,i,s)=>8&this.sr[t][i][s]?0:t<=0||!(2&this.sr[1][i][s])?t:t-1}},198:(t,i,s)=>{s.d(i,{A:()=>I});var h=s(4583);class e{level;y;x;z;model;AO;BI;pO;mO;IO;_O;EO;info;gO=0;iu=0;constructor(t,i,s,h,e,n,r,o,l,a,c,f,u){this.level=t,this.y=i,this.x=s,this.z=h,this.model=e,this.AO=n,this.BI=r,this.pO=o,this.mO=l,this.IO=a,this._O=c,this.EO=f,this.info=u}}var n=s(3795);class r{WI;VI;YI;KI;type;CO;TO;OO;bO;vO;hC;mode=0;LO=0;RO=0;SO=0;MO=0;kO=0;xO=0;constructor(t,i,s,h,e,n,r,o,l,a,c){this.WI=t,this.VI=i,this.YI=s,this.KI=h,this.type=e,this.CO=n,this.TO=r,this.OO=o,this.bO=l,this.vO=a,this.hC=c}}var o=s(670);class l{y;x;z;model;EO;info;constructor(t,i,s,h,e,n){this.y=t,this.x=i,this.z=s,this.model=h,this.EO=e,this.info=n}}class a{y;x;z;DO;NO;PO;FO;EO;info;constructor(t,i,s,h,e,n,r,o,l){this.y=t,this.x=i,this.z=s,this.DO=h,this.NO=e,this.PO=n,this.FO=r,this.EO=o,this.info=l}}class c{y;x;z;type;angle;model;EO;info;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.type=h,this.angle=e,this.model=n,this.EO=r,this.info=o}}var f=s(6666);class u{y;x;z;UO;BO;GO;EO;offset;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.UO=h,this.BO=e,this.GO=n,this.EO=r,this.offset=o}}class d{HO;WO;YO;VO;KO;color;flat;constructor(t,i,s,h,e,n,r){this.HO=t,this.WO=i,this.YO=s,this.VO=h,this.KO=e,this.color=n,this.flat=r}}var w=s(8950);class y{static XO=new Int32Array(6);static zO=new Int32Array(6);static jO=new Int32Array(6);static ZO=new Int32Array(6);static qO=new Int32Array(6);static $O=[Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,2,6),Int8Array.of(1,3,5,7,2,8),Int8Array.of(1,3,5,7,2,8),Int8Array.of(1,3,5,7,11,12),Int8Array.of(1,3,5,7,11,12),Int8Array.of(1,3,5,7,13,14)];static JO=[Int8Array.of(0,1,2,3,0,0,1,3),Int8Array.of(1,1,2,3,1,0,1,3),Int8Array.of(0,1,2,3,1,0,1,3),Int8Array.of(0,0,1,2,0,0,2,4,1,0,4,3),Int8Array.of(0,0,1,4,0,0,4,3,1,1,2,4),Int8Array.of(0,0,4,3,1,0,1,2,1,0,2,4),Int8Array.of(0,1,2,4,1,0,1,4,1,0,4,3),Int8Array.of(0,4,1,2,0,4,2,5,1,0,4,5,1,0,5,3),Int8Array.of(0,4,1,2,0,4,2,3,0,4,3,5,1,0,4,5),Int8Array.of(0,0,4,5,1,4,1,2,1,4,2,3,1,4,3,5),Int8Array.of(0,0,1,5,0,1,4,5,0,1,2,4,1,0,5,3,1,5,4,3,1,4,2,3),Int8Array.of(1,0,1,5,1,1,4,5,1,1,2,4,0,0,5,3,0,5,4,3,0,4,2,3),Int8Array.of(1,0,5,4,1,0,1,5,0,0,4,3,0,4,5,3,0,5,2,3,0,1,2,5)];static QO=128;static tb=this.QO/2|0;static ib=this.QO/4|0;static sb=3*this.QO/4|0;jg;qg;Zg;hb;eb;nb;rb;ob;lb;ab;flat;shape;angle;cb;fb;constructor(t,i,s,h,e,n,r,o,l,a,c,f,u,d,w,A,p,m,I){this.flat=!(p!==h||p!==d||p!==o),this.shape=i,this.angle=n,this.cb=u,this.fb=l;const _=y.$O[i],E=_.length;this.jg=new Int32Array(E),this.qg=new Int32Array(E),this.Zg=new Int32Array(E);const g=new Int32Array(E),C=new Int32Array(E),T=t*y.QO,O=m*y.QO;for(let t=0;t<E;t++){let i,l,c,u,m,E=_[t];!(1&E)&&E<=8&&(E=1+(E-n-n-1&7)),E>8&&E<=12&&(E=9+(E-n-9&3)),E>12&&E<=16&&(E=13+(E-n-13&3)),1===E?(i=T,l=O,c=p,u=r,m=a):2===E?(i=T+y.tb,l=O,c=p+h>>1,u=r+I>>1,m=a+s>>1):3===E?(i=T+y.QO,l=O,c=h,u=I,m=s):4===E?(i=T+y.QO,l=O+y.tb,c=h+d>>1,u=I+e>>1,m=s+w>>1):5===E?(i=T+y.QO,l=O+y.QO,c=d,u=e,m=w):6===E?(i=T+y.tb,l=O+y.QO,c=d+o>>1,u=e+A>>1,m=w+f>>1):7===E?(i=T,l=O+y.QO,c=o,u=A,m=f):8===E?(i=T,l=O+y.tb,c=o+p>>1,u=A+r>>1,m=f+a>>1):9===E?(i=T+y.tb,l=O+y.ib,c=p+h>>1,u=r+I>>1,m=a+s>>1):10===E?(i=T+y.sb,l=O+y.tb,c=h+d>>1,u=I+e>>1,m=s+w>>1):11===E?(i=T+y.tb,l=O+y.sb,c=d+o>>1,u=e+A>>1,m=w+f>>1):12===E?(i=T+y.ib,l=O+y.tb,c=o+p>>1,u=A+r>>1,m=f+a>>1):13===E?(i=T+y.ib,l=O+y.ib,c=p,u=r,m=a):14===E?(i=T+y.sb,l=O+y.ib,c=h,u=I,m=s):15===E?(i=T+y.sb,l=O+y.sb,c=d,u=e,m=w):(i=T+y.ib,l=O+y.sb,c=o,u=A,m=f),this.jg[t]=i,this.qg[t]=c,this.Zg[t]=l,g[t]=u,C[t]=m}const b=y.JO[i],v=b.length/4|0;this.rb=new Int32Array(v),this.ob=new Int32Array(v),this.lb=new Int32Array(v),this.hb=new Int32Array(v),this.eb=new Int32Array(v),this.nb=new Int32Array(v),this.ab=-1!==c?new Int32Array(v):null;let L=0;for(let t=0;t<v;t++){const i=b[L];let s=b[L+1],h=b[L+2],e=b[L+3];L+=4,s<4&&(s=s-n&3),h<4&&(h=h-n&3),e<4&&(e=e-n&3),this.rb[t]=s,this.ob[t]=h,this.lb[t]=e,0===i?(this.hb[t]=g[s],this.eb[t]=g[h],this.nb[t]=g[e],this.ab&&(this.ab[t]=-1)):(this.hb[t]=C[s],this.eb[t]=C[h],this.nb[t]=C[e],this.ab&&(this.ab[t]=c))}}}var A=s(5518),p=s(6169),m=s(3867);class I{static ub=new m.wb(8,32,51,51,!1);static yb=new m.vs(100,null);static ed=new Int32Array(o.A.Xn);static Ab=new m.pb(o.A.Xn,500,null);static mb=new m.vs(500,null);static Ib=new f.A;static iu=0;static _b=0;static Eb=0;static gb=0;static Cb=0;static Tb=0;static Ob=0;static bb=0;static vb=0;static Lb=0;static Rb=0;static Sb=0;static Mb=0;static kb=0;static xb=0;static Db=0;static Nb=0;static Pb=0;static Fb=0;static Ub=0;static nd=0;static Bb=0;static Gb=!1;static Hb=null;static Wb=Uint8Array.of(19,55,38,155,255,110,137,205,76);static Yb=Uint8Array.of(160,192,80,96,0,144,80,48,160);static Vb=Uint8Array.of(76,8,137,4,0,1,38,2,19);static Kb=Int8Array.of(0,0,2,0,0,2,1,1,0);static Xb=Int8Array.of(2,0,0,2,0,0,0,4,4);static zb=Int8Array.of(0,4,4,8,0,0,8,0,0);static jb=Int8Array.of(1,1,0,0,0,8,0,0,8);static Zb=Int8Array.of(53,-53,-53,53);static qb=Int8Array.of(-53,-53,53,53);static $b=Int8Array.of(-45,45,45,-45);static Jb=Int8Array.of(45,45,-45,-45);static Qb=[new Int8Array(16),Int8Array.of(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),Int8Array.of(1,0,0,0,1,1,0,0,1,1,1,0,1,1,1,1),Int8Array.of(1,1,0,0,1,1,0,0,1,0,0,0,1,0,0,0),Int8Array.of(0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,1),Int8Array.of(0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1),Int8Array.of(1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1),Int8Array.of(1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0),Int8Array.of(0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0),Int8Array.of(1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,1),Int8Array.of(1,1,1,1,1,1,0,0,1,0,0,0,1,0,0,0),Int8Array.of(0,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1),Int8Array.of(0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1)];static tv=[Int8Array.of(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15),Int8Array.of(12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3),Int8Array.of(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0),Int8Array.of(3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12)];static iv=Int32Array.of(41,39248,41,4643,41,41,41,41,41,41,41,41,41,41,41,43086,41,41,41,41,41,41,41,8602,41,28992,41,41,41,41,41,5056,41,41,41,41,41,41,41,41,41,41,41,41,41,41,3131,41,41,41);static rd=0;static Kl=0;static Xl=0;static gf=-1;static Cf=-1;static At=!0;static init=(t,i,s,e,n)=>{this._b=0,this.Eb=0,this.gb=t,this.Cb=i,this.Tb=t/2|0,this.Ob=i/2|0;const r=new m.wb(9,32,53,53,!1);for(let t=128;t<=384;t+=32)for(let i=0;i<2048;i+=64){this.bb=h.A.sin[t],this.vb=h.A.cos[t],this.Lb=h.A.sin[i],this.Rb=h.A.cos[i];const o=(t-128)/32|0,l=i/64|0;for(let t=-26;t<=26;t++)for(let i=-26;i<=26;i++){const h=128*t,a=128*i;let c=!1;for(let t=-s;t<=e;t+=128)if(this.sv(h,a,n[o]+t)){c=!0;break}r[o][l][t+25+1][i+25+1]=c}}for(let t=0;t<8;t++)for(let i=0;i<32;i++)for(let s=-25;s<25;s++)for(let h=-25;h<25;h++){let e=!1;t:for(let n=-1;n<=1;n++)for(let o=-1;o<=1;o++){if(r[t][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}}this.ub[t][i][s+25][h+25]=e}};static Bo=()=>{this.yb=null,this.ed=null,this.Ab=null,this.Ib=null,this.ub=null,this.mb=null,this.Hb=null,console.log('World3D unloaded!')};static uO=(t,i,s,h,e,n,o,l)=>{I.Ab[t][I.ed[t]++]=new r(s/128|0,n/128|0,e/128|0,l/128|0,i,s,n,e,l,h,o)};static sv=(t,i,s)=>{const h=i*this.Lb+t*this.Rb>>16,e=i*this.Rb-t*this.Lb>>16,n=s*this.bb+e*this.vb>>16,r=s*this.vb-e*this.bb>>16;if(n<50||n>3500)return!1;const o=this.Tb+((h<<9)/n|0),l=this.Ob+((r<<9)/n|0);return o>=this._b&&o<=this.gb&&l>=this.Eb&&l<=this.Cb};hv;VI;KI;ev;nv;Nr;rv;ov;lv;av=0;cv=0;fv=0;constructor(t,i,s,h){this.hv=s,this.VI=h,this.KI=i,this.nv=new m.Fr(s,h,i,null),this.rv=new m.ac(s,h+1,i+1),this.ev=t,this.Nr=new m.vs(5e3,null),this.ov=new Int32Array(1e4),this.lv=new Int32Array(1e4),this.reset()}reset=()=>{for(let t=0;t<this.hv;t++)for(let i=0;i<this.VI;i++)for(let s=0;s<this.KI;s++)this.nv[t][i][s]=null;for(let t=0;t<o.A.Xn;t++){for(let i=0;i<I.ed[t];i++)I.Ab[t][i]=null;I.ed[t]=0}for(let t=0;t<this.av;t++)this.Nr[t]=null;this.av=0,I.yb.fill(null)};zp=t=>{this.cv=t;for(let i=0;i<this.VI;i++)for(let s=0;s<this.KI;s++)this.nv[t][i][s]=new n.A(t,i,s)};fO=(t,i)=>{const s=this.nv[0][t][i];for(let s=0;s<3;s++){this.nv[s][t][i]=this.nv[s+1][t][i];const h=this.nv[s][t][i];h&&h.level--}this.nv[0][t][i]||(this.nv[0][t][i]=new n.A(0,t,i));const h=this.nv[0][t][i];h&&(h.uv=s),this.nv[3][t][i]=null};aO=(t,i,s,h)=>{const e=this.nv[t][i][s];e&&(e.dv=h)};oO=(t,i,s,h,e,r,o,l,a,c,f,u,w,p,m,I,_,E,g,C)=>{if(h===A.A.rO){for(let h=t;h>=0;h--)this.nv[h][i][s]||(this.nv[h][i][s]=new n.A(h,i,s));const h=this.nv[t][i][s];h&&(h.wv=new d(f,u,w,p,-1,g,!1))}else if(h===A.A.yv){for(let h=t;h>=0;h--)this.nv[h][i][s]||(this.nv[h][i][s]=new n.A(h,i,s));const h=this.nv[t][i][s];h&&(h.wv=new d(m,I,_,E,r,C,o===l&&o===a&&o===c))}else{for(let h=t;h>=0;h--)this.nv[h][i][s]||(this.nv[h][i][s]=new n.A(h,i,s));const d=this.nv[t][i][s];d&&(d.Av=new y(i,h,I,l,w,e,f,c,C,m,r,E,g,a,_,p,o,s,u))}};KT=(t,i,s,h,e,r,o)=>{this.nv[i][s][h]||(this.nv[i][s][h]=new n.A(i,s,h));const a=this.nv[i][s][h];a&&(a.pv=new l(e,128*s+64,128*h+64,t,r,o))};iA=(t,i,s)=>{const h=this.nv[t][i][s];h&&(h.pv=null)};Vy=(t,i,s,h,e,r,o,l)=>{let a=0;const c=this.nv[h][t][i];if(c)for(let t=0;t<c.mv;t++){const i=c.Iv[t];if(!i||!i.model)continue;const s=i.model.sC;s>a&&(a=s)}else this.nv[h][t][i]=new n.A(h,t,i);const f=this.nv[h][t][i];f&&(f._v=new u(s,128*t+64,128*i+64,r,o,l,e,a))};Gy=(t,i,s)=>{const h=this.nv[t][i][s];h&&(h._v=null)};mT=(t,i,s,h,e,r,o,l,c,f)=>{if(!o&&!l)return;for(let h=t;h>=0;h--)this.nv[h][i][s]||(this.nv[h][i][s]=new n.A(h,i,s));const u=this.nv[t][i][s];u&&(u.Ev=new a(h,128*i+64,128*s+64,e,r,o,l,c,f))};qy=(t,i,s,h)=>{const e=this.nv[t][i][s];1===h&&e&&(e.Ev=null)};XT=(t,i,s,h,e,r,o,l,a,f,u)=>{if(!l)return;for(let h=t;h>=0;h--)this.nv[h][i][s]||(this.nv[h][i][s]=new n.A(h,i,s));const d=this.nv[t][i][s];d&&(d.gv=new c(h,128*i+e+64,128*s+r+64,u,f,l,o,a))};Qy=(t,i,s)=>{const h=this.nv[t][i][s];h&&(h.gv=null)};yO=(t,i,s,h)=>{const e=this.nv[t][i][s];if(!e)return;const n=e.gv;if(!n)return;const r=128*i+64,o=128*s+64;n.x=r+((n.x-r)*h/16|0),n.z=o+((n.z-o)*h/16|0)};QI=(t,i,s,h)=>{if(!h)return;const e=this.nv[t][i][s];if(!e)return;const n=e.gv;n&&(n.model=h)};h_=(t,i,s,h)=>{if(!h)return;const e=this.nv[t][i][s];if(!e)return;const n=e.pv;n&&(n.model=h)};s_=(t,i,s,h)=>{if(!h)return;const e=this.nv[t][i][s];if(!e)return;const n=e.Ev;n&&(n.PO=h)};i_=(t,i,s,h,e)=>{if(!h)return;const n=this.nv[s][t][i];if(!n)return;const r=n.Ev;r&&(r.PO=h,r.FO=e)};Ky=(t,i,s,h,e,n,r,o,l,a,c)=>{if(!e&&!n)return!0;const f=128*i+64*l,u=128*s+64*a;return this.Cv(f,u,h,t,i,s,l,a,e,n,r,o,c,!1)};UI=(t,i,s,h,e,n,r,o,l,a)=>{if(!e&&!n)return!0;let c=i-l,f=h-l,u=i+l,d=h+l;return a&&(o>640&&o<1408&&(d+=128),o>1152&&o<1920&&(u+=128),(o>1664||o<384)&&(f-=128),o>128&&o<896&&(c-=128)),c=c/128|0,f=f/128|0,u=u/128|0,d=d/128|0,this.Cv(i,h,s,t,c,f,u+1-c,d-f+1,e,n,r,0,o,!0)};HI=(t,i,s,h,e,n,r,o,l,a,c,f)=>!l&&!a||this.Cv(i,h,s,t,e,n,r+1-e,o-n+1,l,a,c,0,f,!0);tA=(t,i,s)=>{const h=this.nv[t][i][s];if(h)for(let t=0;t<h.mv;t++){const e=h.Iv[t];if(e&&2==(e.EO>>29&3)&&e.pO===i&&e.IO===s)return void this.Tv(e)}};JI=(t,i,s,h)=>{if(!h)return;const e=this.nv[t][i][s];if(e)for(let t=0;t<e.mv;t++){const i=e.Iv[t];if(i&&2==(i.EO>>29&3))return void(i.model=h)}};eu=()=>{for(let t=0;t<this.av;t++){const i=this.Nr[t];i&&this.Tv(i),this.Nr[t]=null}this.av=0};kd=(t,i,s)=>{const h=this.nv[t][i][s];return h&&h.Ev?h.Ev.EO:0};jy=(t,i,s)=>{const h=this.nv[t][s][i];return h&&h.gv?h.gv.EO:0};Wd=(t,i,s)=>{const h=this.nv[t][i][s];if(!h)return 0;for(let t=0;t<h.mv;t++){const e=h.Iv[t];if(e&&2==(e.EO>>29&3)&&e.pO===i&&e.IO===s)return e.EO}return 0};bd=(t,i,s)=>{const h=this.nv[t][i][s];return h&&h.pv?h.pv.EO:0};xd=(t,i,s,h)=>{const e=this.nv[t][i][s];if(e){if(e.Ev&&e.Ev.EO===h)return 255&e.Ev.info;if(e.gv&&e.gv.EO===h)return 255&e.gv.info;if(e.pv&&e.pv.EO===h)return 255&e.pv.info;for(let t=0;t<e.mv;t++){const i=e.Iv[t];if(i&&i.EO===h)return 255&i.info}return-1}return-1};cO=(t,i,s,h,e)=>{const n=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;for(let i=0;i<this.hv;i++)for(let r=0;r<this.VI;r++)for(let o=0;o<this.KI;o++){const l=this.nv[i][r][o];if(!l)continue;const a=l.Ev;a&&a.PO&&a.PO.Ov&&(this.bv(i,r,o,1,1,a.PO),a.FO&&a.FO.Ov&&(this.bv(i,r,o,1,1,a.FO),this.vv(a.PO,a.FO,0,0,0,!1),a.FO.Lv(t,n,s,h,e)),a.PO.Lv(t,n,s,h,e));for(let a=0;a<l.mv;a++){const c=l.Iv[a];c&&c.model&&c.model.Ov&&(this.bv(i,r,o,c.mO+1-c.pO,c._O-c.IO+1,c.model),c.model.Lv(t,n,s,h,e))}const c=l.pv;c&&c.model&&c.model.Ov&&(this.Rv(i,r,o,c.model),c.model.Lv(t,n,s,h,e))}};Rv=(t,i,s,h)=>{if(i<this.VI){const e=this.nv[t][i+1][s];e&&e.pv&&e.pv.model&&e.pv.model.Ov&&this.vv(h,e.pv.model,128,0,0,!0)}if(s<this.VI){const e=this.nv[t][i][s+1];e&&e.pv&&e.pv.model&&e.pv.model.Ov&&this.vv(h,e.pv.model,0,0,128,!0)}if(i<this.VI&&s<this.KI){const e=this.nv[t][i+1][s+1];e&&e.pv&&e.pv.model&&e.pv.model.Ov&&this.vv(h,e.pv.model,128,0,128,!0)}if(i<this.VI&&s>0){const e=this.nv[t][i+1][s-1];e&&e.pv&&e.pv.model&&e.pv.model.Ov&&this.vv(h,e.pv.model,128,0,-128,!0)}};bv=(t,i,s,h,e,n)=>{let r=!0,o=i;const l=i+h,a=s-1,c=s+e;for(let f=t;f<=t+1;f++)if(f!==this.hv){for(let u=o;u<=l;u++)if(!(u<0||u>=this.VI))for(let o=a;o<=c;o++){if(o<0||o>=this.KI||r&&u<l&&o<c&&(o>=s||u===i))continue;const a=this.nv[f][u][o];if(!a)continue;const d=128*(u-i)+64*(1-h),w=128*(o-s)+64*(1-e),y=((this.ev[f][u][o]+this.ev[f][u+1][o]+this.ev[f][u][o+1]+this.ev[f][u+1][o+1])/4|0)-((this.ev[t][i][s]+this.ev[t][i+1][s]+this.ev[t][i][s+1]+this.ev[t][i+1][s+1])/4|0),A=a.Ev;A&&A.PO&&A.PO.Ov&&this.vv(n,A.PO,d,y,w,r),A&&A.FO&&A.FO.Ov&&this.vv(n,A.FO,d,y,w,r);for(let t=0;t<a.mv;t++){const o=a.Iv[t];if(!o||!o.model||!o.model.Ov)continue;const l=o.mO+1-o.pO,c=o._O+1-o.IO;this.vv(n,o.model,128*(o.pO-i)+64*(l-h),y,128*(o.IO-s)+64*(c-e),r)}}o--,r=!1}};vv=(t,i,s,h,e,n)=>{this.fv++;let r=0;const o=i.jg,l=i.zg;if(t.Ov&&t.Sv)for(let n=0;n<t.zg;n++){const a=t.Ov[n],c=t.Sv[n];if(c&&0!==c.w){const f=t.qg[n]-h;if(f>i.vO)continue;const u=t.jg[n]-s;if(u<i.CO||u>i.TO)continue;const d=t.Zg[n]-e;if(d<i.OO||d>i.bO)continue;if(i.Ov&&i.Sv)for(let t=0;t<l;t++){const s=i.Ov[t],h=i.Sv[t];u!==o[t]||d!==i.Zg[t]||f!==i.qg[t]||h&&0===h.w||(a&&s&&h&&(a.x+=h.x,a.y+=h.y,a.z+=h.z,a.w+=h.w,s.x+=c.x,s.y+=c.y,s.z+=c.z,s.w+=c.w,r++),this.ov[n]=this.fv,this.lv[t]=this.fv)}}}if(!(r<3)&&n){if(t.Mv)for(let i=0;i<t.kv;i++)this.ov[t.xv[i]]===this.fv&&this.ov[t.Dv[i]]===this.fv&&this.ov[t.Nv[i]]===this.fv&&(t.Mv[i]=-1);if(i.Mv)for(let t=0;t<i.kv;t++)this.lv[i.xv[t]]===this.fv&&this.lv[i.Dv[t]]===this.fv&&this.lv[i.Nv[t]]===this.fv&&(i.Mv[t]=-1)}};Td=(t,i,s,h,e,n)=>{const r=this.nv[t][i][s];if(!r)return;const o=r.wv;if(o){const t=o.color;if(0!==t)for(let i=0;i<4;i++)h[e]=t,h[e+1]=t,h[e+2]=t,h[e+3]=t,e+=n;return}const l=r.Av;if(!l)return;const a=l.shape,c=l.angle,f=l.cb,u=l.fb,d=I.Qb[a],w=I.tv[c];let y=0;if(0===f)for(let t=0;t<4;t++)0!==d[w[y++]]&&(h[e]=u),0!==d[w[y++]]&&(h[e+1]=u),0!==d[w[y++]]&&(h[e+2]=u),0!==d[w[y++]]&&(h[e+3]=u),e+=n;else for(let t=0;t<4;t++)h[e]=0===d[w[y++]]?f:u,h[e+1]=0===d[w[y++]]?f:u,h[e+2]=0===d[w[y++]]?f:u,h[e+3]=0===d[w[y++]]?f:u,e+=n};click=(t,i)=>{I.Gb=!0,I.Kl=t,I.Xl=i,I.gf=-1,I.Cf=-1};draw=(t,i,s,e,n,r,o)=>{t<0?t=0:t>=128*this.VI&&(t=128*this.VI-1),s<0?s=0:s>=128*this.KI&&(s=128*this.KI-1),I.iu++,I.bb=h.A.sin[r],I.vb=h.A.cos[r],I.Lb=h.A.sin[n],I.Rb=h.A.cos[n],I.Hb=I.ub[(r-128)/32|0][n/64|0],I.Sb=t,I.Mb=i,I.kb=s,I.xb=t/128|0,I.Db=s/128|0,I.nd=e,I.Nb=I.xb-25,I.Nb<0&&(I.Nb=0),I.Fb=I.Db-25,I.Fb<0&&(I.Fb=0),I.Pb=I.xb+25,I.Pb>this.VI&&(I.Pb=this.VI),I.Ub=I.Db+25,I.Ub>this.KI&&(I.Ub=this.KI),this.Pv(),I.Bb=0;for(let t=this.cv;t<this.hv;t++){const s=this.nv[t];for(let h=I.Nb;h<I.Pb;h++)for(let n=I.Fb;n<I.Ub;n++){const r=s[h][n];r&&(r.dv<=e&&(I.Hb[h+25-I.xb][n+25-I.Db]||this.ev[t][h][n]-i>=2e3)?(r.visible=!0,r.update=!0,r.Fv=r.mv>0,I.Bb++):(r.visible=!1,r.update=!1,r.Uv=0))}}for(let t=this.cv;t<this.hv;t++){const i=this.nv[t];for(let t=-25;t<=0;t++){const s=I.xb+t,h=I.xb-t;if(!(s<I.Nb&&h>=I.Pb))for(let t=-25;t<=0;t++){const e=I.Db+t,n=I.Db-t;let r;if(s>=I.Nb&&(e>=I.Fb&&(r=i[s][e],r&&r.visible&&this.Bv(r,!0,o)),n<I.Ub&&(r=i[s][n],r&&r.visible&&this.Bv(r,!0,o))),h<I.Pb&&(e>=I.Fb&&(r=i[h][e],r&&r.visible&&this.Bv(r,!0,o)),n<I.Ub&&(r=i[h][n],r&&r.visible&&this.Bv(r,!0,o))),0===I.Bb)return void(I.Gb=!1)}}}for(let t=this.cv;t<this.hv;t++){const i=this.nv[t];for(let t=-25;t<=0;t++){const s=I.xb+t,h=I.xb-t;if(!(s<I.Nb&&h>=I.Pb))for(let t=-25;t<=0;t++){const e=I.Db+t,n=I.Db-t;let r;if(s>=I.Nb&&(e>=I.Fb&&(r=i[s][e],r&&r.visible&&this.Bv(r,!1,o)),n<I.Ub&&(r=i[s][n],r&&r.visible&&this.Bv(r,!1,o))),h<I.Pb&&(e>=I.Fb&&(r=i[h][e],r&&r.visible&&this.Bv(r,!1,o)),n<I.Ub&&(r=i[h][n],r&&r.visible&&this.Bv(r,!1,o))),0===I.Bb)return void(I.Gb=!1)}}}};Cv=(t,i,s,h,r,o,l,a,c,f,u,d,w,y)=>{if(!c&&!f)return!1;for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){if(t<0||i<0||t>=this.VI||i>=this.KI)return!1;const s=this.nv[h][t][i];if(s&&s.mv>=5)return!1}const A=new e(h,s,t,i,c,f,w,r,r+l-1,o,o+a-1,u,d);for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){let s=0;t>r&&(s|=1),t<r+l-1&&(s+=4),i>o&&(s+=8),i<o+a-1&&(s+=2);for(let s=h;s>=0;s--)this.nv[s][t][i]||(this.nv[s][t][i]=new n.A(s,t,i));const e=this.nv[h][t][i];e&&(e.Iv[e.mv]=A,e.Gv[e.mv]=s,e.Hv|=s,e.mv++)}return y&&(this.Nr[this.av++]=A),!0};Tv=t=>{for(let i=t.pO;i<=t.mO;i++)for(let s=t.IO;s<=t._O;s++){const h=this.nv[t.level][i][s];if(h){for(let i=0;i<h.mv;i++)if(h.Iv[i]===t){h.mv--;for(let t=i;t<h.mv;t++)h.Iv[t]=h.Iv[t+1],h.Gv[t]=h.Gv[t+1];h.Iv[h.mv]=null;break}h.Hv=0;for(let t=0;t<h.mv;t++)h.Hv|=h.Gv[t]}}};Pv=()=>{const t=I.ed[I.nd],i=I.Ab[I.nd];I.rd=0;for(let s=0;s<t;s++){const t=i[s];if(!t)continue;let h,e,n,r;if(1===t.type){if(h=t.WI+25-I.xb,h>=0&&h<=50){e=t.YI+25-I.Db,e<0&&(e=0),n=t.KI+25-I.Db,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.Hb&&I.Hb[h][e++]){i=!0;break}if(i){if(r=I.Sb-t.CO,r>32)t.mode=1;else{if(r>=-32)continue;t.mode=2,r=-r}t.SO=(t.OO-I.kb<<8)/r|0,t.MO=(t.bO-I.kb<<8)/r|0,t.kO=(t.vO-I.Mb<<8)/r|0,t.xO=(t.hC-I.Mb<<8)/r|0,I.mb[I.rd++]=t}}}else if(2===t.type){if(h=t.YI+25-I.Db,h>=0&&h<=50){e=t.WI+25-I.xb,e<0&&(e=0),n=t.VI+25-I.xb,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.Hb&&I.Hb[e++][h]){i=!0;break}if(i){if(r=I.kb-t.OO,r>32)t.mode=3;else{if(r>=-32)continue;t.mode=4,r=-r}t.LO=(t.CO-I.Sb<<8)/r|0,t.RO=(t.TO-I.Sb<<8)/r|0,t.kO=(t.vO-I.Mb<<8)/r|0,t.xO=(t.hC-I.Mb<<8)/r|0,I.mb[I.rd++]=t}}}else if(4===t.type&&(h=t.vO-I.Mb,h>128&&(e=t.YI+25-I.Db,e<0&&(e=0),n=t.KI+25-I.Db,n>50&&(n=50),e<=n))){let i=t.WI+25-I.xb;i<0&&(i=0),r=t.VI+25-I.xb,r>50&&(r=50);let s=!1;t:for(let t=i;t<=r;t++)for(let i=e;i<=n;i++)if(I.Hb&&I.Hb[t][i]){s=!0;break t}s&&(t.mode=5,t.LO=(t.CO-I.Sb<<8)/h|0,t.RO=(t.TO-I.Sb<<8)/h|0,t.SO=(t.OO-I.kb<<8)/h|0,t.MO=(t.bO-I.kb<<8)/h|0,I.mb[I.rd++]=t)}}};Bv=(t,i,s)=>{for(I.Ib.y_(t);;){let t;do{if(t=I.Ib.Wv(),!t)return}while(!t.update);const h=t.x,e=t.z,n=t.level,r=t.Yv,o=this.nv[n];if(t.visible){if(i){if(n>0){const t=this.nv[n-1][h][e];if(t&&t.update)continue}if(h<=I.xb&&h>I.Nb){const i=o[h-1][e];if(i&&i.update&&(i.visible||!(1&t.Hv)))continue}if(h>=I.xb&&h<I.Pb-1){const i=o[h+1][e];if(i&&i.update&&(i.visible||!(4&t.Hv)))continue}if(e<=I.Db&&e>I.Fb){const i=o[h][e-1];if(i&&i.update&&(i.visible||!(8&t.Hv)))continue}if(e>=I.Db&&e<I.Ub-1){const i=o[h][e+1];if(i&&i.update&&(i.visible||!(2&t.Hv)))continue}}else i=!0;if(t.visible=!1,t.uv){const i=t.uv;i.wv?this.Vv(0,h,e)||this.Kv(i.wv,0,h,e,I.bb,I.vb,I.Lb,I.Rb):i.Av&&!this.Vv(0,h,e)&&this.Xv(h,e,i.Av,I.bb,I.vb,I.Lb,I.Rb);const n=i.Ev;n&&n.PO?.draw(0,I.bb,I.vb,I.Lb,I.Rb,n.x-I.Sb,n.y-I.Mb,n.z-I.kb,n.EO);for(let t=0;t<i.mv;t++){const h=i.Iv[t];if(h){let t=h.model;t||(t=h.AO?.draw(s)??null),t?.draw(h.BI,I.bb,I.vb,I.Lb,I.Rb,h.x-I.Sb,h.y-I.Mb,h.z-I.kb,h.EO)}}}let l=!1;t.wv?this.Vv(r,h,e)||(l=!0,this.Kv(t.wv,r,h,e,I.bb,I.vb,I.Lb,I.Rb)):t.Av&&!this.Vv(r,h,e)&&(l=!0,this.Xv(h,e,t.Av,I.bb,I.vb,I.Lb,I.Rb));let a=0,c=0;const f=t.Ev,u=t.gv;if((f||u)&&(I.xb===h?a+=1:I.xb<h&&(a+=2),I.Db===e?a+=3:I.Db>e&&(a+=6),c=I.Wb[a],t.zv=I.Vb[a]),f&&(f.DO&I.Yb[a]?16===f.DO?(t.Uv=3,t.jv=I.Kb[a],t.Zv=3-t.jv):32===f.DO?(t.Uv=6,t.jv=I.Xb[a],t.Zv=6-t.jv):64===f.DO?(t.Uv=12,t.jv=I.zb[a],t.Zv=12-t.jv):(t.Uv=9,t.jv=I.jb[a],t.Zv=9-t.jv):t.Uv=0,f.DO&c&&!this.qv(r,h,e,f.DO)&&f.PO?.draw(0,I.bb,I.vb,I.Lb,I.Rb,f.x-I.Sb,f.y-I.Mb,f.z-I.kb,f.EO),f.NO&c&&!this.qv(r,h,e,f.NO)&&f.FO?.draw(0,I.bb,I.vb,I.Lb,I.Rb,f.x-I.Sb,f.y-I.Mb,f.z-I.kb,f.EO)),u&&!this.visible(r,h,e,u.model.hC))if(u.type&c)u.model.draw(u.angle,I.bb,I.vb,I.Lb,I.Rb,u.x-I.Sb,u.y-I.Mb,u.z-I.kb,u.EO);else if(768&u.type){const t=u.x-I.Sb,i=u.y-I.Mb,s=u.z-I.kb,h=u.angle;let e,n;if(e=h===p.A.Ud||h===p.A.Bd?-t:t,n=h===p.A.Bd||h===p.A.Gd?-s:s,256&u.type&&n<e){const e=t+I.Zb[h],n=s+I.qb[h];u.model.draw(512*h+256,I.bb,I.vb,I.Lb,I.Rb,e,i,n,u.EO)}if(512&u.type&&n>e){const e=t+I.$b[h],n=s+I.Jb[h];u.model.draw(512*h+1280&2047,I.bb,I.vb,I.Lb,I.Rb,e,i,n,u.EO)}}if(l){const i=t.pv;i&&i.model?.draw(0,I.bb,I.vb,I.Lb,I.Rb,i.x-I.Sb,i.y-I.Mb,i.z-I.kb,i.EO);const s=t._v;s&&0===s.offset&&(s.GO&&s.GO.draw(0,I.bb,I.vb,I.Lb,I.Rb,s.x-I.Sb,s.y-I.Mb,s.z-I.kb,s.EO),s.BO&&s.BO.draw(0,I.bb,I.vb,I.Lb,I.Rb,s.x-I.Sb,s.y-I.Mb,s.z-I.kb,s.EO),s.UO&&s.UO.draw(0,I.bb,I.vb,I.Lb,I.Rb,s.x-I.Sb,s.y-I.Mb,s.z-I.kb,s.EO))}const d=t.Hv;if(0!==d){if(h<I.xb&&4&d){const t=o[h+1][e];t&&t.update&&I.Ib.y_(t)}if(e<I.Db&&2&d){const t=o[h][e+1];t&&t.update&&I.Ib.y_(t)}if(h>I.xb&&1&d){const t=o[h-1][e];t&&t.update&&I.Ib.y_(t)}if(e>I.Db&&8&d){const t=o[h][e-1];t&&t.update&&I.Ib.y_(t)}}}if(0!==t.Uv){let i=!0;for(let s=0;s<t.mv;s++){const h=t.Iv[s];if(h&&(h.iu!==I.iu&&(t.Gv[s]&t.Uv)===t.jv)){i=!1;break}}if(i){const i=t.Ev;i&&!this.qv(r,h,e,i.DO)&&i.PO?.draw(0,I.bb,I.vb,I.Lb,I.Rb,i.x-I.Sb,i.y-I.Mb,i.z-I.kb,i.EO),t.Uv=0}}if(t.Fv){const i=t.mv;t.Fv=!1;let n=0;t:for(let s=0;s<i;s++){const i=t.Iv[s];if(!i||i.iu===I.iu)continue;for(let s=i.pO;s<=i.mO;s++)for(let h=i.IO;h<=i._O;h++){const e=o[s][h];if(e){if(!e.visible){if(0===e.Uv)continue;let n=0;if(s>i.pO&&(n+=1),s<i.mO&&(n+=4),h>i.IO&&(n+=8),h<i._O&&(n+=2),(n&e.Uv)!==t.Zv)continue}t.Fv=!0;continue t}}I.yb[n++]=i;let h=I.xb-i.pO;const e=i.mO-I.xb;e>h&&(h=e);const r=I.Db-i.IO,l=i._O-I.Db;i.gO=l>r?h+l:h+r}for(;;){let t=-50,i=-1;for(let s=0;s<n;s++){const h=I.yb[s];h&&(h.iu!==I.iu&&h.gO>t&&(t=h.gO,i=s))}if(-1===i)break;const l=I.yb[i];if(l){l.iu=I.iu;let t=l.model;t||(t=l.AO?.draw(s)??null),t&&!this.$v(r,l.pO,l.mO,l.IO,l._O,t.hC)&&t.draw(l.BI,I.bb,I.vb,I.Lb,I.Rb,l.x-I.Sb,l.y-I.Mb,l.z-I.kb,l.EO);for(let t=l.pO;t<=l.mO;t++)for(let i=l.IO;i<=l._O;i++){const s=o[t][i];s&&(0!==s.Uv?I.Ib.y_(s):t===h&&i===e||!s.update||I.Ib.y_(s))}}}if(t.Fv)continue}if(!t.update||0!==t.Uv)continue;if(h<=I.xb&&h>I.Nb){const t=o[h-1][e];if(t&&t.update)continue}if(h>=I.xb&&h<I.Pb-1){const t=o[h+1][e];if(t&&t.update)continue}if(e<=I.Db&&e>I.Fb){const t=o[h][e-1];if(t&&t.update)continue}if(e>=I.Db&&e<I.Ub-1){const t=o[h][e+1];if(t&&t.update)continue}t.update=!1,I.Bb--;const l=t._v;if(l&&0!==l.offset&&(l.GO&&l.GO.draw(0,I.bb,I.vb,I.Lb,I.Rb,l.x-I.Sb,l.y-I.Mb-l.offset,l.z-I.kb,l.EO),l.BO&&l.BO.draw(0,I.bb,I.vb,I.Lb,I.Rb,l.x-I.Sb,l.y-I.Mb-l.offset,l.z-I.kb,l.EO),l.UO&&l.UO.draw(0,I.bb,I.vb,I.Lb,I.Rb,l.x-I.Sb,l.y-I.Mb-l.offset,l.z-I.kb,l.EO)),0!==t.zv){const i=t.gv;if(i&&!this.visible(r,h,e,i.model.hC))if(i.type&t.zv)i.model.draw(i.angle,I.bb,I.vb,I.Lb,I.Rb,i.x-I.Sb,i.y-I.Mb,i.z-I.kb,i.EO);else if(768&i.type){const t=i.x-I.Sb,s=i.y-I.Mb,h=i.z-I.kb,e=i.angle;let n,r;if(n=e===p.A.Ud||e===p.A.Bd?-t:t,r=e===p.A.Bd||e===p.A.Gd?-h:h,256&i.type&&r>=n){const n=t+I.Zb[e],r=h+I.qb[e];i.model.draw(512*e+256,I.bb,I.vb,I.Lb,I.Rb,n,s,r,i.EO)}if(512&i.type&&r<=n){const n=t+I.$b[e],r=h+I.Jb[e];i.model.draw(512*e+1280&2047,I.bb,I.vb,I.Lb,I.Rb,n,s,r,i.EO)}}const s=t.Ev;s&&(s.NO&t.zv&&!this.qv(r,h,e,s.NO)&&s.FO?.draw(0,I.bb,I.vb,I.Lb,I.Rb,s.x-I.Sb,s.y-I.Mb,s.z-I.kb,s.EO),s.DO&t.zv&&!this.qv(r,h,e,s.DO)&&s.PO?.draw(0,I.bb,I.vb,I.Lb,I.Rb,s.x-I.Sb,s.y-I.Mb,s.z-I.kb,s.EO))}if(n<this.hv-1){const t=this.nv[n+1][h][e];t&&t.update&&I.Ib.y_(t)}if(h<I.xb){const t=o[h+1][e];t&&t.update&&I.Ib.y_(t)}if(e<I.Db){const t=o[h][e+1];t&&t.update&&I.Ib.y_(t)}if(h>I.xb){const t=o[h-1][e];t&&t.update&&I.Ib.y_(t)}if(e>I.Db){const t=o[h][e-1];t&&t.update&&I.Ib.y_(t)}}};Kv=(t,i,s,e,n,r,o,l)=>{let a,c,f,u,d=a=(s<<7)-I.Sb,y=c=(e<<7)-I.kb,A=f=d+128,p=u=y+128,m=this.ev[i][s][e]-I.Mb,_=this.ev[i][s+1][e]-I.Mb,E=this.ev[i][s+1][e+1]-I.Mb,g=this.ev[i][s][e+1]-I.Mb,C=y*o+d*l>>16;if(y=y*l-d*o>>16,d=C,C=m*r-y*n>>16,y=m*n+y*r>>16,m=C,y<50)return;if(C=c*o+A*l>>16,c=c*l-A*o>>16,A=C,C=_*r-c*n>>16,c=_*n+c*r>>16,_=C,c<50)return;if(C=p*o+f*l>>16,p=p*l-f*o>>16,f=C,C=E*r-p*n>>16,p=E*n+p*r>>16,E=C,p<50)return;if(C=u*o+a*l>>16,u=u*l-a*o>>16,a=C,C=g*r-u*n>>16,u=g*n+u*r>>16,g=C,u<50)return;const T=h.A.pa+((d<<9)/y|0),O=h.A.ma+((m<<9)/y|0),b=h.A.pa+((A<<9)/c|0),v=h.A.ma+((_<<9)/c|0),L=h.A.pa+((f<<9)/p|0),R=h.A.ma+((E<<9)/p|0),S=h.A.pa+((a<<9)/u|0),M=h.A.ma+((g<<9)/u|0);if(h.A.alpha=0,(L-S)*(v-M)-(R-M)*(b-S)>0)if(h.A.Jv=L<0||S<0||b<0||L>w.A.Qv||S>w.A.Qv||b>w.A.Qv,I.Gb&&this.tL(I.Kl,I.Xl,R,M,v,L,S,b)&&(I.gf=s,I.Cf=e),-1===t.KO)12345678!==t.YO&&h.A.iL(L,S,b,R,M,v,t.YO,t.VO,t.WO);else if(I.At){const i=I.iv[t.KO];h.A.iL(L,S,b,R,M,v,this.sL(i,t.YO),this.sL(i,t.VO),this.sL(i,t.WO))}else t.flat?h.A.hL(L,S,b,R,M,v,t.YO,t.VO,t.WO,d,m,y,A,a,_,g,c,u,t.KO):h.A.hL(L,S,b,R,M,v,t.YO,t.VO,t.WO,f,E,p,a,A,g,_,u,c,t.KO);if(!((T-b)*(M-v)-(O-v)*(S-b)<=0))if(h.A.Jv=T<0||b<0||S<0||T>w.A.Qv||b>w.A.Qv||S>w.A.Qv,I.Gb&&this.tL(I.Kl,I.Xl,O,v,M,T,b,S)&&(I.gf=s,I.Cf=e),-1!==t.KO){if(!I.At)return void h.A.hL(T,b,S,O,v,M,t.HO,t.WO,t.VO,d,m,y,A,a,_,g,c,u,t.KO);const i=I.iv[t.KO];h.A.iL(T,b,S,O,v,M,this.sL(i,t.HO),this.sL(i,t.WO),this.sL(i,t.VO))}else 12345678!==t.HO&&h.A.iL(T,b,S,O,v,M,t.HO,t.WO,t.VO)};Xv=(t,i,s,e,n,r,o)=>{let l=s.jg.length;for(let t=0;t<l;t++){let i=s.jg[t]-I.Sb,l=s.qg[t]-I.Mb,a=s.Zg[t]-I.kb,c=a*r+i*o>>16;if(a=a*o-i*r>>16,i=c,c=l*n-a*e>>16,a=l*e+a*n>>16,l=c,a<50)return;s.ab&&(y.jO[t]=i,y.ZO[t]=l,y.qO[t]=a),y.XO[t]=h.A.pa+((i<<9)/a|0),y.zO[t]=h.A.ma+((l<<9)/a|0)}h.A.alpha=0,l=s.rb.length;for(let e=0;e<l;e++){const n=s.rb[e],r=s.ob[e],o=s.lb[e],l=y.XO[n],a=y.XO[r],c=y.XO[o],f=y.zO[n],u=y.zO[r],d=y.zO[o];if((l-a)*(d-u)-(f-u)*(c-a)>0)if(h.A.Jv=l<0||a<0||c<0||l>w.A.Qv||a>w.A.Qv||c>w.A.Qv,I.Gb&&this.tL(I.Kl,I.Xl,f,u,d,l,a,c)&&(I.gf=t,I.Cf=i),s.ab&&-1!==s.ab[e])if(I.At){const t=I.iv[s.ab[e]];h.A.iL(l,a,c,f,u,d,this.sL(t,s.hb[e]),this.sL(t,s.eb[e]),this.sL(t,s.nb[e]))}else s.flat?h.A.hL(l,a,c,f,u,d,s.hb[e],s.eb[e],s.nb[e],y.jO[0],y.ZO[0],y.qO[0],y.jO[1],y.jO[3],y.ZO[1],y.ZO[3],y.qO[1],y.qO[3],s.ab[e]):h.A.hL(l,a,c,f,u,d,s.hb[e],s.eb[e],s.nb[e],y.jO[n],y.ZO[n],y.qO[n],y.jO[r],y.jO[o],y.ZO[r],y.ZO[o],y.qO[r],y.qO[o],s.ab[e]);else 12345678!==s.hb[e]&&h.A.iL(l,a,c,f,u,d,s.hb[e],s.eb[e],s.nb[e])}};Vv=(t,i,s)=>{const h=this.rv[t][i][s];if(h===-I.iu)return!1;if(h===I.iu)return!0;{const h=i<<7,e=s<<7;return this.eL(h+1,this.ev[t][i][s],e+1)&&this.eL(h+128-1,this.ev[t][i+1][s],e+1)&&this.eL(h+128-1,this.ev[t][i+1][s+1],e+128-1)&&this.eL(h+1,this.ev[t][i][s+1],e+128-1)?(this.rv[t][i][s]=I.iu,!0):(this.rv[t][i][s]=-I.iu,!1)}};qv=(t,i,s,h)=>{if(!this.Vv(t,i,s))return!1;const e=i<<7,n=s<<7,r=this.ev[t][i][s]-1,o=r-120,l=r-230,a=r-238;if(h<16){if(1===h){if(e>I.Sb){if(!this.eL(e,r,n))return!1;if(!this.eL(e,r,n+128))return!1}if(t>0){if(!this.eL(e,o,n))return!1;if(!this.eL(e,o,n+128))return!1}return!!this.eL(e,l,n)&&this.eL(e,l,n+128)}if(2===h){if(n<I.kb){if(!this.eL(e,r,n+128))return!1;if(!this.eL(e+128,r,n+128))return!1}if(t>0){if(!this.eL(e,o,n+128))return!1;if(!this.eL(e+128,o,n+128))return!1}return!!this.eL(e,l,n+128)&&this.eL(e+128,l,n+128)}if(4===h){if(e<I.Sb){if(!this.eL(e+128,r,n))return!1;if(!this.eL(e+128,r,n+128))return!1}if(t>0){if(!this.eL(e+128,o,n))return!1;if(!this.eL(e+128,o,n+128))return!1}return!!this.eL(e+128,l,n)&&this.eL(e+128,l,n+128)}if(8===h){if(n>I.kb){if(!this.eL(e,r,n))return!1;if(!this.eL(e+128,r,n))return!1}if(t>0){if(!this.eL(e,o,n))return!1;if(!this.eL(e+128,o,n))return!1}return!!this.eL(e,l,n)&&this.eL(e+128,l,n)}}return!!this.eL(e+64,a,n+64)&&(16===h?this.eL(e,l,n+128):32===h?this.eL(e+128,l,n+128):64===h?this.eL(e+128,l,n):128===h?this.eL(e,l,n):(console.warn('Warning unsupported wall type!'),!0))};visible=(t,i,s,h)=>{if(this.Vv(t,i,s)){const e=i<<7,n=s<<7;return this.eL(e+1,this.ev[t][i][s]-h,n+1)&&this.eL(e+128-1,this.ev[t][i+1][s]-h,n+1)&&this.eL(e+128-1,this.ev[t][i+1][s+1]-h,n+128-1)&&this.eL(e+1,this.ev[t][i][s+1]-h,n+128-1)}return!1};$v=(t,i,s,h,e,n)=>{let r,o;if(i!==s||h!==e){for(r=i;r<=s;r++)for(o=h;o<=e;o++)if(this.rv[t][r][o]===-I.iu)return!1;o=1+(i<<7);const l=2+(h<<7),a=this.ev[t][i][h]-n;if(!this.eL(o,a,l))return!1;const c=(s<<7)-1;if(!this.eL(c,a,l))return!1;const f=(e<<7)-1;return!!this.eL(o,a,f)&&this.eL(c,a,f)}return!!this.Vv(t,i,h)&&(r=i<<7,o=h<<7,this.eL(r+1,this.ev[t][i][h]-n,o+1)&&this.eL(r+128-1,this.ev[t][i+1][h]-n,o+1)&&this.eL(r+128-1,this.ev[t][i+1][h+1]-n,o+128-1)&&this.eL(r+1,this.ev[t][i][h+1]-n,o+128-1))};eL=(t,i,s)=>{for(let h=0;h<I.rd;h++){const e=I.mb[h];if(e)if(1===e.mode){const h=e.CO-t;if(h>0){const t=e.OO+(e.SO*h>>8),n=e.bO+(e.MO*h>>8),r=e.vO+(e.kO*h>>8),o=e.hC+(e.xO*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(2===e.mode){const h=t-e.CO;if(h>0){const t=e.OO+(e.SO*h>>8),n=e.bO+(e.MO*h>>8),r=e.vO+(e.kO*h>>8),o=e.hC+(e.xO*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(3===e.mode){const h=e.OO-s;if(h>0){const s=e.CO+(e.LO*h>>8),n=e.TO+(e.RO*h>>8),r=e.vO+(e.kO*h>>8),o=e.hC+(e.xO*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(4===e.mode){const h=s-e.OO;if(h>0){const s=e.CO+(e.LO*h>>8),n=e.TO+(e.RO*h>>8),r=e.vO+(e.kO*h>>8),o=e.hC+(e.xO*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(5===e.mode){const h=i-e.vO;if(h>0){const i=e.CO+(e.LO*h>>8),n=e.TO+(e.RO*h>>8),r=e.OO+(e.SO*h>>8),o=e.bO+(e.MO*h>>8);if(t>=i&&t<=n&&s>=r&&s<=o)return!0}}}return!1};tL=(t,i,s,h,e,n,r,o)=>{if(i<s&&i<h&&i<e)return!1;if(i>s&&i>h&&i>e)return!1;if(t<n&&t<r&&t<o)return!1;if(t>n&&t>r&&t>o)return!1;const l=(i-h)*(o-r)-(t-r)*(e-h);return((i-s)*(r-n)-(t-n)*(h-s))*l>0&&l*((i-e)*(n-o)-(t-o)*(s-e))>0};sL=(t,i)=>((i=(127-i)*(127&t)/160|0)<2?i=2:i>126&&(i=126),(65408&t)+i)}},7121:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{}},4197:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{tm;$I;Jp;Qp;index;qI;Tl;Cl;constructor(t,i,s,h,e,n,r){super(),this.tm=i,this.$I=s,this.Jp=h,this.Qp=e,this.index=t,this.qI=n,r&&-1!==n.bl&&this.qI.delay?(this.Tl=Math.random()*this.qI.Ol|0,this.Cl=Math.random()*this.qI.delay[this.Tl]|0):(this.Tl=-1,this.Cl=0)}}},8412:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(9418),e=s(8665),n=s(8738),r=s(1312);class o extends h.A{static Nu=2;static Fu=4;static Bu=8;static Gu=16;static ju=32;static Ku=64;static Hu=128;type=null;draw(t){if(!this.type)return null;if(-1===this.Xu||-1===this.oI)return this.rC();const i=this.rC();if(!i)return null;const s=n.A.Wo[this.Xu],h=e.A.ng(s._a(),!0,!s.xg,!1);h.translate(-this.nI,0,0),h.Ya(),s.qI&&s.qI.frames&&h.Va(s.qI.frames[this.oI]),h.Qg=null,h.tC=null,128===s.eC&&128===s.nC||h.scale(s.eC,s.nC,s.eC),h.Ka(64+s.Ng,850+s.Pg,-30,-50,-30,!0);const r=[i,h],o=e.A.nL(r,2);return 1===this.type.size&&(o.cC=!0),o}isVisible(){return null!==this.type}rC(){if(!this.type)return null;if(this.Pu>=0&&0===this.sI){const t=r.A.Wo[this.Pu].frames;if(t){const i=t[this.tI];let s=-1;if(this.xI>=0&&this.xI!==this.Wa){const t=r.A.Wo[this.xI].frames;t&&(s=t[this.a_])}return this.type.rC(i,s,r.A.Wo[this.Pu].u_)}}let t=-1;if(this.xI>=0){const i=r.A.Wo[this.xI].frames;i&&(t=i[this.a_])}const i=this.type.rC(t,-1,null);return i?(this.height=i.hC,i):null}}},3606:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{index;count;constructor(t,i){super(),this.index=t,this.count=i}}},9418:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(7121),e=s(1312),n=s(3867);class r extends h.A{x=0;z=0;BI=0;GI=!1;size=1;Wa=-1;o_=-1;pI=-1;II=-1;EI=-1;CI=-1;w_=-1;mu=null;Cu=100;Eu=0;gu=0;Lu=0;vu=0;Tu=-1e3;Ou=0;bu=0;Uu=-1;hI=0;eI=0;xI=-1;a_=0;l_=0;Pu=-1;tI=0;iI=0;sI=0;Qm=0;Xu=-1;oI=0;lI=0;rI=0;nI=0;aI=0;fI=0;cI=0;uI=0;Ru=0;Su=0;dI=0;iu=0;height=0;r_=0;pathLength=0;Of=new Int32Array(10);bf=new Int32Array(10);d_=new n.vs(10,!1);n_=0;ku=-1;xu=-1;Wu=-1;Yu=-1;move(t,i,s){if(-1!==this.Pu&&e.A.Wo[this.Pu].priority<=1&&(this.Pu=-1),!t){const t=i-this.Of[0],h=s-this.bf[0];if(t>=-8&&t<=8&&h>=-8&&h<=8){this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.Of[t]=this.Of[t-1],this.bf[t]=this.bf[t-1],this.d_[t]=this.d_[t-1];return this.Of[0]=i,this.bf[0]=s,void(this.d_[0]=!1)}}this.pathLength=0,this.n_=0,this.Of[0]=i,this.bf[0]=s,this.x=128*this.Of[0]+64*this.size,this.z=128*this.bf[0]+64*this.size}step(t,i){let s=this.Of[0],h=this.bf[0];0===i?(s--,h++):1===i?h++:2===i?(s++,h++):3===i?s--:4===i?s++:5===i?(s--,h--):6===i?h--:7===i&&(s++,h--),-1!==this.Pu&&e.A.Wo[this.Pu].priority<=1&&(this.Pu=-1),this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.Of[t]=this.Of[t-1],this.bf[t]=this.bf[t-1],this.d_[t]=this.d_[t-1];this.Of[0]=s,this.bf[0]=h,this.d_[0]=t}}},8268:(t,i,s)=>{s.d(i,{A:()=>d});var h=s(9418),e=s(8665),n=s(2031),r=s(8738),o=s(1312),l=s(8317),a=s(1302),c=s(3819),f=s(3867),u=s(9298);class d extends h.A{static Du=1;static Nu=2;static Fu=4;static Bu=8;static Gu=16;static Hu=32;static Vu=64;static $m=128;static Ku=256;static zu=512;static Ha=[u.A.rL,u.A.oL,u.A.lL,u.A.aL,u.A.cL,u.A.fL,u.A.uL,u.A.dL,u.A.wL,u.A.yL,u.A.pL,u.A.mL,u.A.IL,u.A._L,u.A.EL,u.A.gL];static Ga=[[u.A.CL,u.A.TL,u.A.OL,u.A.bL,u.A.vL,u.A.LL,u.A.RL,u.A.SL,u.A.ML,u.A.kL,u.A.xL,u.A.DL],[u.A.NL,u.A.PL,u.A.FL,u.A.UL,u.A.BL,u.A.HL,u.A.WL,u.A.YL,u.A.VL,u.A.KL,u.A.XL,u.A.zL,u.A.jL,u.A.ZL,u.A.qL,u.A.$L],[u.A.$L-1,u.A.NL+1,u.A.PL,u.A.FL,u.A.UL,u.A.BL,u.A.HL,u.A.WL,u.A.YL,u.A.VL,u.A.KL,u.A.XL,u.A.zL,u.A.jL,u.A.ZL,u.A.qL],[u.A.JL,u.A.QL,u.A.tR,u.A.iR,u.A.sR,u.A.hR],[u.A.eR,u.A.nR,u.A.rR,u.A.oR,u.A.lR,u.A.aR,u.A.cR,u.A.fR]];static Yo=new n.A(200);name=null;visible=!1;uR=0;pu=0;dR=new Uint16Array(12);wR=new Uint16Array(5);hc=0;yR=0n;y=0;NI=0;FI=0;A_=0;m_=0;p_=0;DI=null;WI=0;YI=0;VI=0;KI=0;At=!1;draw(t){if(!this.visible)return null;let i=this.rC();if(this.height=i.hC,i.cC=!0,this.At)return i;if(-1!==this.Xu&&-1!==this.oI){const t=r.A.Wo[this.Xu],s=e.A.ng(t._a(),!0,!t.xg,!1);s.translate(-this.nI,0,0),s.Ya(),t.qI&&t.qI.frames&&s.Va(t.qI.frames[this.oI]),s.Qg=null,s.tC=null,128===t.eC&&128===t.nC||s.scale(t.eC,t.nC,t.eC),s.Ka(t.Ng+64,t.Pg+850,-30,-50,-30,!0);const h=[i,s];i=e.A.nL(h,2)}if(this.DI&&(t>=this.FI&&(this.DI=null),t>=this.NI&&t<this.FI)){const t=this.DI;if(t){t.translate(this.m_-this.y,this.A_-this.x,this.p_-this.z),512===this.r_?(t.iC(),t.iC(),t.iC()):1024===this.r_?(t.iC(),t.iC()):1536===this.r_&&t.iC();const s=[i,t];i=e.A.nL(s,2),512===this.r_?t.iC():1024===this.r_?(t.iC(),t.iC()):1536===this.r_&&(t.iC(),t.iC(),t.iC()),t.translate(this.y-this.m_,this.x-this.A_,this.z-this.p_)}}return i.cC=!0,i}isVisible(){return this.visible}read(t){t.ft=0,this.uR=t.cA,this.pu=t.cA;for(let i=0;i<12;i++){const s=t.cA;this.dR[i]=0===s?0:(s<<8)+t.cA}for(let i=0;i<5;i++){let s=t.cA;(s<0||s>=d.Ga[i].length)&&(s=0),this.wR[i]=s}this.Wa=t.ct,65535===this.Wa&&(this.Wa=-1),this.o_=t.ct,65535===this.o_&&(this.o_=-1),this.pI=t.ct,65535===this.pI&&(this.pI=-1),this.II=t.ct,65535===this.II&&(this.II=-1),this.EI=t.ct,65535===this.EI&&(this.EI=-1),this.CI=t.ct,65535===this.CI&&(this.CI=-1),this.w_=t.ct,65535===this.w_&&(this.w_=-1),this.name=c.A.Da(c.A.Na(t.Zc)),this.hc=t.cA,this.visible=!0,this.yR=0n;for(let t=0;t<12;t++)this.yR<<=0x4n,this.dR[t]>=256&&(this.yR+=BigInt(this.dR[t])-256n);this.dR[0]>=256&&(this.yR+=BigInt(this.dR[0])-256n>>4n),this.dR[1]>=256&&(this.yR+=BigInt(this.dR[1])-256n>>8n);for(let t=0;t<5;t++)this.yR<<=0x3n,this.yR+=BigInt(this.wR[t]);this.yR<<=0x1n,this.yR+=BigInt(this.uR)}IA(){if(!this.visible)return null;const t=new f.vs(12,null);let i=0;for(let s=0;s<12;s++){const h=this.dR[s];if(h>=256&&h<512&&(t[i++]=l.A.Wo[h-256].IA()),h>=512){const s=a.A.get(h-512).IA(this.uR);s&&(t[i++]=s)}}const s=e.A.Ua(t,i);for(let t=0;t<5;t++)0!==this.wR[t]&&(s.Ba(d.Ga[t][0],d.Ga[t][this.wR[t]]),1===t&&s.Ba(d.Ha[0],d.Ha[this.wR[t]]));return s}rC(){let t=this.yR,i=-1,s=-1,h=-1,n=-1;if(this.Pu>=0&&0===this.sI){const e=o.A.Wo[this.Pu];if(e.frames&&(i=e.frames[this.tI]),this.xI>=0&&this.xI!==this.Wa){const t=o.A.Wo[this.xI].frames;t&&(s=t[this.a_])}e.BC>=0&&(h=e.BC,t+=BigInt(h-this.dR[5])<<8n),e.GC>=0&&(n=e.GC,t+=BigInt(n-this.dR[3])<<16n)}else if(this.xI>=0){const t=o.A.Wo[this.xI].frames;t&&(i=t[this.a_])}let r=d.Yo?.get(t);if(!r){const i=new f.vs(12,null);let s=0;for(let t=0;t<12;t++){let e=this.dR[t];if(n>=0&&3===t&&(e=n),h>=0&&5===t&&(e=h),e>=256&&e<512){const t=l.A.Wo[e-256]._a();t&&(i[s++]=t)}if(e>=512){const t=a.A.get(e-512).UC(this.uR);t&&(i[s++]=t)}}r=e.A.Ua(i,s);for(let t=0;t<5;t++)0!==this.wR[t]&&(r.Ba(d.Ga[t][0],d.Ga[t][this.wR[t]]),1===t&&r.Ba(d.Ha[0],d.Ha[this.wR[t]]));r.Ya(),r.Ka(64,850,-30,-50,-30,!0),d.Yo?.put(t,r)}if(this.At)return r;const c=e.A.oC(r,!0);return-1!==i&&-1!==s?c.lC(i,s,o.A.Wo[this.Pu].u_):-1!==i&&c.Va(i),c.aC(),c.Qg=null,c.tC=null,c}}},254:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8738),e=s(7121),n=s(8665);class r extends e.A{AR;level;pR;mR;IR;offsetY;zI;XI;_R;arc;target;mobile=!1;x=0;z=0;y=0;velocityX=0;ER=0;gR=0;velocityY=0;CR=0;BI=0;pitch=0;Tl=0;Cl=0;constructor(t,i,s,e,n,r,o,l,a,c,f){super(),this.AR=h.A.Wo[t],this.level=i,this.pR=s,this.mR=n,this.IR=e,this.zI=r,this.XI=o,this._R=l,this.arc=a,this.target=c,this.offsetY=f}jI(t,i,s,h){if(!this.mobile){const i=t-this.pR,h=s-this.mR,e=Math.sqrt(i*i+h*h);this.x=this.pR+i*this.arc/e,this.z=this.mR+h*this.arc/e,this.y=this.IR}const e=this.XI+1-h;this.velocityX=(t-this.x)/e,this.ER=(s-this.z)/e,this.gR=Math.sqrt(this.velocityX*this.velocityX+this.ER*this.ER),this.mobile||(this.velocityY=-this.gR*Math.tan(.02454369*this._R)),this.CR=2*(i-this.y-this.velocityY*e)/(e*e)}update(t){if(this.mobile=!0,this.x+=this.velocityX*t,this.z+=this.ER*t,this.y+=this.velocityY*t+.5*this.CR*t*t,this.velocityY+=this.CR*t,this.BI=325.949*Math.atan2(this.velocityX,this.ER)+1024&2047,this.pitch=325.949*Math.atan2(this.velocityY,this.gR)&2047,this.AR.qI&&this.AR.qI.delay)for(this.Cl+=t;this.Cl>this.AR.qI.delay[this.Tl];)this.Cl-=this.AR.qI.delay[this.Tl]+1,this.Tl++,this.Tl>=this.AR.qI.Ol&&(this.Tl=0)}draw(){const t=this.AR._a(),i=n.A.ng(t,!0,!this.AR.xg,!1);return this.AR.qI&&this.AR.qI.frames&&(i.Ya(),i.Va(this.AR.qI.frames[this.Tl]),i.Qg=null,i.tC=null),128===this.AR.eC&&128===this.AR.nC||i.scale(this.AR.eC,this.AR.nC,this.AR.eC),i.TR(this.pitch),i.Ka(64+this.AR.Ng,850+this.AR.Pg,-30,-50,-30,!0),i}}},7628:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(7121),e=s(8738),n=s(8665);class r extends h.A{type;level;x;z;y;zI;ZI=!1;Tl=0;Cl=0;constructor(t,i,s,h,n,r,o){super(),this.type=e.A.Wo[t],this.level=i,this.x=s,this.z=h,this.y=n,this.zI=r+o}update(t){if(this.type.qI&&this.type.qI.delay)for(this.Cl+=t;this.Cl>this.type.qI.delay[this.Tl];)this.Cl-=this.type.qI.delay[this.Tl]+1,this.Tl++,this.Tl>=this.type.qI.Ol&&(this.Tl=0,this.ZI=!0)}draw(){const t=this.type._a(),i=n.A.ng(t,!0,!this.type.xg,!1);return!this.ZI&&this.type.qI&&this.type.qI.frames&&(i.Ya(),i.Va(this.type.qI.frames[this.Tl]),i.Qg=null,i.tC=null),128===this.type.eC&&128===this.type.nC||i.scale(this.type.eC,this.type.nC,this.type.eC),0!==this.type.orientation&&(90===this.type.orientation?i.iC():180===this.type.orientation?(i.iC(),i.iC()):270===this.type.orientation&&(i.iC(),i.iC(),i.iC())),i.Ka(64+this.type.Ng,850+this.type.Pg,-30,-50,-30,!0),i}}},5327:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{dp;Xd;x;z;im;angle;shape;XI;constructor(t,i,s,h,e,n,r,o){super(),this.dp=t,this.Xd=i,this.x=s,this.z=h,this.im=e,this.angle=n,this.shape=r,this.XI=o}}},2630:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{dp;Xd;x;z;im;angle;shape;wp;yp;Ap;constructor(t,i,s,h,e,n,r,o,l,a){super(),this.dp=t,this.Xd=i,this.x=s,this.z=h,this.im=e,this.angle=n,this.shape=r,this.wp=o,this.yp=l,this.Ap=a}}},3795:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1982),e=s(3867);class n extends h.A{level;x;z;Yv;Iv;Gv;wv=null;Av=null;Ev=null;gv=null;pv=null;_v=null;uv=null;mv=0;Hv=0;dv=0;visible=!1;update=!1;Fv=!1;Uv=0;jv=0;Zv=0;zv=0;constructor(t,i,s){super(),this.Yv=this.level=t,this.x=i,this.z=s,this.Iv=new e.vs(5,null),this.Gv=new Int32Array(5)}}},5518:(t,i,s)=>{s.d(i,{A:()=>h});class h{static rO=0;static yv=1;static OR=2;static bR=3;static vR=4;static LR=5;static tb=6;static ib=7;static sb=8;static RR=9;static SR=10;static MR=11}},4474:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{kR;xR;constructor(){super(),this.kR=this,this.xR=this}DR(){this.xR&&this.kR&&(this.xR.kR=this.kR,this.kR.xR=this.xR,this.kR=null,this.xR=null)}}},3819:(t,i,s)=>{s.d(i,{A:()=>h});class h{static NR=['_','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9'];static _d=t=>{t=t.trim();let i=0n;for(let s=0;s<t.length&&s<12;s++){const h=t.charCodeAt(s);i*=37n,h>=65&&h<=90?i+=BigInt(h+1-65):h>=97&&h<=122?i+=BigInt(h+1-97):h>=48&&h<=57&&(i+=BigInt(h+27-48))}return i};static Na=t=>{if(t<0n||t>=6582952005840035281n)return'invalid_name';if(t%37n===0n)return'invalid_name';let i=0;const s=Array(12);for(;0n!==t;){const h=t;t/=37n,s[11-i++]=this.NR[Number(h-37n*t)]}return s.slice(12-i).join('')};static Ry=t=>{const i=[...t.toLowerCase()];let s=!0;for(let t=0;t<i.length;t++){const h=i[t];s&&h>='a'&&h<='z'&&(i[t]=h.toUpperCase(),s=!1),'.'!==h&&'!'!==h||(s=!0)}return i.join('')};static Xc=t=>{let i='';for(let s=0;s<t.length;s++)i+='*';return i};static Ja=t=>(t>>24&255)+'.'+(t>>16&255)+'.'+(t>>8&255)+'.'+(255&t);static Da=t=>{if(0===t.length)return t;const i=[...t];for(let t=0;t<i.length;t++)'_'===i[t]&&(i[t]=' ',t+1<i.length&&i[t+1]>='a'&&i[t+1]<='z'&&(i[t+1]=String.fromCharCode(i[t+1].charCodeAt(0)+'A'.charCodeAt(0)-97)));return i[0]>='a'&&i[0]<='z'&&(i[0]=String.fromCharCode(i[0].charCodeAt(0)+'A'.charCodeAt(0)-97)),i.join('')};static hg=t=>{const i=t.toUpperCase();let s=0n;for(let t=0;t<i.length;t++)s=61n*s+BigInt(i.charCodeAt(t))-32n,s=s+(s>>56n)&0xffffffffffffffn;return s}}},6666:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e{PR;cursor=null;constructor(){const t=new h.A;t.next=t,t.Rm=t,this.PR=t}y_(t){t.Rm&&t.pA(),t.Rm=this.PR.Rm,t.next=this.PR,t.Rm&&(t.Rm.next=t),t.next.Rm=t}Wy(t){t.Rm&&t.pA(),t.Rm=this.PR,t.next=this.PR.next,t.Rm.next=t,t.next&&(t.next.Rm=t)}Wv(){const t=this.PR.next;return t===this.PR?null:(t?.pA(),t)}head(){const t=this.PR.next;return t===this.PR?(this.cursor=null,null):(this.cursor=t?.next||null,t)}Lm(){const t=this.PR.Rm;return t===this.PR?(this.cursor=null,null):(this.cursor=t?.Rm||null,t)}next(){const t=this.cursor;return t===this.PR?(this.cursor=null,null):(this.cursor=t?.next||null,t)}Rm(){const t=this.cursor;return t===this.PR?(this.cursor=null,null):(this.cursor=t?.Rm||null,t)}clear(){for(;;){const t=this.PR.next;if(t===this.PR)return;t?.pA()}}}},1982:(t,i,s)=>{s.d(i,{A:()=>h});class h{key;next;Rm;constructor(){this.key=0n,this.next=this,this.Rm=this}pA(){this.Rm&&this.next&&(this.Rm.next=this.next,this.next.Rm=this.Rm,this.next=null,this.Rm=null)}}},2031:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(4474);class e{head;constructor(){this.head=new h.A}push(t){t.xR&&t.DR(),t.xR=this.head.xR,t.kR=this.head,t.xR&&(t.xR.kR=t),t.kR.xR=t}pop(){const t=this.head.kR;return t===this.head?null:(t?.DR(),t)}}var n=s(1982);class r{FR;UR;constructor(t){this.UR=[],this.FR=t;for(let i=0;i<t;i++)this.UR[i]=new n.A}get(t){const i=this.UR[Number(t&BigInt(this.FR-1))];if(!i.next)return null;for(let s=i.next;s!==i;s=s.next)if(s&&s.key===t)return s;return null}put(t,i){i.Rm&&i.pA();const s=this.UR[Number(t&BigInt(this.FR-1))];i.Rm=s.Rm,i.next=s,i.Rm&&(i.Rm.next=i),i.next.Rm=i,i.key=t}}class o{BR;GR;history;available;constructor(t){this.BR=t,this.available=t,this.GR=new r(1024),this.history=new e}get(t){const i=this.GR.get(t);return i&&this.history.push(i),i}put(t,i){if(0===this.available){const t=this.history.pop();t?.pA(),t?.DR()}else this.available--;this.GR.put(t,i),this.history.push(i)}clear(){const t=this.history.pop();t?(t.pA(),t.DR()):this.available=this.BR}}},8534:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(3867);class n{static Wo=[];static Ac=t=>{const i=new h.A(t.read('base_head.dat')),s=new h.A(t.read('base_type.dat')),r=new h.A(t.read('base_label.dat')),o=i.ct;i.ft+=2;for(let t=0;t<o;t++){const t=i.ct,h=i.cA,o=new Uint8Array(h),l=new e.vs(h,null);for(let t=0;t<h;t++){o[t]=s.cA;const i=r.cA,h=new Uint8Array(i);for(let t=0;t<i;t++)h[t]=r.cA;l[t]=h}this.Wo[t]=new n,this.Wo[t].length=h,this.Wo[t].types=o,this.Wo[t].labels=l}};length=0;types=null;labels=null}},6730:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(8534),e=s(1069);class n{static Wo=[];static Ac=t=>{const i=new e.A(t.read('frame_head.dat')),s=new e.A(t.read('frame_tran1.dat')),r=new e.A(t.read('frame_tran2.dat')),o=new e.A(t.read('frame_del.dat')),l=i.ct;i.ft+=2;const a=new Int32Array(500),c=new Int32Array(500),f=new Int32Array(500),u=new Int32Array(500);for(let t=0;t<l;t++){const t=i.ct,e=this.Wo[t]=new n;e.delay=o.cA;const l=i.ct,d=h.A.Wo[l];e.HR=d;const w=i.cA;let y=-1,A=0;for(let t=0;t<w;t++){if(!d.types)throw new Error('SeqBase not loaded!!!');const i=s.cA;if(i>0){if(0!==d.types[t])for(let i=t-1;i>y;i--)if(0===d.types[i]){a[A]=i,c[A]=0,f[A]=0,u[A]=0,A++;break}a[A]=t;let s=0;3===d.types[a[A]]&&(s=128),c[A]=1&i?r.WR:s,f[A]=2&i?r.WR:s,u[A]=4&i?r.WR:s,y=t,A++}}e.length=A,e.YR=new Int32Array(A),e.x=new Int32Array(A),e.y=new Int32Array(A),e.z=new Int32Array(A);for(let t=0;t<A;t++)e.YR[t]=a[t],e.x[t]=c[t],e.y[t]=f[t],e.z[t]=u[t]}};delay=0;HR=null;length=0;YR=null;x=null;y=null;z=null}},7854:(t,i,s)=>{s.d(i,{V_:()=>h,rl:()=>e,VR:()=>o,KR:()=>r,XR:()=>n});const h=document.getElementById('canvas'),e=h.getContext('2d',{willReadFrequently:!0}),n=document.createElement('canvas'),r=document.createElement('img'),o=n.getContext('2d',{willReadFrequently:!0})},9298:(t,i,s)=>{s.d(i,{A:()=>h});class h{static RED=16711680;static GREEN=65280;static BLUE=255;static Jl=16776960;static Uc=65535;static Bc=16711935;static kl=16777215;static $l=0;static zR=16748608;static wd=8388608;static dd=128;static jR=16756736;static ZR=16740352;static qR=16723968;static $R=12648192;static JR=8453888;static QR=4259584;static Rc=9179409;static Kd=6116423;static dl=2301979;static wl=5063219;static Al=7759444;static ml=3353893;static yd=8388736;static Ad=13350793;static Zu=Int32Array.of(h.Jl,h.RED,h.GREEN,h.Uc,h.Bc,h.kl);static CL=6798;static TL=107;static OL=10283;static bL=16;static vL=4797;static LL=7744;static RL=5799;static SL=4634;static ML=33697;static kL=22433;static xL=2983;static DL=54193;static NL=8741;static PL=12;static FL=64030;static UL=43162;static BL=7735;static HL=8404;static WL=1701;static YL=38430;static VL=24094;static KL=10153;static XL=56621;static zL=4783;static jL=1341;static ZL=16578;static qL=35003;static $L=25239;static rL=9104;static oL=10275;static lL=7595;static aL=3610;static cL=7975;static fL=8526;static uL=918;static dL=38802;static wL=24466;static yL=10145;static pL=58654;static mL=5027;static IL=1457;static _L=16565;static EL=34991;static gL=25486;static JL=4626;static QL=11146;static tR=6439;static iR=12;static sR=4758;static hR=10270;static fR=4574;static eR=4550;static nR=4537;static rR=5681;static oR=5673;static lR=5790;static aR=6806;static cR=8076}},8950:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(4474);class e extends h.A{static mc=new Int32Array;static AC=0;static pC=0;static top=0;static bottom=0;static left=0;static right=0;static Qv=0;static tS=0;static iS=0;static bind=(t,i,s)=>{this.mc=t,this.AC=i,this.pC=s,this.Ll(0,0,i,s)};static $u=()=>{this.left=0,this.top=0,this.right=this.AC,this.bottom=this.pC,this.Qv=this.right-1,this.tS=this.right/2|0};static Ll=(t,i,s,h)=>{t<0&&(t=0),i<0&&(i=0),s>this.AC&&(s=this.AC),h>this.pC&&(h=this.pC),this.top=i,this.bottom=h,this.left=t,this.right=s,this.Qv=this.right-1,this.tS=this.right/2|0,this.iS=this.bottom/2|0};static clear=()=>{const t=this.AC*this.pC;for(let i=0;i<t;i++)this.mc[i]=0};static Ml=(t,i,s,h,e)=>{this.pl(t,i,e,s),this.pl(t,i+h-1,e,s),this.yl(t,i,e,h),this.yl(t+s-1,i,e,h)};static pl=(t,i,s,h)=>{if(i<this.top||i>=this.bottom)return;t<this.left&&(h-=this.left-t,t=this.left),t+h>this.right&&(h=this.right-t);const e=t+i*this.AC;for(let t=0;t<h;t++)this.mc[e+t]=s};static yl=(t,i,s,h)=>{if(t<this.left||t>=this.right)return;i<this.top&&(h-=this.top-i,i=this.top),i+h>this.bottom&&(h=this.bottom-i);const e=t+i*this.AC;for(let t=0;t<h;t++)this.mc[e+t*this.AC]=s};static od=(t,i,s,h,e)=>{const n=Math.abs(s-t),r=Math.abs(h-i),o=t<s?1:-1,l=i<h?1:-1;let a=n-r;for(;t>=this.left&&t<this.right&&i>=this.top&&i<this.bottom&&(this.mc[t+i*this.AC]=e),t!==s||i!==h;){const s=2*a;s>-r&&(a-=r,t+=o),s<n&&(a+=n,i+=l)}};static fillRect=(t,i,s,h,e)=>{t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const n=this.AC-s;let r=t+i*this.AC;for(let t=-h;t<0;t++){for(let t=-s;t<0;t++)this.mc[r++]=e;r+=n}};static sS(t,i,s,h,e,n){t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const r=256-n,o=(e>>16&255)*n,l=(e>>8&255)*n,a=(255&e)*n,c=this.AC-s;let f=t+i*this.AC;for(let t=0;t<h;t++){for(let t=-s;t<0;t++){const t=(o+(this.mc[f]>>16&255)*r>>8<<16)+(l+(this.mc[f]>>8&255)*r>>8<<8)+(a+(255&this.mc[f])*r>>8);this.mc[f++]=t}f+=c}}static hS(t,i,s,h,e){const n=256-e,r=(h>>16&255)*e,o=(h>>8&255)*e,l=(255&h)*e;let a=i-s;a<0&&(a=0);let c=i+s;c>=this.pC&&(c=this.pC-1);for(let h=a;h<=c;h++){const e=h-i,a=0|Math.sqrt(s*s-e*e);let c=t-a;c<0&&(c=0);let f=t+a;f>=this.AC&&(f=this.AC-1);let u=c+h*this.AC;for(let t=c;t<=f;t++){const t=(r+(this.mc[u]>>16&255)*n>>8<<16)+(o+(this.mc[u]>>8&255)*n>>8<<8)+(l+(255&this.mc[u])*n>>8);this.mc[u++]=t}}}static eS=(t,i,s)=>{t<this.left||t>=this.right||i<this.top||i>=this.bottom||(this.mc[t+i*this.AC]=s)}}},4583:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8950),e=s(1673),n=s(3867);class r extends h.A{static At=!1;static nS=new Int32Array(512);static rS=new Int32Array(2048);static sin=new Int32Array(2048);static cos=new Int32Array(2048);static palette=new Int32Array(65536);static __=new n.vs(50,null);static oS=0;static _c=new Int32Array;static pa=0;static ma=0;static mC=!0;static Jv=!1;static alpha=0;static lS=null;static aS=new n.vs(50,null);static cS=0;static iu=0;static I_=new Int32Array(50);static fS=new n.vs(50,null);static uS=!1;static dS=new n.vs(50,!1);static wS=new Int32Array(50);static{for(let t=1;t<512;t++)this.nS[t]=32768/t|0;for(let t=1;t<2048;t++)this.rS[t]=65536/t|0;for(let t=0;t<2048;t++)this.sin[t]=65536*Math.sin(.0030679615757712823*t)|0,this.cos[t]=65536*Math.cos(.0030679615757712823*t)|0}static Bo=()=>{this.nS=null,this.nS=null,this.sin=null,this.cos=null,this._c=null,this.__=null,this.dS=null,this.wS=null,this.lS=null,this.aS=null,this.I_=null,this.palette=null,this.fS=null,console.log('Draw3D unloaded!')};static K_=()=>{this._c=new Int32Array(h.A.pC);for(let t=0;t<h.A.pC;t++)this._c[t]=h.A.AC*t;this.pa=h.A.AC/2|0,this.ma=h.A.pC/2|0};static Ic=(t,i)=>{this._c=new Int32Array(i);for(let s=0;s<i;s++)this._c[s]=t*s;this.pa=t/2|0,this.ma=i/2|0};static Xp=()=>{this.lS=null,this.aS.fill(null)};static dc=t=>{this.oS=0;for(let i=0;i<50;i++)try{this.__[i]=e.A.nc(t,i.toString()),this.At&&128===this.__[i]?.jl?this.__[i]?.yS():this.__[i]?.CC(),this.oS++}catch(t){}};static lO=t=>{if(0!==this.wS[t])return this.wS[t];const i=this.fS[t];if(!i)return 0;let s=0,h=0,e=0;const n=i.length;for(let t=0;t<n;t++)s+=i[t]>>16&255,h+=i[t]>>8&255,e+=255&i[t];let r=(s/n<<16)+(h/n<<8)+(e/n|0);return r=this.AS(r,1.4),0===r&&(r=1),this.wS[t]=r,r};static wc=t=>{const i=t+.03*Math.random()-.015;let s=0;for(let t=0;t<512;t++){const h=(t/8|0)/64+.0078125,e=(7&t)/8+.0625;for(let t=0;t<128;t++){const n=t/128;let r=n,o=n,l=n;if(0!==e){let t;t=n<.5?n*(e+1):n+e-n*e;const i=2*n-t;let s=h+.3333333333333333;s>1&&s--;let a=h-.3333333333333333;a<0&&a++,r=6*s<1?i+6*(t-i)*s:2*s<1?t:3*s<2?i+(t-i)*(.6666666666666666-s)*6:i,o=6*h<1?i+6*(t-i)*h:2*h<1?t:3*h<2?i+(t-i)*(.6666666666666666-h)*6:i,l=6*a<1?i+6*(t-i)*a:2*a<1?t:3*a<2?i+(t-i)*(.6666666666666666-a)*6:i}const a=((256*r|0)<<16)+((256*o|0)<<8)+(256*l|0);this.palette[s++]=this.AS(a,i)}}for(let t=0;t<50;t++){const s=this.__[t];if(!s)continue;const h=s.palette;this.fS[t]=new Int32Array(h.length);for(let s=0;s<h.length;s++){const e=this.fS[t];e&&(e[s]=this.AS(h[s],i))}}for(let t=0;t<50;t++)this.E_(t)};static AS=(t,i)=>{const s=(t>>16)/256,h=(t>>8&255)/256,e=(255&t)/256;return((256*Math.pow(s,i)|0)<<16)+((256*Math.pow(h,i)|0)<<8)+(256*Math.pow(e,i)|0)};static yc=t=>{this.lS||(this.cS=t,this.At?this.lS=new n.er(t,16384):this.lS=new n.er(t,65536),this.aS.fill(null))};static iL=(t,i,s,e,n,o,l,a,c)=>{let f=0,u=0;n!==e&&(f=(i-t<<16)/(n-e)|0,u=(a-l<<15)/(n-e)|0);let d=0,w=0;o!==n&&(d=(s-i<<16)/(o-n)|0,w=(c-a<<15)/(o-n)|0);let y=0,A=0;if(o!==e&&(y=(t-s<<16)/(e-o)|0,A=(l-c<<15)/(e-o)|0),e<=n&&e<=o){if(e<h.A.bottom)if(n>h.A.bottom&&(n=h.A.bottom),o>h.A.bottom&&(o=h.A.bottom),n<o)if(s=t<<=16,c=l<<=15,e<0&&(s-=y*e,t-=f*e,c-=A*e,l-=u*e,e=0),i<<=16,a<<=15,n<0&&(i-=d*n,a-=w*n,n=0),e!==n&&y<f||e===n&&y>d)for(o-=n,n-=e,e=r._c[e];;){if(--n<0)for(;;){if(--o<0)return;this.pS(s>>16,i>>16,c>>7,a>>7,h.A.mc,e,0),s+=y,i+=d,c+=A,a+=w,e+=h.A.AC}this.pS(s>>16,t>>16,c>>7,l>>7,h.A.mc,e,0),s+=y,t+=f,c+=A,l+=u,e+=h.A.AC}else for(o-=n,n-=e,e=r._c[e];;){if(--n<0)for(;;){if(--o<0)return;this.pS(i>>16,s>>16,a>>7,c>>7,h.A.mc,e,0),s+=y,i+=d,c+=A,a+=w,e+=h.A.AC}this.pS(t>>16,s>>16,l>>7,c>>7,h.A.mc,e,0),s+=y,t+=f,c+=A,l+=u,e+=h.A.AC}else if(i=t<<=16,a=l<<=15,e<0&&(i-=y*e,t-=f*e,a-=A*e,l-=u*e,e=0),s<<=16,c<<=15,o<0&&(s-=d*o,c-=w*o,o=0),e!==o&&y<f||e===o&&d>f)for(n-=o,o-=e,e=r._c[e];;){if(--o<0)for(;;){if(--n<0)return;this.pS(s>>16,t>>16,c>>7,l>>7,h.A.mc,e,0),s+=d,t+=f,c+=w,l+=u,e+=h.A.AC}this.pS(i>>16,t>>16,a>>7,l>>7,h.A.mc,e,0),i+=y,t+=f,a+=A,l+=u,e+=h.A.AC}else for(n-=o,o-=e,e=r._c[e];;){if(--o<0)for(;;){if(--n<0)return;this.pS(t>>16,s>>16,l>>7,c>>7,h.A.mc,e,0),s+=d,t+=f,c+=w,l+=u,e+=h.A.AC}this.pS(t>>16,i>>16,l>>7,a>>7,h.A.mc,e,0),i+=y,t+=f,a+=A,l+=u,e+=h.A.AC}}else if(n<=o){if(n<h.A.bottom)if(o>h.A.bottom&&(o=h.A.bottom),e>h.A.bottom&&(e=h.A.bottom),o<e)if(t=i<<=16,l=a<<=15,n<0&&(t-=f*n,i-=d*n,l-=u*n,a-=w*n,n=0),s<<=16,c<<=15,o<0&&(s-=y*o,c-=A*o,o=0),n!==o&&f<d||n===o&&f>y)for(e-=o,o-=n,n=r._c[n];;){if(--o<0)for(;;){if(--e<0)return;this.pS(t>>16,s>>16,l>>7,c>>7,h.A.mc,n,0),t+=f,s+=y,l+=u,c+=A,n+=h.A.AC}this.pS(t>>16,i>>16,l>>7,a>>7,h.A.mc,n,0),t+=f,i+=d,l+=u,a+=w,n+=h.A.AC}else for(e-=o,o-=n,n=r._c[n];;){if(--o<0)for(;;){if(--e<0)return;this.pS(s>>16,t>>16,c>>7,l>>7,h.A.mc,n,0),t+=f,s+=y,l+=u,c+=A,n+=h.A.AC}this.pS(i>>16,t>>16,a>>7,l>>7,h.A.mc,n,0),t+=f,i+=d,l+=u,a+=w,n+=h.A.AC}else if(s=i<<=16,c=a<<=15,n<0&&(s-=f*n,i-=d*n,c-=u*n,a-=w*n,n=0),t<<=16,l<<=15,e<0&&(t-=y*e,l-=A*e,e=0),o-=e,e-=n,n=r._c[n],f<d)for(;;){if(--e<0)for(;;){if(--o<0)return;this.pS(t>>16,i>>16,l>>7,a>>7,h.A.mc,n,0),t+=y,i+=d,l+=A,a+=w,n+=h.A.AC}this.pS(s>>16,i>>16,c>>7,a>>7,h.A.mc,n,0),s+=f,i+=d,c+=u,a+=w,n+=h.A.AC}else for(;;){if(--e<0)for(;;){if(--o<0)return;this.pS(i>>16,t>>16,a>>7,l>>7,h.A.mc,n,0),t+=y,i+=d,l+=A,a+=w,n+=h.A.AC}this.pS(i>>16,s>>16,a>>7,c>>7,h.A.mc,n,0),s+=f,i+=d,c+=u,a+=w,n+=h.A.AC}}else if(o<h.A.bottom)if(e>h.A.bottom&&(e=h.A.bottom),n>h.A.bottom&&(n=h.A.bottom),e<n)if(i=s<<=16,a=c<<=15,o<0&&(i-=d*o,s-=y*o,a-=w*o,c-=A*o,o=0),t<<=16,l<<=15,e<0&&(t-=f*e,l-=u*e,e=0),n-=e,e-=o,o=r._c[o],d<y)for(;;){if(--e<0)for(;;){if(--n<0)return;this.pS(i>>16,t>>16,a>>7,l>>7,h.A.mc,o,0),i+=d,t+=f,a+=w,l+=u,o+=h.A.AC}this.pS(i>>16,s>>16,a>>7,c>>7,h.A.mc,o,0),i+=d,s+=y,a+=w,c+=A,o+=h.A.AC}else for(;;){if(--e<0)for(;;){if(--n<0)return;this.pS(t>>16,i>>16,l>>7,a>>7,h.A.mc,o,0),i+=d,t+=f,a+=w,l+=u,o+=h.A.AC}this.pS(s>>16,i>>16,c>>7,a>>7,h.A.mc,o,0),i+=d,s+=y,a+=w,c+=A,o+=h.A.AC}else if(t=s<<=16,l=c<<=15,o<0&&(t-=d*o,s-=y*o,l-=w*o,c-=A*o,o=0),i<<=16,a<<=15,n<0&&(i-=f*n,a-=u*n,n=0),e-=n,n-=o,o=r._c[o],d<y)for(;;){if(--n<0)for(;;){if(--e<0)return;this.pS(i>>16,s>>16,a>>7,c>>7,h.A.mc,o,0),i+=f,s+=y,a+=u,c+=A,o+=h.A.AC}this.pS(t>>16,s>>16,l>>7,c>>7,h.A.mc,o,0),t+=d,s+=y,l+=w,c+=A,o+=h.A.AC}else for(;;){if(--n<0)for(;;){if(--e<0)return;this.pS(s>>16,i>>16,c>>7,a>>7,h.A.mc,o,0),i+=f,s+=y,a+=u,c+=A,o+=h.A.AC}this.pS(s>>16,t>>16,c>>7,l>>7,h.A.mc,o,0),t+=d,s+=y,l+=w,c+=A,o+=h.A.AC}};static pS=(t,i,s,e,n,o,l)=>{let a;if(r.mC){let c;if(r.Jv){if(c=i-t>3?(e-s)/(i-t)|0:0,i>h.A.Qv&&(i=h.A.Qv),t<0&&(s-=t*c,t=0),t>=i)return;o+=t,l=i-t>>2,c<<=2}else{if(!(t<i))return;o+=t,c=(l=i-t>>2)>0?(e-s)*r.nS[l]>>15:0}if(0===r.alpha)for(;;){if(--l<0){if((l=i-t&3)>0){a=r.palette[s>>8];do{n[o++]=a,l--}while(l>0);return}break}a=r.palette[s>>8],s+=c,n[o++]=a,n[o++]=a,n[o++]=a,n[o++]=a}else{const h=r.alpha,e=256-r.alpha;for(;;){if(--l<0){if((l=i-t&3)>0){a=r.palette[s>>8],a=((16711935&a)*e>>8&16711935)+((65280&a)*e>>8&65280);do{n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),l--}while(l>0)}break}a=r.palette[s>>8],s+=c,a=((16711935&a)*e>>8&16711935)+((65280&a)*e>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280)}}}else if(t<i){const c=(e-s)/(i-t)|0;if(r.Jv&&(i>h.A.Qv&&(i=h.A.Qv),t<0&&(s-=t*c,t=0),t>=i))return;if(o+=t,l=i-t,0===r.alpha)do{n[o++]=r.palette[s>>8],s+=c,l--}while(l>0);else{const t=r.alpha,i=256-r.alpha;do{a=r.palette[s>>8],s+=c,a=((16711935&a)*i>>8&16711935)+((65280&a)*i>>8&65280),n[o++]=a+((16711935&n[o])*t>>8&16711935)+((65280&n[o])*t>>8&65280),l--}while(l>0)}}};static mS=(t,i,s,e,n,r,o)=>{let l=0;n!==e&&(l=(i-t<<16)/(n-e)|0);let a=0;r!==n&&(a=(s-i<<16)/(r-n)|0);let c=0;if(r!==e&&(c=(t-s<<16)/(e-r)|0),e<=n&&e<=r){if(e<h.A.bottom)if(n>h.A.bottom&&(n=h.A.bottom),r>h.A.bottom&&(r=h.A.bottom),n<r)if(s=t<<=16,e<0&&(s-=c*e,t-=l*e,e=0),i<<=16,n<0&&(i-=a*n,n=0),e!==n&&c<l||e===n&&c>a)for(r-=n,n-=e,e=this._c[e];;){if(--n<0)for(;;){if(--r<0)return;this.IS(s>>16,i>>16,h.A.mc,e,o),s+=c,i+=a,e+=h.A.AC}this.IS(s>>16,t>>16,h.A.mc,e,o),s+=c,t+=l,e+=h.A.AC}else for(r-=n,n-=e,e=this._c[e];;){if(--n<0)for(;;){if(--r<0)return;this.IS(i>>16,s>>16,h.A.mc,e,o),s+=c,i+=a,e+=h.A.AC}this.IS(t>>16,s>>16,h.A.mc,e,o),s+=c,t+=l,e+=h.A.AC}else if(i=t<<=16,e<0&&(i-=c*e,t-=l*e,e=0),s<<=16,r<0&&(s-=a*r,r=0),e!==r&&c<l||e===r&&a>l)for(n-=r,r-=e,e=this._c[e];;){if(--r<0)for(;;){if(--n<0)return;this.IS(s>>16,t>>16,h.A.mc,e,o),s+=a,t+=l,e+=h.A.AC}this.IS(i>>16,t>>16,h.A.mc,e,o),i+=c,t+=l,e+=h.A.AC}else for(n-=r,r-=e,e=this._c[e];;){if(--r<0)for(;;){if(--n<0)return;this.IS(t>>16,s>>16,h.A.mc,e,o),s+=a,t+=l,e+=h.A.AC}this.IS(t>>16,i>>16,h.A.mc,e,o),i+=c,t+=l,e+=h.A.AC}}else if(n<=r){if(n<h.A.bottom)if(r>h.A.bottom&&(r=h.A.bottom),e>h.A.bottom&&(e=h.A.bottom),r<e)if(t=i<<=16,n<0&&(t-=l*n,i-=a*n,n=0),s<<=16,r<0&&(s-=c*r,r=0),n!==r&&l<a||n===r&&l>c)for(e-=r,r-=n,n=this._c[n];;){if(--r<0)for(;;){if(--e<0)return;this.IS(t>>16,s>>16,h.A.mc,n,o),t+=l,s+=c,n+=h.A.AC}this.IS(t>>16,i>>16,h.A.mc,n,o),t+=l,i+=a,n+=h.A.AC}else for(e-=r,r-=n,n=this._c[n];;){if(--r<0)for(;;){if(--e<0)return;this.IS(s>>16,t>>16,h.A.mc,n,o),t+=l,s+=c,n+=h.A.AC}this.IS(i>>16,t>>16,h.A.mc,n,o),t+=l,i+=a,n+=h.A.AC}else if(s=i<<=16,n<0&&(s-=l*n,i-=a*n,n=0),t<<=16,e<0&&(t-=c*e,e=0),l<a)for(r-=e,e-=n,n=this._c[n];;){if(--e<0)for(;;){if(--r<0)return;this.IS(t>>16,i>>16,h.A.mc,n,o),t+=c,i+=a,n+=h.A.AC}this.IS(s>>16,i>>16,h.A.mc,n,o),s+=l,i+=a,n+=h.A.AC}else for(r-=e,e-=n,n=this._c[n];;){if(--e<0)for(;;){if(--r<0)return;this.IS(i>>16,t>>16,h.A.mc,n,o),t+=c,i+=a,n+=h.A.AC}this.IS(i>>16,s>>16,h.A.mc,n,o),s+=l,i+=a,n+=h.A.AC}}else if(r<h.A.bottom)if(e>h.A.bottom&&(e=h.A.bottom),n>h.A.bottom&&(n=h.A.bottom),e<n)if(i=s<<=16,r<0&&(i-=a*r,s-=c*r,r=0),t<<=16,e<0&&(t-=l*e,e=0),a<c)for(n-=e,e-=r,r=this._c[r];;){if(--e<0)for(;;){if(--n<0)return;this.IS(i>>16,t>>16,h.A.mc,r,o),i+=a,t+=l,r+=h.A.AC}this.IS(i>>16,s>>16,h.A.mc,r,o),i+=a,s+=c,r+=h.A.AC}else for(n-=e,e-=r,r=this._c[r];;){if(--e<0)for(;;){if(--n<0)return;this.IS(t>>16,i>>16,h.A.mc,r,o),i+=a,t+=l,r+=h.A.AC}this.IS(s>>16,i>>16,h.A.mc,r,o),i+=a,s+=c,r+=h.A.AC}else if(t=s<<=16,r<0&&(t-=a*r,s-=c*r,r=0),i<<=16,n<0&&(i-=l*n,n=0),a<c)for(e-=n,n-=r,r=this._c[r];;){if(--n<0)for(;;){if(--e<0)return;this.IS(i>>16,s>>16,h.A.mc,r,o),i+=l,s+=c,r+=h.A.AC}this.IS(t>>16,s>>16,h.A.mc,r,o),t+=a,s+=c,r+=h.A.AC}else for(e-=n,n-=r,r=this._c[r];;){if(--n<0)for(;;){if(--e<0)return;this.IS(s>>16,i>>16,h.A.mc,r,o),i+=l,s+=c,r+=h.A.AC}this.IS(s>>16,t>>16,h.A.mc,r,o),t+=a,s+=c,r+=h.A.AC}};static hL=(t,i,s,e,n,r,o,l,a,c,f,u,d,w,y,A,p,m,I)=>{const _=this._S(I);this.uS=!this.dS[I];const E=c-d,g=f-y,C=u-p,T=w-c,O=A-f,b=m-u;let v=T*f-O*c<<14;const L=O*u-b*f<<8,R=b*c-T*u<<5;let S=E*f-g*c<<14;const M=g*u-C*f<<8,k=C*c-E*u<<5;let x=g*T-E*O<<14;const D=C*O-g*b<<8,N=E*b-C*T<<5;let P=0,F=0;n!==e&&(P=(i-t<<16)/(n-e)|0,F=(l-o<<16)/(n-e)|0);let U=0,B=0;r!==n&&(U=(s-i<<16)/(r-n)|0,B=(a-l<<16)/(r-n)|0);let G=0,H=0;if(r!==e&&(G=(t-s<<16)/(e-r)|0,H=(o-a<<16)/(e-r)|0),e<=n&&e<=r){if(e<h.A.bottom)if(n>h.A.bottom&&(n=h.A.bottom),r>h.A.bottom&&(r=h.A.bottom),n<r){s=t<<=16,a=o<<=16,e<0&&(s-=G*e,t-=P*e,a-=H*e,o-=F*e,e=0),i<<=16,l<<=16,n<0&&(i-=U*n,l-=B*n,n=0);const c=e-this.ma;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,e!==n&&G<P||e===n&&G>U)for(r-=n,n-=e,e=this._c[e];;){if(--n<0)for(;;){if(--r<0)return;this.ES(s>>16,i>>16,h.A.mc,e,_,0,0,v,S,x,L,M,D,a>>8,l>>8),s+=G,i+=U,a+=H,l+=B,e+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(s>>16,t>>16,h.A.mc,e,_,0,0,v,S,x,L,M,D,a>>8,o>>8),s+=G,t+=P,a+=H,o+=F,e+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(r-=n,n-=e,e=this._c[e];;){if(--n<0)for(;;){if(--r<0)return;this.ES(i>>16,s>>16,h.A.mc,e,_,0,0,v,S,x,L,M,D,l>>8,a>>8),s+=G,i+=U,a+=H,l+=B,e+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(t>>16,s>>16,h.A.mc,e,_,0,0,v,S,x,L,M,D,o>>8,a>>8),s+=G,t+=P,a+=H,o+=F,e+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}else{i=t<<=16,l=o<<=16,e<0&&(i-=G*e,t-=P*e,l-=H*e,o-=F*e,e=0),s<<=16,a<<=16,r<0&&(s-=U*r,a-=B*r,r=0);const c=e-this.ma;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,(e===r||G>=P)&&(e!==r||U<=P))for(n-=r,r-=e,e=this._c[e];;){if(--r<0)for(;;){if(--n<0)return;this.ES(t>>16,s>>16,h.A.mc,e,_,0,0,v,S,x,L,M,D,o>>8,a>>8),s+=U,t+=P,a+=B,o+=F,e+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(t>>16,i>>16,h.A.mc,e,_,0,0,v,S,x,L,M,D,o>>8,l>>8),i+=G,t+=P,l+=H,o+=F,e+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(n-=r,r-=e,e=this._c[e];;){if(--r<0)for(;;){if(--n<0)return;this.ES(s>>16,t>>16,h.A.mc,e,_,0,0,v,S,x,L,M,D,a>>8,o>>8),s+=U,t+=P,a+=B,o+=F,e+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(i>>16,t>>16,h.A.mc,e,_,0,0,v,S,x,L,M,D,l>>8,o>>8),i+=G,t+=P,l+=H,o+=F,e+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}}else if(n<=r){if(n<h.A.bottom)if(r>h.A.bottom&&(r=h.A.bottom),e>h.A.bottom&&(e=h.A.bottom),r<e){t=i<<=16,o=l<<=16,n<0&&(t-=P*n,i-=U*n,o-=F*n,l-=B*n,n=0),s<<=16,a<<=16,r<0&&(s-=G*r,a-=H*r,r=0);const c=n-this.ma;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,n!==r&&P<U||n===r&&P>G)for(e-=r,r-=n,n=this._c[n];;){if(--r<0)for(;;){if(--e<0)return;this.ES(t>>16,s>>16,h.A.mc,n,_,0,0,v,S,x,L,M,D,o>>8,a>>8),t+=P,s+=G,o+=F,a+=H,n+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(t>>16,i>>16,h.A.mc,n,_,0,0,v,S,x,L,M,D,o>>8,l>>8),t+=P,i+=U,o+=F,l+=B,n+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(e-=r,r-=n,n=this._c[n];;){if(--r<0)for(;;){if(--e<0)return;this.ES(s>>16,t>>16,h.A.mc,n,_,0,0,v,S,x,L,M,D,a>>8,o>>8),t+=P,s+=G,o+=F,a+=H,n+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(i>>16,t>>16,h.A.mc,n,_,0,0,v,S,x,L,M,D,l>>8,o>>8),t+=P,i+=U,o+=F,l+=B,n+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}else{s=i<<=16,a=l<<=16,n<0&&(s-=P*n,i-=U*n,a-=F*n,l-=B*n,n=0),t<<=16,o<<=16,e<0&&(t-=G*e,o-=H*e,e=0);const c=n-this.ma;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,r-=e,e-=n,n=this._c[n],P<U)for(;;){if(--e<0)for(;;){if(--r<0)return;this.ES(t>>16,i>>16,h.A.mc,n,_,0,0,v,S,x,L,M,D,o>>8,l>>8),t+=G,i+=U,o+=H,l+=B,n+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(s>>16,i>>16,h.A.mc,n,_,0,0,v,S,x,L,M,D,a>>8,l>>8),s+=P,i+=U,a+=F,l+=B,n+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(;;){if(--e<0)for(;;){if(--r<0)return;this.ES(i>>16,t>>16,h.A.mc,n,_,0,0,v,S,x,L,M,D,l>>8,o>>8),t+=G,i+=U,o+=H,l+=B,n+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(i>>16,s>>16,h.A.mc,n,_,0,0,v,S,x,L,M,D,l>>8,a>>8),s+=P,i+=U,a+=F,l+=B,n+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}}else if(r<h.A.bottom)if(e>h.A.bottom&&(e=h.A.bottom),n>h.A.bottom&&(n=h.A.bottom),e<n){i=s<<=16,l=a<<=16,r<0&&(i-=U*r,s-=G*r,l-=B*r,a-=H*r,r=0),t<<=16,o<<=16,e<0&&(t-=P*e,o-=F*e,e=0);const c=r-this.ma;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,n-=e,e-=r,r=this._c[r],U<G)for(;;){if(--e<0)for(;;){if(--n<0)return;this.ES(i>>16,t>>16,h.A.mc,r,_,0,0,v,S,x,L,M,D,l>>8,o>>8),i+=U,t+=P,l+=B,o+=F,r+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(i>>16,s>>16,h.A.mc,r,_,0,0,v,S,x,L,M,D,l>>8,a>>8),i+=U,s+=G,l+=B,a+=H,r+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(;;){if(--e<0)for(;;){if(--n<0)return;this.ES(t>>16,i>>16,h.A.mc,r,_,0,0,v,S,x,L,M,D,o>>8,l>>8),i+=U,t+=P,l+=B,o+=F,r+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(s>>16,i>>16,h.A.mc,r,_,0,0,v,S,x,L,M,D,a>>8,l>>8),i+=U,s+=G,l+=B,a+=H,r+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}else{t=s<<=16,o=a<<=16,r<0&&(t-=U*r,s-=G*r,o-=B*r,a-=H*r,r=0),i<<=16,l<<=16,n<0&&(i-=P*n,l-=F*n,n=0);const c=r-this.ma;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,e-=n,n-=r,r=this._c[r],U<G)for(;;){if(--n<0)for(;;){if(--e<0)return;this.ES(i>>16,s>>16,h.A.mc,r,_,0,0,v,S,x,L,M,D,l>>8,a>>8),i+=P,s+=G,l+=F,a+=H,r+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(t>>16,s>>16,h.A.mc,r,_,0,0,v,S,x,L,M,D,o>>8,a>>8),t+=U,s+=G,o+=B,a+=H,r+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(;;){if(--n<0)for(;;){if(--e<0)return;this.ES(s>>16,i>>16,h.A.mc,r,_,0,0,v,S,x,L,M,D,a>>8,l>>8),i+=P,s+=G,l+=F,a+=H,r+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.ES(s>>16,t>>16,h.A.mc,r,_,0,0,v,S,x,L,M,D,a>>8,o>>8),t+=U,s+=G,o+=B,a+=H,r+=h.A.AC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}};static ES=(t,i,s,e,n,r,o,l,a,c,f,u,d,w,y)=>{if(t>=i)return;let A,p,m,I,_,E,g,C,T;if(this.Jv){if(A=(y-w)/(i-t)|0,i>h.A.Qv&&(i=h.A.Qv),t<0&&(w-=t*A,t=0),t>=i)return;p=i-t>>3,A<<=12}else i-t>7?(p=i-t>>3,A=(y-w)*this.nS[p]>>6):(p=0,A=0);if(w<<=9,e+=t,this.At&&n)if(m=0,I=0,E=t-this.pa,l+=(f>>3)*E,a+=(u>>3)*E,c+=(d>>3)*E,l|=0,a|=0,_=(c|=0)>>12,0!==_&&(o=a/_|0,(r=l/_|0)<0?r=0:r>4032&&(r=4032)),l+=f,a+=u,c+=d,l|=0,a|=0,_=(c|=0)>>12,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>4032&&(m=4032)),g=m-r>>3,C=I-o>>3,r+=w>>3&786432,T=w>>23,this.uS){for(;p-- >0;)s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r=m,o=I,l+=f,a+=u,_=(c+=d)>>12,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>4032&&(m=4032)),g=m-r>>3,C=I-o>>3,r+=(w+=A)>>3&786432,T=w>>23;for(p=i-t&7;p-- >0;)s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C}else{for(;p-- >0;){let t;0!=(t=n[(4032&o)+(r>>6)]>>>T)&&(s[e]=t),e+=1,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e+=1,r=m,o=I,l+=f,a+=u,c+=d,l|=0,a|=0,_=(c|=0)>>12,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>4032&&(m=4032)),g=m-r>>3,C=I-o>>3,r+=(w+=A)>>3&786432,T=w>>23}for(p=i-t&7;p-- >0;){let t;0!=(t=n[(4032&o)+(r>>6)]>>>T)&&(s[e]=t),e++,r+=g,o+=C}}else if(m=0,I=0,E=t-this.pa,l+=(f>>3)*E,a+=(u>>3)*E,c+=(d>>3)*E,l|=0,a|=0,_=(c|=0)>>14,0!==_&&(o=a/_|0,(r=l/_|0)<0?r=0:r>16256&&(r=16256)),l+=f,a+=u,c+=d,l|=0,a|=0,_=(c|=0)>>14,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>16256&&(m=16256)),g=m-r>>3,C=I-o>>3,r+=6291456&w,T=w>>23,this.uS&&n){for(;p-- >0;)s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r=m,o=I,l+=f,a+=u,c+=d,l|=0,a|=0,_=(c|=0)>>14,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>16256&&(m=16256)),g=m-r>>3,C=I-o>>3,r+=6291456&(w+=A),T=w>>23;for(p=i-t&7;p-- >0;)s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C}else{for(;p-- >0&&n;){let t;0!=(t=n[(16256&o)+(r>>7)]>>>T)&&(s[e]=t),e+=1,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,r=m,o=I,l+=f,a+=u,c+=d,l|=0,a|=0,_=(c|=0)>>14,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>16256&&(m=16256)),g=m-r>>3,C=I-o>>3,r+=6291456&(w+=A),T=w>>23}for(p=i-t&7;p-- >0&&n;){let t;0!=(t=n[(16256&o)+(r>>7)]>>>T)&&(s[e]=t),e++,r+=g,o+=C}}};static IS=(t,i,s,e,n)=>{if(this.Jv&&(i>h.A.Qv&&(i=h.A.Qv),t<0&&(t=0)),t>=i)return;e+=t;let r=i-t>>2;if(0===this.alpha)for(;;){if(r--,r<0)for(r=i-t&3;;){if(r--,r<0)return;s[e++]=n}s[e++]=n,s[e++]=n,s[e++]=n,s[e++]=n}const o=this.alpha,l=256-this.alpha;for(n=((16711935&n)*l>>8&16711935)+((65280&n)*l>>8&65280);;){if(r--,r<0)for(r=i-t&3;;){if(r--,r<0)return;s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280)}s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280),s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280),s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280),s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280)}};static E_=t=>{this.aS[t]&&this.lS&&(this.lS[this.cS++]=this.aS[t],this.aS[t]=null)};static _S=t=>{if(this.I_[t]=this.iu++,this.aS[t])return this.aS[t];let i;if(this.cS>0&&this.lS)i=this.lS[--this.cS],this.lS[this.cS]=null;else{let t=0,s=-1;for(let i=0;i<this.oS;i++)this.aS[i]&&(this.I_[i]<t||-1===s)&&(t=this.I_[i],s=i);i=this.aS[s],this.aS[s]=null}this.aS[t]=i;const s=this.__[t],h=this.fS[t];if(!i||!s||!h)return null;if(this.At){this.dS[t]=!1;for(let e=0;e<4096;e++){const n=i[e]=16316671&h[s.mc[e]];0===n&&(this.dS[t]=!0),i[e+4096]=n-(n>>>3)&16316671,i[e+8192]=n-(n>>>2)&16316671,i[e+12288]=n-(n>>>2)-(n>>>3)&16316671}}else{if(64===s.width)for(let t=0;t<128;t++)for(let e=0;e<128;e++)i[e+(t<<7)]=h[s.mc[(e>>1)+(t>>1<<6)]];else for(let t=0;t<16384;t++)i[t]=h[s.mc[t]];this.dS[t]=!1;for(let s=0;s<16384;s++){i[s]&=16316671;const h=i[s];0===h&&(this.dS[t]=!0),i[s+16384]=h-(h>>>3)&16316671,i[s+32768]=h-(h>>>2)&16316671,i[s+49152]=h-(h>>>2)-(h>>>3)&16316671}}return i}}},8665:(t,i,s)=>{s.d(i,{A:()=>f});var h=s(1069),e=s(8950),n=s(4583),r=s(6730),o=s(4474),l=s(3867);class a{zg=0;kv=0;gS=0;CS=-1;TS=-1;OS=-1;bS=-1;vS=-1;LS=-1;RS=-1;SS=-1;MS=-1;kS=0;xS=-1;DS=-1;NS=-1;data=null}class c{x=0;y=0;z=0;w=0}class f extends o.A{static metadata=null;static head=null;static PS=null;static US=null;static BS=null;static GS=null;static HS=null;static WS=null;static YS=null;static VS=null;static KS=null;static XS=null;static zS=null;static jS=null;static axis=null;static ZS=new l.vs(4096,!1);static qS=new l.vs(4096,!1);static $S=new Int32Array(4096);static JS=new Int32Array(4096);static QS=new Int32Array(4096);static tM=new Int32Array(4096);static iM=new Int32Array(4096);static sM=new Int32Array(4096);static hM=new Int32Array(1500);static eM=new l.er(1500,512);static nM=new Int32Array(12);static rM=new l.er(12,2e3);static oM=new Int32Array(2e3);static lM=new Int32Array(2e3);static aM=new Int32Array(12);static cM=new Int32Array(10);static fM=new Int32Array(10);static uM=new Int32Array(10);static xn=0;static dM=0;static Dn=0;static su=!1;static Kl=0;static Xl=0;static hu=0;static Tm=new Int32Array(1e3);static wM=!1;static Ac(t){try{f.head=new h.A(t.read('ob_head.dat')),f.PS=new h.A(t.read('ob_face1.dat')),f.US=new h.A(t.read('ob_face2.dat')),f.BS=new h.A(t.read('ob_face3.dat')),f.GS=new h.A(t.read('ob_face4.dat')),f.HS=new h.A(t.read('ob_face5.dat')),f.WS=new h.A(t.read('ob_point1.dat')),f.YS=new h.A(t.read('ob_point2.dat')),f.VS=new h.A(t.read('ob_point3.dat')),f.KS=new h.A(t.read('ob_point4.dat')),f.XS=new h.A(t.read('ob_point5.dat')),f.zS=new h.A(t.read('ob_vertex1.dat')),f.jS=new h.A(t.read('ob_vertex2.dat')),f.axis=new h.A(t.read('ob_axis.dat')),f.head.ft=0,f.WS.ft=0,f.YS.ft=0,f.VS.ft=0,f.KS.ft=0,f.zS.ft=0,f.jS.ft=0;const i=f.head.ct;f.metadata=new l.vs(i+100,null);let s=0,e=0,n=0,r=0,o=0,c=0,u=0;for(let t=0;t<i;t++){const t=f.head.ct,i=new a;i.zg=f.head.ct,i.kv=f.head.ct,i.gS=f.head.cA,i.CS=f.WS.ft,i.TS=f.YS.ft,i.OS=f.VS.ft,i.bS=f.KS.ft,i.LS=f.zS.ft,i.RS=f.jS.ft;const h=f.head.cA,l=f.head.cA,d=f.head.cA,w=f.head.cA,y=f.head.cA;for(let t=0;t<i.zg;t++){const t=f.WS.cA;1&t&&f.YS.WR,2&t&&f.VS.WR,4&t&&f.KS.WR}for(let t=0;t<i.kv;t++){1===f.jS.cA&&(f.zS.WR,f.zS.WR),f.zS.WR}i.SS=n,n+=2*i.kv,1===h&&(i.MS=r,r+=i.kv),255===l?(i.kS=o,o+=i.kv):i.kS=-l-1,1===d&&(i.xS=c,c+=i.kv),1===w&&(i.DS=u,u+=i.kv),1===y&&(i.vS=e,e+=i.zg),i.NS=s,s+=i.gS,f.metadata[t]=i}}catch(t){console.log('Error loading model index'),console.error(t)}}static yM(t,i){if(null===f.metadata&&(f.metadata=[]),null===t){const t=new a;return t.zg=0,t.kv=0,t.gS=0,void(f.metadata[i]=t)}const s=new h.A(t);s.ft=s.length-18;const e=new a;e.data=t,e.zg=s.ct,e.kv=s.ct,e.gS=s.cA,f.metadata[i]=e;const n=s.cA,r=s.cA,o=s.cA,l=s.cA,c=s.cA,u=s.ct,d=s.ct,w=s.ct,y=s.ct;let A=0;e.CS=A,A+=e.zg,e.RS=A,A+=e.kv,e.kS=A,255===r?A+=e.kv:e.kS=-r-1,e.DS=A,1===l?A+=e.kv:e.DS=-1,e.MS=A,1===n?A+=e.kv:e.MS=-1,e.vS=A,1===c?A+=e.zg:e.vS=-1,e.xS=A,1===o?A+=e.kv:e.xS=-1,e.LS=A,A+=y,e.SS=A,A+=2*e.kv,e.NS=A,A+=6*e.gS,e.TS=A,A+=u,e.OS=A,A+=d,e.bS=A,A+=w}static Bo(){f.metadata=null,f.head=null,f.PS=null,f.US=null,f.BS=null,f.GS=null,f.HS=null,f.WS=null,f.YS=null,f.VS=null,f.KS=null,f.XS=null,f.zS=null,f.jS=null,f.axis=null,f.ZS=null,f.qS=null,f.$S=null,f.JS=null,f.QS=null,f.tM=null,f.iM=null,f.sM=null,f.hM=null,f.eM=null,f.nM=null,f.rM=null,f.oM=null,f.lM=null,f.aM=null}static AM(t,i,s){return 2&~s?((i=i*(127&t)>>7)<2?i=2:i>126&&(i=126),(65408&t)+i):(i<0?i=0:i>127&&(i=127),127-i)}static Xg=(t,i,s)=>{const h=t.zg,e=t.kv,n=t.gS;let r,o,a,u,d;if(i){r=new Int32Array(h);for(let i=0;i<h;i++)r[i]=t.qg[i]}else r=t.qg;let w=null,y=null;if(s){o=new Int32Array(e),a=new Int32Array(e),u=new Int32Array(e);for(let i=0;i<e;i++)t.pM&&(o[i]=t.pM[i]),t.mM&&(a[i]=t.mM[i]),t.IM&&(u[i]=t.IM[i]);if(d=new Int32Array(e),t.Mv)for(let i=0;i<e;i++)d[i]=t.Mv[i];else for(let t=0;t<e;t++)d[t]=0;w=new l.vs(h,null);for(let i=0;i<h;i++){const s=w[i]=new c;if(t.Ov){const h=t.Ov[i];h&&(s.x=h.x,s.y=h.y,s.z=h.z,s.w=h.w)}}y=t.Sv}else o=t.pM,a=t.mM,u=t.IM,d=t.Mv;return new f({zg:h,jg:t.jg,qg:r,Zg:t.Zg,kv:e,xv:t.xv,Dv:t.Dv,Nv:t.Nv,pM:o,mM:a,IM:u,Mv:d,_M:t._M,EM:t.EM,eg:t.eg,priority:t.priority,gS:n,gM:t.gM,CM:t.CM,TM:t.TM,CO:t.CO,TO:t.TO,OO:t.OO,bO:t.bO,wO:t.wO,vO:t.vO,hC:t.hC,OM:t.OM,bM:t.bM,Ov:w,Sv:y})};static ng=(t,i,s,h)=>{const e=t.zg,n=t.kv,r=t.gS;let o,l,a,c,u;if(h)o=t.jg,l=t.qg,a=t.Zg;else{o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e);for(let i=0;i<e;i++)o[i]=t.jg[i],l[i]=t.qg[i],a[i]=t.Zg[i]}if(i)c=t.eg;else{c=new Int32Array(n);for(let i=0;i<n;i++)t.eg&&(c[i]=t.eg[i])}if(s)u=t.EM;else if(u=new Int32Array(n),t.EM)for(let i=0;i<n;i++)u[i]=t.EM[i];else for(let t=0;t<n;t++)u[t]=0;return new f({zg:e,jg:o,qg:l,Zg:a,kv:n,xv:t.xv,Dv:t.Dv,Nv:t.Nv,pM:null,mM:null,IM:null,Mv:t.Mv,_M:t._M,EM:u,eg:c,priority:t.priority,gS:r,gM:t.gM,CM:t.CM,TM:t.TM,vM:t.vM,LM:t.LM})};static oC=(t,i)=>{const s=t.zg,h=t.kv,e=t.gS,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s);for(let i=0;i<s;i++)n[i]=t.jg[i],r[i]=t.qg[i],o[i]=t.Zg[i];let l;if(i)l=t.EM;else if(l=new Int32Array(h),t.EM)for(let i=0;i<h;i++)l[i]=t.EM[i];else for(let t=0;t<h;t++)l[t]=0;return new f({zg:s,jg:n,qg:r,Zg:o,kv:h,xv:t.xv,Dv:t.Dv,Nv:t.Nv,pM:t.pM,mM:t.mM,IM:t.IM,Mv:t.Mv,_M:t._M,EM:l,eg:t.eg,priority:t.priority,gS:e,gM:t.gM,CM:t.CM,TM:t.TM,tC:t.tC,Qg:t.Qg})};static nL=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.zg,o+=i.kv,l+=i.gS,s||=null!==i.Mv,i._M?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.EM,n||=null!==i.eg)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(o),y=new Int32Array(o),A=new Int32Array(o),p=new Int32Array(o),m=new Int32Array(o),I=new Int32Array(o),_=new Int32Array(l),E=new Int32Array(l),g=new Int32Array(l);let C=null;s&&(C=new Int32Array(o));let T=null;h&&(T=new Int32Array(o));let O=null;e&&(O=new Int32Array(o));let b=null;n&&(b=new Int32Array(o)),r=0,o=0,l=0;for(let a=0;a<i;a++){const i=t[a];if(i){const t=r;for(let t=0;t<i.zg;t++)c[r]=i.jg[t],u[r]=i.qg[t],d[r]=i.Zg[t],r++;for(let r=0;r<i.kv;r++)w[o]=i.xv[r]+t,y[o]=i.Dv[r]+t,A[o]=i.Nv[r]+t,i.pM&&(p[o]=i.pM[r]),i.mM&&(m[o]=i.mM[r]),i.IM&&(I[o]=i.IM[r]),s&&(i.Mv?C&&(C[o]=i.Mv[r]):C&&(C[o]=0)),h&&(i._M?T&&(T[o]=i._M[r]):T&&(T[o]=i.priority)),e&&(i.EM?O&&(O[o]=i.EM[r]):O&&(O[o]=0)),n&&i.eg&&b&&(b[o]=i.eg[r]),o++;for(let s=0;s<i.gS;s++)_[l]=i.gM[s]+t,E[l]=i.CM[s]+t,g[l]=i.TM[s]+t,l++}}const v=new f({zg:r,jg:c,qg:u,Zg:d,kv:o,xv:w,Dv:y,Nv:A,pM:p,mM:m,IM:I,Mv:C,_M:T,EM:O,eg:b,priority:a,gS:l,gM:_,CM:E,TM:g});return v.aC(),v};static Ua=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.zg,o+=i.kv,l+=i.gS,s||=null!==i.Mv,i._M?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.EM,n||=null!==i.LM)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(r),y=new Int32Array(o),A=new Int32Array(o),p=new Int32Array(o),m=new Int32Array(l),I=new Int32Array(l),_=new Int32Array(l);let E=null;s&&(E=new Int32Array(o));let g=null;h&&(g=new Int32Array(o));let C=null;e&&(C=new Int32Array(o));let T=null;n&&(T=new Int32Array(o));const O=new Int32Array(o);r=0,o=0,l=0;const b=(t,i,s,h,e,n,r)=>{let o=-1;const l=t.jg[i],a=t.qg[i],c=t.Zg[i];for(let t=0;t<r;t++)if(l===s[t]&&a===h[t]&&c===e[t]){o=t;break}return-1===o&&(s[r]=l,h[r]=a,e[r]=c,n&&t.vM&&(n[r]=t.vM[i]),o=r++),{vertex:o,zg:r}};for(let a=0;a<i;a++){const i=t[a];if(i){for(let t=0;t<i.kv;t++){s&&(i.Mv?E&&(E[o]=i.Mv[t]):E&&(E[o]=0)),h&&(i._M?g&&(g[o]=i._M[t]):g&&(g[o]=i.priority)),e&&(i.EM?C&&(C[o]=i.EM[t]):C&&(C[o]=0)),n&&i.LM&&T&&(T[o]=i.LM[t]),i.eg&&(O[o]=i.eg[t]);const l=b(i,i.xv[t],c,u,d,w,r);r=l.zg;const a=b(i,i.Dv[t],c,u,d,w,r);r=a.zg;const f=b(i,i.Nv[t],c,u,d,w,r);r=f.zg,y[o]=l.vertex,A[o]=a.vertex,p[o]=f.vertex,o++}for(let t=0;t<i.gS;t++){const s=b(i,i.gM[t],c,u,d,w,r);r=s.zg;const h=b(i,i.CM[t],c,u,d,w,r);r=h.zg;const e=b(i,i.TM[t],c,u,d,w,r);r=e.zg,m[l]=s.vertex,I[l]=h.vertex,_[l]=e.vertex,l++}}}return new f({zg:r,jg:c,qg:u,Zg:d,kv:o,xv:y,Dv:A,Nv:p,pM:null,mM:null,IM:null,Mv:E,_M:g,EM:C,eg:O,priority:a,gS:l,gM:m,CM:I,TM:_,vM:w,LM:T})};static model=t=>{if(!f.metadata)throw new Error('cant loading model metadata!!!!!');const i=f.metadata[t];if(!i)throw console.log(`Error model:${t} not found!`),new Error('cant loading model metadata!!!!!');if(!(f.head&&f.PS&&f.US&&f.BS&&f.GS&&f.HS&&f.WS&&f.YS&&f.VS&&f.KS&&f.XS&&f.zS&&f.jS&&f.axis))throw new Error('cant loading model!!!!!');const s=i.zg,h=i.kv,e=i.gS,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s),l=new Int32Array(h),a=new Int32Array(h),c=new Int32Array(h),u=new Int32Array(e),d=new Int32Array(e),w=new Int32Array(e);let y=null;i.vS>=0&&(y=new Int32Array(s));let A=null;i.MS>=0&&(A=new Int32Array(h));let p=null,m=0;i.kS>=0?p=new Int32Array(h):m=-i.kS-1;let I=null;i.xS>=0&&(I=new Int32Array(h));let _=null;i.DS>=0&&(_=new Int32Array(h));const E=new Int32Array(h);f.WS.ft=i.CS,f.YS.ft=i.TS,f.VS.ft=i.OS,f.KS.ft=i.bS,f.XS.ft=i.vS;let g,C,T,O=0,b=0,v=0;for(let t=0;t<s;t++){const i=f.WS.cA;g=0,1&i&&(g=f.YS.WR),C=0,2&i&&(C=f.VS.WR),T=0,4&i&&(T=f.KS.WR),n[t]=O+g,r[t]=b+C,o[t]=v+T,O=n[t],b=r[t],v=o[t],y&&(y[t]=f.XS.cA)}f.PS.ft=i.SS,f.US.ft=i.MS,f.BS.ft=i.kS,f.GS.ft=i.xS,f.HS.ft=i.DS;for(let t=0;t<h;t++)E[t]=f.PS.ct,A&&(A[t]=f.US.cA),p&&(p[t]=f.BS.cA),I&&(I[t]=f.GS.cA),_&&(_[t]=f.HS.cA);f.zS.ft=i.LS,f.jS.ft=i.RS,g=0,C=0,T=0;let L=0;for(let t=0;t<h;t++){const i=f.jS.cA;if(1===i)g=f.zS.WR+L,L=g,C=f.zS.WR+L,L=C,T=f.zS.WR+L,L=T;else if(2===i)C=T,T=f.zS.WR+L,L=T;else if(3===i)g=T,T=f.zS.WR+L,L=T;else if(4===i){const t=g;g=C,C=t,T=f.zS.WR+L,L=T}l[t]=g,a[t]=C,c[t]=T}f.axis.ft=6*i.NS;for(let t=0;t<e;t++)u[t]=f.axis.ct,d[t]=f.axis.ct,w[t]=f.axis.ct;return new f({zg:s,jg:n,qg:r,Zg:o,kv:h,xv:l,Dv:a,Nv:c,pM:null,mM:null,IM:null,Mv:A,_M:p,EM:I,eg:E,priority:m,gS:e,gM:u,CM:d,TM:w,vM:y,LM:_})};static RM=(t,i)=>{if(!f.metadata||!f.metadata[i])throw new Error('No model metadata');const s=f.metadata[i];if(s.data=t,!s.data.length)throw new Error('No model data');const e=s.zg,n=s.kv,r=s.gS,o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e),c=new Int32Array(n),u=new Int32Array(n),d=new Int32Array(n),w=new Int32Array(r),y=new Int32Array(r),A=new Int32Array(r);let p=null;s.vS>=0&&(p=new Int32Array(e));let m=null;s.MS>=0&&(m=new Int32Array(n));let I=null,_=0;s.kS>=0?I=new Int32Array(n):_=-s.kS-1;let E=null;s.xS>=0&&(E=new Int32Array(n));let g=null;s.DS>=0&&(g=new Int32Array(n));const C=new Int32Array(n),T=new h.A(s.data);T.ft=s.CS;const O=new h.A(s.data);O.ft=s.TS;const b=new h.A(s.data);b.ft=s.OS;const v=new h.A(s.data);v.ft=s.bS;const L=new h.A(s.data);L.ft=s.vS;let R,S,M,k=0,x=0,D=0;for(let t=0;t<e;t++){const i=T.cA;R=0,1&i&&(R=O.WR),S=0,2&i&&(S=b.WR),M=0,4&i&&(M=v.WR),o[t]=k+R,l[t]=x+S,a[t]=D+M,k=o[t],x=l[t],D=a[t],p&&(p[t]=L.cA)}const N=new h.A(s.data);N.ft=s.SS;const P=new h.A(s.data);P.ft=s.MS;const F=new h.A(s.data);F.ft=s.kS;const U=new h.A(s.data);U.ft=s.xS;const B=new h.A(s.data);B.ft=s.DS;for(let t=0;t<n;t++)C[t]=N.ct,m&&(m[t]=P.cA),I&&(I[t]=F.cA),E&&(E[t]=U.cA),g&&(g[t]=B.cA);const G=new h.A(s.data);G.ft=s.LS;const H=new h.A(s.data);H.ft=s.RS,R=0,S=0,M=0;let W=0;for(let t=0;t<n;t++){const i=H.cA;if(1===i)R=G.WR+W,W=R,S=G.WR+W,W=S,M=G.WR+W,W=M;else if(2===i)S=M,M=G.WR+W,W=M;else if(3===i)R=M,M=G.WR+W,W=M;else if(4===i){const t=R;R=S,S=t,M=G.WR+W,W=M}c[t]=R,u[t]=S,d[t]=M}const Y=new h.A(s.data);Y.ft=s.NS;for(let t=0;t<r;t++)w[t]=Y.ct,y[t]=Y.ct,A[t]=Y.ct;return new f({zg:e,jg:o,qg:l,Zg:a,kv:n,xv:c,Dv:u,Nv:d,pM:null,mM:null,IM:null,Mv:m,_M:I,EM:E,eg:C,priority:_,gS:r,gM:w,CM:y,TM:A,vM:p,LM:g})};zg;jg;qg;Zg;kv;xv;Dv;Nv;pM;mM;IM;Mv;_M;EM;eg;priority;gS;gM;CM;TM;CO;TO;OO;bO;wO;vO;hC;OM;bM;vM;LM;tC;Qg;Ov;Sv;sC=0;cC=!1;SM=-1;MM=-1;constructor(t){super(),this.zg=t.zg,this.jg=t.jg,this.qg=t.qg,this.Zg=t.Zg,this.kv=t.kv,this.xv=t.xv,this.Dv=t.Dv,this.Nv=t.Nv,this.pM=t.pM,this.mM=t.mM,this.IM=t.IM,this.Mv=t.Mv,this._M=t._M,this.EM=t.EM,this.eg=t.eg,this.priority=t.priority,this.gS=t.gS,this.gM=t.gM,this.CM=t.CM,this.TM=t.TM,this.CO=t.CO??0,this.TO=t.TO??0,this.OO=t.OO??0,this.bO=t.bO??0,this.wO=t.wO??0,this.vO=t.vO??0,this.hC=t.hC??0,this.OM=t.OM??0,this.bM=t.bM??0,this.vM=t.vM??null,this.LM=t.LM??null,this.tC=t.tC??null,this.Qg=t.Qg??null,this.Ov=t.Ov??null,this.Sv=t.Sv??null}aC(){this.hC=0,this.wO=0,this.vO=0;for(let t=0;t<this.zg;t++){const i=this.jg[t],s=this.qg[t],h=this.Zg[t];-s>this.hC&&(this.hC=-s),s>this.vO&&(this.vO=s);const e=i*i+h*h;e>this.wO&&(this.wO=e)}this.wO=Math.sqrt(this.wO)+.99|0,this.bM=Math.sqrt(this.wO*this.wO+this.hC*this.hC)+.99|0,this.OM=this.bM+(Math.sqrt(this.wO*this.wO+this.vO*this.vO)+.99|0)}$g(){this.hC=0,this.vO=0;for(let t=0;t<this.zg;t++){const i=this.qg[t];-i>this.hC&&(this.hC=-i),i>this.vO&&(this.vO=i)}this.bM=Math.sqrt(this.wO*this.wO+this.hC*this.hC)+.99|0,this.OM=this.bM+(Math.sqrt(this.wO*this.wO+this.vO*this.vO)+.99|0)}Ya(){if(this.vM){const t=new Int32Array(256);let i=0;for(let s=0;s<this.zg;s++){const h=this.vM[s];t[h]++,h>i&&(i=h)}this.tC=new l.vs(i+1,null);for(let s=0;s<=i;s++)this.tC[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.zg;){const i=this.vM[s],h=this.tC[i];h&&(h[t[i]++]=s++)}this.vM=null}if(this.LM){const t=new Int32Array(256);let i=0;for(let s=0;s<this.kv;s++){const h=this.LM[s];t[h]++,h>i&&(i=h)}this.Qg=new l.vs(i+1,null);for(let s=0;s<=i;s++)this.Qg[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.kv;){const i=this.LM[s],h=this.Qg[i];h&&(h[t[i]++]=s++)}this.LM=null}}lC(t,i,s){if(-1!==t)if(s&&-1!==i){const h=r.A.Wo[t],e=r.A.Wo[i],n=h.HR;f.xn=0,f.dM=0,f.Dn=0;let o=0,l=s[o++];for(let t=0;t<h.length;t++){if(!h.YR)continue;const i=h.YR[t];for(;i>l;)l=s[o++];n&&n.types&&h.x&&h.y&&h.z&&n.labels&&(i!==l||0===n.types[i])&&this.kM(h.x[t],h.y[t],h.z[t],n.labels[i],n.types[i])}f.xn=0,f.dM=0,f.Dn=0,o=0,l=s[o++];for(let t=0;t<e.length;t++){if(!e.YR)continue;const i=e.YR[t];for(;i>l;)l=s[o++];n&&n.types&&e.x&&e.y&&e.z&&n.labels&&(i===l||0===n.types[i])&&this.kM(e.x[t],e.y[t],e.z[t],n.labels[i],n.types[i])}}else this.Va(t)}Va(t){if(!this.tC||-1===t||!r.A.Wo[t])return;const i=r.A.Wo[t],s=i.HR;f.xn=0,f.dM=0,f.Dn=0;for(let t=0;t<i.length;t++){if(!(i.YR&&i.x&&i.y&&i.z&&s&&s.labels&&s.types))continue;const h=i.YR[t];this.kM(i.x[t],i.y[t],i.z[t],s.labels[h],s.types[h])}}iC(){for(let t=0;t<this.zg;t++){const i=this.jg[t];this.jg[t]=this.Zg[t],this.Zg[t]=-i}}TR(t){const i=n.A.sin[t],s=n.A.cos[t];for(let t=0;t<this.zg;t++){const h=this.qg[t]*s-this.Zg[t]*i>>16;this.Zg[t]=this.qg[t]*i+this.Zg[t]*s>>16,this.qg[t]=h}}translate(t,i,s){for(let h=0;h<this.zg;h++)this.jg[h]+=i,this.qg[h]+=t,this.Zg[h]+=s}Ba(t,i){if(this.eg)for(let s=0;s<this.kv;s++)this.eg[s]===t&&(this.eg[s]=i)}Jg(){for(let t=0;t<this.zg;t++)this.Zg[t]=-this.Zg[t];for(let t=0;t<this.kv;t++){const i=this.xv[t];this.xv[t]=this.Nv[t],this.Nv[t]=i}}scale(t,i,s){for(let h=0;h<this.zg;h++)this.jg[h]=this.jg[h]*t/128|0,this.qg[h]=this.qg[h]*i/128|0,this.Zg[h]=this.Zg[h]*s/128|0}Ka(t,i,s,h,e,n){const r=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;if(this.pM&&this.mM&&this.IM||(this.pM=new Int32Array(this.kv),this.mM=new Int32Array(this.kv),this.IM=new Int32Array(this.kv)),!this.Ov){this.Ov=new l.vs(this.zg,null);for(let t=0;t<this.zg;t++)this.Ov[t]=new c}for(let i=0;i<this.kv;i++){const n=this.xv[i],o=this.Dv[i],l=this.Nv[i],a=this.jg[o]-this.jg[n],c=this.qg[o]-this.qg[n],u=this.Zg[o]-this.Zg[n],d=this.jg[l]-this.jg[n],w=this.qg[l]-this.qg[n],y=this.Zg[l]-this.Zg[n];let A=c*y-w*u,p=u*d-y*a,m=a*w-d*c;for(;A>8192||p>8192||m>8192||A<-8192||p<-8192||m<-8192;)A>>=1,p>>=1,m>>=1;let I=0|Math.sqrt(A*A+p*p+m*m);if(I<=0&&(I=1),A=256*A/I|0,p=256*p/I|0,m=256*m/I|0,this.Mv&&1&this.Mv[i]){const n=t+((s*A+h*p+e*m)/(r+(r/2|0))|0);this.eg&&(this.pM[i]=f.AM(this.eg[i],n,this.Mv[i]))}else{let t=this.Ov[n];t&&(t.x+=A,t.y+=p,t.z+=m,t.w++),t=this.Ov[o],t&&(t.x+=A,t.y+=p,t.z+=m,t.w++),t=this.Ov[l],t&&(t.x+=A,t.y+=p,t.z+=m,t.w++)}}if(n)this.Lv(t,r,s,h,e);else{this.Sv=new l.vs(this.zg,null);for(let t=0;t<this.zg;t++){const i=this.Ov[t],s=new c;i&&(s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w),this.Sv[t]=s}}n?this.aC():this.xM()}Lv(t,i,s,h,e){for(let n=0;n<this.kv;n++){const r=this.xv[n],o=this.Dv[n],l=this.Nv[n];if(!this.Mv&&this.eg&&this.Ov&&this.pM&&this.mM&&this.IM){const a=this.eg[n],c=this.Ov[r];c&&(this.pM[n]=f.AM(a,t+((s*c.x+h*c.y+e*c.z)/(i*c.w)|0),0));const u=this.Ov[o];u&&(this.mM[n]=f.AM(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),0));const d=this.Ov[l];d&&(this.IM[n]=f.AM(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),0))}else if(this.Mv&&!(1&this.Mv[n])&&this.eg&&this.Ov&&this.pM&&this.mM&&this.IM){const a=this.eg[n],c=this.Mv[n],u=this.Ov[r];u&&(this.pM[n]=f.AM(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),c));const d=this.Ov[o];d&&(this.mM[n]=f.AM(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),c));const w=this.Ov[l];w&&(this.IM[n]=f.AM(a,t+((s*w.x+h*w.y+e*w.z)/(i*w.w)|0),c))}}if(this.Ov=null,this.Sv=null,this.vM=null,this.LM=null,this.Mv)for(let t=0;t<this.kv;t++)if(!(2&~this.Mv[t]))return;this.eg=null}ga(t,i,s,h,e,r,o){const l=n.A.sin[t],a=n.A.cos[t],c=n.A.sin[i],u=n.A.cos[i],d=n.A.sin[s],w=n.A.cos[s],y=n.A.sin[h],A=n.A.cos[h],p=r*y+o*A>>16;for(let h=0;h<this.zg;h++){let m,I=this.jg[h],_=this.qg[h],E=this.Zg[h];0!==s&&(m=_*d+I*w>>16,_=_*w-I*d>>16,I=m),0!==t&&(m=_*a-E*l>>16,E=_*l+E*a>>16,_=m),0!==i&&(m=E*c+I*u>>16,E=E*u-I*c>>16,I=m),I+=e,_+=r,E+=o,m=_*A-E*y>>16,E=_*y+E*A>>16,_=m,f.$S&&f.JS&&f.QS&&(f.QS[h]=E-p,f.$S[h]=n.A.pa+((I<<9)/E|0),f.JS[h]=n.A.ma+((_<<9)/E|0)),this.gS>0&&f.tM&&f.iM&&f.sM&&(f.tM[h]=I,f.iM[h]=_,f.sM[h]=E)}try{this.DM(!1,!1,0)}catch(t){}}draw(t,i,s,h,r,o,l,a,c){const u=a*r-o*h>>16,d=l*i+u*s>>16,w=this.wO*s>>16,y=d+w;if(y<=50||d>=3500)return;const A=a*h+o*r>>16;let p=A-this.wO<<9;if((p/y|0)>=e.A.tS)return;let m=A+this.wO<<9;if((m/y|0)<=-e.A.tS)return;const I=l*s-u*i>>16,_=this.wO*i>>16;let E=I+_<<9;if((E/y|0)<=-e.A.iS)return;let g=I-(_+(this.hC*s>>16))<<9;if((g/y|0)>=e.A.iS)return;let C=d-(w+(this.hC*i>>16))<=50,T=!1;if(c>0&&f.su){let t=d-w;t<=50&&(t=50),A>0?(p=p/y|0,m=m/t|0):(m=m/y|0,p=p/t|0),I>0?(g=g/y|0,E=E/t|0):(E=E/y|0,g=g/t|0);const i=f.Kl-n.A.pa,s=f.Xl-n.A.ma;i>p&&i<m&&s>g&&s<E&&(this.cC?f.Tm[f.hu++]=c:T=!0)}const O=n.A.pa,b=n.A.ma;let v=0,L=0;0!==t&&(v=n.A.sin[t],L=n.A.cos[t]);for(let e=0;e<this.zg;e++){let n,c=this.jg[e],u=this.qg[e],w=this.Zg[e];0!==t&&(n=w*v+c*L>>16,w=w*L-c*v>>16,c=n),c+=o,u+=l,w+=a,n=w*h+c*r>>16,w=w*r-c*h>>16,c=n,n=u*s-w*i>>16,w=u*i+w*s>>16,u=n,f.QS&&(f.QS[e]=w-d),w>=50&&f.$S&&f.JS?(f.$S[e]=O+((c<<9)/w|0),f.JS[e]=b+((u<<9)/w|0)):f.$S&&(f.$S[e]=-5e3,C=!0),(C||this.gS>0)&&f.tM&&f.iM&&f.sM&&(f.tM[e]=c,f.iM[e]=u,f.sM[e]=w)}try{this.DM(C,T,c)}catch(t){}}DM(t,i,s,h=!1){f.wM&&(this.SM=-1,this.MM=-1);for(let t=0;t<this.OM;t++)f.hM&&(f.hM[t]=0);for(let h=0;h<this.kv;h++)if((!this.Mv||-1!==this.Mv[h])&&f.$S&&f.JS&&f.QS&&f.eM&&f.hM){const n=this.xv[h],r=this.Dv[h],o=this.Nv[h],l=f.$S[n],a=f.$S[r],c=f.$S[o],u=f.JS[n],d=f.JS[r],w=f.JS[o],y=f.QS[n],A=f.QS[r],p=f.QS[o];if(!t||-5e3!==l&&-5e3!==a&&-5e3!==c){i&&this.NM(f.Kl,f.Xl,u,d,w,l,a,c)&&(f.Tm[f.hu++]=s,i=!1);if((l-a)*(w-d)-(u-d)*(c-a)<=0)continue;if(f.qS&&(f.qS[h]=!1),f.ZS&&(f.ZS[h]=l<0||a<0||c<0||l>e.A.Qv||a>e.A.Qv||c>e.A.Qv),f.eM&&f.hM){const t=((y+A+p)/3|0)+this.bM;f.eM[t][f.hM[t]++]=h,f.wM&&this.NM(f.Kl,f.Xl,u,d,w,l,a,c)&&this.MM<t&&(this.SM=h,this.MM=t)}}else if(f.qS&&(f.qS[h]=!0),f.eM&&f.hM){const t=((y+A+p)/3|0)+this.bM;f.eM[t][f.hM[t]++]=h}}if(!this._M&&f.hM){for(let t=this.OM-1;t>=0;t--){const i=f.hM[t];if(!(i<=0)&&f.eM){const s=f.eM[t];for(let t=0;t<i;t++)this.PM(s[t],h)}}return}for(let t=0;t<12;t++)f.nM&&f.aM&&(f.nM[t]=0,f.aM[t]=0);if(f.hM)for(let t=this.OM-1;t>=0;t--){const i=f.hM[t];if(i>0&&f.eM){const s=f.eM[t];for(let h=0;h<i;h++)if(this._M&&f.nM&&f.rM){const i=s[h],e=this._M[i],n=f.nM[e]++;f.rM[e][n]=i,e<10&&f.aM?f.aM[e]+=t:10===e&&f.oM?f.oM[n]=t:f.lM&&(f.lM[n]=t)}}}let n=0;f.nM&&f.aM&&(f.nM[1]>0||f.nM[2]>0)&&(n=(f.aM[1]+f.aM[2])/(f.nM[1]+f.nM[2])|0);let r=0;f.nM&&f.aM&&(f.nM[3]>0||f.nM[4]>0)&&(r=(f.aM[3]+f.aM[4])/(f.nM[3]+f.nM[4])|0);let o=0;if(f.nM&&f.aM&&(f.nM[6]>0||f.nM[8]>0)&&(o=(f.aM[6]+f.aM[8])/(f.nM[6]+f.nM[8])|0),f.nM&&f.rM){let t,i=0,s=f.nM[10],e=f.rM[10],l=f.oM;i===s&&(i=0,s=f.nM[11],e=f.rM[11],l=f.lM),t=i<s&&l?l[i]:-1e3;for(let a=0;a<10;a++){for(;0===a&&t>n;)try{this.PM(e[i++],h),i===s&&e!==f.rM[11]&&(i=0,s=f.nM[11],e=f.rM[11],l=f.lM),t=i<s&&l?l[i]:-1e3}catch(t){}for(;3===a&&t>r;)try{this.PM(e[i++],h),i===s&&e!==f.rM[11]&&(i=0,s=f.nM[11],e=f.rM[11],l=f.lM),t=i<s&&l?l[i]:-1e3}catch(t){}for(;5===a&&t>o;)try{this.PM(e[i++],h),i===s&&e!==f.rM[11]&&(i=0,s=f.nM[11],e=f.rM[11],l=f.lM),t=i<s&&l?l[i]:-1e3}catch(t){}const c=f.nM[a],u=f.rM[a];for(let t=0;t<c;t++)this.PM(u[t],h)}for(;-1e3!==t;)try{this.PM(e[i++],h),i===s&&e!==f.rM[11]&&(i=0,e=f.rM[11],s=f.nM[11],l=f.lM),t=i<s&&l?l[i]:-1e3}catch(t){}}}PM(t,i=!1){if(f.qS&&f.qS[t])return void this.FM(t,i);const s=this.xv[t],h=this.Dv[t],e=this.Nv[t];let r;if(f.ZS&&(n.A.Jv=f.ZS[t]),this.EM?n.A.alpha=this.EM[t]:n.A.alpha=0,r=this.Mv?3&this.Mv[t]:0,i&&f.$S&&f.JS&&this.pM&&this.mM&&this.IM)n.A.od(f.$S[s],f.JS[s],f.$S[h],f.JS[h],n.A.palette[this.pM[t]]),n.A.od(f.$S[h],f.JS[h],f.$S[e],f.JS[e],n.A.palette[this.mM[t]]),n.A.od(f.$S[e],f.JS[e],f.$S[s],f.JS[s],n.A.palette[this.IM[t]]);else if(0===r&&this.pM&&this.mM&&this.IM&&f.$S&&f.JS)n.A.iL(f.$S[s],f.$S[h],f.$S[e],f.JS[s],f.JS[h],f.JS[e],this.pM[t],this.mM[t],this.IM[t]);else if(1===r&&this.pM&&f.$S&&f.JS)n.A.mS(f.$S[s],f.$S[h],f.$S[e],f.JS[s],f.JS[h],f.JS[e],n.A.palette[this.pM[t]]);else if(2===r&&this.Mv&&this.eg&&this.pM&&this.mM&&this.IM&&f.$S&&f.JS&&f.tM&&f.iM&&f.sM){const i=this.Mv[t]>>2,r=this.gM[i],o=this.CM[i],l=this.TM[i];n.A.hL(f.$S[s],f.$S[h],f.$S[e],f.JS[s],f.JS[h],f.JS[e],this.pM[t],this.mM[t],this.IM[t],f.tM[r],f.iM[r],f.sM[r],f.tM[o],f.tM[l],f.iM[o],f.iM[l],f.sM[o],f.sM[l],this.eg[t])}else if(3===r&&this.Mv&&this.eg&&this.pM&&f.$S&&f.JS&&f.tM&&f.iM&&f.sM){const i=this.Mv[t]>>2,r=this.gM[i],o=this.CM[i],l=this.TM[i];n.A.hL(f.$S[s],f.$S[h],f.$S[e],f.JS[s],f.JS[h],f.JS[e],this.pM[t],this.pM[t],this.pM[t],f.tM[r],f.iM[r],f.sM[r],f.tM[o],f.tM[l],f.iM[o],f.iM[l],f.sM[o],f.sM[l],this.eg[t])}}FM(t,i=!1){let s=0;if(f.sM){const i=n.A.pa,h=n.A.ma,e=this.xv[t],r=this.Dv[t],o=this.Nv[t],l=f.sM[e],a=f.sM[r],c=f.sM[o];if(l>=50&&f.$S&&f.JS&&this.pM)f.cM[s]=f.$S[e],f.fM[s]=f.JS[e],f.uM[s++]=this.pM[t];else if(f.tM&&f.iM&&this.pM){const u=f.tM[e],d=f.iM[e],w=this.pM[t];if(c>=50&&this.IM){const e=(50-l)*n.A.rS[c-l];f.cM[s]=i+((u+((f.tM[o]-u)*e>>16)<<9)/50|0),f.fM[s]=h+((d+((f.iM[o]-d)*e>>16)<<9)/50|0),f.uM[s++]=w+((this.IM[t]-w)*e>>16)}if(a>=50&&this.mM){const e=(50-l)*n.A.rS[a-l];f.cM[s]=i+((u+((f.tM[r]-u)*e>>16)<<9)/50|0),f.fM[s]=h+((d+((f.iM[r]-d)*e>>16)<<9)/50|0),f.uM[s++]=w+((this.mM[t]-w)*e>>16)}}if(a>=50&&f.$S&&f.JS&&this.mM)f.cM[s]=f.$S[r],f.fM[s]=f.JS[r],f.uM[s++]=this.mM[t];else if(f.tM&&f.iM&&this.mM){const u=f.tM[r],d=f.iM[r],w=this.mM[t];if(l>=50&&this.pM){const r=(50-a)*n.A.rS[l-a];f.cM[s]=i+((u+((f.tM[e]-u)*r>>16)<<9)/50|0),f.fM[s]=h+((d+((f.iM[e]-d)*r>>16)<<9)/50|0),f.uM[s++]=w+((this.pM[t]-w)*r>>16)}if(c>=50&&this.IM){const e=(50-a)*n.A.rS[c-a];f.cM[s]=i+((u+((f.tM[o]-u)*e>>16)<<9)/50|0),f.fM[s]=h+((d+((f.iM[o]-d)*e>>16)<<9)/50|0),f.uM[s++]=w+((this.IM[t]-w)*e>>16)}}if(c>=50&&f.$S&&f.JS&&this.IM)f.cM[s]=f.$S[o],f.fM[s]=f.JS[o],f.uM[s++]=this.IM[t];else if(f.tM&&f.iM&&this.IM){const u=f.tM[o],d=f.iM[o],w=this.IM[t];if(a>=50&&this.mM){const e=(50-c)*n.A.rS[a-c];f.cM[s]=i+((u+((f.tM[r]-u)*e>>16)<<9)/50|0),f.fM[s]=h+((d+((f.iM[r]-d)*e>>16)<<9)/50|0),f.uM[s++]=w+((this.mM[t]-w)*e>>16)}if(l>=50&&this.pM){const r=(50-c)*n.A.rS[l-c];f.cM[s]=i+((u+((f.tM[e]-u)*r>>16)<<9)/50|0),f.fM[s]=h+((d+((f.iM[e]-d)*r>>16)<<9)/50|0),f.uM[s++]=w+((this.pM[t]-w)*r>>16)}}}const h=f.cM[0],r=f.cM[1],o=f.cM[2],l=f.fM[0],a=f.fM[1],c=f.fM[2];if(!((h-r)*(c-a)-(l-a)*(o-r)<=0))if(n.A.Jv=!1,3===s){let s;if((h<0||r<0||o<0||h>e.A.Qv||r>e.A.Qv||o>e.A.Qv)&&(n.A.Jv=!0),s=this.Mv?3&this.Mv[t]:0,i)n.A.od(h,r,l,a,f.uM[0]),n.A.od(r,o,a,c,f.uM[1]),n.A.od(o,h,c,l,f.uM[2]);else if(0===s)n.A.iL(h,r,o,l,a,c,f.uM[0],f.uM[1],f.uM[2]);else if(1===s&&this.pM)n.A.mS(h,r,o,l,a,c,n.A.palette[this.pM[t]]);else if(2===s&&this.Mv&&this.eg&&f.tM&&f.iM&&f.sM){const i=this.Mv[t]>>2,s=this.gM[i],e=this.CM[i],u=this.TM[i];n.A.hL(h,r,o,l,a,c,f.uM[0],f.uM[1],f.uM[2],f.tM[s],f.iM[s],f.sM[s],f.tM[e],f.tM[u],f.iM[e],f.iM[u],f.sM[e],f.sM[u],this.eg[t])}else if(3===s&&this.Mv&&this.eg&&this.pM&&f.tM&&f.iM&&f.sM){const i=this.Mv[t]>>2,s=this.gM[i],e=this.CM[i],u=this.TM[i];n.A.hL(h,r,o,l,a,c,this.pM[t],this.pM[t],this.pM[t],f.tM[s],f.iM[s],f.sM[s],f.tM[e],f.tM[u],f.iM[e],f.iM[u],f.sM[e],f.sM[u],this.eg[t])}}else if(4===s){let s;if((h<0||r<0||o<0||h>e.A.Qv||r>e.A.Qv||o>e.A.Qv||f.cM[3]<0||f.cM[3]>e.A.Qv)&&(n.A.Jv=!0),s=this.Mv?3&this.Mv[t]:0,i)n.A.od(h,r,l,a,f.uM[0]),n.A.od(r,o,a,c,f.uM[1]),n.A.od(o,f.cM[3],c,f.fM[3],f.uM[2]),n.A.od(f.cM[3],h,f.fM[3],l,f.uM[3]);else if(0===s)n.A.iL(h,r,o,l,a,c,f.uM[0],f.uM[1],f.uM[2]),n.A.iL(h,o,f.cM[3],l,c,f.fM[3],f.uM[0],f.uM[2],f.uM[3]);else if(1===s){if(this.pM){const i=n.A.palette[this.pM[t]];n.A.mS(h,r,o,l,a,c,i),n.A.mS(h,o,f.cM[3],l,c,f.fM[3],i)}}else if(2===s&&this.Mv&&this.eg&&f.tM&&f.iM&&f.sM){const i=this.Mv[t]>>2,s=this.gM[i],e=this.CM[i],u=this.TM[i];n.A.hL(h,r,o,l,a,c,f.uM[0],f.uM[1],f.uM[2],f.tM[s],f.iM[s],f.sM[s],f.tM[e],f.tM[u],f.iM[e],f.iM[u],f.sM[e],f.sM[u],this.eg[t]),n.A.hL(h,o,f.cM[3],l,c,f.fM[3],f.uM[0],f.uM[2],f.uM[3],f.tM[s],f.iM[s],f.sM[s],f.tM[e],f.tM[u],f.iM[e],f.iM[u],f.sM[e],f.sM[u],this.eg[t])}else if(3===s&&this.Mv&&this.eg&&this.pM&&f.tM&&f.iM&&f.sM){const i=this.Mv[t]>>2,s=this.gM[i],e=this.CM[i],u=this.TM[i];n.A.hL(h,r,o,l,a,c,this.pM[t],this.pM[t],this.pM[t],f.tM[s],f.iM[s],f.sM[s],f.tM[e],f.tM[u],f.iM[e],f.iM[u],f.sM[e],f.sM[u],this.eg[t]),n.A.hL(h,o,f.cM[3],l,c,f.fM[3],this.pM[t],this.pM[t],this.pM[t],f.tM[s],f.iM[s],f.sM[s],f.tM[e],f.tM[u],f.iM[e],f.iM[u],f.sM[e],f.sM[u],this.eg[t])}}}kM(t,i,s,h,e){if(!h)return;const r=h.length;if(0===e){let e=0;f.xn=0,f.dM=0,f.Dn=0;for(let t=0;t<r;t++){if(!this.tC)continue;const i=h[t];if(i<this.tC.length){const t=this.tC[i];if(t)for(let i=0;i<t.length;i++){const s=t[i];f.xn+=this.jg[s],f.dM+=this.qg[s],f.Dn+=this.Zg[s],e++}}}e>0?(f.xn=(f.xn/e|0)+t,f.dM=(f.dM/e|0)+i,f.Dn=(f.Dn/e|0)+s):(f.xn=t,f.dM=i,f.Dn=s)}else if(1===e)for(let e=0;e<r;e++){const n=h[e];if(!this.tC||n>=this.tC.length)continue;const r=this.tC[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.jg[e]+=t,this.qg[e]+=i,this.Zg[e]+=s}}else if(2===e)for(let e=0;e<r;e++){const r=h[e];if(!this.tC||r>=this.tC.length)continue;const o=this.tC[r];if(o)for(let h=0;h<o.length;h++){const e=o[h];this.jg[e]-=f.xn,this.qg[e]-=f.dM,this.Zg[e]-=f.Dn;const r=8*(255&t),l=8*(255&i),a=8*(255&s);let c,u;if(0!==a){c=n.A.sin[a],u=n.A.cos[a];const t=this.qg[e]*c+this.jg[e]*u>>16;this.qg[e]=this.qg[e]*u-this.jg[e]*c>>16,this.jg[e]=t}if(0!==r){c=n.A.sin[r],u=n.A.cos[r];const t=this.qg[e]*u-this.Zg[e]*c>>16;this.Zg[e]=this.qg[e]*c+this.Zg[e]*u>>16,this.qg[e]=t}if(0!==l){c=n.A.sin[l],u=n.A.cos[l];const t=this.Zg[e]*c+this.jg[e]*u>>16;this.Zg[e]=this.Zg[e]*u-this.jg[e]*c>>16,this.jg[e]=t}this.jg[e]+=f.xn,this.qg[e]+=f.dM,this.Zg[e]+=f.Dn}}else if(3===e)for(let e=0;e<r;e++){const n=h[e];if(!this.tC||n>=this.tC.length)continue;const r=this.tC[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.jg[e]-=f.xn,this.qg[e]-=f.dM,this.Zg[e]-=f.Dn,this.jg[e]=this.jg[e]*t/128|0,this.qg[e]=this.qg[e]*i/128|0,this.Zg[e]=this.Zg[e]*s/128|0,this.jg[e]+=f.xn,this.qg[e]+=f.dM,this.Zg[e]+=f.Dn}}else if(5===e&&this.Qg&&this.EM)for(let i=0;i<r;i++){const s=h[i];if(s>=this.Qg.length)continue;const e=this.Qg[s];if(e)for(let i=0;i<e.length;i++){const s=e[i];this.EM[s]+=8*t,this.EM[s]<0&&(this.EM[s]=0),this.EM[s]>255&&(this.EM[s]=255)}}}xM(){this.hC=0,this.wO=0,this.vO=0,this.CO=999999,this.TO=-999999,this.bO=-99999,this.OO=99999;for(let t=0;t<this.zg;t++){const i=this.jg[t],s=this.qg[t],h=this.Zg[t];i<this.CO&&(this.CO=i),i>this.TO&&(this.TO=i),h<this.OO&&(this.OO=h),h>this.bO&&(this.bO=h),-s>this.hC&&(this.hC=-s),s>this.vO&&(this.vO=s);const e=i*i+h*h;e>this.wO&&(this.wO=e)}this.wO=0|Math.sqrt(this.wO),this.bM=0|Math.sqrt(this.wO*this.wO+this.hC*this.hC),this.OM=this.bM+(0|Math.sqrt(this.wO*this.wO+this.vO*this.vO))}NM(t,i,s,h,e,n,r,o){return!(i<s&&i<h&&i<e)&&(!(i>s&&i>h&&i>e)&&(!(t<n&&t<r&&t<o)&&(t<=n||t<=r||t<=o)))}UM(t){if(!(f.$S&&f.JS&&this.pM&&this.mM&&this.IM))return;const i=this.xv[t],s=this.Dv[t],h=this.Nv[t];n.A.od(f.$S[i],f.JS[i],f.$S[s],f.JS[s],n.A.palette[1e3]),n.A.od(f.$S[s],f.JS[s],f.$S[h],f.JS[h],n.A.palette[1e3]),n.A.od(f.$S[h],f.JS[h],f.$S[i],f.JS[i],n.A.palette[1e3])}}},1122:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(8950),e=s(1069),n=s(4474),r=s(7854);class o extends n.A{mc;width;height;Nc;Pc;jl;gd;constructor(t,i){super(),this.mc=new Int32Array(t*i),this.width=this.jl=t,this.height=this.gd=i,this.Nc=this.Pc=0}static xc=async(t,i)=>{const s=t.read(i+'.dat');if(!s)throw new Error(`${i} jpeg not found!`);const h=await(async t=>{255!==t[0]&&(t[0]=255),URL.revokeObjectURL(r.KR.src),r.KR.src=URL.createObjectURL(new Blob([t],{type:'image/jpeg'})),await new Promise((t=>r.KR.onload=()=>t())),r.VR.clearRect(0,0,r.XR.width,r.XR.height);const i=r.KR.naturalWidth,s=r.KR.naturalHeight;return r.XR.width=i,r.XR.height=s,r.VR.drawImage(r.KR,0,0),r.VR.getImageData(0,0,i,s)})(s),e=new o(h.width,h.height),n=new Uint32Array(h.data.buffer),l=e.mc;for(let t=0;t<l.length;t++){const i=n[t];l[t]=(i>>24&255)<<24|(255&i)<<16|(i>>8&255)<<8|i>>16&255}return e};static nc=(t,i,s=0)=>{const h=new e.A(t.read(i+'.dat')),n=new e.A(t.read('index.dat'));n.ft=h.ct;const r=n.ct,l=n.ct,a=[],c=n.cA-1;for(let t=0;t<c;t++)a[t+1]=n.lt,0===a[t+1]&&(a[t+1]=1);for(let t=0;t<s;t++)n.ft+=2,h.ft+=n.ct*n.ct,n.ft+=1;if(h.ft>h.length||n.ft>n.length)throw new Error;const f=n.cA,u=n.cA,d=n.ct,w=n.ct,y=new o(d,w);y.Nc=f,y.Pc=u,y.jl=r,y.gd=l;const A=n.cA;if(0===A){const t=y.width*y.height;for(let i=0;i<t;i++)y.mc[i]=a[h.cA]}else if(1===A){const t=y.width;for(let i=0;i<t;i++){const s=y.height;for(let e=0;e<s;e++)y.mc[i+e*t]=a[h.cA]}}return y};bind(){h.A.bind(this.mc,this.width,this.height)}draw(t,i){t|=0,i|=0;let s=(t+=this.Nc)+(i+=this.Pc)*h.A.AC,e=0,n=this.height,r=this.width,o=h.A.AC-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.AC}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.BM(r,n,this.mc,e,l,h.A.mc,s,o)}zl(t,i,s){i|=0,s|=0;let e=(i+=this.Nc)+(s+=this.Pc)*h.A.AC,n=0,r=this.height,o=this.width,l=h.A.AC-o,a=0;if(s<h.A.top){const t=h.A.top-s;r-=t,s=h.A.top,n+=t*o,e+=t*h.A.AC}if(s+r>h.A.bottom&&(r-=s+r-h.A.bottom),i<h.A.left){const t=h.A.left-i;o-=t,i=h.A.left,n+=t,e+=t,a+=t,l+=t}if(i+o>h.A.right){const t=i+o-h.A.right;o-=t,a+=t,l+=t}o>0&&r>0&&this.GM(o,r,this.mc,n,a,h.A.mc,e,l,t)}uc(t,i){t|=0,i|=0;let s=(t+=this.Nc)+(i+=this.Pc)*h.A.AC,e=0,n=this.height,r=this.width,o=h.A.AC-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.AC}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.HM(r,n,this.mc,e,l,h.A.mc,s,o)}cc(){const t=this.mc,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}}fc(){const t=this.mc,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}}translate(t,i,s){for(let h=0;h<this.mc.length;h++){const e=this.mc[h];if(0!==e){let n=e>>16&255;n+=t,n<1?n=1:n>255&&(n=255);let r=e>>8&255;r+=i,r<1?r=1:r>255&&(r=255);let o=255&e;o+=s,o<1?o=1:o>255&&(o=255),this.mc[h]=(n<<16)+(r<<8)+o}}}CC(t,i,s,e){t|=0,i|=0,s|=0,e|=0;try{const n=this.width;let r=0,o=0;const l=this.jl,a=this.gd,c=(l<<16)/s|0,f=(a<<16)/e|0;t+=(this.Nc*s+l-1)/l|0,i+=(this.Pc*e+a-1)/a|0,this.Nc*s%l!=0&&(r=(l-this.Nc*s%l<<16)/s|0),this.Pc*e%a!=0&&(o=(a-this.Pc*e%a<<16)/e|0),s=s*(this.width-(r>>16))/l|0,e=e*(this.height-(o>>16))/a|0;let u=t+i*h.A.AC,d=h.A.AC-s;if(i<h.A.top){const t=h.A.top-i;e-=t,i=0,u+=t*h.A.AC,o+=f*t}if(i+e>h.A.bottom&&(e-=i+e-h.A.bottom),t<h.A.left){const i=h.A.left-t;s-=i,t=0,u+=i,r+=c*i,d+=i}if(t+s>h.A.right){const i=t+s-h.A.right;s-=i,d+=i}this.scale(s,e,this.mc,r,o,h.A.mc,d,u,n,c,f)}catch(t){console.error('error in sprite clipping routine')}}pd(t,i,s,e,n,r,o,l,a,c){t|=0,i|=0,s|=0,e|=0;try{const f=-s/2|0,u=-e/2|0,d=65536*Math.sin(a/326.11)|0,w=65536*Math.cos(a/326.11)|0,y=d*c>>8,A=w*c>>8;let p=(o<<16)+u*y+f*A,m=u*A-f*y+(l<<16),I=t+i*h.A.AC;for(let t=0;t<e;t++){const i=n[t];let s=I+i,e=p+A*i,o=m-y*i;for(let i=-r[t];i<0;i++)h.A.mc[s++]=this.mc[(e>>16)+(o>>16)*this.width],e+=A,o-=y;p+=y,m+=A,I+=h.A.AC}}catch(t){}}Ed(t,i,s){t|=0,i|=0;let e=(t+=this.Nc)+(i+=this.Pc)*h.A.AC,n=0,r=this.height,o=this.width,l=h.A.AC-o,a=0;if(i<h.A.top){const t=h.A.top-i;r-=t,i=h.A.top,n+=t*o,e+=t*h.A.AC}if(i+r>h.A.bottom&&(r-=i+r-h.A.bottom),t<h.A.left){const i=h.A.left-t;o-=i,t=h.A.left,n+=i,e+=i,a+=i,l+=i}if(t+o>h.A.right){const i=t+o-h.A.right;o-=i,a+=i,l+=i}o>0&&r>0&&this.WM(o,r,this.mc,a,n,h.A.mc,e,l,s.mc)}scale(t,i,s,h,e,n,r,o,l,a,c){try{const f=h;for(let u=-i;u<0;u++){const i=(e>>16)*l;for(let e=-t;e<0;e++){const t=s[(h>>16)+i];0===t?o++:n[o++]=t,h+=a}e+=c,h=f,o+=r}}catch(t){console.error('error in plot_scale')}}HM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++)n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++];for(let i=t;i<0;i++)n[r++]=s[h++];r+=o,h+=e}}GM(t,i,s,h,e,n,r,o,l){const a=256-l;for(let c=-i;c<0;c++){for(let i=-t;i<0;i++){const t=s[h++];if(0===t)r++;else{const i=n[r];n[r++]=((16711935&t)*l+(16711935&i)*a&4278255360)+((65280&t)*l+(65280&i)*a&16711680)>>8}}r+=o,h+=e}}BM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=t}r+=o,h+=e}}WM(t,i,s,h,e,n,r,o,l){const a=-(t>>2);t=-(3&t);for(let c=-i;c<0;c++){for(let t=a;t<0;t++){let t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++}for(let i=t;i<0;i++){const t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++}r+=o,e+=h}}}},1673:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8950),e=s(1069),n=s(4474);class r extends n.A{mc;width;height;Nc;Pc;jl;gd;palette;constructor(t,i,s){super(),this.mc=new Int8Array(t*i),this.width=this.jl=t,this.height=this.gd=i,this.Nc=this.Pc=0,this.palette=s}static nc=(t,i,s=0)=>{const h=new e.A(t.read(i+'.dat')),n=new e.A(t.read('index.dat'));n.ft=h.ct;const o=n.ct,l=n.ct,a=n.cA,c=new Int32Array(a);for(let t=1;t<a;t++)c[t]=n.lt,0===c[t]&&(c[t]=1);for(let t=0;t<s;t++)n.ft+=2,h.ft+=n.ct*n.ct,n.ft+=1;if(h.ft>h.length||n.ft>n.length)throw new Error;const f=n.cA,u=n.cA,d=n.ct,w=n.ct,y=new r(d,w,c);y.Nc=f,y.Pc=u,y.jl=o,y.gd=l;const A=y.mc,p=n.cA;if(0===p){const t=y.width*y.height;for(let i=0;i<t;i++)A[i]=h.lA}else if(1===p){const t=y.width,i=y.height;for(let s=0;s<t;s++)for(let e=0;e<i;e++)A[s+e*t]=h.lA}return y};draw(t,i){t|=0,i|=0;let s=(t+=this.Nc)+(i+=this.Pc)*h.A.AC,e=0,n=this.height,r=this.width,o=h.A.AC-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.AC}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.YM(r,n,this.mc,e,l,h.A.mc,s,o)}cc(){const t=this.mc,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}}fc(){const t=this.mc,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}}translate(t,i,s){for(let h=0;h<this.palette.length;h++){let e=this.palette[h]>>16&255;e+=t,e<0?e=0:e>255&&(e=255);let n=this.palette[h]>>8&255;n+=i,n<0?n=0:n>255&&(n=255);let r=255&this.palette[h];r+=s,r<0?r=0:r>255&&(r=255),this.palette[h]=(e<<16)+(n<<8)+r}}yS(){this.jl|=0,this.gd|=0,this.jl/=2,this.gd/=2,this.jl|=0,this.gd|=0;const t=new Int8Array(this.jl*this.gd);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[(h+this.Nc>>1)+(s+this.Pc>>1)*this.jl]=this.mc[i++];this.mc=t,this.width=this.jl,this.height=this.gd,this.Nc=0,this.Pc=0}CC(){if(this.width===this.jl&&this.height===this.gd)return;const t=new Int8Array(this.jl*this.gd);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[h+this.Nc+(s+this.Pc)*this.jl]=this.mc[i++];this.mc=t,this.width=this.jl,this.height=this.gd,this.Nc=0,this.Pc=0}YM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t]}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=this.palette[255&t]}r+=o,h+=e}}clip(t,i,s,e){try{const n=this.width;this.height;let r=0,o=0;const l=this.jl,a=this.gd,c=(l<<16)/s|0,f=(a<<16)/e|0;t=t+(this.Nc*s+l-1)/l|0,i=i+(this.Pc*e+a-1)/a|0,this.Nc*s%l!=0&&(r=(l-this.Nc*s%l<<16)/s|0),this.Pc*e%a!=0&&(o=(a-this.Pc*e%a<<16)/e|0),s=s*(this.width-(r>>16))/l|0,e=e*(this.height-(o>>16))/a|0;let u,d=t+i*h.A.AC,w=h.A.AC-s;i<h.A.top&&(u=h.A.top-i,e-=u,i=0,d+=u*h.A.AC,o+=f*u),i+e>h.A.bottom&&(e-=i+e-h.A.bottom),t<h.A.left&&(u=h.A.left-t,s-=u,t=0,d+=u,r+=c*u,w+=u),t+s>h.A.right&&(u=t+s-h.A.right,s-=u,w+=u),this.VM(h.A.mc,this.mc,this.palette,r,o,d,w,s,e,c,f,n)}catch(t){console.log('error in sprite clipping routine')}}VM(t,i,s,h,e,n,r,o,l,a,c,f){try{const u=h;for(let d=-l;d<0;d++){const l=(e>>16)*f;for(let e=-o;e<0;e++){const e=i[(h>>16)+l];0==e?n++:t[n++]=s[255&e],h+=a}e+=c,h=u,n+=r}}catch(t){console.log('error in plot_scale')}}}},2682:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(8950),e=s(1069),n=s(4474);class r{seed;constructor(t){this.seed=(0x5deece66dn^t)&(1n<<48n)-1n}KM(t){this.seed=(0x5deece66dn^t)&(1n<<48n)-1n}nA(){return this.next(32)}next(t){return this.seed=0x5deece66dn*this.seed+0xbn&(1n<<48n)-1n,Number(this.seed)>>>48-t}}var o=s(9298);class l extends n.A{static Kc='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!"$%^&*()-_=+[{]};:\'@#~,<.>/?\\| ';static XM=[];static{const t=navigator.userAgent.includes('Capacitor');for(let i=0;i<256;i++){let s=l.Kc.indexOf(String.fromCharCode(i));t&&s>=63&&s--,-1===s&&(s=74),l.XM[i]=s}}zM=[];jM=new Int32Array(94);ZM=new Int32Array(94);qM=new Int32Array(94);$M=new Int32Array(94);JM=new Int32Array(95);QM=new Int32Array(256);random=new r(BigInt(Date.now()));height=0;static nc=(t,i)=>{const s=new e.A(t.read(i+'.dat')),h=new e.A(t.read('index.dat'));h.ft=s.ct+4;const n=h.cA;n>0&&(h.ft+=3*(n-1));const r=new l;for(let t=0;t<94;t++){r.qM[t]=h.cA,r.$M[t]=h.cA;const i=r.jM[t]=h.ct,e=r.ZM[t]=h.ct,n=h.cA,o=i*e;if(r.zM[t]=new Int8Array(o),0===n)for(let h=0;h<i*e;h++)r.zM[t][h]=s.lA;else if(1===n)for(let h=0;h<i;h++)for(let n=0;n<e;n++)r.zM[t][h+n*i]=s.lA;e>r.height&&(r.height=e),r.qM[t]=1,r.JM[t]=i+2;{let s=0;for(let h=e/7|0;h<e;h++)s+=r.zM[t][h*i];s<=(e/7|0)&&(r.JM[t]--,r.qM[t]=0)}{let s=0;for(let h=e/7|0;h<e;h++)s+=r.zM[t][i+h*i-1];s<=(e/7|0)&&r.JM[t]--}}r.JM[94]=r.JM[8];for(let t=0;t<256;t++)r.QM[t]=r.JM[l.XM[t]];return r};Zl(t,i,s,h){if(!s)return;t|=0,i|=0;const e=s.length;i-=this.height;for(let n=0;n<e;n++){const e=l.XM[s.charCodeAt(n)];94!==e&&this.tk(this.zM[e],t+this.qM[e],i+this.$M[e],this.jM[e],this.ZM[e],h),t+=this.JM[e]}}ua(t,i,s,h,e){t|=0,i|=0;const n=s.length;i-=this.height;for(let r=0;r<n;r++)if('@'===s.charAt(r)&&r+4<n&&'@'===s.charAt(r+4))h=this.ik(s.substring(r+1,r+4)),r+=4;else{const n=l.XM[s.charCodeAt(r)];94!==n&&(e&&this.tk(this.zM[n],t+this.qM[n]+1,i+this.$M[n]+1,this.jM[n],this.ZM[n],o.A.$l),this.tk(this.zM[n],t+this.qM[n],i+this.$M[n],this.jM[n],this.ZM[n],h)),t+=this.JM[n]}}_u(t){if(!t)return 0;const i=t.length;let s=0;for(let h=0;h<i;h++)'@'===t.charAt(h)&&h+4<i&&'@'===t.charAt(h+4)?h+=4:s+=this.QM[t.charCodeAt(h)];return s}ca(t,i,s,h,e){t|=0,i|=0,this.ua(t-this._u(s)/2,i,s,h,e)}Lc(t,i,s,h){s&&(t|=0,i|=0,this.Zl(t-this._u(s)/2,i,s,h))}Vd(t,i,s,h,e,n){t|=0,i|=0,this.random.KM(BigInt(n));const r=192+(31&this.random.nA()),a=i-this.height;for(let i=0;i<s.length;i++)if('@'===s.charAt(i)&&i+4<s.length&&'@'===s.charAt(i+4))h=this.ik(s.substring(i+1,i+4)),i+=4;else{const n=l.XM[s.charCodeAt(i)];94!==n&&(e&&this.sk(t+this.qM[n]+1,a+this.$M[n]+1,this.jM[n],this.ZM[n],o.A.$l,192,this.zM[n]),this.sk(t+this.qM[n],a+this.$M[n],this.jM[n],this.ZM[n],h,r,this.zM[n])),t+=this.JM[n],3&this.random.nA()||t++}}Ju(t,i,s,h,e=!0){t|=0,i|=0,e&&this.Zl(t-this._u(s)+1,i+1,s,o.A.$l),this.Zl(t-this._u(s),i,s,h)}qu(t,i,s,h,e){if(!s)return;t|=0,i|=0,t-=this._u(s)/2|0;const n=i-this.height;for(let i=0;i<s.length;i++){const r=l.XM[s.charCodeAt(i)];94!=r&&this.tk(this.zM[r],t+this.qM[r],n+this.$M[r]+(5*Math.sin(i/2+e/5)|0),this.jM[r],this.ZM[r],h),t+=this.JM[r]}}tk(t,i,s,e,n,r){e|=0,n|=0;let o=(i|=0)+(s|=0)*h.A.AC,l=h.A.AC-e,a=0,c=0;if(s<h.A.top){const t=h.A.top-s;n-=t,s=h.A.top,c+=t*e,o+=t*h.A.AC}if(s+n>=h.A.bottom&&(n-=s+n+1-h.A.bottom),i<h.A.left){const t=h.A.left-i;e-=t,i=h.A.left,c+=t,o+=t,a+=t,l+=t}if(i+e>=h.A.right){const t=i+e+1-h.A.right;e-=t,a+=t,l+=t}e>0&&n>0&&this.hk(e,n,t,c,a,h.A.mc,o,l,r)}sk(t,i,s,e,n,r,o){s|=0,e|=0;let l=(t|=0)+(i|=0)*h.A.AC,a=h.A.AC-s,c=0,f=0;if(i<h.A.top){const t=h.A.top-i;e-=t,i=h.A.top,f+=t*s,l+=t*h.A.AC}if(i+e>=h.A.bottom&&(e-=i+e+1-h.A.bottom),t<h.A.left){const i=h.A.left-t;s-=i,t=h.A.left,f+=i,l+=i,c+=i,a+=i}if(t+s>=h.A.right){const i=t+s+1-h.A.right;s-=i,c+=i,a+=i}s>0&&e>0&&this.ek(s,e,h.A.mc,l,a,o,f,c,n,r)}hk(t,i,s,h,e,n,r,o,l){const a=-((t|=0)>>2);t=-(3&t);for(let c=-(i|=0);c<0;c++){for(let t=a;t<0;t++)0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l;for(let i=t;i<0;i++)0===s[h++]?r++:n[r++]=l;r+=o,h+=e}}ek(t,i,s,h,e,n,r,o,l,a){t|=0;const c=((16711935&l)*a&4278255360)+((65280&l)*a&16711680)>>8,f=256-a;for(let l=-(i|=0);l<0;l++){for(let i=-t;i<0;i++)if(0===n[r++])h++;else{const t=s[h];s[h++]=(((16711935&t)*f&4278255360)+((65280&t)*f&16711680)>>8)+c}h+=e,r+=o}}ik(t){return'red'===t?o.A.RED:'gre'===t?o.A.GREEN:'blu'===t?o.A.BLUE:'yel'===t?o.A.Jl:'cya'===t?o.A.Uc:'mag'===t?o.A.Bc:'whi'===t?o.A.kl:'bla'===t?o.A.$l:'lre'===t?o.A.zR:'dre'===t?o.A.wd:'dbl'===t?o.A.dd:'or1'===t?o.A.jR:'or2'===t?o.A.ZR:'or3'===t?o.A.qR:'gr1'===t?o.A.$R:'gr2'===t?o.A.JR:'gr3'===t?o.A.QR:o.A.$l}split(t,i){if(0===t.length)return[t];const s=[];for(;t.length>0;){if(this._u(t)<=i&&-1===t.indexOf('|')){s.push(t);break}let h=t.length;for(let s=0;s<t.length;s++)if(' '===t[s]){if(this._u(t.substring(0,s))>i)break;h=s}else if('|'===t[s]){h=s;break}s.push(t.substring(0,h)),t=t.substring(h+1)}return s}}},1183:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(8950),e=s(7854);class n{nk;width;height;rk;lk;mc;constructor(t,i,s=e.rl){this.rk=s,this.nk=this.rk.getImageData(0,0,t,i),this.lk=new Uint32Array(this.nk.data.buffer),this.mc=new Int32Array(t*i),this.width=t,this.height=i,this.bind()}clear(){this.mc.fill(0)}bind(){h.A.bind(this.mc,this.width,this.height)}draw(t,i){this.#t(),this.rk.putImageData(this.nk,t,i)}#t(){const t=this.mc.length,i=this.mc,s=this.lk;for(let h=0;h<t;h++){const t=i[h];s[h]=t>>16&255|(t>>8&255)<<8|(255&t)<<16|4278190080}}}},3955:(t,i,s)=>{s.d(i,{A:()=>h});class h{static AA=150;static Ff=108;static Nf=70;static rf=81;static wf=189;static Ww=7;static rw=88;static sw=30;static cw=176;static Jd=220;static Kw=66;static Pw=17;static Iw=2;static Bw=238;static by=233;static $f=146;static Ef=215;static Pf=236;static e_=85;static vI=219;static Tw=140;static Rw=40;static Lw=200;static Ow=178;static bw=247;static Vw=138;static uw=239;static aw=194;static nw=8;static ow=27;static lw=113;static fw=100;static gw=134;static mw=202;static ww=245;static Sw=172;static zw=96;static Yw=97;static Xw=116;static Cw=9;static $d=75;static jd=164;static _w=53;static Ew=185;static zd=206;static iy=177;static qw=248;static hw=195;static ew=71;static iw=133;static Qd=157;static tw=211;static Aw=48;static yw=130;static Uw=31;static Hw=59;static Nw=212;static Gw=38;static Fw=6;static Dw=155;static pw=235;static hA=231;static My=237;static Yf=175;static Wm=93;static _y=190;static Hm=165;static pf=159;static Uy=171;static Fy=79;static py=52;static Sy=244;static vy=148;static Py=11;static Ny=118;static xy=4;static Dy=158;static Gm=181}},3554:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(6666),e=s(1982),n=s(9234);class r{ak;ck;fk;closed=!1;uk=!1;static zc=async t=>await new Promise(((i,s)=>{const h=t.host.startsWith('https'),e=h?'wss':'ws',n=t.host.substring(t.host.indexOf('//')+2),r=h?t.port+2:t.port+1,o=new WebSocket(`${e}://${n}:${r}`,'binary');o.addEventListener('open',(()=>{console.log('connection open!'),i(o)})),o.addEventListener('error',(()=>{console.log('connection error!'),s(o)}))}));constructor(t){t.onclose=this.onclose,t.onerror=this.onerror,this.ck=new a(t,5e3),this.fk=new o(t,5e3),this.ak=t}get host(){return this.ak.url.split('/')[2]}get port(){return parseInt(this.ak.url.split(':')[2],10)}get available(){return this.closed?0:this.ck.available}write(t,i){this.fk.write(t,i)}async read(){return this.closed?0:this.ck.dk()??await this.ck.wk()}async jc(t,i,s){if(!this.closed)for(;s>0;){const h=this.ck.yk(t,i,s)??await this.ck.Ak(t,i,s);if(h.length<=0)throw new Error('EOF');i+=h.length,s-=h.length}}close(){this.closed=!0,this.ak.close(),this.ck.close(),this.fk.close(),console.log('connection close!'),this.uk&&console.log('connection error!')}onclose=t=>{this.closed||this.close()};onerror=t=>{this.closed||(this.uk=!0,this.close())}}class o{ak;pk;closed=!1;uk=!1;constructor(t,i){this.ak=t,this.pk=i}write(t,i){if(!this.closed){if(this.uk)throw this.uk=!1,new Error('Error in writer thread');if(i>this.pk||t.length>this.pk)throw new Error('buffer overflow');try{this.ak.send(t.subarray(0,i))}catch(t){this.uk=!0}}}close(){this.closed=!0}}class l extends e.A{qm;position;constructor(t){super(),this.qm=t,this.position=0}get available(){return this.qm.length-this.position}get read(){return this.qm[this.position++]}get mk(){return this.qm.length}}class a{pk;queue=new h.A;event=null;Ik=null;total=0;closed=!1;constructor(t,i){this.pk=i,t.binaryType='arraybuffer',t.onmessage=this.onmessage}get available(){return this.total}onmessage=t=>{if(this.closed)throw new Error('WebSocketReader is closed!');const i=new l(new Uint8Array(t.data));if(this.event?this.queue.y_(i):this.event=i,this.total+=i.mk,this.Ik&&(this.Ik(this.event),this.Ik=null,this.total>this.pk))throw new Error('buffer overflow')};_k(){return this.event&&this.event.available>0?this.event.read:null}async Ek(t){for(this.event=this.queue.Wv();this.total<t;)await Promise.race([new Promise((t=>this.Ik=t)),(0,n.il)(2e3).then((()=>{throw new Error('WebSocketReader timed out or closed while reading.')}))]);return this.event?this.event.read:this.Ek(t)}yk(t,i,s){if(this.closed)throw new Error('WebSocketReader is closed!');if(!(this.event&&this.event.available>=s))return null;for(;s>0;){const h=this._k();if(null===h)throw new Error('EOF - tried to read a fast byte when there was not enough immediate bytes.');t[i++]=h,this.total--,s--}return t}async Ak(t,i,s){if(this.closed)throw new Error('WebSocketReader is closed!');for(;s>0;)t[i++]=this._k()??await this.Ek(s),this.total--,s--;return t}dk(){if(this.closed)throw new Error('WebSocketReader is closed!');const t=this._k();return null===t?null:(this.total--,t)}async wk(){if(this.closed)throw new Error('WebSocketReader is closed!');const t=await this.Ek(1);return this.total--,t}close(){this.closed=!0,this.Ik=null,this.total=0,this.event=null,this.queue.clear()}}},4544:(t,i,s)=>{s.d(i,{A:()=>h});class h{db;constructor(t){t.onerror=this.onerror,t.onclose=this.onclose,this.db=t}static openDatabase=async()=>await new Promise(((t,i)=>{const s=indexedDB.open('lostcity',1);s.onsuccess=i=>{const s=i.target;console.log('database success!'),t(s.result)},s.onupgradeneeded=t=>{t.target.result.createObjectStore('cache')},s.onerror=t=>{const s=t.target;console.error('database error!: ',s.error),i(s.result)}}));$o=async t=>await new Promise((i=>{const s=this.db.transaction('cache','readonly').objectStore('cache').get(t);s.onsuccess=()=>{i(s.result)},s.onerror=t=>{i(void 0)}}));sl=async(t,i)=>await new Promise(((s,h)=>{const e=this.db.transaction('cache','readwrite').objectStore('cache').put(i,t);e.onsuccess=()=>{s()},e.onerror=t=>{h()}}));onclose=t=>{console.log('database close!')};onerror=t=>{console.log('database error!')};tt=t=>{const i=t.trim();let s=0;for(let t=0;t<i.length&&t<12;t++){const h=i.charAt(t);s*=37,h>='A'&&h<='Z'?s+=h.charCodeAt(0)+1-65:h>='a'&&h<='z'?s+=h.charCodeAt(0)+1-97:h>='0'&&h<='9'&&(s+=h.charCodeAt(0)+27-48)}return s}}},2634:(t,i,s)=>{s.d(i,{A:()=>h});class h{count=0;gk=new Int32Array(256);Ck=new Int32Array(256);a=0;b=0;c=0;constructor(t){for(let i=0;i<t.length;i++)this.gk[i]=t[i];this.init()}get nA(){return 0==this.count--&&(this.Tk(),this.count=255),this.gk[this.count]}init(){let t=2654435769,i=2654435769,s=2654435769,h=2654435769,e=2654435769,n=2654435769,r=2654435769,o=2654435769;for(let l=0;l<4;l++)t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i;for(let l=0;l<256;l+=8)t+=this.gk[l],i+=this.gk[l+1],s+=this.gk[l+2],h+=this.gk[l+3],e+=this.gk[l+4],n+=this.gk[l+5],r+=this.gk[l+6],o+=this.gk[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.Ck[l]=t,this.Ck[l+1]=i,this.Ck[l+2]=s,this.Ck[l+3]=h,this.Ck[l+4]=e,this.Ck[l+5]=n,this.Ck[l+6]=r,this.Ck[l+7]=o;for(let l=0;l<256;l+=8)t+=this.Ck[l],i+=this.Ck[l+1],s+=this.Ck[l+2],h+=this.Ck[l+3],e+=this.Ck[l+4],n+=this.Ck[l+5],r+=this.Ck[l+6],o+=this.Ck[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.Ck[l]=t,this.Ck[l+1]=i,this.Ck[l+2]=s,this.Ck[l+3]=h,this.Ck[l+4]=e,this.Ck[l+5]=n,this.Ck[l+6]=r,this.Ck[l+7]=o;this.Tk(),this.count=256}Tk(){this.c++,this.b+=this.c;for(let t=0;t<256;t++){const i=this.Ck[t],s=3&t;let h;0===s?this.a^=this.a<<13:1===s?this.a^=this.a>>>6:2===s?this.a^=this.a<<2:3===s&&(this.a^=this.a>>>16),this.a+=this.Ck[t+128&255],this.Ck[t]=h=this.Ck[i>>>2&255]+this.a+this.b,this.gk[t]=this.b=this.Ck[h>>>8>>>2&255]+i}}}},1069:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(9234),e=s(6666),n=s(4474);class r extends n.A{static Ok=3988292384;static bk=new Int32Array(256);static vk=new Uint32Array(33);static Lk=new e.A;static Rk=new e.A;static Sk=new e.A;static Mk=0;static kk=0;static xk=0;static{for(let t=0;t<32;t++)r.vk[t]=(1<<t)-1;r.vk[32]=4294967295;for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)1&~i?i>>>=1:i=i>>>1^r.Ok;r.bk[t]=i}}static Jo=t=>{let i=4294967295;for(let s=0;s<t.length;s++)i=i>>>8^r.bk[255&(i^t[s])];return~i};view;data;ft=0;Zm=0;random=null;constructor(t){if(!t)throw new Error('Input src packet array was null!');super(),t instanceof Int8Array?this.data=new Uint8Array(t):this.data=t,this.view=new DataView(this.data.buffer,this.data.byteOffset,this.data.byteLength)}get length(){return this.view.byteLength}get available(){return this.length-this.ft}static $t=t=>{let i=null;return 0===t&&r.Mk>0?(r.Mk--,i=r.Lk.Wv()):1===t&&r.kk>0?(r.kk--,i=r.Rk.Wv()):2===t&&r.xk>0&&(r.xk--,i=r.Sk.Wv()),i?(i.ft=0,i):new r(0===t?new Uint8Array(100):1===t?new Uint8Array(5e3):new Uint8Array(3e4))};release(){this.ft=0,100===this.view.byteLength&&r.Mk<1e3?(r.Lk.y_(this),r.Mk++):5e3===this.view.byteLength&&r.kk<250?(r.Rk.y_(this),r.kk++):3e4===this.view.byteLength&&r.xk<50&&(r.Sk.y_(this),r.xk++)}get cA(){return this.view.getUint8(this.ft++)}get lA(){return this.view.getInt8(this.ft++)}get ct(){const t=this.view.getUint16(this.ft);return this.ft+=2,t}get cp(){const t=this.view.getInt16(this.ft);return this.ft+=2,t}get lt(){const t=this.view.getUint8(this.ft++)<<16|this.view.getUint16(this.ft);return this.ft+=2,t}get ut(){const t=this.view.getInt32(this.ft);return this.ft+=4,t}get Zc(){const t=this.view.getBigInt64(this.ft);return this.ft+=8,t}get WR(){return this.view.getUint8(this.ft)<128?this.cA-64:this.ct-49152}get dO(){return this.view.getUint8(this.ft)<128?this.cA:this.ct-32768}get gA(){const t=this.view,i=t.byteLength;let s,h='';for(;10!==(s=t.getUint8(this.ft++))&&this.ft<i;)h+=String.fromCharCode(s);return h}YA(t,i,s){const h=this.view,e=i+t;for(let t=i;t<e;t++)s[t]=h.getUint8(this.ft++)}nf(t){this.view.setUint8(this.ft++,t+(this.random?.nA??0)&255)}p1(t){this.view.setUint8(this.ft++,t)}p2(t){this.view.setUint16(this.ft,t),this.ft+=2}Dk(t){this.view.setUint16(this.ft,t,!0),this.ft+=2}p3(t){this.view.setUint8(this.ft++,t>>16),this.view.setUint16(this.ft,t),this.ft+=2}p4(t){this.view.setInt32(this.ft,t),this.ft+=4}Nk(t){this.view.setInt32(this.ft,t,!0),this.ft+=4}Ey(t){this.view.setBigInt64(this.ft,t),this.ft+=8}qc(t){const i=this.view,s=t.length;for(let h=0;h<s;h++)i.setUint8(this.ft++,t.charCodeAt(h));i.setUint8(this.ft++,10)}Jc(t,i,s){const h=this.view,e=s+i;for(let i=s;i<e;i++)h.setUint8(this.ft++,t[i])}Jf(t){this.view.setUint8(this.ft-t-1,t)}zm(){this.Zm=8*this.ft}qm(){this.ft=(this.Zm+7)/8|0}jm(t){let i=this.Zm>>>3,s=8-(7&this.Zm),h=0;for(this.Zm+=t;t>s;s=8)h+=(this.view.getUint8(i++)&r.vk[s])<<t-s,t-=s;return h+=t===s?this.view.getUint8(i)&r.vk[s]:this.view.getUint8(i)>>>s-t&r.vk[t],h}$c(t,i){const s=this.ft;this.ft=0;const e=new Uint8Array(s);this.YA(s,0,e);const n=(0,h.Pk)(e),r=(0,h.Fk)(n,i,t),o=(0,h.Uk)(r);this.ft=0,this.p1(o.length),this.Jc(o,o.length,0)}}},353:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Bk=[95,218,67,50,253,222,194,60,101,128,8,251,92,111,24,33,223,66,232,59,227,113,153,105,126,98,167,102,177,238,62,190,147,23,150,151,156,144,193,155,81,0,198,22,137,210,179,16,168,170,32,181,248,141,58,87,208,106,180,191,221,241,40,176,196,154,65,145,230,78,30,161,188,41,14,129,18,199,47,247,225,34,51,10,159,75,12,56,61,31,39,91,46,242,134,5,122,123,209,228,104,195,21,3,11,44,107,172,6,186,110,215,205,103,27,185,124,77,252,117,86,115,127,207,52,79,43,97,219,116,169,7,118,162,108,36,20,233,88,135,80,19,42,237,57,152,71,9,250,17,4,119,234,130,26,200,189,163,254,245,197,171,220,235,140,244,184,94,211,231,99,246,121,212,112,204,63,148,83,178,1,255,131,13,183,142,236,45,55,35,243,136,37,85,100,160,38,224,146,174,82,48,109,132,125,90,143,138,240,173,165,164,192,175,29,74,28,114,213,73,64,206,76,139,96,2,229,15,93,25,239,202,49,70,214,201,72,203,68,89,69,157,216,217,249,120,226,84,149,187,54,53,158,166,182,133,0];static rA=[0,-2,4,6,-1,0,0,2,0,0,0,0,5,4,2,2,0,0,0,0,2,-2,2,14,0,6,3,0,4,0,0,0,3,0,0,0,0,0,0,0,0,-1,4,2,6,0,6,0,0,3,7,0,0,0,-1,0,0,0,0,4,0,0,0,0,0,0,0,0,1,15,0,0,0,0,6,0,2,0,0,0,2,0,0,0,1,0,0,4,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,-2,0,0,2,0,0,0,2,9,0,0,0,0,0,4,0,0,0,3,7,9,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,3,2,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,-2,2,0,0,0,0,0,6,0,0,0,2,0,2,0,0,0,-2,0,0,4,0,0,0,0,6,0,0,-2,-2,0,0,0,0,0,0,-2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0]}},2215:(t,i,s)=>{s.d(i,{A:()=>h});class h{static lp=14;static UA=28;static Np=129;static HA=167;static Rp=168;static rp=195;static Sp=2;static kp=26;static Op=46;static Cp=84;static Ip=87;static ep=103;static GA=146;static mA=197;static Pp=201;static sp=204;static ap=209;static $A=126;static _p=185;static ZA=15;static KA=98;static Hp=213;static gp=74;static Gp=13;static fp=3;static Dp=239;static dA=1;static Wp=184;static VA=133;static XA=226;static Tp=4;static xp=21;static np=32;static vy=41;static aA=152;static OA=19;static Bp=22;static _A=25;static fA=43;static Fp=44;static Ep=68;static Mp=136;static bA=139;static qA=140;static CA=142;static jA=243;static QA=254;static TA=20;static uA=80;static pp=132;static WA=220;static yA=237;static oA=150;static BA=175;static mp=193;static tp=12;static EA=54;static JA=212;static hp=7;static up=135;static Up=162;static LA=23;static DA=42;static kA=49;static RA=50;static PA=59;static MA=69;static NA=76;static vA=151;static SA=191;static xA=223}},3937:(t,i,s)=>{s.d(i,{A:()=>o});class h{start=0;end=0;form=0;length=0;Gk=null;Hk=null;threshold=0;position=0;delta=0;amplitude=0;Wk=0;read(t){this.form=t.cA,this.start=t.ut,this.end=t.ut,this.length=t.cA,this.Gk=new Int32Array(this.length),this.Hk=new Int32Array(this.length);for(let i=0;i<this.length;i++)this.Gk[i]=t.ct,this.Hk[i]=t.ct}reset(){this.threshold=0,this.position=0,this.delta=0,this.amplitude=0,this.Wk=0}evaluate(t){return this.Wk>=this.threshold&&this.Hk&&this.Gk&&(this.amplitude=this.Hk[this.position++]<<15,this.position>=this.length&&(this.position=this.length-1),this.threshold=this.Gk[this.position]/65536*t|0,this.threshold>this.Wk&&(this.delta=((this.Hk[this.position]<<15)-this.amplitude)/(this.threshold-this.Wk)|0)),this.amplitude+=this.delta,this.Wk++,this.amplitude-this.delta>>15}}class e{static buffer=null;static VT=null;static sin=null;static Yk=new Int32Array(5);static Vk=new Int32Array(5);static Kk=new Int32Array(5);static Xk=new Int32Array(5);static zk=new Int32Array(5);jk=null;Zk=null;qk=null;$k=null;Jk=null;Qk=null;release=null;attack=null;tx=new Int32Array(5);ix=new Int32Array(5);sx=new Int32Array(5);start=0;length=500;hx=100;nx=0;static init=()=>{this.VT=new Int32Array(32768);for(let t=0;t<32768;t++)Math.random()>.5?this.VT[t]=1:this.VT[t]=-1;this.sin=new Int32Array(32768);for(let t=0;t<32768;t++)this.sin[t]=16384*Math.sin(t/5215.1903)|0;this.buffer=new Int32Array(220500)};hf(t,i){for(let i=0;i<t;i++)e.buffer[i]=0;if(i<10)return e.buffer;const s=t/i|0;this.jk?.reset(),this.Zk?.reset();let h=0,n=0,r=0;this.qk&&this.$k&&(this.qk.reset(),this.$k.reset(),h=32.768*(this.qk.end-this.qk.start)/s|0,n=32.768*this.qk.start/s|0);let o=0,l=0,a=0;this.Jk&&this.Qk&&(this.Jk.reset(),this.Qk.reset(),o=32.768*(this.Jk.end-this.Jk.start)/s|0,l=32.768*this.Jk.start/s|0);for(let t=0;t<5;t++)this.jk&&0!==this.tx[t]&&(e.Yk[t]=0,e.Vk[t]=this.sx[t]*s,e.Kk[t]=(this.tx[t]<<14)/100|0,e.Xk[t]=32.768*(this.jk.end-this.jk.start)*Math.pow(1.0057929410678534,this.ix[t])/s|0,e.zk[t]=32.768*this.jk.start/s|0);if(this.jk&&this.Zk)for(let i=0;i<t;i++){let s=this.jk.evaluate(t),c=this.Zk.evaluate(t);if(this.qk&&this.$k){const i=this.qk.evaluate(t),e=this.$k.evaluate(t);s+=this.ox(e,r,this.qk.form)>>1,r+=(i*h>>16)+n}if(this.Jk&&this.Qk){const i=this.Jk.evaluate(t),s=this.Qk.evaluate(t);c=c*(32768+(this.ox(s,a,this.Jk.form)>>1))>>15,a+=(i*o>>16)+l}for(let h=0;h<5;h++)if(0!==this.tx[h]){const n=i+e.Vk[h];n<t&&(e.buffer[n]+=this.ox(c*e.Kk[h]>>15,e.Yk[h],this.jk.form),e.Yk[h]+=(s*e.Xk[h]>>16)+e.zk[h])}}if(this.release&&this.attack){this.release.reset(),this.attack.reset();let i=0,s=!0;for(let h=0;h<t;h++){const n=this.release.evaluate(t),r=this.attack.evaluate(t);let o;o=s?this.release.start+((this.release.end-this.release.start)*n>>8):this.release.start+((this.release.end-this.release.start)*r>>8),i+=256,i>=o&&(i=0,s=!s),s&&(e.buffer[h]=0)}}if(this.nx>0&&this.hx>0){const i=this.nx*s;for(let s=i;s<t;s++)e.buffer[s]+=e.buffer[s-i]*this.hx/100|0,e.buffer[s]|=0}for(let i=0;i<t;i++)e.buffer[i]<-32768&&(e.buffer[i]=-32768),e.buffer[i]>32767&&(e.buffer[i]=32767);return e.buffer}ox(t,i,s){return 1===s?(32767&i)<16384?t:-t:2===s?e.sin[32767&i]*t>>14:3===s?((32767&i)*t>>14)-t:4===s?e.VT[i/2607&32767]*t:0}read(t){this.jk=new h,this.jk.read(t),this.Zk=new h,this.Zk.read(t),0!==t.cA&&(t.ft--,this.qk=new h,this.qk.read(t),this.$k=new h,this.$k.read(t)),0!==t.cA&&(t.ft--,this.Jk=new h,this.Jk.read(t),this.Qk=new h,this.Qk.read(t)),0!==t.cA&&(t.ft--,this.release=new h,this.release.read(t),this.attack=new h,this.attack.read(t));for(let i=0;i<10;i++){const s=t.dO;if(0===s)break;this.tx[i]=s,this.ix[i]=t.WR,this.sx[i]=t.dO}this.nx=t.dO,this.hx=t.dO,this.length=t.ct,this.start=t.ct}}var n=s(1069),r=s(3867);class o{static ip=new Int32Array(1e3);static lx=null;static ux=null;static wx=new r.vs(1e3,null);yx=new r.vs(10,null);Ax=0;loopEnd=0;static Ac=t=>{const i=new n.A(t.read('sounds.dat'));for(this.lx=new Uint8Array(441e3),this.ux=new n.A(this.lx),e.init();;){const t=i.ct;if(65535===t)break;const s=new o;s.read(i),this.wx[t]=s,this.ip[t]=s.trim()}};static hf=(t,i)=>{if(!this.wx[t])return null;const s=this.wx[t];return s?.mx(i)??null};read(t){for(let i=0;i<10;i++)0!==t.cA&&(t.ft--,this.yx[i]=new e,this.yx[i]?.read(t));this.Ax=t.ct,this.loopEnd=t.ct}trim(){let t=9999999;for(let i=0;i<10;i++)this.yx[i]&&(this.yx[i].start/20|0)<t&&(t=this.yx[i].start/20|0);if(this.Ax<this.loopEnd&&(this.Ax/20|0)<t&&(t=this.Ax/20|0),9999999===t||0===t)return 0;for(let i=0;i<10;i++)this.yx[i]&&(this.yx[i].start-=20*t);return this.Ax<this.loopEnd&&(this.Ax-=20*t,this.loopEnd-=20*t),t}mx(t){const i=this.hf(t);return o.ux.ft=0,o.ux?.p4(1380533830),o.ux?.Nk(i+36),o.ux?.p4(1463899717),o.ux?.p4(1718449184),o.ux?.Nk(16),o.ux?.Dk(1),o.ux?.Dk(1),o.ux?.Nk(22050),o.ux?.Nk(22050),o.ux?.Dk(1),o.ux?.Dk(8),o.ux?.p4(1684108385),o.ux?.Nk(i),o.ux.ft+=i,o.ux}hf(t){let i=0;for(let t=0;t<10;t++)this.yx[t]&&this.yx[t].length+this.yx[t].start>i&&(i=this.yx[t].length+this.yx[t].start);if(0===i)return 0;let s=22050*i/1e3|0,h=22050*this.Ax/1e3|0,e=22050*this.loopEnd/1e3|0;(h<0||e<0||e>s||h>=e)&&(t=0);let n=s+(e-h)*(t-1);for(let t=44;t<n+44;t++)o.lx&&(o.lx[t]=-128);for(let t=0;t<10;t++)if(this.yx[t]){const i=22050*this.yx[t].length/1e3|0,s=22050*this.yx[t].start/1e3|0,h=this.yx[t].hf(i,this.yx[t].length);for(let t=0;t<i;t++)o.lx&&(o.lx[t+s+44]+=h[t]>>8<<24>>24)}if(t>1){h+=44,e+=44,s+=44,n+=44;const i=n-s;for(let t=s-1;t>=e;t--)o.lx&&(o.lx[t+i]=o.lx[t]);for(let i=1;i<t;i++){const t=(e-h)*i;for(let i=h;i<e;i++)o.lx&&(o.lx[i+t]=o.lx[i])}n-=44}return n}}},3867:(t,i,s)=>{s.d(i,{ac:()=>a,lc:()=>o,vs:()=>h,pb:()=>e,Fr:()=>n,wb:()=>r,er:()=>l});class h extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=i}}class e extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=s}}}class n extends Array{constructor(t,i,s,h){super(t);for(let e=0;e<t;e++){this[e]=new Array(i);for(let t=0;t<i;t++){this[e][t]=new Array(s);for(let i=0;i<s;i++)this[e][t][i]=h}}}}class r extends Array{constructor(t,i,s,h,e){super(t);for(let n=0;n<t;n++){this[n]=new Array(i);for(let t=0;t<i;t++){this[n][t]=new Array(s);for(let i=0;i<s;i++){this[n][t][i]=new Array(h);for(let s=0;s<h;s++)this[n][t][i][s]=e}}}}}class o extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Uint8Array(s)}}}class l extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=new Int32Array(i)}}class a extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Int32Array(s)}}}},9234:(t,i,s)=>{s.d(i,{Uk:()=>l,tl:()=>e,Pk:()=>o,il:()=>h,ec:()=>n,Fc:()=>r,Fk:()=>a});const h=async t=>new Promise((i=>setTimeout(i,t))),e=async t=>new Int8Array(await(await fetch(t)).arrayBuffer()),n=async t=>(await fetch(t)).text();function r(t,i,s,h,e){for(;e--;)s[h++]=t[i++]}function o(t){let i=0n;for(let s=0;s<t.length;s++)i=i<<8n|BigInt(t[s]);return i}function l(t){const i=[];for(;t>0n;)i.unshift(Number(0xffn&t)),t>>=8n;return 128&i[0]&&i.unshift(0),new Uint8Array(i)}function a(t,i,s){let h=1n;for(;i>0n;)i%2n===1n&&(h=h*t%s),t=t*t%s,i>>=1n;return h}},7953:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1069);class e{static Ix=new Uint16Array(['d','o','t'].join('').split('').map((t=>t.charCodeAt(0))));static _x=new Uint16Array(['(','a',')'].join('').split('').map((t=>t.charCodeAt(0))));static Ex=new Uint16Array(['s','l','a','s','h'].join('').split('').map((t=>t.charCodeAt(0))));static gx=['cook',"cook's",'cooks','seeks','sheet'];static Cx=[];static Tx=[];static Ox=[];static bx=[];static vx=[];static Lx=[];static Ac=t=>{const i=new h.A(t.read('fragmentsenc.txt')),s=new h.A(t.read('badenc.txt')),e=new h.A(t.read('domainenc.txt')),n=new h.A(t.read('tldlist.txt'));this.read(s,e,i,n)};static filter=t=>{const i=[...t];this.format(i);const s=i.join('').trim(),h=s.toLowerCase(),e=[...h];this.Rx(e),this.Sx(e),this.Mx(e),this.kx(e);for(let t=0;t<this.gx.length;t++){let i=-1;for(;-1!==(i=h.indexOf(this.gx[t],i+1));){const s=[...this.gx[t]];for(let t=0;t<s.length;t++)e[t+i]=s[t]}}return this.xx(e,[...s]),this.Dx(e),e.join('').trim()};static read=(t,i,s,h)=>{this.Nx(t),this.Px(i),this.Fx(s),this.Ux(h)};static Ux=t=>{const i=t.ut;for(let s=0;s<i;s++)this.Tx[s]=t.cA,this.Cx[s]=new Uint16Array(t.cA).map((()=>t.cA))};static Nx=t=>{const i=t.ut;for(let s=0;s<i;s++){this.Ox[s]=new Uint16Array(t.cA).map((()=>t.cA));const i=new Array(t.cA).fill([]).map((()=>[t.lA,t.lA]));i.length>0&&(this.bx[s]=i)}};static Px=t=>{const i=t.ut;for(let s=0;s<i;s++)this.vx[s]=new Uint16Array(t.cA).map((()=>t.cA))};static Fx=t=>{const i=t.ut;for(let s=0;s<i;s++)this.Lx[s]=t.ct};static Rx=t=>{const i=[...t],s=[...t];this.Bx(null,i,this.Ix),this.Bx(null,s,this.Ex);for(let h=0;h<this.Cx.length;h++)this.Gx(s,this.Tx[h],t,this.Cx[h],i)};static Sx=t=>{for(let i=0;i<2;i++)for(let i=this.Ox.length-1;i>=0;i--)this.Bx(this.bx[i],t,this.Ox[i])};static Mx=t=>{const i=[...t],s=[...t];this.Bx(null,i,this._x),this.Bx(null,s,this.Ix);for(let h=this.vx.length-1;h>=0;h--)this.Hx(s,i,this.vx[h],t)};static kx=t=>{for(let i=0;i<t.length;){const s=this.Wx(t,i);if(-1===s)return;let h=!1;for(let e=i;e>=0&&e<s&&!h;e++)this.Yx(t[e])||this.Vx(t[e])||(h=!0);let e=0;h&&(e=0),0===e&&(e=1,i=s);let n=0;for(let h=s;h<t.length&&h<i;h++)n=10*n+t[h].charCodeAt(0)-48;n<=255&&i-s<=8?e++:e=0,4===e&&(this.Kx(s,i,t),e=0),i=this.Xx(i,t)}};static zx=t=>{if(this.jx(t))return!0;const i=this.Zx(t),s=this.Lx,h=s.length;if(i===s[0]||i===s[h-1])return!0;let e=0,n=h-1;for(;e<=n;){const t=(e+n)/2|0;if(i===s[t])return!0;i<s[t]?n=t-1:e=t+1}return!1};static Zx=t=>{if(t.length>6)return 0;let i=0;for(let s=0;s<t.length;s++){const h=t[t.length-s-1];if(this.qx(h))i=38*i+h.charCodeAt(0)+1-'a'.charCodeAt(0);else if("'"===h)i=38*i+27;else if(this.$x(h))i=38*i+h.charCodeAt(0)+28-'0'.charCodeAt(0);else if('\0'!==h)return 0}return i};static Wx=(t,i)=>{for(let s=i;s<t.length&&s>=0;s++)if(this.$x(t[s]))return s;return-1};static Xx=(t,i)=>{for(let s=t;s<i.length&&s>=0;s++)if(!this.$x(i[s]))return s;return i.length};static Jx=(t,i,s)=>i===s||'o'===i&&'0'===s?1:'o'===i&&'('===s&&')'===t?2:'c'!==i||'('!==s&&'<'!==s&&'['!==s?'e'===i&&''===s||'s'===i&&'$'===s||'l'===i&&'i'===s?1:0:1;static Hx=(t,i,s,h)=>{const e=s.length,n=h.length;for(let r=0;r<=n-e;r++){const{Qx:e,tD:n}=this.iD(r,s,h);if(!e)continue;const o=this.sD(r,h,3,i,['@']),l=this.hD(n-1,h,3,t,['.',',']);(o>2||l>2)&&this.Kx(r,n,h)}};static iD=(t,i,s)=>{const h=i.length;let e=t,n=0;for(;e<s.length&&n<h;){const r=s[e],o=e+1<s.length?s[e+1]:'\0',l=this.Jx(o,String.fromCharCode(i[n]),r);if(l>0)e+=l,n++;else{if(0===n)break;const s=this.Jx(o,String.fromCharCode(i[n-1]),r);if(s>0)e+=s,1===n&&t++;else{if(n>=h||!this.Yx(r))break;e++}}}return{Qx:n>=h,tD:e}};static Bx=(t,i,s)=>{if(!(s.length>i.length))for(let h=0;h<=i.length-s.length;h++){let e=h;const{tD:n,eD:r,nD:o,rD:l,oD:a}=this.lD(i,s,e);e=n;let c=i[e],f=e+1<i.length?i[e+1]:'\0';if(!(r>=s.length)||l&&a)continue;let u,d=!0;if(o){let t=!1,s=!1;if((h-1<0||this.Yx(i[h-1])&&"'"!==i[h-1])&&(t=!0),(e>=i.length||this.Yx(i[e])&&"'"!==i[e])&&(s=!0),!t||!s){let s=!1;for(u=h-2,t&&(u=h);!s&&u<e;){if(u>=0&&(!this.Yx(i[u])||"'"===i[u])){const t=[];let h;for(h=0;h<3&&u+h<i.length&&(!this.Yx(i[u+h])||"'"===i[u+h]);h++)t[h]=i[u+h];let e=!0;0===h&&(e=!1),h<3&&u-1>=0&&(!this.Yx(i[u-1])||"'"===i[u-1])&&(e=!1),e&&!this.zx(t)&&(s=!0)}u++}s||(d=!1)}}else{c=' ',h-1>=0&&(c=i[h-1]),f=' ',e<i.length&&(f=i[e]);const s=this.aD(c),n=this.aD(f);t&&this.cD(s,t,n)&&(d=!1)}if(!d)continue;let w=0,y=0;for(let t=h;t<e;t++)this.$x(i[t])?w++:this.fD(i[t])&&y++;w<=y&&this.Kx(h,e,i)}};static lD=(t,i,s)=>{let h=s,e=0,n=0,r=!1,o=!1,l=!1;for(;h<t.length&&(!o||!l)&&!(h>=t.length||o&&l);){const a=t[h],c=h+1<t.length?t[h+1]:'\0';let f;if(e<i.length&&(f=this.uD(c,String.fromCharCode(i[e]),a))>0)1===f&&this.$x(a)&&(o=!0),2===f&&(this.$x(a)||this.$x(c))&&(o=!0),h+=f,e++;else{if(0===e)break;let t;if((t=this.uD(c,String.fromCharCode(i[e-1]),a))>0)h+=t;else{if(e>=i.length||!this.Vx(a))break;if(this.Yx(a)&&"'"!==a&&(r=!0),this.$x(a)&&(l=!0),h++,n++,(100*n/(h-s)|0)>90)break}}}return{tD:h,eD:e,nD:r,rD:o,oD:l}};static uD=(t,i,s)=>{if(i===s)return 1;if(i>='a'&&i<='m'){if('a'===i)return'4'!==s&&'@'!==s&&'^'!==s?'/'===s&&'\\'===t?2:0:1;if('b'===i)return'6'!==s&&'8'!==s?'1'===s&&'3'===t?2:0:1;if('c'===i)return'('!==s&&'<'!==s&&'{'!==s&&'['!==s?0:1;if('d'===i)return'['===s&&')'===t?2:0;if('e'===i)return'3'!==s&&''!==s?0:1;if('f'===i)return'p'===s&&'h'===t?2:''===s?1:0;if('g'===i)return'9'!==s&&'6'!==s?0:1;if('h'===i)return'#'===s?1:0;if('i'===i)return'y'!==s&&'l'!==s&&'j'!==s&&'1'!==s&&'!'!==s&&':'!==s&&';'!==s&&'|'!==s?0:1;if('j'===i)return 0;if('k'===i)return 0;if('l'===i)return'1'!==s&&'|'!==s&&'i'!==s?0:1;if('m'===i)return 0}if(i>='n'&&i<='z'){if('n'===i)return 0;if('o'===i)return'0'!==s&&'*'!==s?'('===s&&')'===t||'['===s&&']'===t||'{'===s&&'}'===t||'<'===s&&'>'===t?2:0:1;if('p'===i)return 0;if('q'===i)return 0;if('r'===i)return 0;if('s'===i)return'5'!==s&&'z'!==s&&'$'!==s&&'2'!==s?0:1;if('t'===i)return'7'!==s&&'+'!==s?0:1;if('u'===i)return'v'===s?1:'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('v'===i)return'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('w'===i)return'v'===s&&'v'===t?2:0;if('x'===i)return')'===s&&'('===t||'}'===s&&'{'===t||']'===s&&'['===t||'>'===s&&'<'===t?2:0;if('y'===i)return 0;if('z'===i)return 0}return i>='0'&&i<='9'?'0'===i?'o'===s||'O'===s?1:'('===s&&')'===t||'{'===s&&'}'===t||'['===s&&']'===t?2:0:'1'===i&&'l'===s?1:0:','===i?'.'===s?1:0:'.'===i?','===s?1:0:'!'===i&&'i'===s?1:0};static cD=(t,i,s)=>{let h=0,e=i.length-1;for(;h<=e;){const n=(h+e)/2|0;if(i[n][0]===t&&i[n][1]===s)return!0;t<i[n][0]||t===i[n][0]&&s<i[n][1]?e=n-1:h=n+1}return!1};static aD=t=>this.qx(t)?t.charCodeAt(0)+1-'a'.charCodeAt(0):"'"===t?28:this.$x(t)?t.charCodeAt(0)+29-'0'.charCodeAt(0):27;static Gx=(t,i,s,h,e)=>{if(!(h.length>s.length))for(let n=0;n<=s.length-h.length;n++){const{tD:r,dD:o}=this.wD(s,h,n);if(o<h.length)continue;let l=!1;const a=this.sD(n,s,3,e,[',','.']),c=this.hD(r-1,s,5,t,['\\','/']);if(1===i&&a>0&&c>0&&(l=!0),2===i&&(a>2&&c>0||a>0&&c>2)&&(l=!0),3===i&&a>0&&c>2&&(l=!0),!l)continue;let f,u=n,d=r-1,w=!1;if(a>2){if(4===a)for(w=!1,f=n-1;f>=0;f--)if(w){if('*'!==e[f])break;u=f}else'*'===e[f]&&(u=f,w=!0);for(w=!1,f=u-1;f>=0;f--)if(w){if(this.Yx(s[f]))break;u=f}else this.Yx(s[f])||(w=!0,u=f)}if(c>2){if(4===c)for(w=!1,f=d+1;f<s.length;f++)if(w){if('*'!==t[f])break;d=f}else'*'===t[f]&&(d=f,w=!0);for(w=!1,f=d+1;f<s.length;f++)if(w){if(this.Yx(s[f]))break;d=f}else this.Yx(s[f])||(w=!0,d=f)}this.Kx(u,d+1,s)}};static wD=(t,i,s)=>{let h=0;for(;s<t.length&&h<i.length;){const e=t[s],n=s+1<t.length?t[s+1]:'\0';let r;if((r=this.Jx(n,String.fromCharCode(i[h]),e))>0)s+=r,h++;else{if(0===h)break;let t;if((t=this.Jx(n,String.fromCharCode(i[h-1]),e))>0)s+=t;else{if(!this.Yx(e))break;s++}}}return{tD:s,dD:h}};static Yx=t=>!this.fD(t)&&!this.$x(t);static Vx=t=>!this.qx(t)||('v'===t||'x'===t||'j'===t||'q'===t||'z'===t);static fD=t=>this.qx(t)||this.yD(t);static $x=t=>t>='0'&&t<='9';static qx=t=>t>='a'&&t<='z';static yD=t=>t>='A'&&t<='Z';static jx=t=>{for(let i=0;i<t.length;i++)if(!this.$x(t[i])&&'\0'!==t[i])return!1;return!0};static Kx=(t,i,s)=>{for(let h=t;h<i;h++)s[h]='*'};static AD=(t,i)=>{let s=0;for(let h=i-1;h>=0&&this.Yx(t[h]);h--)'*'===t[h]&&s++;return s};static pD=(t,i)=>{let s=0;for(let h=i+1;h<t.length&&this.Yx(t[h]);h++)'*'===t[h]&&s++;return s};static mD=(t,i,s,h,e)=>(e?this.AD(i,s):this.pD(i,s))>=h?4:this.Yx(e?t[s-1]:t[s+1])?1:0;static sD=(t,i,s,h,e)=>{if(0===t)return 2;for(let s=t-1;s>=0&&this.Yx(i[s]);s--)if(e.includes(i[s]))return 3;return this.mD(i,h,t,s,!0)};static hD=(t,i,s,h,e)=>{if(t+1===i.length)return 2;for(let s=t+1;s<i.length&&this.Yx(i[s]);s++)if(e.includes(i[s]))return 3;return this.mD(i,h,t,s,!1)};static format=t=>{let i=0;for(let s=0;s<t.length;s++)this.ID(t[s])?t[i]=t[s]:t[i]=' ',0!==i&&' '===t[i]&&' '===t[i-1]||i++;for(let s=i;s<t.length;s++)t[s]=' '};static ID=t=>t>=' '&&t<=''||' '===t||'\n'===t||'\t'===t||''===t||''===t;static xx=(t,i)=>{for(let s=0;s<i.length;s++)'*'!==t[s]&&this.yD(i[s])&&(t[s]=i[s])};static Dx=t=>{let i=!0;for(let s=0;s<t.length;s++){const h=t[s];this.fD(h)?i?this.qx(h)&&(i=!1):this.yD(h)&&(t[s]=String.fromCharCode(h.charCodeAt(0)+'a'.charCodeAt(0)-65)):i=!0}}}},2646:(t,i,s)=>{s.d(i,{A:()=>h});class h{static _D=[' ','e','t','a','o','i','h','n','s','r','d','l','u','m','w','c','y','f','g','p','b','v','k','x','j','q','z','0','1','2','3','4','5','6','7','8','9',' ','!','?','.',',',':',';','(',')','-','&','*','\\','\'','@','#','+','=','','$','%','"','[',']'];static ED=[];static Ac=(t,i)=>{let s,h=0,e=-1;for(let n=0;n<i&&h<100;n++){const i=t.cA;s=i>>4&15,-1!==e?(this.ED[h++]=this._D[(e<<4)+s-195],e=-1):s<13?this.ED[h++]=this._D[s]:e=s,s=15&i,-1!==e?(this.ED[h++]=this._D[(e<<4)+s-195],e=-1):s<13?this.ED[h++]=this._D[s]:e=s}let n=!0;for(let t=0;t<h;t++){const i=this.ED[t];n&&i>='a'&&i<='z'&&(this.ED[t]=i.toUpperCase(),n=!1),'.'!==i&&'!'!==i||(n=!0)}return this.ED.slice(0,h).join('')};static Ly=(t,i)=>{i.length>80&&(i=i.substring(0,80)),i=i.toLowerCase();let s=-1;for(let h=0;h<i.length;h++){const e=i.charAt(h);let n=0;for(let t=0;t<this._D.length;t++)if(e===this._D[t]){n=t;break}n>12&&(n+=195),-1===s?n<13?s=n:t.p1(n):n<13?(t.p1((s<<4)+n),s=-1):(t.p1((s<<4)+(n>>4)),s=15&n)}-1!==s&&t.p1(s<<4)}}},4702:(t,i,s)=>{async function h(t,i={}){const s={env:Object.assign(Object.create(globalThis),i.env||{},{abort(t,i,s,h){t=r(t>>>0),i=r(i>>>0),s>>>=0,h>>>=0,(()=>{throw Error(`${t} in ${i}:${s}:${h}`)})()}})},{exports:h}=await WebAssembly.instantiate(t,s),e=h.memory||i.env.memory,n=Object.setPrototypeOf({read:(t,i,s,n)=>(i=function(t,i,s,n,r){if(null==n)return 0;const o=n.length,l=h.__pin(h.__new(o<<s,i))>>>0;if(r)new r(e.buffer,l,o).set(n);else for(let i=0;i<o;i++)t(l+(i<<s>>>0),n[i]);return h.__unpin(l),l}(l,6,0,i,Int8Array)||function(){throw TypeError("value must not be null")}(),function(t,i,s){if(!s)return null;const h=function(t){try{return o.getUint32(t,!0)}catch{return o=new DataView(e.buffer),o.getUint32(t,!0)}}(s-4)>>>i,n=new Array(h);for(let e=0;e<h;++e)n[e]=t(s+(e<<i>>>0));return n}(a,0,h.read(t,i,s,n)>>>0))},h);function r(t){if(!t)return null;const i=t+new Uint32Array(e.buffer)[t-4>>>2]>>>1,s=new Uint16Array(e.buffer);let h=t>>>1,n="";for(;i-h>1024;)n+=String.fromCharCode(...s.subarray(h,h+=1024));return n+String.fromCharCode(...s.subarray(h,i))}let o=new DataView(e.buffer);function l(t,i){try{o.setUint8(t,i,!0)}catch{o=new DataView(e.buffer),o.setUint8(t,i,!0)}}function a(t){try{return o.getInt8(t,!0)}catch{return o=new DataView(e.buffer),o.getInt8(t,!0)}}return n}s.d(i,{A:()=>e});class e{static gD=null;static load=async t=>{this.gD=await h(new WebAssembly.Module(t),{env:void 0})};static read=(t,i,s,h)=>{if(!this.gD)throw new Error('bz2 not found!!');return Int8Array.from(this.gD.read(t,i,s,h))}}},123:(t,i,s)=>{let h;async function e(t,i){n(i);try{const i=await window.audioContext.decodeAudioData(Uint8Array.from(t).buffer);let s=window.audioContext.createBufferSource();s.buffer=i,s.connect(h),s.start()}catch(t){console.log(t)}}function n(t){h||(h=window.audioContext.createGain(),h.connect(window.audioContext.destination)),h.gain.value=t/256}function r(t,i){window._tinyMidiPlay&&window._tinyMidiPlay(t,i/256)}function o(t){window._tinyMidiVolume&&window._tinyMidiVolume(t/256)}function l(){window._tinyMidiStop&&window._tinyMidiStop()}s.d(i,{ef:()=>e,el:()=>r,nm:()=>n,Go:()=>l,hm:()=>o})},8902:(t,i,s)=>{var h;const e=(h="file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/tinymidipcm.mjs",function(t){var i,e,n=void 0!==(t=t||{})?t:{};n.ready=new Promise((function(t,s){i=t,e=s})),["_tsf_load_memory","_tsf_set_output","_tsf_channel_set_bank_preset","_tsf_set_max_voices","_tsf_channel_set_presetnumber","_tsf_reset","_tsf_close","_tml_load_memory","_midi_render","_malloc","_realloc","_free","_fflush","onRuntimeInitialized"].forEach((t=>{Object.getOwnPropertyDescriptor(n.ready,t)||Object.defineProperty(n.ready,t,{get:()=>z('You are getting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),set:()=>z('You are setting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js')})}));var r=Object.assign({},n),o=[],l='object'==typeof window,a='function'==typeof importScripts,c='object'==typeof process&&'object'==typeof process.versions&&'string'==typeof process.versions.node,f=!l&&!c&&!a;if(n.ENVIRONMENT)throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');var u,d,w,y='';if(c){if('undefined'==typeof process||!process.release||'node'!==process.release.name)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');var A,p;y=a?require('path').CD(y)+'/':__dirname+'/';var m=()=>{p||(A=require('fs'),p=require('path'))};u=(t,i)=>(m(),t=p.normalize(t),A.TD(t,i?void 0:'utf8')),w=t=>{var i=u(t,!0);return i.buffer||(i=new Uint8Array(i)),D(i.buffer),i},d=(t,i,s)=>{m(),t=p.normalize(t),A.OD(t,(function(t,h){t?s(t):i(h.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,'/'),o=process.argv.slice(2),process.on('uncaughtException',(function(t){if(!(t instanceof et))throw t})),process.on('unhandledRejection',(function(t){throw t})),n.inspect=function(){return'[Emscripten Module object]'}}else if(f){if('object'==typeof process&&'function'==typeof require||'object'==typeof window||'function'==typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');'undefined'!=typeof read&&(u=function(t){return read(t)}),w=function(t){let i;return'function'==typeof readbuffer?new Uint8Array(readbuffer(t)):(i=read(t,'binary'),D('object'==typeof i),i)},d=function(t,i,s){setTimeout((()=>i(w(t))),0)},'undefined'!=typeof scriptArgs?o=scriptArgs:void 0!==arguments&&(o=arguments),'undefined'!=typeof print&&('undefined'==typeof console&&(console={}),console.log=print,console.warn=console.error='undefined'!=typeof printErr?printErr:print)}else{if(!l&&!a)throw new Error('environment detection error');if(a?y=self.location.href:'undefined'!=typeof document&&document.currentScript&&(y=document.currentScript.src),h&&(y=h),y=0!==y.indexOf('blob:')?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf('/')+1):'','object'!=typeof window&&'function'!=typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');u=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.send(null),i.responseText},a&&(w=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.responseType='arraybuffer',i.send(null),new Uint8Array(i.response)}),d=(t,i,s)=>{var h=new XMLHttpRequest;h.open('GET',t,!0),h.responseType='arraybuffer',h.onload=()=>{200==h.status||0==h.status&&h.response?i(h.response):s()},h.onerror=s,h.send(null)}}n.print||console.log.bind(console);var I,_,E=n.printErr||console.warn.bind(console);function g(t,i){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){z('Module.'+t+' has been replaced with plain '+i+' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)')}})}function C(t){return'FS_createPath'===t||'FS_createDataFile'===t||'FS_createPreloadedFile'===t||'FS_unlink'===t||'addRunDependency'===t||'FS_createLazyFile'===t||'FS_createDevice'===t||'removeRunDependency'===t}Object.assign(n,r),r=null,I='fetchSettings',Object.getOwnPropertyDescriptor(n,I)&&z('`Module.'+I+'` was supplied but `'+I+'` not included in INCOMING_MODULE_JS_API'),n.arguments&&(o=n.arguments),g('arguments','arguments_'),n.thisProgram&&n.thisProgram,g('thisProgram','thisProgram'),n.quit&&n.quit,g('quit','quit_'),D(void 0===n.memoryInitializerPrefixURL,'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.pthreadMainPrefixURL,'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.cdInitializerPrefixURL,'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.filePackagePrefixURL,'Module.filePackagePrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.read,'Module.read option was removed (modify read_ in JS)'),D(void 0===n.readAsync,'Module.readAsync option was removed (modify readAsync in JS)'),D(void 0===n.readBinary,'Module.readBinary option was removed (modify readBinary in JS)'),D(void 0===n.setWindowTitle,'Module.setWindowTitle option was removed (modify setWindowTitle in JS)'),D(void 0===n.TOTAL_MEMORY,'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY'),g('read','read_'),g('readAsync','readAsync'),g('readBinary','readBinary'),g('setWindowTitle','setWindowTitle'),D(!f,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),n.wasmBinary&&(_=n.wasmBinary),g('wasmBinary','wasmBinary');var T;n.noExitRuntime;g('noExitRuntime','noExitRuntime'),'object'!=typeof WebAssembly&&z('no native wasm support detected');var O,b,v,L,R,S,M,k,x=!1;function D(t,i){t||z('Assertion failed'+(i?': '+i:''))}function N(t){O=t,n.HEAP8=b=new Int8Array(t),n.HEAP16=L=new Int16Array(t),n.HEAP32=R=new Int32Array(t),n.HEAPU8=v=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=S=new Uint32Array(t),n.HEAPF32=M=new Float32Array(t),n.HEAPF64=k=new Float64Array(t)}'undefined'!=typeof TextDecoder&&new TextDecoder('utf8');var P=5242880;n.TOTAL_STACK&&D(P===n.TOTAL_STACK,'the stack size can no longer be determined at runtime');var F=n.INITIAL_MEMORY||16777216;function U(){if(!x){var t=ft(),i=S[t>>2],s=S[t+4>>2];34821223==i&&2310721022==s||z('Stack overflow! Stack cookie has been overwritten at 0x'+t.toString(16)+', expected hex dwords 0x89BACDFE and 0x2135467, but received 0x'+s.toString(16)+' 0x'+i.toString(16)),1668509029!==S[0]&&z('Runtime error: The application has corrupted its heap memory area (address zero)!')}}g('INITIAL_MEMORY','INITIAL_MEMORY'),D(F>=P,'INITIAL_MEMORY should be larger than TOTAL_STACK, was '+F+'! (TOTAL_STACK='+P+')'),D('undefined'!=typeof Int32Array&&'undefined'!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,'JS engine does not provide full typed array support'),D(!n.wasmMemory,'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally'),D(16777216==F,'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically'),function(){var t=new Int16Array(1),i=new Int8Array(t.buffer);if(t[0]=25459,115!==i[0]||99!==i[1])throw'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)'}();var B=[],G=[],H=[],W=!1;D(Math.imul,'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.fround,'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.clz32,'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.trunc,'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');var Y=0,V=null,K=null,X={};function z(t){n.onAbort&&n.onAbort(t),E(t='Aborted('+t+')'),x=!0;var i=new WebAssembly.RuntimeError(t);throw e(i),i}var j={error:function(){z('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM')},init:function(){j.error()},bD:function(){j.error()},vD:function(){j.error()},LD:function(){j.error()},open:function(){j.error()},RD:function(){j.error()},SD:function(){j.error()},MD:function(){j.error()},kD:function(){j.error()},xD:function(){j.error()}};n.FS_createDataFile=j.bD,n.FS_createPreloadedFile=j.vD;var Z,q,$,J,Q='data:application/octet-stream;base64,';function tt(t){return t.startsWith(Q)}function it(t){return t.startsWith('file://')}function st(t,i){return function(){var s=t,h=i;return i||(h=n.asm),D(W,'native function `'+s+'` called before runtime initialization'),h[t]||D(h[t],'exported native function `'+s+'` not found'),h[t].apply(null,arguments)}}function ht(t){try{if(t==Z&&_)return new Uint8Array(_);if(w)return w(t);throw"both async and sync fetching of the wasm failed"}catch(t){z(t)}}function et(t){this.name='ExitStatus',this.message='Program terminated with exit('+t+')',this.status=t}function nt(t){for(;t.length>0;)t.shift()(n)}function rt(t){rt.DD||(rt.DD={}),rt.DD[t]||(rt.DD[t]=1,c&&(t='warning: '+t),E(t))}function ot(t){try{return T.grow(t-O.byteLength+65535>>>16),N(T.buffer),1}catch(i){E('emscripten_realloc_buffer: Attempted to grow heap from '+O.byteLength+' bytes to '+t+' bytes, but got error: '+i)}}n.locateFile?tt(Z='tinymidipcm.wasm')||(q=Z,Z=n.locateFile?n.locateFile(q,y):y+q):Z=new URL(s(8227),s.b).toString();var lt,at={"emscripten_memcpy_big":function(t,i,s){v.copyWithin(t,i,i+s)},"emscripten_resize_heap":function(t){var i=v.length;D((t>>>=0)>i);var s,h,e=2147483648;if(t>e)return E('Cannot enlarge memory, asked to go up to '+t+' bytes, but the limit is '+e+' bytes!'),!1;for(var n=1;n<=4;n*=2){var r=i*(1+.2/n);r=Math.min(r,t+100663296);var o=Math.min(e,(s=Math.max(t,r))+((h=65536)-s%h)%h);if(ot(o))return!0}return E('Failed to grow the heap from '+i+' bytes to '+o+' bytes, not enough memory!'),!1}},ct=(function(){var t,i={'env':at,'wasi_snapshot_preview1':at};function s(t,i){var s,h=t.exports;n.asm=h,D(T=n.asm.memory,"memory not found in wasm exports"),N(T.buffer),D(n.asm.__indirect_function_table,"table not found in wasm exports"),s=n.asm.__wasm_call_ctors,G.unshift(s),function(t){if(Y--,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(D(X[t]),delete X[t]):E('warning: run dependency removed without ID'),0==Y&&(null!==V&&(clearInterval(V),V=null),K)){var i=K;K=null,i()}}('wasm-instantiate')}t='wasm-instantiate',Y++,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(D(!X[t]),X[t]=1,null===V&&'undefined'!=typeof setInterval&&(V=setInterval((function(){if(x)return clearInterval(V),void(V=null);var t=!1;for(var i in X)t||(t=!0,E('still waiting on run dependencies:')),E('dependency: '+i);t&&E('(end of list)')}),1e4))):E('warning: run dependency added without ID');var h=n;function r(t){D(n===h,'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?'),h=null,s(t.instance)}function o(t){return function(){if(!_&&(l||a)){if('function'==typeof fetch&&!it(Z))return fetch(Z,{credentials:'same-origin'}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Z+"'";return t.arrayBuffer()})).catch((function(){return ht(Z)}));if(d)return new Promise((function(t,i){d(Z,(function(i){t(new Uint8Array(i))}),i)}))}return Promise.resolve().then((function(){return ht(Z)}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){E('failed to asynchronously prepare wasm: '+t),it(Z)&&E('warning: Loading from a file URI ('+Z+') is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing'),z(t)}))}if(n.instantiateWasm)try{return n.instantiateWasm(i,s)}catch(t){E('Module.instantiateWasm callback failed with error: '+t),e(t)}(_||'function'!=typeof WebAssembly.instantiateStreaming||tt(Z)||it(Z)||c||'function'!=typeof fetch?o(r):fetch(Z,{credentials:'same-origin'}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(r,(function(t){return E('wasm streaming compile failed: '+t),E('falling back to ArrayBuffer instantiation'),o(r)}))}))).catch(e)}(),n.___wasm_call_ctors=st("__wasm_call_ctors"),n._malloc=st("malloc"),n._free=st("free"),n._tsf_load_memory=st("tsf_load_memory"),n._tsf_close=st("tsf_close"),n._tsf_reset=st("tsf_reset"),n._tsf_set_output=st("tsf_set_output"),n._tsf_set_max_voices=st("tsf_set_max_voices"),n._realloc=st("realloc"),n._tsf_channel_set_presetnumber=st("tsf_channel_set_presetnumber"),n._tsf_channel_set_bank_preset=st("tsf_channel_set_bank_preset"),n._tml_load_memory=st("tml_load_memory"),n._midi_render=st("midi_render"),n.___errno_location=st("__errno_location"),n._fflush=st("fflush"),n._emscripten_stack_init=function(){return(ct=n._emscripten_stack_init=n.asm.emscripten_stack_init).apply(null,arguments)}),ft=(n._emscripten_stack_get_free=function(){return(n._emscripten_stack_get_free=n.asm.emscripten_stack_get_free).apply(null,arguments)},n._emscripten_stack_get_base=function(){return(n._emscripten_stack_get_base=n.asm.emscripten_stack_get_base).apply(null,arguments)},n._emscripten_stack_get_end=function(){return(ft=n._emscripten_stack_get_end=n.asm.emscripten_stack_get_end).apply(null,arguments)});function ut(){var t;ct(),D(!(3&(t=ft()))),S[t>>2]=34821223,S[t+4>>2]=2310721022,S[0]=1668509029}function dt(t){function s(){lt||(lt=!0,n.calledRun=!0,x||(D(!W),W=!0,U(),nt(G),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),D(!n._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(U(),n.postRun)for('function'==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)t=n.postRun.shift(),H.unshift(t);var t;nt(H)}()))}t=t||o,Y>0||(ut(),function(){if(n.preRun)for('function'==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)t=n.preRun.shift(),B.unshift(t);var t;nt(B)}(),Y>0||(n.setStatus?(n.setStatus('Running...'),setTimeout((function(){setTimeout((function(){n.setStatus('')}),1),s()}),1)):s(),U()))}if(n.stackSave=st("stackSave"),n.stackRestore=st("stackRestore"),n.stackAlloc=st("stackAlloc"),n.setValue=function(t,i,s="i8"){switch(s.endsWith('*')&&(s='*'),s){case'i1':case'i8':b[0|t]=i;break;case'i16':L[t>>1]=i;break;case'i32':R[t>>2]=i;break;case'i64':J=[i>>>0,($=i,+Math.abs($)>=1?$>0?(0|Math.min(+Math.floor($/4294967296),4294967295))>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],R[t>>2]=J[0],R[t+4>>2]=J[1];break;case'float':M[t>>2]=i;break;case'double':k[t>>3]=i;break;case'*':S[t>>2]=i;break;default:z('invalid type for setValue: '+s)}},n.getValue=function(t,i="i8"){switch(i.endsWith('*')&&(i='*'),i){case'i1':case'i8':return b[0|t];case'i16':return L[t>>1];case'i32':case'i64':return R[t>>2];case'float':return M[t>>2];case'double':return k[t>>3];case'*':return S[t>>2];default:z('invalid type for getValue: '+i)}return null},['run','UTF8ArrayToString','UTF8ToString','stringToUTF8Array','stringToUTF8','lengthBytesUTF8','addOnPreRun','addOnInit','addOnPreMain','addOnExit','addOnPostRun','addRunDependency','removeRunDependency','FS_createFolder','FS_createPath','FS_createDataFile','FS_createPreloadedFile','FS_createLazyFile','FS_createLink','FS_createDevice','FS_unlink','getLEB','getFunctionTables','alignFunctionTables','registerFunctions','prettyPrint','getCompilerSetting','print','printErr','callMain','abort','keepRuntimeAlive','wasmMemory','stackAlloc','stackSave','stackRestore','getTempRet0','setTempRet0','writeStackCookie','checkStackCookie','ptrToString','zeroMemory','stringToNewUTF8','exitJS','getHeapMax','emscripten_realloc_buffer','ENV','ERRNO_CODES','ERRNO_MESSAGES','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','DNS','getHostByName','Protocols','Sockets','getRandomDevice','warnOnce','traverseStack','UNWIND_CACHE','convertPCtoSourceLocation','readAsmConstArgsArray','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','handleException','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','freeTableIndexes','functionsInTableMap','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','PATH','PATH_FS','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16Decoder','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeArrayToMemory','writeAsciiToMemory','SYSCALLS','getSocketFromFD','getSocketAddress','JSEvents','registerKeyEventCallback','specialHTMLTargets','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','currentFullscreenStrategy','restoreOldWindowedStyle','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','demangle','demangleAll','jsStackTrace','stackTrace','ExitStatus','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','dlopenMissingError','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','uncaughtExceptionCount','exceptionLast','exceptionCaught','ExceptionInfo','exception_addRef','exception_decRef','Browser','setMainLoop','wget','FS','MEMFS','TTY','PIPEFS','SOCKFS','_setNetworkCallback','tempFixedLengthArray','miniTempWebGLFloatBuffers','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','GL','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','AL','SDL_unicode','SDL_ttfContext','SDL_audio','SDL','SDL_gfx','GLUT','EGL','GLFW_Window','GLFW','GLEW','IDBStore','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){var i="'"+t+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";C(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),z(i)}})})),['ptrToString','zeroMemory','stringToNewUTF8','exitJS','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','getHostByName','getRandomDevice','traverseStack','convertPCtoSourceLocation','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeAsciiToMemory','getSocketFromFD','getSocketAddress','registerKeyEventCallback','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','ExceptionInfo','exception_addRef','exception_decRef','setMainLoop','_setNetworkCallback','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','SDL_unicode','SDL_ttfContext','SDL_audio','GLFW_Window','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){'undefined'==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{configurable:!0,get:function(){var i='`'+t+'` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line';C(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),rt(i)}})})),K=function t(){lt||dt(),lt||(K=t)},n.preInit)for('function'==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return dt(),t.ready});const n=class{constructor(t={}){this.ND=void 0,this.PD=0,this.FD=0,this.UD=0,this.BD=t.BD||100,this.sampleRate=t.sampleRate||44100,this.GD=t.GD||2,this.gain=t.gain||0,t.bufferSize?this.bufferSize=t.bufferSize:this.HD(1),this.WD=t.WD||(()=>{}),this.YD=t.YD||(()=>{}),this.VD=void 0,this.test=0}async init(){if(!this.ND){if('undefined'!=typeof process){const{CD:t}=await import('path'),{KD:i}=await import('module');globalThis.__dirname=t("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js"),globalThis.require=i("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js")}this.ND=await e(),this.XD=this.ND._malloc(this.bufferSize),this.zD=this.ND._malloc(8)}}HD(t){this.bufferSize=4*this.sampleRate*this.GD*t}jD(){if(!this.ND)throw new Error(`${this.constructor.name} not initalized. call .init()`)}ZD(t){this.jD();const{_malloc:i,_free:s,_tsf_load_memory:h,_tsf_set_output:e,_tsf_channel_set_bank_preset:n,_tsf_set_max_voices:r,_tsf_channel_set_presetnumber:o}=this.ND;s(this.PD),this.PD=i(t.length),this.ND.HEAPU8.set(t,this.PD),this.FD=h(this.PD,t.length),e(this.FD,2===this.GD?0:2,this.sampleRate,this.gain)}qD(){this.jD();const t=new Uint8Array(this.bufferSize);return t.set(this.ND.HEAPU8.subarray(this.XD,this.XD+this.bufferSize)),t}$D(t){const{_malloc:i,_free:s,_tml_load_memory:h}=this.ND;return s(this.UD),this.UD=i(t.length),this.ND.HEAPU8.set(t,this.UD),h(this.UD,t.length)}JD(t){const{_midi_render:i}=this.ND;return i(this.FD,t,this.GD,this.sampleRate,this.XD,this.bufferSize,this.zD)}QD(t){if(this.jD(),!this.FD)throw new Error('no soundfont buffer set. call .setSoundfont');window.clearTimeout(this.VD);const{setValue:i,getValue:s}=this.ND;i(this.zD,0,'double'),this.ND._tsf_reset(this.FD),this.ND._tsf_channel_set_bank_preset(this.FD,9,128,0),t[0]==='R'.charCodeAt(0)&&(t=t.slice(20));let h=this.$D(t);const e=()=>{h=this.JD(h);const t=this.qD();this.WD(t),h?this.VD=setTimeout(e,this.BD):this.YD(s(this.zD,'double'))};this.VD=setTimeout(e,16)}};!function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(window.audioContext=new window.AudioContext);var t=function(i){if(window.audioContext){var s=window.audioContext.createBuffer(1,1,22050),h=window.audioContext.createBufferSource();h.buffer=s,h.connect(window.audioContext.destination),h.start?h.start(0):h.play?h.play(0):h.noteOn&&h.noteOn(0)}document.removeEventListener('touchstart',t),document.removeEventListener('touchend',t),document.removeEventListener('click',t)};document.addEventListener('touchstart',t),document.addEventListener('touchend',t),document.addEventListener('click',t)}(),(async()=>{let t=new Float32Array,i=window.audioContext.createGain();i.gain.value=.1,i.connect(window.audioContext.destination);let s=window.audioContext.currentTime,h=[];const e=new n({BD:30,WD:i=>{let s=new Float32Array(i.buffer),h=new Float32Array(t.length+s.length);h.set(t,0),h.set(s,t.length),t=h},YD:t=>{},bufferSize:102400});await e.init();const r=await fetch('./SCC1_Florestan.sf2'),o=new Uint8Array(await r.arrayBuffer());function l(){if(!window.audioContext||!t.length)return;let e=window.audioContext.createBufferSource();const n=t.length/2,r=window.audioContext.createBuffer(2,n,44100);for(let i=0;i<2;i++){const s=r.getChannelData(i);let h=i;for(let i=0;i<n;i++)s[i]=t[h],h+=2}s<window.audioContext.currentTime&&(s=window.audioContext.currentTime),e.buffer=r,e.connect(i),e.start(s),h.push(e),s+=r.duration,t=new Float32Array}let a;e.ZD(o),window._tinyMidiStop=async()=>{if(a&&clearInterval(a),t=new Float32Array,h.length){let t=i.gain.value;i.gain.value=0,h.forEach((t=>{t.stop(window.audioContext.currentTime)})),h=[],i.gain.value=t}},window._tinyMidiVolume=(t=1)=>{i.gain.value=t},window._tinyMidiPlay=async(t,i=1)=>{t&&(await window._tinyMidiStop(),-1!=i&&window._tinyMidiVolume(i),s=window.audioContext.currentTime,a=setInterval(l,250),e.QD(t))}})()},8227:(t,i,s)=>{t.exports=s.p+"9f86b5397894e28b5ae2.wasm"}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,r),s.exports}r.m=e,t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",i="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",h=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},r.a=(e,n,r)=>{var o;r&&((o=[]).d=-1);var l,a,c,f=new Set,u=e.exports,d=new Promise(((t,i)=>{c=i,a=t}));d[i]=u,d[t]=t=>(o&&t(o),f.forEach(t),d.catch((t=>{}))),e.exports=d,n((e=>{var n;l=(e=>e.map((e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var n=[];n.d=0,e.then((t=>{r[i]=t,h(n)}),(t=>{r[s]=t,h(n)}));var r={};return r[t]=t=>t(n),r}}var o={};return o[t]=t=>{},o[i]=e,o})))(e);var r=()=>l.map((t=>{if(t[s])throw t[s];return t[i]})),a=new Promise((i=>{(n=()=>i(r)).r=0;var s=t=>t!==o&&!f.has(t)&&(f.add(t),t&&!t.d&&(n.r++,t.push(n)));l.map((i=>i[t](s)))}));return n.r?a:r()}),(t=>(t?c(d[s]=t):a(u),h(o)))),o&&o.d<0&&(o.d=0)},r.d=(t,i)=>{for(var s in i)r.o(i,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},r.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r.p="/Client2/",r.b=document.baseURI||self.location.href;r(7906)})();