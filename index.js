(()=>{"use strict";var t,i,s,h,e={1651:(t,i,s)=>{s.d(i,{K:()=>k});var h=s(1120),e=s(4583),n=s(2901),r=s(1069),o=s(7046),l=(s(9896),s(6666)),a=s(3045),c=s(818),f=s(670),u=s(8268),d=s(3867),w=s(7854),A=s(8950),y=s(1302),p=s(9298),m=s(8665),I=s(1312),_=s(3819),E=s(8317),g=s(9234),C=s(1908),T=s(123),O=s(5637),b=s(6948),v=s(2164),L=s(8738),R=s(3764),S=s(8534),M=s(6730);class k extends o.A{static tt=225;static it=10;static portOffset=0;static members=!0;static st=!1;static ht='';static et='';static nt=!1;static rt=2;static ot=!1;static lt='https://raw.githubusercontent.com/2004scape/Server/main';static exponent=58778699976184461502525193738213253649000149147835990136706041084440742975821n;static ct=7162900525229798032761816791230527296329313291232324290237849263501208207972894053929065636522363163621000728841182238772712427862772219676577293600221789n;static ft=0;static ut=0;static dt=0;static wt=0;static At=0;static yt=0;static It=0;static _t=0;static Et=0;static gt=0;static Ct=0;static Tt=0;static Ot=0;static bt=0;static vt=0;static Lt=()=>{a.A.st=!1,e.A.st=!1,k.st=!1,c.A.st=!1};static Rt=()=>{a.A.st=!0,e.A.st=!0,k.st=!0,c.A.st=!0};St=2048;Mt=2047;kt=!1;xt=!1;Dt=!1;Nt=!1;db=null;Pt=0;Ft=[];stream=null;in=r.A.Ut(1);Bt=r.A.Ut(1);Gt=r.A.Ut(1);Ht=0n;Wt=0;Yt=0;Vt=0;Kt=null;Xt=0;packetSize=0;zt=0;jt=0;Zt=0;qt=null;$t=!0;Jt=0;Qt=0;ti=null;ii=null;si=null;hi=null;ei=null;ni=null;ri=null;oi=null;li=null;ai=null;ci=null;fi='';ui='';username='';password='';di=null;wi=null;Ai=null;yi=null;pi=[];mi=!1;Ii=null;_i=null;Ei=null;gi=null;Ci=null;Ti=null;Oi=null;bi=null;vi=null;Li=null;Ri=new Int32Array(256);Si=0;Mi=0;ki=0;xi=null;Di=null;Ni=null;Pi=null;Fi=null;Ui=null;Bi=null;Gi=null;Hi=null;Wi=null;Yi=null;Vi=null;Ki=null;Xi=null;zi=null;ji=null;Zi=null;qi=null;$i=null;Ji=null;Qi=null;ts=new Int32Array(33);ss=new Int32Array(33);hs=new Int32Array(151);es=new Int32Array(151);ns=null;rs=null;os=null;ls=null;cs=null;fs=null;us=new d.ds(13,null);ws=null;As=null;ys=new d.ds(50,null);ps=new d.ds(50,null);Is=new d.ds(20,null);_s=new d.ds(20,null);Es=null;gs=new d.ds(8,null);Cs=null;Ts=null;Os=null;bs=null;vs=null;Ls=null;Rs=null;Ss=null;Ms=null;ks=null;xs=null;Ds=null;Ns=null;Ps=null;Fs=null;Us=null;Bs=null;Gs=null;Hs=new d.ds(1e3,null);Ws=!1;Ys=!1;Vs=!1;Ks=!1;Xs=-1;zs=0;js=0;Zs=0;qs=0;$s=0;Js=0;Qs=!1;th=0;ih=0;sh=0;hh=0;eh=0;nh=0;rh=[];oh=-1;lh=-1;ah=new h.A;fh=78;uh=0;dh=0;wh=[];Ah=0;yh=0;ph=0;mh=0;Ih=0;_h=0;Eh=0;gh=0;Ch=[];Th=[];Oh=[];bh=[];Lh=null;Rh=-1;Sh=3;Mh=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];kh=0;xh=0;Dh=0;Nh=!1;Ph=0;Fh=!1;Uh='';Bh='';Gh=0;Hh='';Wh=!1;Yh=-1;Vh=new d.ds(100,null);Kh=new d.ds(100,null);messageType=new Int32Array(100);Xh=new Int32Array(100);zh=0;jh=0;Zh=0;qh='';$h=0;Jh=0;Qh=0;te=0;ie=0;se=0;he=0;ee=0;ne=0;re=!1;oe=0;le=0;ae=0;ce=0;fe=null;ue=0;de=0;we=0;Ae=0;ye=!1;pe=[];me=[];Ie=0;_e=0;Ee=0;ge=null;Ce=0;Te=new Int32Array(500);Oe=new Int32Array(500);be=new Int32Array(500);ve=new Int32Array(500);Le=0;Re=0;Se=0;Me='';ke=!1;xe=-1;De=0;Ne=0;Pe=0;Fe=0;Ue=0;Be=new Int32Array(1e3);Ge=new Int32Array(1e3);He=null;We=0;Ye=0;Ve=0;Ke=0;Xe=0;ze=!1;je=0;Ze=0;qe=0;$e=0;Je=2;Qe=2;tn=1;sn=new Int32Array(5);hn=new d.ds(5,!1);en=new Int32Array(5);nn=new Int32Array(5);rn=new Int32Array(5);ln=0;an=0;cn=0;fn=0;un=0;dn=0;wn=0;An=0;yn=0;pn=1;mn=2;In=-1;_n=0;En=0;gn=0;Cn=0;Tn=0;On=0;bn=null;vn=null;Ln=null;Rn=0;Sn=0;Mn=new Int8Array(16384);kn=new d.ds(f.A.xn,null);Dn=0;Nn=0;Pn=128;Fn=0;Un=0;Bn=0;Gn=0;Hn=0;Wn=null;Yn=null;Vn=new d.Kn(f.A.Xn,f.A.Xn);zn=0;jn=0;Zn=0;qn=0;$n=0;Jn=0;Qn=0;tr=0;ir=0;sr=0;hr=0;er=0;nr=new d.ds(this.St,null);rr=0;lr=new Int32Array(this.St);ar=0;cr=0;ur=new Int32Array(this.St);dr=new Int32Array(1e3);wr=new d.ds(this.St,null);Ar=new d.ds(8192,null);yr=0;pr=new Int32Array(8192);mr=new l.A;Ir=new l.A;_r=new l.A;Er=new l.A;gr=new d.Cr(f.A.xn,f.A.Xn,f.A.Xn,null);Tr=new l.A;Or=new Int32Array(4e3);br=new Int32Array(4e3);vr=new Int32Array(f.A.Xn*f.A.Xn);Lr=new Int32Array(f.A.Xn*f.A.Xn);Rr=0;Sr=null;Mr=0;kr=0;Dr=-1;Nr=0;Pr=0;Fr=0;Ur=0;Br=!1;Gr=!0;Hr=!1;Wr=new Int32Array(7);Yr=new Int32Array(5);Vr=0;Kr=0;static Xr=50;zr=new Int32Array(k.Xr);jr=new Int32Array(k.Xr);Zr=new Int32Array(k.Xr);qr=new Int32Array(k.Xr);$r=new Int32Array(k.Xr);Jr=new Int32Array(k.Xr);Qr=new Int32Array(k.Xr);io=new d.ds(k.Xr,null);so=new d.ds(100,null);ho=new BigInt64Array(100);eo=new Int32Array(100);no=null;ro=0;oo=!0;lo=new Int32Array(50);ao=new Int32Array(50);co=new Int32Array(50);fo=192;uo=-1;do=-1;wo=0;Ao=0;yo=0;po=!0;mo=null;Io=0;_o=0;Eo=192;Co=new d.ds(16,null);To=0;Oo=!1;bo=()=>{try{this.stream&&this.stream.close()}catch(t){}this.stream=null,(0,T.vo)(!1),this.Bt=null,this.Gt=null,this.in=null,this.Ln=null,this.bn=null,this.vn=null,this.Wn=null,this.Yn=null,this.He=null,this.kn=null,this.vr=null,this.Lr=null,this.Or=null,this.br=null,this.Mn=null,this.Di=null,this.Ni=null,this.Pi=null,this.Fi=null,this.Ui=null,this.Bi=null,this.Gi=null,this.Hi=null,this.Wi=null,this.Yi=null,this.Vi=null,this.Ki=null,this.Xi=null,this.zi=null,this.ji=null,this.Zi=null,this.qi=null,this.ns=null,this.os=null,this.rs=null,this.ls=null,this.cs=null,this.fs=null,this.us=null,this.Rs=null,this.Ss=null,this.Ms=null,this.ks=null,this.xs=null,this.Ds=null,this.Ns=null,this.Ps=null,this.Fs=null,this.Us=null,this.As=null,this.Is=null,this._s=null,this.gs=null,this.Cs=null,this.Ts=null,this.Os=null,this.bs=null,this.ys=null,this.ps=null,this.Vn=null,this.nr=null,this.lr=null,this.ur=null,this.wr=null,this.dr=null,this.Ar=null,this.pr=null,this.gr=null,this.Tr=null,this.Er=null,this.mr=null,this.Ir=null,this._r=null,this.be=null,this.ve=null,this.Te=null,this.Oe=null,this.rh=null,this.pe=null,this.Be=null,this.Ge=null,this.Hs=null,this.ws=null,this.so=null,this.ho=null,this.eo=null,this.hi=null,this.ei=null,this.ti=null,this.ii=null,this.si=null,this.ni=null,this.ri=null,this.oi=null,this.li=null,this.Lo(),O.A.bo(),b.A.bo(),y.A.bo(),v.A.Ro=null,E.A.Ro=null,h.A.Ro=null,I.A.Ro=null,L.A.Ro=null,L.A.So=null,R.A.Ro=null,this.Mo=null,u.A.So=null,e.A.bo(),a.A.bo(),m.A.bo(),S.A.Ro=[],M.A.Ro=[]};ko(){return this.Jt}xo(){return this.Wh}Do(){return this.Fh}No(){return this.lh}Po(){return this.Xs}Lo=()=>{this.mi=!1,this.xi&&(clearInterval(this.xi),this.xi=null),this.ai=null,this.ci=null,this.pi=[],this.Oi=null,this.bi=null,this.vi=null,this.Li=null,this.gi=null,this.Ei=null,this.Ci=null,this.Ti=null,this.Ii=null,this._i=null};Fo=async(t,i,s,h)=>{let e=5,o=await(this.db?.Uo(t));if(o&&r.A.Bo(o)!==s&&(o=void 0),o)return new n.A(o);for(;!o;){await this.Go(h,`Requesting ${i}`);try{o=await(0,g.Ho)(`${k.et}/${t}${s}`)}catch(t){o=void 0;for(let t=e;t>0;t--)await this.Go(h,`Error loading - Will retry in ${t} secs.`),await(0,g.Wo)(1e3);e*=2,e>60&&(e=60)}}return await(this.db?.Yo(t,o)),new n.A(o)};Vo=async(t,i,s,h)=>{let e=await(this.db?.Uo(t+'.mid'));if(e&&12345678!==i&&r.A.Bo(e)!==i&&(e=void 0),!e)try{e=await(0,g.Ho)(`${k.et}/${t}_${i}.mid`),s!==e.length&&(e=e.slice(0,s))}catch(t){}if(!e)return;await(this.db?.Yo(t+'.mid',e));const n=new r.A(Uint8Array.from(e)).Ko,o=C.A.read(n,e,s,4);(0,T.Xo)(o,this.Eo,h)};zo=()=>{if(w.jo.fillStyle='black',w.jo.fillRect(0,0,this.width,this.height),this.Zo(1),this.Dt){this.mi=!1,w.jo.font='bold 16px helvetica, sans-serif',w.jo.textAlign='left',w.jo.fillStyle='yellow';let t=35;w.jo.fillText('Sorry, an error has occured whilst loading RuneScape',30,t),t+=50,w.jo.fillStyle='white',w.jo.fillText('To fix this try the following (in order):',30,t),t+=50,w.jo.font='bold 12px helvetica, sans-serif',w.jo.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.jo.fillText('2: Try clearing your web-browsers cache from tools->internet options',30,t),t+=30,w.jo.fillText('3: Try using a different game-world',30,t),t+=30,w.jo.fillText('4: Try rebooting your computer',30,t),t+=30,w.jo.fillText('5: Try selecting a different version of Java from the play-game menu',30,t)}if(this.Nt&&(this.mi=!1,w.jo.font='bold 20px helvetica, sans-serif',w.jo.textAlign='left',w.jo.fillStyle='white',w.jo.fillText('Error - unable to load game!',50,50),w.jo.fillText('To play RuneScape make sure you play from',50,100),w.jo.fillText('https://2004scape.org',50,150)),this.xt){this.mi=!1,w.jo.font='bold 13px helvetica, sans-serif',w.jo.textAlign='left',w.jo.fillStyle='yellow';let t=35;w.jo.fillText('Error a copy of RuneScape already appears to be loaded',30,t),t+=50,w.jo.fillStyle='white',w.jo.fillText('To fix this try the following (in order):',30,t),t+=50,w.jo.font='bold 12px helvetica, sans-serif',w.jo.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.jo.fillText('2: Try rebooting your computer, and reloading',30,t)}};qo=t=>{if(!t.$o)return!1;for(let i=0;i<t.$o.length;i++){const s=this.Jo(t,i);if(!t.Qo)return!1;const h=t.Qo[i];if(2===t.$o[i]){if(s>=h)return!1}else if(3===t.$o[i]){if(s<=h)return!1}else if(4===t.$o[i]){if(s===h)return!1}else if(s!==h)return!1}return!0};tl=(t,i,s,h,e)=>{this.vs?.draw(t,i),this.Ls?.draw(t,i+e-16),A.A.fillRect(t,i+16,16,e-32,p.A.il);let n=(e-32)*e/h|0;n<8&&(n=8);const r=(e-n-32)*s/(h-e)|0;A.A.fillRect(t,i+r+16,16,n,p.A.sl),A.A.hl(t,i+r+16,p.A.el,n),A.A.hl(t+1,i+r+16,p.A.el,n),A.A.nl(t,i+r+16,p.A.el,16),A.A.nl(t,i+r+17,p.A.el,16),A.A.hl(t+15,i+r+16,p.A.rl,n),A.A.hl(t+14,i+r+17,p.A.rl,n-1),A.A.nl(t,i+r+n+15,p.A.rl,16),A.A.nl(t+1,i+r+n+14,p.A.rl,15)};ol=(t,i)=>{let s=!1;const e=h.A.Ro[t];if(!e.ll)return!1;for(let t=0;t<e.ll.length&&-1!==e.ll[t];t++){const n=h.A.Ro[e.ll[t]];if(1===n.type&&(s||=this.ol(n.id,i)),6===n.type&&(-1!==n.al||-1!==n.cl)){let t;if(t=this.qo(n)?n.cl:n.al,-1!==t){const h=I.A.Ro[t];if(n.fl+=i,h.delay)for(;n.fl>h.delay[n.ul];)n.fl-=h.delay[n.ul]+1,n.ul++,n.ul>=h.dl&&(n.ul-=h.wl,(n.ul<0||n.ul>=h.dl)&&(n.ul=0)),s=!0}}}return s};Al=(t,i,s,n,r=!1)=>{if(0!==t.type||!t.ll||t.hide&&this.$h!==t.id&&this.Jh!==t.id&&this.Qh!==t.id)return;const o=A.A.left,l=A.A.top,a=A.A.right,c=A.A.bottom;A.A.yl(i,s,i+t.width,s+t.height);const f=t.ll.length;for(let o=0;o<f;o++){if(!t.pl||!t.ml)continue;let l=t.pl[o]+i,a=t.ml[o]+s-n;const c=h.A.Ro[t.ll[o]];if(l+=c.x,a+=c.y,r&&A.A.Il(l,a,c.width,c.height,p.A._l),c.El>0&&this.gl(c),c.type===h.A.Cl)c.Tl>c.scroll-c.height&&(c.Tl=c.scroll-c.height),c.Tl<0&&(c.Tl=0),this.Al(c,l,a,c.Tl,r),c.scroll>c.height&&this.tl(l+c.width,a,c.Tl,c.scroll,c.height);else if(c.type===h.A.Ol){let t=0;for(let i=0;i<c.height;i++)for(let s=0;s<c.width;s++){if(!(c.bl&&c.vl&&c.Ll&&c.Rl))continue;let h=l+s*(c.Sl+32),e=a+i*(c.Ml+32);if(t<20&&(h+=c.bl[t],e+=c.vl[t]),c.Ll[t]>0){let i=0,s=0;const n=c.Ll[t]-1;if(h>=-32&&h<=512&&e>=-32&&e<=334||0!==this.se&&this.ie===t){const r=y.A.kl(n,c.Rl[t]);if(0!==this.se&&this.ie===t&&this.te===c.id?(i=this.xl-this.he,s=this.Dl-this.ee,i<5&&i>-5&&(i=0),s<5&&s>-5&&(s=0),this.ne<5&&(i=0,s=0),r.Nl(128,h+i,e+s)):0!==this.ue&&this.de===t&&this.we===c.id?r.Nl(128,h,e):r.draw(h,e),33===r.Pl||1!==c.Rl[t]){const n=c.Rl[t];this.di?.Fl(h+i+1,e+10+s,this.Ul(n),p.A.Bl),this.di?.Fl(h+i,e+9+s,this.Ul(n),p.A.Gl)}}}else if(c.Hl&&t<20){const i=c.Hl[t];i?.draw(h,e)}t++}}else if(c.type===h.A.Wl)c.fill?A.A.fillRect(l,a,c.width,c.height,c.Yl):A.A.Il(l,a,c.width,c.height,c.Yl);else if(c.type===h.A.Vl){const t=c.font;let i=c.Yl,s=c.text;if(this.Qh!==c.id&&this.Jh!==c.id&&this.$h!==c.id||0===c.Kl||(i=c.Kl),this.qo(c)&&(i=c.Xl,c.zl&&c.zl.length>0&&(s=c.zl)),c.jl===h.A.Zl&&this.ye&&(s='Please wait...',i=c.Yl),!t||!s)continue;for(let h=a+t.height;s.length>0;h+=t.height){if(-1!==s.indexOf('%')){for(;;){const t=s.indexOf('%1');if(-1===t)break;s=s.substring(0,t)+this.ql(this.Jo(c,0))+s.substring(t+2)}for(;;){const t=s.indexOf('%2');if(-1===t)break;s=s.substring(0,t)+this.ql(this.Jo(c,1))+s.substring(t+2)}for(;;){const t=s.indexOf('%3');if(-1===t)break;s=s.substring(0,t)+this.ql(this.Jo(c,2))+s.substring(t+2)}for(;;){const t=s.indexOf('%4');if(-1===t)break;s=s.substring(0,t)+this.ql(this.Jo(c,3))+s.substring(t+2)}for(;;){const t=s.indexOf('%5');if(-1===t)break;s=s.substring(0,t)+this.ql(this.Jo(c,4))+s.substring(t+2)}}const e=s.indexOf('\\n');let n;-1!==e?(n=s.substring(0,e),s=s.substring(e+2)):(n=s,s=''),c.$l?t.Jl(l+(c.width/2|0),h,n,i,c.Ql):t.ta(l,h,n,i,c.Ql)}}else if(c.type===h.A.ia){let t;t=this.qo(c)?c.sa:c.ha,t?.draw(l,a)}else if(c.type===h.A.ea){const t=e.A.na,i=e.A.ra;e.A.na=l+(c.width/2|0),e.A.ra=a+(c.height/2|0);const s=e.A.sin[c.oa]*c.zoom>>16,h=e.A.cos[c.oa]*c.zoom>>16,n=this.qo(c);let r;r=n?c.cl:c.al;let o=null;if(-1===r)o=c.la(-1,-1,n);else{const t=I.A.Ro[r];t.frames&&t.aa&&(o=c.la(t.frames[c.ul],t.aa[c.ul],n))}o&&o.ca(0,c.fa,0,c.oa,0,s,h),e.A.na=t,e.A.ra=i}else if(c.type===h.A.ua){const t=c.font;if(!t||!c.Ll||!c.Rl)continue;let i=0;for(let s=0;s<c.height;s++)for(let h=0;h<c.width;h++){if(c.Ll[i]>0){const e=y.A.get(c.Ll[i]-1);let n=e.name;if((e.da||1!==c.Rl[i])&&(n=n+' x'+this.wa(c.Rl[i])),!n)continue;const r=l+h*(c.Sl+115),o=a+s*(c.Ml+12);c.$l?t.Jl(r+(c.width/2|0),o,n,c.Yl,c.Ql):t.ta(r,o,n,c.Yl,c.Ql)}i++}}}A.A.yl(o,l,a,c)};gl=t=>{let i=t.El;if(i>=h.A.Aa&&i<=h.A.ya)i--,i>=this.Vr?(t.text='',t.jl=0):(t.text=this.so[i],t.jl=1);else if(i>=h.A.pa&&i<=h.A.ma)i-=h.A.pa,i>=this.Vr?(t.text='',t.jl=0):(0===this.eo[i]?t.text='@red@Offline':this.eo[i]===k.it?t.text='@gre@World-'+(this.eo[i]-9):t.text='@yel@World-'+(this.eo[i]-9),t.jl=1);else if(i===h.A.Ia)t.scroll=15*this.Vr+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i>=h.A._a&&i<=h.A.Ea)i-=h.A._a,i>=this.dh?(t.text='',t.jl=0):(t.text=_.A.ga(_.A.Ca(this.wh[i])),t.jl=1);else if(i===h.A.Ta)t.scroll=15*this.dh+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i===h.A.Oa){if(t.oa=150,t.fa=256*Math.sin(this.Pt/40)&2047,this.Hr){this.Hr=!1;const i=new d.ds(7,null);let s=0;for(let t=0;t<7;t++){const h=this.Wr[t];h>=0&&(i[s++]=E.A.Ro[h].la())}const h=m.A.ba(i,s);for(let t=0;t<5;t++)0!==this.Yr[t]&&(h.va(u.A.La[t][0],u.A.La[t][this.Yr[t]]),1===t&&h.va(u.A.Ra[0],u.A.Ra[this.Yr[t]]));if(this.Sr){const i=I.A.Ro[this.Sr.Sa].frames;i&&(h.Ma(),h.ka(i[0]),h.xa(64,850,-30,-50,-30,!0),t.model=h)}}}else if(i===h.A.Da)this.Bs||(this.Bs=t.ha,this.Gs=t.sa),this.Gr?t.ha=this.Gs:t.ha=this.Bs;else if(i===h.A.Na)this.Bs||(this.Bs=t.ha,this.Gs=t.sa),this.Gr?t.ha=this.Bs:t.ha=this.Gs;else if(i===h.A.Pa)t.text=this.Me,this.Pt%20<10?t.text=t.text+'|':t.text=t.text+' ';else if(i===h.A.Fa)this.Br?this.ke?(t.Yl=p.A.RED,t.text='Moderator option: Mute player for 48 hours: <ON>'):(t.Yl=p.A._l,t.text='Moderator option: Mute player for 48 hours: <OFF>'):t.text='';else if(i===h.A.Ua||i===h.A.Ba)if(0===this.De)t.text='';else{let i;i=0===this.Ne?'earlier today':1===this.Ne?'yesterday':this.Ne+' days ago',t.text='You last logged in '+i+' from: '+_.A.Ga(this.De)}else if(i===h.A.Ha)0===this.Fe&&(t.text='0 unread messages',t.Yl=p.A.Gl),1===this.Fe&&(t.text='1 unread message',t.Yl=p.A.GREEN),this.Fe>1&&(t.text=this.Fe+' unread messages',t.Yl=p.A.GREEN);else if(i===h.A.Wa)if(201===this.Pe)t.text='';else if(200===this.Pe)t.text='You have not yet set any password recovery questions.';else{let i;i=0===this.Pe?'Earlier today':1===this.Pe?'Yesterday':this.Pe+' days ago',t.text=i+' you changed your recovery questions'}else i===h.A.Ya?201===this.Pe?t.text='':200===this.Pe?t.text='We strongly recommend you do so now to secure your account.':t.text='If you do not remember making this change then cancel it immediately':i===h.A.Va&&(201===this.Pe?t.text='':(this.Pe,t.text="Do this from the 'account management' area on our front webpage"))};Jo=(t,i)=>{if(!t.scripts||i>=t.scripts.length)return-2;try{const s=t.scripts[i];if(!s)return-1;let e=0,n=0;for(;;){const t=s[n++];if(0===t)return e;if(1===t)e+=this.Th[s[n++]];else if(2===t)e+=this.Oh[s[n++]];else if(3===t)e+=this.Ch[s[n++]];else if(4===t){const t=h.A.Ro[s[n++]],i=s[n++]+1;if(t.Ll&&t.Rl)for(let s=0;s<t.Ll.length;s++)t.Ll[s]===i&&(e+=t.Rl[s]);else e+=0}else if(5===t)e+=this.pe[s[n++]];else if(6===t)e+=this.bh[this.Oh[s[n++]]-1];else if(7===t)e+=100*this.pe[s[n++]]/46875|0;else if(8===t)e+=this.Sr?.Ka||0;else if(9===t)for(let t=0;t<19;t++)18===t&&(t=20),e+=this.Oh[t];else if(10===t){const t=h.A.Ro[s[n++]],i=s[n++]+1;for(let s=0;s<t.Ll.length;s++)if(t.Ll[s]===i){e+=999999999;break}}else if(11===t)e+=this.Mr;else if(12===t)e+=this.Nr;else if(13===t){const t=this.pe[s[n++]];e+=t&1<<s[n++]?1:0}}}catch(t){return-1}};ql=t=>t<999999999?String(t):'*';wa=t=>{let i=String(t);for(let t=i.length-3;t>0;t-=3)i=i.substring(0,t)+','+i.substring(t);return i.length>8?i='@gre@'+i.substring(0,i.length-8)+' million @whi@('+i+')':i.length>4&&(i='@cya@'+i.substring(0,i.length-4)+'K @whi@('+i+')'),' '+i};Ul=t=>t<1e5?String(t):t<1e7?(t/1e3|0)+'K':(t/1e6|0)+'M'}},7604:(t,i,s)=>{s.d(i,{w:()=>r});var h=s(7046),e=s(1651),n=s(9234);async function r(){await async function(){0===h.A.getParameter('world').length&&h.A.setParameter('world','1');'0'===h.A.getParameter('world')?(e.K.ht='http://localhost',e.K.et='http://localhost',e.K.portOffset=0):await async function(t){const i=await o(t,parseInt(h.A.getParameter('world'),10)),s=new URL(i.address);e.K.it=10+i.id-1,e.K.ht=`${s.protocol}//${s.hostname}`,e.K.et=`${s.protocol}//${s.hostname}:${s.port}`,t||(e.K.ht=e.K.ht.replace('https:','http:'));e.K.portOffset=i.portOffset,e.K.members=!0===i?.members,h.A.setParameter('world',i.id.toString(10))}(window.location.protocol.startsWith('https'))}(),function(){0===h.A.getParameter('detail').length&&h.A.setParameter('detail','high');'low'===h.A.getParameter('detail')?e.K.Rt():e.K.Lt()}(),0===h.A.getParameter('method').length&&h.A.setParameter('method','0')}async function o(t,i,s=0){if(s>=10)throw new Error('could not find world to connect!');const h=t?'https:':'http:';let e;try{e=JSON.parse(await(0,n.Xa)(`${h}//2004scape.org/api/v1/worldlist`))}catch(h){return await(0,n.Wo)(1e3),o(t,i,++s)}e.push({id:0,region:'Local Development',address:'http://localhost',portOffset:0,members:!0,nr:0});const r=e.find((t=>t.id===i));return r||o(t,i,10)}},7906:(t,i,s)=>{s.a(t,(async(t,i)=>{try{var h=s(1312),e=s(5637),n=s(1302),r=s(6948),o=s(8317),l=s(8738),a=s(3764),c=s(1120),f=s(1183),u=s(8950),d=s(4583),w=s(1673),A=s(2511),y=s(2682),p=s(8665),m=s(9298),I=s(1069),_=s(3554),E=s(353),g=s(2634),C=s(4544),T=s(2215),O=s(3955),b=s(7953),v=s(2646),L=s(3937),R=(s(9896),s(1908)),S=s(6666),M=s(3819),k=s(2595),x=s(3045),D=s(818),N=s(5599),P=s(1023),F=s(6169),U=s(2630),B=s(5327),G=s(670),H=s(9456),W=s(8268),Y=s(8412),V=s(3606),K=s(4197),X=s(254),z=s(7628),j=s(123),Z=s(9234),q=s(3867),$=s(1651),J=s(8534),Q=s(6730),tt=s(2164),it=s(7604),st=s(3795),ht=s(4909);class t extends $.K{load=async()=>{if(this.kt)this.xt=!0;else{this.kt=!0;try{await this.Go(10,'Connecting to fileserver'),await R.A.load(await(await fetch('bz2.wasm')).arrayBuffer()),this.db=new C.A(await C.A.openDatabase());const t=new I.A(new Uint8Array(await(0,Z.Ho)(`${$.K.et}/crc`)));for(let i=0;i<9;i++)this.Ft[i]=t.Ko;$.K.st||await this.Vo('scape_main',12345678,4e4,!1);const i=await this.Fo('title','title screen',this.Ft[1],10);this.qt=i,this.di=y.A.za(i,'p11'),this.wi=y.A.za(i,'p12'),this.Ai=y.A.za(i,'b12'),this.yi=y.A.za(i,'q8'),await this.ja(),this.Za();const s=await this.Fo('config','config',this.Ft[2],15),u=await this.Fo('interface','interface',this.Ft[3],20),m=await this.Fo('media','2d graphics',this.Ft[4],30),_=await this.Fo('models','3d graphics',this.Ft[5],40),E=await this.Fo('textures','textures',this.Ft[6],60),g=await this.Fo('wordenc','chat system',this.Ft[7],65),T=await this.Fo('sounds','sound effects',this.Ft[8],70);this.Yn=new q.qa(G.A.xn,G.A.Xn,G.A.Xn),this.Wn=new q.$a(G.A.xn,G.A.Xn+1,G.A.Xn+1),this.Wn&&(this.He=new x.A(this.Wn,G.A.Xn,G.A.xn,G.A.Xn));for(let t=0;t<G.A.xn;t++)this.kn[t]=new G.A;this.ws=new A.A(512,512),await this.Go(75,'Unpacking media'),this.ns=w.A.za(m,'invback',0),this.rs=w.A.za(m,'chatback',0),this.os=w.A.za(m,'mapback',0),this.ls=w.A.za(m,'backbase1',0),this.cs=w.A.za(m,'backbase2',0),this.fs=w.A.za(m,'backhmid1',0);for(let t=0;t<13;t++)this.us[t]=w.A.za(m,'sideicons',t);this.As=A.A.za(m,'compass',0);try{for(let t=0;t<50;t++)22!==t&&(this.ys[t]=w.A.za(m,'mapscene',t))}catch(t){}try{for(let t=0;t<50;t++)this.ps[t]=A.A.za(m,'mapfunction',t)}catch(t){}try{for(let t=0;t<20;t++)this.Is[t]=A.A.za(m,'hitmarks',t)}catch(t){}try{for(let t=0;t<20;t++)this._s[t]=A.A.za(m,'headicons',t)}catch(t){}this.Es=A.A.za(m,'mapflag',0);for(let t=0;t<8;t++)this.gs[t]=A.A.za(m,'cross',t);this.Cs=A.A.za(m,'mapdots',0),this.Ts=A.A.za(m,'mapdots',1),this.Os=A.A.za(m,'mapdots',2),this.bs=A.A.za(m,'mapdots',3),this.vs=w.A.za(m,'scrollbar',0),this.Ls=w.A.za(m,'scrollbar',1),this.Rs=w.A.za(m,'redstone1',0),this.Ss=w.A.za(m,'redstone2',0),this.Ms=w.A.za(m,'redstone3',0),this.ks=w.A.za(m,'redstone1',0),this.ks?.Ja(),this.xs=w.A.za(m,'redstone2',0),this.xs?.Ja(),this.Ds=w.A.za(m,'redstone1',0),this.Ds?.Qa(),this.Ns=w.A.za(m,'redstone2',0),this.Ns?.Qa(),this.Ps=w.A.za(m,'redstone3',0),this.Ps?.Qa(),this.Fs=w.A.za(m,'redstone1',0),this.Fs?.Ja(),this.Fs?.Qa(),this.Us=w.A.za(m,'redstone2',0),this.Us?.Ja(),this.Us?.Qa();const O=A.A.za(m,'backleft1',0);this.Hi=new f.A(O.width,O.height),O.tc(0,0);const v=A.A.za(m,'backleft2',0);this.Wi=new f.A(v.width,v.height),v.tc(0,0);const S=A.A.za(m,'backright1',0);this.Yi=new f.A(S.width,S.height),S.tc(0,0);const M=A.A.za(m,'backright2',0);this.Vi=new f.A(M.width,M.height),M.tc(0,0);const k=A.A.za(m,'backtop1',0);this.Ki=new f.A(k.width,k.height),k.tc(0,0);const D=A.A.za(m,'backtop2',0);this.Xi=new f.A(D.width,D.height),D.tc(0,0);const N=A.A.za(m,'backvmid1',0);this.zi=new f.A(N.width,N.height),N.tc(0,0);const P=A.A.za(m,'backvmid2',0);this.ji=new f.A(P.width,P.height),P.tc(0,0);const F=A.A.za(m,'backvmid3',0);this.Zi=new f.A(F.width,F.height),F.tc(0,0);const U=A.A.za(m,'backhmid2',0);this.qi=new f.A(U.width,U.height),U.tc(0,0);const B=(21*Math.random()|0)-10,H=(21*Math.random()|0)-10,W=(21*Math.random()|0)-10,Y=(41*Math.random()|0)-20;for(let t=0;t<50;t++)this.ps[t]&&this.ps[t]?.translate(B+Y,H+Y,W+Y),this.ys[t]&&this.ys[t]?.translate(B+Y,H+Y,W+Y);await this.Go(80,'Unpacking textures'),d.A.ic(E),d.A.sc(.8),d.A.hc(20),await this.Go(83,'Unpacking models'),p.A.ec(_),J.A.ec(_),Q.A.ec(_),await this.Go(86,'Unpacking config'),h.A.ec(s),e.A.ec(s),tt.A.ec(s),n.A.ec(s,$.K.members),r.A.ec(s),o.A.ec(s),l.A.ec(s),a.A.ec(s),$.K.st||(await this.Go(90,'Unpacking sounds'),L.A.ec(T)),await this.Go(92,'Unpacking interfaces'),c.A.ec(u,m,[this.di,this.wi,this.Ai,this.yi]),await this.Go(97,'Preparing game engine');for(let t=0;t<33;t++){let i=999,s=0;for(let h=0;h<35;h++)if(0===this.os.nc[h+t*this.os.width])999===i&&(i=h);else if(999!==i){s=h;break}this.ts[t]=i,this.ss[t]=s-i}for(let t=9;t<160;t++){let i=999,s=0;for(let h=10;h<168;h++)if(0===this.os.nc[h+t*this.os.width]&&(h>34||t>34))999===i&&(i=h);else if(999!==i){s=h;break}this.hs[t-9]=i-21,this.es[t-9]=s-i}d.A.rc(479,96),this.$i=d.A.oc,d.A.rc(190,261),this.Ji=d.A.oc,d.A.rc(512,334),this.Qi=d.A.oc;const V=new Int32Array(9);for(let t=0;t<9;t++){const i=32*t+128+15,s=3*i+600,h=d.A.sin[i];V[t]=s*h>>16}x.A.init(512,334,500,800,V),b.A.ec(g),this.lc()}catch(t){console.error(t),this.Dt=!0}}};update=async()=>{this.xt||this.Dt||this.Nt||(this.Pt++,this.ac?await this.cc():await this.fc())};draw=async()=>{this.xt||this.Dt||this.Nt?this.zo():(this.ac?this.uc():await this.dc(),this.zs=0)};refresh=()=>{this.$t=!0};Go=async(t,i)=>{if(console.log(`${t}%: ${i}`),await this.wc(),!this.qt)return void await super.Go(t,i);this.si?.bind();this.Ai?.Ac(180,54,'RuneScape is loading - please wait...',m.A._l);u.A.Il(28,62,304,34,m.A.yc),u.A.Il(29,63,302,32,m.A.Bl),u.A.fillRect(30,64,3*t,30,m.A.yc),u.A.fillRect(30+3*t,64,300-3*t,30,m.A.Bl),this.Ai?.Ac(180,85,i,m.A._l),this.si?.draw(214,186),this.$t&&(this.$t=!1,this.mi||(this.hi?.draw(0,0),this.ei?.draw(661,0)),this.ti?.draw(128,0),this.ii?.draw(214,386),this.ni?.draw(0,265),this.ri?.draw(574,265),this.oi?.draw(128,186),this.li?.draw(574,186)),await(0,Z.Wo)(5)};mc=()=>{this.mi&&(this.Ic(),this.Ic(),this._c())};wc=async()=>{this.ti||(this.Mo=null,this.Fi=null,this.Ni=null,this.Di=null,this.Pi=null,this.Ui=null,this.Bi=null,this.Gi=null,this.hi=new f.A(128,265),u.A.clear(),this.ei=new f.A(128,265),u.A.clear(),this.ti=new f.A(533,186),u.A.clear(),this.ii=new f.A(360,146),u.A.clear(),this.si=new f.A(360,200),u.A.clear(),this.ni=new f.A(214,267),u.A.clear(),this.ri=new f.A(215,267),u.A.clear(),this.oi=new f.A(86,79),u.A.clear(),this.li=new f.A(87,79),u.A.clear(),this.qt&&(await this.ja(),this.Za()),this.$t=!0)};ja=async()=>{if(!this.qt)return;const t=await A.A.Ec(this.qt,'title');this.hi?.bind(),t.tc(0,0),this.ei?.bind(),t.tc(-661,0),this.ti?.bind(),t.tc(-128,0),this.ii?.bind(),t.tc(-214,-386),this.si?.bind(),t.tc(-214,-186),this.ni?.bind(),t.tc(0,-265),this.ri?.bind(),t.tc(-128,-186),this.oi?.bind(),t.tc(-128,-186),this.li?.bind(),t.tc(-574,-186),t.Ja(),this.hi?.bind(),t.tc(394,0),this.ei?.bind(),t.tc(-267,0),this.ti?.bind(),t.tc(266,0),this.ii?.bind(),t.tc(180,-386),this.si?.bind(),t.tc(180,-186),this.ni?.bind(),t.tc(394,-265),this.ri?.bind(),t.tc(-180,-265),this.oi?.bind(),t.tc(212,-186),this.li?.bind(),t.tc(-180,-186);const i=A.A.za(this.qt,'logo');this.ti?.bind(),i.draw((this.width/2|0)-(i.width/2|0)-128,18)};gc=t=>{if(!this.gi||!this.Ei)return;this.gi.fill(0);for(let t=0;t<5e3;t++){const t=128*Math.random()*256|0;this.gi[t]=256*Math.random()|0}for(let t=0;t<20;t++){for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Ei[s]=(this.gi[s-1]+this.gi[s+1]+this.gi[s-128]+this.gi[s+128])/4|0}const t=this.gi;this.gi=this.Ei,this.Ei=t}if(t){let i=0;for(let s=0;s<t.height;s++)for(let h=0;h<t.width;h++)if(0!==t.nc[i++]){const i=h+t.Cc+16+(s+t.Tc+16<<7);this.gi[i]=0}}};Za=()=>{if(this.qt){this.ai=w.A.za(this.qt,'titlebox'),this.ci=w.A.za(this.qt,'titlebutton');for(let t=0;t<12;t++)this.pi[t]=w.A.za(this.qt,'runes',t);this.Ii=new A.A(128,265),this._i=new A.A(128,265),this.hi&&(0,Z.Oc)(this.hi.nc,0,this.Ii.nc,0,33920),this.ei&&(0,Z.Oc)(this.ei.nc,0,this._i.nc,0,33920),this.bi=new Int32Array(256);for(let t=0;t<64;t++)this.bi[t]=262144*t;for(let t=0;t<64;t++)this.bi[t+64]=1024*t+m.A.RED;for(let t=0;t<64;t++)this.bi[t+128]=4*t+m.A.Gl;for(let t=0;t<64;t++)this.bi[t+192]=m.A._l;this.vi=new Int32Array(256);for(let t=0;t<64;t++)this.vi[t]=1024*t;for(let t=0;t<64;t++)this.vi[t+64]=4*t+m.A.GREEN;for(let t=0;t<64;t++)this.vi[t+128]=262144*t+m.A.bc;for(let t=0;t<64;t++)this.vi[t+192]=m.A._l;this.Li=new Int32Array(256);for(let t=0;t<64;t++)this.Li[t]=4*t;for(let t=0;t<64;t++)this.Li[t+64]=262144*t+m.A.BLUE;for(let t=0;t<64;t++)this.Li[t+128]=1024*t+m.A.vc;for(let t=0;t<64;t++)this.Li[t+192]=m.A._l;this.Oi=new Int32Array(256),this.gi=new Int32Array(32768),this.Ei=new Int32Array(32768),this.gc(null),this.Ci=new Int32Array(32768),this.Ti=new Int32Array(32768),this.Go(10,'Connecting to fileserver').then((()=>{this.mi||(this.mi=!0,this.xi=setInterval(this.mc,35))}))}};fc=async()=>{if(0===this.Jt){let t=(this.width/2|0)-80,i=20+(this.height/2|0);i+=20,1===this.Lc&&this.Rc>=t-75&&this.Rc<=t+75&&this.Sc>=i-20&&this.Sc<=i+20&&(this.Jt=3,this.Qt=0),t=80+(this.width/2|0),1===this.Lc&&this.Rc>=t-75&&this.Rc<=t+75&&this.Sc>=i-20&&this.Sc<=i+20&&(this.fi='',this.ui='Enter your username & password.',this.Jt=2,this.Qt=0)}else if(2===this.Jt){let t=(this.height/2|0)-40;t+=30,t+=25,1===this.Lc&&this.Sc>=t-15&&this.Sc<t&&(this.Qt=0),t+=15,1===this.Lc&&this.Sc>=t-15&&this.Sc<t&&(this.Qt=1);let i=(this.width/2|0)-80,s=50+(this.height/2|0);for(s+=20,1===this.Lc&&this.Rc>=i-75&&this.Rc<=i+75&&this.Sc>=s-20&&this.Sc<=s+20&&await this.Mc(this.username,this.password,!1),i=80+(this.width/2|0),1===this.Lc&&this.Rc>=i-75&&this.Rc<=i+75&&this.Sc>=s-20&&this.Sc<=s+20&&(this.Jt=0,this.username='',this.password='');;){const t=this.kc();if(-1===t)return;let i=!1;for(let s=0;s<y.A.xc.length;s++)if(String.fromCharCode(t)===y.A.xc.charAt(s)){i=!0;break}0===this.Qt?(8===t&&this.username.length>0&&(this.username=this.username.substring(0,this.username.length-1)),9!==t&&10!==t&&13!==t||(this.Qt=1),i&&(this.username=this.username+String.fromCharCode(t)),this.username.length>12&&(this.username=this.username.substring(0,12))):1===this.Qt&&(8===t&&this.password.length>0&&(this.password=this.password.substring(0,this.password.length-1)),9!==t&&10!==t&&13!==t||(this.Qt=0),i&&(this.password=this.password+String.fromCharCode(t)),this.password.length>20&&(this.password=this.password.substring(0,20)))}}else if(3===this.Jt){const t=this.width/2|0;let i=50+(this.height/2|0);i+=20,1===this.Lc&&this.Rc>=t-75&&this.Rc<=t+75&&this.Sc>=i-20&&this.Sc<=i+20&&(this.Jt=0)}};dc=async()=>{await this.wc(),this.si?.bind(),this.ai?.draw(0,0);if(0===this.Jt){let t=180,i=80;this.Ai?.Jl(t,i,'Welcome to RuneScape',m.A.Gl,!0),t=100,i=120,this.ci?.draw(t-73,i-20),this.Ai?.Jl(t,i+5,'New user',m.A._l,!0),t=260,this.ci?.draw(t-73,i-20),this.Ai?.Jl(t,i+5,'Existing User',m.A._l,!0)}else if(2===this.Jt){let t=100,i=60;this.fi.length>0?(this.Ai?.Jl(180,i-15,this.fi,m.A.Gl,!0),this.Ai?.Jl(180,i,this.ui,m.A.Gl,!0),i+=30):(this.Ai?.Jl(180,i-7,this.ui,m.A.Gl,!0),i+=30),this.Ai?.ta(90,i,`Username: ${this.username}${0===this.Qt&&this.Pt%40<20?'@yel@|':''}`,m.A._l,!0),i+=15,this.Ai?.ta(92,i,`Password: ${M.A.Dc(this.password)}${1===this.Qt&&this.Pt%40<20?'@yel@|':''}`,m.A._l,!0),i=150,this.ci?.draw(t-73,i-20),this.Ai?.Jl(t,i+5,'Login',m.A._l,!0),t=260,this.ci?.draw(t-73,i-20),this.Ai?.Jl(t,i+5,'Cancel',m.A._l,!0)}else if(3===this.Jt){this.Ai?.Jl(180,40,'Create a free account',m.A.Gl,!0);const t=180;let i=65;this.Ai?.Jl(180,i,'To create a new account you need to',m.A._l,!0),i+=15,this.Ai?.Jl(180,i,'go back to the main RuneScape webpage',m.A._l,!0),i+=15,this.Ai?.Jl(180,i,"and choose the red 'create account'",m.A._l,!0),i+=15,this.Ai?.Jl(180,i,'button at the top right of that page.',m.A._l,!0),i=150,this.ci?.draw(t-73,i-20),this.Ai?.Jl(t,i+5,'Cancel',m.A._l,!0)}this.si?.draw(214,186),this.$t&&(this.$t=!1,this.ti?.draw(128,0),this.ii?.draw(214,386),this.ni?.draw(0,265),this.ri?.draw(574,265),this.oi?.draw(128,186),this.li?.draw(574,186))};Mc=async(t,i,s)=>{try{s||(this.fi='',this.ui='Connecting to server...',await this.dc()),this.stream=new _.A(await _.A.Nc({host:$.K.ht,port:43594+$.K.portOffset})),await(this.stream?.Pc(this.in.data,0,8)),this.in.Fc=0,this.Ht=this.in.Uc;const h=new Int32Array([Math.floor(99999999*Math.random()),Math.floor(99999999*Math.random()),Number(this.Ht>>32n),Number(this.Ht&BigInt(4294967295))]);this.Bt.Fc=0,this.Bt.p1(10),this.Bt.p4(h[0]),this.Bt.p4(h[1]),this.Bt.p4(h[2]),this.Bt.p4(h[3]),this.Bt.p4(0),this.Bt.Bc(t),this.Bt.Bc(i),this.Bt.Gc($.K.ct,$.K.exponent),this.Gt.Fc=0,s?this.Gt.p1(18):this.Gt.p1(16),this.Gt.p1(this.Bt.Fc+36+1+1),this.Gt.p1($.K.tt),this.Gt.p1($.K.st?1:0);for(let t=0;t<9;t++)this.Gt.p4(this.Ft[t]);this.Gt.Hc(this.Bt.data,this.Bt.Fc,0),this.Bt.random=new g.A(h);for(let t=0;t<4;t++)h[t]+=50;this.Kt=new g.A(h),this.stream?.write(this.Gt.data,this.Gt.Fc);const e=await this.stream.read();if(1===e)return await(0,Z.Wo)(2e3),void await this.Mc(t,i,s);if(2===e||18===e){this.Br=18===e,k.A.Wc(),this.ac=!0,this.Bt.Fc=0,this.in.Fc=0,this.Xt=-1,this.zt=-1,this.jt=-1,this.Zt=-1,this.packetSize=0,this.Wt=0,this.Vt=0,this.Yt=0,this.Ah=0,this.nh=0,this.Qs=!1,this.Yc=0;for(let t=0;t<100;t++)this.Vh[t]=null;this.oe=0,this.Ie=0,this.We=0,this.ro=0,this.Ze=(100*Math.random()|0)-50,this.qe=(110*Math.random()|0)-55,this.$e=(80*Math.random()|0)-40,this.An=(120*Math.random()|0)-60,this.yn=(30*Math.random()|0)-20,this.Fn=(20*Math.random()|0)-10&2047,this.In=-1,this.Ke=0,this.Xe=0,this.rr=0,this.yr=0;for(let t=0;t<this.St;t++)this.nr[t]=null,this.wr[t]=null;for(let t=0;t<8192;t++)this.Ar[t]=null;this.Sr=this.nr[this.Mt]=new W.A,this.mr.clear(),this.Ir.clear(),this.Er.clear();for(let t=0;t<G.A.xn;t++)for(let i=0;i<G.A.Xn;i++)for(let s=0;s<G.A.Xn;s++)this.gr[t][i][s]=null;this.Tr=new S.A,this.Vr=0,this.Yh=-1,this.lh=-1,this.Xs=-1,this.oh=-1,this.ye=!1,this.Sh=3,this.Wh=!1,this.Qs=!1,this.Fh=!1,this.Lh=null,this.kr=0,this.Rh=-1,this.Gr=!0,this.Vc();for(let t=0;t<5;t++)this.Yr[t]=0;return(0,j.vo)(!0),$.K.It=0,$.K._t=0,$.K.Et=0,$.K.gt=0,$.K.Ct=0,$.K.Tt=0,$.K.Ot=0,$.K.bt=0,$.K.vt=0,void this.Kc()}if(3===e)return this.fi='',void(this.ui='Invalid username or password.');if(4===e)return this.fi='Your account has been disabled.',void(this.ui='Please check your message-centre for details.');if(5===e)return this.fi='Your account is already logged in.',void(this.ui='Try again in 60 secs...');if(6===e)return this.fi='RuneScape has been updated!',void(this.ui='Please reload this page.');if(7===e)return this.fi='This world is full.',void(this.ui='Please use a different world.');if(8===e)return this.fi='Unable to connect.',void(this.ui='Login server offline.');if(9===e)return this.fi='Login limit exceeded.',void(this.ui='Too many connections from your address.');if(10===e)return this.fi='Unable to connect.',void(this.ui='Bad session id.');if(11===e)return this.ui='Login server rejected session.',void(this.ui='Please try again.');if(12===e)return this.fi='You need a members account to login to this world.',void(this.ui='Please subscribe, or use a different world.');if(13===e)return this.fi='Could not complete login.',void(this.ui='Please try using a different world.');if(14===e)return this.fi='The server is being updated.',void(this.ui='Please wait 1 minute and try again.');if(15===e)return this.ac=!0,this.Bt.Fc=0,this.in.Fc=0,this.Xt=-1,this.zt=-1,this.jt=-1,this.Zt=-1,this.packetSize=0,this.Wt=0,this.Vt=0,this.nh=0,void(this.Qs=!1);if(16===e)return this.fi='Login attempts exceeded.',void(this.ui='Please wait 1 minute and try again.');17===e&&(this.fi='You are standing in a members-only area.',this.ui='To play on this world move to a free area first')}catch(t){console.log(t),this.fi='',this.ui='Error connecting to server.'}};cc=async()=>{if(null!==this.nr){this.Vt>1&&this.Vt--,this.Yt>0&&this.Yt--;for(let t=0;t<5&&await this.read();t++);if(this.ac){for(let t=0;t<this.ro;t++)if(this.co[t]<=0){try{const i=L.A.Xc(this.lo[t],this.ao[t]);if(!i)throw new Error;Date.now()+(i.Fc/22|0)>this.Ao+(this.wo/22|0)&&(this.wo=i.Fc,this.Ao=Date.now(),this.uo=this.lo[t],this.do=this.ao[t],await(0,j.zc)(i.data.slice(0,i.Fc),this.fo))}catch(t){console.error(t)}this.ro--;for(let i=t;i<this.ro;i++)this.lo[i]=this.lo[i+1],this.ao[i]=this.ao[i+1],this.co[i]=this.co[i+1];t--}else this.co[t]--;this.yo>0&&(this.yo-=20,this.yo<0&&(this.yo=0),0===this.yo&&this.po&&!$.K.st&&this.mo&&await this.Vo(this.mo,this.Io,this._o,!1));const t=k.A.flush();if(t&&(this.Bt.jc(O.A.Zc),this.Bt.p2(t.Fc),this.Bt.Hc(t.data,t.Fc,0),t.release()),this.Wt++,this.Wt>750&&await this.qc(),this.$c(),this.Jc(),this.Qc(),this.tf(),(1===this.if[1]||1===this.if[2]||1===this.if[3]||1===this.if[4])&&this.Nn++>5&&(this.Nn=0,this.Bt.jc(O.A.sf),this.Bt.p2(this.Pn),this.Bt.p2(this.Fn),this.Bt.p1(this.An),this.Bt.p1(this.yn)),this.Ye++,0!==this.js&&(this.Zs+=20,this.Zs>=400&&(this.js=0)),0!==this.ue&&(this.Ae++,this.Ae>=15&&(2===this.ue&&(this.Ws=!0),3===this.ue&&(this.Ys=!0),this.ue=0)),0!==this.se&&(this.ne++,(this.xl>this.he+5||this.xl<this.he-5||this.Dl>this.ee+5||this.Dl<this.ee-5)&&(this.re=!0),0===this.hf)){if(2===this.se&&(this.Ws=!0),3===this.se&&(this.Ys=!0),this.se=0,this.re&&this.ne>=5){if(this.Le=-1,this.ef(),this.Le===this.te&&this.Re!==this.ie){const t=c.A.Ro[this.te];if(t.Ll){const i=t.Ll[this.Re];t.Ll[this.Re]=t.Ll[this.ie],t.Ll[this.ie]=i}if(t.Rl){const i=t.Rl[this.Re];t.Rl[this.Re]=t.Rl[this.ie],t.Rl[this.ie]=i}this.Bt.jc(O.A.nf),this.Bt.p2(this.te),this.Bt.p2(this.ie),this.Bt.p2(this.Re)}}else(1===this.Ce||this.rf(this.nh-1))&&this.nh>2?this.lf():this.nh>0&&await this.af(this.nh-1);this.Ae=10,this.Lc=0}if($.K.dt++,$.K.dt>127&&($.K.dt=0,this.Bt.jc(O.A.cf),this.Bt.p3(4991788)),-1!==x.A.ff&&this.Sr){const t=x.A.ff,i=x.A.uf,s=this.df(this.Sr.wf[0],this.Sr.Af[0],t,i,0,0,0,0,0,0,!0);x.A.ff=-1,s&&(this.qs=this.Rc,this.$s=this.Sc,this.js=1,this.Zs=0)}1===this.Lc&&this.Lh&&(this.Lh=null,this.Ys=!0,this.Lc=0),await this.yf(),this.pf(),this.mf(),this.If(),1!==this.hf&&1!==this.Lc||this.zs++,2===this.We&&($.K.ot?this._f():this.Ef()),2===this.We&&this.ze&&this.gf();for(let t=0;t<5;t++)this.sn[t]++;if(await this.Cf(),this.Yc++,this.Yc>4500&&(this.Yt=250,this.Yc-=500,this.Bt.jc(O.A.Tf)),this.je++,this.je>500){this.je=0;const t=8*Math.random()|0;1&~t||(this.Ze+=this.Je),2&~t||(this.qe+=this.Qe),4&~t||(this.$e+=this.tn)}if(this.Ze<-50&&(this.Je=2),this.Ze>50&&(this.Je=-2),this.qe<-55&&(this.Qe=2),this.qe>55&&(this.Qe=-2),this.$e<-40&&(this.tn=1),this.$e>40&&(this.tn=-1),this.wn++,this.wn>500){this.wn=0;const t=8*Math.random()|0;1&~t||(this.An+=this.mn),2&~t||(this.yn+=this.pn)}this.An<-60&&(this.mn=2),this.An>60&&(this.mn=-2),this.yn<-20&&(this.pn=1),this.yn>10&&(this.pn=-1),$.K.wt++,$.K.wt>110&&($.K.wt=0,this.Bt.jc(O.A.Of),this.Bt.p4(0)),this.Pr++,this.Pr>50&&this.Bt.jc(O.A.bf);try{this.stream&&this.Bt.Fc>0&&(this.stream.write(this.Bt.data,this.Bt.Fc),this.Bt.Fc=0,this.Pr=0)}catch(t){console.log(t),await this.qc()}}}};uc=()=>{if(null===this.nr)return;this.$t&&(this.$t=!1,this.Hi?.draw(0,11),this.Wi?.draw(0,375),this.Yi?.draw(729,5),this.Vi?.draw(752,231),this.Ki?.draw(0,0),this.Xi?.draw(561,0),this.zi?.draw(520,11),this.ji?.draw(520,231),this.Zi?.draw(501,375),this.qi?.draw(0,345),this.Ws=!0,this.Ys=!0,this.Vs=!0,this.Ks=!0,2!==this.We&&(this.Pi?.draw(8,11),this.Ni?.draw(561,5))),2===this.We&&this.vf(),this.Qs&&1===this.th&&(this.Ws=!0);let t=!1;if(-1!==this.oh&&(t=this.ol(this.oh,this.Ye),t&&(this.Ws=!0)),2===this.ue&&(this.Ws=!0),2===this.se&&(this.Ws=!0),this.Ws&&(this.Lf(),this.Ws=!1),-1===this.lh){this.ah.Tl=this.fh-this.uh-77,this.xl>453&&this.xl<565&&this.Dl>350&&this.Rf(this.xl-22,this.Dl-375,this.fh,77,!1,463,0,this.ah);let t=this.fh-this.ah.Tl-77;t<0&&(t=0),t>this.fh-77&&(t=this.fh-77),this.uh!==t&&(this.uh=t,this.Ys=!0)}-1!==this.lh&&(t=this.ol(this.lh,this.Ye),t&&(this.Ys=!0)),3===this.ue&&(this.Ys=!0),3===this.se&&(this.Ys=!0),this.Lh&&(this.Ys=!0),this.Qs&&2===this.th&&(this.Ys=!0),this.Ys&&(this.Sf(),this.Ys=!1),2===this.We&&(this.Mf(),this.Ni?.draw(561,5)),-1!==this.Rh&&(this.Vs=!0),this.Vs&&(-1!==this.Rh&&this.Rh===this.Sh&&(this.Rh=-1,this.Bt.jc(O.A.kf),this.Bt.p1(this.Sh)),this.Vs=!1,this.Gi?.bind(),this.fs?.draw(0,0),-1===this.oh&&(-1!==this.Mh[this.Sh]&&(0===this.Sh?this.Rs?.draw(29,30):1===this.Sh?this.Ss?.draw(59,29):2===this.Sh?this.Ss?.draw(87,29):3===this.Sh?this.Ms?.draw(115,29):4===this.Sh?this.xs?.draw(156,29):5===this.Sh?this.xs?.draw(184,29):6===this.Sh&&this.ks?.draw(212,30)),-1!==this.Mh[0]&&(0!==this.Rh||this.Pt%20<10)&&this.us[0]?.draw(35,34),-1!==this.Mh[1]&&(1!==this.Rh||this.Pt%20<10)&&this.us[1]?.draw(59,32),-1!==this.Mh[2]&&(2!==this.Rh||this.Pt%20<10)&&this.us[2]?.draw(86,32),-1!==this.Mh[3]&&(3!==this.Rh||this.Pt%20<10)&&this.us[3]?.draw(121,33),-1!==this.Mh[4]&&(4!==this.Rh||this.Pt%20<10)&&this.us[4]?.draw(157,34),-1!==this.Mh[5]&&(5!==this.Rh||this.Pt%20<10)&&this.us[5]?.draw(185,32),-1!==this.Mh[6]&&(6!==this.Rh||this.Pt%20<10)&&this.us[6]?.draw(212,34)),this.Gi?.draw(520,165),this.Bi?.bind(),this.cs?.draw(0,0),-1===this.oh&&(-1!==this.Mh[this.Sh]&&(7===this.Sh?this.Ds?.draw(49,0):8===this.Sh?this.Ns?.draw(81,0):9===this.Sh?this.Ns?.draw(108,0):10===this.Sh?this.Ps?.draw(136,1):11===this.Sh?this.Us?.draw(178,0):12===this.Sh?this.Us?.draw(205,0):13===this.Sh&&this.Fs?.draw(233,0)),-1!==this.Mh[8]&&(8!==this.Rh||this.Pt%20<10)&&this.us[7]?.draw(80,2),-1!==this.Mh[9]&&(9!==this.Rh||this.Pt%20<10)&&this.us[8]?.draw(107,3),-1!==this.Mh[10]&&(10!==this.Rh||this.Pt%20<10)&&this.us[9]?.draw(142,4),-1!==this.Mh[11]&&(11!==this.Rh||this.Pt%20<10)&&this.us[10]?.draw(179,2),-1!==this.Mh[12]&&(12!==this.Rh||this.Pt%20<10)&&this.us[11]?.draw(206,2),-1!==this.Mh[13]&&(13!==this.Rh||this.Pt%20<10)&&this.us[12]?.draw(230,2)),this.Bi?.draw(501,492),this.Pi?.bind()),this.Ks&&(this.Ks=!1,this.Ui?.bind(),this.ls?.draw(0,0),this.wi?.Jl(57,33,'Public chat',m.A._l,!0),0===this.kh&&this.wi?.Jl(57,46,'On',m.A.GREEN,!0),1===this.kh&&this.wi?.Jl(57,46,'Friends',m.A.Gl,!0),2===this.kh&&this.wi?.Jl(57,46,'Off',m.A.RED,!0),3===this.kh&&this.wi?.Jl(57,46,'Hide',m.A.bc,!0),this.wi?.Jl(186,33,'Private chat',m.A._l,!0),0===this.xh&&this.wi?.Jl(186,46,'On',m.A.GREEN,!0),1===this.xh&&this.wi?.Jl(186,46,'Friends',m.A.Gl,!0),2===this.xh&&this.wi?.Jl(186,46,'Off',m.A.RED,!0),this.wi?.Jl(326,33,'Trade/duel',m.A._l,!0),0===this.Dh&&this.wi?.Jl(326,46,'On',m.A.GREEN,!0),1===this.Dh&&this.wi?.Jl(326,46,'Friends',m.A.Gl,!0),2===this.Dh&&this.wi?.Jl(326,46,'Off',m.A.RED,!0),this.wi?.Jl(462,38,'Report abuse',m.A._l,!0),this.Ui?.draw(0,471),this.Pi?.bind()),this.Ye=0};vf=()=>{if(this.Ve++,this.xf(),this.Df(),this.Nf(),this.Pf(),this.Ff(),!this.ze){let t=this.Pn;(this.dn/256|0)>t&&(t=this.dn/256|0),this.hn[4]&&this.nn[4]+128>t&&(t=this.nn[4]+128);const i=this.Fn+this.$e&2047;if(this.Sr&&this.Uf(this.Gn,this.Bf(this.Dn,this.Sr.x,this.Sr.z)-50,this.Hn,i,t,3*t+600),$.K.ut++,$.K.ut>1802){$.K.ut=0,this.Bt.jc(O.A.Gf),this.Bt.p1(0);const t=this.Bt.Fc;this.Bt.p2(29711),this.Bt.p1(70),this.Bt.p1(256*Math.random()|0),this.Bt.p1(242),this.Bt.p1(186),this.Bt.p1(39),this.Bt.p1(61),2*Math.random()|0||this.Bt.p1(13),2*Math.random()|0||this.Bt.p2(57856),this.Bt.p2(65536*Math.random()|0),this.Bt.Hf(this.Bt.Fc-t)}}let t;t=this.ze?this.Wf():this.Yf();const i=this.ln,s=this.an,h=this.cn,e=this.fn,n=this.un;let r;for(let t=0;t<5;t++)this.hn[t]&&(r=Math.random()*(2*this.en[t]+1)-this.en[t]+Math.sin(this.sn[t]*(this.rn[t]/100))*this.nn[t]|0,0===t&&(this.ln+=r),1===t&&(this.an+=r),2===t&&(this.cn+=r),3===t&&(this.un=this.un+r&2047),4===t&&(this.fn+=r,this.fn<128&&(this.fn=128),this.fn>383&&(this.fn=383)));r=d.A.Vf,p.A.Kf=!0,p.A.Xf=0,p.A.xl=this.xl-8,p.A.Dl=this.Dl-11,u.A.clear(),this.He?.draw(this.ln,this.an,this.cn,t,this.un,this.fn,this.Pt),this.He?.zf(),this.jf(),this.Zf(),$.K.nt&&this.qf(),this.$f(r),this.Jf(),this.Pi?.draw(8,11),this.ln=i,this.an=s,this.cn=h,this.fn=e,this.un=n};Qf=()=>{e.A.tu?.clear(),e.A.iu?.clear(),r.A.So?.clear(),n.A.So?.clear(),n.A.su?.clear(),W.A.So?.clear(),l.A.So?.clear()};hu=(t,i)=>{this.eu(t.x,i,t.z)};eu=(t,i,s)=>{if(t<128||s<128||t>13056||s>13056)return this.zn=-1,void(this.jn=-1);const h=this.Bf(this.Dn,t,s)-i;this.nu(t,h,s)};nu=(t,i,s)=>{let h=t-this.ln,e=i-this.an,n=s-this.cn;const r=d.A.sin[this.fn],o=d.A.cos[this.fn],l=d.A.sin[this.un],a=d.A.cos[this.un];let c=n*l+h*a>>16;n=n*a-h*l>>16,h=c,c=e*o-n*r>>16,n=e*r+n*o>>16,e=c,n>=50?(this.zn=d.A.na+((h<<9)/n|0),this.jn=d.A.ra+((e<<9)/n|0)):(this.zn=-1,this.jn=-1)};jf=()=>{this.Kr=0;for(let t=-1;t<this.rr+this.yr;t++){let i=null;if(i=-1===t?this.Sr:t<this.rr?this.nr[this.lr[t]]:this.Ar[this.pr[t-this.rr]],i&&i.isVisible()){if(t<this.rr){let s=30;const h=i;if(0!==h.ru&&(this.hu(i,i.height+15),this.zn>-1))for(let t=0;t<8;t++)h.ru&1<<t&&(this._s[t]?.draw(this.zn-12,this.jn-s),s-=25);t>=0&&10===this.Ah&&this.Ih===this.lr[t]&&(this.hu(i,i.height+15),this.zn>-1&&this._s[7]?.draw(this.zn-12,this.jn-s))}else 1===this.Ah&&this.yh===this.pr[t-this.rr]&&this.Pt%20<10&&(this.hu(i,i.height+15),this.zn>-1&&this._s[2]?.draw(this.zn-12,this.jn-28));if(i.ou&&(t>=this.rr||0===this.kh||3===this.kh||1===this.kh&&this.lu(i.name))&&(this.hu(i,i.height),this.zn>-1&&this.Kr<$.K.Xr&&this.Ai&&(this.qr[this.Kr]=this.Ai.au(i.ou)/2|0,this.Zr[this.Kr]=this.Ai.height,this.zr[this.Kr]=this.zn,this.jr[this.Kr]=this.jn,this.$r[this.Kr]=i.cu,this.Jr[this.Kr]=i.fu,this.Qr[this.Kr]=i.uu,this.io[this.Kr++]=i.ou,0===this.Zh&&1===i.fu&&(this.Zr[this.Kr]+=10,this.jr[this.Kr]+=5),0===this.Zh&&2===i.fu&&(this.qr[this.Kr]=60))),i.du>this.Pt+100&&(this.hu(i,i.height+15),this.zn>-1)){let t=30*i.wu/i.Au|0;t>30&&(t=30),u.A.fillRect(this.zn-15,this.jn-3,t,5,m.A.GREEN),u.A.fillRect(this.zn-15+t,this.jn-3,30-t,5,m.A.RED)}if(i.du>this.Pt+330&&(this.hu(i,i.height/2|0),this.zn>-1&&(this.Is[i.yu]?.draw(this.zn-12,this.jn-12),this.di?.Ac(this.zn,this.jn+4,i.pu.toString(),m.A.Bl),this.di?.Ac(this.zn-1,this.jn+3,i.pu.toString(),m.A._l))),$.K.nt){if(i.pathLength>0||i.mu>=this.Pt||i.Iu>this.Pt){const t=64*i.size;this._u(128*i.wf[0]+t,128*i.Af[0]+t,this.Dn,i.size,65535,!1)}this._u(i.x,i.z,this.Dn,i.size,6710886,!1);let s=0;if(this.hu(i,i.height+30),t<this.rr){const t=i;if(this.di?.Ac(this.zn,this.jn+s,t.name,m.A._l),s-=15,-1!==t.Eu&&this.Pt-t.gu<30){if((t.Eu&W.A.Cu)===W.A.Cu&&(this.di?.Ac(this.zn,this.jn+s,'Appearance Update',m.A._l),s-=15),(t.Eu&W.A.Tu)===W.A.Tu&&(this.di?.Ac(this.zn,this.jn+s,'Play Seq: '+t.Ou,m.A._l),s-=15),(t.Eu&W.A.bu)===W.A.bu){let i=t.vu;i>32767&&(i-=32768),this.di?.Ac(this.zn,this.jn+s,'Face Entity: '+i,m.A._l),s-=15}(t.Eu&W.A.Lu)===W.A.Lu&&(this.di?.Ac(this.zn,this.jn+s,'Say',m.A._l),s-=15),(t.Eu&W.A.Ru)===W.A.Ru&&(this.di?.Ac(this.zn,this.jn+s,'Hit: Type '+t.yu+' Amount '+t.pu+' HP '+t.wu+'/'+t.Au,m.A._l),s-=15),(t.Eu&W.A.Su)===W.A.Su&&(this.di?.Ac(this.zn,this.jn+s,'Face Coord: '+t.Mu/2+' '+t.ku/2,m.A._l),s-=15),(t.Eu&W.A.xu)===W.A.xu&&(this.di?.Ac(this.zn,this.jn+s,'Chat',m.A._l),s-=15),(t.Eu&W.A.Du)===W.A.Du&&(this.di?.Ac(this.zn,this.jn+s,'Play Spotanim: '+t.Nu,m.A._l),s-=15),(t.Eu&W.A.Pu)===W.A.Pu&&(this.di?.Ac(this.zn,this.jn+s,'Exact Move',m.A._l),s-=15)}}else{const t=i;let s=0;if(this.hu(i,i.height+30),this.di?.Ac(this.zn,this.jn+s,t.type?.name??null,m.A._l),s-=15,-1!==t.Eu&&this.Pt-t.gu<30){if((t.Eu&Y.A.Tu)===Y.A.Tu&&(this.di?.Ac(this.zn,this.jn+s,'Play Seq: '+t.Ou,m.A._l),s-=15),(t.Eu&Y.A.bu)===Y.A.bu){let i=t.vu;i>32767&&(i-=32768),this.di?.Ac(this.zn,this.jn+s,'Face Entity: '+i,m.A._l),s-=15}(t.Eu&Y.A.Lu)===Y.A.Lu&&(this.di?.Ac(this.zn,this.jn+s,'Say',m.A._l),s-=15),(t.Eu&Y.A.Ru)===Y.A.Ru&&(this.di?.Ac(this.zn,this.jn+s,'Hit: Type '+t.yu+' Amount '+t.pu+' HP '+t.wu+'/'+t.Au,m.A._l),s-=15),(t.Eu&Y.A.Fu)===Y.A.Fu&&(this.di?.Ac(this.zn,this.jn+s,'Change Type: '+t.type?.id??null,m.A._l),s-=15),(t.Eu&Y.A.Du)===Y.A.Du&&(this.di?.Ac(this.zn,this.jn+s,'Play Spotanim: '+t.Nu,m.A._l),s-=15),(t.Eu&Y.A.Su)===Y.A.Su&&(this.di?.Ac(this.zn,this.jn+s,'Face Coord: '+t.Mu/2+' '+t.ku/2,m.A._l),s-=15)}}}}}if($.K.nt)for(let t=0;t<this.Co.length;t++){const i=this.Co[t];!i||i.level!==this.Dn||i.x<0||i.z<0||i.x>=104||i.z>=104||this._u(128*i.x+64,128*i.z+64,i.level,1,16776960,!1)}for(let t=0;t<this.Kr;t++){const i=this.zr[t];let s=this.jr[t];const h=this.qr[t],e=this.Zr[t];let n=!0;for(;n;){n=!1;for(let r=0;r<t;r++)s+2>this.jr[r]-this.Zr[r]&&s-e<this.jr[r]+2&&i-h<this.zr[r]+this.qr[r]&&i+h>this.zr[r]-this.qr[r]&&this.jr[r]-this.Zr[r]<s&&(s=this.jr[r]-this.Zr[r],n=!0)}this.zn=this.zr[t],this.jn=this.jr[t]=s;const r=this.io[t];if(0===this.Zh){let i=m.A.Gl;if(this.$r[t]<6&&(i=m.A.Uu[this.$r[t]]),6===this.$r[t]&&(i=this.Ve%20<10?m.A.RED:m.A.Gl),7===this.$r[t]&&(i=this.Ve%20<10?m.A.BLUE:m.A.bc),8===this.$r[t]&&(i=this.Ve%20<10?45056:8454016),9===this.$r[t]){const s=150-this.Qr[t];s<50?i=1280*s+m.A.RED:s<100?i=m.A.Gl-327680*(s-50):s<150&&(i=5*(s-100)+m.A.GREEN)}if(10===this.$r[t]){const s=150-this.Qr[t];s<50?i=5*s+m.A.RED:s<100?i=m.A.vc-327680*(s-50):s<150&&(i=327680*(s-100)+m.A.BLUE-5*(s-100))}if(11===this.$r[t]){const s=150-this.Qr[t];s<50?i=m.A._l-327685*s:s<100?i=327685*(s-50)+m.A.GREEN:s<150&&(i=m.A._l-327680*(s-100))}if(0===this.Jr[t]&&(this.Ai?.Ac(this.zn,this.jn+1,r,m.A.Bl),this.Ai?.Ac(this.zn,this.jn,r,i)),1===this.Jr[t]&&(this.Ai?.Bu(this.zn,this.jn+1,r,m.A.Bl,this.Ve),this.Ai?.Bu(this.zn,this.jn,r,i,this.Ve)),2===this.Jr[t]){const s=this.Ai?.au(r)??0,h=(150-this.Qr[t])*(s+100)/150;u.A.yl(334,this.zn+50,0,this.zn-50),this.Ai?.Fl(this.zn+50-h,this.jn+1,r,m.A.Bl),this.Ai?.Fl(this.zn+50-h,this.jn,r,i),u.A.Gu()}}else this.Ai?.Ac(this.zn,this.jn+1,r,m.A.Bl),this.Ai?.Ac(this.zn,this.jn,r,m.A.Gl)}};Zf=()=>{2===this.Ah&&this._s[2]&&(this.eu((this._h-this.Tn<<7)+this.ph,2*this.gh,(this.Eh-this.On<<7)+this.mh),this.zn>-1&&this.Pt%20<10&&this._s[2].draw(this.zn-12,this.jn-28))};qf=()=>{const t=507;let i=13;this.Oo?this.di?.Hu(t,i,'tock',m.A.Gl,!0):this.Ai?.Hu(t,i,'tick',m.A.Gl,!0),i+=13,this.di?.Hu(t,i,`Fps: ${this.Wu}, ${this.Yu} ms`,m.A.Gl,!0),i+=13,this.di?.Hu(t,i,`Draw: ${this.ms.toFixed(1)}, Avg: ${this.Vu.toFixed(1)}, Slow: ${this.Ku.toFixed(1)} ms`,m.A.Gl,!0),i+=13,this.di?.Hu(t,i,`Occluders: ${x.A.Xu[x.A.zu]} Active: ${x.A.ju}`,m.A.Gl,!0),i+=13,this.di?.Hu(t,i,'Local Pos: '+(this.Sr?.x??-1)+', '+(this.Sr?.z??-1)+', '+(this.Sr?.y??-1),m.A.Gl,!0),i+=13,this.di?.Hu(t,i,'Camera Pos: '+this.ln+', '+this.cn+', '+this.an,m.A.Gl,!0),i+=13,this.di?.Hu(t,i,'Camera Angle: '+this.un+', '+this.fn,m.A.Gl,!0),i+=13,this.di?.Hu(t,i,'Cutscene Source: '+this.tr+', '+this.ir+' '+this.sr+'; '+this.hr+', '+this.er,m.A.Gl,!0),i+=13,this.di?.Hu(t,i,'Cutscene Destination: '+this.Zn+', '+this.qn+' '+this.$n+'; '+this.Jn+', '+this.Qn,m.A.Gl,!0),$.K.ot&&(i+=13,this.di?.Hu(t,i,'Instructions:',m.A.Gl,!0),i+=13,this.di?.Hu(t,i,'- Arrows to move Camera',m.A.Gl,!0),i+=13,this.di?.Hu(t,i,'- Shift to control Source or Dest',m.A.Gl,!0),i+=13,this.di?.Hu(t,i,'- Alt to control Height',m.A.Gl,!0),i+=13,this.di?.Hu(t,i,'- Ctrl to control Modifier',m.A.Gl,!0))};_u=(t,i,s,h,e,n)=>{const r=this.Bf(s,t,i),o=64*h;this.nu(t-o,r,i-o);const l=this.zn,a=this.jn;this.nu(t+o,r,i-o);const c=this.zn,f=this.jn;this.nu(t-o,r,i+o);const d=this.zn,w=this.jn;this.nu(t+o,r,i+o);const A=this.zn,y=this.jn;-1!==l&&-1!==c&&-1!==d&&-1!==A&&(n&&(u.A.Zu(l,a,A,y,(16711422&e)>>1),u.A.Zu(c,f,d,w,(16711422&e)>>1)),u.A.Zu(l,a,c,f,e),u.A.Zu(l,a,d,w,e),u.A.Zu(c,f,A,y,e),u.A.Zu(d,w,A,y,e))};_f(){const t=1==this.if[5]?2:1;1==this.if[6]?(1==this.if[1]?(this.Zn-=t,this.Zn<1&&(this.Zn=1)):1==this.if[2]&&(this.Zn+=t,this.Zn>102&&(this.Zn=102)),1==this.if[3]?1==this.if[7]?this.$n+=2*t:(this.qn+=1,this.qn>102&&(this.qn=102)):1==this.if[4]&&(1==this.if[7]?this.$n-=2*t:(this.qn-=1,this.qn<1&&(this.qn=1)))):(1==this.if[1]?(this.tr-=t,this.tr<1&&(this.tr=1)):1==this.if[2]&&(this.tr+=t,this.tr>102&&(this.tr=102)),1==this.if[3]?1==this.if[7]?this.sr+=2*t:(this.ir+=t,this.ir>102&&(this.ir=102)):1==this.if[4]&&(1==this.if[7]?this.sr-=2*t:(this.ir-=t,this.ir<1&&(this.ir=1)))),this.ln=128*this.tr+64,this.cn=128*this.ir+64,this.an=this.Bf(this.Dn,this.tr,this.ir)-this.sr;const i=128*this.Zn+64,s=128*this.qn+64,h=this.Bf(this.Dn,this.Zn,this.qn)-this.$n,e=i-this.ln,n=h-this.an,r=s-this.cn,o=0|Math.sqrt(e*e+r*r);this.fn=325.949*Math.atan2(n,o)&2047,this.un=-325.949*Math.atan2(e,r)&2047,this.fn<128&&(this.fn=128),this.fn>383&&(this.fn=383)}Jf=()=>{if(this.qu(),1===this.js&&this.gs[this.Zs/100|0]?.draw(this.qs-8-8,this.$s-8-11),2===this.js&&this.gs[4+(this.Zs/100|0)]?.draw(this.qs-8-8,this.$s-8-11),-1!==this.Xs&&(this.ol(this.Xs,this.Ye),this.Al(c.A.Ro[this.Xs],0,0,0)),this.$u(),this.Qs?0===this.th&&this.Ju():(this.ef(),this.Qu()),1===this.kr&&(this.Fr>0||1===this.Ur?this._s[1]?.draw(472,258):this._s[1]?.draw(472,296)),this.Fr>0&&(this._s[0]?.draw(472,296),this.wi?.Ac(484,329,'Level: '+this.Fr,m.A.Gl)),1===this.Ur&&(this._s[6]?.draw(472,296),this.wi?.Ac(484,329,'Arena',m.A.Gl)),0!==this.Vt){let t=this.Vt/50|0;const i=t/60|0;t%=60,t<10?this.wi?.Fl(4,329,'System update in: '+i+':0'+t,m.A.Gl):this.wi?.Fl(4,329,'System update in: '+i+':'+t,m.A.Gl)}};qu=()=>{if(0===this.jh)return;const t=this.wi;let i=0;0!==this.Vt&&(i=1);for(let s=0;s<100;s++){if(!this.Vh[s])continue;const h=this.messageType[s];let e;if((3===h||7===h)&&(7===h||0===this.xh||1===this.xh&&this.lu(this.Kh[s]))&&(e=329-13*i,t?.Fl(4,e,'From '+this.Kh[s]+': '+this.Vh[s],m.A.Bl),t?.Fl(4,e-1,'From '+this.Kh[s]+': '+this.Vh[s],m.A.bc),i++,i>=5))return;if(5===h&&this.xh<2&&(e=329-13*i,t?.Fl(4,e,this.Vh[s],m.A.Bl),t?.Fl(4,e-1,this.Vh[s],m.A.bc),i++,i>=5))return;if(6===h&&this.xh<2&&(e=329-13*i,t?.Fl(4,e,'To '+this.Kh[s]+': '+this.Vh[s],m.A.Bl),t?.Fl(4,e-1,'To '+this.Kh[s]+': '+this.Vh[s],m.A.bc),i++,i>=5))return}};$u=()=>{if(!this.Sr)return;const t=(this.Sr.x>>7)+this.Tn,i=(this.Sr.z>>7)+this.On;if(this.Fr=t>=2944&&t<3392&&i>=3520&&i<6400?1+((i-3520)/8|0):t>=2944&&t<3392&&i>=9920&&i<12800?1+((i-9920)/8|0):0,this.Ur=0,t>=3328&&t<3392&&i>=3200&&i<3264){const s=63&t,h=63&i;(s>=4&&s<=29&&h>=44&&h<=58||s>=36&&s<=61&&h>=44&&h<=58||s>=4&&s<=29&&h>=25&&h<=39||s>=36&&s<=61&&h>=25&&h<=39||s>=4&&s<=29&&h>=6&&h<=20||s>=36&&s<=61&&h>=6&&h<=20)&&(this.Ur=1)}0===this.Ur&&t>=3328&&t<=3393&&i>=3203&&i<=3325&&(this.Ur=2),this.Js=0,(t>=3053&&t<=3156&&i>=3056&&i<=3136||t>=3072&&t<=3118&&i>=9492&&i<=9535)&&(this.Js=1),1===this.Js&&t>=3139&&t<=3199&&i>=3008&&i<=3062&&(this.Js=0)};Lf=()=>{this.Di?.bind(),this.Ji&&(d.A.oc=this.Ji),this.ns?.draw(0,0),-1!==this.oh?this.Al(c.A.Ro[this.oh],0,0,0):-1!==this.Mh[this.Sh]&&this.Al(c.A.Ro[this.Mh[this.Sh]],0,0,0),this.Qs&&1===this.th&&this.Ju(),this.Di?.draw(562,231),this.Pi?.bind(),this.Qi&&(d.A.oc=this.Qi)};Sf=()=>{if(this.Fi?.bind(),this.$i&&(d.A.oc=this.$i),this.rs?.draw(0,0),this.Fh)this.Ai?.Ac(239,40,this.Uh,m.A.Bl),this.Ai?.Ac(239,60,this.Bh+'*',m.A.td);else if(this.Wh)this.Ai?.Ac(239,40,'Enter amount:',m.A.Bl),this.Ai?.Ac(239,60,this.Hh+'*',m.A.td);else if(this.Lh)this.Ai?.Ac(239,40,this.Lh,m.A.Bl),this.Ai?.Ac(239,60,'Click to continue',m.A.td);else if(-1!==this.lh)this.Al(c.A.Ro[this.lh],0,0,0);else if(-1===this.Yh){let t=this.wi;0===$.K.rt&&(t=this.yi);let i=0;u.A.yl(0,0,463,77);for(let s=0;s<100;s++){const h=this.Vh[s];if(!h)continue;const e=this.messageType[s],n=this.uh+70-14*i;0===e&&(n>0&&n<110&&t?.Fl(4,n,h,m.A.Bl),i++),1===e&&(n>0&&n<110&&(t?.Fl(4,n,this.Kh[s]+':',m.A._l),t?.Fl(t.au(this.Kh[s])+12,n,h,m.A.BLUE)),i++),2===e&&(0===this.kh||1===this.kh&&this.lu(this.Kh[s]))&&(n>0&&n<110&&(t?.Fl(4,n,this.Kh[s]+':',m.A.Bl),t?.Fl(t.au(this.Kh[s])+12,n,h,m.A.BLUE)),i++),3!==e&&7!==e||0!==this.jh||!(7===e||0===this.xh||1===this.xh&&this.lu(this.Kh[s]))||(n>0&&n<110&&(t?.Fl(4,n,'From '+this.Kh[s]+':',m.A.Bl),t?.Fl(t.au('From '+this.Kh[s])+12,n,h,m.A.sd)),i++),4===e&&(0===this.Dh||1===this.Dh&&this.lu(this.Kh[s]))&&(n>0&&n<110&&t?.Fl(4,n,this.Kh[s]+' '+this.Vh[s],m.A.hd),i++),5===e&&0===this.jh&&this.xh<2&&(n>0&&n<110&&t?.Fl(4,n,h,m.A.sd),i++),6===e&&0===this.jh&&this.xh<2&&(n>0&&n<110&&(t?.Fl(4,n,'To '+this.Kh[s]+':',m.A.Bl),t?.Fl(t.au('To '+this.Kh[s])+12,n,h,m.A.sd)),i++),8===e&&(0===this.Dh||1===this.Dh&&this.lu(this.Kh[s]))&&(n>0&&n<110&&t?.Fl(4,n,this.Kh[s]+' '+this.Vh[s],m.A.ed),i++)}u.A.Gu(),this.fh=14*i+7,this.fh<78&&(this.fh=78),this.tl(463,0,this.fh-this.uh-77,this.fh,77),0==$.K.rt?t?.Fl(3,90,this.qh+'*',m.A.Bl):1==$.K.rt?t?.Fl(3,90,this.qh+'*',m.A.BLUE):(t?.Fl(4,90,M.A.ga(this.username)+':',m.A.Bl),t?.Fl(t.au(this.username+': ')+6,90,this.qh+'*',m.A.BLUE)),u.A.nl(0,77,m.A.Bl,479)}else this.Al(c.A.Ro[this.Yh],0,0,0);this.Qs&&2===this.th&&this.Ju(),this.Fi?.draw(22,375),this.Pi?.bind(),this.Qi&&(d.A.oc=this.Qi)};Mf=()=>{if(this.Ni?.bind(),!this.Sr)return;const t=this.Fn+this.An&2047;let i=48+(this.Sr.x/32|0),s=464-(this.Sr.z/32|0);this.ws?.nd(21,9,146,151,this.hs,this.es,i,s,t,this.yn+256),this.As?.nd(0,0,33,33,this.ts,this.ss,25,25,this.Fn,256);for(let t=0;t<this.Ue;t++)i=4*this.Be[t]+2-(this.Sr.x/32|0),s=4*this.Ge[t]+2-(this.Sr.z/32|0),this.rd(s,this.Hs[t],i);for(let t=0;t<G.A.Xn;t++)for(let h=0;h<G.A.Xn;h++){this.gr[this.Dn][t][h]&&(i=4*t+2-(this.Sr.x/32|0),s=4*h+2-(this.Sr.z/32|0),this.rd(s,this.Cs,i))}for(let t=0;t<this.yr;t++){const h=this.Ar[this.pr[t]];h&&h.isVisible()&&h.type&&h.type.od&&(i=(h.x/32|0)-(this.Sr.x/32|0),s=(h.z/32|0)-(this.Sr.z/32|0),this.rd(s,this.Ts,i))}for(let t=0;t<this.rr;t++){const h=this.nr[this.lr[t]];if(h&&h.isVisible()&&h.name){i=(h.x/32|0)-(this.Sr.x/32|0),s=(h.z/32|0)-(this.Sr.z/32|0);let t=!1;const e=M.A.ld(h.name);for(let i=0;i<this.Vr;i++)if(e===this.ho[i]&&0!==this.eo[i]){t=!0;break}t?this.rd(s,this.bs,i):this.rd(s,this.Os,i)}}0!==this.Ke&&(i=4*this.Ke+2-(this.Sr.x/32|0),s=4*this.Xe+2-(this.Sr.z/32|0),this.rd(s,this.Es,i)),u.A.fillRect(93,82,3,3,m.A._l),this.Pi?.bind()};rd=(t,i,s)=>{if(!i)return;const h=this.Fn+this.An&2047,e=s*s+t*t;if(e>6400)return;let n=d.A.sin[h],r=d.A.cos[h];n=256*n/(this.yn+256)|0,r=256*r/(this.yn+256)|0;const o=t*n+s*r>>16,l=t*r-s*n>>16;e>2500&&this.os?i.ad(o+94-(i.Pl/2|0),83-l-(i.fd/2|0),this.os):i.draw(o+94-(i.Pl/2|0),83-l-(i.fd/2|0))};ud=t=>{if(!this.ws)return;const i=this.ws.nc,s=i.length;for(let t=0;t<s;t++)i[t]=0;for(let s=1;s<G.A.Xn-1;s++){let h=512*(G.A.Xn-1-s)*4+24628;for(let e=1;e<G.A.Xn-1;e++)!this.Yn||24&this.Yn[t][e][s]||this.He?.dd(t,e,s,i,h,512),t<3&&this.Yn&&8&this.Yn[t+1][e][s]&&this.He?.dd(t+1,e,s,i,h,512),h+=4}const h=(238+(20*Math.random()|0)-10<<16)+(238+(20*Math.random()|0)-10<<8)+(20*Math.random()|0)+238-10,n=238+(20*Math.random()|0)-10<<16;this.ws.bind();for(let i=1;i<G.A.Xn-1;i++)for(let s=1;s<G.A.Xn-1;s++)!this.Yn||24&this.Yn[t][s][i]||this.wd(s,i,t,h,n),t<3&&this.Yn&&8&this.Yn[t+1][s][i]&&this.wd(s,i,t+1,h,n);this.Pi?.bind(),this.Ue=0;for(let t=0;t<G.A.Xn;t++)for(let i=0;i<G.A.Xn;i++){let s=this.He?.Ad(this.Dn,t,i)??0;if(0===s)continue;s=s>>14&32767;const h=e.A.get(s).yd;if(h<0)continue;let n=t,r=i;if(22!==h&&29!==h&&34!==h&&36!==h&&46!==h&&47!==h&&48!==h){const s=G.A.Xn,h=G.A.Xn,e=this.kn[this.Dn];if(e){const o=e.flags;for(let e=0;e<10;e++){const e=4*Math.random()|0;0===e&&n>0&&n>t-3&&(o[G.A.index(n-1,r)]&H.A.pd)===H.A.OPEN&&n--,1===e&&n<s-1&&n<t+3&&(o[G.A.index(n+1,r)]&H.A.md)===H.A.OPEN&&n++,2===e&&r>0&&r>i-3&&(o[G.A.index(n,r-1)]&H.A.Id)===H.A.OPEN&&r--,3===e&&r<h-1&&r<i+3&&(o[G.A.index(n,r+1)]&H.A._d)===H.A.OPEN&&r++}}}this.Hs[this.Ue]=this.ps[h],this.Be[this.Ue]=n,this.Ge[this.Ue]=r,this.Ue++}};wd=(t,i,s,h,n)=>{if(!this.He||!this.ws)return;let r=this.He.Ed(s,t,i);if(0!==r){const o=this.He.gd(s,t,i,r),l=o>>6&3,a=31&o;let c=h;r>0&&(c=n);const f=this.ws.nc,u=4*t+512*(103-i)*4+24624,d=r>>14&32767,w=e.A.get(d);if(-1===w.Cd)a!==P.A.Td.id&&a!==P.A.Od.id||(l===F.A.bd?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.A.vd?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.A.Ld?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.A.Rd&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c)),a===P.A.Sd.id&&(l===F.A.bd?f[u]=c:l===F.A.vd?f[u+3]=c:l===F.A.Ld?f[u+3+1536]=c:l===F.A.Rd&&(f[u+1536]=c)),a===P.A.Od.id&&(l===F.A.Rd?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.A.bd?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.A.vd?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.A.Ld&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c));else{const s=this.ys[w.Cd];if(s){const h=(4*w.width-s.width)/2|0,e=(4*w.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.A.Xn-i-w.length)+e+48)}}}if(r=this.He.Md(s,t,i),0!==r){const h=this.He.gd(s,t,i,r),n=h>>6&3,o=31&h,l=r>>14&32767,a=e.A.get(l);if(-1!==a.Cd){const s=this.ys[a.Cd];if(s){const h=(4*a.width-s.width)/2|0,e=(4*a.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.A.Xn-i-a.length)+e+48)}}else if(o===P.A.kd.id){let s=15658734;r>0&&(s=15597568);const h=this.ws.nc,e=4*t+512*(G.A.Xn-1-i)*4+24624;n===F.A.bd||n===F.A.Ld?(h[e+1536]=s,h[e+1024+1]=s,h[e+512+2]=s,h[e+3]=s):(h[e]=s,h[e+512+1]=s,h[e+1024+2]=s,h[e+1536+3]=s)}}if(r=this.He.Ad(s,t,i),0!==r){const s=e.A.get(r>>14&32767);if(-1!==s.Cd){const h=this.ys[s.Cd];if(h){const e=(4*s.width-h.width)/2|0,n=(4*s.length-h.height)/2|0;h.draw(4*t+48+e,4*(G.A.Xn-i-s.length)+n+48)}}}};Qu=()=>{if(this.nh<2&&0===this.oe&&0===this.Ie)return;let t;t=1===this.oe&&this.nh<2?'Use '+this.fe+' with...':1===this.Ie&&this.nh<2?this.ge+'...':this.rh[this.nh-1],this.nh>2&&(t=t+'@whi@ / '+(this.nh-2)+' more options'),this.Ai?.xd(4,15,t,m.A._l,!0,this.Pt/1e3|0)};Ju=()=>{const t=this.ih,i=this.sh,s=this.hh,h=this.eh,e=m.A.Dd;u.A.fillRect(t,i,s,h,e),u.A.fillRect(t+1,i+1,s-2,16,m.A.Bl),u.A.Il(t+1,i+18,s-2,h-19,m.A.Bl),this.Ai?.Fl(t+3,i+14,'Choose Option',e);let n=this.xl,r=this.Dl;0===this.th&&(n-=8,r-=11),1===this.th&&(n-=562,r-=231),2===this.th&&(n-=22,r-=375);for(let h=0;h<this.nh;h++){const e=i+15*(this.nh-1-h)+31;let o=m.A._l;n>t&&n<t+s&&r>e-13&&r<e+3&&(o=m.A.Gl),this.Ai?.ta(t+3,e,this.rh[h],o,!0)}};yf=async()=>{if(0!==this.se)return;let t=this.Lc;if(1===this.Ie&&this.Rc>=520&&this.Sc>=165&&this.Rc<=788&&this.Sc<=230&&(t=0),this.Qs){if(1!==t){let t=this.xl,i=this.Dl;0===this.th?(t-=8,i-=11):1===this.th?(t-=562,i-=231):2===this.th&&(t-=22,i-=375),(t<this.ih-10||t>this.ih+this.hh+10||i<this.sh-10||i>this.sh+this.eh+10)&&(this.Qs=!1,1===this.th&&(this.Ws=!0),2===this.th&&(this.Ys=!0))}if(1===t){const t=this.ih,i=this.sh,s=this.hh;let h=this.Rc,e=this.Sc;0===this.th?(h-=8,e-=11):1===this.th?(h-=562,e-=231):2===this.th&&(h-=22,e-=375);let n=-1;for(let r=0;r<this.nh;r++){const o=i+15*(this.nh-1-r)+31;h>t&&h<t+s&&e>o-13&&e<o+3&&(n=r)}-1!==n&&await this.af(n),this.Qs=!1,1===this.th?this.Ws=!0:2===this.th&&(this.Ys=!0)}}else{if(1===t&&this.nh>0){const t=this.Te[this.nh-1];if(602===t||596===t||22===t||892===t||415===t||405===t||38===t||422===t||478===t||347===t||188===t){const t=this.be[this.nh-1],i=this.ve[this.nh-1];if(c.A.Ro[i].draggable)return this.re=!1,this.ne=0,this.te=i,this.ie=t,this.se=2,this.he=this.Rc,this.ee=this.Sc,c.A.Ro[i].Nd===this.Xs&&(this.se=1),void(c.A.Ro[i].Nd===this.lh&&(this.se=3))}}if(1===t&&(1===this.Ce||this.rf(this.nh-1))&&this.nh>2&&(t=2),1===t&&this.nh>0&&await this.af(this.nh-1),2!==t||this.nh<=0)return;this.lf()}};pf=()=>{if(1===this.Lc&&this.Sr){let t=this.Rc-21-561,i=this.Sc-9-5;if(t>=0&&i>=0&&t<146&&i<151){t-=73,i-=75;const s=this.Fn+this.An&2047;let h=d.A.sin[s],e=d.A.cos[s];h=h*(this.yn+256)>>8,e=e*(this.yn+256)>>8;const n=i*h+t*e>>11,r=i*e-t*h>>11,o=this.Sr.x+n>>7,l=this.Sr.z-r>>7;this.df(this.Sr.wf[0],this.Sr.Af[0],o,l,1,0,0,0,0,0,!0)&&(this.Bt.p1(t),this.Bt.p1(i),this.Bt.p2(this.Fn),this.Bt.p1(57),this.Bt.p1(this.An),this.Bt.p1(this.yn),this.Bt.p1(89),this.Bt.p2(this.Sr.x),this.Bt.p2(this.Sr.z),this.Bt.p1(this.Rr),this.Bt.p1(63))}}};rf=t=>{if(t<0)return!1;let i=this.Te[t];return i>=2e3&&(i-=2e3),406===i};af=async t=>{if(t<0)return;this.Wh&&(this.Wh=!1,this.Ys=!0);let i=this.Te[t];const s=this.Oe[t],h=this.be[t],r=this.ve[t];if(i>=2e3&&(i-=2e3),903===i||363===i){let s=this.rh[t];const h=s.indexOf('@whi@');if(-1!==h){s=s.substring(h+5).trim();const t=M.A.ga(M.A.Ca(M.A.ld(s)));let e=!1;for(let s=0;s<this.rr;s++){const h=this.nr[this.lr[s]];if(h&&h.name&&h.name.toLowerCase()===t.toLowerCase()&&this.Sr){this.df(this.Sr.wf[0],this.Sr.Af[0],h.wf[0],h.Af[0],2,1,1,0,0,0,!1),903===i?this.Bt.jc(O.A.Pd):363===i&&this.Bt.jc(O.A.Fd),this.Bt.p2(this.lr[s]),e=!0;break}}e||this.Ud(0,'Unable to find '+t,'')}}else if(450===i&&this.Bd(O.A.Gd,h,r,s))this.Bt.p2(this.ce),this.Bt.p2(this.le),this.Bt.p2(this.ae);else if(405===i||38===i||422===i||478===i||347===i)478===i?(3&h||$.K.Ct++,$.K.Ct>=90&&this.Bt.jc(O.A.Hd),this.Bt.jc(O.A.Wd)):347===i?this.Bt.jc(O.A.Yd):422===i?this.Bt.jc(O.A.Vd):405===i?($.K.Et+=s,$.K.Et>=97&&(this.Bt.jc(O.A.Kd),this.Bt.p3(14953816)),this.Bt.jc(O.A.Xd)):38===i&&this.Bt.jc(O.A.zd),this.Bt.p2(s),this.Bt.p2(h),this.Bt.p2(r),this.Ae=0,this.we=r,this.de=h,this.ue=2,c.A.Ro[r].Nd===this.Xs&&(this.ue=1),c.A.Ro[r].Nd===this.lh&&(this.ue=3);else if(728===i||542===i||6===i||963===i||245===i){const t=this.Ar[s];t&&this.Sr&&(this.df(this.Sr.wf[0],this.Sr.Af[0],t.wf[0],t.Af[0],2,1,1,0,0,0,!1),this.qs=this.Rc,this.$s=this.Sc,this.js=2,this.Zs=0,542===i?this.Bt.jc(O.A.jd):6===i?(3&s||$.K._t++,$.K._t>=124&&(this.Bt.jc(O.A.Zd),this.Bt.p4(0)),this.Bt.jc(O.A.qd)):963===i?this.Bt.jc(O.A.$d):728===i?this.Bt.jc(O.A.Jd):245===i&&(3&s||$.K.gt++,$.K.gt>=85&&(this.Bt.jc(O.A.Qd),this.Bt.p2(39596)),this.Bt.jc(O.A.tw)),this.Bt.p2(s))}else if(217===i){if(this.Sr){this.df(this.Sr.wf[0],this.Sr.Af[0],h,r,2,0,0,0,0,0,!1)||this.df(this.Sr.wf[0],this.Sr.Af[0],h,r,2,1,1,0,0,0,!1),this.qs=this.Rc,this.$s=this.Sc,this.js=2,this.Zs=0,this.Bt.jc(O.A.iw),this.Bt.p2(h+this.Tn),this.Bt.p2(r+this.On),this.Bt.p2(s),this.Bt.p2(this.ce),this.Bt.p2(this.le),this.Bt.p2(this.ae)}}else if(1175===i){const t=s>>14&32767,i=e.A.get(t);let h;h=i.sw?i.sw:"It's a "+i.name+'.',this.Ud(0,h,'')}else if(285===i)this.Bd(O.A.hw,h,r,s);else if(881===i)this.Bt.jc(O.A.ew),this.Bt.p2(s),this.Bt.p2(h),this.Bt.p2(r),this.Bt.p2(this.ce),this.Bt.p2(this.le),this.Bt.p2(this.ae),this.Ae=0,this.we=r,this.de=h,this.ue=2,c.A.Ro[r].Nd===this.Xs&&(this.ue=1),c.A.Ro[r].Nd===this.lh&&(this.ue=3);else if(391===i)this.Bt.jc(O.A.nw),this.Bt.p2(s),this.Bt.p2(h),this.Bt.p2(r),this.Bt.p2(this._e),this.Ae=0,this.we=r,this.de=h,this.ue=2,c.A.Ro[r].Nd===this.Xs&&(this.ue=1),c.A.Ro[r].Nd===this.lh&&(this.ue=3);else if(660===i)this.Qs?this.He?.click(h-8,r-11):this.He?.click(this.Rc-8,this.Sc-11);else{if(188===i)return this.oe=1,this.le=h,this.ae=r,this.ce=s,this.fe=n.A.get(s).name,void(this.Ie=0);if(44===i)this.ye||(this.Bt.jc(O.A.rw),this.Bt.p2(r),this.ye=!0);else if(1773===i){const t=n.A.get(s);let i;i=r>=1e5?r+' x '+t.name:t.sw?t.sw:"It's a "+t.name+'.',this.Ud(0,i,'')}else if(900===i){const t=this.Ar[s];t&&this.Sr&&(this.df(this.Sr.wf[0],this.Sr.Af[0],t.wf[0],t.Af[0],2,1,1,0,0,0,!1),this.qs=this.Rc,this.$s=this.Sc,this.js=2,this.Zs=0,this.Bt.jc(O.A.ow),this.Bt.p2(s),this.Bt.p2(this.ce),this.Bt.p2(this.le),this.Bt.p2(this.ae))}else if(1373===i||1544===i||151===i||1101===i){const t=this.nr[s];t&&this.Sr&&(this.df(this.Sr.wf[0],this.Sr.Af[0],t.wf[0],t.Af[0],2,1,1,0,0,0,!1),this.qs=this.Rc,this.$s=this.Sc,this.js=2,this.Zs=0,1101===i?this.Bt.jc(O.A.Fd):151===i?($.K.bt++,$.K.bt>=90&&(this.Bt.jc(O.A.lw),this.Bt.p2(31114)),this.Bt.jc(O.A.aw)):1373===i?this.Bt.jc(O.A.Pd):1544===i&&this.Bt.jc(O.A.cw),this.Bt.p2(s))}else if(265===i){const t=this.Ar[s];t&&this.Sr&&(this.df(this.Sr.wf[0],this.Sr.Af[0],t.wf[0],t.Af[0],2,1,1,0,0,0,!1),this.qs=this.Rc,this.$s=this.Sc,this.js=2,this.Zs=0,this.Bt.jc(O.A.fw),this.Bt.p2(s),this.Bt.p2(this._e))}else if(679===i){const i=this.rh[t],s=i.indexOf('@whi@');if(-1!==s){const t=M.A.ld(i.substring(s+5).trim());let h=-1;for(let i=0;i<this.Vr;i++)if(this.ho[i]===t){h=i;break}-1!==h&&this.eo[h]>0&&(this.Ys=!0,this.Wh=!1,this.Fh=!0,this.Bh='',this.Gh=3,this.no=this.ho[h],this.Uh='Enter message to send to '+this.so[h])}}else if(55===i)this.Bd(O.A.uw,h,r,s)&&this.Bt.p2(this._e);else if(224===i||993===i||99===i||746===i||877===i){if(this.Sr){this.df(this.Sr.wf[0],this.Sr.Af[0],h,r,2,0,0,0,0,0,!1)||this.df(this.Sr.wf[0],this.Sr.Af[0],h,r,2,1,1,0,0,0,!1),this.qs=this.Rc,this.$s=this.Sc,this.js=2,this.Zs=0,224===i?this.Bt.jc(O.A.dw):746===i?this.Bt.jc(O.A.ww):877===i?this.Bt.jc(O.A.Aw):99===i?this.Bt.jc(O.A.yw):993===i&&this.Bt.jc(O.A.pw),this.Bt.p2(h+this.Tn),this.Bt.p2(r+this.On),this.Bt.p2(s)}}else if(1607===i){const t=this.Ar[s];if(t&&t.type){let i;i=t.type.sw?t.type.sw:"It's a "+t.type.name+'.',this.Ud(0,i,'')}}else if(504===i)this.Bd(O.A.mw,h,r,s);else{if(930===i){const t=c.A.Ro[r];this.Ie=1,this._e=r,this.Ee=t.Iw,this.oe=0;let i=t._w;i&&-1!==i.indexOf(' ')&&(i=i.substring(0,i.indexOf(' ')));let s=t._w;return s&&-1!==s.indexOf(' ')&&(s=s.substring(s.indexOf(' ')+1)),this.ge=i+' '+t.action+' '+s,void(16===this.Ee&&(this.Ws=!0,this.Sh=3,this.Vs=!0))}if(951===i){const t=c.A.Ro[r];let i=!0;t.El>0&&(i=this.Ew(t)),i&&(this.Bt.jc(O.A.gw),this.Bt.p2(r))}else if(602===i||596===i||22===i||892===i||415===i)22===i?this.Bt.jc(O.A.Cw):415===i?(3&r||$.K.Ot++,$.K.Ot>=55&&(this.Bt.jc(O.A.Tw),this.Bt.p4(0)),this.Bt.jc(O.A.Ow)):602===i?this.Bt.jc(O.A.bw):892===i?(3&h||$.K.vt++,$.K.vt>=130&&(this.Bt.jc(O.A.Lw),this.Bt.p1(177)),this.Bt.jc(O.A.Rw)):596===i&&this.Bt.jc(O.A.Sw),this.Bt.p2(s),this.Bt.p2(h),this.Bt.p2(r),this.Ae=0,this.we=r,this.de=h,this.ue=2,c.A.Ro[r].Nd===this.Xs&&(this.ue=1),c.A.Ro[r].Nd===this.lh&&(this.ue=3);else if(581===i)3&s||$.K.It++,$.K.It>=99&&(this.Bt.jc(O.A.Mw),this.Bt.p4(0)),this.Bd(O.A.kw,h,r,s);else if(965===i){if(this.Sr){this.df(this.Sr.wf[0],this.Sr.Af[0],h,r,2,0,0,0,0,0,!1)||this.df(this.Sr.wf[0],this.Sr.Af[0],h,r,2,1,1,0,0,0,!1),this.qs=this.Rc,this.$s=this.Sc,this.js=2,this.Zs=0,this.Bt.jc(O.A.xw),this.Bt.p2(h+this.Tn),this.Bt.p2(r+this.On),this.Bt.p2(s),this.Bt.p2(this._e)}}else if(1501===i)$.K.Tt+=this.On,$.K.Tt>=92&&(this.Bt.jc(O.A.Dw),this.Bt.p4(0)),this.Bd(O.A.Nw,h,r,s);else if(364===i)this.Bd(O.A.Pw,h,r,s);else if(1102===i){const t=n.A.get(s);let i;i=t.sw?t.sw:"It's a "+t.name+'.',this.Ud(0,i,'')}else if(960===i){this.Bt.jc(O.A.gw),this.Bt.p2(r);const t=c.A.Ro[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];t.Qo&&this.pe[i]!==t.Qo[0]&&(this.pe[i]=t.Qo[0],await this.Fw(i),this.Ws=!0)}}else if(34===i){const i=this.rh[t],s=i.indexOf('@whi@');if(-1!==s){this.Uw(),this.Me=i.substring(s+5).trim(),this.ke=!1;for(let t=0;t<c.A.Ro.length;t++)if(c.A.Ro[t]&&c.A.Ro[t].El===c.A.Pa){this.xe=this.Xs=c.A.Ro[t].Nd;break}}}else if(947===i)this.Uw();else if(367===i){const t=this.nr[s];t&&this.Sr&&(this.df(this.Sr.wf[0],this.Sr.Af[0],t.wf[0],t.Af[0],2,1,1,0,0,0,!1),this.qs=this.Rc,this.$s=this.Sc,this.js=2,this.Zs=0,this.Bt.jc(O.A.Bw),this.Bt.p2(s),this.Bt.p2(this.ce),this.Bt.p2(this.le),this.Bt.p2(this.ae))}else if(465===i){this.Bt.jc(O.A.gw),this.Bt.p2(r);const t=c.A.Ro[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];this.pe[i]=1-this.pe[i],await this.Fw(i),this.Ws=!0}}else if(406===i||436===i||557===i||556===i){const s=this.rh[t],h=s.indexOf('@whi@');if(-1!==h){const t=M.A.ld(s.substring(h+5).trim());406===i?this.Gw(t):436===i?this.Hw(t):557===i?this.Ww(t):556===i&&this.Yw(t)}}else if(651===i){const t=this.nr[s];t&&this.Sr&&(this.df(this.Sr.wf[0],this.Sr.Af[0],t.wf[0],t.Af[0],2,1,1,0,0,0,!1),this.qs=this.Rc,this.$s=this.Sc,this.js=2,this.Zs=0,this.Bt.jc(O.A.Vw),this.Bt.p2(s),this.Bt.p2(this._e))}}}this.oe=0,this.Ie=0};Ew=t=>{const i=t.El;if(i===c.A.Kw&&(this.Ys=!0,this.Wh=!1,this.Fh=!0,this.Bh='',this.Gh=1,this.Uh='Enter name of friend to add to list'),i===c.A.Xw&&(this.Ys=!0,this.Wh=!1,this.Fh=!0,this.Bh='',this.Gh=2,this.Uh='Enter name of friend to delete from list'),i===c.A.zw)return this.Yt=250,!0;if(i===c.A.jw&&(this.Ys=!0,this.Wh=!1,this.Fh=!0,this.Bh='',this.Gh=4,this.Uh='Enter name of player to add to list'),i===c.A.Zw&&(this.Ys=!0,this.Wh=!1,this.Fh=!0,this.Bh='',this.Gh=5,this.Uh='Enter name of player to delete from list'),i>=c.A.qw&&i<=c.A.$w){const t=(i-300)/2|0,s=1&i;let h=this.Wr[t];if(-1!==h)for(;;)if(0===s&&(h--,h<0&&(h=o.A.count-1)),1===s&&(h++,h>=o.A.count&&(h=0)),!o.A.Ro[h].disable&&o.A.Ro[h].type===t+(this.Gr?0:7)){this.Wr[t]=h,this.Hr=!0;break}}if(i>=c.A.Jw&&i<=c.A.Qw){const t=(i-314)/2|0,s=1&i;let h=this.Yr[t];0===s&&(h--,h<0&&(h=W.A.La[t].length-1)),1===s&&(h++,h>=W.A.La[t].length&&(h=0)),this.Yr[t]=h,this.Hr=!0}if(i!==c.A.Da||this.Gr||(this.Gr=!0,this.Vc()),i===c.A.Na&&this.Gr&&(this.Gr=!1,this.Vc()),i===c.A.tA){this.Bt.jc(O.A.iA),this.Bt.p1(this.Gr?0:1);for(let t=0;t<7;t++)this.Bt.p1(this.Wr[t]);for(let t=0;t<5;t++)this.Bt.p1(this.Yr[t]);return!0}return i===c.A.Fa&&(this.ke=!this.ke),i>=c.A.sA&&i<=c.A.hA&&(this.Uw(),this.Me.length>0&&(this.Bt.jc(O.A.eA),this.Bt.nA(M.A.ld(this.Me)),this.Bt.p1(i-601),this.Bt.p1(this.ke?1:0))),!1};Vc=()=>{this.Hr=!0;for(let t=0;t<7;t++){this.Wr[t]=-1;for(let i=0;i<o.A.count;i++)if(!o.A.Ro[i].disable&&o.A.Ro[i].type===t+(this.Gr?0:7)){this.Wr[t]=i;break}}};Bd=(t,i,s,h)=>{if(!this.Sr||!this.He)return!1;const n=h>>14&32767,r=this.He.gd(this.Dn,i,s,h);if(-1===r)return!1;const o=31&r,l=r>>6&3;if(o===P.A.rA.id||o===P.A.oA.id||o===P.A.lA.id){const t=e.A.get(n);let h,r;l===F.A.bd||l===F.A.Ld?(h=t.width,r=t.length):(h=t.length,r=t.width);let o=t.aA;0!==l&&(o=(o<<l&15)+(o>>4-l)),this.df(this.Sr.wf[0],this.Sr.Af[0],i,s,2,h,r,0,0,o,!1)}else this.df(this.Sr.wf[0],this.Sr.Af[0],i,s,2,0,0,l,o+1,0,!1);return this.qs=this.Rc,this.$s=this.Sc,this.js=2,this.Zs=0,this.Bt.jc(t),this.Bt.p2(i+this.Tn),this.Bt.p2(s+this.On),this.Bt.p2(n),!0};mf=()=>{1===this.Lc&&(this.Rc>=549&&this.Rc<=583&&this.Sc>=195&&this.Sc<231&&-1!==this.Mh[0]?(this.Ws=!0,this.Sh=0,this.Vs=!0):this.Rc>=579&&this.Rc<=609&&this.Sc>=194&&this.Sc<231&&-1!==this.Mh[1]?(this.Ws=!0,this.Sh=1,this.Vs=!0):this.Rc>=607&&this.Rc<=637&&this.Sc>=194&&this.Sc<231&&-1!==this.Mh[2]?(this.Ws=!0,this.Sh=2,this.Vs=!0):this.Rc>=635&&this.Rc<=679&&this.Sc>=194&&this.Sc<229&&-1!==this.Mh[3]?(this.Ws=!0,this.Sh=3,this.Vs=!0):this.Rc>=676&&this.Rc<=706&&this.Sc>=194&&this.Sc<231&&-1!==this.Mh[4]?(this.Ws=!0,this.Sh=4,this.Vs=!0):this.Rc>=704&&this.Rc<=734&&this.Sc>=194&&this.Sc<231&&-1!==this.Mh[5]?(this.Ws=!0,this.Sh=5,this.Vs=!0):this.Rc>=732&&this.Rc<=766&&this.Sc>=195&&this.Sc<231&&-1!==this.Mh[6]?(this.Ws=!0,this.Sh=6,this.Vs=!0):this.Rc>=550&&this.Rc<=584&&this.Sc>=492&&this.Sc<528&&-1!==this.Mh[7]?(this.Ws=!0,this.Sh=7,this.Vs=!0):this.Rc>=582&&this.Rc<=612&&this.Sc>=492&&this.Sc<529&&-1!==this.Mh[8]?(this.Ws=!0,this.Sh=8,this.Vs=!0):this.Rc>=609&&this.Rc<=639&&this.Sc>=492&&this.Sc<529&&-1!==this.Mh[9]?(this.Ws=!0,this.Sh=9,this.Vs=!0):this.Rc>=637&&this.Rc<=681&&this.Sc>=493&&this.Sc<528&&-1!==this.Mh[10]?(this.Ws=!0,this.Sh=10,this.Vs=!0):this.Rc>=679&&this.Rc<=709&&this.Sc>=492&&this.Sc<529&&-1!==this.Mh[11]?(this.Ws=!0,this.Sh=11,this.Vs=!0):this.Rc>=706&&this.Rc<=736&&this.Sc>=492&&this.Sc<529&&-1!==this.Mh[12]?(this.Ws=!0,this.Sh=12,this.Vs=!0):this.Rc>=734&&this.Rc<=768&&this.Sc>=492&&this.Sc<528&&-1!==this.Mh[13]&&(this.Ws=!0,this.Sh=13,this.Vs=!0),$.K.ft++,$.K.ft>150&&($.K.ft=0,this.Bt.jc(O.A.cA),this.Bt.p1(43)))};Cf=async()=>{for(;;){let t;do{for(;;){if(t=this.kc(),-1===t)return;if(-1!==this.Xs&&this.Xs===this.xe){8===t&&this.Me.length>0&&(this.Me=this.Me.substring(0,this.Me.length-1));break}if(this.Fh){if(t>=32&&t<=122&&this.Bh.length<80&&(this.Bh=this.Bh+String.fromCharCode(t),this.Ys=!0),8===t&&this.Bh.length>0&&(this.Bh=this.Bh.substring(0,this.Bh.length-1),this.Ys=!0),13===t||10===t){let t;if(this.Fh=!1,this.Ys=!0,1===this.Gh&&(t=M.A.ld(this.Bh),this.Gw(t)),2===this.Gh&&this.Vr>0&&(t=M.A.ld(this.Bh),this.Ww(t)),3===this.Gh&&this.Bh.length>0&&this.no){this.Bt.jc(O.A.fA),this.Bt.p1(0);const t=this.Bt.Fc;this.Bt.nA(this.no),v.A.uA(this.Bt,this.Bh),this.Bt.Hf(this.Bt.Fc-t),this.Bh=M.A.dA(this.Bh),this.Bh=b.A.filter(this.Bh),this.Ud(6,this.Bh,M.A.ga(M.A.Ca(this.no))),2===this.xh&&(this.xh=1,this.Ks=!0,this.Bt.jc(O.A.wA),this.Bt.p1(this.kh),this.Bt.p1(this.xh),this.Bt.p1(this.Dh))}4===this.Gh&&this.dh<100&&(t=M.A.ld(this.Bh),this.Hw(t)),5===this.Gh&&this.dh>0&&(t=M.A.ld(this.Bh),this.Yw(t))}}else if(this.Wh){if(t>=48&&t<=57&&this.Hh.length<10&&(this.Hh=this.Hh+String.fromCharCode(t),this.Ys=!0),8===t&&this.Hh.length>0&&(this.Hh=this.Hh.substring(0,this.Hh.length-1),this.Ys=!0),13===t||10===t){if(this.Hh.length>0){let t=0;try{t=parseInt(this.Hh,10)}catch(t){}this.Bt.jc(O.A.AA),this.Bt.p4(t)}this.Wh=!1,this.Ys=!0}}else if(-1===this.lh&&(t>=32&&t<=122&&this.qh.length<80&&(this.qh=this.qh+String.fromCharCode(t),this.Ys=!0),8===t&&this.qh.length>0&&(this.qh=this.qh.substring(0,this.qh.length-1),this.Ys=!0),(13===t||10===t)&&this.qh.length>0)){if('::clientdrop'===this.qh)await this.qc();else if(this.Br&&'::noclip'===this.qh)for(let t=0;t<G.A.xn;t++)for(let i=1;i<G.A.Xn-1;i++)for(let s=1;s<G.A.Xn-1;s++){const h=this.kn[t];h&&(h.flags[G.A.index(i,s)]=0)}else if('::debug'===this.qh)$.K.nt=!$.K.nt;else if('::chat'===this.qh)$.K.rt=($.K.rt+1)%3;else if(this.qh.startsWith('::fps '))try{this.yA(parseInt(this.qh.substring(6),10))}catch(t){}else if(this.qh.startsWith('::camera'))$.K.ot=!$.K.ot,this.ze=$.K.ot,this.Zn=52,this.qn=52,this.tr=52,this.ir=52,this.sr=1e3,this.$n=1e3;else if(this.qh.startsWith('::camsrc ')){const t=this.qh.split(' ');3===t.length?(this.tr=parseInt(t[1],10),this.ir=parseInt(t[2],10)):4===t.length&&(this.tr=parseInt(t[1],10),this.ir=parseInt(t[2],10),this.sr=parseInt(t[3],10))}else if(this.qh.startsWith('::camdst ')){const t=this.qh.split(' ');3===t.length?(this.Zn=parseInt(t[1],10),this.qn=parseInt(t[2],10)):4===t.length&&(this.Zn=parseInt(t[1],10),this.qn=parseInt(t[2],10),this.$n=parseInt(t[3],10))}if(this.qh.startsWith('::'))this.Bt.jc(O.A.pA),this.Bt.p1(this.qh.length-1),this.Bt.Bc(this.qh.substring(2));else{let t=0;this.qh.startsWith('yellow:')?(t=0,this.qh=this.qh.substring(7)):this.qh.startsWith('red:')?(t=1,this.qh=this.qh.substring(4)):this.qh.startsWith('green:')?(t=2,this.qh=this.qh.substring(6)):this.qh.startsWith('cyan:')?(t=3,this.qh=this.qh.substring(5)):this.qh.startsWith('purple:')?(t=4,this.qh=this.qh.substring(7)):this.qh.startsWith('white:')?(t=5,this.qh=this.qh.substring(6)):this.qh.startsWith('flash1:')?(t=6,this.qh=this.qh.substring(7)):this.qh.startsWith('flash2:')?(t=7,this.qh=this.qh.substring(7)):this.qh.startsWith('flash3:')?(t=8,this.qh=this.qh.substring(7)):this.qh.startsWith('glow1:')?(t=9,this.qh=this.qh.substring(6)):this.qh.startsWith('glow2:')?(t=10,this.qh=this.qh.substring(6)):this.qh.startsWith('glow3:')&&(t=11,this.qh=this.qh.substring(6));let i=0;this.qh.startsWith('wave:')&&(i=1,this.qh=this.qh.substring(5)),this.qh.startsWith('scroll:')&&(i=2,this.qh=this.qh.substring(7)),this.Bt.jc(O.A.mA),this.Bt.p1(0);const s=this.Bt.Fc;this.Bt.p1(t),this.Bt.p1(i),v.A.uA(this.Bt,this.qh),this.Bt.Hf(this.Bt.Fc-s),this.qh=M.A.dA(this.qh),this.qh=b.A.filter(this.qh),this.Sr&&this.Sr.name&&(this.Sr.ou=this.qh,this.Sr.cu=t,this.Sr.fu=i,this.Sr.uu=150,this.Ud(2,this.Sr.ou,this.Sr.name)),2===this.kh&&(this.kh=3,this.Ks=!0,this.Bt.jc(O.A.wA),this.Bt.p1(this.kh),this.Bt.p1(this.xh),this.Bt.p1(this.Dh))}this.qh='',this.Ys=!0}}}while((t<97||t>122)&&(t<65||t>90)&&(t<48||t>57)&&32!==t);this.Me.length<12&&(this.Me=this.Me+String.fromCharCode(t))}};If=()=>{if(1===this.Lc)if(this.Rc>=8&&this.Rc<=108&&this.Sc>=490&&this.Sc<=522)this.kh=(this.kh+1)%4,this.Ks=!0,this.Ys=!0,this.Bt.jc(O.A.wA),this.Bt.p1(this.kh),this.Bt.p1(this.xh),this.Bt.p1(this.Dh);else if(this.Rc>=137&&this.Rc<=237&&this.Sc>=490&&this.Sc<=522)this.xh=(this.xh+1)%3,this.Ks=!0,this.Ys=!0,this.Bt.jc(O.A.wA),this.Bt.p1(this.kh),this.Bt.p1(this.xh),this.Bt.p1(this.Dh);else if(this.Rc>=275&&this.Rc<=375&&this.Sc>=490&&this.Sc<=522)this.Dh=(this.Dh+1)%3,this.Ks=!0,this.Ys=!0,this.Bt.jc(O.A.wA),this.Bt.p1(this.kh),this.Bt.p1(this.xh),this.Bt.p1(this.Dh);else if(this.Rc>=416&&this.Rc<=516&&this.Sc>=490&&this.Sc<=522){this.Uw(),this.Me='',this.ke=!1;for(let t=0;t<c.A.Ro.length;t++)if(c.A.Ro[t]&&600===c.A.Ro[t].El)return void(this.xe=this.Xs=c.A.Ro[t].Nd)}};Rf=(t,i,s,h,e,n,r,o)=>{if(this.Nh?this.Ph=32:this.Ph=0,this.Nh=!1,t>=n&&t<n+16&&i>=r&&i<r+16)o.Tl-=4*this.zs,e&&(this.Ws=!0);else if(t>=n&&t<n+16&&i>=r+h-16&&i<r+h)o.Tl+=4*this.zs,e&&(this.Ws=!0);else if(t>=n-this.Ph&&t<n+this.Ph+16&&i>=r+16&&i<r+h-16&&this.zs>0){let t=(h-32)*h/s|0;t<8&&(t=8);const n=i-r-(t/2|0)-16,l=h-t-32;o.Tl=(s-h)*n/l|0,e&&(this.Ws=!0),this.Nh=!0}};Kc=()=>{this.Fi||(this.Lo(),this.Mo=null,this.ti=null,this.ii=null,this.si=null,this.hi=null,this.ei=null,this.ni=null,this.ri=null,this.oi=null,this.li=null,this.Fi=new f.A(479,96),this.Ni=new f.A(168,160),u.A.clear(),this.os?.draw(0,0),this.Di=new f.A(190,261),this.Pi=new f.A(512,334),u.A.clear(),this.Ui=new f.A(501,61),this.Bi=new f.A(288,40),this.Gi=new f.A(269,66),this.$t=!0)};lu=t=>{if(!t)return!1;for(let i=0;i<this.Vr;i++)if(t.toLowerCase()===this.so[i]?.toLowerCase())return!0;return!!this.Sr&&t.toLowerCase()===this.Sr.name?.toLowerCase()};Gw=t=>{if(0n===t)return;if(this.Vr>=100)return void this.Ud(0,'Your friends list is full. Max of 100 hit','');const i=M.A.ga(M.A.Ca(t));for(let s=0;s<this.Vr;s++)if(this.ho[s]===t)return void this.Ud(0,i+' is already on your friend list','');for(let s=0;s<this.dh;s++)if(this.wh[s]===t)return void this.Ud(0,'Please remove '+i+' from your ignore list first','');this.Sr&&this.Sr.name&&i!==this.Sr.name&&(this.so[this.Vr]=i,this.ho[this.Vr]=t,this.eo[this.Vr]=0,this.Vr++,this.Ws=!0,this.Bt.jc(O.A.IA),this.Bt.nA(t))};Ww=t=>{if(0n!==t)for(let i=0;i<this.Vr;i++)if(this.ho[i]===t){this.Vr--,this.Ws=!0;for(let t=i;t<this.Vr;t++)this.so[t]=this.so[t+1],this.eo[t]=this.eo[t+1],this.ho[t]=this.ho[t+1];return this.Bt.jc(O.A._A),void this.Bt.nA(t)}};Hw=t=>{if(0n===t)return;if(this.dh>=100)return void this.Ud(0,'Your ignore list is full. Max of 100 hit','');const i=M.A.ga(M.A.Ca(t));for(let s=0;s<this.dh;s++)if(this.wh[s]===t)return void this.Ud(0,i+' is already on your ignore list','');for(let s=0;s<this.Vr;s++)if(this.ho[s]===t)return void this.Ud(0,'Please remove '+i+' from your friend list first','');this.wh[this.dh++]=t,this.Ws=!0,this.Bt.jc(O.A.EA),this.Bt.nA(t)};Yw=t=>{if(0n!==t)for(let i=0;i<this.dh;i++)if(this.wh[i]===t){this.dh--,this.Ws=!0;for(let t=i;t<this.dh;t++)this.wh[t]=this.wh[t+1];return this.Bt.jc(O.A.gA),void this.Bt.nA(t)}};CA=(t,i)=>{const s=this.gr[this.Dn][t][i];if(!s)return void this.He?.TA(this.Dn,t,i);let h=-99999999,e=null;for(let t=s.head();t;t=s.next()){const i=n.A.get(t.index);let s=i.OA;i.da&&(s*=t.count+1),s>h&&(h=s,e=t)}if(!e)return;s.bA(e);let r=-1,o=-1,l=0,a=0;for(let t=s.head();t;t=s.next())t.index!==e.index&&-1===r&&(r=t.index,l=t.count),t.index!==e.index&&t.index!==r&&-1===o&&(o=t.index,a=t.count);let c=null;-1!==r&&(c=n.A.get(r).vA(l));let f=null;-1!==o&&(f=n.A.get(o).vA(a));const u=t+(i<<7)+1610612736|0,d=n.A.get(e.index);this.He?.LA(t,i,this.Bf(this.Dn,128*t+64,128*i+64),this.Dn,u,d.vA(e.count),f,c)};RA=(t,i,s,h,n,r,o)=>{if(i<1||s<1||i>102||s>102)return;if($.K.st&&t!==this.Dn)return;if(!this.He)return;let l=0;if(o===N.A.SA&&(l=this.He.Ed(t,i,s)),o===N.A.MA&&(l=this.He.kA(t,s,i)),o===N.A.xA&&(l=this.He.Md(t,i,s)),o===N.A.lA&&(l=this.He.Ad(t,i,s)),0!==l){const h=this.He.gd(t,i,s,l),n=l>>14&32767,r=31&h,a=h>>6;if(o===N.A.SA){this.He?.DA(t,i,s,1);const h=e.A.get(n);h.NA&&this.kn[t]?.DA(i,s,r,a,h.PA)}if(o===N.A.MA&&this.He?.FA(t,i,s),o===N.A.xA){this.He.UA(t,i,s);const h=e.A.get(n);if(i+h.width>G.A.Xn-1||s+h.width>G.A.Xn-1||i+h.length>G.A.Xn-1||s+h.length>G.A.Xn-1)return;h.NA&&this.kn[t]?.UA(i,s,h.width,h.length,a,h.PA)}if(o===N.A.lA){this.He?.BA(t,i,s);const h=e.A.get(n);h.NA&&h.active&&this.kn[t]?.GA(i,s)}}if(h>=0){let e=t;this.Yn&&t<3&&!(2&~this.Yn[1][i][s])&&(e=t+1),this.Wn&&D.A.RA(t,i,s,this.He,this.Wn,this._r,this.kn[t],h,r,n,e)}};Uw=()=>{this.Bt.jc(O.A.HA),-1!==this.oh&&(this.oh=-1,this.Ws=!0,this.ye=!1,this.Vs=!0),-1!==this.lh&&(this.lh=-1,this.Ys=!0,this.ye=!1),this.Xs=-1};qc=async()=>{this.Yt>0?await this.WA():(this.Pi?.bind(),this.wi?.Ac(257,144,'Connection lost',m.A.Bl),this.wi?.Ac(256,143,'Connection lost',m.A._l),this.wi?.Ac(257,159,'Please wait - attempting to reestablish',m.A.Bl),this.wi?.Ac(256,158,'Please wait - attempting to reestablish',m.A._l),this.Pi?.draw(8,11),this.Ke=0,this.stream?.close(),this.ac=!1,await this.Mc(this.username,this.password,!0),this.ac||await this.WA())};WA=async()=>{this.stream&&this.stream.close(),this.stream=null,this.ac=!1,this.Jt=0,this.username='',this.password='',k.A.Wc(),this.Qf(),this.He?.reset();for(let t=0;t<G.A.xn;t++)this.kn[t]?.reset();(0,j.vo)(!1),this.mo=null,this.yo=0,$.K.st||await this.Vo('scape_main',12345678,4e4,!1)};read=async()=>{if(!this.stream)return!1;try{let t=this.stream.available;if(0===t)return!1;if(-1===this.Xt&&(await this.stream.Pc(this.in.data,0,1),this.Xt=255&this.in.data[0],this.Kt&&(this.Xt=this.Xt-this.Kt.YA&255),this.packetSize=E.A.VA[this.Xt],t--),-1===this.packetSize){if(t<=0)return!1;await this.stream.Pc(this.in.data,0,1),this.packetSize=255&this.in.data[0],t--}if(-2===this.packetSize){if(t<=1)return!1;await this.stream.Pc(this.in.data,0,2),this.in.Fc=0,this.packetSize=this.in.KA,t-=2}if(t<this.packetSize)return!1;if(this.in.Fc=0,await this.stream.Pc(this.in.data,0,this.packetSize),this.Wt=0,this.Zt=this.jt,this.jt=this.zt,this.zt=this.Xt,this.Xt===T.A.XA){const t=this.in.KA,i=this.in.zA;return this.me[t]=i,this.pe[t]!==i&&(this.pe[t]=i,await this.Fw(t),this.Ws=!0,-1!==this.Yh&&(this.Ys=!0)),this.Xt=-1,!0}if(this.Xt===T.A.jA){const t=this.in.Uc,i=this.in.ZA;let s=M.A.ga(M.A.Ca(t));for(let h=0;h<this.Vr;h++)if(t===this.ho[h]){this.eo[h]!==i&&(this.eo[h]=i,this.Ws=!0,i>0&&this.Ud(5,s+' has logged in.',''),0===i&&this.Ud(5,s+' has logged out.','')),s=null;break}s&&this.Vr<100&&(this.ho[this.Vr]=t,this.so[this.Vr]=s,this.eo[this.Vr]=i,this.Vr++,this.Ws=!0);let h=!1;for(;!h;){h=!0;for(let t=0;t<this.Vr-1;t++)if(this.eo[t]!==$.K.it&&this.eo[t+1]===$.K.it||0===this.eo[t]&&0!==this.eo[t+1]){const i=this.eo[t];this.eo[t]=this.eo[t+1],this.eo[t+1]=i;const s=this.so[t];this.so[t]=this.so[t+1],this.so[t+1]=s;const e=this.ho[t];this.ho[t]=this.ho[t+1],this.ho[t+1]=e,this.Ws=!0,h=!1}}return this.Xt=-1,!0}if(this.Xt===T.A.qA)return this.Vt=30*this.in.KA,this.Xt=-1,!0;if(this.Xt===T.A.$A){const t=this.in.ZA,i=this.in.ZA;let s=-1;if(this.Ln)for(let h=0;h<this.Ln.length;h++)this.Ln[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.bn;if(h){const e=h[s];-1!==s&&e&&(this.db?.Yo(`m${t}_${i}`,e),this.We=1)}}return this.Xt=-1,!0}if(this.Xt===T.A.JA)return this.QA(this.in,this.packetSize),this.Xt=-1,!0;if(this.Xt===T.A.ty){const t=this.in.KA,i=this.in.KA;if(this.gn===t&&this.Cn===i&&0!==this.We)return this.Xt=-1,!0;this.gn=t,this.Cn=i,this.Tn=8*(this.gn-6),this.On=8*(this.Cn-6),this.We=1,this.Pi?.bind(),this.wi?.Ac(257,151,'Loading - please wait.',m.A.Bl),this.wi?.Ac(256,150,'Loading - please wait.',m.A._l),this.Pi?.draw(8,11);const s=(this.packetSize-2)/10|0;this.bn=new q.ds(s,null),this.vn=new q.ds(s,null),this.Ln=new Int32Array(s),this.Bt.jc(O.A.iy),this.Bt.p1(0);let h=0;for(let t=0;t<s;t++){const i=this.in.ZA,s=this.in.ZA,e=this.in.Ko,n=this.in.Ko;let r;this.Ln[t]=(i<<8)+s,0!==e&&(r=await(this.db?.Uo(`m${i}_${s}`)),r&&I.A.Bo(r)!==e&&(r=void 0),r?this.bn[t]=r:(this.We=0,this.Bt.p1(0),this.Bt.p1(i),this.Bt.p1(s),h+=3)),0!==n&&(r=await(this.db?.Uo(`l${i}_${s}`)),r&&I.A.Bo(r)!==n&&(r=void 0),r?this.vn[t]=r:(this.We=0,this.Bt.p1(1),this.Bt.p1(i),this.Bt.p1(s),h+=3))}this.Bt.Hf(h),this.Pi?.bind(),0===this.We&&(this.wi?.Ac(257,166,'Map area updated since last visit, so load will take longer this time only',m.A.Bl),this.wi?.Ac(256,165,'Map area updated since last visit, so load will take longer this time only',m.A._l)),this.Pi?.draw(8,11);const e=this.Tn-this.Rn,n=this.On-this.Sn;this.Rn=this.Tn,this.Sn=this.On;for(let t=0;t<8192;t++){const i=this.Ar[t];if(i){for(let t=0;t<10;t++)i.wf[t]-=e,i.Af[t]-=n;i.x-=128*e,i.z-=128*n}}for(let t=0;t<this.St;t++){const i=this.nr[t];if(i){for(let t=0;t<10;t++)i.wf[t]-=e,i.Af[t]-=n;i.x-=128*e,i.z-=128*n}}let r=0,o=G.A.Xn,l=1;e<0&&(r=G.A.Xn-1,o=-1,l=-1);let a=0,c=G.A.Xn,f=1;n<0&&(a=G.A.Xn-1,c=-1,f=-1);for(let t=r;t!==o;t+=l)for(let i=a;i!==c;i+=f){const s=t+e,h=i+n;for(let e=0;e<G.A.xn;e++)s>=0&&h>=0&&s<G.A.Xn&&h<G.A.Xn?this.gr[e][t][i]=this.gr[e][s][h]:this.gr[e][t][i]=null}for(let t=this.Tr.head();t;t=this.Tr.next())t.x-=e,t.z-=n,(t.x<0||t.z<0||t.x>=G.A.Xn||t.z>=G.A.Xn)&&t.sy();return 0!==this.Ke&&(this.Ke-=e,this.Xe-=n),this.ze=!1,this.Xt=-1,!0}if(this.Xt===T.A.hy)return c.A.Ro[this.in.KA].model=this.Sr?.ey()||null,this.Xt=-1,!0;if(this.Xt===T.A.ny)return this.Ah=this.in.ZA,1===this.Ah&&(this.yh=this.in.KA),this.Ah>=2&&this.Ah<=6&&(2===this.Ah&&(this.ph=64,this.mh=64),3===this.Ah&&(this.ph=0,this.mh=64),4===this.Ah&&(this.ph=128,this.mh=64),5===this.Ah&&(this.ph=64,this.mh=0),6===this.Ah&&(this.ph=64,this.mh=128),this.Ah=2,this._h=this.in.KA,this.Eh=this.in.KA,this.gh=this.in.ZA),10===this.Ah&&(this.Ih=this.in.KA),this.Xt=-1,!0;if(this.Xt===T.A.oy){const t=this.in.ly,i=this.in.Ko,s=this.in.Ko;return t!==this.mo&&this.po&&!$.K.st&&await this.Vo(t,i,s,!0),this.mo=t,this.Io=i,this._o=s,this.yo=0,this.Xt=-1,!0}if(this.Xt===T.A.uy)return await this.WA(),this.Xt=-1,!1;if(this.Xt===T.A.wy){const t=this.in.ZA,i=this.in.ZA;let s=-1;if(this.Ln)for(let h=0;h<this.Ln.length;h++)this.Ln[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.vn;if(h){const e=h[s];-1!==s&&e&&(this.db?.Yo(`l${t}_${i}`,e),this.We=1)}}return this.Xt=-1,!0}if(this.Xt===T.A.Ay)return this.Ke=0,this.Xt=-1,!0;if(this.Xt===T.A.yy)return this.Dr=this.in.KA,this.Xt=-1,!0;if(this.Xt===T.A.py||this.Xt===T.A.my||this.Xt===T.A.Iy||this.Xt===T.A._y||this.Xt===T.A.Ey||this.Xt===T.A.gy||this.Xt===T.A.Cy||this.Xt===T.A.Ty||this.Xt===T.A.Oy||this.Xt===T.A.by)return this.vy(this.in,this.Xt),this.Xt=-1,!0;if(this.Xt===T.A.Ly){const t=this.in.KA,i=this.in.KA;return-1!==this.lh&&(this.lh=-1,this.Ys=!0),this.Wh&&(this.Wh=!1,this.Ys=!0),this.Xs=t,this.oh=i,this.Ws=!0,this.Vs=!0,this.ye=!1,this.Xt=-1,!0}if(this.Xt===T.A.Ry){const t=this.in.KA,i=this.in.Ko;return this.me[t]=i,this.pe[t]!==i&&(this.pe[t]=i,await this.Fw(t),this.Ws=!0,-1!==this.Yh&&(this.Ys=!0)),this.Xt=-1,!0}if(this.Xt===T.A.Sy){const t=this.in.KA;return c.A.Ro[t].al=this.in.KA,this.Xt=-1,!0}if(this.Xt===T.A.My){let t=this.in.KA;const i=this.in.ZA;return 65535===t&&(t=-1),this.Mh[i]=t,this.Ws=!0,this.Vs=!0,this.Xt=-1,!0}if(this.Xt===T.A.ky){const t=this.in.ZA,i=this.in.ZA,s=this.in.KA,h=this.in.KA;let e=-1;if(this.Ln)for(let s=0;s<this.Ln.length;s++)this.Ln[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.vn){this.vn[e]&&this.vn[e]?.length===h||(this.vn[e]=new Int8Array(h));const t=this.vn[e];t&&this.in.xy(this.packetSize-6,s,t)}return this.Xt=-1,!0}if(this.Xt===T.A.Dy){const t=k.A.stop();return t&&(this.Bt.jc(O.A.Zc),this.Bt.p2(t.Fc),this.Bt.Hc(t.data,t.Fc,0),t.release()),this.Xt=-1,!0}if(this.Xt===T.A.Ny){this.Ws=!0;const t=this.in.KA,i=c.A.Ro[t],s=this.in.ZA;if(i.Ll&&i.Rl){for(let t=0;t<s;t++){i.Ll[t]=this.in.KA;let s=this.in.ZA;255===s&&(s=this.in.Ko),i.Rl[t]=s}for(let t=s;t<i.Ll.length;t++)i.Ll[t]=0,i.Rl[t]=0}else for(let t=0;t<s;t++)this.in.KA,255===this.in.ZA&&this.in.Ko;return this.Xt=-1,!0}if(this.Xt===T.A.Py)return k.A.Fy(),this.Xt=-1,!0;if(this.Xt===T.A.Uy)return this.Fh=!1,this.Wh=!0,this.Hh='',this.Ys=!0,this.Xt=-1,!0;if(this.Xt===T.A.By){const t=c.A.Ro[this.in.KA];if(t.Ll)for(let i=0;i<t.Ll.length;i++)t.Ll[i]=-1,t.Ll[i]=0;return this.Xt=-1,!0}if(this.Xt===T.A.Gy){if(this.De=this.in.Ko,this.Ne=this.in.KA,this.Pe=this.in.ZA,this.Fe=this.in.KA,0!==this.De&&-1===this.Xs){this.Uw();let t=650;201!==this.Pe&&(t=655),this.Me='',this.ke=!1;for(let i=0;i<c.A.Ro.length;i++)if(c.A.Ro[i]&&c.A.Ro[i].El===t){this.Xs=c.A.Ro[i].Nd;break}}return this.Xt=-1,!0}if(this.Xt===T.A.Hy)return this.Rh=this.in.ZA,this.Rh===this.Sh&&(3===this.Rh?this.Sh=1:this.Sh=3,this.Ws=!0),this.Xt=-1,!0;if(this.Xt===T.A.Wy){if(this.po&&!$.K.st){const t=this.in.KA,i=this.in.Ko,s=this.packetSize-6,h=R.A.read(i,Int8Array.from(this.in.data),s,this.in.Fc);(0,j.Xo)(h,this.Eo,!1),this.yo=t}return this.Xt=-1,!0}if(this.Xt===T.A.Yy)return this.kr=this.in.ZA,this.Xt=-1,!0;if(this.Xt===T.A.Vy){const t=this.in.KA,i=this.in.ZA,s=this.in.KA;return this.oo&&!$.K.st&&this.ro<50&&(this.lo[this.ro]=t,this.ao[this.ro]=i,this.co[this.ro]=s+L.A.Ky[t],this.ro++),this.Xt=-1,!0}if(this.Xt===T.A.Xy){const t=this.in.KA,i=this.in.KA,s=r.A.get(i);return c.A.Ro[t].model=s.ey(),this.Xt=-1,!0}if(this.Xt===T.A.zy)return this._n=this.in.ZA,this.En=this.in.ZA,this.Xt=-1,!0;if(this.Xt===T.A.jy){const t=this.in.KA,i=this.in.KA,s=this.in.KA,h=c.A.Ro[t].model;return h?.va(i,s),this.Xt=-1,!0}if(this.Xt===T.A.Zy)return this.kh=this.in.ZA,this.xh=this.in.ZA,this.Dh=this.in.ZA,this.Ks=!0,this.Ys=!0,this.Xt=-1,!0;if(this.Xt===T.A.qy){const t=this.in.KA;return this.$y(t),-1!==this.lh&&(this.lh=-1,this.Ys=!0),this.Wh&&(this.Wh=!1,this.Ys=!0),this.oh=t,this.Ws=!0,this.Vs=!0,this.Xs=-1,this.ye=!1,this.Xt=-1,!0}if(this.Xt===T.A.Jy){const t=this.in.KA;return this.$y(t),-1!==this.oh&&(this.oh=-1,this.Ws=!0,this.Vs=!0),this.lh=t,this.Ys=!0,this.Xs=-1,this.ye=!1,this.Xt=-1,!0}if(this.Xt===T.A.Qy){const t=this.in.KA,i=this.in.tp,s=this.in.tp,h=c.A.Ro[t];return h.x=i,h.y=s,this.Xt=-1,!0}if(this.Xt===T.A.ip)return this.ze=!0,this.tr=this.in.ZA,this.ir=this.in.ZA,this.sr=this.in.KA,this.hr=this.in.ZA,this.er=this.in.ZA,this.er>=100&&(this.ln=128*this.tr+64,this.cn=128*this.ir+64,this.an=this.Bf(this.Dn,this.tr,this.ir)-this.sr),this.Xt=-1,!0;if(this.Xt===T.A.sp){this._n=this.in.ZA,this.En=this.in.ZA;for(let t=this._n;t<this._n+8;t++)for(let i=this.En;i<this.En+8;i++)this.gr[this.Dn][t][i]&&(this.gr[this.Dn][t][i]=null,this.CA(t,i));for(let t=this.Tr.head();t;t=this.Tr.next())t.x>=this._n&&t.x<this._n+8&&t.z>=this.En&&t.z<this.En+8&&t.hp===this.Dn&&(this.RA(t.hp,t.x,t.z,t.ep,t.np,t.rp,t.Nd),t.sy());return this.Xt=-1,!0}if(this.Xt===T.A.op){const t=this.in.ZA,i=this.in.ZA,s=this.in.KA,h=this.in.KA;let e=-1;if(this.Ln)for(let s=0;s<this.Ln.length;s++)this.Ln[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.bn){this.bn[e]&&this.bn[e]?.length===h||(this.bn[e]=new Int8Array(h));const t=this.bn[e];t&&this.in.xy(this.packetSize-6,s,t)}return this.Xt=-1,!0}if(this.Xt===T.A.fA){const t=this.in.Uc,i=this.in.Ko,s=this.in.ZA;let h=!1;for(let t=0;t<100;t++)if(this.Xh[t]===i){h=!0;break}if(s<=1)for(let i=0;i<this.dh;i++)if(this.wh[i]===t){h=!0;break}if(!h&&0===this.Js)try{this.Xh[this.zh]=i,this.zh=(this.zh+1)%100;const h=v.A.ec(this.in,this.packetSize-13),e=b.A.filter(h);s>1?this.Ud(7,e,M.A.ga(M.A.Ca(t))):this.Ud(3,e,M.A.ga(M.A.Ca(t)))}catch(t){}return this.Xt=-1,!0}if(this.Xt===T.A.lp){for(let t=0;t<this.pe.length;t++)this.pe[t]!==this.me[t]&&(this.pe[t]=this.me[t],await this.Fw(t),this.Ws=!0);return this.Xt=-1,!0}if(this.Xt===T.A.ap){const t=this.in.KA,i=this.in.KA;return c.A.Ro[t].model=p.A.model(i),this.Xt=-1,!0}if(this.Xt===T.A.cp)return this.Yh=this.in.tp,this.Ys=!0,this.Xt=-1,!0;if(this.Xt===T.A.fp)return 12===this.Sh&&(this.Ws=!0),this.Mr=this.in.ZA,this.Xt=-1,!0;if(this.Xt===T.A.up){if(this.ze=!0,this.Zn=this.in.ZA,this.qn=this.in.ZA,this.$n=this.in.KA,this.Jn=this.in.ZA,this.Qn=this.in.ZA,this.Qn>=100){const t=128*this.Zn+64,i=128*this.qn+64,s=this.Bf(this.Dn,this.Zn,this.qn)-this.$n,h=t-this.ln,e=s-this.an,n=i-this.cn,r=0|Math.sqrt(h*h+n*n);this.fn=325.949*Math.atan2(e,r)&2047,this.un=-325.949*Math.atan2(h,n)&2047,this.fn<128&&(this.fn=128),this.fn>383&&(this.fn=383)}return this.Xt=-1,!0}if(this.Xt===T.A.dp)return this.Sh=this.in.ZA,this.Ws=!0,this.Vs=!0,this.Xt=-1,!0;if(this.Xt===T.A.wp){const t=this.in.ly;let i;if(t.endsWith(':tradereq:')){const s=t.substring(0,t.indexOf(':'));i=M.A.ld(s);let h=!1;for(let t=0;t<this.dh;t++)if(this.wh[t]===i){h=!0;break}h||0!==this.Js||this.Ud(4,'wishes to trade with you.',s)}else if(t.endsWith(':duelreq:')){const s=t.substring(0,t.indexOf(':'));i=M.A.ld(s);let h=!1;for(let t=0;t<this.dh;t++)if(this.wh[t]===i){h=!0;break}h||0!==this.Js||this.Ud(8,'wishes to duel with you.',s)}else this.Ud(0,t,'');return this.Xt=-1,!0}if(this.Xt===T.A.Ap){const t=this.in.KA,i=this.in.KA,s=this.in.KA,h=n.A.get(i);return c.A.Ro[t].model=h.vA(50),c.A.Ro[t].oa=h.yp,c.A.Ro[t].fa=h.pp,c.A.Ro[t].zoom=100*h.mp/s|0,this.Xt=-1,!0}if(this.Xt===T.A.Ip){const t=this.in.KA;return this.$y(t),-1!==this.oh&&(this.oh=-1,this.Ws=!0,this.Vs=!0),-1!==this.lh&&(this.lh=-1,this.Ys=!0),this.Wh&&(this.Wh=!1,this.Ys=!0),this.Xs=t,this.ye=!1,this.Xt=-1,!0}if(this.Xt===T.A._p){const t=this.in.KA,i=this.in.KA,s=i>>10&31,h=i>>5&31,e=31&i;return c.A.Ro[t].Yl=(s<<19)+(h<<11)+(e<<3),this.Xt=-1,!0}if(this.Xt===T.A.Ep){for(let t=0;t<this.nr.length;t++){const i=this.nr[t];i&&(i.Ou=-1)}for(let t=0;t<this.Ar.length;t++){const i=this.Ar[t];i&&(i.Ou=-1)}return this.Xt=-1,!0}if(this.Xt===T.A.gp){const t=this.in.KA;return c.A.Ro[t].hide=1===this.in.ZA,this.Xt=-1,!0}if(this.Xt===T.A.Cp){this.dh=this.packetSize/8|0;for(let t=0;t<this.dh;t++)this.wh[t]=this.in.Uc;return this.Xt=-1,!0}if(this.Xt===T.A.Tp){this.ze=!1;for(let t=0;t<5;t++)this.hn[t]=!1;return this.Xt=-1,!0}if(this.Xt===T.A.Op)return-1!==this.oh&&(this.oh=-1,this.Ws=!0,this.Vs=!0),-1!==this.lh&&(this.lh=-1,this.Ys=!0),this.Wh&&(this.Wh=!1,this.Ys=!0),this.Xs=-1,this.ye=!1,this.Xt=-1,!0;if(this.Xt===T.A.bp){const t=this.in.KA;return c.A.Ro[t].text=this.in.ly,c.A.Ro[t].Nd===this.Mh[this.Sh]&&(this.Ws=!0),this.Xt=-1,!0}if(this.Xt===T.A.vp){this.Ws=!0;const t=this.in.ZA,i=this.in.Ko,s=this.in.ZA;this.Ch[t]=i,this.Th[t]=s,this.Oh[t]=1;for(let s=0;s<98;s++)i>=this.bh[s]&&(this.Oh[t]=s+2);return this.Xt=-1,!0}if(this.Xt===T.A.Lp){for(this._n=this.in.ZA,this.En=this.in.ZA;this.in.Fc<this.packetSize;){const t=this.in.ZA;this.vy(this.in,t)}return this.Xt=-1,!0}if(this.Xt===T.A.Rp)return 12===this.Sh&&(this.Ws=!0),this.Nr=this.in.tp,this.Xt=-1,!0;if(this.Xt===T.A.Sp){const t=this.in.ZA,i=this.in.ZA,s=this.in.ZA,h=this.in.ZA;return this.hn[t]=!0,this.en[t]=i,this.nn[t]=s,this.rn[t]=h,this.sn[t]=0,this.Xt=-1,!0}if(this.Xt===T.A.Mp){this.Ws=!0;const t=this.in.KA,i=c.A.Ro[t];for(;this.in.Fc<this.packetSize;){const t=this.in.ZA,s=this.in.KA;let h=this.in.ZA;255===h&&(h=this.in.Ko),i.Ll&&i.Rl&&t>=0&&t<i.Ll.length&&(i.Ll[t]=s,i.Rl[t]=h)}return this.Xt=-1,!0}if(this.Xt===T.A.kp)return this.Oo=!this.Oo,this.xp(this.in,this.packetSize),1===this.We&&(this.We=2,D.A.Dp=this.Dn,this.Np()),$.K.st&&2===this.We&&D.A.Dp!==this.Dn&&(this.Pi?.bind(),this.wi?.Ac(257,151,'Loading - please wait.',m.A.Bl),this.wi?.Ac(256,150,'Loading - please wait.',m.A._l),this.Pi?.draw(8,11),D.A.Dp=this.Dn,this.Np()),this.Dn!==this.In&&2===this.We&&(this.In=this.Dn,this.ud(this.Dn)),this.Xt=-1,!0;await this.WA()}catch(t){console.log(t),await this.qc()}return!0};Np=()=>{try{this.In=-1,this.Er.clear(),this._r.clear(),this.Ir.clear(),this.mr.clear(),d.A.Pp(),this.Qf(),this.He?.reset();for(let t=0;t<G.A.xn;t++)this.kn[t]?.reset();const t=new D.A(G.A.Xn,G.A.Xn,this.Wn,this.Yn);D.A.st=$.K.st;const i=this.bn?.length??0;if(this.Ln)for(let t=0;t<i;t++){const i=this.Ln[t]>>8,s=255&this.Ln[t];if(33===i&&s>=71&&s<=73){D.A.st=!1;break}}if($.K.st?this.He?.Fp(this.Dn):this.He?.Fp(0),this.Ln&&this.bn){this.Bt.jc(O.A.bf);for(let s=0;s<i;s++){const i=64*(this.Ln[s]>>8)-this.Tn,h=64*(255&this.Ln[s])-this.On,e=this.bn[s];if(e){const s=new I.A(new Uint8Array(e)).Ko,n=R.A.read(s,e,e.length-4,4);t.Up(8*(this.gn-6),8*(this.Cn-6),i,h,n)}else this.Cn<800&&t.Bp(h,i,64,64)}}if(this.Ln&&this.vn){this.Bt.jc(O.A.bf);for(let s=0;s<i;s++){const i=this.vn[s];if(i){const h=new I.A(new Uint8Array(i)).Ko,e=R.A.read(h,i,i.length-4,4),n=64*(this.Ln[s]>>8)-this.Tn,r=64*(255&this.Ln[s])-this.On;t.Gp(this.He,this._r,this.kn,e,n,r)}}}this.Bt.jc(O.A.bf),t.Hp(this.He,this.kn),this.Pi?.bind(),this.Bt.jc(O.A.bf);for(let t=this._r.head();t;t=this._r.next())2===(this.Yn&&2&this.Yn[1][t.Wp][t.Yp])&&(t.Vp--,t.Vp<0&&t.sy());for(let t=0;t<G.A.Xn;t++)for(let i=0;i<G.A.Xn;i++)this.CA(t,i);for(let t=this.Tr.head();t;t=this.Tr.next())this.RA(t.hp,t.x,t.z,t.Kp,t.angle,t.shape,t.Nd)}catch(t){}e.A.tu?.clear(),d.A.hc(20)};$y=t=>{const i=c.A.Ro[t];if(i.ll)for(let t=0;t<i.ll.length&&-1!==i.ll[t];t++){const s=c.A.Ro[i.ll[t]];1===s.type&&this.$y(s.id),s.ul=0,s.fl=0}};lc=()=>{let t=0;for(let i=0;i<99;i++){const s=i+1;t+=s+300*Math.pow(2,s/7)|0,this.bh[i]=t/4|0}};Ud=(t,i,s)=>{0===t&&-1!==this.Yh&&(this.Lh=i,this.Lc=0),-1===this.lh&&(this.Ys=!0);for(let t=99;t>0;t--)this.messageType[t]=this.messageType[t-1],this.Kh[t]=this.Kh[t-1],this.Vh[t]=this.Vh[t-1];$.K.nt&&0===t&&(i='['+(this.Pt/30|0)+']: '+i),this.messageType[0]=t,this.Kh[0]=s,this.Vh[0]=i};Fw=async t=>{const i=a.A.Ro[t].Xp;if(0!==i){const s=this.pe[t];if(1===i&&(1===s&&d.A.sc(.9),2===s&&d.A.sc(.8),3===s&&d.A.sc(.7),4===s&&d.A.sc(.6),n.A.su?.clear(),this.$t=!0),3===i){const t=this.po;0===s&&(this.Eo=256,(0,j.zp)(256),this.po=!0),1===s&&(this.Eo=192,(0,j.zp)(192),this.po=!0),2===s&&(this.Eo=128,(0,j.zp)(128),this.po=!0),3===s&&(this.Eo=64,(0,j.zp)(64),this.po=!0),4===s&&(this.po=!1),this.po!==t&&(this.po&&this.mo?await this.Vo(this.mo,this.Io,this._o,!1):(0,j.vo)(!1),this.yo=0)}4===i&&(0===s&&(this.fo=256,(0,j.jp)(256),this.oo=!0),1===s&&(this.fo=192,(0,j.jp)(192),this.oo=!0),2===s&&(this.fo=128,(0,j.jp)(128),this.oo=!0),3===s&&(this.fo=64,(0,j.jp)(64),this.oo=!0),4===s&&(this.oo=!1)),5===i&&(this.Ce=s),6===i&&(this.Zh=s),8===i&&(this.jh=s,this.Ys=!0)}};Zp=(t,i)=>{let s=0;for(let t=0;t<100;t++){if(!this.Vh[t])continue;const h=this.messageType[t],e=this.uh+70+4-14*s;if(e<-20)break;0===h&&s++,1!==h&&2!==h||!(1===h||0===this.kh||1===this.kh&&this.lu(this.Kh[t]))||(i>e-14&&i<=e&&this.Sr&&this.Kh[t]!==this.Sr.name&&(this.Br&&(this.rh[this.nh]='Report abuse @whi@'+this.Kh[t],this.Te[this.nh]=34,this.nh++),this.rh[this.nh]='Add ignore @whi@'+this.Kh[t],this.Te[this.nh]=436,this.nh++,this.rh[this.nh]='Add friend @whi@'+this.Kh[t],this.Te[this.nh]=406,this.nh++),s++),3!==h&&7!==h||0!==this.jh||!(7===h||0===this.xh||1===this.xh&&this.lu(this.Kh[t]))||(i>e-14&&i<=e&&(this.Br&&(this.rh[this.nh]='Report abuse @whi@'+this.Kh[t],this.Te[this.nh]=34,this.nh++),this.rh[this.nh]='Add ignore @whi@'+this.Kh[t],this.Te[this.nh]=436,this.nh++,this.rh[this.nh]='Add friend @whi@'+this.Kh[t],this.Te[this.nh]=406,this.nh++),s++),4===h&&(0===this.Dh||1===this.Dh&&this.lu(this.Kh[t]))&&(i>e-14&&i<=e&&(this.rh[this.nh]='Accept trade @whi@'+this.Kh[t],this.Te[this.nh]=903,this.nh++),s++),(5===h||6===h)&&0===this.jh&&this.xh<2&&s++,8===h&&(0===this.Dh||1===this.Dh&&this.lu(this.Kh[t]))&&(i>e-14&&i<=e&&(this.rh[this.nh]='Accept duel @whi@'+this.Kh[t],this.Te[this.nh]=363,this.nh++),s++)}};qp=t=>{if(0===this.jh)return;let i=0;0!==this.Vt&&(i=1);for(let s=0;s<100;s++)if(null!==this.Vh[s]){const h=this.messageType[s];if((3===h||7===h)&&(7===h||0===this.xh||1===this.xh&&this.lu(this.Kh[s]))){const h=329-13*i;if(this.xl>8&&this.xl<520&&t-11>h-10&&t-11<=h+3&&(this.Br&&(this.rh[this.nh]='Report abuse @whi@'+this.Kh[s],this.Te[this.nh]=2034,this.nh++),this.rh[this.nh]='Add ignore @whi@'+this.Kh[s],this.Te[this.nh]=2436,this.nh++,this.rh[this.nh]='Add friend @whi@'+this.Kh[s],this.Te[this.nh]=2406,this.nh++),i++,i>=5)return}if((5===h||6===h)&&this.xh<2&&(i++,i>=5))return}};$p=(t,i,s,h,e,r)=>{if(0!==t.type||!t.ll||t.hide||i<h||s<e||i>h+t.width||s>e+t.height||!t.pl||!t.ml)return;const o=t.ll.length;for(let l=0;l<o;l++){let o=t.pl[l]+h,a=t.ml[l]+e-r;const f=c.A.Ro[t.ll[l]];if(o+=f.x,a+=f.y,(f.Jp>=0||0!==f.Kl)&&i>=o&&s>=a&&i<o+f.width&&s<a+f.height&&(f.Jp>=0?this.Se=f.Jp:this.Se=f.id),0===f.type)this.$p(f,i,s,o,a,f.Tl),f.scroll>f.height&&this.Rf(i,s,f.scroll,f.height,!0,o+f.width,a,f);else if(2===f.type){let t=0;for(let h=0;h<f.height;h++)for(let e=0;e<f.width;e++){let r=o+e*(f.Sl+32),l=a+h*(f.Ml+32);if(t<20&&f.bl&&f.vl&&(r+=f.bl[t],l+=f.vl[t]),i<r||s<l||i>=r+32||s>=l+32){t++;continue}if(this.Re=t,this.Le=f.id,!f.Ll||f.Ll[t]<=0){t++;continue}const c=n.A.get(f.Ll[t]-1);if(1===this.oe&&f.Qp)f.id===this.ae&&t===this.le||(this.rh[this.nh]='Use '+this.fe+' with @lre@'+c.name,this.Te[this.nh]=881,this.Oe[this.nh]=c.id,this.be[this.nh]=t,this.ve[this.nh]=f.id,this.nh++);else if(1===this.Ie&&f.Qp)16&~this.Ee||(this.rh[this.nh]=this.ge+' @lre@'+c.name,this.Te[this.nh]=391,this.Oe[this.nh]=c.id,this.be[this.nh]=t,this.ve[this.nh]=f.id,this.nh++);else{if(f.Qp)for(let i=4;i>=3;i--)c.tm&&c.tm[i]?(this.rh[this.nh]=c.tm[i]+' @lre@'+c.name,3===i?this.Te[this.nh]=478:4===i&&(this.Te[this.nh]=347),this.Oe[this.nh]=c.id,this.be[this.nh]=t,this.ve[this.nh]=f.id,this.nh++):4===i&&(this.rh[this.nh]='Drop @lre@'+c.name,this.Te[this.nh]=347,this.Oe[this.nh]=c.id,this.be[this.nh]=t,this.ve[this.nh]=f.id,this.nh++);if(f.im&&(this.rh[this.nh]='Use @lre@'+c.name,this.Te[this.nh]=188,this.Oe[this.nh]=c.id,this.be[this.nh]=t,this.ve[this.nh]=f.id,this.nh++),f.Qp&&c.tm)for(let i=2;i>=0;i--)c.tm[i]&&(this.rh[this.nh]=c.tm[i]+' @lre@'+c.name,0===i?this.Te[this.nh]=405:1===i?this.Te[this.nh]=38:2===i&&(this.Te[this.nh]=422),this.Oe[this.nh]=c.id,this.be[this.nh]=t,this.ve[this.nh]=f.id,this.nh++);if(f.sm)for(let i=4;i>=0;i--)f.sm[i]&&(this.rh[this.nh]=f.sm[i]+' @lre@'+c.name,0===i?this.Te[this.nh]=602:1===i?this.Te[this.nh]=596:2===i?this.Te[this.nh]=22:3===i?this.Te[this.nh]=892:4===i&&(this.Te[this.nh]=415),this.Oe[this.nh]=c.id,this.be[this.nh]=t,this.ve[this.nh]=f.id,this.nh++);this.rh[this.nh]='Examine @lre@'+c.name,$.K.nt&&(this.rh[this.nh]+='@whi@ ('+c.id+')'),this.Te[this.nh]=1773,this.Oe[this.nh]=c.id,f.Rl&&(this.ve[this.nh]=f.Rl[t]),this.nh++}t++}}else if(i>=o&&s>=a&&i<o+f.width&&s<a+f.height)if(f.jl===c.A.hm){let t=!1;0!==f.El&&(t=this.nm(f)),!t&&f.rm&&(this.rh[this.nh]=f.rm,this.Te[this.nh]=951,this.ve[this.nh]=f.id,this.nh++)}else if(f.jl===c.A.om&&0===this.Ie){let t=f._w;t&&-1!==t.indexOf(' ')&&(t=t.substring(0,t.indexOf(' '))),this.rh[this.nh]=t+' @gre@'+f.action,this.Te[this.nh]=930,this.ve[this.nh]=f.id,this.nh++}else f.jl===c.A.lm?(this.rh[this.nh]='Close',this.Te[this.nh]=947,this.ve[this.nh]=f.id,this.nh++):f.jl===c.A.am&&f.rm?(this.rh[this.nh]=f.rm,this.Te[this.nh]=465,this.ve[this.nh]=f.id,this.nh++):f.jl===c.A.fm&&f.rm?(this.rh[this.nh]=f.rm,this.Te[this.nh]=960,this.ve[this.nh]=f.id,this.nh++):f.jl===c.A.Zl&&!this.ye&&f.rm&&(this.rh[this.nh]=f.rm,this.Te[this.nh]=44,this.ve[this.nh]=f.id,this.nh++)}};nm=t=>{let i=t.El;return i>=c.A.Aa&&i<=c.A.ma?(i>=c.A.pa?i-=c.A.pa:i--,this.rh[this.nh]='Remove @whi@'+this.so[i],this.Te[this.nh]=557,this.nh++,this.rh[this.nh]='Message @whi@'+this.so[i],this.Te[this.nh]=679,this.nh++,!0):i>=c.A._a&&i<=c.A.Ea&&(this.rh[this.nh]='Remove @whi@'+t.text,this.Te[this.nh]=556,this.nh++,!0)};um=()=>{0===this.oe&&0===this.Ie&&(this.rh[this.nh]='Walk here',this.Te[this.nh]=660,this.be[this.nh]=this.xl,this.ve[this.nh]=this.Dl,this.nh++);let t=-1;for(let i=0;i<p.A.Xf;i++){const s=p.A.dm[i],h=127&s,r=s>>7&127,o=s>>29&3,l=s>>14&32767;if(s!==t){if(t=s,2===o&&this.He&&this.He.gd(this.Dn,h,r,s)>=0){const t=e.A.get(l);if(1===this.oe)this.rh[this.nh]='Use '+this.fe+' with @cya@'+t.name,this.Te[this.nh]=450,this.Oe[this.nh]=s,this.be[this.nh]=h,this.ve[this.nh]=r,this.nh++;else if(1!==this.Ie){if(t.wm)for(let i=4;i>=0;i--)t.wm[i]&&(this.rh[this.nh]=t.wm[i]+' @cya@'+t.name,0===i&&(this.Te[this.nh]=285),1===i&&(this.Te[this.nh]=504),2===i&&(this.Te[this.nh]=364),3===i&&(this.Te[this.nh]=581),4===i&&(this.Te[this.nh]=1501),this.Oe[this.nh]=s,this.be[this.nh]=h,this.ve[this.nh]=r,this.nh++);this.rh[this.nh]='Examine @cya@'+t.name,$.K.nt&&(this.rh[this.nh]+='@whi@ ('+t.id+')'),this.Te[this.nh]=1175,this.Oe[this.nh]=s,this.be[this.nh]=h,this.ve[this.nh]=r,this.nh++}else 4&~this.Ee||(this.rh[this.nh]=this.ge+' @cya@'+t.name,this.Te[this.nh]=55,this.Oe[this.nh]=s,this.be[this.nh]=h,this.ve[this.nh]=r,this.nh++)}if(1===o){const t=this.Ar[l];if(t&&t.type&&1===t.type.size&&64==(127&t.x)&&64==(127&t.z))for(let i=0;i<this.yr;i++){const s=this.Ar[this.pr[i]];s&&s!==t&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.Am(s.type,this.pr[i],h,r)}t&&t.type&&this.Am(t.type,l,h,r)}if(0===o){const t=this.nr[l];if(t&&64==(127&t.x)&&64==(127&t.z)){for(let i=0;i<this.yr;i++){const s=this.Ar[this.pr[i]];s&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.Am(s.type,this.pr[i],h,r)}for(let i=0;i<this.rr;i++){const s=this.nr[this.lr[i]];s&&s!==t&&s.x===t.x&&s.z===t.z&&this.ym(s,this.lr[i],h,r)}}t&&this.ym(t,l,h,r)}if(3===o){const t=this.gr[this.Dn][h][r];if(!t)continue;for(let i=t.pm();i;i=t.Im()){const t=n.A.get(i.index);if(1===this.oe)this.rh[this.nh]='Use '+this.fe+' with @lre@'+t.name,this.Te[this.nh]=217,this.Oe[this.nh]=i.index,this.be[this.nh]=h,this.ve[this.nh]=r,this.nh++;else if(1!==this.Ie){for(let s=4;s>=0;s--)t.wm&&t.wm[s]?(this.rh[this.nh]=t.wm[s]+' @lre@'+t.name,0===s&&(this.Te[this.nh]=224),1===s&&(this.Te[this.nh]=993),2===s&&(this.Te[this.nh]=99),3===s&&(this.Te[this.nh]=746),4===s&&(this.Te[this.nh]=877),this.Oe[this.nh]=i.index,this.be[this.nh]=h,this.ve[this.nh]=r,this.nh++):2===s&&(this.rh[this.nh]='Take @lre@'+t.name,this.Te[this.nh]=99,this.Oe[this.nh]=i.index,this.be[this.nh]=h,this.ve[this.nh]=r,this.nh++);this.rh[this.nh]='Examine @lre@'+t.name,$.K.nt&&(this.rh[this.nh]+='@whi@ ('+i.index+')'),this.Te[this.nh]=1102,this.Oe[this.nh]=i.index,this.be[this.nh]=h,this.ve[this.nh]=r,this.nh++}else 1&~this.Ee||(this.rh[this.nh]=this.ge+' @lre@'+t.name,this.Te[this.nh]=965,this.Oe[this.nh]=i.index,this.be[this.nh]=h,this.ve[this.nh]=r,this.nh++)}}}}};Am=(t,i,s,h)=>{if(this.nh>=400)return;let e=t.name;if(0!==t._m&&this.Sr&&(e=e+this.Em(this.Sr.Ka,t._m)+' (level-'+t._m+')'),1===this.oe)this.rh[this.nh]='Use '+this.fe+' with @yel@'+e,this.Te[this.nh]=900,this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++;else if(1!==this.Ie){let n;if(t.wm)for(n=4;n>=0;n--)t.wm[n]&&'attack'!==t.wm[n]?.toLowerCase()&&(this.rh[this.nh]=t.wm[n]+' @yel@'+e,0===n?this.Te[this.nh]=728:1===n?this.Te[this.nh]=542:2===n?this.Te[this.nh]=6:3===n?this.Te[this.nh]=963:4===n&&(this.Te[this.nh]=245),this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++);if(t.wm)for(n=4;n>=0;n--)if(t.wm[n]&&'attack'===t.wm[n]?.toLowerCase()){let r=0;this.Sr&&t._m>this.Sr.Ka&&(r=2e3),this.rh[this.nh]=t.wm[n]+' @yel@'+e,0===n?this.Te[this.nh]=r+728:1===n?this.Te[this.nh]=r+542:2===n?this.Te[this.nh]=r+6:3===n?this.Te[this.nh]=r+963:4===n&&(this.Te[this.nh]=r+245),this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++}this.rh[this.nh]='Examine @yel@'+e,$.K.nt&&(this.rh[this.nh]+='@whi@ ('+t.id+')'),this.Te[this.nh]=1607,this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++}else 2&~this.Ee||(this.rh[this.nh]=this.ge+' @yel@'+e,this.Te[this.nh]=265,this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++)};ym=(t,i,s,h)=>{if(t===this.Sr||this.nh>=400)return;let e=null;this.Sr&&(e=t.name+this.Em(this.Sr.Ka,t.Ka)+' (level-'+t.Ka+')'),1===this.oe?(this.rh[this.nh]='Use '+this.fe+' with @whi@'+e,this.Te[this.nh]=367,this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++):1!==this.Ie?(this.rh[this.nh]='Follow @whi@'+e,this.Te[this.nh]=1544,this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++,0===this.Js&&(this.rh[this.nh]='Trade with @whi@'+e,this.Te[this.nh]=1373,this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++),this.Fr>0&&(this.rh[this.nh]='Attack @whi@'+e,this.Sr&&this.Sr.Ka>=t.Ka?this.Te[this.nh]=151:this.Te[this.nh]=2151,this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++),1===this.Ur&&(this.rh[this.nh]='Fight @whi@'+e,this.Te[this.nh]=151,this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++),2===this.Ur&&(this.rh[this.nh]='Duel-with @whi@'+e,this.Te[this.nh]=1101,this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++)):8&~this.Ee||(this.rh[this.nh]=this.ge+' @whi@'+e,this.Te[this.nh]=651,this.Oe[this.nh]=i,this.be[this.nh]=s,this.ve[this.nh]=h,this.nh++);for(let t=0;t<this.nh;t++)if(660===this.Te[t])return void(this.rh[t]='Walk here @whi@'+e)};Em=(t,i)=>{const s=t-i;return s<-9?'@red@':s<-6?'@or3@':s<-3?'@or2@':s<0?'@or1@':s>9?'@gre@':s>6?'@gr3@':s>3?'@gr2@':s>0?'@gr1@':'@yel@'};ef=()=>{if(0===this.se){this.rh[0]='Cancel',this.Te[0]=1252,this.nh=1,this.qp(this.Dl),this.Se=0,this.xl>8&&this.Dl>11&&this.xl<520&&this.Dl<345&&(-1===this.Xs?this.um():this.$p(c.A.Ro[this.Xs],this.xl,this.Dl,8,11,0)),this.Se!==this.$h&&(this.$h=this.Se),this.Se=0,this.xl>562&&this.Dl>231&&this.xl<752&&this.Dl<492&&(-1!==this.oh?this.$p(c.A.Ro[this.oh],this.xl,this.Dl,562,231,0):-1!==this.Mh[this.Sh]&&this.$p(c.A.Ro[this.Mh[this.Sh]],this.xl,this.Dl,562,231,0)),this.Se!==this.Jh&&(this.Ws=!0,this.Jh=this.Se),this.Se=0,this.xl>22&&this.Dl>375&&this.xl<431&&this.Dl<471&&(-1===this.lh?this.Zp(this.xl-22,this.Dl-375):this.$p(c.A.Ro[this.lh],this.xl,this.Dl,22,375,0)),-1!==this.lh&&this.Se!==this.Qh&&(this.Ys=!0,this.Qh=this.Se);let t=!1;for(;!t;){t=!0;for(let i=0;i<this.nh-1;i++)if(this.Te[i]<1e3&&this.Te[i+1]>1e3){const s=this.rh[i];this.rh[i]=this.rh[i+1],this.rh[i+1]=s;const h=this.Te[i];this.Te[i]=this.Te[i+1],this.Te[i+1]=h;const e=this.be[i];this.be[i]=this.be[i+1],this.be[i+1]=e;const n=this.ve[i];this.ve[i]=this.ve[i+1],this.ve[i+1]=n;const r=this.Oe[i];this.Oe[i]=this.Oe[i+1],this.Oe[i+1]=r,t=!1}}}};lf=()=>{let t=0;if(this.Ai){let i;t=this.Ai.au('Choose Option');for(let s=0;s<this.nh;s++)i=this.Ai.au(this.rh[s]),i>t&&(t=i)}t+=8;const i=15*this.nh+21;let s,h;this.Rc>8&&this.Sc>11&&this.Rc<520&&this.Sc<345&&(s=this.Rc-(t/2|0)-8,s+t>512?s=512-t:s<0&&(s=0),h=this.Sc-11,h+i>334?h=334-i:h<0&&(h=0),this.Qs=!0,this.th=0,this.ih=s,this.sh=h,this.hh=t,this.eh=15*this.nh+22),this.Rc>562&&this.Sc>231&&this.Rc<752&&this.Sc<492&&(s=this.Rc-(t/2|0)-562,s<0?s=0:s+t>190&&(s=190-t),h=this.Sc-231,h<0?h=0:h+i>261&&(h=261-i),this.Qs=!0,this.th=1,this.ih=s,this.sh=h,this.hh=t,this.eh=15*this.nh+22),this.Rc>22&&this.Sc>375&&this.Rc<501&&this.Sc<471&&(s=this.Rc-(t/2|0)-22,s<0?s=0:s+t>479&&(s=479-t),h=this.Sc-375,h<0?h=0:h+i>96&&(h=96-i),this.Qs=!0,this.th=2,this.ih=s,this.sh=h,this.hh=t,this.eh=15*this.nh+22)};df=(t,i,s,h,e,n,r,o,l,a,c)=>{const f=this.kn[this.Dn];if(!f)return!1;const u=G.A.Xn,d=G.A.Xn;for(let t=0;t<u;t++)for(let i=0;i<d;i++){const s=G.A.index(t,i);this.vr[s]=0,this.Lr[s]=99999999}let w=t,A=i;const y=G.A.index(t,i);this.vr[y]=99,this.Lr[y]=0;let p=0,m=0;this.Or[p]=t,this.br[p++]=i;let I=!1,_=this.Or.length;const E=f.flags;for(;m!==p;){if(w=this.Or[m],A=this.br[m],m=(m+1)%_,w===s&&A===h){I=!0;break}if(l!==P.A.Td.id){if((l<P.A.gm.id||l===P.A.rA.id)&&f.Cm(w,A,s,h,l-1,o)){I=!0;break}if(l<P.A.rA.id&&f.Tm(w,A,s,h,l-1,o)){I=!0;break}}if(0!==n&&0!==r&&f.Om(w,A,s,h,n,r,a)){I=!0;break}const t=this.Lr[G.A.index(w,A)]+1;let i=G.A.index(w-1,A);w>0&&0===this.vr[i]&&(E[i]&H.A.pd)===H.A.OPEN&&(this.Or[p]=w-1,this.br[p]=A,p=(p+1)%_,this.vr[i]=2,this.Lr[i]=t),i=G.A.index(w+1,A),w<u-1&&0===this.vr[i]&&(E[i]&H.A.md)===H.A.OPEN&&(this.Or[p]=w+1,this.br[p]=A,p=(p+1)%_,this.vr[i]=8,this.Lr[i]=t),i=G.A.index(w,A-1),A>0&&0===this.vr[i]&&(E[i]&H.A.Id)===H.A.OPEN&&(this.Or[p]=w,this.br[p]=A-1,p=(p+1)%_,this.vr[i]=1,this.Lr[i]=t),i=G.A.index(w,A+1),A<d-1&&0===this.vr[i]&&(E[i]&H.A._d)===H.A.OPEN&&(this.Or[p]=w,this.br[p]=A+1,p=(p+1)%_,this.vr[i]=4,this.Lr[i]=t),i=G.A.index(w-1,A-1),w>0&&A>0&&0===this.vr[i]&&!(E[i]&H.A.bm)&&(E[G.A.index(w-1,A)]&H.A.pd)===H.A.OPEN&&(E[G.A.index(w,A-1)]&H.A.Id)===H.A.OPEN&&(this.Or[p]=w-1,this.br[p]=A-1,p=(p+1)%_,this.vr[i]=3,this.Lr[i]=t),i=G.A.index(w+1,A-1),w<u-1&&A>0&&0===this.vr[i]&&!(E[i]&H.A.vm)&&(E[G.A.index(w+1,A)]&H.A.md)===H.A.OPEN&&(E[G.A.index(w,A-1)]&H.A.Id)===H.A.OPEN&&(this.Or[p]=w+1,this.br[p]=A-1,p=(p+1)%_,this.vr[i]=9,this.Lr[i]=t),i=G.A.index(w-1,A+1),w>0&&A<d-1&&0===this.vr[i]&&!(E[i]&H.A.Lm)&&(E[G.A.index(w-1,A)]&H.A.pd)===H.A.OPEN&&(E[G.A.index(w,A+1)]&H.A._d)===H.A.OPEN&&(this.Or[p]=w-1,this.br[p]=A+1,p=(p+1)%_,this.vr[i]=6,this.Lr[i]=t),i=G.A.index(w+1,A+1),w<u-1&&A<d-1&&0===this.vr[i]&&!(E[i]&H.A.Rm)&&(E[G.A.index(w+1,A)]&H.A.md)===H.A.OPEN&&(E[G.A.index(w,A+1)]&H.A._d)===H.A.OPEN&&(this.Or[p]=w+1,this.br[p]=A+1,p=(p+1)%_,this.vr[i]=12,this.Lr[i]=t)}if(this.Rr=0,!I){if(c){let t=100;for(let i=1;i<2;i++){for(let e=s-i;e<=s+i;e++)for(let s=h-i;s<=h+i;s++){const i=G.A.index(e,s);e>=0&&s>=0&&e<G.A.Xn&&s<G.A.Xn&&this.Lr[i]<t&&(t=this.Lr[i],w=e,A=s,this.Rr=1,I=!0)}if(I)break}}if(!I)return!1}m=0,this.Or[m]=w,this.br[m++]=A;let g=this.vr[G.A.index(w,A)],C=g;for(;w!==t||A!==i;)C!==g&&(g=C,this.Or[m]=w,this.br[m++]=A),C&ht.A.Ld?w++:C&ht.A.bd&&w--,C&ht.A.vd?A++:C&ht.A.Rd&&A--,C=this.vr[G.A.index(w,A)];if(m>0){_=Math.min(m,25),m--;const t=this.Or[m],i=this.br[m];if($.K.nt&&1===this.if[6]&&1===this.if[7]){for(let t=0;t<this.Co.length;t++){const i=this.Co[t];if(i&&i.x===x.A.ff&&i.z===x.A.uf)return this.Co[t]=null,!1}return this.Co[this.To]=new st.A(this.Dn,x.A.ff,x.A.uf),this.To=this.To+1&this.Co.length-1,!1}0===e?(this.Bt.jc(O.A.Sm),this.Bt.p1(_+_+3)):1===e?(this.Bt.jc(O.A.Mm),this.Bt.p1(_+_+3+14)):2===e&&(this.Bt.jc(O.A.km),this.Bt.p1(_+_+3)),1===this.if[5]?this.Bt.p1(1):this.Bt.p1(0),this.Bt.p2(t+this.Tn),this.Bt.p2(i+this.On),this.Ke=this.Or[0],this.Xe=this.br[0];for(let s=1;s<_;s++)m--,this.Bt.p1(this.Or[m]-t),this.Bt.p1(this.br[m]-i);return!0}return 1!==e};xp=(t,i)=>{this.cr=0,this.ar=0,this.xm(t),this.Dm(t),this.Nm(t,i),this.Pm(t);for(let t=0;t<this.cr;t++){const i=this.dr[t],s=this.nr[i];s&&(s.Vf!==this.Pt&&(this.nr[i]=null))}if(t.Fc!==i)throw new Error(`eek! Error packet size mismatch in getplayer pos:${t.Fc} psize:${i}`);for(let t=0;t<this.rr;t++)if(!this.nr[this.lr[t]])throw new Error(`eek! ${this.username} null entry in pl list - pos:${t} size:${this.rr}`)};xm=t=>{t.Fm();if(0!==t.Um(1)){const i=t.Um(2);if(0===i)this.ur[this.ar++]=this.Mt;else if(1===i){const i=t.Um(3);this.Sr?.step(!1,i);1===t.Um(1)&&(this.ur[this.ar++]=this.Mt)}else if(2===i){const i=t.Um(3);this.Sr?.step(!0,i);const s=t.Um(3);this.Sr?.step(!0,s);1===t.Um(1)&&(this.ur[this.ar++]=this.Mt)}else if(3===i){this.Dn=t.Um(2);const i=t.Um(7),s=t.Um(7),h=t.Um(1);this.Sr?.move(1===h,i,s);1===t.Um(1)&&(this.ur[this.ar++]=this.Mt)}}};Dm=t=>{const i=t.Um(8);if(i<this.rr)for(let t=i;t<this.rr;t++)this.dr[this.cr++]=this.lr[t];if(i>this.rr)throw new Error(`eek! ${this.username} Too many players`);this.rr=0;for(let s=0;s<i;s++){const i=this.lr[s],h=this.nr[i];if(0===t.Um(1))this.lr[this.rr++]=i,h&&(h.Vf=this.Pt);else{const s=t.Um(2);if(0===s)this.lr[this.rr++]=i,h&&(h.Vf=this.Pt),this.ur[this.ar++]=i;else if(1===s){this.lr[this.rr++]=i,h&&(h.Vf=this.Pt);const s=t.Um(3);h?.step(!1,s);1===t.Um(1)&&(this.ur[this.ar++]=i)}else if(2===s){this.lr[this.rr++]=i,h&&(h.Vf=this.Pt);const s=t.Um(3);h?.step(!0,s);const e=t.Um(3);h?.step(!0,e);1===t.Um(1)&&(this.ur[this.ar++]=i)}else 3===s&&(this.dr[this.cr++]=i)}}};Nm=(t,i)=>{let s;for(;t.Bm+10<8*i&&(s=t.Um(11),2047!==s);){if(!this.nr[s]){this.nr[s]=new W.A;const t=this.wr[s];t&&this.nr[s]?.read(t)}this.lr[this.rr++]=s;const i=this.nr[s];i&&(i.Vf=this.Pt);let h=t.Um(5);h>15&&(h-=32);let e=t.Um(5);e>15&&(e-=32);const n=t.Um(1);this.Sr&&i?.move(1===n,this.Sr.wf[0]+h,this.Sr.Af[0]+e);1===t.Um(1)&&(this.ur[this.ar++]=s)}t.Gm()};Pm=t=>{for(let i=0;i<this.ar;i++){const s=this.ur[i],h=this.nr[s];if(!h)continue;let e=t.ZA;(e&W.A.Hm)===W.A.Hm&&(e+=t.ZA<<8),this.Wm(h,s,e,t)}};Wm=(t,i,s,e)=>{if(t.Eu=s,t.gu=this.Pt,(s&W.A.Cu)===W.A.Cu){const s=e.ZA,h=new Uint8Array(s),n=new I.A(h);e.xy(s,0,h),this.wr[i]=n,t.read(n)}if((s&W.A.Tu)===W.A.Tu){let i=e.KA;65535===i&&(i=-1),i===t.Ou&&(t.Ym=0);const s=e.ZA;(-1===i||-1===t.Ou||h.A.Ro[i].priority>h.A.Ro[t.Ou].priority||0===h.A.Ro[t.Ou].priority)&&(t.Ou=i,t.Vm=0,t.Km=0,t.Xm=s,t.Ym=0)}if((s&W.A.bu)===W.A.bu&&(t.vu=e.KA,65535===t.vu&&(t.vu=-1)),(s&W.A.Lu)===W.A.Lu&&(t.ou=e.ly,t.cu=0,t.fu=0,t.uu=150,t.name&&this.Ud(2,t.ou,t.name)),(s&W.A.Ru)===W.A.Ru&&(t.pu=e.ZA,t.yu=e.ZA,t.du=this.Pt+400,t.wu=e.ZA,t.Au=e.ZA),(s&W.A.Su)===W.A.Su&&(t.zm=e.KA,t.jm=e.KA,t.Mu=t.zm,t.ku=t.jm),(s&W.A.xu)===W.A.xu){const i=e.KA,s=e.ZA,h=e.ZA,n=e.Fc;if(t.name){const n=M.A.ld(t.name);let r=!1;if(s<=1)for(let t=0;t<this.dh;t++)if(this.wh[t]===n){r=!0;break}if(!r&&0===this.Js)try{const n=v.A.ec(e,h),r=b.A.filter(n);t.ou=r,t.cu=i>>8,t.fu=255&i,t.uu=150,s>1?this.Ud(1,r,t.name):this.Ud(2,r,t.name)}catch(t){}}e.Fc=n+h}if((s&W.A.Du)===W.A.Du){t.Nu=e.KA;const i=e.Ko;t.Zm=i>>16,t.qm=this.Pt+(65535&i),t.$m=0,t.Jm=0,t.qm>this.Pt&&(t.$m=-1),65535===t.Nu&&(t.Nu=-1)}(s&W.A.Pu)===W.A.Pu&&(t.Qm=e.ZA,t.tI=e.ZA,t.iI=e.ZA,t.sI=e.ZA,t.mu=e.KA+this.Pt,t.Iu=e.KA+this.Pt,t.hI=e.ZA,t.pathLength=0,t.wf[0]=t.iI,t.Af[0]=t.sI)};QA=(t,i)=>{this.cr=0,this.ar=0,this.eI(t),this.nI(t,i),this.rI(t);for(let t=0;t<this.cr;t++){const i=this.dr[t],s=this.Ar[i];s&&(s.Vf!==this.Pt&&(s.type=null,this.Ar[i]=null))}if(t.Fc!==i)throw new Error(`eek! ${this.username} size mismatch in getnpcpos - pos:${t.Fc} psize:${i}`);for(let t=0;t<this.yr;t++)if(!this.Ar[this.pr[t]])throw new Error(`eek! ${this.username} null entry in npc list - pos:${t} size:${this.yr}`)};eI=t=>{t.Fm();const i=t.Um(8);if(i<this.yr)for(let t=i;t<this.yr;t++)this.dr[this.cr++]=this.pr[t];if(i>this.yr)throw new Error(`eek! ${this.username} Too many npcs`);this.yr=0;for(let s=0;s<i;s++){const i=this.pr[s],h=this.Ar[i];if(0===t.Um(1))this.pr[this.yr++]=i,h&&(h.Vf=this.Pt);else{const s=t.Um(2);if(0===s)this.pr[this.yr++]=i,h&&(h.Vf=this.Pt),this.ur[this.ar++]=i;else if(1===s){this.pr[this.yr++]=i,h&&(h.Vf=this.Pt);const s=t.Um(3);h?.step(!1,s);1===t.Um(1)&&(this.ur[this.ar++]=i)}else if(2===s){this.pr[this.yr++]=i,h&&(h.Vf=this.Pt);const s=t.Um(3);h?.step(!0,s);const e=t.Um(3);h?.step(!0,e);1===t.Um(1)&&(this.ur[this.ar++]=i)}else 3===s&&(this.dr[this.cr++]=i)}}};nI=(t,i)=>{for(;t.Bm+21<8*i;){const i=t.Um(13);if(8191===i)break;this.Ar[i]||(this.Ar[i]=new Y.A);const s=this.Ar[i];this.pr[this.yr++]=i,s?(s.Vf=this.Pt,s.type=r.A.get(t.Um(11)),s.size=s.type.size,s.oI=s.type.lI,s.aI=s.type.cI,s.fI=s.type.uI,s.dI=s.type.wI,s.Sa=s.type.AI):t.Um(11);let h=t.Um(5);h>15&&(h-=32);let e=t.Um(5);e>15&&(e-=32),this.Sr&&s?.move(!1,this.Sr.wf[0]+h,this.Sr.Af[0]+e);1===t.Um(1)&&(this.ur[this.ar++]=i)}t.Gm()};rI=t=>{for(let i=0;i<this.ar;i++){const s=this.ur[i],e=this.Ar[s];if(!e)continue;const n=t.ZA;if(e.Eu=n,e.gu=this.Pt,(n&Y.A.Tu)===Y.A.Tu){let i=t.KA;65535===i&&(i=-1),i===e.Ou&&(e.Ym=0);const s=t.ZA;(-1===i||-1===e.Ou||h.A.Ro[i].priority>h.A.Ro[e.Ou].priority||0===h.A.Ro[e.Ou].priority)&&(e.Ou=i,e.Vm=0,e.Km=0,e.Xm=s,e.Ym=0)}if((n&Y.A.bu)===Y.A.bu&&(e.vu=t.KA,65535===e.vu&&(e.vu=-1)),(n&Y.A.Lu)===Y.A.Lu&&(e.ou=t.ly,e.uu=100),(n&Y.A.Ru)===Y.A.Ru&&(e.pu=t.ZA,e.yu=t.ZA,e.du=this.Pt+400,e.wu=t.ZA,e.Au=t.ZA),(n&Y.A.Fu)===Y.A.Fu&&(e.type=r.A.get(t.KA),e.oI=e.type.lI,e.aI=e.type.cI,e.fI=e.type.uI,e.dI=e.type.wI,e.Sa=e.type.AI),(n&Y.A.Du)===Y.A.Du){e.Nu=t.KA;const i=t.Ko;e.Zm=i>>16,e.qm=this.Pt+(65535&i),e.$m=0,e.Jm=0,e.qm>this.Pt&&(e.$m=-1),65535===e.Nu&&(e.Nu=-1)}(n&Y.A.Su)===Y.A.Su&&(e.zm=t.KA,e.jm=t.KA,e.Mu=e.zm,e.ku=e.jm)}};$c=()=>{for(let t=-1;t<this.rr;t++){let i;i=-1===t?this.Mt:this.lr[t];const s=this.nr[i];s&&this.yI(s)}if($.K.yt++,$.K.yt>1406){$.K.yt=0,this.Bt.jc(O.A.pI),this.Bt.p1(0);const t=this.Bt.Fc;this.Bt.p1(162),this.Bt.p1(22),2*Math.random()|0||this.Bt.p1(84),this.Bt.p2(31824),this.Bt.p2(13490),2*Math.random()|0||this.Bt.p1(123),2*Math.random()|0||this.Bt.p1(134),this.Bt.p1(100),this.Bt.p1(94),this.Bt.p2(35521),this.Bt.Hf(this.Bt.Fc-t)}};yI=t=>{(t.x<128||t.z<128||t.x>=13184||t.z>=13184)&&(t.Ou=-1,t.Nu=-1,t.mu=0,t.Iu=0,t.x=128*t.wf[0]+64*t.size,t.z=128*t.Af[0]+64*t.size,t.pathLength=0),t===this.Sr&&(t.x<1536||t.z<1536||t.x>=11776||t.z>=11776)&&(t.Ou=-1,t.Nu=-1,t.mu=0,t.Iu=0,t.x=128*t.wf[0]+64*t.size,t.z=128*t.Af[0]+64*t.size,t.pathLength=0),t.mu>this.Pt?this.mI(t):t.Iu>=this.Pt?this.II(t):this._I(t),this.EI(t),this.gI(t)};xf=()=>{if(this.Sr){this.Sr.x>>7===this.Ke&&this.Sr.z>>7===this.Xe&&(this.Ke=0);for(let t=-1;t<this.rr;t++){let i,s;if(-1===t?(i=this.Sr,s=this.Mt<<14):(i=this.nr[this.lr[t]],s=this.lr[t]<<14),!i||!i.isVisible())continue;i.st=($.K.st&&this.rr>50||this.rr>200)&&-1!==t&&i.CI===i.Sa;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.A.Xn||e<0||e>=G.A.Xn))if(!i.TI||this.Pt<i.OI||this.Pt>=i.bI){if(64==(127&i.x)&&64==(127&i.z)){if(this.Vn[h][e]===this.Ve)continue;this.Vn[h][e]=this.Ve}i.y=this.Bf(this.Dn,i.x,i.z),this.He?.vI(this.Dn,i.x,i.y,i.z,null,i,s,i.LI,60,i.RI)}else i.st=!1,i.y=this.Bf(this.Dn,i.x,i.z),this.He?.SI(this.Dn,i.x,i.y,i.z,i.MI,i.kI,i.xI,i.DI,null,i,s,i.LI)}}};Jc=()=>{for(let t=0;t<this.yr;t++){const i=this.pr[t],s=this.Ar[i];s&&s.type&&this.yI(s)}};Df=()=>{for(let t=0;t<this.yr;t++){const i=this.Ar[this.pr[t]],s=536870912+(this.pr[t]<<14)|0;if(!i||!i.isVisible())continue;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.A.Xn||e<0||e>=G.A.Xn)){if(1===i.size&&64==(127&i.x)&&64==(127&i.z)){if(this.Vn[h][e]===this.Ve)continue;this.Vn[h][e]=this.Ve}this.He?.vI(this.Dn,i.x,this.Bf(this.Dn,i.x,i.z),i.z,null,i,s,i.LI,64*(i.size-1)+60,i.RI)}}};Nf=()=>{for(let t=this.mr.head();t;t=this.mr.next())if(t.level!==this.Dn||this.Pt>t.NI)t.sy();else if(this.Pt>=t.FI){if(t.target>0){const i=this.Ar[t.target-1];i&&t.UI(i.x,this.Bf(t.level,i.x,i.z)-t.offsetY,i.z,this.Pt)}if(t.target<0){const i=-t.target-1;let s;s=i===this.Dr?this.Sr:this.nr[i],s&&t.UI(s.x,this.Bf(t.level,s.x,s.z)-t.offsetY,s.z,this.Pt)}t.update(this.Ye),this.He?.vI(this.Dn,0|t.x,0|t.y,0|t.z,null,t,-1,t.LI,60,!1)}};Pf=()=>{for(let t=this.Ir.head();t;t=this.Ir.next())t.level!==this.Dn||t.BI?t.sy():this.Pt>=t.FI&&(t.update(this.Ye),t.BI?t.sy():this.He?.vI(t.level,t.x,t.y,t.z,null,t,-1,0,60,!1))};Ff=()=>{for(let t=this._r.head();t;t=this._r.next()){let i=!1;if(t.fl+=this.Ye,-1===t.ul&&(t.ul=0,i=!0),t.GI.delay)for(;t.fl>t.GI.delay[t.ul];)if(t.fl-=t.GI.delay[t.ul]+1,t.ul++,i=!0,t.ul>=t.GI.dl&&(t.ul-=t.GI.wl,t.ul<0||t.ul>=t.GI.dl)){t.sy(),i=!1;break}if(i&&this.He){const i=t.Vp,s=t.Wp,h=t.Yp;let n=0;if(0===t.HI?n=this.He.Ed(i,s,h):1===t.HI?n=this.He.kA(i,h,s):2===t.HI?n=this.He.Md(i,s,h):3===t.HI&&(n=this.He.Ad(i,s,h)),this.Wn&&0!==n&&(n>>14&32767)===t.index){const r=this.Wn[i][s][h],o=this.Wn[i][s+1][h],l=this.Wn[i][s+1][h+1],a=this.Wn[i][s][h+1],c=e.A.get(t.index);let f=-1;if(-1!==t.ul&&t.GI.frames&&(f=t.GI.frames[t.ul]),2===t.HI){const t=this.He.gd(i,s,h,n);let e=31&t;const u=t>>6;e===P.A.oA.id&&(e=P.A.rA.id),this.He?.WI(i,s,h,c.la(e,u,r,o,l,a,f))}else if(1===t.HI)this.He?.YI(i,s,h,c.la(P.A.VI.id,0,r,o,l,a,f));else if(0===t.HI){const t=this.He.gd(i,s,h,n),e=31&t,u=t>>6;if(e===P.A.Od.id){const t=u+1&3;this.He?.KI(s,h,i,c.la(P.A.Od.id,u+4,r,o,l,a,f),c.la(P.A.Od.id,t,r,o,l,a,f))}else this.He?.XI(i,s,h,c.la(e,u,r,o,l,a,f))}else if(3===t.HI){const t=this.He.gd(i,s,h,n)>>6;this.He?.zI(i,s,h,c.la(P.A.lA.id,t,r,o,l,a,f))}}else t.sy()}}};Qc=()=>{for(let t=-1;t<this.rr;t++){let i;i=-1===t?this.Mt:this.lr[t];const s=this.nr[i];s&&s.uu>0&&(s.uu--,0===s.uu&&(s.ou=null))}for(let t=0;t<this.yr;t++){const i=this.pr[t],s=this.Ar[i];s&&s.uu>0&&(s.uu--,0===s.uu&&(s.ou=null))}};tf=()=>{if(2===this.We){for(let t=this.Er.head();t;t=this.Er.next())this.Pt>=t.NI&&(this.RA(t.hp,t.x,t.z,t.Kp,t.angle,t.shape,t.Nd),t.sy());$.K.At++,$.K.At>85&&($.K.At=0,this.Bt.jc(O.A.jI))}};mI=t=>{const i=t.mu-this.Pt,s=128*t.Qm+64*t.size,h=128*t.tI+64*t.size;t.x+=(s-t.x)/i|0,t.z+=(h-t.z)/i|0,t.ZI=0,0===t.hI&&(t.qI=1024),1===t.hI&&(t.qI=1536),2===t.hI&&(t.qI=0),3===t.hI&&(t.qI=512)};II=t=>{if(t.Iu===this.Pt||-1===t.Ou||0!==t.Xm||t.Km+1>h.A.Ro[t.Ou].delay[t.Vm]){const i=t.Iu-t.mu,s=this.Pt-t.mu,h=128*t.Qm+64*t.size,e=128*t.tI+64*t.size,n=128*t.iI+64*t.size,r=128*t.sI+64*t.size;t.x=(h*(i-s)+n*s)/i|0,t.z=(e*(i-s)+r*s)/i|0}t.ZI=0,0===t.hI&&(t.qI=1024),1===t.hI&&(t.qI=1536),2===t.hI&&(t.qI=0),3===t.hI&&(t.qI=512),t.LI=t.qI};EI=t=>{if(-1!==t.vu&&t.vu<32768){const i=this.Ar[t.vu];if(i){const s=t.x-i.x,h=t.z-i.z;0===s&&0===h||(t.qI=325.949*Math.atan2(s,h)&2047)}}if(t.vu>=32768){let i=t.vu-32768;i===this.Dr&&(i=this.Mt);const s=this.nr[i];if(s){const i=t.x-s.x,h=t.z-s.z;0===i&&0===h||(t.qI=325.949*Math.atan2(i,h)&2047)}}if((0!==t.zm||0!==t.jm)&&(0===t.pathLength||t.ZI>0)){const i=t.x-64*(t.zm-this.Tn-this.Tn),s=t.z-64*(t.jm-this.On-this.On);0===i&&0===s||(t.qI=325.949*Math.atan2(i,s)&2047),t.zm=0,t.jm=0}const i=t.qI-t.LI&2047;if(0!==i&&(i<32||i>2016?t.LI=t.qI:i>1024?t.LI-=32:t.LI+=32,t.LI&=2047,t.CI===t.Sa&&t.LI!==t.qI)){if(-1!==t.$I)return void(t.CI=t.$I);t.CI=t.oI}};gI=t=>{let i;if(t.RI=!1,-1!==t.CI&&(i=h.A.Ro[t.CI],t.JI++,i.delay&&t.QI<i.dl&&t.JI>i.delay[t.QI]&&(t.JI=0,t.QI++),t.QI>=i.dl&&(t.JI=0,t.QI=0)),-1!==t.Ou&&0===t.Xm){for(i=h.A.Ro[t.Ou],t.Km++;i.delay&&t.Vm<i.dl&&t.Km>i.delay[t.Vm];)t.Km-=i.delay[t.Vm],t.Vm++;t.Vm>=i.dl&&(t.Vm-=i.wl,t.Ym++,t.Ym>=i.t_&&(t.Ou=-1),(t.Vm<0||t.Vm>=i.dl)&&(t.Ou=-1)),t.RI=i.i_}if(t.Xm>0&&t.Xm--,-1!==t.Nu&&this.Pt>=t.qm){for(t.$m<0&&(t.$m=0),i=l.A.Ro[t.Nu].GI,t.Jm++;i&&i.delay&&t.$m<i.dl&&t.Jm>i.delay[t.$m];)t.Jm-=i.delay[t.$m],t.$m++;i&&t.$m>=i.dl&&(t.$m<0||t.$m>=i.dl)&&(t.Nu=-1)}};_I=t=>{if(t.CI=t.Sa,0===t.pathLength)return void(t.ZI=0);if(-1!==t.Ou&&0===t.Xm){if(!h.A.Ro[t.Ou].s_)return void t.ZI++}const i=t.x,s=t.z,e=128*t.wf[t.pathLength-1]+64*t.size,n=128*t.Af[t.pathLength-1]+64*t.size;if(e-i<=256&&e-i>=-256&&n-s<=256&&n-s>=-256){t.qI=i<e?s<n?1280:s>n?1792:1536:i>e?s<n?768:s>n?256:512:s<n?1024:0;let h=t.qI-t.LI&2047;h>1024&&(h-=2048);let r=t.aI;h>=-256&&h<=256?r=t.oI:h>=256&&h<768?r=t.dI:h>=-768&&h<=-256&&(r=t.fI),-1===r&&(r=t.oI),t.CI=r;let o=4;t.LI!==t.qI&&-1===t.vu&&(o=2),t.pathLength>2&&(o=6),t.pathLength>3&&(o=8),t.ZI>0&&t.pathLength>1&&(o=8,t.ZI--),t.h_[t.pathLength-1]&&(o<<=1),o>=8&&t.CI===t.oI&&-1!==t.e_&&(t.CI=t.e_),i<e?(t.x+=o,t.x>e&&(t.x=e)):i>e&&(t.x-=o,t.x<e&&(t.x=e)),s<n?(t.z+=o,t.z>n&&(t.z=n)):s>n&&(t.z-=o,t.z<n&&(t.z=n)),t.x===e&&t.z===n&&t.pathLength--}else t.x=e,t.z=n};Yf=()=>{let t=3;if(this.fn<310&&this.Sr){let i=this.ln>>7,s=this.cn>>7;const h=this.Sr.x>>7,e=this.Sr.z>>7;let n,r,o,l;if(this.Yn&&4&this.Yn[this.Dn][i][s]&&(t=this.Dn),n=h>i?h-i:i-h,r=e>s?e-s:s-e,n>r)for(o=65536*r/n|0,l=32768;i!==h;)i<h?i++:i>h&&i--,this.Yn&&4&this.Yn[this.Dn][i][s]&&(t=this.Dn),l+=o,l>=65536&&(l-=65536,s<e?s++:s>e&&s--,this.Yn&&4&this.Yn[this.Dn][i][s]&&(t=this.Dn));else for(o=65536*n/r|0,l=32768;s!==e;)s<e?s++:s>e&&s--,this.Yn&&4&this.Yn[this.Dn][i][s]&&(t=this.Dn),l+=o,l>=65536&&(l-=65536,i<h?i++:i>h&&i--,this.Yn&&4&this.Yn[this.Dn][i][s]&&(t=this.Dn))}return this.Sr&&this.Yn&&4&this.Yn[this.Dn][this.Sr.x>>7][this.Sr.z>>7]&&(t=this.Dn),t};Wf=()=>{if(!this.Yn)return 0;return this.Bf(this.Dn,this.ln,this.cn)-this.an>=800||!(4&this.Yn[this.Dn][this.ln>>7][this.cn>>7])?3:this.Dn};Bf=(t,i,s)=>{if(!this.Wn)return 0;const h=Math.min(i>>7,G.A.Xn-1),e=Math.min(s>>7,G.A.Xn-1);let n=t;t<3&&this.Yn&&!(2&~this.Yn[1][h][e])&&(n=t+1);const r=127&i,o=127&s;return(this.Wn[n][h][e]*(128-r)+this.Wn[n][h+1][e]*r>>7)*(128-o)+(this.Wn[n][h][e+1]*(128-r)+this.Wn[n][h+1][e+1]*r>>7)*o>>7};Uf=(t,i,s,h,e,n)=>{const r=2048-e&2047,o=2048-h&2047;let l,a,c,f=0,u=0,w=n;0!==r&&(l=d.A.sin[r],a=d.A.cos[r],c=u*a-n*l>>16,w=u*l+n*a>>16,u=c),0!==o&&(l=d.A.sin[o],a=d.A.cos[o],c=w*l+f*a>>16,w=w*a-f*l>>16,f=c),this.ln=t-f,this.an=i-u,this.cn=s-w,this.fn=e,this.un=h};Ef=()=>{if(!this.Sr)return;const t=this.Sr.x+this.Ze,i=this.Sr.z+this.qe;(this.Gn-t<-500||this.Gn-t>500||this.Hn-i<-500||this.Hn-i>500)&&(this.Gn=t,this.Hn=i),this.Gn!==t&&(this.Gn+=(t-this.Gn)/16|0),this.Hn!==i&&(this.Hn+=(i-this.Hn)/16|0),1===this.if[1]?this.Un+=(-this.Un-24)/2|0:1===this.if[2]?this.Un+=(24-this.Un)/2|0:this.Un=this.Un/2|0,1===this.if[3]?this.Bn+=(12-this.Bn)/2|0:1===this.if[4]?this.Bn+=(-this.Bn-12)/2|0:this.Bn=this.Bn/2|0,this.Fn=this.Fn+this.Un/2&2047,this.Pn+=this.Bn/2|0,this.Pn<128&&(this.Pn=128),this.Pn>383&&(this.Pn=383);const s=this.Gn>>7,h=this.Hn>>7,e=this.Bf(this.Dn,this.Gn,this.Hn);let n=0;if(this.Wn&&s>3&&h>3&&s<100&&h<100)for(let t=s-4;t<=s+4;t++)for(let i=h-4;i<=h+4;i++){let s=this.Dn;s<3&&this.Yn&&!(2&~this.Yn[1][t][i])&&s++;const h=e-this.Wn[s][t][i];h>n&&(n=h)}let r=192*n;r>98048&&(r=98048),r<32768&&(r=32768),r>this.dn?this.dn+=(r-this.dn)/24|0:r<this.dn&&(this.dn+=(r-this.dn)/80|0)};gf=()=>{let t=128*this.tr+64,i=128*this.ir+64,s=this.Bf(this.Dn,this.tr,this.ir)-this.sr;this.ln<t&&(this.ln+=this.hr+((t-this.ln)*this.er/1e3|0),this.ln>t&&(this.ln=t)),this.ln>t&&(this.ln-=this.hr+((this.ln-t)*this.er/1e3|0),this.ln<t&&(this.ln=t)),this.an<s&&(this.an+=this.hr+((s-this.an)*this.er/1e3|0),this.an>s&&(this.an=s)),this.an>s&&(this.an-=this.hr+((this.an-s)*this.er/1e3|0),this.an<s&&(this.an=s)),this.cn<i&&(this.cn+=this.hr+((i-this.cn)*this.er/1e3|0),this.cn>i&&(this.cn=i)),this.cn>i&&(this.cn-=this.hr+((this.cn-i)*this.er/1e3|0),this.cn<i&&(this.cn=i)),t=128*this.Zn+64,i=128*this.qn+64,s=this.Bf(this.Dn,this.Zn,this.qn)-this.$n;const h=t-this.ln,e=s-this.an,n=i-this.cn,r=0|Math.sqrt(h*h+n*n);let o=325.949*Math.atan2(e,r)&2047;const l=-325.949*Math.atan2(h,n)&2047;o<128&&(o=128),o>383&&(o=383),this.fn<o&&(this.fn+=this.Jn+((o-this.fn)*this.Qn/1e3|0),this.fn>o&&(this.fn=o)),this.fn>o&&(this.fn-=this.Jn+((this.fn-o)*this.Qn/1e3|0),this.fn<o&&(this.fn=o));let a=l-this.un;a>1024&&(a-=2048),a<-1024&&(a+=2048),a>0&&(this.un+=this.Jn+(a*this.Qn/1e3|0),this.un&=2047),a<0&&(this.un-=this.Jn+(-a*this.Qn/1e3|0),this.un&=2047);let c=l-this.un;c>1024&&(c-=2048),c<-1024&&(c+=2048),(c<0&&a>0||c>0&&a<0)&&(this.un=l)};vy=(t,i)=>{const s=t.ZA;let n=this._n+(s>>4&7),r=this.En+(7&s);if(i===T.A.by||i===T.A.Oy){const s=t.ZA,h=s>>2,e=3&s,o=P.A.of(h).Nd;let l;if(l=i===T.A.Oy?-1:t.KA,n>=0&&r>=0&&n<G.A.Xn&&r<G.A.Xn){let t=null;for(let i=this.Tr.head();i;i=this.Tr.next())if(i.hp===this.Dn&&i.x===n&&i.z===r&&i.Nd===o){t=i;break}if(!t&&this.He){let i=0,s=-1,h=0,e=0;if(o===N.A.SA?i=this.He.Ed(this.Dn,n,r):o===N.A.MA?i=this.He.kA(this.Dn,r,n):o===N.A.xA?i=this.He.Md(this.Dn,n,r):o===N.A.lA&&(i=this.He.Ad(this.Dn,n,r)),0!==i){const t=this.He.gd(this.Dn,n,r,i);s=i>>14&32767,h=31&t,e=t>>6}t=new U.A(this.Dn,o,n,r,0,F.A.bd,P.A.Td.id,s,e,h),this.Tr.n_(t)}t&&(t.Kp=l,t.shape=h,t.angle=e),this.RA(this.Dn,n,r,l,e,h,o)}}else if(i===T.A.Ty){const i=t.ZA>>2,s=P.A.of(i).Nd,e=t.KA;if(n>=0&&r>=0&&n<G.A.Xn&&r<G.A.Xn&&this.He){let t=0;if(s===N.A.SA?t=this.He.Ed(this.Dn,n,r):s===N.A.MA?t=this.He.kA(this.Dn,r,n):s===N.A.xA?t=this.He.Md(this.Dn,n,r):s===N.A.lA&&(t=this.He.Ad(this.Dn,n,r)),0!==t){const i=new K.A(t>>14&32767,this.Dn,s,n,r,h.A.Ro[e],!1);this._r.n_(i)}}}else if(i===T.A.Cy){const i=t.KA,s=t.KA;if(n>=0&&r>=0&&n<G.A.Xn&&r<G.A.Xn){const t=new V.A(i,s);this.gr[this.Dn][n][r]||(this.gr[this.Dn][n][r]=new S.A),this.gr[this.Dn][n][r]?.n_(t),this.CA(n,r)}}else if(i===T.A.gy){const i=t.KA;if(n>=0&&r>=0&&n<G.A.Xn&&r<G.A.Xn){const t=this.gr[this.Dn][n][r];if(t){for(let s=t.head();s;s=t.next())if(s.index===(32767&i)){s.sy();break}t.head()||(this.gr[this.Dn][n][r]=null),this.CA(n,r)}}}else if(i===T.A.Ey){let i=n+t.zA,s=r+t.zA;const h=t.tp,e=t.KA,o=t.ZA,l=t.ZA,a=t.KA,c=t.KA,f=t.ZA,u=t.ZA;if(n>=0&&r>=0&&n<G.A.Xn&&r<G.A.Xn&&i>=0&&s>=0&&i<G.A.Xn&&s<G.A.Xn){n=128*n+64,r=128*r+64,i=128*i+64,s=128*s+64;const t=new X.A(e,this.Dn,n,this.Bf(this.Dn,n,r)-o,r,a+this.Pt,c+this.Pt,f,u,h,l);t.UI(i,this.Bf(this.Dn,i,s)-l,s,a+this.Pt),this.mr.n_(t)}}else if(i===T.A._y){const i=t.KA,s=t.ZA,h=t.KA;if(n>=0&&r>=0&&n<G.A.Xn&&r<G.A.Xn){n=128*n+64,r=128*r+64;const t=new z.A(i,this.Dn,n,r,this.Bf(this.Dn,n,r)-s,this.Pt,h);this.Ir.n_(t)}}else if(i===T.A.Iy){const i=t.KA,s=t.KA,h=t.KA;if(n>=0&&r>=0&&n<G.A.Xn&&r<G.A.Xn&&h!==this.Dr){const t=new V.A(i,s);this.gr[this.Dn][n][r]||(this.gr[this.Dn][n][r]=new S.A),this.gr[this.Dn][n][r]?.n_(t),this.CA(n,r)}}else if(i===T.A.my){const i=t.ZA,s=i>>2,h=3&i,o=P.A.of(s).Nd,l=t.KA,a=t.KA,c=t.KA,f=t.KA;let u,d=t.zA,w=t.zA,A=t.zA,y=t.zA;if(u=f===this.Dr?this.Sr:this.nr[f],u&&this.Wn){const t=new B.A(this.Dn,o,n,r,-1,h,s,a+this.Pt);this.Er.n_(t);const i=new B.A(this.Dn,o,n,r,l,h,s,c+this.Pt);this.Er.n_(i);const f=this.Wn[this.Dn][n][r],p=this.Wn[this.Dn][n+1][r],m=this.Wn[this.Dn][n+1][r+1],I=this.Wn[this.Dn][n][r+1],_=e.A.get(l);u.OI=a+this.Pt,u.bI=c+this.Pt,u.TI=_.la(s,h,f,p,m,I,-1);let E,g=_.width,C=_.length;h!==F.A.vd&&h!==F.A.Rd||(g=_.length,C=_.width),u.r_=128*n+64*g,u.o_=128*r+64*C,u.l_=this.Bf(this.Dn,u.r_,u.o_),d>A&&(E=d,d=A,A=E),w>y&&(E=w,w=y,y=E),u.MI=n+d,u.xI=n+A,u.kI=r+w,u.DI=r+y}}else if(i===T.A.py){const i=t.KA,s=t.KA,h=t.KA;if(n>=0&&r>=0&&n<G.A.Xn&&r<G.A.Xn){const t=this.gr[this.Dn][n][r];if(t){for(let e=t.head();e;e=t.next())if(e.index===(32767&i)&&e.count===s){e.count=h;break}this.CA(n,r)}}}};$f=t=>{if(!$.K.st){if(d.A.a_[17]>=t){const t=d.A.c_[17];if(!t)return;const i=t.width*t.height-1,s=t.width*this.Ye*2,h=t.nc,e=this.Mn;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.nc=e,this.Mn=h,d.A.f_(17)}if(d.A.a_[24]>=t){const t=d.A.c_[24];if(!t)return;const i=t.width*t.height-1,s=t.width*this.Ye*2,h=t.nc,e=this.Mn;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.nc=e,this.Mn=h,d.A.f_(24)}}};Ic=()=>{if(!(this.Ci&&this.Ti&&this.gi&&this.Ri))return;for(let t=10;t<117;t++){(100*Math.random()|0)<50&&(this.Ci[t+32512]=255)}for(let t=0;t<100;t++){const t=2+(124*Math.random()|0)+(128+(128*Math.random()|0)<<7);this.Ci[t]=192}for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Ti[s]=(this.Ci[s-1]+this.Ci[s+1]+this.Ci[s-128]+this.Ci[s+128])/4|0}this.Si+=128,this.Si>this.gi.length&&(this.Si-=this.gi.length,this.gc(this.pi[12*Math.random()|0]));for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);let h=this.Ti[s+128]-(this.gi[s+this.Si&this.gi.length-1]/5|0);h<0&&(h=0),this.Ci[s]=h}for(let t=0;t<255;t++)this.Ri[t]=this.Ri[t+1];if(this.Ri[255]=16*Math.sin(this.Pt/14)+14*Math.sin(this.Pt/15)+12*Math.sin(this.Pt/16)|0,this.Mi>0&&(this.Mi-=4),this.ki>0&&(this.ki-=4),0===this.Mi&&0===this.ki){const t=2e3*Math.random()|0;0===t?this.Mi=1024:1===t&&(this.ki=1024)}};u_=(t,i,s)=>{const h=256-i;return((16711935&t)*h+(16711935&s)*i&4278255360)+((65280&t)*h+(65280&s)*i&16711680)>>8};_c=()=>{if(!(this.Oi&&this.bi&&this.vi&&this.Li&&this.Ri&&this.Ci))return;const t=256;if(this.Mi>0)for(let t=0;t<256;t++)this.Mi>768?this.Oi[t]=this.u_(this.bi[t],1024-this.Mi,this.vi[t]):this.Mi>256?this.Oi[t]=this.vi[t]:this.Oi[t]=this.u_(this.vi[t],256-this.Mi,this.bi[t]);else if(this.ki>0)for(let t=0;t<256;t++)this.ki>768?this.Oi[t]=this.u_(this.bi[t],1024-this.ki,this.Li[t]):this.ki>256?this.Oi[t]=this.Li[t]:this.Oi[t]=this.u_(this.Li[t],256-this.ki,this.bi[t]);else for(let t=0;t<256;t++)this.Oi[t]=this.bi[t];for(let t=0;t<33920;t++)this.hi&&this.Ii&&(this.hi.nc[t]=this.Ii.nc[t]);let i=0,s=1152;for(let h=1;h<255;h++){let e=(this.Ri[h]*(t-h)/t|0)+22;e<0&&(e=0),i+=e;for(let t=e;t<128;t++){let t=this.Ci[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Oi[t],this.hi){const e=this.hi.nc[s];this.hi.nc[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}s+=e}this.hi?.draw(0,0);for(let t=0;t<33920;t++)this.ei&&this._i&&(this.ei.nc[t]=this._i.nc[t]);i=0,s=1176;for(let h=1;h<255;h++){const e=this.Ri[h]*(t-h)/t|0,n=103-e;s+=e;for(let t=0;t<n;t++){let t=this.Ci[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Oi[t],this.ei){const e=this.ei.nc[s];this.ei.nc[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}i+=128-n,s+=128-n-e}this.ei?.draw(661,0)}}console.log(`RS2 user client - release #${$.K.tt}`),await(0,it.w)(),(new t).run().then((()=>{})),i()}catch(t){i(t)}}),1)},7046:(t,i,s)=>{s.d(i,{A:()=>a});var h=s(1183),e=s(4583),n=s(9234),r=s(9091),o=s(2595),l=s(7854);class a{static getParameter(t){return new URLSearchParams(window.location.search).get(t)??''}static setParameter(t,i){const s=new URL(window.location.toString());s.searchParams.set(t,i),window.history.pushState(null,'',s.toString())}Ku=0;d_=[];w_=0;Mo=null;state=0;Yu=20;A_=1;y_=[];Wu=0;p_=0;m_=[];I_=!0;__=!1;E_=50;hasFocus=!0;ac=!1;Yc=0;hf=0;xl=0;Dl=0;Lc=0;Rc=0;Sc=0;if=[];g_=[];C_=0;T_=0;input=null;O_=!1;b_=!1;v_=!1;time=-1;L_=0;R_=0;S_=0;M_=0;k_=0;x_=0;constructor(t=!1){l.D_.tabIndex=-1,l.jo.fillStyle='black',l.jo.fillRect(0,0,l.D_.width,l.D_.height),this.__=t,this.__?this.resize(window.innerWidth,window.innerHeight):this.resize(l.D_.width,l.D_.height)}get width(){return l.D_.width}get height(){return l.D_.height}resize=(t,i)=>{l.D_.width=t,l.D_.height=i,this.Mo=new h.A(t,i),e.A.N_()};run=async()=>{l.D_.addEventListener('resize',(()=>{this.__&&this.resize(window.innerWidth,window.innerHeight)}),!1),l.D_.onmousedown=this.onmousedown,l.D_.onmouseup=this.onmouseup,l.D_.onmouseenter=this.onmouseenter,l.D_.onmouseleave=this.onmouseleave,l.D_.onmousemove=this.onmousemove,window.onbeforeunload=this.bo,l.D_.onfocus=this.onfocus,l.D_.onblur=this.onblur,this.P_?(l.D_.ontouchstart=this.ontouchstart,l.D_.ontouchend=this.ontouchend,l.D_.ontouchmove=this.ontouchmove):(l.D_.onkeydown=this.onkeydown,l.D_.onkeyup=this.onkeyup),l.D_.oncontextmenu=t=>{t.preventDefault()},window.oncontextmenu=t=>{t.preventDefault()},this.P_&&'low'===a.getParameter('detail')&&(this.E_=30),await this.Go(0,'Loading...'),await this.load();for(let t=0;t<10;t++)this.y_[t]=performance.now();let t,i=0,s=256,h=1,e=0;for(;this.state>=0;){if(this.state>0&&(this.state--,0===this.state))return void this.F_();const r=s,o=h;s=300,h=1,t=performance.now();const l=this.y_[i];if(0===l?(s=r,h=o):t>l&&(s=2560*this.Yu/(t-l)|0),s<25?s=25:s>256&&(s=256,h=this.Yu-(t-l)/10|0),this.y_[i]=t,i=(i+1)%10,h>1)for(let t=0;t<10;t++)0!==this.y_[t]&&(this.y_[t]+=h);for(h<this.A_&&(h=this.A_),await(0,n.Wo)(h);e<256;)await this.update(),this.Lc=0,this.C_=this.T_,e+=s;e&=255,this.Yu>0&&(this.Wu=1e3*s/(256*this.Yu)|0);const a=performance.now();if(this.I_&&this.refresh(),await this.draw(),this.m_[this.p_]=(performance.now()-a)/1e3,this.p_=(this.p_+1)%this.m_.length,this.E_<50){const i=1e3/this.E_-(performance.now()-t);i>0&&await(0,n.Wo)(i)}}-1===this.state&&this.F_()};F_=()=>{this.state=-2,this.bo()};Zo=t=>{this.Yu=1e3/t|0};yA=t=>{this.E_=Math.max(Math.min(50,0|t),0)};start=()=>{this.state>=0&&(this.state=0)};stop=()=>{this.state>=0&&(this.state=4e3/this.Yu|0)};destroy=()=>{this.state=-1};load=async()=>{};update=async()=>{};bo=()=>{};draw=async()=>{};refresh=()=>{};async Go(t,i){const s=this.width,h=this.height;this.I_&&(l.jo.fillStyle='black',l.jo.fillRect(0,0,s,h),this.I_=!1);const e=h/2-18;l.jo.fillStyle='rgb(140, 17, 17)',l.jo.rect((s/2|0)-152,e,304,34),l.jo.fillRect((s/2|0)-150,e+2,3*t,30),l.jo.fillStyle='black',l.jo.fillRect((s/2|0)-150+3*t,e+2,300-3*t,30),l.jo.font='bold 13px helvetica, sans-serif',l.jo.textAlign='center',l.jo.fillStyle='white',l.jo.fillText(i,s/2|0,e+22),await(0,n.Wo)(5)}kc=()=>{let t=-1;return this.T_!==this.C_&&(t=this.g_[this.C_],this.C_=this.C_+1&127),t};get ms(){const t=this.m_.length;let i=0;for(let s=0;s<t;s++)i+=this.m_[s];const s=i/t*1e3;return s>this.Ku&&(this.Ku=s),this.d_[this.w_]=s,this.w_=(this.w_+1)%250,s}get Vu(){return this.d_.reduce(((t,i)=>t+i),0)/250}onkeydown=t=>{const i=t.key;this.Yc=0;const s=r.c[i];if(!s||0===t.code.length&&!t.isTrusted)return void console.warn(`Unhandled key: ${i}`);const h=s.code;let e=s.ch;t.ctrlKey&&(e>='A'.charCodeAt(0)&&e<=']'.charCodeAt(0)||e=='_'.charCodeAt(0)?e-='A'.charCodeAt(0)-1:e>='a'.charCodeAt(0)&&e<='z'.charCodeAt(0)&&(e-='a'.charCodeAt(0)-1)),e<30&&(e=0),h===r.c.ArrowLeft.code?e=1:h===r.c.ArrowRight.code?e=2:h===r.c.ArrowUp.code?e=3:h===r.c.ArrowDown.code?e=4:h===r.c.Control.code?e=5:h===r.c.Shift.code?e=6:h===r.c.Alt.code?e=7:h===r.c.Backspace.code||h===r.c.Delete.code?e=8:h===r.c.Tab.code?e=9:h===r.c.Enter.code?e=10:h>=r.c.F1.code&&h<=r.c.F12.code?e=h+1008-r.c.F1.code:h===r.c.Home.code?e=1e3:h===r.c.End.code?e=1001:h===r.c.PageUp.code?e=1002:h===r.c.PageDown.code&&(e=1003),e>0&&e<128&&(this.if[e]=1),e>4&&(this.g_[this.T_]=e,this.T_=this.T_+1&127),o.A.enabled&&o.A.U_(e),r.g.includes(i)||t.preventDefault()};onkeyup=t=>{const i=t.key;this.Yc=0;const s=r.c[i];if(!s||0===t.code.length&&!t.isTrusted)return void console.warn(`Unhandled key: ${i}`);const h=s.code;let e=s.ch;e<30&&(e=0),h===r.c.ArrowLeft.code?e=1:h===r.c.ArrowRight.code?e=2:h===r.c.ArrowUp.code?e=3:h===r.c.ArrowDown.code?e=4:h===r.c.Control.code?e=5:h===r.c.Shift.code?e=6:h===r.c.Alt.code?e=7:h===r.c.Backspace.code||h===r.c.Delete.code?e=8:h===r.c.Tab.code?e=9:h===r.c.Enter.code?e=10:h>=r.c.F1.code&&h<=r.c.F12.code?e=h+1008-r.c.F1.code:h===r.c.Home.code?e=1e3:h===r.c.End.code?e=1001:h===r.c.PageUp.code?e=1002:h===r.c.PageDown.code&&(e=1003),e>0&&e<128&&(this.if[e]=0),o.A.enabled&&o.A.B_(e),r.g.includes(i)||t.preventDefault()};onmousedown=t=>{if(this.O_=!1,(t.clientX>0||t.clientY>0)&&this.G_(t),this.Yc=0,this.Rc=this.xl,this.Sc=this.Dl,this.P_&&!this.H_){if(this.W_()||this.Y_()||this.V_())return this.Lc=1,void(this.hf=1);t.timeStamp>=this.time+500?(this.Lc=2,this.hf=2):(this.Lc=1,this.hf=1)}else 2===t.button?(this.Lc=2,this.hf=2):(this.Lc=1,this.hf=1);o.A.enabled&&o.A.K_(this.Rc,this.Sc,t.buttons)};onmouseup=t=>{this.G_(t),this.Yc=0,this.hf=0,o.A.enabled&&o.A.X_(t.buttons)};onmouseenter=t=>{this.G_(t),o.A.enabled&&o.A.z_()};onmouseleave=t=>{this.G_(t),this.Yc=0,this.xl=-1,this.Dl=-1,this.hf=0,this.Rc=-1,this.Sc=-1,o.A.enabled&&o.A.j_()};onmousemove=t=>{this.G_(t),this.Yc=0,o.A.enabled&&o.A.Z_(this.xl,this.Dl)};onfocus=t=>{this.hasFocus=!0,this.I_=!0,this.refresh(),o.A.enabled&&o.A.q_()};onblur=t=>{this.hasFocus=!1,o.A.enabled&&o.A.J_()};ontouchstart=t=>{if(!this.P_)return;null!==this.input&&(this.input.parentNode?.removeChild(this.input),this.input=null),this.O_=!0;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.L_=this.k_=this.S_=0|i.screenX,this.R_=this.x_=this.M_=0|i.screenY,this.time=t.timeStamp,this.b_=this.Q_(),this.v_=this.tE()};ontouchend=t=>{if(!this.P_||!this.O_)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;if(this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.k_=0|i.screenX,this.x_=0|i.screenY,this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowLeft',code:'ArrowLeft'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowUp',code:'ArrowUp'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowRight',code:'ArrowRight'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowDown',code:'ArrowDown'})),this.b_&&!this.Q_())return void(this.O_=!1);if(this.v_&&!this.tE())return void(this.O_=!1);if(this.W_()||this.iE()||this.Y_()||this.V_()){null!==this.input&&(this.input.parentNode?.contains(this.input)&&this.input.parentNode?.removeChild(this.input),this.input=null);const t=document.createElement('input');return this.Y_()?(t.setAttribute('id','username'),t.setAttribute('placeholder','Username')):this.V_()?(t.setAttribute('id','password'),t.setAttribute('placeholder','Password')):this.W_()?(t.setAttribute('id','chatinput'),t.setAttribute('placeholder','Chatinput')):this.iE()&&(t.setAttribute('id','chatpopup'),t.setAttribute('placeholder','Chatpopup')),this.sE?t.setAttribute('type','password'):t.setAttribute('type',this.V_()?'password':'text'),t.setAttribute('autofocus','autofocus'),t.setAttribute('spellcheck','false'),t.setAttribute('autocomplete','off'),t.setAttribute('style',`position: fixed; left: ${s}px; top: ${h}px; width: 1px; height: 1px; opacity: 0;`),document.body.appendChild(t),t.focus(),t.click(),this.sE&&(t.oninput=t=>{if(!(t instanceof InputEvent))return;const i=t,s=i.data;null!==s&&'insertText'===i.inputType&&this.onkeydown(new KeyboardEvent('keydown',{key:s,code:s}))}),t.onkeydown=t=>{this.sE&&'Enter'!==t.key&&'Backspace'!==t.key||this.onkeydown(new KeyboardEvent('keydown',{key:t.key,code:t.key}))},t.onkeyup=t=>{this.sE&&'Enter'!==t.key&&'Backspace'!==t.key||this.onkeyup(new KeyboardEvent('keyup',{key:t.key,code:t.key}))},t.onfocus=t=>{this.input?.parentNode?.removeChild(this.input),this.input=null,this.onfocus(t)},this.input=t,void(this.O_=!1)}const e=t.timeStamp>=this.time+500,n=Math.abs(this.L_-this.k_)>16||Math.abs(this.R_-this.x_)>16;e&&!n?(this.O_=!0,this.onmousedown(new MouseEvent('mousedown',{buttons:2}))):(this.hf=0,this.O_=!1)};ontouchmove=t=>{if(!this.P_||!this.O_)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.k_=0|i.screenX,this.x_=0|i.screenY,this.b_&&-1===this.Po()?(this.S_-this.k_>0?this.rotate(2):this.S_-this.k_<0&&this.rotate(0),this.M_-this.x_>0?this.rotate(3):this.M_-this.x_<0&&this.rotate(1)):(this.v_||-1!==this.Po())&&this.onmousedown(new MouseEvent('mousedown',{buttons:1})),this.S_=this.k_,this.M_=this.x_};get P_(){return['Android','webOS','iPhone','iPad','iPod','BlackBerry','Windows Phone'].some((t=>navigator.userAgent.includes(t)))}get sE(){return['Android'].some((t=>navigator.userAgent.includes(t)))}get H_(){return['Capacitor'].some((t=>navigator.userAgent.includes(t)))}Q_=()=>this.ac&&this.xl>=8&&this.xl<=520&&this.Dl>=11&&this.Dl<=345;W_=()=>this.ac&&-1===this.No()&&!this.xo()&&!this.Do()&&this.xl>=11&&this.xl<=506&&this.Dl>=449&&this.Dl<=482;iE=()=>this.ac&&(this.xo()||this.Do())&&this.xl>=11&&this.xl<=506&&this.Dl>=383&&this.Dl<=482;tE=()=>this.ac&&this.xl>=562&&this.xl<=752&&this.Dl>=231&&this.Dl<=492;Y_=()=>!this.ac&&2===this.ko()&&this.xl>=301&&this.xl<=562&&this.Dl>=262&&this.Dl<=279;V_=()=>!this.ac&&2===this.ko()&&this.xl>=301&&this.xl<=562&&this.Dl>=279&&this.Dl<=296;rotate=t=>{0===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowRight',code:'ArrowRight'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowLeft',code:'ArrowLeft'}))):1===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowDown',code:'ArrowDown'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowUp',code:'ArrowUp'}))):2===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowLeft',code:'ArrowLeft'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowRight',code:'ArrowRight'}))):3===t&&(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowUp',code:'ArrowUp'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowDown',code:'ArrowDown'})))};hE=()=>null!==document.fullscreenElement;G_=t=>{if(this.hE()){const i=t.target.getBoundingClientRect(),s=window.innerHeight/l.D_.height,h=(window.innerWidth-l.D_.width*s)/2;this.xl=0|this.eE(t.clientX-i.left-h,0,l.D_.width*s,0,789),this.Dl=0|this.eE(t.clientY-i.top,0,l.D_.height*s,0,532)}else{const i=l.D_.getBoundingClientRect(),s=l.D_.width/i.width,h=l.D_.height/i.height;this.xl=(t.clientX-i.left)*s|0,this.Dl=(t.clientY-i.top)*h|0}this.xl<0&&(this.xl=0),this.Dl<0&&(this.Dl=0),this.xl>789&&(this.xl=789),this.Dl>532&&(this.Dl=532)};eE=(t,i,s,h,e)=>(t-i)*(e-h)/(s-i)+h}},2595:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1069);class e{static enabled=!1;static nE=null;static rE=null;static oE=0;static lE=0;static aE=0;static cE=0;static fE=0;static Fy=()=>{this.nE=h.A.Ut(1),this.rE=null,this.oE=performance.now(),this.enabled=!0};static Wc=()=>{this.enabled=!1,this.nE=null};static flush=()=>{let t=null;return this.rE&&this.enabled&&(t=this.rE),this.rE=null,t};static stop=()=>{let t=null;return this.nE&&this.nE.Fc>0&&this.enabled&&(t=this.nE),this.Wc(),t};static K_=(t,i,s)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;this.lE++;const h=performance.now();let e=(h-this.oE)/10|0;e>250&&(e=250),this.oE=h,this.uE(5),1===s?this.nE?.p1(1):this.nE?.p1(2),this.nE?.p1(e),this.nE?.p3(t+(i<<10))};static X_=t=>{if(!this.enabled)return;this.lE++;const i=performance.now();let s=(i-this.oE)/10|0;s>250&&(s=250),this.oE=i,this.uE(2),1===t?this.nE?.p1(3):this.nE?.p1(4),this.nE?.p1(s)};static Z_=(t,i)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;const s=performance.now();if(s-this.aE>=50){this.aE=s,this.lE++;let h=(s-this.oE)/10|0;h>250&&(h=250),this.oE=s,t-this.cE<8&&t-this.cE>=-8&&i-this.fE<8&&i-this.fE>=-8?(this.uE(3),this.nE?.p1(5),this.nE?.p1(h),this.nE?.p1(t+(i-this.fE+8<<4)+8-this.cE)):t-this.cE<128&&t-this.cE>=-128&&i-this.fE<128&&i-this.fE>=-128?(this.uE(4),this.nE?.p1(6),this.nE?.p1(h),this.nE?.p1(t+128-this.cE),this.nE?.p1(i+128-this.fE)):(this.uE(5),this.nE?.p1(7),this.nE?.p1(h),this.nE?.p3(t+(i<<10))),this.cE=t,this.fE=i}};static U_=t=>{if(!this.enabled)return;this.lE++;const i=performance.now();let s=(i-this.oE)/10|0;s>250&&(s=250),this.oE=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.uE(3),this.nE?.p1(8),this.nE?.p1(s),this.nE?.p1(t)};static B_=t=>{if(!this.enabled)return;this.lE++;const i=performance.now();let s=(i-this.oE)/10|0;s>250&&(s=250),this.oE=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.uE(3),this.nE?.p1(9),this.nE?.p1(s),this.nE?.p1(t)};static q_=()=>{if(!this.enabled)return;this.lE++;const t=performance.now();let i=(t-this.oE)/10|0;i>250&&(i=250),this.oE=t,this.uE(2),this.nE?.p1(10),this.nE?.p1(i)};static J_=()=>{if(!this.enabled)return;this.lE++;const t=performance.now();let i=(t-this.oE)/10|0;i>250&&(i=250),this.oE=t,this.uE(2),this.nE?.p1(11),this.nE?.p1(i)};static z_=()=>{if(!this.enabled)return;this.lE++;const t=performance.now();let i=(t-this.oE)/10|0;i>250&&(i=250),this.oE=t,this.uE(2),this.nE?.p1(12),this.nE?.p1(i)};static j_=()=>{if(!this.enabled)return;this.lE++;const t=performance.now();let i=(t-this.oE)/10|0;i>250&&(i=250),this.oE=t,this.uE(2),this.nE?.p1(13),this.nE?.p1(i)};static uE=t=>{if(this.nE&&this.nE.Fc+t>=500){const t=this.nE;this.nE=h.A.Ut(1),this.rE=t}}}},9091:(t,i,s)=>{s.d(i,{c:()=>e,g:()=>h});const h=['F11','F12'],e={'Backspace':{code:8,ch:8},'Enter':{code:10,ch:10},'Shift':{code:16,ch:65535},'Escape':{code:27,ch:27},'Tab':{code:9,ch:9},'CapsLock':{code:20,ch:65535},' ':{code:32,ch:32},'Control':{code:17,ch:65535},'Alt':{code:18,ch:65535},'Meta':{code:524,ch:65535},'ArrowLeft':{code:37,ch:65535},'ArrowRight':{code:39,ch:65535},'ArrowUp':{code:38,ch:65535},'ArrowDown':{code:40,ch:65535},'Insert':{code:155,ch:65535},'Home':{code:36,ch:65535},'PageUp':{code:33,ch:65535},'Delete':{code:127,ch:127},'End':{code:35,ch:65535},'PageDown':{code:34,ch:65535},'`':{code:192,ch:96},'~':{code:192,ch:126},'!':{code:49,ch:33},'@':{code:50,ch:64},'#':{code:51,ch:35},'$':{code:52,ch:36},'%':{code:53,ch:37},'^':{code:54,ch:94},'&':{code:55,ch:38},'*':{code:56,ch:42},'(':{code:57,ch:40},')':{code:48,ch:41},'-':{code:45,ch:45},'_':{code:45,ch:95},'=':{code:61,ch:61},'+':{code:61,ch:43},'[':{code:91,ch:91},'{':{code:91,ch:123},']':{code:93,ch:93},'}':{code:93,ch:125},'\\':{code:92,ch:92},'|':{code:92,ch:124},';':{code:59,ch:59},':':{code:59,ch:58},"'":{code:222,ch:39},'"':{code:222,ch:34},',':{code:44,ch:44},'<':{code:44,ch:60},'.':{code:46,ch:46},'>':{code:46,ch:62},'/':{code:47,ch:47},'?':{code:47,ch:63},'F1':{code:112,ch:65535},'F2':{code:113,ch:65535},'F3':{code:114,ch:65535},'F4':{code:115,ch:65535},'F5':{code:116,ch:65535},'F6':{code:117,ch:65535},'F7':{code:118,ch:65535},'F8':{code:119,ch:65535},'F9':{code:120,ch:65535},'F10':{code:121,ch:65535},'F11':{code:122,ch:65535},'F12':{code:123,ch:65535},0:{code:48,ch:48},1:{code:49,ch:49},2:{code:50,ch:50},3:{code:51,ch:51},4:{code:52,ch:52},5:{code:53,ch:53},6:{code:54,ch:54},7:{code:55,ch:55},8:{code:56,ch:56},9:{code:57,ch:57},'a':{code:65,ch:97},'b':{code:66,ch:98},'c':{code:67,ch:99},'d':{code:68,ch:100},'e':{code:69,ch:101},'f':{code:70,ch:102},'g':{code:71,ch:103},'h':{code:72,ch:104},'i':{code:73,ch:105},'j':{code:74,ch:106},'k':{code:75,ch:107},'l':{code:76,ch:108},'m':{code:77,ch:109},'n':{code:78,ch:110},'o':{code:79,ch:111},'p':{code:80,ch:112},'q':{code:81,ch:113},'r':{code:82,ch:114},'s':{code:83,ch:115},'t':{code:84,ch:116},'u':{code:85,ch:117},'v':{code:86,ch:118},'w':{code:87,ch:119},'x':{code:88,ch:120},'y':{code:89,ch:121},'z':{code:90,ch:122},'A':{code:65,ch:65},'B':{code:66,ch:66},'C':{code:67,ch:67},'D':{code:68,ch:68},'E':{code:69,ch:69},'F':{code:70,ch:70},'G':{code:71,ch:71},'H':{code:72,ch:72},'I':{code:73,ch:73},'J':{code:74,ch:74},'K':{code:75,ch:75},'L':{code:76,ch:76},'M':{code:77,ch:77},'N':{code:78,ch:78},'O':{code:79,ch:79},'P':{code:80,ch:80},'Q':{code:81,ch:81},'R':{code:82,ch:82},'S':{code:83,ch:83},'T':{code:84,ch:84},'U':{code:85,ch:85},'V':{code:86,ch:86},'W':{code:87,ch:87},'X':{code:88,ch:88},'Y':{code:89,ch:89},'Z':{code:90,ch:90}}},1120:(t,i,s)=>{s.d(i,{A:()=>c});var h=s(1069),e=s(8665),n=s(2679),r=s(2511),o=s(3819),l=s(3867),a=s(8950);class c{static Ro=[];static dE=null;static So=null;static Cl=0;static wE=1;static Ol=2;static Wl=3;static Vl=4;static ia=5;static ea=6;static ua=7;static hm=1;static om=2;static lm=3;static am=4;static fm=5;static Zl=6;static Aa=1;static ya=100;static pa=101;static ma=200;static Kw=201;static Xw=202;static Ia=203;static zw=205;static qw=300;static AE=301;static yE=302;static pE=303;static mE=304;static IE=305;static _E=306;static EE=307;static gE=308;static CE=309;static TE=310;static OE=311;static bE=312;static $w=313;static Jw=314;static vE=315;static LE=316;static RE=317;static SE=318;static ME=319;static kE=320;static xE=321;static DE=322;static Qw=323;static Da=324;static Na=325;static tA=326;static Oa=327;static _a=401;static Ea=500;static jw=501;static Zw=502;static Ta=503;static Pa=600;static sA=601;static NE=602;static PE=603;static FE=604;static UE=605;static BE=606;static GE=607;static HE=608;static WE=609;static YE=610;static VE=611;static hA=612;static Fa=613;static Ua=650;static Ha=651;static Wa=652;static Ya=653;static Va=654;static Ba=655;static ec=(t,i,s)=>{this.dE=new n.A(5e4),this.So=new n.A(5e4);const e=new h.A(t.read('data'));let r=-1;for(e.Fc+=2;e.Fc<e.length;){let t=e.KA;65535===t&&(r=e.KA,t=e.KA);const h=this.Ro[t]=new c;h.id=t,h.Nd=r,h.type=e.ZA,h.jl=e.ZA,h.El=e.KA,h.width=e.KA,h.height=e.KA,h.Jp=e.ZA,0===h.Jp?h.Jp=-1:h.Jp=(h.Jp-1<<8)+e.ZA;const n=e.ZA;if(n>0){h.$o=new Uint8Array(n),h.Qo=new Uint16Array(n);for(let t=0;t<n;t++)h.$o[t]=e.ZA,h.Qo[t]=e.KA}const o=e.ZA;if(o>0){h.scripts=new l.ds(o,null);for(let t=0;t<o;t++){const i=e.KA,s=new Uint16Array(i);h.scripts[t]=s;for(let t=0;t<i;t++)s[t]=e.KA}}if(h.type===c.Cl){h.scroll=e.KA,h.hide=1===e.ZA;const t=e.ZA;h.ll=new Array(t),h.pl=new Array(t),h.ml=new Array(t);for(let i=0;i<t;i++)h.ll[i]=e.KA,h.pl[i]=e.tp,h.ml[i]=e.tp}if(h.type===c.wE&&(e.Fc+=3),h.type===c.Ol){h.Ll=new Int32Array(h.width*h.height),h.Rl=new Int32Array(h.width*h.height),h.draggable=1===e.ZA,h.Qp=1===e.ZA,h.im=1===e.ZA,h.Sl=e.ZA,h.Ml=e.ZA,h.bl=new Int16Array(20),h.vl=new Int16Array(20),h.Hl=new l.ds(20,null);for(let t=0;t<20;t++)if(1===e.ZA){h.bl[t]=e.tp,h.vl[t]=e.tp;const s=e.ly;if(s.length>0){const e=s.lastIndexOf(',');h.Hl[t]=this.KE(i,s.substring(0,e),parseInt(s.substring(e+1),10))}}h.sm=new l.ds(5,null);for(let t=0;t<5;t++){const i=e.ly;h.sm[t]=i,0===i.length&&(h.sm[t]=null)}}if(h.type===c.Wl&&(h.fill=1===e.ZA),h.type===c.Vl||h.type===c.wE){h.$l=1===e.ZA;const t=e.ZA;s&&(h.font=s[t]),h.Ql=1===e.ZA}if(h.type===c.Vl&&(h.text=e.ly,h.zl=e.ly),h.type!==c.wE&&h.type!==c.Wl&&h.type!==c.Vl||(h.Yl=e.Ko),h.type!==c.Wl&&h.type!==c.Vl||(h.Xl=e.Ko,h.Kl=e.Ko),h.type===c.ia){const t=e.ly;if(t.length>0){const s=t.lastIndexOf(',');h.ha=this.KE(i,t.substring(0,s),parseInt(t.substring(s+1),10))}const s=e.ly;if(s.length>0){const t=s.lastIndexOf(',');h.sa=this.KE(i,s.substring(0,t),parseInt(s.substring(t+1),10))}}if(h.type===c.ea){const t=e.ZA;0!==t&&(h.model=this.la((t-1<<8)+e.ZA));const i=e.ZA;0!==i&&(h.XE=this.la((i-1<<8)+e.ZA)),h.al=e.ZA,0===h.al?h.al=-1:h.al=(h.al-1<<8)+e.ZA,h.cl=e.ZA,0===h.cl?h.cl=-1:h.cl=(h.cl-1<<8)+e.ZA,h.zoom=e.KA,h.oa=e.KA,h.fa=e.KA}if(h.type===c.ua){h.Ll=new Int32Array(h.width*h.height),h.Rl=new Int32Array(h.width*h.height),h.$l=1===e.ZA;const t=e.ZA;s&&(h.font=s[t]),h.Ql=1===e.ZA,h.Yl=e.Ko,h.Sl=e.tp,h.Ml=e.tp,h.Qp=1===e.ZA,h.sm=new l.ds(5,null);for(let t=0;t<5;t++){const i=e.ly;h.sm[t]=i,0===i.length&&(h.sm[t]=null)}}h.jl!==c.om&&h.type!==c.Ol||(h._w=e.ly,h.action=e.ly,h.Iw=e.KA),h.jl!==c.hm&&h.jl!==c.am&&h.jl!==c.fm&&h.jl!==c.Zl||(h.rm=e.ly,0===h.rm.length&&(h.jl===c.hm?h.rm='Ok':h.jl===c.am||h.jl===c.fm?h.rm='Select':h.jl===c.Zl&&(h.rm='Continue')))}this.dE=null,this.So=null};static KE=(t,i,s)=>{const h=o.A.zE(i)<<8n|BigInt(s);if(this.dE){const t=this.dE.get(h);if(t)return t}let e;try{e=r.A.za(t,i,s),this.dE?.put(h,e)}catch(t){return null}return e};static la=t=>{if(this.So){const i=this.So.get(BigInt(t));if(i)return i}const i=e.A.model(t);return this.So?.put(BigInt(t),i),i};id=-1;Nd=-1;type=-1;jl=-1;El=0;width=0;height=0;Jp=-1;$o=null;Qo=null;scripts=null;scroll=0;hide=!1;draggable=!1;Qp=!1;im=!1;Sl=0;Ml=0;bl=null;vl=null;Hl=null;sm=null;fill=!1;$l=!1;font=null;Ql=!1;text=null;zl=null;Yl=0;Xl=0;Kl=0;ha=null;sa=null;model=null;XE=null;al=-1;cl=-1;zoom=0;oa=0;fa=0;_w=null;action=null;Iw=-1;rm=null;ll=null;pl=null;ml=null;x=0;y=0;Tl=0;Ll=null;Rl=null;ul=0;fl=0;la(t,i,s){let h=this.model;if(s&&(h=this.XE),!h)return null;if(-1===t&&-1===i&&!h.jE)return h;const n=e.A.ZE(h,!0,!0,!1);return-1===t&&-1===i||n.Ma(),-1!==t&&n.ka(t),-1!==i&&n.ka(i),n.xa(64,768,-50,-10,-50,!0),n}qE(){if(this.Nd===this.id)return this.x;let t=c.Ro[this.Nd];if(!t.ll||!t.pl||!t.ml)return this.x;let i=t.ll.indexOf(this.id);if(-1===i)return this.x;let s=t.pl[i];for(;t.Nd!==t.id;){const h=c.Ro[t.Nd];h.ll&&h.pl&&h.ml&&(i=h.ll.indexOf(t.id),-1!==i&&(s+=h.pl[i])),t=h}return s}$E(){if(this.Nd===this.id)return this.y;let t=c.Ro[this.Nd];if(!t.ll||!t.pl||!t.ml)return this.y;let i=t.ll.indexOf(this.id);if(-1===i)return this.y;let s=t.ml[i];for(;t.Nd!==t.id;){const h=c.Ro[t.Nd];h.ll&&h.pl&&h.ml&&(i=h.ll.indexOf(t.id),-1!==i&&(s+=h.ml[i])),t=h}return s}outline(t){const i=this.qE(),s=this.$E();a.A.Il(i,s,this.width,this.height,t)}move(t,i){if(this.Nd===this.id)return;this.x=0,this.y=0;const s=c.Ro[this.Nd];if(s.ll&&s.pl&&s.ml){const h=s.ll.indexOf(this.id);-1!==h&&(s.pl[h]=t,s.ml[h]=i)}}delete(){if(this.Nd===this.id)return;const t=c.Ro[this.Nd];if(t.ll&&t.pl&&t.ml){const i=t.ll.indexOf(this.id);-1!==i&&(t.ll.splice(i,1),t.pl.splice(i,1),t.ml.splice(i,1))}}}},6333:(t,i,s)=>{s.d(i,{$:()=>h});class h{id;JE=null;constructor(t){this.id=t}QE(t){for(;;){const i=t.ZA;if(0===i)break;this.decode(i,t)}return this}}},2164:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(6333);class n extends e.${static count=0;static Ro=[];static ec=t=>{const i=new h.A(t.read('flo.dat'));this.count=i.KA;for(let t=0;t<this.count;t++)this.Ro[t]=new n(t).QE(i)};static tg=(t,i,s)=>(s>179&&(i=i/2|0),s>192&&(i=i/2|0),s>217&&(i=i/2|0),s>243&&(i=i/2|0),(t/4<<10)+(i/32<<7)+(s/2|0));static ig=(t,i)=>-1===t?12345678:((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);static sg=(t,i)=>-2===t?12345678:-1===t?(i<0?i=0:i>127&&(i=127),127-i):((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);hg=0;texture=-1;eg=!1;ng=!0;rg=0;og=0;lg=0;ag=0;cg=0;fg=0;decode(t,i){1===t?(this.hg=i.ug,this.setColor(this.hg)):2===t?this.texture=i.ZA:3===t?this.eg=!0:5===t?this.ng=!1:6===t?this.JE=i.ly:console.log('Error unrecognised config code: ',t)}setColor(t){const i=(t>>16&255)/256,s=(t>>8&255)/256,h=(255&t)/256;let e=i;s<i&&(e=s),h<e&&(e=h);let r=i;s>i&&(r=s),h>r&&(r=h);let o=0,l=0;const a=(e+r)/2;e!==r&&(a<.5&&(l=(r-e)/(r+e)),a>=.5&&(l=(r-e)/(2-r-e)),i===r?o=(s-h)/(r-e):s===r?o=(h-i)/(r-e)+2:h===r&&(o=(i-s)/(r-e)+4)),o/=6,this.rg=256*o|0,this.og=256*l|0,this.lg=256*a|0,this.og<0?this.og=0:this.og>255&&(this.og=255),this.lg<0?this.lg=0:this.lg>255&&(this.lg=255),this.ag=a>.5?(1-a)*l*512|0:a*l*512|0,this.ag<1&&(this.ag=1),this.cg=o*this.ag|0;let c=this.rg+(16*Math.random()|0)-8;c<0?c=0:c>255&&(c=255);let f=this.og+(48*Math.random()|0)-24;f<0?f=0:f>255&&(f=255);let u=this.lg+(48*Math.random()|0)-24;u<0?u=0:u>255&&(u=255),this.fg=n.tg(c,f,u)}}},8317:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(1069),e=s(6333),n=s(8665),r=s(3867);class o extends e.${static count=0;static Ro=[];static ec=t=>{const i=new h.A(t.read('idk.dat'));this.count=i.KA;for(let t=0;t<this.count;t++)this.Ro[t]=new o(t).QE(i)};type=-1;dg=null;wg=new Int32Array(5).fill(-1);Ag=new Int32Array(6);yg=new Int32Array(6);disable=!1;decode(t,i){if(1===t)this.type=i.ZA;else if(2===t){const t=i.ZA;this.dg=new Int32Array(t);for(let s=0;s<t;s++)this.dg[s]=i.KA}else if(3===t)this.disable=!0;else if(t>=40&&t<50)this.Ag[t-40]=i.KA;else if(t>=50&&t<60)this.yg[t-50]=i.KA;else{if(!(t>=60&&t<70))throw new Error(`Unrecognized idk config code: ${t}`);this.wg[t-60]=i.KA}}la(){if(!this.dg)return null;const t=new r.ds(this.dg.length,null);for(let i=0;i<this.dg.length;i++)t[i]=n.A.model(this.dg[i]);let i;i=1===t.length?t[0]:n.A.ba(t,t.length);for(let t=0;t<6&&0!==this.Ag[t];t++)i?.va(this.Ag[t],this.yg[t]);return i}ey(){let t=0;const i=new r.ds(5,null);for(let s=0;s<5;s++)-1!==this.wg[s]&&(i[t++]=n.A.model(this.wg[s]));const s=n.A.ba(i,t);for(let t=0;t<6&&0!==this.Ag[t];t++)s.va(this.Ag[t],this.yg[t]);return s}}},5637:(t,i,s)=>{s.d(i,{A:()=>c});var h=s(6333),e=s(1069),n=s(2679),r=s(8665),o=s(1023),l=s(6169),a=s(3867);class c extends h.${static count=0;static cache=null;static pg=null;static mg=null;static Ig=0;static tu=new n.A(500);static iu=new n.A(30);static ec=t=>{this.pg=new e.A(t.read('loc.dat'));const i=new e.A(t.read('loc.idx'));this.count=i.KA,this.mg=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.mg[t]=s,s+=i.KA;this.cache=new a.ds(10,null);for(let t=0;t<10;t++)this.cache[t]=new c(-1)};static get=t=>{if(!this.cache||!this.mg||!this.pg)throw new Error('LocType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.Ig=(this.Ig+1)%10;const i=this.cache[this.Ig];return this.pg.Fc=this.mg[t],i.id=t,i.reset(),i.QE(this.pg),i._g||(i._g=new Int32Array(1)),-1===i.Eg&&i._g&&(i.active=i._g.length>0&&i._g[0]===o.A.rA.id,i.wm&&(i.active=!0)),i};static bo=()=>{this.tu=null,this.iu=null,this.mg=null,this.cache=null,this.pg=null};dg=null;_g=null;name=null;sw=null;Ag=null;yg=null;width=1;length=1;NA=!0;PA=!0;active=!1;Eg=-1;gg=!1;Cg=!1;ng=!1;al=-1;Tg=!1;Og=16;bg=0;vg=0;wm=null;yd=-1;Cd=-1;Lg=!1;Rg=!0;Sg=128;Mg=128;kg=128;aA=0;xg=0;Dg=0;Ng=0;Pg=!1;decode(t,i){if(1===t){const t=i.ZA;this.dg=new Int32Array(t),this._g=new Int32Array(t);for(let s=0;s<t;s++)this.dg[s]=i.KA,this._g[s]=i.ZA}else if(2===t)this.name=i.ly;else if(3===t)this.sw=i.ly;else if(14===t)this.width=i.ZA;else if(15===t)this.length=i.ZA;else if(17===t)this.NA=!1;else if(18===t)this.PA=!1;else if(19===t)this.Eg=i.ZA,1===this.Eg&&(this.active=!0);else if(21===t)this.gg=!0;else if(22===t)this.Cg=!0;else if(23===t)this.ng=!0;else if(24===t)this.al=i.KA,65535===this.al&&(this.al=-1);else if(25===t)this.Tg=!0;else if(28===t)this.Og=i.ZA;else if(29===t)this.bg=i.zA;else if(39===t)this.vg=i.zA;else if(t>=30&&t<39)this.wm||(this.wm=new a.ds(5,null)),this.wm[t-30]=i.ly,'hidden'===this.wm[t-30]?.toLowerCase()&&(this.wm[t-30]=null);else if(40===t){const t=i.ZA;this.Ag=new Uint16Array(t),this.yg=new Uint16Array(t);for(let s=0;s<t;s++)this.Ag[s]=i.KA,this.yg[s]=i.KA}else 60===t?this.yd=i.KA:62===t?this.Lg=!0:64===t?this.Rg=!1:65===t?this.Sg=i.KA:66===t?this.Mg=i.KA:67===t?this.kg=i.KA:68===t?this.Cd=i.KA:69===t?this.aA=i.ZA:70===t?this.xg=i.tp:71===t?this.Dg=i.tp:72===t?this.Ng=i.tp:73===t&&(this.Pg=!0)}la(t,i,s,h,e,n,o){if(!this._g)return null;let a=-1;for(let i=0;i<this._g.length;i++)if(this._g[i]===t){a=i;break}if(-1===a)return null;const f=BigInt(BigInt(this.id)<<6n)+BigInt(BigInt(a)<<3n)+BigInt(i)+BigInt(BigInt(o)+1n<<32n);let u=c.iu?.get(f);if(u){if((this.gg||this.Cg)&&(u=r.A.Fg(u,this.gg,this.Cg)),this.gg){const t=(s+h+e+n)/4|0;for(let i=0;i<u.Ug;i++){const r=u.Bg[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(u.Gg[i]+64)/128|0);u.Hg[i]+=l-t}u.Wg()}return u}if(!this.dg)return null;if(a>=this.dg.length)return null;let d=this.dg[a];if(-1===d)return null;const w=this.Lg!==i>3;w&&(d+=65536);let A=c.tu?.get(BigInt(d));A||(A=r.A.model(65535&d),w&&A.Yg(),c.tu?.put(BigInt(d),A));const y=128!==this.Sg||128!==this.Mg||128!==this.kg,p=0!==this.xg||0!==this.Dg||0!==this.Ng;let m=r.A.ZE(A,!this.Ag,!this.Tg,i===l.A.bd&&-1===o&&!y&&!p);for(-1!==o&&(m.Ma(),m.ka(o),m.Vg=null,m.Kg=null);i-- >0;)m.Xg();if(this.Ag&&this.yg)for(let t=0;t<this.Ag.length;t++)m.va(this.Ag[t],this.yg[t]);if(y&&m.scale(this.Sg,this.Mg,this.kg),p&&m.translate(this.Dg,this.xg,this.Ng),m.xa(64+(255&this.bg),5*(255&this.vg)+768,-50,-10,-50,!this.Cg),this.NA&&(m.zg=m.jg),c.iu?.put(f,m),(this.gg||this.Cg)&&(m=r.A.Fg(m,this.gg,this.Cg)),this.gg){const t=(s+h+e+n)/4|0;for(let i=0;i<m.Ug;i++){const r=m.Bg[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(m.Gg[i]+64)/128|0);m.Hg[i]+=l-t}m.Wg()}return m}reset(){this.dg=null,this._g=null,this.name=null,this.sw=null,this.Ag=null,this.yg=null,this.width=1,this.length=1,this.NA=!0,this.PA=!0,this.active=!1,this.Eg=-1,this.gg=!1,this.Cg=!1,this.ng=!1,this.al=-1,this.Og=16,this.bg=0,this.vg=0,this.wm=null,this.Tg=!1,this.yd=-1,this.Cd=-1,this.Lg=!1,this.Rg=!0,this.Sg=128,this.Mg=128,this.kg=128,this.aA=0,this.xg=0,this.Dg=0,this.Ng=0,this.Pg=!1}}},6948:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(6333),e=s(1069),n=s(2679),r=s(8665),o=s(3867);class l extends h.${static count=0;static cache=null;static pg=null;static mg=null;static Ig=0;static So=new n.A(30);static ec=t=>{this.pg=new e.A(t.read('npc.dat'));const i=new e.A(t.read('npc.idx'));this.count=i.KA,this.mg=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.mg[t]=s,s+=i.KA;this.cache=new o.ds(20,null);for(let t=0;t<20;t++)this.cache[t]=new l(-1)};static get=t=>{if(!this.cache||!this.mg||!this.pg)throw new Error('NpcType not loaded!!!');for(let i=0;i<20;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.Ig=(this.Ig+1)%20;const i=this.cache[this.Ig]=new l(t);return this.pg.Fc=this.mg[t],i.QE(this.pg),i};static bo=()=>{this.So=null,this.mg=null,this.cache=null,this.pg=null};name=null;sw=null;size=1;dg=null;wg=null;Tg=!1;AI=-1;lI=-1;cI=-1;uI=-1;wI=-1;Ag=null;yg=null;wm=null;Sg=-1;Mg=-1;kg=-1;od=!0;_m=-1;Zg=128;qg=128;decode(t,i){if(1===t){const t=i.ZA;this.dg=new Uint16Array(t);for(let s=0;s<t;s++)this.dg[s]=i.KA}else if(2===t)this.name=i.ly;else if(3===t)this.sw=i.ly;else if(12===t)this.size=i.zA;else if(13===t)this.AI=i.KA;else if(14===t)this.lI=i.KA;else if(16===t)this.Tg=!0;else if(17===t)this.lI=i.KA,this.cI=i.KA,this.uI=i.KA,this.wI=i.KA;else if(t>=30&&t<40)this.wm||(this.wm=new o.ds(5,null)),this.wm[t-30]=i.ly,'hidden'===this.wm[t-30]?.toLowerCase()&&(this.wm[t-30]=null);else if(40===t){const t=i.ZA;this.Ag=new Uint16Array(t),this.yg=new Uint16Array(t);for(let s=0;s<t;s++)this.Ag[s]=i.KA,this.yg[s]=i.KA}else if(60===t){const t=i.ZA;this.wg=new Uint16Array(t);for(let s=0;s<t;s++)this.wg[s]=i.KA}else 90===t?this.Sg=i.KA:91===t?this.Mg=i.KA:92===t?this.kg=i.KA:93===t?this.od=!1:95===t?this._m=i.KA:97===t?this.Zg=i.KA:98===t&&(this.qg=i.KA)}$g(t,i,s){let h=null,e=null;if(l.So&&(e=l.So.get(BigInt(this.id)),!e&&this.dg)){const t=new o.ds(this.dg.length,null);for(let i=0;i<this.dg.length;i++)t[i]=r.A.model(this.dg[i]);if(e=1===t.length?t[0]:r.A.ba(t,t.length),this.Ag&&this.yg)for(let t=0;t<this.Ag.length;t++)e?.va(this.Ag[t],this.yg[t]);e?.Ma(),e?.xa(64,850,-30,-50,-30,!0),e&&l.So.put(BigInt(this.id),e)}return e?(h=r.A.Jg(e,!this.Tg),-1!==t&&-1!==i?h.Qg(t,i,s):-1!==t&&h.ka(t),128===this.Zg&&128===this.qg||h.scale(this.Zg,this.qg,this.Zg),h.tC(),h.Vg=null,h.Kg=null,1===this.size&&(h.iC=!0),h):null}ey(){if(!this.wg)return null;const t=new o.ds(this.wg.length,null);for(let i=0;i<this.wg.length;i++)t[i]=r.A.model(this.wg[i]);let i;if(i=1===t.length?t[0]:r.A.ba(t,t.length),this.Ag&&this.yg)for(let t=0;t<this.Ag.length;t++)i?.va(this.Ag[t],this.yg[t]);return i}}},1302:(t,i,s)=>{s.d(i,{A:()=>u});var h=s(6333),e=s(1069),n=s(2511),r=s(2679),o=s(8665),l=s(4583),a=s(8950),c=s(9298),f=s(3867);class u extends h.${static count=0;static cache=null;static pg=null;static mg=null;static Ig=0;static sC=!0;static So=new r.A(50);static su=new r.A(200);static ec=(t,i)=>{this.sC=i,this.pg=new e.A(t.read('obj.dat'));const s=new e.A(t.read('obj.idx'));this.count=s.KA,this.mg=new Int32Array(this.count);let h=2;for(let t=0;t<this.count;t++)this.mg[t]=h,h+=s.KA;this.cache=new f.ds(10,null);for(let t=0;t<10;t++)this.cache[t]=new u(-1)};static get=t=>{if(!this.cache||!this.mg||!this.pg)throw new Error('ObjType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.Ig=(this.Ig+1)%10;const i=this.cache[this.Ig];return this.pg.Fc=this.mg[t],i.id=t,i.reset(),i.QE(this.pg),-1!==i.hC&&i.eC(),!this.sC&&i.members&&(i.name='Members Object',i.sw="Login to a members' server to use this object.",i.wm=null,i.tm=null),i};static bo=()=>{this.So=null,this.su=null,this.mg=null,this.cache=null,this.pg=null};static kl=(t,i)=>{if(u.su){let s=u.su.get(BigInt(t));if(s&&s.fd!==i&&-1!==s.fd&&(s.sy(),s=null),s)return s}let s=u.get(t);if(s.nC||(i=-1),s.nC&&s.rC&&i>1){let t=-1;for(let h=0;h<10;h++)i>=s.rC[h]&&0!==s.rC[h]&&(t=s.nC[h]);-1!==t&&(s=u.get(t))}const h=new n.A(32,32),e=l.A.na,r=l.A.ra,o=l.A.oc,f=a.A.nc,d=a.A.oC,w=a.A.lC,A=a.A.left,y=a.A.right,p=a.A.top,m=a.A.bottom;l.A.aC=!1,a.A.bind(h.nc,32,32),a.A.fillRect(0,0,32,32,c.A.Bl),l.A.N_();const I=s.vA(1),_=l.A.sin[s.yp]*s.mp>>16,E=l.A.cos[s.yp]*s.mp>>16;I.ca(0,s.pp,s.cC,s.yp,s.fC,_+(I.jg/2|0)+s.uC,E+s.uC);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.nc[t+32*i]&&(t>0&&h.nc[t+32*i-1]>1||i>0&&h.nc[t+32*(i-1)]>1||t<31&&h.nc[t+32*i+1]>1||i<31&&h.nc[t+32*(i+1)]>1)&&(h.nc[t+32*i]=1);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.nc[t+32*i]&&t>0&&i>0&&h.nc[t+32*(i-1)-1]>0&&(h.nc[t+32*i]=3153952);if(-1!==s.hC){const t=this.kl(s.dC,10),i=t.Pl,h=t.fd;t.Pl=32,t.fd=32,t.wC(5,5,22,22),t.Pl=i,t.fd=h}return u.su?.put(BigInt(t),h),a.A.bind(f,d,w),a.A.yl(A,p,y,m),l.A.na=e,l.A.ra=r,l.A.oc=o,l.A.aC=!0,s.da?h.Pl=33:h.Pl=32,h.fd=i,h};model=0;name=null;sw=null;Ag=null;yg=null;mp=2e3;yp=0;pp=0;cC=0;fC=0;uC=0;AC=!1;yC=-1;da=!1;OA=1;members=!1;wm=null;tm=null;pC=-1;mC=-1;IC=0;_C=-1;EC=-1;gC=0;CC=-1;TC=-1;OC=-1;bC=-1;vC=-1;LC=-1;nC=null;rC=null;dC=-1;hC=-1;decode(t,i){if(1===t)this.model=i.KA;else if(2===t)this.name=i.ly;else if(3===t)this.sw=i.ly;else if(4===t)this.mp=i.KA;else if(5===t)this.yp=i.KA;else if(6===t)this.pp=i.KA;else if(7===t)this.fC=i.tp,this.fC>32767&&(this.fC-=65536);else if(8===t)this.uC=i.tp,this.uC>32767&&(this.uC-=65536);else if(9===t)this.AC=!0;else if(10===t)this.yC=i.KA;else if(11===t)this.da=!0;else if(12===t)this.OA=i.Ko;else if(16===t)this.members=!0;else if(23===t)this.pC=i.KA,this.IC=i.zA;else if(24===t)this.mC=i.KA;else if(25===t)this._C=i.KA,this.gC=i.zA;else if(26===t)this.EC=i.KA;else if(t>=30&&t<35)this.wm||(this.wm=new f.ds(5,null)),this.wm[t-30]=i.ly,'hidden'===this.wm[t-30]?.toLowerCase()&&(this.wm[t-30]=null);else if(t>=35&&t<40)this.tm||(this.tm=new f.ds(5,null)),this.tm[t-35]=i.ly;else if(40===t){const t=i.ZA;this.Ag=new Uint16Array(t),this.yg=new Uint16Array(t);for(let s=0;s<t;s++)this.Ag[s]=i.KA,this.yg[s]=i.KA}else 78===t?this.CC=i.KA:79===t?this.TC=i.KA:90===t?this.OC=i.KA:91===t?this.vC=i.KA:92===t?this.bC=i.KA:93===t?this.LC=i.KA:95===t?this.cC=i.KA:97===t?this.dC=i.KA:98===t?this.hC=i.KA:t>=100&&t<110&&(this.nC&&this.rC||(this.nC=new Uint16Array(10),this.rC=new Uint16Array(10)),this.nC[t-100]=i.KA,this.rC[t-100]=i.KA)}RC(t){let i=this.pC;if(1===t&&(i=this._C),-1===i)return null;let s=this.mC,h=this.CC;1===t&&(s=this.EC,h=this.TC);let e=o.A.model(i);if(-1!==s){const t=o.A.model(s);if(-1===h){const i=[e,t];e=o.A.ba(i,2)}else{const i=[e,t,o.A.model(h)];e=o.A.ba(i,3)}}if(0===t&&0!==this.IC&&e.translate(this.IC,0,0),1===t&&0!==this.gC&&e.translate(this.gC,0,0),this.Ag&&this.yg)for(let t=0;t<this.Ag.length;t++)e.va(this.Ag[t],this.yg[t]);return e}ey(t){let i=this.OC;if(1===t&&(i=this.vC),-1===i)return null;let s=this.bC;1===t&&(s=this.LC);let h=o.A.model(i);if(-1!==s){const t=[h,o.A.model(s)];h=o.A.ba(t,2)}if(this.Ag&&this.yg)for(let t=0;t<this.Ag.length;t++)h.va(this.Ag[t],this.yg[t]);return h}vA(t){if(this.nC&&this.rC&&t>1){let i=-1;for(let s=0;s<10;s++)t>=this.rC[s]&&0!==this.rC[s]&&(i=this.nC[s]);if(-1!==i)return u.get(i).vA(1)}if(u.So){const t=u.So.get(BigInt(this.id));if(t)return t}const i=o.A.model(this.model);if(this.Ag&&this.yg)for(let t=0;t<this.Ag.length;t++)i.va(this.Ag[t],this.yg[t]);return i.xa(64,768,-50,-10,-50,!0),i.iC=!0,u.So?.put(BigInt(this.id),i),i}eC(){const t=u.get(this.hC);this.model=t.model,this.mp=t.mp,this.yp=t.yp,this.pp=t.pp,this.cC=t.cC,this.fC=t.fC,this.uC=t.uC,this.Ag=t.Ag,this.yg=t.yg;const i=u.get(this.dC);this.name=i.name,this.members=i.members,this.OA=i.OA;let s='a';const h=(i.name||'').toLowerCase().charAt(0);'a'!==h&&'e'!==h&&'i'!==h&&'o'!==h&&'u'!==h||(s='an'),this.sw=`Swap this note at any bank for ${s} ${i.name}.`,this.da=!0}reset(){this.model=0,this.name=null,this.sw=null,this.Ag=null,this.yg=null,this.mp=2e3,this.yp=0,this.pp=0,this.cC=0,this.fC=0,this.uC=0,this.AC=!1,this.yC=-1,this.da=!1,this.OA=1,this.members=!1,this.wm=null,this.tm=null,this.pC=-1,this.mC=-1,this.IC=0,this._C=-1,this.EC=-1,this.gC=0,this.CC=-1,this.TC=-1,this.OC=-1,this.bC=-1,this.vC=-1,this.LC=-1,this.nC=null,this.rC=null,this.dC=-1,this.hC=-1}}},1312:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(6333),e=s(1069),n=s(6730);class r extends h.${static count=0;static Ro=[];static ec=t=>{const i=new e.A(t.read('seq.dat'));this.count=i.KA;for(let t=0;t<this.count;t++){const s=new r(t).QE(i);0===s.dl&&(s.dl=1,s.frames=new Int16Array(1),s.frames[0]=-1,s.aa=new Int16Array(1),s.aa[0]=-1,s.delay=new Int16Array(1),s.delay[0]=-1),this.Ro[t]=s}};dl=0;frames=null;aa=null;delay=null;wl=-1;s_=null;i_=!1;priority=5;SC=-1;MC=-1;t_=99;duration=0;decode(t,i){if(1===t){this.dl=i.ZA,this.frames=new Int16Array(this.dl),this.aa=new Int16Array(this.dl),this.delay=new Int16Array(this.dl);for(let t=0;t<this.dl;t++)this.frames[t]=i.KA,this.aa[t]=i.KA,65535===this.aa[t]&&(this.aa[t]=-1),this.delay[t]=i.KA,0===this.delay[t]&&(this.delay[t]=n.A.Ro[this.frames[t]].delay),0===this.delay[t]&&(this.delay[t]=1),this.duration+=this.delay[t]}else if(2===t)this.wl=i.KA;else if(3===t){const t=i.ZA;this.s_=new Int32Array(t+1);for(let s=0;s<t;s++)this.s_[s]=i.ZA;this.s_[t]=9999999}else if(4===t)this.i_=!0;else if(5===t)this.priority=i.ZA;else if(6===t)this.SC=i.KA;else if(7===t)this.MC=i.KA;else{if(8!==t)throw new Error(`Unrecognized seq config code: ${t}`);this.t_=i.ZA}}}},8738:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(6333),e=s(1069),n=s(1312),r=s(8665),o=s(2679);class l extends h.${static count=0;static Ro=[];static So=new o.A(30);static ec=t=>{const i=new e.A(t.read('spotanim.dat'));this.count=i.KA;for(let t=0;t<this.count;t++)this.Ro[t]=new l(t).QE(i)};model=0;al=-1;GI=null;Tg=!1;Ag=new Uint16Array(6);yg=new Uint16Array(6);Zg=128;qg=128;orientation=0;bg=0;vg=0;decode(t,i){if(1===t)this.model=i.KA;else if(2===t)this.al=i.KA,n.A.Ro&&(this.GI=n.A.Ro[this.al]);else if(3===t)this.Tg=!0;else if(4===t)this.Zg=i.KA;else if(5===t)this.qg=i.KA;else if(6===t)this.orientation=i.KA;else if(7===t)this.bg=i.ZA;else if(8===t)this.vg=i.ZA;else if(t>=40&&t<50)this.Ag[t-40]=i.KA;else{if(!(t>=50&&t<60))throw new Error(`Unrecognized spotanim config code: ${t}`);this.yg[t-50]=i.KA}}la(){let t=l.So?.get(BigInt(this.id));if(t)return t;t=r.A.model(this.model);for(let i=0;i<6;i++)0!==this.Ag[0]&&t.va(this.Ag[i],this.yg[i]);return l.So?.put(BigInt(this.id),t),t}}},3764:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(6333),e=s(1069);class n extends h.${static count=0;static Ro=[];static kC=[];static xC=0;static ec=t=>{const i=new e.A(t.read('varp.dat'));this.count=i.KA;for(let t=0;t<this.count;t++)this.Ro[t]=new n(t).QE(i)};scope=0;type=0;kC=!1;DC=!0;Xp=0;NC=0;PC=!1;FC=!1;decode(t,i){if(1===t)this.scope=i.ZA;else if(2===t)this.type=i.ZA;else if(3===t)this.kC=!0,n.kC[n.xC++]=this.id;else if(4===t)this.DC=!1;else if(5===t)this.Xp=i.KA;else if(6===t)this.PC=!0;else if(7===t)this.NC=i.Ko;else if(8===t)this.FC=!0;else{if(10!==t)throw new Error(`Error unrecognised config code: ${t}`);this.JE=i.ly}}}},9456:(t,i,s)=>{s.d(i,{A:()=>h});class h{static OPEN=0;static UC=1;static BC=2;static GC=4;static HC=8;static WC=h.UC<<4;static YC=h.BC<<4;static VC=h.GC<<4;static KC=h.HC<<4;static XC=256;static zC=512;static jC=1024;static ZC=2048;static qC=4096;static $C=h.zC<<4;static JC=h.jC<<4;static QC=h.ZC<<4;static tT=h.qC<<4;static iT=h.XC<<9;static sT=524288;static hT=2097152;static eT=h.hT|h.sT;static nT=h.XC|h.eT;static Id=h.BC|h.nT;static pd=h.HC|h.nT;static bm=h.BC|h.GC|h.pd;static _d=h.YC|h.nT;static Lm=h.HC|h.WC|h._d;static md=h.KC|h.nT;static vm=h.UC|h.BC|h.md;static Rm=h.YC|h.VC|h.md;static rT=16777215}},670:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(9456),e=s(6169),n=s(1023),r=s(4909);class o{static xn=4;static Xn=104;static index=(t,i)=>t*o.Xn+i;offsetX;oT;sizeX;sizeZ;flags;constructor(){this.offsetX=0,this.oT=0,this.sizeX=o.Xn,this.sizeZ=o.Xn,this.flags=new Int32Array(this.sizeX*this.sizeZ),this.reset()}reset=()=>{for(let t=0;t<this.sizeX;t++)for(let i=0;i<this.sizeZ;i++){const s=o.index(t,i);0===t||0===i||t===this.sizeX-1||i===this.sizeZ-1?this.flags[s]=h.A.rT:this.flags[s]=h.A.OPEN}};lT=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.oT)]|=h.A.hT};GA=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.oT)]&=~h.A.hT};RA=(t,i,s,n,r,o)=>{let l=h.A.XC;o&&(l|=h.A.iT);const a=t-this.offsetX,c=i-this.oT;if(r===e.A.vd||r===e.A.Rd){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.add(t,i,l)};UA=(t,i,s,n,r,o)=>{let l=h.A.XC;o&&(l|=h.A.iT);const a=t-this.offsetX,c=i-this.oT;if(r===e.A.vd||r===e.A.Rd){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.remove(t,i,l)};aT=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.oT,c=o?h.A.tT:h.A.KC,f=o?h.A.qC:h.A.HC,u=o?h.A.jC:h.A.BC,d=o?h.A.JC:h.A.YC,w=o?h.A.zC:h.A.UC,A=o?h.A.$C:h.A.WC,y=o?h.A.ZC:h.A.GC,p=o?h.A.QC:h.A.VC;s===n.A.Td.id?r===e.A.bd?(this.add(l,a,c),this.add(l-1,a,f)):r===e.A.vd?(this.add(l,a,u),this.add(l,a+1,d)):r===e.A.Ld?(this.add(l,a,f),this.add(l+1,a,c)):r===e.A.Rd&&(this.add(l,a,d),this.add(l,a-1,u)):s===n.A.cT.id||s===n.A.Sd.id?r===e.A.bd?(this.add(l,a,w),this.add(l-1,a+1,A)):r===e.A.vd?(this.add(l,a,y),this.add(l+1,a+1,p)):r===e.A.Ld?(this.add(l,a,A),this.add(l+1,a-1,w)):r===e.A.Rd&&(this.add(l,a,p),this.add(l-1,a-1,y)):s===n.A.Od.id&&(r===e.A.bd?(this.add(l,a,u|c),this.add(l-1,a,f),this.add(l,a+1,d)):r===e.A.vd?(this.add(l,a,u|f),this.add(l,a+1,d),this.add(l+1,a,c)):r===e.A.Ld?(this.add(l,a,d|f),this.add(l+1,a,c),this.add(l,a-1,u)):r===e.A.Rd&&(this.add(l,a,d|c),this.add(l,a-1,u),this.add(l-1,a,f))),o&&this.aT(t,i,s,r,!1)};DA=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.oT,c=o?h.A.tT:h.A.KC,f=o?h.A.qC:h.A.HC,u=o?h.A.jC:h.A.BC,d=o?h.A.JC:h.A.YC,w=o?h.A.zC:h.A.UC,A=o?h.A.$C:h.A.WC,y=o?h.A.ZC:h.A.GC,p=o?h.A.QC:h.A.VC;s===n.A.Td.id?r===e.A.bd?(this.remove(l,a,c),this.remove(l-1,a,f)):r===e.A.vd?(this.remove(l,a,u),this.remove(l,a+1,d)):r===e.A.Ld?(this.remove(l,a,f),this.remove(l+1,a,c)):r===e.A.Rd&&(this.remove(l,a,d),this.remove(l,a-1,u)):s===n.A.cT.id||s===n.A.Sd.id?r===e.A.bd?(this.remove(l,a,w),this.remove(l-1,a+1,A)):r===e.A.vd?(this.remove(l,a,y),this.remove(l+1,a+1,p)):r===e.A.Ld?(this.remove(l,a,A),this.remove(l+1,a-1,w)):r===e.A.Rd&&(this.remove(l,a,p),this.remove(l-1,a-1,y)):s===n.A.Od.id&&(r===e.A.bd?(this.remove(l,a,u|c),this.remove(l-1,a,f),this.remove(l,a+1,d)):r===e.A.vd?(this.remove(l,a,u|f),this.remove(l,a+1,d),this.remove(l+1,a,c)):r===e.A.Ld?(this.remove(l,a,d|f),this.remove(l+1,a,c),this.remove(l,a-1,u)):r===e.A.Rd&&(this.remove(l,a,d|c),this.remove(l,a-1,u),this.remove(l-1,a,f))),o&&this.DA(t,i,s,r,!1)};Cm=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.oT,u=s-this.offsetX,d=r-this.oT,w=o.index(c,f);if(l===n.A.Td.id){if(a===e.A.bd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A._d)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.Id)===h.A.OPEN)return!0}else if(a===e.A.vd){if(c===u&&f===d+1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.pd)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.md)===h.A.OPEN)return!0}else if(a===e.A.Ld){if(c===u+1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A._d)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.Id)===h.A.OPEN)return!0}else if(a===e.A.Rd){if(c===u&&f===d-1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.pd)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.md)===h.A.OPEN)return!0}}else if(l===n.A.Od.id){if(a===e.A.bd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.md)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.Id)===h.A.OPEN)return!0}else if(a===e.A.vd){if(c===u-1&&f===d&&(this.flags[w]&h.A.pd)===h.A.OPEN)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.Id)===h.A.OPEN)return!0}else if(a===e.A.Ld){if(c===u-1&&f===d&&(this.flags[w]&h.A.pd)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A._d)===h.A.OPEN)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1)return!0}else if(a===e.A.Rd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A._d)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.md)===h.A.OPEN)return!0;if(c===u&&f===d-1)return!0}}else if(l===n.A.kd.id){if(c===u&&f===d+1&&(this.flags[w]&h.A.YC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.BC)===h.A.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.HC)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.KC)===h.A.OPEN)return!0}return!1};Tm=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.oT,u=s-this.offsetX,d=r-this.oT,w=o.index(c,f);if(l===n.A.fT.id||l===n.A.uT.id){if(l===n.A.uT.id&&(a=a+2&3),a===e.A.bd){if(c===u+1&&f===d&&(this.flags[w]&h.A.KC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.BC)===h.A.OPEN)return!0}else if(a===e.A.vd){if(c===u-1&&f===d&&(this.flags[w]&h.A.HC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.BC)===h.A.OPEN)return!0}else if(a===e.A.Ld){if(c===u-1&&f===d&&(this.flags[w]&h.A.HC)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.YC)===h.A.OPEN)return!0}else if(a===e.A.Rd){if(c===u+1&&f===d&&(this.flags[w]&h.A.KC)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.YC)===h.A.OPEN)return!0}}else if(l===n.A.dT.id){if(c===u&&f===d+1&&(this.flags[w]&h.A.YC)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.BC)===h.A.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.HC)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.KC)===h.A.OPEN)return!0}return!1};Om=(t,i,s,e,n,l,a)=>{const c=s+n-1,f=e+l-1,u=o.index(t-this.offsetX,i-this.oT);return t>=s&&t<=c&&i>=e&&i<=f||(t===s-1&&i>=e&&i<=f&&(this.flags[u]&h.A.HC)===h.A.OPEN&&(a&r.A.bd)===h.A.OPEN||(t===c+1&&i>=e&&i<=f&&(this.flags[u]&h.A.KC)===h.A.OPEN&&(a&r.A.Ld)===h.A.OPEN||(i===e-1&&t>=s&&t<=c&&(this.flags[u]&h.A.BC)===h.A.OPEN&&(a&r.A.Rd)===h.A.OPEN||i===f+1&&t>=s&&t<=c&&(this.flags[u]&h.A.YC)===h.A.OPEN&&(a&r.A.vd)===h.A.OPEN)))};add=(t,i,s)=>{this.flags[o.index(t,i)]|=s};remove=(t,i,s)=>{this.flags[o.index(t,i)]&=h.A.rT-s}}},4909:(t,i,s)=>{s.d(i,{A:()=>h});class h{static vd=1;static Ld=2;static Rd=4;static bd=8}},6169:(t,i,s)=>{s.d(i,{A:()=>h});class h{static bd=0;static vd=1;static Ld=2;static Rd=3}},5599:(t,i,s)=>{s.d(i,{A:()=>h});class h{static SA=0;static MA=1;static xA=2;static lA=3}},1023:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(5599);class e{static Td=new e(0,h.A.SA);static cT=new e(1,h.A.SA);static Od=new e(2,h.A.SA);static Sd=new e(3,h.A.SA);static VI=new e(4,h.A.MA);static gm=new e(5,h.A.MA);static fT=new e(6,h.A.MA);static uT=new e(7,h.A.MA);static dT=new e(8,h.A.MA);static kd=new e(9,h.A.xA);static rA=new e(10,h.A.xA);static oA=new e(11,h.A.xA);static wT=new e(12,h.A.xA);static AT=new e(13,h.A.xA);static yT=new e(14,h.A.xA);static pT=new e(15,h.A.xA);static mT=new e(16,h.A.xA);static IT=new e(17,h.A.xA);static _T=new e(18,h.A.xA);static ET=new e(19,h.A.xA);static gT=new e(20,h.A.xA);static CT=new e(21,h.A.xA);static lA=new e(22,h.A.lA);static values(){return[this.Td,this.cT,this.IT,this.pT,this.Od,this.yT,this.kd,this.Sd,this.lA,this.wT,this.oA,this.fT,this.gT,this.rA,this.gm,this.AT,this.uT,this.VI,this.mT,this.dT,this.ET,this.CT,this._T]}static of(t){const i=this.values();for(let s=0;s<i.length;s++){const h=i[s];if(h.id===t)return h}throw Error('shape not found')}id;Nd;constructor(t,i){this.id=t,this.Nd=i}}},818:(t,i,s)=>{s.d(i,{A:()=>y});var h=s(670),e=s(2164),n=s(1069),r=s(4583),o=s(3045),l=s(5637),a=s(4197),c=s(1312),f=s(1023),u=s(6169),d=s(9298),w=s(5518),A=s(3867);class y{static TT=Int8Array.of(1,2,4,8);static OT=Uint8Array.of(16,32,64,128);static bT=Int8Array.of(1,0,-1,0);static vT=Int8Array.of(0,-1,0,1);static LT=(17*Math.random()|0)-8;static RT=(33*Math.random()|0)-16;static st=!0;static Dp=0;static ST=!1;static MT=(t,i)=>{let s=this.kT(t+45365,i+91923,4)+(this.kT(t+10294,i+37821,2)-128>>1)+(this.kT(t,i,1)-128>>2)-128;return s=35+(.3*s|0),s<10?s=10:s>60&&(s=60),s};static kT=(t,i,s)=>{const h=t/s|0,e=t&s-1,n=i/s|0,r=i&s-1,o=this.xT(h,n),l=this.xT(h+1,n),a=this.xT(h,n+1),c=this.xT(h+1,n+1),f=this.DT(o,l,e,s),u=this.DT(a,c,e,s);return this.DT(f,u,r,s)};static DT=(t,i,s,h)=>{const e=65536-r.A.cos[1024*s/h|0]>>1;return(t*(65536-e)>>16)+(i*e>>16)};static xT=(t,i)=>((this.NT(t-1,i-1)+this.NT(t+1,i-1)+this.NT(t-1,i+1)+this.NT(t+1,i+1))/16|0)+((this.NT(t-1,i)+this.NT(t+1,i)+this.NT(t,i-1)+this.NT(t,i+1))/8|0)+(this.NT(t,i)/4|0);static NT=(t,i)=>{const s=t+57*i,h=BigInt(s<<13^s);return 255&Number((h*(h*h*15731n+789221n)+1376312589n&0x7fffffffn)>>19n)};static RA=(t,i,s,h,e,n,r,o,d,w,A)=>{const p=e[A][i][s],m=e[A][i+1][s],I=e[A][i+1][s+1],_=e[A][i][s+1],E=p+m+I+_>>2,g=l.A.get(o);let C=i+(s<<7)+(o<<14)+1073741824|0;g.active||(C+=-2147483648),C|=0;const T=(w<<6)+d<<24>>24;if(d===f.A.lA.id)h?.PT(g.la(f.A.lA.id,w,p,m,I,_,-1),t,i,s,E,C,T),g.NA&&g.active&&r?.lT(i,s),-1!==g.al&&n.n_(new a.A(o,t,3,i,s,c.A.Ro[g.al],!0));else if(d===f.A.rA.id||d===f.A.oA.id){const e=g.la(f.A.rA.id,w,p,m,I,_,-1);if(e){let n,r,o=0;d===f.A.oA.id&&(o+=256),w===u.A.vd||w===u.A.Rd?(n=g.length,r=g.width):(n=g.width,r=g.length),h?.RA(t,i,s,E,e,null,C,T,n,r,o)}g.NA&&r?.RA(i,s,g.width,g.length,w,g.PA),-1!==g.al&&n.n_(new a.A(o,t,2,i,s,c.A.Ro[g.al],!0))}else if(d>=f.A.wT.id)h?.RA(t,i,s,E,g.la(d,w,p,m,I,_,-1),null,C,T,1,1,0),g.NA&&r?.RA(i,s,g.width,g.length,w,g.PA),-1!==g.al&&n.n_(new a.A(o,t,2,i,s,c.A.Ro[g.al],!0));else if(d===f.A.Td.id)h?.aT(t,i,s,E,y.TT[w],0,g.la(f.A.Td.id,w,p,m,I,_,-1),null,C,T),g.NA&&r?.aT(i,s,d,w,g.PA),-1!==g.al&&n.n_(new a.A(o,t,0,i,s,c.A.Ro[g.al],!0));else if(d===f.A.cT.id)h?.aT(t,i,s,E,y.OT[w],0,g.la(f.A.cT.id,w,p,m,I,_,-1),null,C,T),g.NA&&r?.aT(i,s,d,w,g.PA),-1!==g.al&&n.n_(new a.A(o,t,0,i,s,c.A.Ro[g.al],!0));else if(d===f.A.Od.id){const e=w+1&3;h?.aT(t,i,s,E,y.TT[w],y.TT[e],g.la(f.A.Od.id,w+4,p,m,I,_,-1),g.la(f.A.Od.id,e,p,m,I,_,-1),C,T),g.NA&&r?.aT(i,s,d,w,g.PA),-1!==g.al&&n.n_(new a.A(o,t,0,i,s,c.A.Ro[g.al],!0))}else if(d===f.A.Sd.id)h?.aT(t,i,s,E,y.OT[w],0,g.la(f.A.Sd.id,w,p,m,I,_,-1),null,C,T),g.NA&&r?.aT(i,s,d,w,g.PA),-1!==g.al&&n.n_(new a.A(o,t,0,i,s,c.A.Ro[g.al],!0));else if(d===f.A.kd.id)h?.RA(t,i,s,E,g.la(d,w,p,m,I,_,-1),null,C,T,1,1,0),g.NA&&r?.RA(i,s,g.width,g.length,w,g.PA),-1!==g.al&&n.n_(new a.A(o,t,2,i,s,c.A.Ro[g.al],!0));else if(d===f.A.VI.id)h?.FT(t,i,s,E,0,0,C,g.la(f.A.VI.id,u.A.bd,p,m,I,_,-1),T,512*w,y.TT[w]),-1!==g.al&&n.n_(new a.A(o,t,1,i,s,c.A.Ro[g.al],!0));else if(d===f.A.gm.id){let e=16;if(h){const n=h.Ed(t,i,s);n>0&&(e=l.A.get(n>>14&32767).Og)}h?.FT(t,i,s,E,y.bT[w]*e,y.vT[w]*e,C,g.la(f.A.VI.id,u.A.bd,p,m,I,_,-1),T,512*w,y.TT[w]),-1!==g.al&&n.n_(new a.A(o,t,1,i,s,c.A.Ro[g.al],!0))}else d===f.A.fT.id?(h?.FT(t,i,s,E,0,0,C,g.la(f.A.VI.id,u.A.bd,p,m,I,_,-1),T,w,256),-1!==g.al&&n.n_(new a.A(o,t,1,i,s,c.A.Ro[g.al],!0))):d===f.A.uT.id?(h?.FT(t,i,s,E,0,0,C,g.la(f.A.VI.id,u.A.bd,p,m,I,_,-1),T,w,512),-1!==g.al&&n.n_(new a.A(o,t,1,i,s,c.A.Ro[g.al],!0))):d===f.A.dT.id&&(h?.FT(t,i,s,E,0,0,C,g.la(f.A.VI.id,u.A.bd,p,m,I,_,-1),T,w,768),-1!==g.al&&n.n_(new a.A(o,t,1,i,s,c.A.Ro[g.al],!0)))};xI;DI;Wn;Yn;UT;BT;GT;HT;WT;YT;VT;KT;XT;zT;jT;ZT;constructor(t,i,s,e){this.xI=t,this.DI=i,this.Wn=s,this.Yn=e,this.UT=new A.qa(h.A.xn,t,i),this.BT=new A.qa(h.A.xn,t,i),this.GT=new A.qa(h.A.xn,t,i),this.HT=new A.qa(h.A.xn,t,i),this.ZT=new A.$a(h.A.xn,t+1,i+1),this.WT=new A.qa(h.A.xn,t+1,i+1),this.YT=new A.Kn(t+1,i+1),this.VT=new Int32Array(i),this.KT=new Int32Array(i),this.XT=new Int32Array(i),this.zT=new Int32Array(i),this.jT=new Int32Array(i)}Hp=(t,i)=>{for(let t=0;t<h.A.xn;t++)for(let s=0;s<h.A.Xn;s++)for(let e=0;e<h.A.Xn;e++)if(!(1&~this.Yn[t][s][e])){let h=t;2&~this.Yn[1][s][e]||h--,h>=0&&i[h]?.lT(s,e)}y.LT+=(5*Math.random()|0)-2,y.LT<-8?y.LT=-8:y.LT>8&&(y.LT=8),y.RT+=(5*Math.random()|0)-2,y.RT<-16?y.RT=-16:y.RT>16&&(y.RT=16);for(let i=0;i<h.A.xn;i++){const s=this.WT[i],h=96,n=-50,o=-10,l=-50,a=768*(0|Math.sqrt(n*n+o*o+l*l))>>8;for(let t=1;t<this.DI-1;t++)for(let e=1;e<this.xI-1;e++){const r=this.Wn[i][e+1][t]-this.Wn[i][e-1][t],c=this.Wn[i][e][t+1]-this.Wn[i][e][t-1],f=0|Math.sqrt(r*r+c*c+65536),u=h+((n*((r<<8)/f|0)+o*(65536/f|0)+l*((c<<8)/f|0))/a|0),d=(s[e-1][t]>>2)+(s[e+1][t]>>3)+(s[e][t-1]>>2)+(s[e][t+1]>>3)+(s[e][t]>>1);this.YT[e][t]=u-d}for(let t=0;t<this.DI;t++)this.VT[t]=0,this.KT[t]=0,this.XT[t]=0,this.zT[t]=0,this.jT[t]=0;for(let s=-5;s<this.xI+5;s++){for(let t=0;t<this.DI;t++){const h=s+5;let n;if(h>=0&&h<this.xI){const s=255&this.UT[i][h][t];if(s>0){const i=e.A.Ro[s-1];this.VT[t]+=i.cg,this.KT[t]+=i.og,this.XT[t]+=i.lg,this.zT[t]+=i.ag,n=this.jT[t]++}}const r=s-5;if(r>=0&&r<this.xI){const s=255&this.UT[i][r][t];if(s>0){const i=e.A.Ro[s-1];this.VT[t]-=i.cg,this.KT[t]-=i.og,this.XT[t]-=i.lg,this.zT[t]-=i.ag,n=this.jT[t]--}}}if(s>=1&&s<this.xI-1){let h=0,n=0,o=0,l=0,a=0;for(let c=-5;c<this.DI+5;c++){const f=c+5;f>=0&&f<this.DI&&(h+=this.VT[f],n+=this.KT[f],o+=this.XT[f],l+=this.zT[f],a+=this.jT[f]);const A=c-5;if(A>=0&&A<this.DI&&(h-=this.VT[A],n-=this.KT[A],o-=this.XT[A],l-=this.zT[A],a-=this.jT[A]),c>=1&&c<this.DI-1&&(!y.st||!(16&this.Yn[i][s][c])&&this.qT(i,s,c)===y.Dp)){const f=255&this.UT[i][s][c],A=255&this.BT[i][s][c];if(f>0||A>0){const p=this.Wn[i][s][c],m=this.Wn[i][s+1][c],I=this.Wn[i][s+1][c+1],_=this.Wn[i][s][c+1],E=this.YT[s][c],g=this.YT[s+1][c],C=this.YT[s+1][c+1],T=this.YT[s][c+1];let O=-1,b=-1;if(f>0){const t=256*h/l|0,i=n/a|0;let s=o/a|0;O=e.A.tg(t,i,s);const r=t+y.LT&255;s+=y.RT,s<0?s=0:s>255&&(s=255),b=e.A.tg(r,i,s)}if(i>0){let t=0!==f||this.GT[i][s][c]===w.A.$T;A>0&&!e.A.Ro[A-1].ng&&(t=!1),t&&p===m&&p===I&&p===_&&(this.ZT[i][s][c]|=2340)}let v=0;if(-1!==O&&(v=r.A.palette[e.A.ig(b,96)]),0===A)t?.JT(i,s,c,w.A.$T,u.A.bd,-1,p,m,I,_,e.A.ig(O,E),e.A.ig(O,g),e.A.ig(O,C),e.A.ig(O,T),d.A.Bl,d.A.Bl,d.A.Bl,d.A.Bl,v,d.A.Bl);else{const h=this.GT[i][s][c]+1,n=this.HT[i][s][c],o=e.A.Ro[A-1];let l,a,f=o.texture;f>=0?(a=r.A.QT(f),l=-1):o.hg===d.A.vc?(a=0,l=-2,f=-1):(l=e.A.tg(o.rg,o.og,o.lg),a=r.A.palette[e.A.sg(o.fg,96)]),t?.JT(i,s,c,h,n,f,p,m,I,_,e.A.ig(O,E),e.A.ig(O,g),e.A.ig(O,C),e.A.ig(O,T),e.A.sg(l,E),e.A.sg(l,g),e.A.sg(l,C),e.A.sg(l,T),v,a)}}}}}}for(let s=1;s<this.DI-1;s++)for(let h=1;h<this.xI-1;h++)t?.tO(i,h,s,this.qT(i,h,s))}y.ST||t?.iO(64,768,-50,-10,-50);for(let i=0;i<this.xI;i++)for(let s=0;s<this.DI;s++)2&~this.Yn[1][i][s]||t?.sO(i,s);if(!y.ST){let t=1,i=2,s=4;for(let e=0;e<h.A.xn;e++){e>0&&(t<<=3,i<<=3,s<<=3);for(let h=0;h<=e;h++)for(let n=0;n<=this.DI;n++)for(let r=0;r<=this.xI;r++){if(this.ZT[h][r][n]&t){let i=n,s=n,l=h,a=h;for(;i>0&&this.ZT[h][r][i-1]&t;)i--;for(;s<this.DI&&this.ZT[h][r][s+1]&t;)s++;t:for(;l>0;){for(let h=i;h<=s;h++)if(!(this.ZT[l-1][r][h]&t))break t;l--}t:for(;a<e;){for(let h=i;h<=s;h++)if(!(this.ZT[a+1][r][h]&t))break t;a++}if((a+1-l)*(s+1-i)>=8){const h=this.Wn[a][r][i]-240,n=this.Wn[l][r][i];o.A.hO(e,1,128*r,h,128*i,128*r,n,128*s+128);for(let h=l;h<=a;h++)for(let e=i;e<=s;e++)this.ZT[h][r][e]&=~t}}if(this.ZT[h][r][n]&i){let t=r,s=r,l=h,a=h;for(;t>0&&this.ZT[h][t-1][n]&i;)t--;for(;s<this.xI&&this.ZT[h][s+1][n]&i;)s++;t:for(;l>0;){for(let h=t;h<=s;h++)if(!(this.ZT[l-1][h][n]&i))break t;l--}t:for(;a<e;){for(let h=t;h<=s;h++)if(!(this.ZT[a+1][h][n]&i))break t;a++}if((a+1-l)*(s+1-t)>=8){const h=this.Wn[a][t][n]-240,r=this.Wn[l][t][n];o.A.hO(e,2,128*t,h,128*n,128*s+128,r,128*n);for(let h=l;h<=a;h++)for(let e=t;e<=s;e++)this.ZT[h][e][n]&=~i}}if(this.ZT[h][r][n]&s){let t=r,i=r,l=n,a=n;for(;l>0&&this.ZT[h][r][l-1]&s;)l--;for(;a<this.DI&&this.ZT[h][r][a+1]&s;)a++;t:for(;t>0;){for(let i=l;i<=a;i++)if(!(this.ZT[h][t-1][i]&s))break t;t--}t:for(;i<this.xI;){for(let t=l;t<=a;t++)if(!(this.ZT[h][i+1][t]&s))break t;i++}if((i+1-t)*(a+1-l)>=4){const n=this.Wn[h][t][l];o.A.hO(e,4,128*t,n,128*l,128*i+128,n,128*a+128);for(let e=t;e<=i;e++)for(let t=l;t<=a;t++)this.ZT[h][e][t]&=~s}}}}}};Bp=(t,i,s,n)=>{let r=0;for(let t=0;t<e.A.count;t++)if('water'===e.A.Ro[t].JE?.toLowerCase()){r=t+1<<24>>24;break}for(let e=t;e<t+s;e++)for(let t=i;t<i+n;t++)if(t>=0&&t<this.xI&&e>=0&&e<this.DI){this.BT[0][t][e]=r;for(let i=0;i<h.A.xn;i++)this.Wn[i][t][e]=0,this.Yn[i][t][e]=0}};Up=(t,i,s,e,r)=>{const o=new n.A(new Uint8Array(r));for(let n=0;n<h.A.xn;n++)for(let r=0;r<64;r++)for(let l=0;l<64;l++){const a=r+s,c=l+e;let f;if(a>=0&&a<h.A.Xn&&c>=0&&c<h.A.Xn)for(this.Yn[n][a][c]=0;;){if(f=o.ZA,0===f){0===n?this.Wn[0][a][c]=8*-y.MT(a+t+932731,c+556238+i):this.Wn[n][a][c]=this.Wn[n-1][a][c]-240;break}if(1===f){let t=o.ZA;1===t&&(t=0),0===n?this.Wn[0][a][c]=8*-t:this.Wn[n][a][c]=this.Wn[n-1][a][c]-8*t;break}f<=49?(this.BT[n][a][c]=o.zA,this.GT[n][a][c]=(f-2)/4<<24>>24,this.HT[n][a][c]=(f-2&3)<<24>>24):f<=81?this.Yn[n][a][c]=f-49<<24>>24:this.UT[n][a][c]=f-81<<24>>24}else for(;f=o.ZA,0!==f;){if(1===f){o.ZA;break}f<=49&&o.ZA}}};Gp=(t,i,s,e,r,o)=>{const l=new n.A(new Uint8Array(e));let a=-1;for(;;){const e=l.eO;if(0===e)return;a+=e;let n=0;for(;;){const e=l.eO;if(0===e)break;n+=e-1;const c=63&n,f=n>>6&63,u=n>>12,d=l.ZA,w=d>>2,A=3&d,y=f+r,p=c+o;if(y>0&&p>0&&y<h.A.Xn-1&&p<h.A.Xn-1){let h=u;2&~this.Yn[1][y][p]||(h=u-1);let e=null;h>=0&&(e=s[h]),this.RA(u,y,p,t,i,e,a,w,A)}}}};RA=(t,i,s,h,e,n,r,o,d)=>{if(y.st){if(16&this.Yn[t][i][s])return;if(this.qT(t,i,s)!==y.Dp)return}const w=this.Wn[t][i][s],A=this.Wn[t][i+1][s],p=this.Wn[t][i+1][s+1],m=this.Wn[t][i][s+1],I=w+A+p+m>>2,_=l.A.get(r);let E=i+(s<<7)+(r<<14)+1073741824|0;_.active||(E+=-2147483648),E|=0;const g=(d<<6)+o<<24>>24;if(o===f.A.lA.id)(!y.st||_.active||_.Pg)&&(h?.PT(_.la(f.A.lA.id,d,w,A,p,m,-1),t,i,s,I,E,g),_.NA&&_.active&&n?.lT(i,s),-1!==_.al&&e.n_(new a.A(r,t,3,i,s,c.A.Ro[_.al],!0)));else if(o===f.A.rA.id||o===f.A.oA.id){const l=_.la(f.A.rA.id,d,w,A,p,m,-1);if(l){let e,n,r=0;if(o===f.A.oA.id&&(r+=256),d===u.A.vd||d===u.A.Rd?(e=_.length,n=_.width):(e=_.width,n=_.length),h?.RA(t,i,s,I,l,null,E,g,e,n,r)&&_.Rg)for(let h=0;h<=e;h++)for(let e=0;e<=n;e++){let n=l.nO/4|0;n>30&&(n=30),n>this.WT[t][i+h][s+e]&&(this.WT[t][i+h][s+e]=n<<24>>24)}}_.NA&&n?.RA(i,s,_.width,_.length,d,_.PA),-1!==_.al&&e.n_(new a.A(r,t,2,i,s,c.A.Ro[_.al],!0))}else if(o>=f.A.wT.id)h?.RA(t,i,s,I,_.la(o,d,w,A,p,m,-1),null,E,g,1,1,0),o>=f.A.wT.id&&o<=f.A.IT.id&&o!==f.A.AT.id&&t>0&&(this.ZT[t][i][s]|=2340),_.NA&&n?.RA(i,s,_.width,_.length,d,_.PA),-1!==_.al&&e.n_(new a.A(r,t,2,i,s,c.A.Ro[_.al],!0));else if(o===f.A.Td.id)h?.aT(t,i,s,I,y.TT[d],0,_.la(f.A.Td.id,d,w,A,p,m,-1),null,E,g),d===u.A.bd?(_.Rg&&(this.WT[t][i][s]=50,this.WT[t][i][s+1]=50),_.ng&&(this.ZT[t][i][s]|=585)):d===u.A.vd?(_.Rg&&(this.WT[t][i][s+1]=50,this.WT[t][i+1][s+1]=50),_.ng&&(this.ZT[t][i][s+1]|=1170)):d===u.A.Ld?(_.Rg&&(this.WT[t][i+1][s]=50,this.WT[t][i+1][s+1]=50),_.ng&&(this.ZT[t][i+1][s]|=585)):d===u.A.Rd&&(_.Rg&&(this.WT[t][i][s]=50,this.WT[t][i+1][s]=50),_.ng&&(this.ZT[t][i][s]|=1170)),_.NA&&n?.aT(i,s,o,d,_.PA),-1!==_.al&&e.n_(new a.A(r,t,0,i,s,c.A.Ro[_.al],!0)),16!==_.Og&&h?.rO(t,i,s,_.Og);else if(o===f.A.cT.id)h?.aT(t,i,s,I,y.OT[d],0,_.la(f.A.cT.id,d,w,A,p,m,-1),null,E,g),_.Rg&&(d===u.A.bd?this.WT[t][i][s+1]=50:d===u.A.vd?this.WT[t][i+1][s+1]=50:d===u.A.Ld?this.WT[t][i+1][s]=50:d===u.A.Rd&&(this.WT[t][i][s]=50)),_.NA&&n?.aT(i,s,o,d,_.PA),-1!==_.al&&e.n_(new a.A(r,t,0,i,s,c.A.Ro[_.al],!0));else if(o===f.A.Od.id){const l=d+1&3;h?.aT(t,i,s,I,y.TT[d],y.TT[l],_.la(f.A.Od.id,d+4,w,A,p,m,-1),_.la(f.A.Od.id,l,w,A,p,m,-1),E,g),_.ng&&(d===u.A.bd?(this.ZT[t][i][s]|=265,this.ZT[t][i][s+1]|=1170):d===u.A.vd?(this.ZT[t][i][s+1]|=1170,this.ZT[t][i+1][s]|=585):d===u.A.Ld?(this.ZT[t][i+1][s]|=585,this.ZT[t][i][s]|=1170):d===u.A.Rd&&(this.ZT[t][i][s]|=1170,this.ZT[t][i][s]|=585)),_.NA&&n?.aT(i,s,o,d,_.PA),-1!==_.al&&e.n_(new a.A(r,t,0,i,s,c.A.Ro[_.al],!0)),16!==_.Og&&h?.rO(t,i,s,_.Og)}else if(o===f.A.Sd.id)h?.aT(t,i,s,I,y.OT[d],0,_.la(f.A.Sd.id,d,w,A,p,m,-1),null,E,g),_.Rg&&(d===u.A.bd?this.WT[t][i][s+1]=50:d===u.A.vd?this.WT[t][i+1][s+1]=50:d===u.A.Ld?this.WT[t][i+1][s]=50:d===u.A.Rd&&(this.WT[t][i][s]=50)),_.NA&&n?.aT(i,s,o,d,_.PA),-1!==_.al&&e.n_(new a.A(r,t,0,i,s,c.A.Ro[_.al],!0));else if(o===f.A.kd.id)h?.RA(t,i,s,I,_.la(o,d,w,A,p,m,-1),null,E,g,1,1,0),_.NA&&n?.RA(i,s,_.width,_.length,d,_.PA),-1!==_.al&&e.n_(new a.A(r,t,2,i,s,c.A.Ro[_.al],!0));else if(o===f.A.VI.id)h?.FT(t,i,s,I,0,0,E,_.la(f.A.VI.id,u.A.bd,w,A,p,m,-1),g,512*d,y.TT[d]),-1!==_.al&&e.n_(new a.A(r,t,1,i,s,c.A.Ro[_.al],!0));else if(o===f.A.gm.id){let n=16;if(h){const e=h.Ed(t,i,s);e>0&&(n=l.A.get(e>>14&32767).Og)}h?.FT(t,i,s,I,y.bT[d]*n,y.vT[d]*n,E,_.la(f.A.VI.id,u.A.bd,w,A,p,m,-1),g,512*d,y.TT[d]),-1!==_.al&&e.n_(new a.A(r,t,1,i,s,c.A.Ro[_.al],!0))}else o===f.A.fT.id?(h?.FT(t,i,s,I,0,0,E,_.la(f.A.VI.id,u.A.bd,w,A,p,m,-1),g,d,256),-1!==_.al&&e.n_(new a.A(r,t,1,i,s,c.A.Ro[_.al],!0))):o===f.A.uT.id?(h?.FT(t,i,s,I,0,0,E,_.la(f.A.VI.id,u.A.bd,w,A,p,m,-1),g,d,512),-1!==_.al&&e.n_(new a.A(r,t,1,i,s,c.A.Ro[_.al],!0))):o===f.A.dT.id&&(h?.FT(t,i,s,I,0,0,E,_.la(f.A.VI.id,u.A.bd,w,A,p,m,-1),g,d,768),-1!==_.al&&e.n_(new a.A(r,t,1,i,s,c.A.Ro[_.al],!0)))};qT=(t,i,s)=>8&this.Yn[t][i][s]?0:t<=0||!(2&this.Yn[1][i][s])?t:t-1}},3045:(t,i,s)=>{s.d(i,{A:()=>I});var h=s(4583),e=s(1161),n=s(3795),r=s(8256),o=s(670),l=s(9222),a=s(6855),c=s(7441),f=s(6666),u=s(5748),d=s(3479),w=s(8950),A=s(2771),y=s(5518),p=s(6169),m=s(3867);class I{static oO=new m.lO(8,32,51,51,!1);static aO=new m.ds(100,null);static Xu=new Int32Array(o.A.xn);static cO=new m.fO(o.A.xn,500,null);static uO=new m.ds(500,null);static dO=new f.A;static Vf=0;static wO=0;static AO=0;static yO=0;static pO=0;static mO=0;static IO=0;static _O=0;static EO=0;static gO=0;static CO=0;static TO=0;static OO=0;static bO=0;static vO=0;static LO=0;static RO=0;static SO=0;static MO=0;static kO=0;static zu=0;static xO=0;static DO=!1;static NO=null;static PO=Uint8Array.of(19,55,38,155,255,110,137,205,76);static FO=Uint8Array.of(160,192,80,96,0,144,80,48,160);static UO=Uint8Array.of(76,8,137,4,0,1,38,2,19);static BO=Int8Array.of(0,0,2,0,0,2,1,1,0);static GO=Int8Array.of(2,0,0,2,0,0,0,4,4);static HO=Int8Array.of(0,4,4,8,0,0,8,0,0);static WO=Int8Array.of(1,1,0,0,0,8,0,0,8);static YO=Int8Array.of(53,-53,-53,53);static VO=Int8Array.of(-53,-53,53,53);static KO=Int8Array.of(-45,45,45,-45);static XO=Int8Array.of(45,45,-45,-45);static zO=[new Int8Array(16),Int8Array.of(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),Int8Array.of(1,0,0,0,1,1,0,0,1,1,1,0,1,1,1,1),Int8Array.of(1,1,0,0,1,1,0,0,1,0,0,0,1,0,0,0),Int8Array.of(0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,1),Int8Array.of(0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1),Int8Array.of(1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1),Int8Array.of(1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0),Int8Array.of(0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0),Int8Array.of(1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,1),Int8Array.of(1,1,1,1,1,1,0,0,1,0,0,0,1,0,0,0),Int8Array.of(0,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1),Int8Array.of(0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1)];static jO=[Int8Array.of(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15),Int8Array.of(12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3),Int8Array.of(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0),Int8Array.of(3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12)];static ZO=Int32Array.of(41,39248,41,4643,41,41,41,41,41,41,41,41,41,41,41,43086,41,41,41,41,41,41,41,8602,41,28992,41,41,41,41,41,5056,41,41,41,41,41,41,41,41,41,41,41,41,41,41,3131,41,41,41);static ju=0;static xl=0;static Dl=0;static ff=-1;static uf=-1;static st=!0;static init=(t,i,s,e,n)=>{this.wO=0,this.AO=0,this.yO=t,this.pO=i,this.mO=t/2|0,this.IO=i/2|0;const r=new m.lO(9,32,53,53,!1);for(let t=128;t<=384;t+=32)for(let i=0;i<2048;i+=64){this._O=h.A.sin[t],this.EO=h.A.cos[t],this.gO=h.A.sin[i],this.CO=h.A.cos[i];const o=(t-128)/32|0,l=i/64|0;for(let t=-26;t<=26;t++)for(let i=-26;i<=26;i++){const h=128*t,a=128*i;let c=!1;for(let t=-s;t<=e;t+=128)if(this.qO(h,a,n[o]+t)){c=!0;break}r[o][l][t+25+1][i+25+1]=c}}for(let t=0;t<8;t++)for(let i=0;i<32;i++)for(let s=-25;s<25;s++)for(let h=-25;h<25;h++){let e=!1;t:for(let n=-1;n<=1;n++)for(let o=-1;o<=1;o++){if(r[t][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}}this.oO[t][i][s+25][h+25]=e}};static bo=()=>{this.aO=null,this.Xu=null,this.cO=null,this.dO=null,this.oO=null,this.uO=null,this.NO=null,console.log('World3D unloaded!')};static hO=(t,i,s,h,e,n,o,l)=>{I.cO[t][I.Xu[t]++]=new r.A(s/128|0,n/128|0,e/128|0,l/128|0,i,s,n,e,l,h,o)};static qO=(t,i,s)=>{const h=i*this.gO+t*this.CO>>16,e=i*this.CO-t*this.gO>>16,n=s*this._O+e*this.EO>>16,r=s*this.EO-e*this._O>>16;if(n<50||n>3500)return!1;const o=this.mO+((h<<9)/n|0),l=this.IO+((r<<9)/n|0);return o>=this.wO&&o<=this.yO&&l>=this.AO&&l<=this.pO};$O;xI;DI;JO;QO;Er;tb;ib;sb;hb=0;eb=0;nb=0;constructor(t,i,s,h){this.$O=s,this.xI=h,this.DI=i,this.QO=new m.Cr(s,h,i,null),this.tb=new m.$a(s,h+1,i+1),this.JO=t,this.Er=new m.ds(5e3,null),this.ib=new Int32Array(1e4),this.sb=new Int32Array(1e4),this.reset()}reset=()=>{for(let t=0;t<this.$O;t++)for(let i=0;i<this.xI;i++)for(let s=0;s<this.DI;s++)this.QO[t][i][s]=null;for(let t=0;t<o.A.xn;t++){for(let i=0;i<I.Xu[t];i++)I.cO[t][i]=null;I.Xu[t]=0}for(let t=0;t<this.hb;t++)this.Er[t]=null;this.hb=0,I.aO.fill(null)};Fp=t=>{this.eb=t;for(let i=0;i<this.xI;i++)for(let s=0;s<this.DI;s++)this.QO[t][i][s]=new n.A(t,i,s)};sO=(t,i)=>{const s=this.QO[0][t][i];for(let s=0;s<3;s++){this.QO[s][t][i]=this.QO[s+1][t][i];const h=this.QO[s][t][i];h&&h.level--}this.QO[0][t][i]||(this.QO[0][t][i]=new n.A(0,t,i));const h=this.QO[0][t][i];h&&(h.rb=s),this.QO[3][t][i]=null};tO=(t,i,s,h)=>{const e=this.QO[t][i][s];e&&(e.ob=h)};JT=(t,i,s,h,e,r,o,l,a,c,f,u,w,p,m,I,_,E,g,C)=>{if(h===y.A.$T){for(let h=t;h>=0;h--)this.QO[h][i][s]||(this.QO[h][i][s]=new n.A(h,i,s));const h=this.QO[t][i][s];h&&(h.lb=new d.A(f,u,w,p,-1,g,!1))}else if(h===y.A.ab){for(let h=t;h>=0;h--)this.QO[h][i][s]||(this.QO[h][i][s]=new n.A(h,i,s));const h=this.QO[t][i][s];h&&(h.lb=new d.A(m,I,_,E,r,C,o===l&&o===a&&o===c))}else{for(let h=t;h>=0;h--)this.QO[h][i][s]||(this.QO[h][i][s]=new n.A(h,i,s));const d=this.QO[t][i][s];d&&(d.cb=new A.A(i,h,I,l,w,e,f,c,C,m,r,E,g,a,_,p,o,s,u))}};PT=(t,i,s,h,e,r,o)=>{this.QO[i][s][h]||(this.QO[i][s][h]=new n.A(i,s,h));const a=this.QO[i][s][h];a&&(a.fb=new l.A(e,128*s+64,128*h+64,t,r,o))};BA=(t,i,s)=>{const h=this.QO[t][i][s];h&&(h.fb=null)};LA=(t,i,s,h,e,r,o,l)=>{let a=0;const c=this.QO[h][t][i];if(c)for(let t=0;t<c.ub;t++){const i=c.wb[t];if(!i||!i.model)continue;const s=i.model.zg;s>a&&(a=s)}else this.QO[h][t][i]=new n.A(h,t,i);const f=this.QO[h][t][i];f&&(f.Ab=new u.A(s,128*t+64,128*i+64,r,o,l,e,a))};TA=(t,i,s)=>{const h=this.QO[t][i][s];h&&(h.Ab=null)};aT=(t,i,s,h,e,r,o,l,c,f)=>{if(!o&&!l)return;for(let h=t;h>=0;h--)this.QO[h][i][s]||(this.QO[h][i][s]=new n.A(h,i,s));const u=this.QO[t][i][s];u&&(u.yb=new a.A(h,128*i+64,128*s+64,e,r,o,l,c,f))};DA=(t,i,s,h)=>{const e=this.QO[t][i][s];1===h&&e&&(e.yb=null)};FT=(t,i,s,h,e,r,o,l,a,f,u)=>{if(!l)return;for(let h=t;h>=0;h--)this.QO[h][i][s]||(this.QO[h][i][s]=new n.A(h,i,s));const d=this.QO[t][i][s];d&&(d.pb=new c.A(h,128*i+e+64,128*s+r+64,u,f,l,o,a))};FA=(t,i,s)=>{const h=this.QO[t][i][s];h&&(h.pb=null)};rO=(t,i,s,h)=>{const e=this.QO[t][i][s];if(!e)return;const n=e.pb;if(!n)return;const r=128*i+64,o=128*s+64;n.x=r+((n.x-r)*h/16|0),n.z=o+((n.z-o)*h/16|0)};YI=(t,i,s,h)=>{if(!h)return;const e=this.QO[t][i][s];if(!e)return;const n=e.pb;n&&(n.model=h)};zI=(t,i,s,h)=>{if(!h)return;const e=this.QO[t][i][s];if(!e)return;const n=e.fb;n&&(n.model=h)};XI=(t,i,s,h)=>{if(!h)return;const e=this.QO[t][i][s];if(!e)return;const n=e.yb;n&&(n.mb=h)};KI=(t,i,s,h,e)=>{if(!h)return;const n=this.QO[s][t][i];if(!n)return;const r=n.yb;r&&(r.mb=h,r.Ib=e)};RA=(t,i,s,h,e,n,r,o,l,a,c)=>{if(!e&&!n)return!0;const f=128*i+64*l,u=128*s+64*a;return this._b(f,u,h,t,i,s,l,a,e,n,r,o,c,!1)};vI=(t,i,s,h,e,n,r,o,l,a)=>{if(!e&&!n)return!0;let c=i-l,f=h-l,u=i+l,d=h+l;return a&&(o>640&&o<1408&&(d+=128),o>1152&&o<1920&&(u+=128),(o>1664||o<384)&&(f-=128),o>128&&o<896&&(c-=128)),c=c/128|0,f=f/128|0,u=u/128|0,d=d/128|0,this._b(i,h,s,t,c,f,u+1-c,d-f+1,e,n,r,0,o,!0)};SI=(t,i,s,h,e,n,r,o,l,a,c,f)=>!l&&!a||this._b(i,h,s,t,e,n,r+1-e,o-n+1,l,a,c,0,f,!0);UA=(t,i,s)=>{const h=this.QO[t][i][s];if(h)for(let t=0;t<h.ub;t++){const e=h.wb[t];if(e&&2==(e.Eb>>29&3)&&e.gb===i&&e.Cb===s)return void this.Tb(e)}};WI=(t,i,s,h)=>{if(!h)return;const e=this.QO[t][i][s];if(e)for(let t=0;t<e.ub;t++){const i=e.wb[t];if(i&&2==(i.Eb>>29&3))return void(i.model=h)}};zf=()=>{for(let t=0;t<this.hb;t++){const i=this.Er[t];i&&this.Tb(i),this.Er[t]=null}this.hb=0};Ed=(t,i,s)=>{const h=this.QO[t][i][s];return h&&h.yb?h.yb.Eb:0};kA=(t,i,s)=>{const h=this.QO[t][s][i];return h&&h.pb?h.pb.Eb:0};Md=(t,i,s)=>{const h=this.QO[t][i][s];if(!h)return 0;for(let t=0;t<h.ub;t++){const e=h.wb[t];if(e&&2==(e.Eb>>29&3)&&e.gb===i&&e.Cb===s)return e.Eb}return 0};Ad=(t,i,s)=>{const h=this.QO[t][i][s];return h&&h.fb?h.fb.Eb:0};gd=(t,i,s,h)=>{const e=this.QO[t][i][s];if(e){if(e.yb&&e.yb.Eb===h)return 255&e.yb.info;if(e.pb&&e.pb.Eb===h)return 255&e.pb.info;if(e.fb&&e.fb.Eb===h)return 255&e.fb.info;for(let t=0;t<e.ub;t++){const i=e.wb[t];if(i&&i.Eb===h)return 255&i.info}return-1}return-1};iO=(t,i,s,h,e)=>{const n=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;for(let i=0;i<this.$O;i++)for(let r=0;r<this.xI;r++)for(let o=0;o<this.DI;o++){const l=this.QO[i][r][o];if(!l)continue;const a=l.yb;a&&a.mb&&a.mb.Ob&&(this.bb(i,r,o,1,1,a.mb),a.Ib&&a.Ib.Ob&&(this.bb(i,r,o,1,1,a.Ib),this.vb(a.mb,a.Ib,0,0,0,!1),a.Ib.Lb(t,n,s,h,e)),a.mb.Lb(t,n,s,h,e));for(let a=0;a<l.ub;a++){const c=l.wb[a];c&&c.model&&c.model.Ob&&(this.bb(i,r,o,c.Rb+1-c.gb,c.Sb-c.Cb+1,c.model),c.model.Lb(t,n,s,h,e))}const c=l.fb;c&&c.model&&c.model.Ob&&(this.Mb(i,r,o,c.model),c.model.Lb(t,n,s,h,e))}};Mb=(t,i,s,h)=>{if(i<this.xI){const e=this.QO[t][i+1][s];e&&e.fb&&e.fb.model&&e.fb.model.Ob&&this.vb(h,e.fb.model,128,0,0,!0)}if(s<this.xI){const e=this.QO[t][i][s+1];e&&e.fb&&e.fb.model&&e.fb.model.Ob&&this.vb(h,e.fb.model,0,0,128,!0)}if(i<this.xI&&s<this.DI){const e=this.QO[t][i+1][s+1];e&&e.fb&&e.fb.model&&e.fb.model.Ob&&this.vb(h,e.fb.model,128,0,128,!0)}if(i<this.xI&&s>0){const e=this.QO[t][i+1][s-1];e&&e.fb&&e.fb.model&&e.fb.model.Ob&&this.vb(h,e.fb.model,128,0,-128,!0)}};bb=(t,i,s,h,e,n)=>{let r=!0,o=i;const l=i+h,a=s-1,c=s+e;for(let f=t;f<=t+1;f++)if(f!==this.$O){for(let u=o;u<=l;u++)if(!(u<0||u>=this.xI))for(let o=a;o<=c;o++){if(o<0||o>=this.DI||r&&u<l&&o<c&&(o>=s||u===i))continue;const a=this.QO[f][u][o];if(!a)continue;const d=128*(u-i)+64*(1-h),w=128*(o-s)+64*(1-e),A=((this.JO[f][u][o]+this.JO[f][u+1][o]+this.JO[f][u][o+1]+this.JO[f][u+1][o+1])/4|0)-((this.JO[t][i][s]+this.JO[t][i+1][s]+this.JO[t][i][s+1]+this.JO[t][i+1][s+1])/4|0),y=a.yb;y&&y.mb&&y.mb.Ob&&this.vb(n,y.mb,d,A,w,r),y&&y.Ib&&y.Ib.Ob&&this.vb(n,y.Ib,d,A,w,r);for(let t=0;t<a.ub;t++){const o=a.wb[t];if(!o||!o.model||!o.model.Ob)continue;const l=o.Rb+1-o.gb,c=o.Sb+1-o.Cb;this.vb(n,o.model,128*(o.gb-i)+64*(l-h),A,128*(o.Cb-s)+64*(c-e),r)}}o--,r=!1}};vb=(t,i,s,h,e,n)=>{this.nb++;let r=0;const o=i.Bg,l=i.Ug;if(t.Ob&&t.kb)for(let n=0;n<t.Ug;n++){const a=t.Ob[n],c=t.kb[n];if(c&&0!==c.w){const f=t.Hg[n]-h;if(f>i.xb)continue;const u=t.Bg[n]-s;if(u<i.Db||u>i.Nb)continue;const d=t.Gg[n]-e;if(d<i.Pb||d>i.Fb)continue;if(i.Ob&&i.kb)for(let t=0;t<l;t++){const s=i.Ob[t],h=i.kb[t];u!==o[t]||d!==i.Gg[t]||f!==i.Hg[t]||h&&0===h.w||(a&&s&&h&&(a.x+=h.x,a.y+=h.y,a.z+=h.z,a.w+=h.w,s.x+=c.x,s.y+=c.y,s.z+=c.z,s.w+=c.w,r++),this.ib[n]=this.nb,this.sb[t]=this.nb)}}}if(!(r<3)&&n){if(t.Ub)for(let i=0;i<t.Bb;i++)this.ib[t.Gb[i]]===this.nb&&this.ib[t.Hb[i]]===this.nb&&this.ib[t.Wb[i]]===this.nb&&(t.Ub[i]=-1);if(i.Ub)for(let t=0;t<i.Bb;t++)this.sb[i.Gb[t]]===this.nb&&this.sb[i.Hb[t]]===this.nb&&this.sb[i.Wb[t]]===this.nb&&(i.Ub[t]=-1)}};dd=(t,i,s,h,e,n)=>{const r=this.QO[t][i][s];if(!r)return;const o=r.lb;if(o){const t=o.color;if(0!==t)for(let i=0;i<4;i++)h[e]=t,h[e+1]=t,h[e+2]=t,h[e+3]=t,e+=n;return}const l=r.cb;if(!l)return;const a=l.shape,c=l.angle,f=l.Yb,u=l.Vb,d=I.zO[a],w=I.jO[c];let A=0;if(0===f)for(let t=0;t<4;t++)0!==d[w[A++]]&&(h[e]=u),0!==d[w[A++]]&&(h[e+1]=u),0!==d[w[A++]]&&(h[e+2]=u),0!==d[w[A++]]&&(h[e+3]=u),e+=n;else for(let t=0;t<4;t++)h[e]=0===d[w[A++]]?f:u,h[e+1]=0===d[w[A++]]?f:u,h[e+2]=0===d[w[A++]]?f:u,h[e+3]=0===d[w[A++]]?f:u,e+=n};click=(t,i)=>{I.DO=!0,I.xl=t,I.Dl=i,I.ff=-1,I.uf=-1};draw=(t,i,s,e,n,r,o)=>{t<0?t=0:t>=128*this.xI&&(t=128*this.xI-1),s<0?s=0:s>=128*this.DI&&(s=128*this.DI-1),I.Vf++,I._O=h.A.sin[r],I.EO=h.A.cos[r],I.gO=h.A.sin[n],I.CO=h.A.cos[n],I.NO=I.oO[(r-128)/32|0][n/64|0],I.TO=t,I.OO=i,I.bO=s,I.vO=t/128|0,I.LO=s/128|0,I.zu=e,I.RO=I.vO-25,I.RO<0&&(I.RO=0),I.MO=I.LO-25,I.MO<0&&(I.MO=0),I.SO=I.vO+25,I.SO>this.xI&&(I.SO=this.xI),I.kO=I.LO+25,I.kO>this.DI&&(I.kO=this.DI),this.Kb(),I.xO=0;for(let t=this.eb;t<this.$O;t++){const s=this.QO[t];for(let h=I.RO;h<I.SO;h++)for(let n=I.MO;n<I.kO;n++){const r=s[h][n];r&&(r.ob<=e&&(I.NO[h+25-I.vO][n+25-I.LO]||this.JO[t][h][n]-i>=2e3)?(r.visible=!0,r.update=!0,r.Xb=r.ub>0,I.xO++):(r.visible=!1,r.update=!1,r.zb=0))}}for(let t=this.eb;t<this.$O;t++){const i=this.QO[t];for(let t=-25;t<=0;t++){const s=I.vO+t,h=I.vO-t;if(!(s<I.RO&&h>=I.SO))for(let t=-25;t<=0;t++){const e=I.LO+t,n=I.LO-t;let r;if(s>=I.RO&&(e>=I.MO&&(r=i[s][e],r&&r.visible&&this.jb(r,!0,o)),n<I.kO&&(r=i[s][n],r&&r.visible&&this.jb(r,!0,o))),h<I.SO&&(e>=I.MO&&(r=i[h][e],r&&r.visible&&this.jb(r,!0,o)),n<I.kO&&(r=i[h][n],r&&r.visible&&this.jb(r,!0,o))),0===I.xO)return void(I.DO=!1)}}}for(let t=this.eb;t<this.$O;t++){const i=this.QO[t];for(let t=-25;t<=0;t++){const s=I.vO+t,h=I.vO-t;if(!(s<I.RO&&h>=I.SO))for(let t=-25;t<=0;t++){const e=I.LO+t,n=I.LO-t;let r;if(s>=I.RO&&(e>=I.MO&&(r=i[s][e],r&&r.visible&&this.jb(r,!1,o)),n<I.kO&&(r=i[s][n],r&&r.visible&&this.jb(r,!1,o))),h<I.SO&&(e>=I.MO&&(r=i[h][e],r&&r.visible&&this.jb(r,!1,o)),n<I.kO&&(r=i[h][n],r&&r.visible&&this.jb(r,!1,o))),0===I.xO)return void(I.DO=!1)}}}};_b=(t,i,s,h,r,o,l,a,c,f,u,d,w,A)=>{if(!c&&!f)return!1;for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){if(t<0||i<0||t>=this.xI||i>=this.DI)return!1;const s=this.QO[h][t][i];if(s&&s.ub>=5)return!1}const y=new e.A(h,s,t,i,c,f,w,r,r+l-1,o,o+a-1,u,d);for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){let s=0;t>r&&(s|=1),t<r+l-1&&(s+=4),i>o&&(s+=8),i<o+a-1&&(s+=2);for(let s=h;s>=0;s--)this.QO[s][t][i]||(this.QO[s][t][i]=new n.A(s,t,i));const e=this.QO[h][t][i];e&&(e.wb[e.ub]=y,e.Zb[e.ub]=s,e.qb|=s,e.ub++)}return A&&(this.Er[this.hb++]=y),!0};Tb=t=>{for(let i=t.gb;i<=t.Rb;i++)for(let s=t.Cb;s<=t.Sb;s++){const h=this.QO[t.level][i][s];if(h){for(let i=0;i<h.ub;i++)if(h.wb[i]===t){h.ub--;for(let t=i;t<h.ub;t++)h.wb[t]=h.wb[t+1],h.Zb[t]=h.Zb[t+1];h.wb[h.ub]=null;break}h.qb=0;for(let t=0;t<h.ub;t++)h.qb|=h.Zb[t]}}};Kb=()=>{const t=I.Xu[I.zu],i=I.cO[I.zu];I.ju=0;for(let s=0;s<t;s++){const t=i[s];if(!t)continue;let h,e,n,r;if(1===t.type){if(h=t.MI+25-I.vO,h>=0&&h<=50){e=t.kI+25-I.LO,e<0&&(e=0),n=t.DI+25-I.LO,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.NO&&I.NO[h][e++]){i=!0;break}if(i){if(r=I.TO-t.Db,r>32)t.mode=1;else{if(r>=-32)continue;t.mode=2,r=-r}t.$b=(t.Pb-I.bO<<8)/r|0,t.Jb=(t.Fb-I.bO<<8)/r|0,t.Qb=(t.xb-I.OO<<8)/r|0,t.tv=(t.jg-I.OO<<8)/r|0,I.uO[I.ju++]=t}}}else if(2===t.type){if(h=t.kI+25-I.LO,h>=0&&h<=50){e=t.MI+25-I.vO,e<0&&(e=0),n=t.xI+25-I.vO,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.NO&&I.NO[e++][h]){i=!0;break}if(i){if(r=I.bO-t.Pb,r>32)t.mode=3;else{if(r>=-32)continue;t.mode=4,r=-r}t.iv=(t.Db-I.TO<<8)/r|0,t.sv=(t.Nb-I.TO<<8)/r|0,t.Qb=(t.xb-I.OO<<8)/r|0,t.tv=(t.jg-I.OO<<8)/r|0,I.uO[I.ju++]=t}}}else if(4===t.type&&(h=t.xb-I.OO,h>128&&(e=t.kI+25-I.LO,e<0&&(e=0),n=t.DI+25-I.LO,n>50&&(n=50),e<=n))){let i=t.MI+25-I.vO;i<0&&(i=0),r=t.xI+25-I.vO,r>50&&(r=50);let s=!1;t:for(let t=i;t<=r;t++)for(let i=e;i<=n;i++)if(I.NO&&I.NO[t][i]){s=!0;break t}s&&(t.mode=5,t.iv=(t.Db-I.TO<<8)/h|0,t.sv=(t.Nb-I.TO<<8)/h|0,t.$b=(t.Pb-I.bO<<8)/h|0,t.Jb=(t.Fb-I.bO<<8)/h|0,I.uO[I.ju++]=t)}}};jb=(t,i,s)=>{for(I.dO.n_(t);;){let t;do{if(t=I.dO.hv(),!t)return}while(!t.update);const h=t.x,e=t.z,n=t.level,r=t.ev,o=this.QO[n];if(t.visible){if(i){if(n>0){const t=this.QO[n-1][h][e];if(t&&t.update)continue}if(h<=I.vO&&h>I.RO){const i=o[h-1][e];if(i&&i.update&&(i.visible||!(1&t.qb)))continue}if(h>=I.vO&&h<I.SO-1){const i=o[h+1][e];if(i&&i.update&&(i.visible||!(4&t.qb)))continue}if(e<=I.LO&&e>I.MO){const i=o[h][e-1];if(i&&i.update&&(i.visible||!(8&t.qb)))continue}if(e>=I.LO&&e<I.kO-1){const i=o[h][e+1];if(i&&i.update&&(i.visible||!(2&t.qb)))continue}}else i=!0;if(t.visible=!1,t.rb){const i=t.rb;i.lb?this.nv(0,h,e)||this.rv(i.lb,0,h,e,I._O,I.EO,I.gO,I.CO):i.cb&&!this.nv(0,h,e)&&this.ov(h,e,i.cb,I._O,I.EO,I.gO,I.CO);const n=i.yb;n&&n.mb?.draw(0,I._O,I.EO,I.gO,I.CO,n.x-I.TO,n.y-I.OO,n.z-I.bO,n.Eb);for(let t=0;t<i.ub;t++){const h=i.wb[t];if(h){let t=h.model;t||(t=h.lv?.draw(s)??null),t?.draw(h.LI,I._O,I.EO,I.gO,I.CO,h.x-I.TO,h.y-I.OO,h.z-I.bO,h.Eb)}}}let l=!1;t.lb?this.nv(r,h,e)||(l=!0,this.rv(t.lb,r,h,e,I._O,I.EO,I.gO,I.CO)):t.cb&&!this.nv(r,h,e)&&(l=!0,this.ov(h,e,t.cb,I._O,I.EO,I.gO,I.CO));let a=0,c=0;const f=t.yb,u=t.pb;if((f||u)&&(I.vO===h?a+=1:I.vO<h&&(a+=2),I.LO===e?a+=3:I.LO>e&&(a+=6),c=I.PO[a],t.av=I.UO[a]),f&&(f.cv&I.FO[a]?16===f.cv?(t.zb=3,t.fv=I.BO[a],t.uv=3-t.fv):32===f.cv?(t.zb=6,t.fv=I.GO[a],t.uv=6-t.fv):64===f.cv?(t.zb=12,t.fv=I.HO[a],t.uv=12-t.fv):(t.zb=9,t.fv=I.WO[a],t.uv=9-t.fv):t.zb=0,f.cv&c&&!this.dv(r,h,e,f.cv)&&f.mb?.draw(0,I._O,I.EO,I.gO,I.CO,f.x-I.TO,f.y-I.OO,f.z-I.bO,f.Eb),f.wv&c&&!this.dv(r,h,e,f.wv)&&f.Ib?.draw(0,I._O,I.EO,I.gO,I.CO,f.x-I.TO,f.y-I.OO,f.z-I.bO,f.Eb)),u&&!this.visible(r,h,e,u.model.jg))if(u.type&c)u.model.draw(u.angle,I._O,I.EO,I.gO,I.CO,u.x-I.TO,u.y-I.OO,u.z-I.bO,u.Eb);else if(768&u.type){const t=u.x-I.TO,i=u.y-I.OO,s=u.z-I.bO,h=u.angle;let e,n;if(e=h===p.A.vd||h===p.A.Ld?-t:t,n=h===p.A.Ld||h===p.A.Rd?-s:s,256&u.type&&n<e){const e=t+I.YO[h],n=s+I.VO[h];u.model.draw(512*h+256,I._O,I.EO,I.gO,I.CO,e,i,n,u.Eb)}if(512&u.type&&n>e){const e=t+I.KO[h],n=s+I.XO[h];u.model.draw(512*h+1280&2047,I._O,I.EO,I.gO,I.CO,e,i,n,u.Eb)}}if(l){const i=t.fb;i&&i.model?.draw(0,I._O,I.EO,I.gO,I.CO,i.x-I.TO,i.y-I.OO,i.z-I.bO,i.Eb);const s=t.Ab;s&&0===s.offset&&(s.Av&&s.Av.draw(0,I._O,I.EO,I.gO,I.CO,s.x-I.TO,s.y-I.OO,s.z-I.bO,s.Eb),s.yv&&s.yv.draw(0,I._O,I.EO,I.gO,I.CO,s.x-I.TO,s.y-I.OO,s.z-I.bO,s.Eb),s.pv&&s.pv.draw(0,I._O,I.EO,I.gO,I.CO,s.x-I.TO,s.y-I.OO,s.z-I.bO,s.Eb))}const d=t.qb;if(0!==d){if(h<I.vO&&4&d){const t=o[h+1][e];t&&t.update&&I.dO.n_(t)}if(e<I.LO&&2&d){const t=o[h][e+1];t&&t.update&&I.dO.n_(t)}if(h>I.vO&&1&d){const t=o[h-1][e];t&&t.update&&I.dO.n_(t)}if(e>I.LO&&8&d){const t=o[h][e-1];t&&t.update&&I.dO.n_(t)}}}if(0!==t.zb){let i=!0;for(let s=0;s<t.ub;s++){const h=t.wb[s];if(h&&(h.Vf!==I.Vf&&(t.Zb[s]&t.zb)===t.fv)){i=!1;break}}if(i){const i=t.yb;i&&!this.dv(r,h,e,i.cv)&&i.mb?.draw(0,I._O,I.EO,I.gO,I.CO,i.x-I.TO,i.y-I.OO,i.z-I.bO,i.Eb),t.zb=0}}if(t.Xb){const i=t.ub;t.Xb=!1;let n=0;t:for(let s=0;s<i;s++){const i=t.wb[s];if(!i||i.Vf===I.Vf)continue;for(let s=i.gb;s<=i.Rb;s++)for(let h=i.Cb;h<=i.Sb;h++){const e=o[s][h];if(e){if(!e.visible){if(0===e.zb)continue;let n=0;if(s>i.gb&&(n+=1),s<i.Rb&&(n+=4),h>i.Cb&&(n+=8),h<i.Sb&&(n+=2),(n&e.zb)!==t.uv)continue}t.Xb=!0;continue t}}I.aO[n++]=i;let h=I.vO-i.gb;const e=i.Rb-I.vO;e>h&&(h=e);const r=I.LO-i.Cb,l=i.Sb-I.LO;i.mv=l>r?h+l:h+r}for(;;){let t=-50,i=-1;for(let s=0;s<n;s++){const h=I.aO[s];h&&(h.Vf!==I.Vf&&h.mv>t&&(t=h.mv,i=s))}if(-1===i)break;const l=I.aO[i];if(l){l.Vf=I.Vf;let t=l.model;t||(t=l.lv?.draw(s)??null),t&&!this.Iv(r,l.gb,l.Rb,l.Cb,l.Sb,t.jg)&&t.draw(l.LI,I._O,I.EO,I.gO,I.CO,l.x-I.TO,l.y-I.OO,l.z-I.bO,l.Eb);for(let t=l.gb;t<=l.Rb;t++)for(let i=l.Cb;i<=l.Sb;i++){const s=o[t][i];s&&(0!==s.zb?I.dO.n_(s):t===h&&i===e||!s.update||I.dO.n_(s))}}}if(t.Xb)continue}if(!t.update||0!==t.zb)continue;if(h<=I.vO&&h>I.RO){const t=o[h-1][e];if(t&&t.update)continue}if(h>=I.vO&&h<I.SO-1){const t=o[h+1][e];if(t&&t.update)continue}if(e<=I.LO&&e>I.MO){const t=o[h][e-1];if(t&&t.update)continue}if(e>=I.LO&&e<I.kO-1){const t=o[h][e+1];if(t&&t.update)continue}t.update=!1,I.xO--;const l=t.Ab;if(l&&0!==l.offset&&(l.Av&&l.Av.draw(0,I._O,I.EO,I.gO,I.CO,l.x-I.TO,l.y-I.OO-l.offset,l.z-I.bO,l.Eb),l.yv&&l.yv.draw(0,I._O,I.EO,I.gO,I.CO,l.x-I.TO,l.y-I.OO-l.offset,l.z-I.bO,l.Eb),l.pv&&l.pv.draw(0,I._O,I.EO,I.gO,I.CO,l.x-I.TO,l.y-I.OO-l.offset,l.z-I.bO,l.Eb)),0!==t.av){const i=t.pb;if(i&&!this.visible(r,h,e,i.model.jg))if(i.type&t.av)i.model.draw(i.angle,I._O,I.EO,I.gO,I.CO,i.x-I.TO,i.y-I.OO,i.z-I.bO,i.Eb);else if(768&i.type){const t=i.x-I.TO,s=i.y-I.OO,h=i.z-I.bO,e=i.angle;let n,r;if(n=e===p.A.vd||e===p.A.Ld?-t:t,r=e===p.A.Ld||e===p.A.Rd?-h:h,256&i.type&&r>=n){const n=t+I.YO[e],r=h+I.VO[e];i.model.draw(512*e+256,I._O,I.EO,I.gO,I.CO,n,s,r,i.Eb)}if(512&i.type&&r<=n){const n=t+I.KO[e],r=h+I.XO[e];i.model.draw(512*e+1280&2047,I._O,I.EO,I.gO,I.CO,n,s,r,i.Eb)}}const s=t.yb;s&&(s.wv&t.av&&!this.dv(r,h,e,s.wv)&&s.Ib?.draw(0,I._O,I.EO,I.gO,I.CO,s.x-I.TO,s.y-I.OO,s.z-I.bO,s.Eb),s.cv&t.av&&!this.dv(r,h,e,s.cv)&&s.mb?.draw(0,I._O,I.EO,I.gO,I.CO,s.x-I.TO,s.y-I.OO,s.z-I.bO,s.Eb))}if(n<this.$O-1){const t=this.QO[n+1][h][e];t&&t.update&&I.dO.n_(t)}if(h<I.vO){const t=o[h+1][e];t&&t.update&&I.dO.n_(t)}if(e<I.LO){const t=o[h][e+1];t&&t.update&&I.dO.n_(t)}if(h>I.vO){const t=o[h-1][e];t&&t.update&&I.dO.n_(t)}if(e>I.LO){const t=o[h][e-1];t&&t.update&&I.dO.n_(t)}}};rv=(t,i,s,e,n,r,o,l)=>{let a,c,f,u,d=a=(s<<7)-I.TO,A=c=(e<<7)-I.bO,y=f=d+128,p=u=A+128,m=this.JO[i][s][e]-I.OO,_=this.JO[i][s+1][e]-I.OO,E=this.JO[i][s+1][e+1]-I.OO,g=this.JO[i][s][e+1]-I.OO,C=A*o+d*l>>16;if(A=A*l-d*o>>16,d=C,C=m*r-A*n>>16,A=m*n+A*r>>16,m=C,A<50)return;if(C=c*o+y*l>>16,c=c*l-y*o>>16,y=C,C=_*r-c*n>>16,c=_*n+c*r>>16,_=C,c<50)return;if(C=p*o+f*l>>16,p=p*l-f*o>>16,f=C,C=E*r-p*n>>16,p=E*n+p*r>>16,E=C,p<50)return;if(C=u*o+a*l>>16,u=u*l-a*o>>16,a=C,C=g*r-u*n>>16,u=g*n+u*r>>16,g=C,u<50)return;const T=h.A.na+((d<<9)/A|0),O=h.A.ra+((m<<9)/A|0),b=h.A.na+((y<<9)/c|0),v=h.A.ra+((_<<9)/c|0),L=h.A.na+((f<<9)/p|0),R=h.A.ra+((E<<9)/p|0),S=h.A.na+((a<<9)/u|0),M=h.A.ra+((g<<9)/u|0);if(h.A.alpha=0,(L-S)*(v-M)-(R-M)*(b-S)>0)if(h.A._v=L<0||S<0||b<0||L>w.A.Ev||S>w.A.Ev||b>w.A.Ev,I.DO&&this.gv(I.xl,I.Dl,R,M,v,L,S,b)&&(I.ff=s,I.uf=e),-1===t.Cv)12345678!==t.Tv&&h.A.Ov(L,S,b,R,M,v,t.Tv,t.bv,t.vv);else if(I.st){const i=I.ZO[t.Cv];h.A.Ov(L,S,b,R,M,v,this.Lv(i,t.Tv),this.Lv(i,t.bv),this.Lv(i,t.vv))}else t.flat?h.A.Rv(L,S,b,R,M,v,t.Tv,t.bv,t.vv,d,m,A,y,a,_,g,c,u,t.Cv):h.A.Rv(L,S,b,R,M,v,t.Tv,t.bv,t.vv,f,E,p,a,y,g,_,u,c,t.Cv);if(!((T-b)*(M-v)-(O-v)*(S-b)<=0))if(h.A._v=T<0||b<0||S<0||T>w.A.Ev||b>w.A.Ev||S>w.A.Ev,I.DO&&this.gv(I.xl,I.Dl,O,v,M,T,b,S)&&(I.ff=s,I.uf=e),-1!==t.Cv){if(!I.st)return void h.A.Rv(T,b,S,O,v,M,t.Sv,t.vv,t.bv,d,m,A,y,a,_,g,c,u,t.Cv);const i=I.ZO[t.Cv];h.A.Ov(T,b,S,O,v,M,this.Lv(i,t.Sv),this.Lv(i,t.vv),this.Lv(i,t.bv))}else 12345678!==t.Sv&&h.A.Ov(T,b,S,O,v,M,t.Sv,t.vv,t.bv)};ov=(t,i,s,e,n,r,o)=>{let l=s.Bg.length;for(let t=0;t<l;t++){let i=s.Bg[t]-I.TO,l=s.Hg[t]-I.OO,a=s.Gg[t]-I.bO,c=a*r+i*o>>16;if(a=a*o-i*r>>16,i=c,c=l*n-a*e>>16,a=l*e+a*n>>16,l=c,a<50)return;s.Mv&&(A.A.kv[t]=i,A.A.xv[t]=l,A.A.Dv[t]=a),A.A.Nv[t]=h.A.na+((i<<9)/a|0),A.A.Pv[t]=h.A.ra+((l<<9)/a|0)}h.A.alpha=0,l=s.Fv.length;for(let e=0;e<l;e++){const n=s.Fv[e],r=s.Uv[e],o=s.Bv[e],l=A.A.Nv[n],a=A.A.Nv[r],c=A.A.Nv[o],f=A.A.Pv[n],u=A.A.Pv[r],d=A.A.Pv[o];if((l-a)*(d-u)-(f-u)*(c-a)>0)if(h.A._v=l<0||a<0||c<0||l>w.A.Ev||a>w.A.Ev||c>w.A.Ev,I.DO&&this.gv(I.xl,I.Dl,f,u,d,l,a,c)&&(I.ff=t,I.uf=i),s.Mv&&-1!==s.Mv[e])if(I.st){const t=I.ZO[s.Mv[e]];h.A.Ov(l,a,c,f,u,d,this.Lv(t,s.Gv[e]),this.Lv(t,s.Hv[e]),this.Lv(t,s.Wv[e]))}else s.flat?h.A.Rv(l,a,c,f,u,d,s.Gv[e],s.Hv[e],s.Wv[e],A.A.kv[0],A.A.xv[0],A.A.Dv[0],A.A.kv[1],A.A.kv[3],A.A.xv[1],A.A.xv[3],A.A.Dv[1],A.A.Dv[3],s.Mv[e]):h.A.Rv(l,a,c,f,u,d,s.Gv[e],s.Hv[e],s.Wv[e],A.A.kv[n],A.A.xv[n],A.A.Dv[n],A.A.kv[r],A.A.kv[o],A.A.xv[r],A.A.xv[o],A.A.Dv[r],A.A.Dv[o],s.Mv[e]);else 12345678!==s.Gv[e]&&h.A.Ov(l,a,c,f,u,d,s.Gv[e],s.Hv[e],s.Wv[e])}};nv=(t,i,s)=>{const h=this.tb[t][i][s];if(h===-I.Vf)return!1;if(h===I.Vf)return!0;{const h=i<<7,e=s<<7;return this.Yv(h+1,this.JO[t][i][s],e+1)&&this.Yv(h+128-1,this.JO[t][i+1][s],e+1)&&this.Yv(h+128-1,this.JO[t][i+1][s+1],e+128-1)&&this.Yv(h+1,this.JO[t][i][s+1],e+128-1)?(this.tb[t][i][s]=I.Vf,!0):(this.tb[t][i][s]=-I.Vf,!1)}};dv=(t,i,s,h)=>{if(!this.nv(t,i,s))return!1;const e=i<<7,n=s<<7,r=this.JO[t][i][s]-1,o=r-120,l=r-230,a=r-238;if(h<16){if(1===h){if(e>I.TO){if(!this.Yv(e,r,n))return!1;if(!this.Yv(e,r,n+128))return!1}if(t>0){if(!this.Yv(e,o,n))return!1;if(!this.Yv(e,o,n+128))return!1}return!!this.Yv(e,l,n)&&this.Yv(e,l,n+128)}if(2===h){if(n<I.bO){if(!this.Yv(e,r,n+128))return!1;if(!this.Yv(e+128,r,n+128))return!1}if(t>0){if(!this.Yv(e,o,n+128))return!1;if(!this.Yv(e+128,o,n+128))return!1}return!!this.Yv(e,l,n+128)&&this.Yv(e+128,l,n+128)}if(4===h){if(e<I.TO){if(!this.Yv(e+128,r,n))return!1;if(!this.Yv(e+128,r,n+128))return!1}if(t>0){if(!this.Yv(e+128,o,n))return!1;if(!this.Yv(e+128,o,n+128))return!1}return!!this.Yv(e+128,l,n)&&this.Yv(e+128,l,n+128)}if(8===h){if(n>I.bO){if(!this.Yv(e,r,n))return!1;if(!this.Yv(e+128,r,n))return!1}if(t>0){if(!this.Yv(e,o,n))return!1;if(!this.Yv(e+128,o,n))return!1}return!!this.Yv(e,l,n)&&this.Yv(e+128,l,n)}}return!!this.Yv(e+64,a,n+64)&&(16===h?this.Yv(e,l,n+128):32===h?this.Yv(e+128,l,n+128):64===h?this.Yv(e+128,l,n):128===h?this.Yv(e,l,n):(console.warn('Warning unsupported wall type!'),!0))};visible=(t,i,s,h)=>{if(this.nv(t,i,s)){const e=i<<7,n=s<<7;return this.Yv(e+1,this.JO[t][i][s]-h,n+1)&&this.Yv(e+128-1,this.JO[t][i+1][s]-h,n+1)&&this.Yv(e+128-1,this.JO[t][i+1][s+1]-h,n+128-1)&&this.Yv(e+1,this.JO[t][i][s+1]-h,n+128-1)}return!1};Iv=(t,i,s,h,e,n)=>{let r,o;if(i!==s||h!==e){for(r=i;r<=s;r++)for(o=h;o<=e;o++)if(this.tb[t][r][o]===-I.Vf)return!1;o=1+(i<<7);const l=2+(h<<7),a=this.JO[t][i][h]-n;if(!this.Yv(o,a,l))return!1;const c=(s<<7)-1;if(!this.Yv(c,a,l))return!1;const f=(e<<7)-1;return!!this.Yv(o,a,f)&&this.Yv(c,a,f)}return!!this.nv(t,i,h)&&(r=i<<7,o=h<<7,this.Yv(r+1,this.JO[t][i][h]-n,o+1)&&this.Yv(r+128-1,this.JO[t][i+1][h]-n,o+1)&&this.Yv(r+128-1,this.JO[t][i+1][h+1]-n,o+128-1)&&this.Yv(r+1,this.JO[t][i][h+1]-n,o+128-1))};Yv=(t,i,s)=>{for(let h=0;h<I.ju;h++){const e=I.uO[h];if(e)if(1===e.mode){const h=e.Db-t;if(h>0){const t=e.Pb+(e.$b*h>>8),n=e.Fb+(e.Jb*h>>8),r=e.xb+(e.Qb*h>>8),o=e.jg+(e.tv*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(2===e.mode){const h=t-e.Db;if(h>0){const t=e.Pb+(e.$b*h>>8),n=e.Fb+(e.Jb*h>>8),r=e.xb+(e.Qb*h>>8),o=e.jg+(e.tv*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(3===e.mode){const h=e.Pb-s;if(h>0){const s=e.Db+(e.iv*h>>8),n=e.Nb+(e.sv*h>>8),r=e.xb+(e.Qb*h>>8),o=e.jg+(e.tv*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(4===e.mode){const h=s-e.Pb;if(h>0){const s=e.Db+(e.iv*h>>8),n=e.Nb+(e.sv*h>>8),r=e.xb+(e.Qb*h>>8),o=e.jg+(e.tv*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(5===e.mode){const h=i-e.xb;if(h>0){const i=e.Db+(e.iv*h>>8),n=e.Nb+(e.sv*h>>8),r=e.Pb+(e.$b*h>>8),o=e.Fb+(e.Jb*h>>8);if(t>=i&&t<=n&&s>=r&&s<=o)return!0}}}return!1};gv=(t,i,s,h,e,n,r,o)=>{if(i<s&&i<h&&i<e)return!1;if(i>s&&i>h&&i>e)return!1;if(t<n&&t<r&&t<o)return!1;if(t>n&&t>r&&t>o)return!1;const l=(i-h)*(o-r)-(t-r)*(e-h);return((i-s)*(r-n)-(t-n)*(h-s))*l>0&&l*((i-e)*(n-o)-(t-o)*(s-e))>0};Lv=(t,i)=>((i=(127-i)*(127&t)/160|0)<2?i=2:i>126&&(i=126),(65408&t)+i)}},7121:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{}},4197:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{Vp;HI;Wp;Yp;index;GI;ul;fl;constructor(t,i,s,h,e,n,r){super(),this.Vp=i,this.HI=s,this.Wp=h,this.Yp=e,this.index=t,this.GI=n,r&&-1!==n.wl&&this.GI.delay?(this.ul=Math.random()*this.GI.dl|0,this.fl=Math.random()*this.GI.delay[this.ul]|0):(this.ul=-1,this.fl=0)}}},8412:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(9418),e=s(8665),n=s(8738),r=s(1312);class o extends h.A{static Tu=2;static bu=4;static Lu=8;static Ru=16;static Fu=32;static Du=64;static Su=128;type=null;draw(t){if(!this.type)return null;if(-1===this.Nu||-1===this.$m)return this.$g();const i=this.$g();if(!i)return null;const s=n.A.Ro[this.Nu],h=e.A.ZE(s.la(),!0,!s.Tg,!1);h.translate(-this.Zm,0,0),h.Ma(),s.GI&&s.GI.frames&&h.ka(s.GI.frames[this.$m]),h.Vg=null,h.Kg=null,128===s.Zg&&128===s.qg||h.scale(s.Zg,s.qg,s.Zg),h.xa(64+s.bg,850+s.vg,-30,-50,-30,!0);const r=[i,h],o=e.A.Vv(r,2);return 1===this.type.size&&(o.iC=!0),o}isVisible(){return null!==this.type}$g(){if(!this.type)return null;if(this.Ou>=0&&0===this.Xm){const t=r.A.Ro[this.Ou].frames;if(t){const i=t[this.Vm];let s=-1;if(this.CI>=0&&this.CI!==this.Sa){const t=r.A.Ro[this.CI].frames;t&&(s=t[this.QI])}return this.type.$g(i,s,r.A.Ro[this.Ou].s_)}}let t=-1;if(this.CI>=0){const i=r.A.Ro[this.CI].frames;i&&(t=i[this.QI])}const i=this.type.$g(t,-1,null);return i?(this.height=i.jg,i):null}}},3606:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{index;count;constructor(t,i){super(),this.index=t,this.count=i}}},9418:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(7121),e=s(1312),n=s(3867);class r extends h.A{x=0;z=0;LI=0;RI=!1;size=1;Sa=-1;$I=-1;oI=-1;aI=-1;fI=-1;dI=-1;e_=-1;ou=null;uu=100;cu=0;fu=0;pu=0;yu=0;du=-1e3;wu=0;Au=0;vu=-1;zm=0;jm=0;CI=-1;QI=0;JI=0;Ou=-1;Vm=0;Km=0;Xm=0;Ym=0;Nu=-1;$m=0;Jm=0;qm=0;Zm=0;Qm=0;iI=0;tI=0;sI=0;mu=0;Iu=0;hI=0;Vf=0;height=0;qI=0;pathLength=0;wf=new Int32Array(10);Af=new Int32Array(10);h_=new n.ds(10,!1);ZI=0;Eu=-1;gu=-1;Mu=-1;ku=-1;move(t,i,s){if(-1!==this.Ou&&e.A.Ro[this.Ou].priority<=1&&(this.Ou=-1),!t){const t=i-this.wf[0],h=s-this.Af[0];if(t>=-8&&t<=8&&h>=-8&&h<=8){this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.wf[t]=this.wf[t-1],this.Af[t]=this.Af[t-1],this.h_[t]=this.h_[t-1];return this.wf[0]=i,this.Af[0]=s,void(this.h_[0]=!1)}}this.pathLength=0,this.ZI=0,this.wf[0]=i,this.Af[0]=s,this.x=128*this.wf[0]+64*this.size,this.z=128*this.Af[0]+64*this.size}step(t,i){let s=this.wf[0],h=this.Af[0];0===i?(s--,h++):1===i?h++:2===i?(s++,h++):3===i?s--:4===i?s++:5===i?(s--,h--):6===i?h--:7===i&&(s++,h--),-1!==this.Ou&&e.A.Ro[this.Ou].priority<=1&&(this.Ou=-1),this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.wf[t]=this.wf[t-1],this.Af[t]=this.Af[t-1],this.h_[t]=this.h_[t-1];this.wf[0]=s,this.Af[0]=h,this.h_[0]=t}}},8268:(t,i,s)=>{s.d(i,{A:()=>d});var h=s(9418),e=s(8665),n=s(2679),r=s(8738),o=s(1312),l=s(8317),a=s(1302),c=s(3819),f=s(3867),u=s(9298);class d extends h.A{static Cu=1;static Tu=2;static bu=4;static Lu=8;static Ru=16;static Su=32;static xu=64;static Hm=128;static Du=256;static Pu=512;static Ra=[u.A.Kv,u.A.Xv,u.A.zv,u.A.jv,u.A.Zv,u.A.qv,u.A.$v,u.A.Jv,u.A.Qv,u.A.tL,u.A.iL,u.A.sL,u.A.hL,u.A.eL,u.A.nL,u.A.rL];static La=[[u.A.oL,u.A.lL,u.A.aL,u.A.cL,u.A.fL,u.A.uL,u.A.dL,u.A.wL,u.A.yL,u.A.pL,u.A.mL,u.A.IL],[u.A._L,u.A.EL,u.A.gL,u.A.CL,u.A.TL,u.A.OL,u.A.bL,u.A.vL,u.A.LL,u.A.RL,u.A.SL,u.A.ML,u.A.kL,u.A.xL,u.A.DL,u.A.NL],[u.A.NL-1,u.A._L+1,u.A.EL,u.A.gL,u.A.CL,u.A.TL,u.A.OL,u.A.bL,u.A.vL,u.A.LL,u.A.RL,u.A.SL,u.A.ML,u.A.kL,u.A.xL,u.A.DL],[u.A.PL,u.A.FL,u.A.UL,u.A.BL,u.A.HL,u.A.WL],[u.A.YL,u.A.VL,u.A.KL,u.A.XL,u.A.zL,u.A.jL,u.A.ZL,u.A.qL]];static So=new n.A(200);name=null;visible=!1;$L=0;ru=0;JL=new Uint16Array(12);QL=new Uint16Array(5);Ka=0;tR=0n;y=0;OI=0;bI=0;r_=0;l_=0;o_=0;TI=null;MI=0;kI=0;xI=0;DI=0;st=!1;draw(t){if(!this.visible)return null;let i=this.$g();if(this.height=i.jg,i.iC=!0,this.st)return i;if(-1!==this.Nu&&-1!==this.$m){const t=r.A.Ro[this.Nu],s=e.A.ZE(t.la(),!0,!t.Tg,!1);s.translate(-this.Zm,0,0),s.Ma(),t.GI&&t.GI.frames&&s.ka(t.GI.frames[this.$m]),s.Vg=null,s.Kg=null,128===t.Zg&&128===t.qg||s.scale(t.Zg,t.qg,t.Zg),s.xa(t.bg+64,t.vg+850,-30,-50,-30,!0);const h=[i,s];i=e.A.Vv(h,2)}if(this.TI&&(t>=this.bI&&(this.TI=null),t>=this.OI&&t<this.bI)){const t=this.TI;if(t){t.translate(this.l_-this.y,this.r_-this.x,this.o_-this.z),512===this.qI?(t.Xg(),t.Xg(),t.Xg()):1024===this.qI?(t.Xg(),t.Xg()):1536===this.qI&&t.Xg();const s=[i,t];i=e.A.Vv(s,2),512===this.qI?t.Xg():1024===this.qI?(t.Xg(),t.Xg()):1536===this.qI&&(t.Xg(),t.Xg(),t.Xg()),t.translate(this.y-this.l_,this.x-this.r_,this.z-this.o_)}}return i.iC=!0,i}isVisible(){return this.visible}read(t){t.Fc=0,this.$L=t.ZA,this.ru=t.ZA;for(let i=0;i<12;i++){const s=t.ZA;this.JL[i]=0===s?0:(s<<8)+t.ZA}for(let i=0;i<5;i++){let s=t.ZA;(s<0||s>=d.La[i].length)&&(s=0),this.QL[i]=s}this.Sa=t.KA,65535===this.Sa&&(this.Sa=-1),this.$I=t.KA,65535===this.$I&&(this.$I=-1),this.oI=t.KA,65535===this.oI&&(this.oI=-1),this.aI=t.KA,65535===this.aI&&(this.aI=-1),this.fI=t.KA,65535===this.fI&&(this.fI=-1),this.dI=t.KA,65535===this.dI&&(this.dI=-1),this.e_=t.KA,65535===this.e_&&(this.e_=-1),this.name=c.A.ga(c.A.Ca(t.Uc)),this.Ka=t.ZA,this.visible=!0,this.tR=0n;for(let t=0;t<12;t++)this.tR<<=0x4n,this.JL[t]>=256&&(this.tR+=BigInt(this.JL[t])-256n);this.JL[0]>=256&&(this.tR+=BigInt(this.JL[0])-256n>>4n),this.JL[1]>=256&&(this.tR+=BigInt(this.JL[1])-256n>>8n);for(let t=0;t<5;t++)this.tR<<=0x3n,this.tR+=BigInt(this.QL[t]);this.tR<<=0x1n,this.tR+=BigInt(this.$L)}ey(){if(!this.visible)return null;const t=new f.ds(12,null);let i=0;for(let s=0;s<12;s++){const h=this.JL[s];if(h>=256&&h<512&&(t[i++]=l.A.Ro[h-256].ey()),h>=512){const s=a.A.get(h-512).ey(this.$L);s&&(t[i++]=s)}}const s=e.A.ba(t,i);for(let t=0;t<5;t++)0!==this.QL[t]&&(s.va(d.La[t][0],d.La[t][this.QL[t]]),1===t&&s.va(d.Ra[0],d.Ra[this.QL[t]]));return s}$g(){let t=this.tR,i=-1,s=-1,h=-1,n=-1;if(this.Ou>=0&&0===this.Xm){const e=o.A.Ro[this.Ou];if(e.frames&&(i=e.frames[this.Vm]),this.CI>=0&&this.CI!==this.Sa){const t=o.A.Ro[this.CI].frames;t&&(s=t[this.QI])}e.SC>=0&&(h=e.SC,t+=BigInt(h-this.JL[5])<<8n),e.MC>=0&&(n=e.MC,t+=BigInt(n-this.JL[3])<<16n)}else if(this.CI>=0){const t=o.A.Ro[this.CI].frames;t&&(i=t[this.QI])}let r=d.So?.get(t);if(!r){const i=new f.ds(12,null);let s=0;for(let t=0;t<12;t++){let e=this.JL[t];if(n>=0&&3===t&&(e=n),h>=0&&5===t&&(e=h),e>=256&&e<512){const t=l.A.Ro[e-256].la();t&&(i[s++]=t)}if(e>=512){const t=a.A.get(e-512).RC(this.$L);t&&(i[s++]=t)}}r=e.A.ba(i,s);for(let t=0;t<5;t++)0!==this.QL[t]&&(r.va(d.La[t][0],d.La[t][this.QL[t]]),1===t&&r.va(d.Ra[0],d.Ra[this.QL[t]]));r.Ma(),r.xa(64,850,-30,-50,-30,!0),d.So?.put(t,r)}if(this.st)return r;const c=e.A.Jg(r,!0);return-1!==i&&-1!==s?c.Qg(i,s,o.A.Ro[this.Ou].s_):-1!==i&&c.ka(i),c.tC(),c.Vg=null,c.Kg=null,c}}},254:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8738),e=s(7121),n=s(8665);class r extends e.A{iR;level;sR;hR;eR;offsetY;FI;NI;nR;arc;target;mobile=!1;x=0;z=0;y=0;velocityX=0;rR=0;oR=0;velocityY=0;lR=0;LI=0;pitch=0;ul=0;fl=0;constructor(t,i,s,e,n,r,o,l,a,c,f){super(),this.iR=h.A.Ro[t],this.level=i,this.sR=s,this.hR=n,this.eR=e,this.FI=r,this.NI=o,this.nR=l,this.arc=a,this.target=c,this.offsetY=f}UI(t,i,s,h){if(!this.mobile){const i=t-this.sR,h=s-this.hR,e=Math.sqrt(i*i+h*h);this.x=this.sR+i*this.arc/e,this.z=this.hR+h*this.arc/e,this.y=this.eR}const e=this.NI+1-h;this.velocityX=(t-this.x)/e,this.rR=(s-this.z)/e,this.oR=Math.sqrt(this.velocityX*this.velocityX+this.rR*this.rR),this.mobile||(this.velocityY=-this.oR*Math.tan(.02454369*this.nR)),this.lR=2*(i-this.y-this.velocityY*e)/(e*e)}update(t){if(this.mobile=!0,this.x+=this.velocityX*t,this.z+=this.rR*t,this.y+=this.velocityY*t+.5*this.lR*t*t,this.velocityY+=this.lR*t,this.LI=325.949*Math.atan2(this.velocityX,this.rR)+1024&2047,this.pitch=325.949*Math.atan2(this.velocityY,this.oR)&2047,this.iR.GI&&this.iR.GI.delay)for(this.fl+=t;this.fl>this.iR.GI.delay[this.ul];)this.fl-=this.iR.GI.delay[this.ul]+1,this.ul++,this.ul>=this.iR.GI.dl&&(this.ul=0)}draw(){const t=this.iR.la(),i=n.A.ZE(t,!0,!this.iR.Tg,!1);return this.iR.GI&&this.iR.GI.frames&&(i.Ma(),i.ka(this.iR.GI.frames[this.ul]),i.Vg=null,i.Kg=null),128===this.iR.Zg&&128===this.iR.qg||i.scale(this.iR.Zg,this.iR.qg,this.iR.Zg),i.aR(this.pitch),i.xa(64+this.iR.bg,850+this.iR.vg,-30,-50,-30,!0),i}}},7628:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(7121),e=s(8738),n=s(8665);class r extends h.A{type;level;x;z;y;FI;BI=!1;ul=0;fl=0;constructor(t,i,s,h,n,r,o){super(),this.type=e.A.Ro[t],this.level=i,this.x=s,this.z=h,this.y=n,this.FI=r+o}update(t){if(this.type.GI&&this.type.GI.delay)for(this.fl+=t;this.fl>this.type.GI.delay[this.ul];)this.fl-=this.type.GI.delay[this.ul]+1,this.ul++,this.ul>=this.type.GI.dl&&(this.ul=0,this.BI=!0)}draw(){const t=this.type.la(),i=n.A.ZE(t,!0,!this.type.Tg,!1);return!this.BI&&this.type.GI&&this.type.GI.frames&&(i.Ma(),i.ka(this.type.GI.frames[this.ul]),i.Vg=null,i.Kg=null),128===this.type.Zg&&128===this.type.qg||i.scale(this.type.Zg,this.type.qg,this.type.Zg),0!==this.type.orientation&&(90===this.type.orientation?i.Xg():180===this.type.orientation?(i.Xg(),i.Xg()):270===this.type.orientation&&(i.Xg(),i.Xg(),i.Xg())),i.xa(64+this.type.bg,850+this.type.vg,-30,-50,-30,!0),i}}},9222:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;model;Eb;info;constructor(t,i,s,h,e,n){this.y=t,this.x=i,this.z=s,this.model=h,this.Eb=e,this.info=n}}},1161:(t,i,s)=>{s.d(i,{A:()=>h});class h{level;y;x;z;model;lv;LI;gb;Rb;Cb;Sb;Eb;info;mv=0;Vf=0;constructor(t,i,s,h,e,n,r,o,l,a,c,f,u){this.level=t,this.y=i,this.x=s,this.z=h,this.model=e,this.lv=n,this.LI=r,this.gb=o,this.Rb=l,this.Cb=a,this.Sb=c,this.Eb=f,this.info=u}}},5327:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{hp;Nd;x;z;Kp;angle;shape;NI;constructor(t,i,s,h,e,n,r,o){super(),this.hp=t,this.Nd=i,this.x=s,this.z=h,this.Kp=e,this.angle=n,this.shape=r,this.NI=o}}},2630:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{hp;Nd;x;z;Kp;angle;shape;ep;np;rp;constructor(t,i,s,h,e,n,r,o,l,a){super(),this.hp=t,this.Nd=i,this.x=s,this.z=h,this.Kp=e,this.angle=n,this.shape=r,this.ep=o,this.np=l,this.rp=a}}},5748:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;pv;yv;Av;Eb;offset;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.pv=h,this.yv=e,this.Av=n,this.Eb=r,this.offset=o}}},8256:(t,i,s)=>{s.d(i,{A:()=>h});class h{MI;xI;kI;DI;type;Db;Nb;Pb;Fb;xb;jg;mode=0;iv=0;sv=0;$b=0;Jb=0;Qb=0;tv=0;constructor(t,i,s,h,e,n,r,o,l,a,c){this.MI=t,this.xI=i,this.kI=s,this.DI=h,this.type=e,this.Db=n,this.Nb=r,this.Pb=o,this.Fb=l,this.xb=a,this.jg=c}}},3795:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1982),e=s(3867);class n extends h.A{level;x;z;ev;wb;Zb;lb=null;cb=null;yb=null;pb=null;fb=null;Ab=null;rb=null;ub=0;qb=0;ob=0;visible=!1;update=!1;Xb=!1;zb=0;fv=0;uv=0;av=0;constructor(t,i,s){super(),this.ev=this.level=t,this.x=i,this.z=s,this.wb=new e.ds(5,null),this.Zb=new Int32Array(5)}}},2771:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Nv=new Int32Array(6);static Pv=new Int32Array(6);static kv=new Int32Array(6);static xv=new Int32Array(6);static Dv=new Int32Array(6);static cR=[Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,2,6),Int8Array.of(1,3,5,7,2,8),Int8Array.of(1,3,5,7,2,8),Int8Array.of(1,3,5,7,11,12),Int8Array.of(1,3,5,7,11,12),Int8Array.of(1,3,5,7,13,14)];static fR=[Int8Array.of(0,1,2,3,0,0,1,3),Int8Array.of(1,1,2,3,1,0,1,3),Int8Array.of(0,1,2,3,1,0,1,3),Int8Array.of(0,0,1,2,0,0,2,4,1,0,4,3),Int8Array.of(0,0,1,4,0,0,4,3,1,1,2,4),Int8Array.of(0,0,4,3,1,0,1,2,1,0,2,4),Int8Array.of(0,1,2,4,1,0,1,4,1,0,4,3),Int8Array.of(0,4,1,2,0,4,2,5,1,0,4,5,1,0,5,3),Int8Array.of(0,4,1,2,0,4,2,3,0,4,3,5,1,0,4,5),Int8Array.of(0,0,4,5,1,4,1,2,1,4,2,3,1,4,3,5),Int8Array.of(0,0,1,5,0,1,4,5,0,1,2,4,1,0,5,3,1,5,4,3,1,4,2,3),Int8Array.of(1,0,1,5,1,1,4,5,1,1,2,4,0,0,5,3,0,5,4,3,0,4,2,3),Int8Array.of(1,0,5,4,1,0,1,5,0,0,4,3,0,4,5,3,0,5,2,3,0,1,2,5)];static uR=128;static dR=this.uR/2|0;static wR=this.uR/4|0;static AR=3*this.uR/4|0;Bg;Hg;Gg;Gv;Hv;Wv;Fv;Uv;Bv;Mv;flat;shape;angle;Yb;Vb;constructor(t,i,s,e,n,r,o,l,a,c,f,u,d,w,A,y,p,m,I){this.flat=!(p!==e||p!==w||p!==l),this.shape=i,this.angle=r,this.Yb=d,this.Vb=a;const _=h.cR[i],E=_.length;this.Bg=new Int32Array(E),this.Hg=new Int32Array(E),this.Gg=new Int32Array(E);const g=new Int32Array(E),C=new Int32Array(E),T=t*h.uR,O=m*h.uR;for(let t=0;t<E;t++){let i,a,f,d,m,E=_[t];!(1&E)&&E<=8&&(E=1+(E-r-r-1&7)),E>8&&E<=12&&(E=9+(E-r-9&3)),E>12&&E<=16&&(E=13+(E-r-13&3)),1===E?(i=T,a=O,f=p,d=o,m=c):2===E?(i=T+h.dR,a=O,f=p+e>>1,d=o+I>>1,m=c+s>>1):3===E?(i=T+h.uR,a=O,f=e,d=I,m=s):4===E?(i=T+h.uR,a=O+h.dR,f=e+w>>1,d=I+n>>1,m=s+A>>1):5===E?(i=T+h.uR,a=O+h.uR,f=w,d=n,m=A):6===E?(i=T+h.dR,a=O+h.uR,f=w+l>>1,d=n+y>>1,m=A+u>>1):7===E?(i=T,a=O+h.uR,f=l,d=y,m=u):8===E?(i=T,a=O+h.dR,f=l+p>>1,d=y+o>>1,m=u+c>>1):9===E?(i=T+h.dR,a=O+h.wR,f=p+e>>1,d=o+I>>1,m=c+s>>1):10===E?(i=T+h.AR,a=O+h.dR,f=e+w>>1,d=I+n>>1,m=s+A>>1):11===E?(i=T+h.dR,a=O+h.AR,f=w+l>>1,d=n+y>>1,m=A+u>>1):12===E?(i=T+h.wR,a=O+h.dR,f=l+p>>1,d=y+o>>1,m=u+c>>1):13===E?(i=T+h.wR,a=O+h.wR,f=p,d=o,m=c):14===E?(i=T+h.AR,a=O+h.wR,f=e,d=I,m=s):15===E?(i=T+h.AR,a=O+h.AR,f=w,d=n,m=A):(i=T+h.wR,a=O+h.AR,f=l,d=y,m=u),this.Bg[t]=i,this.Hg[t]=f,this.Gg[t]=a,g[t]=d,C[t]=m}const b=h.fR[i],v=b.length/4|0;this.Fv=new Int32Array(v),this.Uv=new Int32Array(v),this.Bv=new Int32Array(v),this.Gv=new Int32Array(v),this.Hv=new Int32Array(v),this.Wv=new Int32Array(v),this.Mv=-1!==f?new Int32Array(v):null;let L=0;for(let t=0;t<v;t++){const i=b[L];let s=b[L+1],h=b[L+2],e=b[L+3];L+=4,s<4&&(s=s-r&3),h<4&&(h=h-r&3),e<4&&(e=e-r&3),this.Fv[t]=s,this.Uv[t]=h,this.Bv[t]=e,0===i?(this.Gv[t]=g[s],this.Hv[t]=g[h],this.Wv[t]=g[e],this.Mv&&(this.Mv[t]=-1)):(this.Gv[t]=C[s],this.Hv[t]=C[h],this.Wv[t]=C[e],this.Mv&&(this.Mv[t]=f))}}}},5518:(t,i,s)=>{s.d(i,{A:()=>h});class h{static $T=0;static ab=1;static yR=2;static pR=3;static mR=4;static IR=5;static dR=6;static wR=7;static AR=8;static _R=9;static ER=10;static gR=11}},3479:(t,i,s)=>{s.d(i,{A:()=>h});class h{Sv;vv;Tv;bv;Cv;color;flat;constructor(t,i,s,h,e,n,r){this.Sv=t,this.vv=i,this.Tv=s,this.bv=h,this.Cv=e,this.color=n,this.flat=r}}},6855:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;cv;wv;mb;Ib;Eb;info;constructor(t,i,s,h,e,n,r,o,l){this.y=t,this.x=i,this.z=s,this.cv=h,this.wv=e,this.mb=n,this.Ib=r,this.Eb=o,this.info=l}}},7441:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;type;angle;model;Eb;info;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.type=h,this.angle=e,this.model=n,this.Eb=r,this.info=o}}},7536:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e{CR;TR;constructor(t){this.TR=[],this.CR=t;for(let i=0;i<t;i++)this.TR[i]=new h.A}get(t){const i=this.TR[Number(t&BigInt(this.CR-1))];if(!i.next)return null;for(let s=i.next;s!==i;s=s.next)if(s&&s.key===t)return s;return null}put(t,i){i.Im&&i.sy();const s=this.TR[Number(t&BigInt(this.CR-1))];i.Im=s.Im,i.next=s,i.Im&&(i.Im.next=i),i.next.Im=i,i.key=t}}},4474:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{OR;bR;constructor(){super(),this.OR=this,this.bR=this}vR(){this.bR&&this.OR&&(this.bR.OR=this.OR,this.OR.bR=this.bR,this.OR=null,this.bR=null)}}},3819:(t,i,s)=>{s.d(i,{A:()=>h});class h{static LR=['_','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9'];static ld=t=>{t=t.trim();let i=0n;for(let s=0;s<t.length&&s<12;s++){const h=t.charCodeAt(s);i*=37n,h>=65&&h<=90?i+=BigInt(h+1-65):h>=97&&h<=122?i+=BigInt(h+1-97):h>=48&&h<=57&&(i+=BigInt(h+27-48))}return i};static Ca=t=>{if(t<0n||t>=6582952005840035281n)return'invalid_name';if(t%37n===0n)return'invalid_name';let i=0;const s=Array(12);for(;0n!==t;){const h=t;t/=37n,s[11-i++]=this.LR[Number(h-37n*t)]}return s.slice(12-i).join('')};static dA=t=>{const i=[...t.toLowerCase()];let s=!0;for(let t=0;t<i.length;t++){const h=i[t];s&&h>='a'&&h<='z'&&(i[t]=h.toUpperCase(),s=!1),'.'!==h&&'!'!==h||(s=!0)}return i.join('')};static Dc=t=>{let i='';for(let s=0;s<t.length;s++)i+='*';return i};static Ga=t=>(t>>24&255)+'.'+(t>>16&255)+'.'+(t>>8&255)+'.'+(255&t);static ga=t=>{if(0===t.length)return t;const i=[...t];for(let t=0;t<i.length;t++)'_'===i[t]&&(i[t]=' ',t+1<i.length&&i[t+1]>='a'&&i[t+1]<='z'&&(i[t+1]=String.fromCharCode(i[t+1].charCodeAt(0)+'A'.charCodeAt(0)-97)));return i[0]>='a'&&i[0]<='z'&&(i[0]=String.fromCharCode(i[0].charCodeAt(0)+'A'.charCodeAt(0)-97)),i.join('')};static zE=t=>{const i=t.toUpperCase();let s=0n;for(let t=0;t<i.length;t++)s=61n*s+BigInt(i.charCodeAt(t))-32n,s=s+(s>>56n)&0xffffffffffffffn;return s}}},6666:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e{RR;cursor=null;constructor(){const t=new h.A;t.next=t,t.Im=t,this.RR=t}n_(t){t.Im&&t.sy(),t.Im=this.RR.Im,t.next=this.RR,t.Im&&(t.Im.next=t),t.next.Im=t}bA(t){t.Im&&t.sy(),t.Im=this.RR,t.next=this.RR.next,t.Im.next=t,t.next&&(t.next.Im=t)}hv(){const t=this.RR.next;return t===this.RR?null:(t?.sy(),t)}head(){const t=this.RR.next;return t===this.RR?(this.cursor=null,null):(this.cursor=t?.next||null,t)}pm(){const t=this.RR.Im;return t===this.RR?(this.cursor=null,null):(this.cursor=t?.Im||null,t)}next(){const t=this.cursor;return t===this.RR?(this.cursor=null,null):(this.cursor=t?.next||null,t)}Im(){const t=this.cursor;return t===this.RR?(this.cursor=null,null):(this.cursor=t?.Im||null,t)}clear(){for(;;){const t=this.RR.next;if(t===this.RR)return;t?.sy()}}}},1982:(t,i,s)=>{s.d(i,{A:()=>h});class h{key;next;Im;constructor(){this.key=0n,this.next=this,this.Im=this}sy(){this.Im&&this.next&&(this.Im.next=this.next,this.next.Im=this.Im,this.next=null,this.Im=null)}}},2679:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(2512),e=s(7536);class n{SR;MR;history;available;constructor(t){this.SR=t,this.available=t,this.MR=new e.A(1024),this.history=new h.A}get(t){const i=this.MR.get(t);return i&&this.history.push(i),i}put(t,i){if(0===this.available){const t=this.history.pop();t?.sy(),t?.vR()}else this.available--;this.MR.put(t,i),this.history.push(i)}clear(){const t=this.history.pop();t?(t.sy(),t.vR()):this.available=this.SR}}},2512:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(4474);class e{head;constructor(){this.head=new h.A}push(t){t.bR&&t.vR(),t.bR=this.head.bR,t.OR=this.head,t.bR&&(t.bR.OR=t),t.OR.bR=t}pop(){const t=this.head.OR;return t===this.head?null:(t?.vR(),t)}}},8534:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(3867);class n{static Ro=[];static ec=t=>{const i=new h.A(t.read('base_head.dat')),s=new h.A(t.read('base_type.dat')),r=new h.A(t.read('base_label.dat')),o=i.KA;i.Fc+=2;for(let t=0;t<o;t++){const t=i.KA,h=i.ZA,o=new Uint8Array(h),l=new e.ds(h,null);for(let t=0;t<h;t++){o[t]=s.ZA;const i=r.ZA,h=new Uint8Array(i);for(let t=0;t<i;t++)h[t]=r.ZA;l[t]=h}this.Ro[t]=new n,this.Ro[t].length=h,this.Ro[t].types=o,this.Ro[t].labels=l}};length=0;types=null;labels=null}},6730:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(8534),e=s(1069);class n{static Ro=[];static ec=t=>{const i=new e.A(t.read('frame_head.dat')),s=new e.A(t.read('frame_tran1.dat')),r=new e.A(t.read('frame_tran2.dat')),o=new e.A(t.read('frame_del.dat')),l=i.KA;i.Fc+=2;const a=new Int32Array(500),c=new Int32Array(500),f=new Int32Array(500),u=new Int32Array(500);for(let t=0;t<l;t++){const t=i.KA,e=this.Ro[t]=new n;e.delay=o.ZA;const l=i.KA,d=h.A.Ro[l];e.kR=d;const w=i.ZA;let A=-1,y=0;for(let t=0;t<w;t++){if(!d.types)throw new Error('SeqBase not loaded!!!');const i=s.ZA;if(i>0){if(0!==d.types[t])for(let i=t-1;i>A;i--)if(0===d.types[i]){a[y]=i,c[y]=0,f[y]=0,u[y]=0,y++;break}a[y]=t;let s=0;3===d.types[a[y]]&&(s=128),c[y]=1&i?r.xR:s,f[y]=2&i?r.xR:s,u[y]=4&i?r.xR:s,A=t,y++}}e.length=y,e.DR=new Int32Array(y),e.x=new Int32Array(y),e.y=new Int32Array(y),e.z=new Int32Array(y);for(let t=0;t<y;t++)e.DR[t]=a[t],e.x[t]=c[t],e.y[t]=f[t],e.z[t]=u[t]}};delay=0;kR=null;length=0;DR=null;x=null;y=null;z=null}},7854:(t,i,s)=>{s.d(i,{D_:()=>h,jo:()=>e,NR:()=>o,PR:()=>r,FR:()=>n});const h=document.getElementById('canvas'),e=h.getContext('2d',{willReadFrequently:!0}),n=document.createElement('canvas'),r=document.createElement('img'),o=n.getContext('2d',{willReadFrequently:!0})},9298:(t,i,s)=>{s.d(i,{A:()=>h});class h{static RED=16711680;static GREEN=65280;static BLUE=255;static Gl=16776960;static bc=65535;static vc=16711935;static _l=16777215;static Bl=0;static UR=16748608;static sd=8388608;static td=128;static BR=16756736;static GR=16740352;static HR=16723968;static WR=12648192;static YR=8453888;static VR=4259584;static yc=9179409;static Dd=6116423;static il=2301979;static sl=5063219;static el=7759444;static rl=3353893;static hd=8388736;static ed=13350793;static Uu=Int32Array.of(h.Gl,h.RED,h.GREEN,h.bc,h.vc,h._l);static oL=6798;static lL=107;static aL=10283;static cL=16;static fL=4797;static uL=7744;static dL=5799;static wL=4634;static yL=33697;static pL=22433;static mL=2983;static IL=54193;static _L=8741;static EL=12;static gL=64030;static CL=43162;static TL=7735;static OL=8404;static bL=1701;static vL=38430;static LL=24094;static RL=10153;static SL=56621;static ML=4783;static kL=1341;static xL=16578;static DL=35003;static NL=25239;static Kv=9104;static Xv=10275;static zv=7595;static jv=3610;static Zv=7975;static qv=8526;static $v=918;static Jv=38802;static Qv=24466;static tL=10145;static iL=58654;static sL=5027;static hL=1457;static eL=16565;static nL=34991;static rL=25486;static PL=4626;static FL=11146;static UL=6439;static BL=12;static HL=4758;static WL=10270;static qL=4574;static YL=4550;static VL=4537;static KL=5681;static XL=5673;static zL=5790;static jL=6806;static ZL=8076}},8950:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(4474);class e extends h.A{static nc=new Int32Array;static oC=0;static lC=0;static top=0;static bottom=0;static left=0;static right=0;static Ev=0;static KR=0;static XR=0;static bind=(t,i,s)=>{this.nc=t,this.oC=i,this.lC=s,this.yl(0,0,i,s)};static Gu=()=>{this.left=0,this.top=0,this.right=this.oC,this.bottom=this.lC,this.Ev=this.right-1,this.KR=this.right/2|0};static yl=(t,i,s,h)=>{t<0&&(t=0),i<0&&(i=0),s>this.oC&&(s=this.oC),h>this.lC&&(h=this.lC),this.top=i,this.bottom=h,this.left=t,this.right=s,this.Ev=this.right-1,this.KR=this.right/2|0,this.XR=this.bottom/2|0};static clear=()=>{const t=this.oC*this.lC;for(let i=0;i<t;i++)this.nc[i]=0};static Il=(t,i,s,h,e)=>{this.nl(t,i,e,s),this.nl(t,i+h-1,e,s),this.hl(t,i,e,h),this.hl(t+s-1,i,e,h)};static nl=(t,i,s,h)=>{if(i<this.top||i>=this.bottom)return;t<this.left&&(h-=this.left-t,t=this.left),t+h>this.right&&(h=this.right-t);const e=t+i*this.oC;for(let t=0;t<h;t++)this.nc[e+t]=s};static hl=(t,i,s,h)=>{if(t<this.left||t>=this.right)return;i<this.top&&(h-=this.top-i,i=this.top),i+h>this.bottom&&(h=this.bottom-i);const e=t+i*this.oC;for(let t=0;t<h;t++)this.nc[e+t*this.oC]=s};static Zu=(t,i,s,h,e)=>{const n=Math.abs(s-t),r=Math.abs(h-i),o=t<s?1:-1,l=i<h?1:-1;let a=n-r;for(;t>=this.left&&t<this.right&&i>=this.top&&i<this.bottom&&(this.nc[t+i*this.oC]=e),t!==s||i!==h;){const s=2*a;s>-r&&(a-=r,t+=o),s<n&&(a+=n,i+=l)}};static fillRect=(t,i,s,h,e)=>{t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const n=this.oC-s;let r=t+i*this.oC;for(let t=-h;t<0;t++){for(let t=-s;t<0;t++)this.nc[r++]=e;r+=n}};static zR(t,i,s,h,e,n){t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const r=256-n,o=(e>>16&255)*n,l=(e>>8&255)*n,a=(255&e)*n,c=this.oC-s;let f=t+i*this.oC;for(let t=0;t<h;t++){for(let t=-s;t<0;t++){const t=(o+(this.nc[f]>>16&255)*r>>8<<16)+(l+(this.nc[f]>>8&255)*r>>8<<8)+(a+(255&this.nc[f])*r>>8);this.nc[f++]=t}f+=c}}static jR(t,i,s,h,e){const n=256-e,r=(h>>16&255)*e,o=(h>>8&255)*e,l=(255&h)*e;let a=i-s;a<0&&(a=0);let c=i+s;c>=this.lC&&(c=this.lC-1);for(let h=a;h<=c;h++){const e=h-i,a=0|Math.sqrt(s*s-e*e);let c=t-a;c<0&&(c=0);let f=t+a;f>=this.oC&&(f=this.oC-1);let u=c+h*this.oC;for(let t=c;t<=f;t++){const t=(r+(this.nc[u]>>16&255)*n>>8<<16)+(o+(this.nc[u]>>8&255)*n>>8<<8)+(l+(255&this.nc[u])*n>>8);this.nc[u++]=t}}}static ZR=(t,i,s)=>{t<this.left||t>=this.right||i<this.top||i>=this.bottom||(this.nc[t+i*this.oC]=s)}}},4583:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8950),e=s(1673),n=s(3867);class r extends h.A{static st=!1;static qR=new Int32Array(512);static $R=new Int32Array(2048);static sin=new Int32Array(2048);static cos=new Int32Array(2048);static palette=new Int32Array(65536);static c_=new n.ds(50,null);static JR=0;static oc=new Int32Array;static na=0;static ra=0;static aC=!0;static _v=!1;static alpha=0;static QR=null;static tS=new n.ds(50,null);static iS=0;static Vf=0;static a_=new Int32Array(50);static sS=new n.ds(50,null);static hS=!1;static eS=new n.ds(50,!1);static nS=new Int32Array(50);static{for(let t=1;t<512;t++)this.qR[t]=32768/t|0;for(let t=1;t<2048;t++)this.$R[t]=65536/t|0;for(let t=0;t<2048;t++)this.sin[t]=65536*Math.sin(.0030679615757712823*t)|0,this.cos[t]=65536*Math.cos(.0030679615757712823*t)|0}static bo=()=>{this.qR=null,this.qR=null,this.sin=null,this.cos=null,this.oc=null,this.c_=null,this.eS=null,this.nS=null,this.QR=null,this.tS=null,this.a_=null,this.palette=null,this.sS=null,console.log('Draw3D unloaded!')};static N_=()=>{this.oc=new Int32Array(h.A.lC);for(let t=0;t<h.A.lC;t++)this.oc[t]=h.A.oC*t;this.na=h.A.oC/2|0,this.ra=h.A.lC/2|0};static rc=(t,i)=>{this.oc=new Int32Array(i);for(let s=0;s<i;s++)this.oc[s]=t*s;this.na=t/2|0,this.ra=i/2|0};static Pp=()=>{this.QR=null,this.tS.fill(null)};static ic=t=>{this.JR=0;for(let i=0;i<50;i++)try{this.c_[i]=e.A.za(t,i.toString()),this.st&&128===this.c_[i]?.Pl?this.c_[i]?.rS():this.c_[i]?.wC(),this.JR++}catch(t){}};static QT=t=>{if(0!==this.nS[t])return this.nS[t];const i=this.sS[t];if(!i)return 0;let s=0,h=0,e=0;const n=i.length;for(let t=0;t<n;t++)s+=i[t]>>16&255,h+=i[t]>>8&255,e+=255&i[t];let r=(s/n<<16)+(h/n<<8)+(e/n|0);return r=this.oS(r,1.4),0===r&&(r=1),this.nS[t]=r,r};static sc=t=>{const i=t+.03*Math.random()-.015;let s=0;for(let t=0;t<512;t++){const h=(t/8|0)/64+.0078125,e=(7&t)/8+.0625;for(let t=0;t<128;t++){const n=t/128;let r=n,o=n,l=n;if(0!==e){let t;t=n<.5?n*(e+1):n+e-n*e;const i=2*n-t;let s=h+.3333333333333333;s>1&&s--;let a=h-.3333333333333333;a<0&&a++,r=6*s<1?i+6*(t-i)*s:2*s<1?t:3*s<2?i+(t-i)*(.6666666666666666-s)*6:i,o=6*h<1?i+6*(t-i)*h:2*h<1?t:3*h<2?i+(t-i)*(.6666666666666666-h)*6:i,l=6*a<1?i+6*(t-i)*a:2*a<1?t:3*a<2?i+(t-i)*(.6666666666666666-a)*6:i}const a=((256*r|0)<<16)+((256*o|0)<<8)+(256*l|0);this.palette[s++]=this.oS(a,i)}}for(let t=0;t<50;t++){const s=this.c_[t];if(!s)continue;const h=s.palette;this.sS[t]=new Int32Array(h.length);for(let s=0;s<h.length;s++){const e=this.sS[t];e&&(e[s]=this.oS(h[s],i))}}for(let t=0;t<50;t++)this.f_(t)};static oS=(t,i)=>{const s=(t>>16)/256,h=(t>>8&255)/256,e=(255&t)/256;return((256*Math.pow(s,i)|0)<<16)+((256*Math.pow(h,i)|0)<<8)+(256*Math.pow(e,i)|0)};static hc=t=>{this.QR||(this.iS=t,this.st?this.QR=new n.Kn(t,16384):this.QR=new n.Kn(t,65536),this.tS.fill(null))};static Ov=(t,i,s,e,n,o,l,a,c)=>{let f=0,u=0;n!==e&&(f=(i-t<<16)/(n-e)|0,u=(a-l<<15)/(n-e)|0);let d=0,w=0;o!==n&&(d=(s-i<<16)/(o-n)|0,w=(c-a<<15)/(o-n)|0);let A=0,y=0;if(o!==e&&(A=(t-s<<16)/(e-o)|0,y=(l-c<<15)/(e-o)|0),e<=n&&e<=o){if(e<h.A.bottom)if(n>h.A.bottom&&(n=h.A.bottom),o>h.A.bottom&&(o=h.A.bottom),n<o)if(s=t<<=16,c=l<<=15,e<0&&(s-=A*e,t-=f*e,c-=y*e,l-=u*e,e=0),i<<=16,a<<=15,n<0&&(i-=d*n,a-=w*n,n=0),e!==n&&A<f||e===n&&A>d)for(o-=n,n-=e,e=r.oc[e];;){if(--n<0)for(;;){if(--o<0)return;this.lS(s>>16,i>>16,c>>7,a>>7,h.A.nc,e,0),s+=A,i+=d,c+=y,a+=w,e+=h.A.oC}this.lS(s>>16,t>>16,c>>7,l>>7,h.A.nc,e,0),s+=A,t+=f,c+=y,l+=u,e+=h.A.oC}else for(o-=n,n-=e,e=r.oc[e];;){if(--n<0)for(;;){if(--o<0)return;this.lS(i>>16,s>>16,a>>7,c>>7,h.A.nc,e,0),s+=A,i+=d,c+=y,a+=w,e+=h.A.oC}this.lS(t>>16,s>>16,l>>7,c>>7,h.A.nc,e,0),s+=A,t+=f,c+=y,l+=u,e+=h.A.oC}else if(i=t<<=16,a=l<<=15,e<0&&(i-=A*e,t-=f*e,a-=y*e,l-=u*e,e=0),s<<=16,c<<=15,o<0&&(s-=d*o,c-=w*o,o=0),e!==o&&A<f||e===o&&d>f)for(n-=o,o-=e,e=r.oc[e];;){if(--o<0)for(;;){if(--n<0)return;this.lS(s>>16,t>>16,c>>7,l>>7,h.A.nc,e,0),s+=d,t+=f,c+=w,l+=u,e+=h.A.oC}this.lS(i>>16,t>>16,a>>7,l>>7,h.A.nc,e,0),i+=A,t+=f,a+=y,l+=u,e+=h.A.oC}else for(n-=o,o-=e,e=r.oc[e];;){if(--o<0)for(;;){if(--n<0)return;this.lS(t>>16,s>>16,l>>7,c>>7,h.A.nc,e,0),s+=d,t+=f,c+=w,l+=u,e+=h.A.oC}this.lS(t>>16,i>>16,l>>7,a>>7,h.A.nc,e,0),i+=A,t+=f,a+=y,l+=u,e+=h.A.oC}}else if(n<=o){if(n<h.A.bottom)if(o>h.A.bottom&&(o=h.A.bottom),e>h.A.bottom&&(e=h.A.bottom),o<e)if(t=i<<=16,l=a<<=15,n<0&&(t-=f*n,i-=d*n,l-=u*n,a-=w*n,n=0),s<<=16,c<<=15,o<0&&(s-=A*o,c-=y*o,o=0),n!==o&&f<d||n===o&&f>A)for(e-=o,o-=n,n=r.oc[n];;){if(--o<0)for(;;){if(--e<0)return;this.lS(t>>16,s>>16,l>>7,c>>7,h.A.nc,n,0),t+=f,s+=A,l+=u,c+=y,n+=h.A.oC}this.lS(t>>16,i>>16,l>>7,a>>7,h.A.nc,n,0),t+=f,i+=d,l+=u,a+=w,n+=h.A.oC}else for(e-=o,o-=n,n=r.oc[n];;){if(--o<0)for(;;){if(--e<0)return;this.lS(s>>16,t>>16,c>>7,l>>7,h.A.nc,n,0),t+=f,s+=A,l+=u,c+=y,n+=h.A.oC}this.lS(i>>16,t>>16,a>>7,l>>7,h.A.nc,n,0),t+=f,i+=d,l+=u,a+=w,n+=h.A.oC}else if(s=i<<=16,c=a<<=15,n<0&&(s-=f*n,i-=d*n,c-=u*n,a-=w*n,n=0),t<<=16,l<<=15,e<0&&(t-=A*e,l-=y*e,e=0),o-=e,e-=n,n=r.oc[n],f<d)for(;;){if(--e<0)for(;;){if(--o<0)return;this.lS(t>>16,i>>16,l>>7,a>>7,h.A.nc,n,0),t+=A,i+=d,l+=y,a+=w,n+=h.A.oC}this.lS(s>>16,i>>16,c>>7,a>>7,h.A.nc,n,0),s+=f,i+=d,c+=u,a+=w,n+=h.A.oC}else for(;;){if(--e<0)for(;;){if(--o<0)return;this.lS(i>>16,t>>16,a>>7,l>>7,h.A.nc,n,0),t+=A,i+=d,l+=y,a+=w,n+=h.A.oC}this.lS(i>>16,s>>16,a>>7,c>>7,h.A.nc,n,0),s+=f,i+=d,c+=u,a+=w,n+=h.A.oC}}else if(o<h.A.bottom)if(e>h.A.bottom&&(e=h.A.bottom),n>h.A.bottom&&(n=h.A.bottom),e<n)if(i=s<<=16,a=c<<=15,o<0&&(i-=d*o,s-=A*o,a-=w*o,c-=y*o,o=0),t<<=16,l<<=15,e<0&&(t-=f*e,l-=u*e,e=0),n-=e,e-=o,o=r.oc[o],d<A)for(;;){if(--e<0)for(;;){if(--n<0)return;this.lS(i>>16,t>>16,a>>7,l>>7,h.A.nc,o,0),i+=d,t+=f,a+=w,l+=u,o+=h.A.oC}this.lS(i>>16,s>>16,a>>7,c>>7,h.A.nc,o,0),i+=d,s+=A,a+=w,c+=y,o+=h.A.oC}else for(;;){if(--e<0)for(;;){if(--n<0)return;this.lS(t>>16,i>>16,l>>7,a>>7,h.A.nc,o,0),i+=d,t+=f,a+=w,l+=u,o+=h.A.oC}this.lS(s>>16,i>>16,c>>7,a>>7,h.A.nc,o,0),i+=d,s+=A,a+=w,c+=y,o+=h.A.oC}else if(t=s<<=16,l=c<<=15,o<0&&(t-=d*o,s-=A*o,l-=w*o,c-=y*o,o=0),i<<=16,a<<=15,n<0&&(i-=f*n,a-=u*n,n=0),e-=n,n-=o,o=r.oc[o],d<A)for(;;){if(--n<0)for(;;){if(--e<0)return;this.lS(i>>16,s>>16,a>>7,c>>7,h.A.nc,o,0),i+=f,s+=A,a+=u,c+=y,o+=h.A.oC}this.lS(t>>16,s>>16,l>>7,c>>7,h.A.nc,o,0),t+=d,s+=A,l+=w,c+=y,o+=h.A.oC}else for(;;){if(--n<0)for(;;){if(--e<0)return;this.lS(s>>16,i>>16,c>>7,a>>7,h.A.nc,o,0),i+=f,s+=A,a+=u,c+=y,o+=h.A.oC}this.lS(s>>16,t>>16,c>>7,l>>7,h.A.nc,o,0),t+=d,s+=A,l+=w,c+=y,o+=h.A.oC}};static lS=(t,i,s,e,n,o,l)=>{let a;if(r.aC){let c;if(r._v){if(c=i-t>3?(e-s)/(i-t)|0:0,i>h.A.Ev&&(i=h.A.Ev),t<0&&(s-=t*c,t=0),t>=i)return;o+=t,l=i-t>>2,c<<=2}else{if(!(t<i))return;o+=t,c=(l=i-t>>2)>0?(e-s)*r.qR[l]>>15:0}if(0===r.alpha)for(;;){if(--l<0){if((l=i-t&3)>0){a=r.palette[s>>8];do{n[o++]=a,l--}while(l>0);return}break}a=r.palette[s>>8],s+=c,n[o++]=a,n[o++]=a,n[o++]=a,n[o++]=a}else{const h=r.alpha,e=256-r.alpha;for(;;){if(--l<0){if((l=i-t&3)>0){a=r.palette[s>>8],a=((16711935&a)*e>>8&16711935)+((65280&a)*e>>8&65280);do{n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),l--}while(l>0)}break}a=r.palette[s>>8],s+=c,a=((16711935&a)*e>>8&16711935)+((65280&a)*e>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280)}}}else if(t<i){const c=(e-s)/(i-t)|0;if(r._v&&(i>h.A.Ev&&(i=h.A.Ev),t<0&&(s-=t*c,t=0),t>=i))return;if(o+=t,l=i-t,0===r.alpha)do{n[o++]=r.palette[s>>8],s+=c,l--}while(l>0);else{const t=r.alpha,i=256-r.alpha;do{a=r.palette[s>>8],s+=c,a=((16711935&a)*i>>8&16711935)+((65280&a)*i>>8&65280),n[o++]=a+((16711935&n[o])*t>>8&16711935)+((65280&n[o])*t>>8&65280),l--}while(l>0)}}};static aS=(t,i,s,e,n,r,o)=>{let l=0;n!==e&&(l=(i-t<<16)/(n-e)|0);let a=0;r!==n&&(a=(s-i<<16)/(r-n)|0);let c=0;if(r!==e&&(c=(t-s<<16)/(e-r)|0),e<=n&&e<=r){if(e<h.A.bottom)if(n>h.A.bottom&&(n=h.A.bottom),r>h.A.bottom&&(r=h.A.bottom),n<r)if(s=t<<=16,e<0&&(s-=c*e,t-=l*e,e=0),i<<=16,n<0&&(i-=a*n,n=0),e!==n&&c<l||e===n&&c>a)for(r-=n,n-=e,e=this.oc[e];;){if(--n<0)for(;;){if(--r<0)return;this.cS(s>>16,i>>16,h.A.nc,e,o),s+=c,i+=a,e+=h.A.oC}this.cS(s>>16,t>>16,h.A.nc,e,o),s+=c,t+=l,e+=h.A.oC}else for(r-=n,n-=e,e=this.oc[e];;){if(--n<0)for(;;){if(--r<0)return;this.cS(i>>16,s>>16,h.A.nc,e,o),s+=c,i+=a,e+=h.A.oC}this.cS(t>>16,s>>16,h.A.nc,e,o),s+=c,t+=l,e+=h.A.oC}else if(i=t<<=16,e<0&&(i-=c*e,t-=l*e,e=0),s<<=16,r<0&&(s-=a*r,r=0),e!==r&&c<l||e===r&&a>l)for(n-=r,r-=e,e=this.oc[e];;){if(--r<0)for(;;){if(--n<0)return;this.cS(s>>16,t>>16,h.A.nc,e,o),s+=a,t+=l,e+=h.A.oC}this.cS(i>>16,t>>16,h.A.nc,e,o),i+=c,t+=l,e+=h.A.oC}else for(n-=r,r-=e,e=this.oc[e];;){if(--r<0)for(;;){if(--n<0)return;this.cS(t>>16,s>>16,h.A.nc,e,o),s+=a,t+=l,e+=h.A.oC}this.cS(t>>16,i>>16,h.A.nc,e,o),i+=c,t+=l,e+=h.A.oC}}else if(n<=r){if(n<h.A.bottom)if(r>h.A.bottom&&(r=h.A.bottom),e>h.A.bottom&&(e=h.A.bottom),r<e)if(t=i<<=16,n<0&&(t-=l*n,i-=a*n,n=0),s<<=16,r<0&&(s-=c*r,r=0),n!==r&&l<a||n===r&&l>c)for(e-=r,r-=n,n=this.oc[n];;){if(--r<0)for(;;){if(--e<0)return;this.cS(t>>16,s>>16,h.A.nc,n,o),t+=l,s+=c,n+=h.A.oC}this.cS(t>>16,i>>16,h.A.nc,n,o),t+=l,i+=a,n+=h.A.oC}else for(e-=r,r-=n,n=this.oc[n];;){if(--r<0)for(;;){if(--e<0)return;this.cS(s>>16,t>>16,h.A.nc,n,o),t+=l,s+=c,n+=h.A.oC}this.cS(i>>16,t>>16,h.A.nc,n,o),t+=l,i+=a,n+=h.A.oC}else if(s=i<<=16,n<0&&(s-=l*n,i-=a*n,n=0),t<<=16,e<0&&(t-=c*e,e=0),l<a)for(r-=e,e-=n,n=this.oc[n];;){if(--e<0)for(;;){if(--r<0)return;this.cS(t>>16,i>>16,h.A.nc,n,o),t+=c,i+=a,n+=h.A.oC}this.cS(s>>16,i>>16,h.A.nc,n,o),s+=l,i+=a,n+=h.A.oC}else for(r-=e,e-=n,n=this.oc[n];;){if(--e<0)for(;;){if(--r<0)return;this.cS(i>>16,t>>16,h.A.nc,n,o),t+=c,i+=a,n+=h.A.oC}this.cS(i>>16,s>>16,h.A.nc,n,o),s+=l,i+=a,n+=h.A.oC}}else if(r<h.A.bottom)if(e>h.A.bottom&&(e=h.A.bottom),n>h.A.bottom&&(n=h.A.bottom),e<n)if(i=s<<=16,r<0&&(i-=a*r,s-=c*r,r=0),t<<=16,e<0&&(t-=l*e,e=0),a<c)for(n-=e,e-=r,r=this.oc[r];;){if(--e<0)for(;;){if(--n<0)return;this.cS(i>>16,t>>16,h.A.nc,r,o),i+=a,t+=l,r+=h.A.oC}this.cS(i>>16,s>>16,h.A.nc,r,o),i+=a,s+=c,r+=h.A.oC}else for(n-=e,e-=r,r=this.oc[r];;){if(--e<0)for(;;){if(--n<0)return;this.cS(t>>16,i>>16,h.A.nc,r,o),i+=a,t+=l,r+=h.A.oC}this.cS(s>>16,i>>16,h.A.nc,r,o),i+=a,s+=c,r+=h.A.oC}else if(t=s<<=16,r<0&&(t-=a*r,s-=c*r,r=0),i<<=16,n<0&&(i-=l*n,n=0),a<c)for(e-=n,n-=r,r=this.oc[r];;){if(--n<0)for(;;){if(--e<0)return;this.cS(i>>16,s>>16,h.A.nc,r,o),i+=l,s+=c,r+=h.A.oC}this.cS(t>>16,s>>16,h.A.nc,r,o),t+=a,s+=c,r+=h.A.oC}else for(e-=n,n-=r,r=this.oc[r];;){if(--n<0)for(;;){if(--e<0)return;this.cS(s>>16,i>>16,h.A.nc,r,o),i+=l,s+=c,r+=h.A.oC}this.cS(s>>16,t>>16,h.A.nc,r,o),t+=a,s+=c,r+=h.A.oC}};static Rv=(t,i,s,e,n,r,o,l,a,c,f,u,d,w,A,y,p,m,I)=>{const _=this.fS(I);this.hS=!this.eS[I];const E=c-d,g=f-A,C=u-p,T=w-c,O=y-f,b=m-u;let v=T*f-O*c<<14;const L=O*u-b*f<<8,R=b*c-T*u<<5;let S=E*f-g*c<<14;const M=g*u-C*f<<8,k=C*c-E*u<<5;let x=g*T-E*O<<14;const D=C*O-g*b<<8,N=E*b-C*T<<5;let P=0,F=0;n!==e&&(P=(i-t<<16)/(n-e)|0,F=(l-o<<16)/(n-e)|0);let U=0,B=0;r!==n&&(U=(s-i<<16)/(r-n)|0,B=(a-l<<16)/(r-n)|0);let G=0,H=0;if(r!==e&&(G=(t-s<<16)/(e-r)|0,H=(o-a<<16)/(e-r)|0),e<=n&&e<=r){if(e<h.A.bottom)if(n>h.A.bottom&&(n=h.A.bottom),r>h.A.bottom&&(r=h.A.bottom),n<r){s=t<<=16,a=o<<=16,e<0&&(s-=G*e,t-=P*e,a-=H*e,o-=F*e,e=0),i<<=16,l<<=16,n<0&&(i-=U*n,l-=B*n,n=0);const c=e-this.ra;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,e!==n&&G<P||e===n&&G>U)for(r-=n,n-=e,e=this.oc[e];;){if(--n<0)for(;;){if(--r<0)return;this.uS(s>>16,i>>16,h.A.nc,e,_,0,0,v,S,x,L,M,D,a>>8,l>>8),s+=G,i+=U,a+=H,l+=B,e+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(s>>16,t>>16,h.A.nc,e,_,0,0,v,S,x,L,M,D,a>>8,o>>8),s+=G,t+=P,a+=H,o+=F,e+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(r-=n,n-=e,e=this.oc[e];;){if(--n<0)for(;;){if(--r<0)return;this.uS(i>>16,s>>16,h.A.nc,e,_,0,0,v,S,x,L,M,D,l>>8,a>>8),s+=G,i+=U,a+=H,l+=B,e+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(t>>16,s>>16,h.A.nc,e,_,0,0,v,S,x,L,M,D,o>>8,a>>8),s+=G,t+=P,a+=H,o+=F,e+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}else{i=t<<=16,l=o<<=16,e<0&&(i-=G*e,t-=P*e,l-=H*e,o-=F*e,e=0),s<<=16,a<<=16,r<0&&(s-=U*r,a-=B*r,r=0);const c=e-this.ra;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,(e===r||G>=P)&&(e!==r||U<=P))for(n-=r,r-=e,e=this.oc[e];;){if(--r<0)for(;;){if(--n<0)return;this.uS(t>>16,s>>16,h.A.nc,e,_,0,0,v,S,x,L,M,D,o>>8,a>>8),s+=U,t+=P,a+=B,o+=F,e+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(t>>16,i>>16,h.A.nc,e,_,0,0,v,S,x,L,M,D,o>>8,l>>8),i+=G,t+=P,l+=H,o+=F,e+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(n-=r,r-=e,e=this.oc[e];;){if(--r<0)for(;;){if(--n<0)return;this.uS(s>>16,t>>16,h.A.nc,e,_,0,0,v,S,x,L,M,D,a>>8,o>>8),s+=U,t+=P,a+=B,o+=F,e+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(i>>16,t>>16,h.A.nc,e,_,0,0,v,S,x,L,M,D,l>>8,o>>8),i+=G,t+=P,l+=H,o+=F,e+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}}else if(n<=r){if(n<h.A.bottom)if(r>h.A.bottom&&(r=h.A.bottom),e>h.A.bottom&&(e=h.A.bottom),r<e){t=i<<=16,o=l<<=16,n<0&&(t-=P*n,i-=U*n,o-=F*n,l-=B*n,n=0),s<<=16,a<<=16,r<0&&(s-=G*r,a-=H*r,r=0);const c=n-this.ra;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,n!==r&&P<U||n===r&&P>G)for(e-=r,r-=n,n=this.oc[n];;){if(--r<0)for(;;){if(--e<0)return;this.uS(t>>16,s>>16,h.A.nc,n,_,0,0,v,S,x,L,M,D,o>>8,a>>8),t+=P,s+=G,o+=F,a+=H,n+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(t>>16,i>>16,h.A.nc,n,_,0,0,v,S,x,L,M,D,o>>8,l>>8),t+=P,i+=U,o+=F,l+=B,n+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(e-=r,r-=n,n=this.oc[n];;){if(--r<0)for(;;){if(--e<0)return;this.uS(s>>16,t>>16,h.A.nc,n,_,0,0,v,S,x,L,M,D,a>>8,o>>8),t+=P,s+=G,o+=F,a+=H,n+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(i>>16,t>>16,h.A.nc,n,_,0,0,v,S,x,L,M,D,l>>8,o>>8),t+=P,i+=U,o+=F,l+=B,n+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}else{s=i<<=16,a=l<<=16,n<0&&(s-=P*n,i-=U*n,a-=F*n,l-=B*n,n=0),t<<=16,o<<=16,e<0&&(t-=G*e,o-=H*e,e=0);const c=n-this.ra;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,r-=e,e-=n,n=this.oc[n],P<U)for(;;){if(--e<0)for(;;){if(--r<0)return;this.uS(t>>16,i>>16,h.A.nc,n,_,0,0,v,S,x,L,M,D,o>>8,l>>8),t+=G,i+=U,o+=H,l+=B,n+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(s>>16,i>>16,h.A.nc,n,_,0,0,v,S,x,L,M,D,a>>8,l>>8),s+=P,i+=U,a+=F,l+=B,n+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(;;){if(--e<0)for(;;){if(--r<0)return;this.uS(i>>16,t>>16,h.A.nc,n,_,0,0,v,S,x,L,M,D,l>>8,o>>8),t+=G,i+=U,o+=H,l+=B,n+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(i>>16,s>>16,h.A.nc,n,_,0,0,v,S,x,L,M,D,l>>8,a>>8),s+=P,i+=U,a+=F,l+=B,n+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}}else if(r<h.A.bottom)if(e>h.A.bottom&&(e=h.A.bottom),n>h.A.bottom&&(n=h.A.bottom),e<n){i=s<<=16,l=a<<=16,r<0&&(i-=U*r,s-=G*r,l-=B*r,a-=H*r,r=0),t<<=16,o<<=16,e<0&&(t-=P*e,o-=F*e,e=0);const c=r-this.ra;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,n-=e,e-=r,r=this.oc[r],U<G)for(;;){if(--e<0)for(;;){if(--n<0)return;this.uS(i>>16,t>>16,h.A.nc,r,_,0,0,v,S,x,L,M,D,l>>8,o>>8),i+=U,t+=P,l+=B,o+=F,r+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(i>>16,s>>16,h.A.nc,r,_,0,0,v,S,x,L,M,D,l>>8,a>>8),i+=U,s+=G,l+=B,a+=H,r+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(;;){if(--e<0)for(;;){if(--n<0)return;this.uS(t>>16,i>>16,h.A.nc,r,_,0,0,v,S,x,L,M,D,o>>8,l>>8),i+=U,t+=P,l+=B,o+=F,r+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(s>>16,i>>16,h.A.nc,r,_,0,0,v,S,x,L,M,D,a>>8,l>>8),i+=U,s+=G,l+=B,a+=H,r+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}else{t=s<<=16,o=a<<=16,r<0&&(t-=U*r,s-=G*r,o-=B*r,a-=H*r,r=0),i<<=16,l<<=16,n<0&&(i-=P*n,l-=F*n,n=0);const c=r-this.ra;if(v+=R*c,S+=k*c,x+=N*c,v|=0,S|=0,x|=0,e-=n,n-=r,r=this.oc[r],U<G)for(;;){if(--n<0)for(;;){if(--e<0)return;this.uS(i>>16,s>>16,h.A.nc,r,_,0,0,v,S,x,L,M,D,l>>8,a>>8),i+=P,s+=G,l+=F,a+=H,r+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(t>>16,s>>16,h.A.nc,r,_,0,0,v,S,x,L,M,D,o>>8,a>>8),t+=U,s+=G,o+=B,a+=H,r+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}else for(;;){if(--n<0)for(;;){if(--e<0)return;this.uS(s>>16,i>>16,h.A.nc,r,_,0,0,v,S,x,L,M,D,a>>8,l>>8),i+=P,s+=G,l+=F,a+=H,r+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}this.uS(s>>16,t>>16,h.A.nc,r,_,0,0,v,S,x,L,M,D,a>>8,o>>8),t+=U,s+=G,o+=B,a+=H,r+=h.A.oC,v+=R,S+=k,x+=N,v|=0,S|=0,x|=0}}};static uS=(t,i,s,e,n,r,o,l,a,c,f,u,d,w,A)=>{if(t>=i)return;let y,p,m,I,_,E,g,C,T;if(this._v){if(y=(A-w)/(i-t)|0,i>h.A.Ev&&(i=h.A.Ev),t<0&&(w-=t*y,t=0),t>=i)return;p=i-t>>3,y<<=12}else i-t>7?(p=i-t>>3,y=(A-w)*this.qR[p]>>6):(p=0,y=0);if(w<<=9,e+=t,this.st&&n)if(m=0,I=0,E=t-this.na,l+=(f>>3)*E,a+=(u>>3)*E,c+=(d>>3)*E,l|=0,a|=0,_=(c|=0)>>12,0!==_&&(o=a/_|0,(r=l/_|0)<0?r=0:r>4032&&(r=4032)),l+=f,a+=u,c+=d,l|=0,a|=0,_=(c|=0)>>12,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>4032&&(m=4032)),g=m-r>>3,C=I-o>>3,r+=w>>3&786432,T=w>>23,this.hS){for(;p-- >0;)s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r=m,o=I,l+=f,a+=u,_=(c+=d)>>12,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>4032&&(m=4032)),g=m-r>>3,C=I-o>>3,r+=(w+=y)>>3&786432,T=w>>23;for(p=i-t&7;p-- >0;)s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=g,o+=C}else{for(;p-- >0;){let t;0!=(t=n[(4032&o)+(r>>6)]>>>T)&&(s[e]=t),e+=1,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=g)>>6)]>>>T)&&(s[e]=t),e+=1,r=m,o=I,l+=f,a+=u,c+=d,l|=0,a|=0,_=(c|=0)>>12,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>4032&&(m=4032)),g=m-r>>3,C=I-o>>3,r+=(w+=y)>>3&786432,T=w>>23}for(p=i-t&7;p-- >0;){let t;0!=(t=n[(4032&o)+(r>>6)]>>>T)&&(s[e]=t),e++,r+=g,o+=C}}else if(m=0,I=0,E=t-this.na,l+=(f>>3)*E,a+=(u>>3)*E,c+=(d>>3)*E,l|=0,a|=0,_=(c|=0)>>14,0!==_&&(o=a/_|0,(r=l/_|0)<0?r=0:r>16256&&(r=16256)),l+=f,a+=u,c+=d,l|=0,a|=0,_=(c|=0)>>14,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>16256&&(m=16256)),g=m-r>>3,C=I-o>>3,r+=6291456&w,T=w>>23,this.hS&&n){for(;p-- >0;)s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r=m,o=I,l+=f,a+=u,c+=d,l|=0,a|=0,_=(c|=0)>>14,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>16256&&(m=16256)),g=m-r>>3,C=I-o>>3,r+=6291456&(w+=y),T=w>>23;for(p=i-t&7;p-- >0;)s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=g,o+=C}else{for(;p-- >0&&n;){let t;0!=(t=n[(16256&o)+(r>>7)]>>>T)&&(s[e]=t),e+=1,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=g)>>7)]>>>T)&&(s[e]=t),e++,r=m,o=I,l+=f,a+=u,c+=d,l|=0,a|=0,_=(c|=0)>>14,0!==_&&(m=l/_|0,I=a/_|0,m<7?m=7:m>16256&&(m=16256)),g=m-r>>3,C=I-o>>3,r+=6291456&(w+=y),T=w>>23}for(p=i-t&7;p-- >0&&n;){let t;0!=(t=n[(16256&o)+(r>>7)]>>>T)&&(s[e]=t),e++,r+=g,o+=C}}};static cS=(t,i,s,e,n)=>{if(this._v&&(i>h.A.Ev&&(i=h.A.Ev),t<0&&(t=0)),t>=i)return;e+=t;let r=i-t>>2;if(0===this.alpha)for(;;){if(r--,r<0)for(r=i-t&3;;){if(r--,r<0)return;s[e++]=n}s[e++]=n,s[e++]=n,s[e++]=n,s[e++]=n}const o=this.alpha,l=256-this.alpha;for(n=((16711935&n)*l>>8&16711935)+((65280&n)*l>>8&65280);;){if(r--,r<0)for(r=i-t&3;;){if(r--,r<0)return;s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280)}s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280),s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280),s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280),s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280)}};static f_=t=>{this.tS[t]&&this.QR&&(this.QR[this.iS++]=this.tS[t],this.tS[t]=null)};static fS=t=>{if(this.a_[t]=this.Vf++,this.tS[t])return this.tS[t];let i;if(this.iS>0&&this.QR)i=this.QR[--this.iS],this.QR[this.iS]=null;else{let t=0,s=-1;for(let i=0;i<this.JR;i++)this.tS[i]&&(this.a_[i]<t||-1===s)&&(t=this.a_[i],s=i);i=this.tS[s],this.tS[s]=null}this.tS[t]=i;const s=this.c_[t],h=this.sS[t];if(!i||!s||!h)return null;if(this.st){this.eS[t]=!1;for(let e=0;e<4096;e++){const n=i[e]=16316671&h[s.nc[e]];0===n&&(this.eS[t]=!0),i[e+4096]=n-(n>>>3)&16316671,i[e+8192]=n-(n>>>2)&16316671,i[e+12288]=n-(n>>>2)-(n>>>3)&16316671}}else{if(64===s.width)for(let t=0;t<128;t++)for(let e=0;e<128;e++)i[e+(t<<7)]=h[s.nc[(e>>1)+(t>>1<<6)]];else for(let t=0;t<16384;t++)i[t]=h[s.nc[t]];this.eS[t]=!1;for(let s=0;s<16384;s++){i[s]&=16316671;const h=i[s];0===h&&(this.eS[t]=!0),i[s+16384]=h-(h>>>3)&16316671,i[s+32768]=h-(h>>>2)&16316671,i[s+49152]=h-(h>>>2)-(h>>>3)&16316671}}return i}}},880:(t,i,s)=>{s.d(i,{r:()=>e});var h=s(7854);const e=async t=>{255!==t[0]&&(t[0]=255),URL.revokeObjectURL(h.PR.src),h.PR.src=URL.createObjectURL(new Blob([t],{type:'image/jpeg'})),await new Promise((t=>h.PR.onload=()=>t())),h.NR.clearRect(0,0,h.FR.width,h.FR.height);const i=h.PR.naturalWidth,s=h.PR.naturalHeight;return h.FR.width=i,h.FR.height=s,h.NR.drawImage(h.PR,0,0),h.NR.getImageData(0,0,i,s)}},8665:(t,i,s)=>{s.d(i,{A:()=>f});var h=s(1069),e=s(8950),n=s(4583),r=s(6730),o=s(4474),l=s(3867);class a{Ug=0;Bb=0;dS=0;wS=-1;AS=-1;yS=-1;pS=-1;mS=-1;IS=-1;_S=-1;ES=-1;gS=-1;CS=0;TS=-1;OS=-1;bS=-1;data=null}class c{x=0;y=0;z=0;w=0}class f extends o.A{static metadata=null;static head=null;static vS=null;static LS=null;static RS=null;static SS=null;static MS=null;static kS=null;static xS=null;static DS=null;static NS=null;static PS=null;static US=null;static BS=null;static axis=null;static GS=new l.ds(4096,!1);static HS=new l.ds(4096,!1);static WS=new Int32Array(4096);static YS=new Int32Array(4096);static VS=new Int32Array(4096);static KS=new Int32Array(4096);static XS=new Int32Array(4096);static zS=new Int32Array(4096);static jS=new Int32Array(1500);static ZS=new l.Kn(1500,512);static qS=new Int32Array(12);static $S=new l.Kn(12,2e3);static JS=new Int32Array(2e3);static QS=new Int32Array(2e3);static tM=new Int32Array(12);static iM=new Int32Array(10);static sM=new Int32Array(10);static hM=new Int32Array(10);static _n=0;static eM=0;static En=0;static Kf=!1;static xl=0;static Dl=0;static Xf=0;static dm=new Int32Array(1e3);static nM=!1;static ec(t){try{f.head=new h.A(t.read('ob_head.dat')),f.vS=new h.A(t.read('ob_face1.dat')),f.LS=new h.A(t.read('ob_face2.dat')),f.RS=new h.A(t.read('ob_face3.dat')),f.SS=new h.A(t.read('ob_face4.dat')),f.MS=new h.A(t.read('ob_face5.dat')),f.kS=new h.A(t.read('ob_point1.dat')),f.xS=new h.A(t.read('ob_point2.dat')),f.DS=new h.A(t.read('ob_point3.dat')),f.NS=new h.A(t.read('ob_point4.dat')),f.PS=new h.A(t.read('ob_point5.dat')),f.US=new h.A(t.read('ob_vertex1.dat')),f.BS=new h.A(t.read('ob_vertex2.dat')),f.axis=new h.A(t.read('ob_axis.dat')),f.head.Fc=0,f.kS.Fc=0,f.xS.Fc=0,f.DS.Fc=0,f.NS.Fc=0,f.US.Fc=0,f.BS.Fc=0;const i=f.head.KA;f.metadata=new l.ds(i+100,null);let s=0,e=0,n=0,r=0,o=0,c=0,u=0;for(let t=0;t<i;t++){const t=f.head.KA,i=new a;i.Ug=f.head.KA,i.Bb=f.head.KA,i.dS=f.head.ZA,i.wS=f.kS.Fc,i.AS=f.xS.Fc,i.yS=f.DS.Fc,i.pS=f.NS.Fc,i.IS=f.US.Fc,i._S=f.BS.Fc;const h=f.head.ZA,l=f.head.ZA,d=f.head.ZA,w=f.head.ZA,A=f.head.ZA;for(let t=0;t<i.Ug;t++){const t=f.kS.ZA;1&t&&f.xS.xR,2&t&&f.DS.xR,4&t&&f.NS.xR}for(let t=0;t<i.Bb;t++){1===f.BS.ZA&&(f.US.xR,f.US.xR),f.US.xR}i.ES=n,n+=2*i.Bb,1===h&&(i.gS=r,r+=i.Bb),255===l?(i.CS=o,o+=i.Bb):i.CS=-l-1,1===d&&(i.TS=c,c+=i.Bb),1===w&&(i.OS=u,u+=i.Bb),1===A&&(i.mS=e,e+=i.Ug),i.bS=s,s+=i.dS,f.metadata[t]=i}}catch(t){console.log('Error loading model index'),console.error(t)}}static rM(t,i){if(null===f.metadata&&(f.metadata=[]),null===t){const t=new a;return t.Ug=0,t.Bb=0,t.dS=0,void(f.metadata[i]=t)}const s=new h.A(t);s.Fc=s.length-18;const e=new a;e.data=t,e.Ug=s.KA,e.Bb=s.KA,e.dS=s.ZA,f.metadata[i]=e;const n=s.ZA,r=s.ZA,o=s.ZA,l=s.ZA,c=s.ZA,u=s.KA,d=s.KA,w=s.KA,A=s.KA;let y=0;e.wS=y,y+=e.Ug,e._S=y,y+=e.Bb,e.CS=y,255===r?y+=e.Bb:e.CS=-r-1,e.OS=y,1===l?y+=e.Bb:e.OS=-1,e.gS=y,1===n?y+=e.Bb:e.gS=-1,e.mS=y,1===c?y+=e.Ug:e.mS=-1,e.TS=y,1===o?y+=e.Bb:e.TS=-1,e.IS=y,y+=A,e.ES=y,y+=2*e.Bb,e.bS=y,y+=6*e.dS,e.AS=y,y+=u,e.yS=y,y+=d,e.pS=y,y+=w}static bo(){f.metadata=null,f.head=null,f.vS=null,f.LS=null,f.RS=null,f.SS=null,f.MS=null,f.kS=null,f.xS=null,f.DS=null,f.NS=null,f.PS=null,f.US=null,f.BS=null,f.axis=null,f.GS=null,f.HS=null,f.WS=null,f.YS=null,f.VS=null,f.KS=null,f.XS=null,f.zS=null,f.jS=null,f.ZS=null,f.qS=null,f.$S=null,f.JS=null,f.QS=null,f.tM=null}static oM(t,i,s){return 2&~s?((i=i*(127&t)>>7)<2?i=2:i>126&&(i=126),(65408&t)+i):(i<0?i=0:i>127&&(i=127),127-i)}static Fg=(t,i,s)=>{const h=t.Ug,e=t.Bb,n=t.dS;let r,o,a,u,d;if(i){r=new Int32Array(h);for(let i=0;i<h;i++)r[i]=t.Hg[i]}else r=t.Hg;let w=null,A=null;if(s){o=new Int32Array(e),a=new Int32Array(e),u=new Int32Array(e);for(let i=0;i<e;i++)t.lM&&(o[i]=t.lM[i]),t.aM&&(a[i]=t.aM[i]),t.cM&&(u[i]=t.cM[i]);if(d=new Int32Array(e),t.Ub)for(let i=0;i<e;i++)d[i]=t.Ub[i];else for(let t=0;t<e;t++)d[t]=0;w=new l.ds(h,null);for(let i=0;i<h;i++){const s=w[i]=new c;if(t.Ob){const h=t.Ob[i];h&&(s.x=h.x,s.y=h.y,s.z=h.z,s.w=h.w)}}A=t.kb}else o=t.lM,a=t.aM,u=t.cM,d=t.Ub;return new f({Ug:h,Bg:t.Bg,Hg:r,Gg:t.Gg,Bb:e,Gb:t.Gb,Hb:t.Hb,Wb:t.Wb,lM:o,aM:a,cM:u,Ub:d,fM:t.fM,uM:t.uM,jE:t.jE,priority:t.priority,dS:n,dM:t.dM,wM:t.wM,AM:t.AM,Db:t.Db,Nb:t.Nb,Pb:t.Pb,Fb:t.Fb,nO:t.nO,xb:t.xb,jg:t.jg,yM:t.yM,pM:t.pM,Ob:w,kb:A})};static ZE=(t,i,s,h)=>{const e=t.Ug,n=t.Bb,r=t.dS;let o,l,a,c,u;if(h)o=t.Bg,l=t.Hg,a=t.Gg;else{o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e);for(let i=0;i<e;i++)o[i]=t.Bg[i],l[i]=t.Hg[i],a[i]=t.Gg[i]}if(i)c=t.jE;else{c=new Int32Array(n);for(let i=0;i<n;i++)t.jE&&(c[i]=t.jE[i])}if(s)u=t.uM;else if(u=new Int32Array(n),t.uM)for(let i=0;i<n;i++)u[i]=t.uM[i];else for(let t=0;t<n;t++)u[t]=0;return new f({Ug:e,Bg:o,Hg:l,Gg:a,Bb:n,Gb:t.Gb,Hb:t.Hb,Wb:t.Wb,lM:null,aM:null,cM:null,Ub:t.Ub,fM:t.fM,uM:u,jE:c,priority:t.priority,dS:r,dM:t.dM,wM:t.wM,AM:t.AM,mM:t.mM,IM:t.IM})};static Jg=(t,i)=>{const s=t.Ug,h=t.Bb,e=t.dS,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s);for(let i=0;i<s;i++)n[i]=t.Bg[i],r[i]=t.Hg[i],o[i]=t.Gg[i];let l;if(i)l=t.uM;else if(l=new Int32Array(h),t.uM)for(let i=0;i<h;i++)l[i]=t.uM[i];else for(let t=0;t<h;t++)l[t]=0;return new f({Ug:s,Bg:n,Hg:r,Gg:o,Bb:h,Gb:t.Gb,Hb:t.Hb,Wb:t.Wb,lM:t.lM,aM:t.aM,cM:t.cM,Ub:t.Ub,fM:t.fM,uM:l,jE:t.jE,priority:t.priority,dS:e,dM:t.dM,wM:t.wM,AM:t.AM,Kg:t.Kg,Vg:t.Vg})};static Vv=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.Ug,o+=i.Bb,l+=i.dS,s||=null!==i.Ub,i.fM?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.uM,n||=null!==i.jE)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(o),A=new Int32Array(o),y=new Int32Array(o),p=new Int32Array(o),m=new Int32Array(o),I=new Int32Array(o),_=new Int32Array(l),E=new Int32Array(l),g=new Int32Array(l);let C=null;s&&(C=new Int32Array(o));let T=null;h&&(T=new Int32Array(o));let O=null;e&&(O=new Int32Array(o));let b=null;n&&(b=new Int32Array(o)),r=0,o=0,l=0;for(let a=0;a<i;a++){const i=t[a];if(i){const t=r;for(let t=0;t<i.Ug;t++)c[r]=i.Bg[t],u[r]=i.Hg[t],d[r]=i.Gg[t],r++;for(let r=0;r<i.Bb;r++)w[o]=i.Gb[r]+t,A[o]=i.Hb[r]+t,y[o]=i.Wb[r]+t,i.lM&&(p[o]=i.lM[r]),i.aM&&(m[o]=i.aM[r]),i.cM&&(I[o]=i.cM[r]),s&&(i.Ub?C&&(C[o]=i.Ub[r]):C&&(C[o]=0)),h&&(i.fM?T&&(T[o]=i.fM[r]):T&&(T[o]=i.priority)),e&&(i.uM?O&&(O[o]=i.uM[r]):O&&(O[o]=0)),n&&i.jE&&b&&(b[o]=i.jE[r]),o++;for(let s=0;s<i.dS;s++)_[l]=i.dM[s]+t,E[l]=i.wM[s]+t,g[l]=i.AM[s]+t,l++}}const v=new f({Ug:r,Bg:c,Hg:u,Gg:d,Bb:o,Gb:w,Hb:A,Wb:y,lM:p,aM:m,cM:I,Ub:C,fM:T,uM:O,jE:b,priority:a,dS:l,dM:_,wM:E,AM:g});return v.tC(),v};static ba=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.Ug,o+=i.Bb,l+=i.dS,s||=null!==i.Ub,i.fM?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.uM,n||=null!==i.IM)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(r),A=new Int32Array(o),y=new Int32Array(o),p=new Int32Array(o),m=new Int32Array(l),I=new Int32Array(l),_=new Int32Array(l);let E=null;s&&(E=new Int32Array(o));let g=null;h&&(g=new Int32Array(o));let C=null;e&&(C=new Int32Array(o));let T=null;n&&(T=new Int32Array(o));const O=new Int32Array(o);r=0,o=0,l=0;const b=(t,i,s,h,e,n,r)=>{let o=-1;const l=t.Bg[i],a=t.Hg[i],c=t.Gg[i];for(let t=0;t<r;t++)if(l===s[t]&&a===h[t]&&c===e[t]){o=t;break}return-1===o&&(s[r]=l,h[r]=a,e[r]=c,n&&t.mM&&(n[r]=t.mM[i]),o=r++),{vertex:o,Ug:r}};for(let a=0;a<i;a++){const i=t[a];if(i){for(let t=0;t<i.Bb;t++){s&&(i.Ub?E&&(E[o]=i.Ub[t]):E&&(E[o]=0)),h&&(i.fM?g&&(g[o]=i.fM[t]):g&&(g[o]=i.priority)),e&&(i.uM?C&&(C[o]=i.uM[t]):C&&(C[o]=0)),n&&i.IM&&T&&(T[o]=i.IM[t]),i.jE&&(O[o]=i.jE[t]);const l=b(i,i.Gb[t],c,u,d,w,r);r=l.Ug;const a=b(i,i.Hb[t],c,u,d,w,r);r=a.Ug;const f=b(i,i.Wb[t],c,u,d,w,r);r=f.Ug,A[o]=l.vertex,y[o]=a.vertex,p[o]=f.vertex,o++}for(let t=0;t<i.dS;t++){const s=b(i,i.dM[t],c,u,d,w,r);r=s.Ug;const h=b(i,i.wM[t],c,u,d,w,r);r=h.Ug;const e=b(i,i.AM[t],c,u,d,w,r);r=e.Ug,m[l]=s.vertex,I[l]=h.vertex,_[l]=e.vertex,l++}}}return new f({Ug:r,Bg:c,Hg:u,Gg:d,Bb:o,Gb:A,Hb:y,Wb:p,lM:null,aM:null,cM:null,Ub:E,fM:g,uM:C,jE:O,priority:a,dS:l,dM:m,wM:I,AM:_,mM:w,IM:T})};static model=t=>{if(!f.metadata)throw new Error('cant loading model metadata!!!!!');const i=f.metadata[t];if(!i)throw console.log(`Error model:${t} not found!`),new Error('cant loading model metadata!!!!!');if(!(f.head&&f.vS&&f.LS&&f.RS&&f.SS&&f.MS&&f.kS&&f.xS&&f.DS&&f.NS&&f.PS&&f.US&&f.BS&&f.axis))throw new Error('cant loading model!!!!!');const s=i.Ug,h=i.Bb,e=i.dS,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s),l=new Int32Array(h),a=new Int32Array(h),c=new Int32Array(h),u=new Int32Array(e),d=new Int32Array(e),w=new Int32Array(e);let A=null;i.mS>=0&&(A=new Int32Array(s));let y=null;i.gS>=0&&(y=new Int32Array(h));let p=null,m=0;i.CS>=0?p=new Int32Array(h):m=-i.CS-1;let I=null;i.TS>=0&&(I=new Int32Array(h));let _=null;i.OS>=0&&(_=new Int32Array(h));const E=new Int32Array(h);f.kS.Fc=i.wS,f.xS.Fc=i.AS,f.DS.Fc=i.yS,f.NS.Fc=i.pS,f.PS.Fc=i.mS;let g,C,T,O=0,b=0,v=0;for(let t=0;t<s;t++){const i=f.kS.ZA;g=0,1&i&&(g=f.xS.xR),C=0,2&i&&(C=f.DS.xR),T=0,4&i&&(T=f.NS.xR),n[t]=O+g,r[t]=b+C,o[t]=v+T,O=n[t],b=r[t],v=o[t],A&&(A[t]=f.PS.ZA)}f.vS.Fc=i.ES,f.LS.Fc=i.gS,f.RS.Fc=i.CS,f.SS.Fc=i.TS,f.MS.Fc=i.OS;for(let t=0;t<h;t++)E[t]=f.vS.KA,y&&(y[t]=f.LS.ZA),p&&(p[t]=f.RS.ZA),I&&(I[t]=f.SS.ZA),_&&(_[t]=f.MS.ZA);f.US.Fc=i.IS,f.BS.Fc=i._S,g=0,C=0,T=0;let L=0;for(let t=0;t<h;t++){const i=f.BS.ZA;if(1===i)g=f.US.xR+L,L=g,C=f.US.xR+L,L=C,T=f.US.xR+L,L=T;else if(2===i)C=T,T=f.US.xR+L,L=T;else if(3===i)g=T,T=f.US.xR+L,L=T;else if(4===i){const t=g;g=C,C=t,T=f.US.xR+L,L=T}l[t]=g,a[t]=C,c[t]=T}f.axis.Fc=6*i.bS;for(let t=0;t<e;t++)u[t]=f.axis.KA,d[t]=f.axis.KA,w[t]=f.axis.KA;return new f({Ug:s,Bg:n,Hg:r,Gg:o,Bb:h,Gb:l,Hb:a,Wb:c,lM:null,aM:null,cM:null,Ub:y,fM:p,uM:I,jE:E,priority:m,dS:e,dM:u,wM:d,AM:w,mM:A,IM:_})};static _M=(t,i)=>{if(!f.metadata||!f.metadata[i])throw new Error('No model metadata');const s=f.metadata[i];if(s.data=t,!s.data.length)throw new Error('No model data');const e=s.Ug,n=s.Bb,r=s.dS,o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e),c=new Int32Array(n),u=new Int32Array(n),d=new Int32Array(n),w=new Int32Array(r),A=new Int32Array(r),y=new Int32Array(r);let p=null;s.mS>=0&&(p=new Int32Array(e));let m=null;s.gS>=0&&(m=new Int32Array(n));let I=null,_=0;s.CS>=0?I=new Int32Array(n):_=-s.CS-1;let E=null;s.TS>=0&&(E=new Int32Array(n));let g=null;s.OS>=0&&(g=new Int32Array(n));const C=new Int32Array(n),T=new h.A(s.data);T.Fc=s.wS;const O=new h.A(s.data);O.Fc=s.AS;const b=new h.A(s.data);b.Fc=s.yS;const v=new h.A(s.data);v.Fc=s.pS;const L=new h.A(s.data);L.Fc=s.mS;let R,S,M,k=0,x=0,D=0;for(let t=0;t<e;t++){const i=T.ZA;R=0,1&i&&(R=O.xR),S=0,2&i&&(S=b.xR),M=0,4&i&&(M=v.xR),o[t]=k+R,l[t]=x+S,a[t]=D+M,k=o[t],x=l[t],D=a[t],p&&(p[t]=L.ZA)}const N=new h.A(s.data);N.Fc=s.ES;const P=new h.A(s.data);P.Fc=s.gS;const F=new h.A(s.data);F.Fc=s.CS;const U=new h.A(s.data);U.Fc=s.TS;const B=new h.A(s.data);B.Fc=s.OS;for(let t=0;t<n;t++)C[t]=N.KA,m&&(m[t]=P.ZA),I&&(I[t]=F.ZA),E&&(E[t]=U.ZA),g&&(g[t]=B.ZA);const G=new h.A(s.data);G.Fc=s.IS;const H=new h.A(s.data);H.Fc=s._S,R=0,S=0,M=0;let W=0;for(let t=0;t<n;t++){const i=H.ZA;if(1===i)R=G.xR+W,W=R,S=G.xR+W,W=S,M=G.xR+W,W=M;else if(2===i)S=M,M=G.xR+W,W=M;else if(3===i)R=M,M=G.xR+W,W=M;else if(4===i){const t=R;R=S,S=t,M=G.xR+W,W=M}c[t]=R,u[t]=S,d[t]=M}const Y=new h.A(s.data);Y.Fc=s.bS;for(let t=0;t<r;t++)w[t]=Y.KA,A[t]=Y.KA,y[t]=Y.KA;return new f({Ug:e,Bg:o,Hg:l,Gg:a,Bb:n,Gb:c,Hb:u,Wb:d,lM:null,aM:null,cM:null,Ub:m,fM:I,uM:E,jE:C,priority:_,dS:r,dM:w,wM:A,AM:y,mM:p,IM:g})};Ug;Bg;Hg;Gg;Bb;Gb;Hb;Wb;lM;aM;cM;Ub;fM;uM;jE;priority;dS;dM;wM;AM;Db;Nb;Pb;Fb;nO;xb;jg;yM;pM;mM;IM;Kg;Vg;Ob;kb;zg=0;iC=!1;EM=-1;gM=-1;constructor(t){super(),this.Ug=t.Ug,this.Bg=t.Bg,this.Hg=t.Hg,this.Gg=t.Gg,this.Bb=t.Bb,this.Gb=t.Gb,this.Hb=t.Hb,this.Wb=t.Wb,this.lM=t.lM,this.aM=t.aM,this.cM=t.cM,this.Ub=t.Ub,this.fM=t.fM,this.uM=t.uM,this.jE=t.jE,this.priority=t.priority,this.dS=t.dS,this.dM=t.dM,this.wM=t.wM,this.AM=t.AM,this.Db=t.Db??0,this.Nb=t.Nb??0,this.Pb=t.Pb??0,this.Fb=t.Fb??0,this.nO=t.nO??0,this.xb=t.xb??0,this.jg=t.jg??0,this.yM=t.yM??0,this.pM=t.pM??0,this.mM=t.mM??null,this.IM=t.IM??null,this.Kg=t.Kg??null,this.Vg=t.Vg??null,this.Ob=t.Ob??null,this.kb=t.kb??null}tC(){this.jg=0,this.nO=0,this.xb=0;for(let t=0;t<this.Ug;t++){const i=this.Bg[t],s=this.Hg[t],h=this.Gg[t];-s>this.jg&&(this.jg=-s),s>this.xb&&(this.xb=s);const e=i*i+h*h;e>this.nO&&(this.nO=e)}this.nO=Math.sqrt(this.nO)+.99|0,this.pM=Math.sqrt(this.nO*this.nO+this.jg*this.jg)+.99|0,this.yM=this.pM+(Math.sqrt(this.nO*this.nO+this.xb*this.xb)+.99|0)}Wg(){this.jg=0,this.xb=0;for(let t=0;t<this.Ug;t++){const i=this.Hg[t];-i>this.jg&&(this.jg=-i),i>this.xb&&(this.xb=i)}this.pM=Math.sqrt(this.nO*this.nO+this.jg*this.jg)+.99|0,this.yM=this.pM+(Math.sqrt(this.nO*this.nO+this.xb*this.xb)+.99|0)}Ma(){if(this.mM){const t=new Int32Array(256);let i=0;for(let s=0;s<this.Ug;s++){const h=this.mM[s];t[h]++,h>i&&(i=h)}this.Kg=new l.ds(i+1,null);for(let s=0;s<=i;s++)this.Kg[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.Ug;){const i=this.mM[s],h=this.Kg[i];h&&(h[t[i]++]=s++)}this.mM=null}if(this.IM){const t=new Int32Array(256);let i=0;for(let s=0;s<this.Bb;s++){const h=this.IM[s];t[h]++,h>i&&(i=h)}this.Vg=new l.ds(i+1,null);for(let s=0;s<=i;s++)this.Vg[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.Bb;){const i=this.IM[s],h=this.Vg[i];h&&(h[t[i]++]=s++)}this.IM=null}}Qg(t,i,s){if(-1!==t)if(s&&-1!==i){const h=r.A.Ro[t],e=r.A.Ro[i],n=h.kR;f._n=0,f.eM=0,f.En=0;let o=0,l=s[o++];for(let t=0;t<h.length;t++){if(!h.DR)continue;const i=h.DR[t];for(;i>l;)l=s[o++];n&&n.types&&h.x&&h.y&&h.z&&n.labels&&(i!==l||0===n.types[i])&&this.CM(h.x[t],h.y[t],h.z[t],n.labels[i],n.types[i])}f._n=0,f.eM=0,f.En=0,o=0,l=s[o++];for(let t=0;t<e.length;t++){if(!e.DR)continue;const i=e.DR[t];for(;i>l;)l=s[o++];n&&n.types&&e.x&&e.y&&e.z&&n.labels&&(i===l||0===n.types[i])&&this.CM(e.x[t],e.y[t],e.z[t],n.labels[i],n.types[i])}}else this.ka(t)}ka(t){if(!this.Kg||-1===t||!r.A.Ro[t])return;const i=r.A.Ro[t],s=i.kR;f._n=0,f.eM=0,f.En=0;for(let t=0;t<i.length;t++){if(!(i.DR&&i.x&&i.y&&i.z&&s&&s.labels&&s.types))continue;const h=i.DR[t];this.CM(i.x[t],i.y[t],i.z[t],s.labels[h],s.types[h])}}Xg(){for(let t=0;t<this.Ug;t++){const i=this.Bg[t];this.Bg[t]=this.Gg[t],this.Gg[t]=-i}}aR(t){const i=n.A.sin[t],s=n.A.cos[t];for(let t=0;t<this.Ug;t++){const h=this.Hg[t]*s-this.Gg[t]*i>>16;this.Gg[t]=this.Hg[t]*i+this.Gg[t]*s>>16,this.Hg[t]=h}}translate(t,i,s){for(let h=0;h<this.Ug;h++)this.Bg[h]+=i,this.Hg[h]+=t,this.Gg[h]+=s}va(t,i){if(this.jE)for(let s=0;s<this.Bb;s++)this.jE[s]===t&&(this.jE[s]=i)}Yg(){for(let t=0;t<this.Ug;t++)this.Gg[t]=-this.Gg[t];for(let t=0;t<this.Bb;t++){const i=this.Gb[t];this.Gb[t]=this.Wb[t],this.Wb[t]=i}}scale(t,i,s){for(let h=0;h<this.Ug;h++)this.Bg[h]=this.Bg[h]*t/128|0,this.Hg[h]=this.Hg[h]*i/128|0,this.Gg[h]=this.Gg[h]*s/128|0}xa(t,i,s,h,e,n){const r=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;if(this.lM&&this.aM&&this.cM||(this.lM=new Int32Array(this.Bb),this.aM=new Int32Array(this.Bb),this.cM=new Int32Array(this.Bb)),!this.Ob){this.Ob=new l.ds(this.Ug,null);for(let t=0;t<this.Ug;t++)this.Ob[t]=new c}for(let i=0;i<this.Bb;i++){const n=this.Gb[i],o=this.Hb[i],l=this.Wb[i],a=this.Bg[o]-this.Bg[n],c=this.Hg[o]-this.Hg[n],u=this.Gg[o]-this.Gg[n],d=this.Bg[l]-this.Bg[n],w=this.Hg[l]-this.Hg[n],A=this.Gg[l]-this.Gg[n];let y=c*A-w*u,p=u*d-A*a,m=a*w-d*c;for(;y>8192||p>8192||m>8192||y<-8192||p<-8192||m<-8192;)y>>=1,p>>=1,m>>=1;let I=0|Math.sqrt(y*y+p*p+m*m);if(I<=0&&(I=1),y=256*y/I|0,p=256*p/I|0,m=256*m/I|0,this.Ub&&1&this.Ub[i]){const n=t+((s*y+h*p+e*m)/(r+(r/2|0))|0);this.jE&&(this.lM[i]=f.oM(this.jE[i],n,this.Ub[i]))}else{let t=this.Ob[n];t&&(t.x+=y,t.y+=p,t.z+=m,t.w++),t=this.Ob[o],t&&(t.x+=y,t.y+=p,t.z+=m,t.w++),t=this.Ob[l],t&&(t.x+=y,t.y+=p,t.z+=m,t.w++)}}if(n)this.Lb(t,r,s,h,e);else{this.kb=new l.ds(this.Ug,null);for(let t=0;t<this.Ug;t++){const i=this.Ob[t],s=new c;i&&(s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w),this.kb[t]=s}}n?this.tC():this.TM()}Lb(t,i,s,h,e){for(let n=0;n<this.Bb;n++){const r=this.Gb[n],o=this.Hb[n],l=this.Wb[n];if(!this.Ub&&this.jE&&this.Ob&&this.lM&&this.aM&&this.cM){const a=this.jE[n],c=this.Ob[r];c&&(this.lM[n]=f.oM(a,t+((s*c.x+h*c.y+e*c.z)/(i*c.w)|0),0));const u=this.Ob[o];u&&(this.aM[n]=f.oM(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),0));const d=this.Ob[l];d&&(this.cM[n]=f.oM(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),0))}else if(this.Ub&&!(1&this.Ub[n])&&this.jE&&this.Ob&&this.lM&&this.aM&&this.cM){const a=this.jE[n],c=this.Ub[n],u=this.Ob[r];u&&(this.lM[n]=f.oM(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),c));const d=this.Ob[o];d&&(this.aM[n]=f.oM(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),c));const w=this.Ob[l];w&&(this.cM[n]=f.oM(a,t+((s*w.x+h*w.y+e*w.z)/(i*w.w)|0),c))}}if(this.Ob=null,this.kb=null,this.mM=null,this.IM=null,this.Ub)for(let t=0;t<this.Bb;t++)if(!(2&~this.Ub[t]))return;this.jE=null}ca(t,i,s,h,e,r,o){const l=n.A.sin[t],a=n.A.cos[t],c=n.A.sin[i],u=n.A.cos[i],d=n.A.sin[s],w=n.A.cos[s],A=n.A.sin[h],y=n.A.cos[h],p=r*A+o*y>>16;for(let h=0;h<this.Ug;h++){let m,I=this.Bg[h],_=this.Hg[h],E=this.Gg[h];0!==s&&(m=_*d+I*w>>16,_=_*w-I*d>>16,I=m),0!==t&&(m=_*a-E*l>>16,E=_*l+E*a>>16,_=m),0!==i&&(m=E*c+I*u>>16,E=E*u-I*c>>16,I=m),I+=e,_+=r,E+=o,m=_*y-E*A>>16,E=_*A+E*y>>16,_=m,f.WS&&f.YS&&f.VS&&(f.VS[h]=E-p,f.WS[h]=n.A.na+((I<<9)/E|0),f.YS[h]=n.A.ra+((_<<9)/E|0)),this.dS>0&&f.KS&&f.XS&&f.zS&&(f.KS[h]=I,f.XS[h]=_,f.zS[h]=E)}try{this.OM(!1,!1,0)}catch(t){}}draw(t,i,s,h,r,o,l,a,c){const u=a*r-o*h>>16,d=l*i+u*s>>16,w=this.nO*s>>16,A=d+w;if(A<=50||d>=3500)return;const y=a*h+o*r>>16;let p=y-this.nO<<9;if((p/A|0)>=e.A.KR)return;let m=y+this.nO<<9;if((m/A|0)<=-e.A.KR)return;const I=l*s-u*i>>16,_=this.nO*i>>16;let E=I+_<<9;if((E/A|0)<=-e.A.XR)return;let g=I-(_+(this.jg*s>>16))<<9;if((g/A|0)>=e.A.XR)return;let C=d-(w+(this.jg*i>>16))<=50,T=!1;if(c>0&&f.Kf){let t=d-w;t<=50&&(t=50),y>0?(p=p/A|0,m=m/t|0):(m=m/A|0,p=p/t|0),I>0?(g=g/A|0,E=E/t|0):(E=E/A|0,g=g/t|0);const i=f.xl-n.A.na,s=f.Dl-n.A.ra;i>p&&i<m&&s>g&&s<E&&(this.iC?f.dm[f.Xf++]=c:T=!0)}const O=n.A.na,b=n.A.ra;let v=0,L=0;0!==t&&(v=n.A.sin[t],L=n.A.cos[t]);for(let e=0;e<this.Ug;e++){let n,c=this.Bg[e],u=this.Hg[e],w=this.Gg[e];0!==t&&(n=w*v+c*L>>16,w=w*L-c*v>>16,c=n),c+=o,u+=l,w+=a,n=w*h+c*r>>16,w=w*r-c*h>>16,c=n,n=u*s-w*i>>16,w=u*i+w*s>>16,u=n,f.VS&&(f.VS[e]=w-d),w>=50&&f.WS&&f.YS?(f.WS[e]=O+((c<<9)/w|0),f.YS[e]=b+((u<<9)/w|0)):f.WS&&(f.WS[e]=-5e3,C=!0),(C||this.dS>0)&&f.KS&&f.XS&&f.zS&&(f.KS[e]=c,f.XS[e]=u,f.zS[e]=w)}try{this.OM(C,T,c)}catch(t){}}OM(t,i,s,h=!1){f.nM&&(this.EM=-1,this.gM=-1);for(let t=0;t<this.yM;t++)f.jS&&(f.jS[t]=0);for(let h=0;h<this.Bb;h++)if((!this.Ub||-1!==this.Ub[h])&&f.WS&&f.YS&&f.VS&&f.ZS&&f.jS){const n=this.Gb[h],r=this.Hb[h],o=this.Wb[h],l=f.WS[n],a=f.WS[r],c=f.WS[o],u=f.YS[n],d=f.YS[r],w=f.YS[o],A=f.VS[n],y=f.VS[r],p=f.VS[o];if(!t||-5e3!==l&&-5e3!==a&&-5e3!==c){i&&this.bM(f.xl,f.Dl,u,d,w,l,a,c)&&(f.dm[f.Xf++]=s,i=!1);if((l-a)*(w-d)-(u-d)*(c-a)<=0)continue;if(f.HS&&(f.HS[h]=!1),f.GS&&(f.GS[h]=l<0||a<0||c<0||l>e.A.Ev||a>e.A.Ev||c>e.A.Ev),f.ZS&&f.jS){const t=((A+y+p)/3|0)+this.pM;f.ZS[t][f.jS[t]++]=h,f.nM&&this.bM(f.xl,f.Dl,u,d,w,l,a,c)&&this.gM<t&&(this.EM=h,this.gM=t)}}else if(f.HS&&(f.HS[h]=!0),f.ZS&&f.jS){const t=((A+y+p)/3|0)+this.pM;f.ZS[t][f.jS[t]++]=h}}if(!this.fM&&f.jS){for(let t=this.yM-1;t>=0;t--){const i=f.jS[t];if(!(i<=0)&&f.ZS){const s=f.ZS[t];for(let t=0;t<i;t++)this.vM(s[t],h)}}return}for(let t=0;t<12;t++)f.qS&&f.tM&&(f.qS[t]=0,f.tM[t]=0);if(f.jS)for(let t=this.yM-1;t>=0;t--){const i=f.jS[t];if(i>0&&f.ZS){const s=f.ZS[t];for(let h=0;h<i;h++)if(this.fM&&f.qS&&f.$S){const i=s[h],e=this.fM[i],n=f.qS[e]++;f.$S[e][n]=i,e<10&&f.tM?f.tM[e]+=t:10===e&&f.JS?f.JS[n]=t:f.QS&&(f.QS[n]=t)}}}let n=0;f.qS&&f.tM&&(f.qS[1]>0||f.qS[2]>0)&&(n=(f.tM[1]+f.tM[2])/(f.qS[1]+f.qS[2])|0);let r=0;f.qS&&f.tM&&(f.qS[3]>0||f.qS[4]>0)&&(r=(f.tM[3]+f.tM[4])/(f.qS[3]+f.qS[4])|0);let o=0;if(f.qS&&f.tM&&(f.qS[6]>0||f.qS[8]>0)&&(o=(f.tM[6]+f.tM[8])/(f.qS[6]+f.qS[8])|0),f.qS&&f.$S){let t,i=0,s=f.qS[10],e=f.$S[10],l=f.JS;i===s&&(i=0,s=f.qS[11],e=f.$S[11],l=f.QS),t=i<s&&l?l[i]:-1e3;for(let a=0;a<10;a++){for(;0===a&&t>n;)try{this.vM(e[i++],h),i===s&&e!==f.$S[11]&&(i=0,s=f.qS[11],e=f.$S[11],l=f.QS),t=i<s&&l?l[i]:-1e3}catch(t){}for(;3===a&&t>r;)try{this.vM(e[i++],h),i===s&&e!==f.$S[11]&&(i=0,s=f.qS[11],e=f.$S[11],l=f.QS),t=i<s&&l?l[i]:-1e3}catch(t){}for(;5===a&&t>o;)try{this.vM(e[i++],h),i===s&&e!==f.$S[11]&&(i=0,s=f.qS[11],e=f.$S[11],l=f.QS),t=i<s&&l?l[i]:-1e3}catch(t){}const c=f.qS[a],u=f.$S[a];for(let t=0;t<c;t++)this.vM(u[t],h)}for(;-1e3!==t;)try{this.vM(e[i++],h),i===s&&e!==f.$S[11]&&(i=0,e=f.$S[11],s=f.qS[11],l=f.QS),t=i<s&&l?l[i]:-1e3}catch(t){}}}vM(t,i=!1){if(f.HS&&f.HS[t])return void this.LM(t,i);const s=this.Gb[t],h=this.Hb[t],e=this.Wb[t];let r;if(f.GS&&(n.A._v=f.GS[t]),this.uM?n.A.alpha=this.uM[t]:n.A.alpha=0,r=this.Ub?3&this.Ub[t]:0,i&&f.WS&&f.YS&&this.lM&&this.aM&&this.cM)n.A.Zu(f.WS[s],f.YS[s],f.WS[h],f.YS[h],n.A.palette[this.lM[t]]),n.A.Zu(f.WS[h],f.YS[h],f.WS[e],f.YS[e],n.A.palette[this.aM[t]]),n.A.Zu(f.WS[e],f.YS[e],f.WS[s],f.YS[s],n.A.palette[this.cM[t]]);else if(0===r&&this.lM&&this.aM&&this.cM&&f.WS&&f.YS)n.A.Ov(f.WS[s],f.WS[h],f.WS[e],f.YS[s],f.YS[h],f.YS[e],this.lM[t],this.aM[t],this.cM[t]);else if(1===r&&this.lM&&f.WS&&f.YS)n.A.aS(f.WS[s],f.WS[h],f.WS[e],f.YS[s],f.YS[h],f.YS[e],n.A.palette[this.lM[t]]);else if(2===r&&this.Ub&&this.jE&&this.lM&&this.aM&&this.cM&&f.WS&&f.YS&&f.KS&&f.XS&&f.zS){const i=this.Ub[t]>>2,r=this.dM[i],o=this.wM[i],l=this.AM[i];n.A.Rv(f.WS[s],f.WS[h],f.WS[e],f.YS[s],f.YS[h],f.YS[e],this.lM[t],this.aM[t],this.cM[t],f.KS[r],f.XS[r],f.zS[r],f.KS[o],f.KS[l],f.XS[o],f.XS[l],f.zS[o],f.zS[l],this.jE[t])}else if(3===r&&this.Ub&&this.jE&&this.lM&&f.WS&&f.YS&&f.KS&&f.XS&&f.zS){const i=this.Ub[t]>>2,r=this.dM[i],o=this.wM[i],l=this.AM[i];n.A.Rv(f.WS[s],f.WS[h],f.WS[e],f.YS[s],f.YS[h],f.YS[e],this.lM[t],this.lM[t],this.lM[t],f.KS[r],f.XS[r],f.zS[r],f.KS[o],f.KS[l],f.XS[o],f.XS[l],f.zS[o],f.zS[l],this.jE[t])}}LM(t,i=!1){let s=0;if(f.zS){const i=n.A.na,h=n.A.ra,e=this.Gb[t],r=this.Hb[t],o=this.Wb[t],l=f.zS[e],a=f.zS[r],c=f.zS[o];if(l>=50&&f.WS&&f.YS&&this.lM)f.iM[s]=f.WS[e],f.sM[s]=f.YS[e],f.hM[s++]=this.lM[t];else if(f.KS&&f.XS&&this.lM){const u=f.KS[e],d=f.XS[e],w=this.lM[t];if(c>=50&&this.cM){const e=(50-l)*n.A.$R[c-l];f.iM[s]=i+((u+((f.KS[o]-u)*e>>16)<<9)/50|0),f.sM[s]=h+((d+((f.XS[o]-d)*e>>16)<<9)/50|0),f.hM[s++]=w+((this.cM[t]-w)*e>>16)}if(a>=50&&this.aM){const e=(50-l)*n.A.$R[a-l];f.iM[s]=i+((u+((f.KS[r]-u)*e>>16)<<9)/50|0),f.sM[s]=h+((d+((f.XS[r]-d)*e>>16)<<9)/50|0),f.hM[s++]=w+((this.aM[t]-w)*e>>16)}}if(a>=50&&f.WS&&f.YS&&this.aM)f.iM[s]=f.WS[r],f.sM[s]=f.YS[r],f.hM[s++]=this.aM[t];else if(f.KS&&f.XS&&this.aM){const u=f.KS[r],d=f.XS[r],w=this.aM[t];if(l>=50&&this.lM){const r=(50-a)*n.A.$R[l-a];f.iM[s]=i+((u+((f.KS[e]-u)*r>>16)<<9)/50|0),f.sM[s]=h+((d+((f.XS[e]-d)*r>>16)<<9)/50|0),f.hM[s++]=w+((this.lM[t]-w)*r>>16)}if(c>=50&&this.cM){const e=(50-a)*n.A.$R[c-a];f.iM[s]=i+((u+((f.KS[o]-u)*e>>16)<<9)/50|0),f.sM[s]=h+((d+((f.XS[o]-d)*e>>16)<<9)/50|0),f.hM[s++]=w+((this.cM[t]-w)*e>>16)}}if(c>=50&&f.WS&&f.YS&&this.cM)f.iM[s]=f.WS[o],f.sM[s]=f.YS[o],f.hM[s++]=this.cM[t];else if(f.KS&&f.XS&&this.cM){const u=f.KS[o],d=f.XS[o],w=this.cM[t];if(a>=50&&this.aM){const e=(50-c)*n.A.$R[a-c];f.iM[s]=i+((u+((f.KS[r]-u)*e>>16)<<9)/50|0),f.sM[s]=h+((d+((f.XS[r]-d)*e>>16)<<9)/50|0),f.hM[s++]=w+((this.aM[t]-w)*e>>16)}if(l>=50&&this.lM){const r=(50-c)*n.A.$R[l-c];f.iM[s]=i+((u+((f.KS[e]-u)*r>>16)<<9)/50|0),f.sM[s]=h+((d+((f.XS[e]-d)*r>>16)<<9)/50|0),f.hM[s++]=w+((this.lM[t]-w)*r>>16)}}}const h=f.iM[0],r=f.iM[1],o=f.iM[2],l=f.sM[0],a=f.sM[1],c=f.sM[2];if(!((h-r)*(c-a)-(l-a)*(o-r)<=0))if(n.A._v=!1,3===s){let s;if((h<0||r<0||o<0||h>e.A.Ev||r>e.A.Ev||o>e.A.Ev)&&(n.A._v=!0),s=this.Ub?3&this.Ub[t]:0,i)n.A.Zu(h,r,l,a,f.hM[0]),n.A.Zu(r,o,a,c,f.hM[1]),n.A.Zu(o,h,c,l,f.hM[2]);else if(0===s)n.A.Ov(h,r,o,l,a,c,f.hM[0],f.hM[1],f.hM[2]);else if(1===s&&this.lM)n.A.aS(h,r,o,l,a,c,n.A.palette[this.lM[t]]);else if(2===s&&this.Ub&&this.jE&&f.KS&&f.XS&&f.zS){const i=this.Ub[t]>>2,s=this.dM[i],e=this.wM[i],u=this.AM[i];n.A.Rv(h,r,o,l,a,c,f.hM[0],f.hM[1],f.hM[2],f.KS[s],f.XS[s],f.zS[s],f.KS[e],f.KS[u],f.XS[e],f.XS[u],f.zS[e],f.zS[u],this.jE[t])}else if(3===s&&this.Ub&&this.jE&&this.lM&&f.KS&&f.XS&&f.zS){const i=this.Ub[t]>>2,s=this.dM[i],e=this.wM[i],u=this.AM[i];n.A.Rv(h,r,o,l,a,c,this.lM[t],this.lM[t],this.lM[t],f.KS[s],f.XS[s],f.zS[s],f.KS[e],f.KS[u],f.XS[e],f.XS[u],f.zS[e],f.zS[u],this.jE[t])}}else if(4===s){let s;if((h<0||r<0||o<0||h>e.A.Ev||r>e.A.Ev||o>e.A.Ev||f.iM[3]<0||f.iM[3]>e.A.Ev)&&(n.A._v=!0),s=this.Ub?3&this.Ub[t]:0,i)n.A.Zu(h,r,l,a,f.hM[0]),n.A.Zu(r,o,a,c,f.hM[1]),n.A.Zu(o,f.iM[3],c,f.sM[3],f.hM[2]),n.A.Zu(f.iM[3],h,f.sM[3],l,f.hM[3]);else if(0===s)n.A.Ov(h,r,o,l,a,c,f.hM[0],f.hM[1],f.hM[2]),n.A.Ov(h,o,f.iM[3],l,c,f.sM[3],f.hM[0],f.hM[2],f.hM[3]);else if(1===s){if(this.lM){const i=n.A.palette[this.lM[t]];n.A.aS(h,r,o,l,a,c,i),n.A.aS(h,o,f.iM[3],l,c,f.sM[3],i)}}else if(2===s&&this.Ub&&this.jE&&f.KS&&f.XS&&f.zS){const i=this.Ub[t]>>2,s=this.dM[i],e=this.wM[i],u=this.AM[i];n.A.Rv(h,r,o,l,a,c,f.hM[0],f.hM[1],f.hM[2],f.KS[s],f.XS[s],f.zS[s],f.KS[e],f.KS[u],f.XS[e],f.XS[u],f.zS[e],f.zS[u],this.jE[t]),n.A.Rv(h,o,f.iM[3],l,c,f.sM[3],f.hM[0],f.hM[2],f.hM[3],f.KS[s],f.XS[s],f.zS[s],f.KS[e],f.KS[u],f.XS[e],f.XS[u],f.zS[e],f.zS[u],this.jE[t])}else if(3===s&&this.Ub&&this.jE&&this.lM&&f.KS&&f.XS&&f.zS){const i=this.Ub[t]>>2,s=this.dM[i],e=this.wM[i],u=this.AM[i];n.A.Rv(h,r,o,l,a,c,this.lM[t],this.lM[t],this.lM[t],f.KS[s],f.XS[s],f.zS[s],f.KS[e],f.KS[u],f.XS[e],f.XS[u],f.zS[e],f.zS[u],this.jE[t]),n.A.Rv(h,o,f.iM[3],l,c,f.sM[3],this.lM[t],this.lM[t],this.lM[t],f.KS[s],f.XS[s],f.zS[s],f.KS[e],f.KS[u],f.XS[e],f.XS[u],f.zS[e],f.zS[u],this.jE[t])}}}CM(t,i,s,h,e){if(!h)return;const r=h.length;if(0===e){let e=0;f._n=0,f.eM=0,f.En=0;for(let t=0;t<r;t++){if(!this.Kg)continue;const i=h[t];if(i<this.Kg.length){const t=this.Kg[i];if(t)for(let i=0;i<t.length;i++){const s=t[i];f._n+=this.Bg[s],f.eM+=this.Hg[s],f.En+=this.Gg[s],e++}}}e>0?(f._n=(f._n/e|0)+t,f.eM=(f.eM/e|0)+i,f.En=(f.En/e|0)+s):(f._n=t,f.eM=i,f.En=s)}else if(1===e)for(let e=0;e<r;e++){const n=h[e];if(!this.Kg||n>=this.Kg.length)continue;const r=this.Kg[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.Bg[e]+=t,this.Hg[e]+=i,this.Gg[e]+=s}}else if(2===e)for(let e=0;e<r;e++){const r=h[e];if(!this.Kg||r>=this.Kg.length)continue;const o=this.Kg[r];if(o)for(let h=0;h<o.length;h++){const e=o[h];this.Bg[e]-=f._n,this.Hg[e]-=f.eM,this.Gg[e]-=f.En;const r=8*(255&t),l=8*(255&i),a=8*(255&s);let c,u;if(0!==a){c=n.A.sin[a],u=n.A.cos[a];const t=this.Hg[e]*c+this.Bg[e]*u>>16;this.Hg[e]=this.Hg[e]*u-this.Bg[e]*c>>16,this.Bg[e]=t}if(0!==r){c=n.A.sin[r],u=n.A.cos[r];const t=this.Hg[e]*u-this.Gg[e]*c>>16;this.Gg[e]=this.Hg[e]*c+this.Gg[e]*u>>16,this.Hg[e]=t}if(0!==l){c=n.A.sin[l],u=n.A.cos[l];const t=this.Gg[e]*c+this.Bg[e]*u>>16;this.Gg[e]=this.Gg[e]*u-this.Bg[e]*c>>16,this.Bg[e]=t}this.Bg[e]+=f._n,this.Hg[e]+=f.eM,this.Gg[e]+=f.En}}else if(3===e)for(let e=0;e<r;e++){const n=h[e];if(!this.Kg||n>=this.Kg.length)continue;const r=this.Kg[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.Bg[e]-=f._n,this.Hg[e]-=f.eM,this.Gg[e]-=f.En,this.Bg[e]=this.Bg[e]*t/128|0,this.Hg[e]=this.Hg[e]*i/128|0,this.Gg[e]=this.Gg[e]*s/128|0,this.Bg[e]+=f._n,this.Hg[e]+=f.eM,this.Gg[e]+=f.En}}else if(5===e&&this.Vg&&this.uM)for(let i=0;i<r;i++){const s=h[i];if(s>=this.Vg.length)continue;const e=this.Vg[s];if(e)for(let i=0;i<e.length;i++){const s=e[i];this.uM[s]+=8*t,this.uM[s]<0&&(this.uM[s]=0),this.uM[s]>255&&(this.uM[s]=255)}}}TM(){this.jg=0,this.nO=0,this.xb=0,this.Db=999999,this.Nb=-999999,this.Fb=-99999,this.Pb=99999;for(let t=0;t<this.Ug;t++){const i=this.Bg[t],s=this.Hg[t],h=this.Gg[t];i<this.Db&&(this.Db=i),i>this.Nb&&(this.Nb=i),h<this.Pb&&(this.Pb=h),h>this.Fb&&(this.Fb=h),-s>this.jg&&(this.jg=-s),s>this.xb&&(this.xb=s);const e=i*i+h*h;e>this.nO&&(this.nO=e)}this.nO=0|Math.sqrt(this.nO),this.pM=0|Math.sqrt(this.nO*this.nO+this.jg*this.jg),this.yM=this.pM+(0|Math.sqrt(this.nO*this.nO+this.xb*this.xb))}bM(t,i,s,h,e,n,r,o){return!(i<s&&i<h&&i<e)&&(!(i>s&&i>h&&i>e)&&(!(t<n&&t<r&&t<o)&&(t<=n||t<=r||t<=o)))}RM(t){if(!(f.WS&&f.YS&&this.lM&&this.aM&&this.cM))return;const i=this.Gb[t],s=this.Hb[t],h=this.Wb[t];n.A.Zu(f.WS[i],f.YS[i],f.WS[s],f.YS[s],n.A.palette[1e3]),n.A.Zu(f.WS[s],f.YS[s],f.WS[h],f.YS[h],n.A.palette[1e3]),n.A.Zu(f.WS[h],f.YS[h],f.WS[i],f.YS[i],n.A.palette[1e3])}}},2511:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(8950),e=s(1069),n=s(4474),r=s(880);class o extends n.A{nc;width;height;Cc;Tc;Pl;fd;constructor(t,i){super(),this.nc=new Int32Array(t*i),this.width=this.Pl=t,this.height=this.fd=i,this.Cc=this.Tc=0}static Ec=async(t,i)=>{const s=t.read(i+'.dat');if(!s)throw new Error(`${i} jpeg not found!`);const h=await(0,r.r)(s),e=new o(h.width,h.height),n=new Uint32Array(h.data.buffer),l=e.nc;for(let t=0;t<l.length;t++){const i=n[t];l[t]=(i>>24&255)<<24|(255&i)<<16|(i>>8&255)<<8|i>>16&255}return e};static za=(t,i,s=0)=>{const h=new e.A(t.read(i+'.dat')),n=new e.A(t.read('index.dat'));n.Fc=h.KA;const r=n.KA,l=n.KA,a=[],c=n.ZA-1;for(let t=0;t<c;t++)a[t+1]=n.ug,0===a[t+1]&&(a[t+1]=1);for(let t=0;t<s;t++)n.Fc+=2,h.Fc+=n.KA*n.KA,n.Fc+=1;if(h.Fc>h.length||n.Fc>n.length)throw new Error;const f=n.ZA,u=n.ZA,d=n.KA,w=n.KA,A=new o(d,w);A.Cc=f,A.Tc=u,A.Pl=r,A.fd=l;const y=n.ZA;if(0===y){const t=A.width*A.height;for(let i=0;i<t;i++)A.nc[i]=a[h.ZA]}else if(1===y){const t=A.width;for(let i=0;i<t;i++){const s=A.height;for(let e=0;e<s;e++)A.nc[i+e*t]=a[h.ZA]}}return A};bind(){h.A.bind(this.nc,this.width,this.height)}draw(t,i){t|=0,i|=0;let s=(t+=this.Cc)+(i+=this.Tc)*h.A.oC,e=0,n=this.height,r=this.width,o=h.A.oC-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.oC}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.SM(r,n,this.nc,e,l,h.A.nc,s,o)}Nl(t,i,s){i|=0,s|=0;let e=(i+=this.Cc)+(s+=this.Tc)*h.A.oC,n=0,r=this.height,o=this.width,l=h.A.oC-o,a=0;if(s<h.A.top){const t=h.A.top-s;r-=t,s=h.A.top,n+=t*o,e+=t*h.A.oC}if(s+r>h.A.bottom&&(r-=s+r-h.A.bottom),i<h.A.left){const t=h.A.left-i;o-=t,i=h.A.left,n+=t,e+=t,a+=t,l+=t}if(i+o>h.A.right){const t=i+o-h.A.right;o-=t,a+=t,l+=t}o>0&&r>0&&this.MM(o,r,this.nc,n,a,h.A.nc,e,l,t)}tc(t,i){t|=0,i|=0;let s=(t+=this.Cc)+(i+=this.Tc)*h.A.oC,e=0,n=this.height,r=this.width,o=h.A.oC-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.oC}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.kM(r,n,this.nc,e,l,h.A.nc,s,o)}Ja(){const t=this.nc,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}}Qa(){const t=this.nc,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}}translate(t,i,s){for(let h=0;h<this.nc.length;h++){const e=this.nc[h];if(0!==e){let n=e>>16&255;n+=t,n<1?n=1:n>255&&(n=255);let r=e>>8&255;r+=i,r<1?r=1:r>255&&(r=255);let o=255&e;o+=s,o<1?o=1:o>255&&(o=255),this.nc[h]=(n<<16)+(r<<8)+o}}}wC(t,i,s,e){t|=0,i|=0,s|=0,e|=0;try{const n=this.width;let r=0,o=0;const l=this.Pl,a=this.fd,c=(l<<16)/s|0,f=(a<<16)/e|0;t+=(this.Cc*s+l-1)/l|0,i+=(this.Tc*e+a-1)/a|0,this.Cc*s%l!=0&&(r=(l-this.Cc*s%l<<16)/s|0),this.Tc*e%a!=0&&(o=(a-this.Tc*e%a<<16)/e|0),s=s*(this.width-(r>>16))/l|0,e=e*(this.height-(o>>16))/a|0;let u=t+i*h.A.oC,d=h.A.oC-s;if(i<h.A.top){const t=h.A.top-i;e-=t,i=0,u+=t*h.A.oC,o+=f*t}if(i+e>h.A.bottom&&(e-=i+e-h.A.bottom),t<h.A.left){const i=h.A.left-t;s-=i,t=0,u+=i,r+=c*i,d+=i}if(t+s>h.A.right){const i=t+s-h.A.right;s-=i,d+=i}this.scale(s,e,this.nc,r,o,h.A.nc,d,u,n,c,f)}catch(t){console.error('error in sprite clipping routine')}}nd(t,i,s,e,n,r,o,l,a,c){t|=0,i|=0,s|=0,e|=0;try{const f=-s/2|0,u=-e/2|0,d=65536*Math.sin(a/326.11)|0,w=65536*Math.cos(a/326.11)|0,A=d*c>>8,y=w*c>>8;let p=(o<<16)+u*A+f*y,m=u*y-f*A+(l<<16),I=t+i*h.A.oC;for(let t=0;t<e;t++){const i=n[t];let s=I+i,e=p+y*i,o=m-A*i;for(let i=-r[t];i<0;i++)h.A.nc[s++]=this.nc[(e>>16)+(o>>16)*this.width],e+=y,o-=A;p+=A,m+=y,I+=h.A.oC}}catch(t){}}ad(t,i,s){t|=0,i|=0;let e=(t+=this.Cc)+(i+=this.Tc)*h.A.oC,n=0,r=this.height,o=this.width,l=h.A.oC-o,a=0;if(i<h.A.top){const t=h.A.top-i;r-=t,i=h.A.top,n+=t*o,e+=t*h.A.oC}if(i+r>h.A.bottom&&(r-=i+r-h.A.bottom),t<h.A.left){const i=h.A.left-t;o-=i,t=h.A.left,n+=i,e+=i,a+=i,l+=i}if(t+o>h.A.right){const i=t+o-h.A.right;o-=i,a+=i,l+=i}o>0&&r>0&&this.xM(o,r,this.nc,a,n,h.A.nc,e,l,s.nc)}scale(t,i,s,h,e,n,r,o,l,a,c){try{const f=h;for(let u=-i;u<0;u++){const i=(e>>16)*l;for(let e=-t;e<0;e++){const t=s[(h>>16)+i];0===t?o++:n[o++]=t,h+=a}e+=c,h=f,o+=r}}catch(t){console.error('error in plot_scale')}}kM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++)n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++];for(let i=t;i<0;i++)n[r++]=s[h++];r+=o,h+=e}}MM(t,i,s,h,e,n,r,o,l){const a=256-l;for(let c=-i;c<0;c++){for(let i=-t;i<0;i++){const t=s[h++];if(0===t)r++;else{const i=n[r];n[r++]=((16711935&t)*l+(16711935&i)*a&4278255360)+((65280&t)*l+(65280&i)*a&16711680)>>8}}r+=o,h+=e}}SM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=t}r+=o,h+=e}}xM(t,i,s,h,e,n,r,o,l){const a=-(t>>2);t=-(3&t);for(let c=-i;c<0;c++){for(let t=a;t<0;t++){let t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++}for(let i=t;i<0;i++){const t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++}r+=o,e+=h}}}},1673:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8950),e=s(1069),n=s(4474);class r extends n.A{nc;width;height;Cc;Tc;Pl;fd;palette;constructor(t,i,s){super(),this.nc=new Int8Array(t*i),this.width=this.Pl=t,this.height=this.fd=i,this.Cc=this.Tc=0,this.palette=s}static za=(t,i,s=0)=>{const h=new e.A(t.read(i+'.dat')),n=new e.A(t.read('index.dat'));n.Fc=h.KA;const o=n.KA,l=n.KA,a=n.ZA,c=new Int32Array(a);for(let t=1;t<a;t++)c[t]=n.ug,0===c[t]&&(c[t]=1);for(let t=0;t<s;t++)n.Fc+=2,h.Fc+=n.KA*n.KA,n.Fc+=1;if(h.Fc>h.length||n.Fc>n.length)throw new Error;const f=n.ZA,u=n.ZA,d=n.KA,w=n.KA,A=new r(d,w,c);A.Cc=f,A.Tc=u,A.Pl=o,A.fd=l;const y=A.nc,p=n.ZA;if(0===p){const t=A.width*A.height;for(let i=0;i<t;i++)y[i]=h.zA}else if(1===p){const t=A.width,i=A.height;for(let s=0;s<t;s++)for(let e=0;e<i;e++)y[s+e*t]=h.zA}return A};draw(t,i){t|=0,i|=0;let s=(t+=this.Cc)+(i+=this.Tc)*h.A.oC,e=0,n=this.height,r=this.width,o=h.A.oC-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.oC}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.DM(r,n,this.nc,e,l,h.A.nc,s,o)}Ja(){const t=this.nc,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}}Qa(){const t=this.nc,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}}translate(t,i,s){for(let h=0;h<this.palette.length;h++){let e=this.palette[h]>>16&255;e+=t,e<0?e=0:e>255&&(e=255);let n=this.palette[h]>>8&255;n+=i,n<0?n=0:n>255&&(n=255);let r=255&this.palette[h];r+=s,r<0?r=0:r>255&&(r=255),this.palette[h]=(e<<16)+(n<<8)+r}}rS(){this.Pl|=0,this.fd|=0,this.Pl/=2,this.fd/=2,this.Pl|=0,this.fd|=0;const t=new Int8Array(this.Pl*this.fd);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[(h+this.Cc>>1)+(s+this.Tc>>1)*this.Pl]=this.nc[i++];this.nc=t,this.width=this.Pl,this.height=this.fd,this.Cc=0,this.Tc=0}wC(){if(this.width===this.Pl&&this.height===this.fd)return;const t=new Int8Array(this.Pl*this.fd);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[h+this.Cc+(s+this.Tc)*this.Pl]=this.nc[i++];this.nc=t,this.width=this.Pl,this.height=this.fd,this.Cc=0,this.Tc=0}DM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t]}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=this.palette[255&t]}r+=o,h+=e}}clip(t,i,s,e){try{const n=this.width;this.height;let r=0,o=0;const l=this.Pl,a=this.fd,c=(l<<16)/s|0,f=(a<<16)/e|0;t=t+(this.Cc*s+l-1)/l|0,i=i+(this.Tc*e+a-1)/a|0,this.Cc*s%l!=0&&(r=(l-this.Cc*s%l<<16)/s|0),this.Tc*e%a!=0&&(o=(a-this.Tc*e%a<<16)/e|0),s=s*(this.width-(r>>16))/l|0,e=e*(this.height-(o>>16))/a|0;let u,d=t+i*h.A.oC,w=h.A.oC-s;i<h.A.top&&(u=h.A.top-i,e-=u,i=0,d+=u*h.A.oC,o+=f*u),i+e>h.A.bottom&&(e-=i+e-h.A.bottom),t<h.A.left&&(u=h.A.left-t,s-=u,t=0,d+=u,r+=c*u,w+=u),t+s>h.A.right&&(u=t+s-h.A.right,s-=u,w+=u),this.NM(h.A.nc,this.nc,this.palette,r,o,d,w,s,e,c,f,n)}catch(t){console.log('error in sprite clipping routine')}}NM(t,i,s,h,e,n,r,o,l,a,c,f){try{const u=h;for(let d=-l;d<0;d++){const l=(e>>16)*f;for(let e=-o;e<0;e++){const e=i[(h>>16)+l];0==e?n++:t[n++]=s[255&e],h+=a}e+=c,h=u,n+=r}}catch(t){console.log('error in plot_scale')}}}},2682:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(8950),e=s(1069),n=s(4474);class r{seed;constructor(t){this.seed=(0x5deece66dn^t)&(1n<<48n)-1n}PM(t){this.seed=(0x5deece66dn^t)&(1n<<48n)-1n}YA(){return this.next(32)}next(t){return this.seed=0x5deece66dn*this.seed+0xbn&(1n<<48n)-1n,Number(this.seed)>>>48-t}}var o=s(9298);class l extends n.A{static xc='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!"$%^&*()-_=+[{]};:\'@#~,<.>/?\\| ';static FM=[];static{const t=navigator.userAgent.includes('Capacitor');for(let i=0;i<256;i++){let s=l.xc.indexOf(String.fromCharCode(i));t&&s>=63&&s--,-1===s&&(s=74),l.FM[i]=s}}UM=[];BM=new Int32Array(94);GM=new Int32Array(94);HM=new Int32Array(94);WM=new Int32Array(94);YM=new Int32Array(95);VM=new Int32Array(256);random=new r(BigInt(Date.now()));height=0;static za=(t,i)=>{const s=new e.A(t.read(i+'.dat')),h=new e.A(t.read('index.dat'));h.Fc=s.KA+4;const n=h.ZA;n>0&&(h.Fc+=3*(n-1));const r=new l;for(let t=0;t<94;t++){r.HM[t]=h.ZA,r.WM[t]=h.ZA;const i=r.BM[t]=h.KA,e=r.GM[t]=h.KA,n=h.ZA,o=i*e;if(r.UM[t]=new Int8Array(o),0===n)for(let h=0;h<i*e;h++)r.UM[t][h]=s.zA;else if(1===n)for(let h=0;h<i;h++)for(let n=0;n<e;n++)r.UM[t][h+n*i]=s.zA;e>r.height&&(r.height=e),r.HM[t]=1,r.YM[t]=i+2;{let s=0;for(let h=e/7|0;h<e;h++)s+=r.UM[t][h*i];s<=(e/7|0)&&(r.YM[t]--,r.HM[t]=0)}{let s=0;for(let h=e/7|0;h<e;h++)s+=r.UM[t][i+h*i-1];s<=(e/7|0)&&r.YM[t]--}}r.YM[94]=r.YM[8];for(let t=0;t<256;t++)r.VM[t]=r.YM[l.FM[t]];return r};Fl(t,i,s,h){if(!s)return;t|=0,i|=0;const e=s.length;i-=this.height;for(let n=0;n<e;n++){const e=l.FM[s.charCodeAt(n)];94!==e&&this.KM(this.UM[e],t+this.HM[e],i+this.WM[e],this.BM[e],this.GM[e],h),t+=this.YM[e]}}ta(t,i,s,h,e){t|=0,i|=0;const n=s.length;i-=this.height;for(let r=0;r<n;r++)if('@'===s.charAt(r)&&r+4<n&&'@'===s.charAt(r+4))h=this.XM(s.substring(r+1,r+4)),r+=4;else{const n=l.FM[s.charCodeAt(r)];94!==n&&(e&&this.KM(this.UM[n],t+this.HM[n]+1,i+this.WM[n]+1,this.BM[n],this.GM[n],o.A.Bl),this.KM(this.UM[n],t+this.HM[n],i+this.WM[n],this.BM[n],this.GM[n],h)),t+=this.YM[n]}}au(t){if(!t)return 0;const i=t.length;let s=0;for(let h=0;h<i;h++)'@'===t.charAt(h)&&h+4<i&&'@'===t.charAt(h+4)?h+=4:s+=this.VM[t.charCodeAt(h)];return s}Jl(t,i,s,h,e){t|=0,i|=0,this.ta(t-this.au(s)/2,i,s,h,e)}Ac(t,i,s,h){s&&(t|=0,i|=0,this.Fl(t-this.au(s)/2,i,s,h))}xd(t,i,s,h,e,n){t|=0,i|=0,this.random.PM(BigInt(n));const r=192+(31&this.random.YA()),a=i-this.height;for(let i=0;i<s.length;i++)if('@'===s.charAt(i)&&i+4<s.length&&'@'===s.charAt(i+4))h=this.XM(s.substring(i+1,i+4)),i+=4;else{const n=l.FM[s.charCodeAt(i)];94!==n&&(e&&this.zM(t+this.HM[n]+1,a+this.WM[n]+1,this.BM[n],this.GM[n],o.A.Bl,192,this.UM[n]),this.zM(t+this.HM[n],a+this.WM[n],this.BM[n],this.GM[n],h,r,this.UM[n])),t+=this.YM[n],3&this.random.YA()||t++}}Hu(t,i,s,h,e=!0){t|=0,i|=0,e&&this.Fl(t-this.au(s)+1,i+1,s,o.A.Bl),this.Fl(t-this.au(s),i,s,h)}Bu(t,i,s,h,e){if(!s)return;t|=0,i|=0,t-=this.au(s)/2|0;const n=i-this.height;for(let i=0;i<s.length;i++){const r=l.FM[s.charCodeAt(i)];94!=r&&this.KM(this.UM[r],t+this.HM[r],n+this.WM[r]+(5*Math.sin(i/2+e/5)|0),this.BM[r],this.GM[r],h),t+=this.YM[r]}}KM(t,i,s,e,n,r){e|=0,n|=0;let o=(i|=0)+(s|=0)*h.A.oC,l=h.A.oC-e,a=0,c=0;if(s<h.A.top){const t=h.A.top-s;n-=t,s=h.A.top,c+=t*e,o+=t*h.A.oC}if(s+n>=h.A.bottom&&(n-=s+n+1-h.A.bottom),i<h.A.left){const t=h.A.left-i;e-=t,i=h.A.left,c+=t,o+=t,a+=t,l+=t}if(i+e>=h.A.right){const t=i+e+1-h.A.right;e-=t,a+=t,l+=t}e>0&&n>0&&this.jM(e,n,t,c,a,h.A.nc,o,l,r)}zM(t,i,s,e,n,r,o){s|=0,e|=0;let l=(t|=0)+(i|=0)*h.A.oC,a=h.A.oC-s,c=0,f=0;if(i<h.A.top){const t=h.A.top-i;e-=t,i=h.A.top,f+=t*s,l+=t*h.A.oC}if(i+e>=h.A.bottom&&(e-=i+e+1-h.A.bottom),t<h.A.left){const i=h.A.left-t;s-=i,t=h.A.left,f+=i,l+=i,c+=i,a+=i}if(t+s>=h.A.right){const i=t+s+1-h.A.right;s-=i,c+=i,a+=i}s>0&&e>0&&this.ZM(s,e,h.A.nc,l,a,o,f,c,n,r)}jM(t,i,s,h,e,n,r,o,l){const a=-((t|=0)>>2);t=-(3&t);for(let c=-(i|=0);c<0;c++){for(let t=a;t<0;t++)0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l;for(let i=t;i<0;i++)0===s[h++]?r++:n[r++]=l;r+=o,h+=e}}ZM(t,i,s,h,e,n,r,o,l,a){t|=0;const c=((16711935&l)*a&4278255360)+((65280&l)*a&16711680)>>8,f=256-a;for(let l=-(i|=0);l<0;l++){for(let i=-t;i<0;i++)if(0===n[r++])h++;else{const t=s[h];s[h++]=(((16711935&t)*f&4278255360)+((65280&t)*f&16711680)>>8)+c}h+=e,r+=o}}XM(t){return'red'===t?o.A.RED:'gre'===t?o.A.GREEN:'blu'===t?o.A.BLUE:'yel'===t?o.A.Gl:'cya'===t?o.A.bc:'mag'===t?o.A.vc:'whi'===t?o.A._l:'bla'===t?o.A.Bl:'lre'===t?o.A.UR:'dre'===t?o.A.sd:'dbl'===t?o.A.td:'or1'===t?o.A.BR:'or2'===t?o.A.GR:'or3'===t?o.A.HR:'gr1'===t?o.A.WR:'gr2'===t?o.A.YR:'gr3'===t?o.A.VR:o.A.Bl}split(t,i){if(0===t.length)return[t];const s=[];for(;t.length>0;){if(this.au(t)<=i&&-1===t.indexOf('|')){s.push(t);break}let h=t.length;for(let s=0;s<t.length;s++)if(' '===t[s]){if(this.au(t.substring(0,s))>i)break;h=s}else if('|'===t[s]){h=s;break}s.push(t.substring(0,h)),t=t.substring(h+1)}return s}}},1183:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(8950),e=s(7854);class n{qM;width;height;$M;JM;nc;constructor(t,i,s=e.jo){this.$M=s,this.qM=this.$M.getImageData(0,0,t,i),this.JM=new Uint32Array(this.qM.data.buffer),this.nc=new Int32Array(t*i),this.width=t,this.height=i,this.bind()}clear(){this.nc.fill(0)}bind(){h.A.bind(this.nc,this.width,this.height)}draw(t,i){this.#t(),this.$M.putImageData(this.qM,t,i)}#t(){const t=this.nc.length,i=this.nc,s=this.JM;for(let h=0;h<t;h++){const t=i[h];s[h]=t>>16&255|(t>>8&255)<<8|(255&t)<<16|4278190080}}}},3955:(t,i,s)=>{s.d(i,{A:()=>h});class h{static iy=150;static bf=108;static Tf=70;static Zc=81;static sf=189;static Mw=7;static Zd=88;static Kd=30;static Qd=176;static Hd=220;static Dw=66;static Tw=17;static lw=2;static Lw=238;static cA=233;static Gf=146;static cf=215;static Of=236;static jI=85;static pI=219;static dw=140;static pw=40;static yw=200;static ww=178;static Aw=247;static xw=138;static iw=239;static Jd=194;static jd=8;static qd=27;static $d=113;static tw=100;static fw=134;static ow=202;static hw=245;static mw=172;static Pw=96;static kw=97;static Nw=116;static uw=9;static Gd=75;static Fd=164;static aw=53;static cw=185;static Pd=206;static Vw=177;static Bw=248;static Xd=195;static zd=71;static Vd=133;static Wd=157;static Yd=211;static nw=48;static ew=130;static bw=31;static Sw=59;static Cw=212;static Rw=38;static Ow=6;static gw=155;static rw=235;static HA=231;static AA=237;static kf=175;static km=93;static eA=190;static Mm=165;static nf=159;static gA=171;static EA=79;static iA=52;static wA=244;static fA=148;static _A=11;static IA=118;static pA=4;static mA=158;static Sm=181}},3554:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(6666),e=s(1982),n=s(9234);class r{QM;tk;ik;closed=!1;sk=!1;static Nc=async t=>await new Promise(((i,s)=>{const h=t.host.startsWith('https'),e=h?'wss':'ws',n=t.host.substring(t.host.indexOf('//')+2),r=h?t.port+2:t.port+1,o=new WebSocket(`${e}://${n}:${r}`,'binary');o.addEventListener('open',(()=>{console.log('connection open!'),i(o)})),o.addEventListener('error',(()=>{console.log('connection error!'),s(o)}))}));constructor(t){t.onclose=this.onclose,t.onerror=this.onerror,this.tk=new a(t,5e3),this.ik=new o(t,5e3),this.QM=t}get host(){return this.QM.url.split('/')[2]}get port(){return parseInt(this.QM.url.split(':')[2],10)}get available(){return this.closed?0:this.tk.available}write(t,i){this.ik.write(t,i)}async read(){return this.closed?0:this.tk.hk()??await this.tk.ek()}async Pc(t,i,s){if(!this.closed)for(;s>0;){const h=this.tk.nk(t,i,s)??await this.tk.rk(t,i,s);if(h.length<=0)throw new Error('EOF');i+=h.length,s-=h.length}}close(){this.closed=!0,this.QM.close(),this.tk.close(),this.ik.close(),console.log('connection close!'),this.sk&&console.log('connection error!')}onclose=t=>{this.closed||this.close()};onerror=t=>{this.closed||(this.sk=!0,this.close())}}class o{QM;lk;closed=!1;sk=!1;constructor(t,i){this.QM=t,this.lk=i}write(t,i){if(!this.closed){if(this.sk)throw this.sk=!1,new Error('Error in writer thread');if(i>this.lk||t.length>this.lk)throw new Error('buffer overflow');try{this.QM.send(t.subarray(0,i))}catch(t){this.sk=!0}}}close(){this.closed=!0}}class l extends e.A{Gm;position;constructor(t){super(),this.Gm=t,this.position=0}get available(){return this.Gm.length-this.position}get read(){return this.Gm[this.position++]}get ak(){return this.Gm.length}}class a{lk;queue=new h.A;event=null;ck=null;total=0;closed=!1;constructor(t,i){this.lk=i,t.binaryType='arraybuffer',t.onmessage=this.onmessage}get available(){return this.total}onmessage=t=>{if(this.closed)throw new Error('WebSocketReader is closed!');const i=new l(new Uint8Array(t.data));if(this.event?this.queue.n_(i):this.event=i,this.total+=i.ak,this.ck&&(this.ck(this.event),this.ck=null,this.total>this.lk))throw new Error('buffer overflow')};fk(){return this.event&&this.event.available>0?this.event.read:null}async uk(t){for(this.event=this.queue.hv();this.total<t;)await Promise.race([new Promise((t=>this.ck=t)),(0,n.Wo)(2e3).then((()=>{throw new Error('WebSocketReader timed out or closed while reading.')}))]);return this.event?this.event.read:this.uk(t)}nk(t,i,s){if(this.closed)throw new Error('WebSocketReader is closed!');if(!(this.event&&this.event.available>=s))return null;for(;s>0;){const h=this.fk();if(null===h)throw new Error('EOF - tried to read a fast byte when there was not enough immediate bytes.');t[i++]=h,this.total--,s--}return t}async rk(t,i,s){if(this.closed)throw new Error('WebSocketReader is closed!');for(;s>0;)t[i++]=this.fk()??await this.uk(s),this.total--,s--;return t}hk(){if(this.closed)throw new Error('WebSocketReader is closed!');const t=this.fk();return null===t?null:(this.total--,t)}async ek(){if(this.closed)throw new Error('WebSocketReader is closed!');const t=await this.uk(1);return this.total--,t}close(){this.closed=!0,this.ck=null,this.total=0,this.event=null,this.queue.clear()}}},4544:(t,i,s)=>{s.d(i,{A:()=>h});class h{db;constructor(t){t.onerror=this.onerror,t.onclose=this.onclose,this.db=t}static openDatabase=async()=>await new Promise(((t,i)=>{const s=indexedDB.open('lostcity',1);s.onsuccess=i=>{const s=i.target;console.log('database success!'),t(s.result)},s.onupgradeneeded=t=>{t.target.result.createObjectStore('cache')},s.onerror=t=>{const s=t.target;console.error('database error!: ',s.error),i(s.result)}}));Uo=async t=>await new Promise((i=>{const s=this.db.transaction('cache','readonly').objectStore('cache').get(t);s.onsuccess=()=>{i(s.result)},s.onerror=t=>{i(void 0)}}));Yo=async(t,i)=>await new Promise(((s,h)=>{const e=this.db.transaction('cache','readwrite').objectStore('cache').put(i,t);e.onsuccess=()=>{s()},e.onerror=t=>{h()}}));onclose=t=>{console.log('database close!')};onerror=t=>{console.log('database error!')};dk=t=>{const i=t.trim();let s=0;for(let t=0;t<i.length&&t<12;t++){const h=i.charAt(t);s*=37,h>='A'&&h<='Z'?s+=h.charCodeAt(0)+1-65:h>='a'&&h<='z'?s+=h.charCodeAt(0)+1-97:h>='0'&&h<='9'&&(s+=h.charCodeAt(0)+27-48)}return s}}},2634:(t,i,s)=>{s.d(i,{A:()=>h});class h{count=0;wk=new Int32Array(256);Ak=new Int32Array(256);a=0;b=0;c=0;constructor(t){for(let i=0;i<t.length;i++)this.wk[i]=t[i];this.init()}get YA(){return 0==this.count--&&(this.yk(),this.count=255),this.wk[this.count]}init(){let t=2654435769,i=2654435769,s=2654435769,h=2654435769,e=2654435769,n=2654435769,r=2654435769,o=2654435769;for(let l=0;l<4;l++)t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i;for(let l=0;l<256;l+=8)t+=this.wk[l],i+=this.wk[l+1],s+=this.wk[l+2],h+=this.wk[l+3],e+=this.wk[l+4],n+=this.wk[l+5],r+=this.wk[l+6],o+=this.wk[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.Ak[l]=t,this.Ak[l+1]=i,this.Ak[l+2]=s,this.Ak[l+3]=h,this.Ak[l+4]=e,this.Ak[l+5]=n,this.Ak[l+6]=r,this.Ak[l+7]=o;for(let l=0;l<256;l+=8)t+=this.Ak[l],i+=this.Ak[l+1],s+=this.Ak[l+2],h+=this.Ak[l+3],e+=this.Ak[l+4],n+=this.Ak[l+5],r+=this.Ak[l+6],o+=this.Ak[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.Ak[l]=t,this.Ak[l+1]=i,this.Ak[l+2]=s,this.Ak[l+3]=h,this.Ak[l+4]=e,this.Ak[l+5]=n,this.Ak[l+6]=r,this.Ak[l+7]=o;this.yk(),this.count=256}yk(){this.c++,this.b+=this.c;for(let t=0;t<256;t++){const i=this.Ak[t],s=3&t;let h;0===s?this.a^=this.a<<13:1===s?this.a^=this.a>>>6:2===s?this.a^=this.a<<2:3===s&&(this.a^=this.a>>>16),this.a+=this.Ak[t+128&255],this.Ak[t]=h=this.Ak[i>>>2&255]+this.a+this.b,this.wk[t]=this.b=this.Ak[h>>>8>>>2&255]+i}}}},2901:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(1908);class n{static dk=t=>{let i=0;t=t.toUpperCase();for(let s=0;s<t.length;s++)i=61*i+t.charCodeAt(s)-32|0;return i};buffer;pk;mk;Ik;_k;Ek;gk;Ck=[];constructor(t){t instanceof Uint8Array&&(t=new Int8Array(t));let i=new h.A(new Uint8Array(t));const s=i.ug,n=i.ug;s===n?(this.buffer=t,this.pk=!1):(this.buffer=e.A.read(s,t,n,6),i=new h.A(new Uint8Array(this.buffer)),this.pk=!0),this.mk=i.KA,this.Ik=[],this._k=[],this.Ek=[],this.gk=[];let r=i.Fc+10*this.mk;for(let t=0;t<this.mk;t++)this.Ik.push(i.Ko),this._k.push(i.ug),this.Ek.push(i.ug),this.gk.push(r),r+=this.Ek[t]}read(t){const i=n.dk(t),s=this.Ik.indexOf(i);return-1===s?null:this.Tk(s)}Tk(t){if(t<0||t>=this.mk)return null;if(this.Ck[t])return this.Ck[t];const i=this.gk[t],s=i+this.Ek[t];if(this.pk){const h=Uint8Array.from(this.buffer.subarray(i,i+s));return this.Ck[t]=h,h}{const i=Uint8Array.from(e.A.read(this._k[t],this.buffer,this.Ek[t],this.gk[t]));return this.Ck[t]=i,i}}}},1069:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(9234),e=s(6666),n=s(4474);class r extends n.A{static Ok=3988292384;static bk=new Int32Array(256);static vk=new Uint32Array(33);static Lk=new e.A;static Rk=new e.A;static Sk=new e.A;static Mk=0;static kk=0;static xk=0;static{for(let t=0;t<32;t++)r.vk[t]=(1<<t)-1;r.vk[32]=4294967295;for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)1&~i?i>>>=1:i=i>>>1^r.Ok;r.bk[t]=i}}static Bo=t=>{let i=4294967295;for(let s=0;s<t.length;s++)i=i>>>8^r.bk[255&(i^t[s])];return~i};view;data;Fc=0;Bm=0;random=null;constructor(t){if(!t)throw new Error('Input src packet array was null!');super(),t instanceof Int8Array?this.data=new Uint8Array(t):this.data=t,this.view=new DataView(this.data.buffer,this.data.byteOffset,this.data.byteLength)}get length(){return this.view.byteLength}get available(){return this.length-this.Fc}static Ut=t=>{let i=null;return 0===t&&r.Mk>0?(r.Mk--,i=r.Lk.hv()):1===t&&r.kk>0?(r.kk--,i=r.Rk.hv()):2===t&&r.xk>0&&(r.xk--,i=r.Sk.hv()),i?(i.Fc=0,i):new r(0===t?new Uint8Array(100):1===t?new Uint8Array(5e3):new Uint8Array(3e4))};release(){this.Fc=0,100===this.view.byteLength&&r.Mk<1e3?(r.Lk.n_(this),r.Mk++):5e3===this.view.byteLength&&r.kk<250?(r.Rk.n_(this),r.kk++):3e4===this.view.byteLength&&r.xk<50&&(r.Sk.n_(this),r.xk++)}get ZA(){return this.view.getUint8(this.Fc++)}get zA(){return this.view.getInt8(this.Fc++)}get KA(){const t=this.view.getUint16(this.Fc);return this.Fc+=2,t}get tp(){const t=this.view.getInt16(this.Fc);return this.Fc+=2,t}get ug(){const t=this.view.getUint8(this.Fc++)<<16|this.view.getUint16(this.Fc);return this.Fc+=2,t}get Ko(){const t=this.view.getInt32(this.Fc);return this.Fc+=4,t}get Uc(){const t=this.view.getBigInt64(this.Fc);return this.Fc+=8,t}get xR(){return this.view.getUint8(this.Fc)<128?this.ZA-64:this.KA-49152}get eO(){return this.view.getUint8(this.Fc)<128?this.ZA:this.KA-32768}get ly(){const t=this.view,i=t.byteLength;let s,h='';for(;10!==(s=t.getUint8(this.Fc++))&&this.Fc<i;)h+=String.fromCharCode(s);return h}xy(t,i,s){s.set(this.data.subarray(this.Fc,this.Fc+t),i),this.Fc+=t}jc(t){this.view.setUint8(this.Fc++,t+(this.random?.YA??0)&255)}p1(t){this.view.setUint8(this.Fc++,t)}p2(t){this.view.setUint16(this.Fc,t),this.Fc+=2}Dk(t){this.view.setUint16(this.Fc,t,!0),this.Fc+=2}p3(t){this.view.setUint8(this.Fc++,t>>16),this.view.setUint16(this.Fc,t),this.Fc+=2}p4(t){this.view.setInt32(this.Fc,t),this.Fc+=4}Nk(t){this.view.setInt32(this.Fc,t,!0),this.Fc+=4}nA(t){this.view.setBigInt64(this.Fc,t),this.Fc+=8}Bc(t){const i=this.view,s=t.length;for(let h=0;h<s;h++)i.setUint8(this.Fc++,t.charCodeAt(h));i.setUint8(this.Fc++,10)}Hc(t,i,s){this.data.set(t.subarray(s,s+i),this.Fc),this.Fc+=i-s}Hf(t){this.view.setUint8(this.Fc-t-1,t)}Fm(){this.Bm=this.Fc<<3}Gm(){this.Fc=this.Bm+7>>>3}Um(t){let i=this.Bm>>>3,s=8-(7&this.Bm),h=0;for(this.Bm+=t;t>s;s=8)h+=(this.view.getUint8(i++)&r.vk[s])<<t-s,t-=s;return h+=t===s?this.view.getUint8(i)&r.vk[s]:this.view.getUint8(i)>>>s-t&r.vk[t],h}Gc(t,i){const s=this.Fc;this.Fc=0;const e=new Uint8Array(s);this.xy(s,0,e);const n=(0,h.Pk)(e),r=(0,h.Fk)(n,i,t),o=(0,h.Uk)(r);this.Fc=0,this.p1(o.length),this.Hc(o,o.length,0)}}},353:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Bk=[95,218,67,50,253,222,194,60,101,128,8,251,92,111,24,33,223,66,232,59,227,113,153,105,126,98,167,102,177,238,62,190,147,23,150,151,156,144,193,155,81,0,198,22,137,210,179,16,168,170,32,181,248,141,58,87,208,106,180,191,221,241,40,176,196,154,65,145,230,78,30,161,188,41,14,129,18,199,47,247,225,34,51,10,159,75,12,56,61,31,39,91,46,242,134,5,122,123,209,228,104,195,21,3,11,44,107,172,6,186,110,215,205,103,27,185,124,77,252,117,86,115,127,207,52,79,43,97,219,116,169,7,118,162,108,36,20,233,88,135,80,19,42,237,57,152,71,9,250,17,4,119,234,130,26,200,189,163,254,245,197,171,220,235,140,244,184,94,211,231,99,246,121,212,112,204,63,148,83,178,1,255,131,13,183,142,236,45,55,35,243,136,37,85,100,160,38,224,146,174,82,48,109,132,125,90,143,138,240,173,165,164,192,175,29,74,28,114,213,73,64,206,76,139,96,2,229,15,93,25,239,202,49,70,214,201,72,203,68,89,69,157,216,217,249,120,226,84,149,187,54,53,158,166,182,133,0];static VA=[0,-2,4,6,-1,0,0,2,0,0,0,0,5,4,2,2,0,0,0,0,2,-2,2,14,0,6,3,0,4,0,0,0,3,0,0,0,0,0,0,0,0,-1,4,2,6,0,6,0,0,3,7,0,0,0,-1,0,0,0,0,4,0,0,0,0,0,0,0,0,1,15,0,0,0,0,6,0,2,0,0,0,2,0,0,0,1,0,0,4,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,-2,0,0,2,0,0,0,2,9,0,0,0,0,0,4,0,0,0,3,7,9,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,3,2,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,-2,2,0,0,0,0,0,6,0,0,0,2,0,2,0,0,0,-2,0,0,4,0,0,0,0,6,0,0,-2,-2,0,0,0,0,0,0,-2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0]}},2215:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Jy=14;static Ly=28;static Op=129;static My=167;static Ip=168;static qy=195;static _p=2;static gp=26;static Ap=46;static dp=84;static ap=87;static jy=103;static Sy=146;static hy=197;static bp=201;static Xy=204;static Qy=209;static Hy=126;static cp=185;static By=15;static Ny=98;static Mp=213;static up=74;static Sp=13;static ip=3;static Tp=239;static JA=1;static kp=184;static Dy=133;static Py=226;static wp=4;static Cp=21;static Zy=32;static fA=41;static jA=152;static Ay=19;static Rp=22;static ny=25;static qA=43;static vp=44;static fp=68;static Ep=136;static yy=139;static Gy=140;static uy=142;static Uy=243;static Yy=254;static wy=20;static $A=80;static op=132;static ky=220;static ty=237;static XA=150;static Ry=175;static lp=193;static Vy=12;static oy=54;static Wy=212;static zy=7;static sp=135;static Lp=162;static my=23;static Ty=42;static gy=49;static Iy=50;static by=59;static Ey=69;static Oy=76;static py=151;static _y=191;static Cy=223}},3937:(t,i,s)=>{s.d(i,{A:()=>o});class h{start=0;end=0;form=0;length=0;Gk=null;Hk=null;threshold=0;position=0;delta=0;amplitude=0;Wk=0;read(t){this.form=t.ZA,this.start=t.Ko,this.end=t.Ko,this.length=t.ZA,this.Gk=new Int32Array(this.length),this.Hk=new Int32Array(this.length);for(let i=0;i<this.length;i++)this.Gk[i]=t.KA,this.Hk[i]=t.KA}reset(){this.threshold=0,this.position=0,this.delta=0,this.amplitude=0,this.Wk=0}evaluate(t){return this.Wk>=this.threshold&&this.Hk&&this.Gk&&(this.amplitude=this.Hk[this.position++]<<15,this.position>=this.length&&(this.position=this.length-1),this.threshold=this.Gk[this.position]/65536*t|0,this.threshold>this.Wk&&(this.delta=((this.Hk[this.position]<<15)-this.amplitude)/(this.threshold-this.Wk)|0)),this.amplitude+=this.delta,this.Wk++,this.amplitude-this.delta>>15}}class e{static buffer=null;static NT=null;static sin=null;static Yk=new Int32Array(5);static Vk=new Int32Array(5);static Kk=new Int32Array(5);static Xk=new Int32Array(5);static zk=new Int32Array(5);jk=null;Zk=null;qk=null;$k=null;Jk=null;Qk=null;release=null;attack=null;tx=new Int32Array(5);ix=new Int32Array(5);sx=new Int32Array(5);start=0;length=500;hx=100;nx=0;static init=()=>{this.NT=new Int32Array(32768);for(let t=0;t<32768;t++)Math.random()>.5?this.NT[t]=1:this.NT[t]=-1;this.sin=new Int32Array(32768);for(let t=0;t<32768;t++)this.sin[t]=16384*Math.sin(t/5215.1903)|0;this.buffer=new Int32Array(220500)};Xc(t,i){for(let i=0;i<t;i++)e.buffer[i]=0;if(i<10)return e.buffer;const s=t/i|0;this.jk?.reset(),this.Zk?.reset();let h=0,n=0,r=0;this.qk&&this.$k&&(this.qk.reset(),this.$k.reset(),h=32.768*(this.qk.end-this.qk.start)/s|0,n=32.768*this.qk.start/s|0);let o=0,l=0,a=0;this.Jk&&this.Qk&&(this.Jk.reset(),this.Qk.reset(),o=32.768*(this.Jk.end-this.Jk.start)/s|0,l=32.768*this.Jk.start/s|0);for(let t=0;t<5;t++)this.jk&&0!==this.tx[t]&&(e.Yk[t]=0,e.Vk[t]=this.sx[t]*s,e.Kk[t]=(this.tx[t]<<14)/100|0,e.Xk[t]=32.768*(this.jk.end-this.jk.start)*Math.pow(1.0057929410678534,this.ix[t])/s|0,e.zk[t]=32.768*this.jk.start/s|0);if(this.jk&&this.Zk)for(let i=0;i<t;i++){let s=this.jk.evaluate(t),c=this.Zk.evaluate(t);if(this.qk&&this.$k){const i=this.qk.evaluate(t),e=this.$k.evaluate(t);s+=this.ox(e,r,this.qk.form)>>1,r+=(i*h>>16)+n}if(this.Jk&&this.Qk){const i=this.Jk.evaluate(t),s=this.Qk.evaluate(t);c=c*(32768+(this.ox(s,a,this.Jk.form)>>1))>>15,a+=(i*o>>16)+l}for(let h=0;h<5;h++)if(0!==this.tx[h]){const n=i+e.Vk[h];n<t&&(e.buffer[n]+=this.ox(c*e.Kk[h]>>15,e.Yk[h],this.jk.form),e.Yk[h]+=(s*e.Xk[h]>>16)+e.zk[h])}}if(this.release&&this.attack){this.release.reset(),this.attack.reset();let i=0,s=!0;for(let h=0;h<t;h++){const n=this.release.evaluate(t),r=this.attack.evaluate(t);let o;o=s?this.release.start+((this.release.end-this.release.start)*n>>8):this.release.start+((this.release.end-this.release.start)*r>>8),i+=256,i>=o&&(i=0,s=!s),s&&(e.buffer[h]=0)}}if(this.nx>0&&this.hx>0){const i=this.nx*s;for(let s=i;s<t;s++)e.buffer[s]+=e.buffer[s-i]*this.hx/100|0,e.buffer[s]|=0}for(let i=0;i<t;i++)e.buffer[i]<-32768&&(e.buffer[i]=-32768),e.buffer[i]>32767&&(e.buffer[i]=32767);return e.buffer}ox(t,i,s){return 1===s?(32767&i)<16384?t:-t:2===s?e.sin[32767&i]*t>>14:3===s?((32767&i)*t>>14)-t:4===s?e.NT[i/2607&32767]*t:0}read(t){this.jk=new h,this.jk.read(t),this.Zk=new h,this.Zk.read(t),0!==t.ZA&&(t.Fc--,this.qk=new h,this.qk.read(t),this.$k=new h,this.$k.read(t)),0!==t.ZA&&(t.Fc--,this.Jk=new h,this.Jk.read(t),this.Qk=new h,this.Qk.read(t)),0!==t.ZA&&(t.Fc--,this.release=new h,this.release.read(t),this.attack=new h,this.attack.read(t));for(let i=0;i<10;i++){const s=t.eO;if(0===s)break;this.tx[i]=s,this.ix[i]=t.xR,this.sx[i]=t.eO}this.nx=t.eO,this.hx=t.eO,this.length=t.KA,this.start=t.KA}}var n=s(1069),r=s(3867);class o{static Ky=new Int32Array(1e3);static lx=null;static ux=null;static wx=new r.ds(1e3,null);Ax=new r.ds(10,null);yx=0;loopEnd=0;static ec=t=>{const i=new n.A(t.read('sounds.dat'));for(this.lx=new Uint8Array(441e3),this.ux=new n.A(this.lx),e.init();;){const t=i.KA;if(65535===t)break;const s=new o;s.read(i),this.wx[t]=s,this.Ky[t]=s.trim()}};static Xc=(t,i)=>{if(!this.wx[t])return null;const s=this.wx[t];return s?.mx(i)??null};read(t){for(let i=0;i<10;i++)0!==t.ZA&&(t.Fc--,this.Ax[i]=new e,this.Ax[i]?.read(t));this.yx=t.KA,this.loopEnd=t.KA}trim(){let t=9999999;for(let i=0;i<10;i++)this.Ax[i]&&(this.Ax[i].start/20|0)<t&&(t=this.Ax[i].start/20|0);if(this.yx<this.loopEnd&&(this.yx/20|0)<t&&(t=this.yx/20|0),9999999===t||0===t)return 0;for(let i=0;i<10;i++)this.Ax[i]&&(this.Ax[i].start-=20*t);return this.yx<this.loopEnd&&(this.yx-=20*t,this.loopEnd-=20*t),t}mx(t){const i=this.Xc(t);return o.ux.Fc=0,o.ux?.p4(1380533830),o.ux?.Nk(i+36),o.ux?.p4(1463899717),o.ux?.p4(1718449184),o.ux?.Nk(16),o.ux?.Dk(1),o.ux?.Dk(1),o.ux?.Nk(22050),o.ux?.Nk(22050),o.ux?.Dk(1),o.ux?.Dk(8),o.ux?.p4(1684108385),o.ux?.Nk(i),o.ux.Fc+=i,o.ux}Xc(t){let i=0;for(let t=0;t<10;t++)this.Ax[t]&&this.Ax[t].length+this.Ax[t].start>i&&(i=this.Ax[t].length+this.Ax[t].start);if(0===i)return 0;let s=22050*i/1e3|0,h=22050*this.yx/1e3|0,e=22050*this.loopEnd/1e3|0;(h<0||e<0||e>s||h>=e)&&(t=0);let n=s+(e-h)*(t-1);for(let t=44;t<n+44;t++)o.lx&&(o.lx[t]=-128);for(let t=0;t<10;t++)if(this.Ax[t]){const i=22050*this.Ax[t].length/1e3|0,s=22050*this.Ax[t].start/1e3|0,h=this.Ax[t].Xc(i,this.Ax[t].length);for(let t=0;t<i;t++)o.lx&&(o.lx[t+s+44]+=h[t]>>8<<24>>24)}if(t>1){h+=44,e+=44,s+=44,n+=44;const i=n-s;for(let t=s-1;t>=e;t--)o.lx&&(o.lx[t+i]=o.lx[t]);for(let i=1;i<t;i++){const t=(e-h)*i;for(let i=h;i<e;i++)o.lx&&(o.lx[i+t]=o.lx[i])}n-=44}return n}}},3867:(t,i,s)=>{s.d(i,{$a:()=>a,qa:()=>o,ds:()=>h,fO:()=>e,Cr:()=>n,lO:()=>r,Kn:()=>l});class h extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=i}}class e extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=s}}}class n extends Array{constructor(t,i,s,h){super(t);for(let e=0;e<t;e++){this[e]=new Array(i);for(let t=0;t<i;t++){this[e][t]=new Array(s);for(let i=0;i<s;i++)this[e][t][i]=h}}}}class r extends Array{constructor(t,i,s,h,e){super(t);for(let n=0;n<t;n++){this[n]=new Array(i);for(let t=0;t<i;t++){this[n][t]=new Array(s);for(let i=0;i<s;i++){this[n][t][i]=new Array(h);for(let s=0;s<h;s++)this[n][t][i][s]=e}}}}}class o extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Uint8Array(s)}}}class l extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=new Int32Array(i)}}class a extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Int32Array(s)}}}},9234:(t,i,s)=>{s.d(i,{Uk:()=>l,Ho:()=>e,Pk:()=>o,Wo:()=>h,Xa:()=>n,Oc:()=>r,Fk:()=>a});const h=async t=>new Promise((i=>setTimeout(i,t))),e=async t=>new Int8Array(await(await fetch(t)).arrayBuffer()),n=async t=>(await fetch(t)).text();function r(t,i,s,h,e){for(;e--;)s[h++]=t[i++]}function o(t){let i=0n;for(let s=0;s<t.length;s++)i=i<<8n|BigInt(t[s]);return i}function l(t){const i=[];for(;t>0n;)i.unshift(Number(0xffn&t)),t>>=8n;return 128&i[0]&&i.unshift(0),new Uint8Array(i)}function a(t,i,s){let h=1n;for(;i>0n;)i%2n===1n&&(h=h*t%s),t=t*t%s,i>>=1n;return h}},7953:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1069);class e{static Ix=new Uint16Array(['d','o','t'].join('').split('').map((t=>t.charCodeAt(0))));static _x=new Uint16Array(['(','a',')'].join('').split('').map((t=>t.charCodeAt(0))));static Ex=new Uint16Array(['s','l','a','s','h'].join('').split('').map((t=>t.charCodeAt(0))));static gx=['cook',"cook's",'cooks','seeks','sheet'];static Cx=[];static Tx=[];static Ox=[];static bx=[];static vx=[];static Lx=[];static ec=t=>{const i=new h.A(t.read('fragmentsenc.txt')),s=new h.A(t.read('badenc.txt')),e=new h.A(t.read('domainenc.txt')),n=new h.A(t.read('tldlist.txt'));this.read(s,e,i,n)};static filter=t=>{const i=[...t];this.format(i);const s=i.join('').trim(),h=s.toLowerCase(),e=[...h];this.Rx(e),this.Sx(e),this.Mx(e),this.kx(e);for(let t=0;t<this.gx.length;t++){let i=-1;for(;-1!==(i=h.indexOf(this.gx[t],i+1));){const s=[...this.gx[t]];for(let t=0;t<s.length;t++)e[t+i]=s[t]}}return this.xx(e,[...s]),this.Dx(e),e.join('').trim()};static read=(t,i,s,h)=>{this.Nx(t),this.Px(i),this.Fx(s),this.Ux(h)};static Ux=t=>{const i=t.Ko;for(let s=0;s<i;s++)this.Tx[s]=t.ZA,this.Cx[s]=new Uint16Array(t.ZA).map((()=>t.ZA))};static Nx=t=>{const i=t.Ko;for(let s=0;s<i;s++){this.Ox[s]=new Uint16Array(t.ZA).map((()=>t.ZA));const i=new Array(t.ZA).fill([]).map((()=>[t.zA,t.zA]));i.length>0&&(this.bx[s]=i)}};static Px=t=>{const i=t.Ko;for(let s=0;s<i;s++)this.vx[s]=new Uint16Array(t.ZA).map((()=>t.ZA))};static Fx=t=>{const i=t.Ko;for(let s=0;s<i;s++)this.Lx[s]=t.KA};static Rx=t=>{const i=[...t],s=[...t];this.Bx(null,i,this.Ix),this.Bx(null,s,this.Ex);for(let h=0;h<this.Cx.length;h++)this.Gx(s,this.Tx[h],t,this.Cx[h],i)};static Sx=t=>{for(let i=0;i<2;i++)for(let i=this.Ox.length-1;i>=0;i--)this.Bx(this.bx[i],t,this.Ox[i])};static Mx=t=>{const i=[...t],s=[...t];this.Bx(null,i,this._x),this.Bx(null,s,this.Ix);for(let h=this.vx.length-1;h>=0;h--)this.Hx(s,i,this.vx[h],t)};static kx=t=>{for(let i=0;i<t.length;){const s=this.Wx(t,i);if(-1===s)return;let h=!1;for(let e=i;e>=0&&e<s&&!h;e++)this.Yx(t[e])||this.Vx(t[e])||(h=!0);let e=0;h&&(e=0),0===e&&(e=1,i=s);let n=0;for(let h=s;h<t.length&&h<i;h++)n=10*n+t[h].charCodeAt(0)-48;n<=255&&i-s<=8?e++:e=0,4===e&&(this.Kx(s,i,t),e=0),i=this.Xx(i,t)}};static zx=t=>{if(this.jx(t))return!0;const i=this.Zx(t),s=this.Lx,h=s.length;if(i===s[0]||i===s[h-1])return!0;let e=0,n=h-1;for(;e<=n;){const t=(e+n)/2|0;if(i===s[t])return!0;i<s[t]?n=t-1:e=t+1}return!1};static Zx=t=>{if(t.length>6)return 0;let i=0;for(let s=0;s<t.length;s++){const h=t[t.length-s-1];if(this.qx(h))i=38*i+h.charCodeAt(0)+1-'a'.charCodeAt(0);else if("'"===h)i=38*i+27;else if(this.$x(h))i=38*i+h.charCodeAt(0)+28-'0'.charCodeAt(0);else if('\0'!==h)return 0}return i};static Wx=(t,i)=>{for(let s=i;s<t.length&&s>=0;s++)if(this.$x(t[s]))return s;return-1};static Xx=(t,i)=>{for(let s=t;s<i.length&&s>=0;s++)if(!this.$x(i[s]))return s;return i.length};static Jx=(t,i,s)=>i===s||'o'===i&&'0'===s?1:'o'===i&&'('===s&&')'===t?2:'c'!==i||'('!==s&&'<'!==s&&'['!==s?'e'===i&&''===s||'s'===i&&'$'===s||'l'===i&&'i'===s?1:0:1;static Hx=(t,i,s,h)=>{const e=s.length,n=h.length;for(let r=0;r<=n-e;r++){const{Qx:e,tD:n}=this.iD(r,s,h);if(!e)continue;const o=this.sD(r,h,3,i,['@']),l=this.hD(n-1,h,3,t,['.',',']);(o>2||l>2)&&this.Kx(r,n,h)}};static iD=(t,i,s)=>{const h=i.length;let e=t,n=0;for(;e<s.length&&n<h;){const r=s[e],o=e+1<s.length?s[e+1]:'\0',l=this.Jx(o,String.fromCharCode(i[n]),r);if(l>0)e+=l,n++;else{if(0===n)break;const s=this.Jx(o,String.fromCharCode(i[n-1]),r);if(s>0)e+=s,1===n&&t++;else{if(n>=h||!this.Yx(r))break;e++}}}return{Qx:n>=h,tD:e}};static Bx=(t,i,s)=>{if(!(s.length>i.length))for(let h=0;h<=i.length-s.length;h++){let e=h;const{tD:n,eD:r,nD:o,rD:l,oD:a}=this.lD(i,s,e);e=n;let c=i[e],f=e+1<i.length?i[e+1]:'\0';if(!(r>=s.length)||l&&a)continue;let u,d=!0;if(o){let t=!1,s=!1;if((h-1<0||this.Yx(i[h-1])&&"'"!==i[h-1])&&(t=!0),(e>=i.length||this.Yx(i[e])&&"'"!==i[e])&&(s=!0),!t||!s){let s=!1;for(u=h-2,t&&(u=h);!s&&u<e;){if(u>=0&&(!this.Yx(i[u])||"'"===i[u])){const t=[];let h;for(h=0;h<3&&u+h<i.length&&(!this.Yx(i[u+h])||"'"===i[u+h]);h++)t[h]=i[u+h];let e=!0;0===h&&(e=!1),h<3&&u-1>=0&&(!this.Yx(i[u-1])||"'"===i[u-1])&&(e=!1),e&&!this.zx(t)&&(s=!0)}u++}s||(d=!1)}}else{c=' ',h-1>=0&&(c=i[h-1]),f=' ',e<i.length&&(f=i[e]);const s=this.aD(c),n=this.aD(f);t&&this.cD(s,t,n)&&(d=!1)}if(!d)continue;let w=0,A=0;for(let t=h;t<e;t++)this.$x(i[t])?w++:this.fD(i[t])&&A++;w<=A&&this.Kx(h,e,i)}};static lD=(t,i,s)=>{let h=s,e=0,n=0,r=!1,o=!1,l=!1;for(;h<t.length&&(!o||!l)&&!(h>=t.length||o&&l);){const a=t[h],c=h+1<t.length?t[h+1]:'\0';let f;if(e<i.length&&(f=this.uD(c,String.fromCharCode(i[e]),a))>0)1===f&&this.$x(a)&&(o=!0),2===f&&(this.$x(a)||this.$x(c))&&(o=!0),h+=f,e++;else{if(0===e)break;let t;if((t=this.uD(c,String.fromCharCode(i[e-1]),a))>0)h+=t;else{if(e>=i.length||!this.Vx(a))break;if(this.Yx(a)&&"'"!==a&&(r=!0),this.$x(a)&&(l=!0),h++,n++,(100*n/(h-s)|0)>90)break}}}return{tD:h,eD:e,nD:r,rD:o,oD:l}};static uD=(t,i,s)=>{if(i===s)return 1;if(i>='a'&&i<='m'){if('a'===i)return'4'!==s&&'@'!==s&&'^'!==s?'/'===s&&'\\'===t?2:0:1;if('b'===i)return'6'!==s&&'8'!==s?'1'===s&&'3'===t?2:0:1;if('c'===i)return'('!==s&&'<'!==s&&'{'!==s&&'['!==s?0:1;if('d'===i)return'['===s&&')'===t?2:0;if('e'===i)return'3'!==s&&''!==s?0:1;if('f'===i)return'p'===s&&'h'===t?2:''===s?1:0;if('g'===i)return'9'!==s&&'6'!==s?0:1;if('h'===i)return'#'===s?1:0;if('i'===i)return'y'!==s&&'l'!==s&&'j'!==s&&'1'!==s&&'!'!==s&&':'!==s&&';'!==s&&'|'!==s?0:1;if('j'===i)return 0;if('k'===i)return 0;if('l'===i)return'1'!==s&&'|'!==s&&'i'!==s?0:1;if('m'===i)return 0}if(i>='n'&&i<='z'){if('n'===i)return 0;if('o'===i)return'0'!==s&&'*'!==s?'('===s&&')'===t||'['===s&&']'===t||'{'===s&&'}'===t||'<'===s&&'>'===t?2:0:1;if('p'===i)return 0;if('q'===i)return 0;if('r'===i)return 0;if('s'===i)return'5'!==s&&'z'!==s&&'$'!==s&&'2'!==s?0:1;if('t'===i)return'7'!==s&&'+'!==s?0:1;if('u'===i)return'v'===s?1:'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('v'===i)return'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('w'===i)return'v'===s&&'v'===t?2:0;if('x'===i)return')'===s&&'('===t||'}'===s&&'{'===t||']'===s&&'['===t||'>'===s&&'<'===t?2:0;if('y'===i)return 0;if('z'===i)return 0}return i>='0'&&i<='9'?'0'===i?'o'===s||'O'===s?1:'('===s&&')'===t||'{'===s&&'}'===t||'['===s&&']'===t?2:0:'1'===i&&'l'===s?1:0:','===i?'.'===s?1:0:'.'===i?','===s?1:0:'!'===i&&'i'===s?1:0};static cD=(t,i,s)=>{let h=0,e=i.length-1;for(;h<=e;){const n=(h+e)/2|0;if(i[n][0]===t&&i[n][1]===s)return!0;t<i[n][0]||t===i[n][0]&&s<i[n][1]?e=n-1:h=n+1}return!1};static aD=t=>this.qx(t)?t.charCodeAt(0)+1-'a'.charCodeAt(0):"'"===t?28:this.$x(t)?t.charCodeAt(0)+29-'0'.charCodeAt(0):27;static Gx=(t,i,s,h,e)=>{if(!(h.length>s.length))for(let n=0;n<=s.length-h.length;n++){const{tD:r,dD:o}=this.wD(s,h,n);if(o<h.length)continue;let l=!1;const a=this.sD(n,s,3,e,[',','.']),c=this.hD(r-1,s,5,t,['\\','/']);if(1===i&&a>0&&c>0&&(l=!0),2===i&&(a>2&&c>0||a>0&&c>2)&&(l=!0),3===i&&a>0&&c>2&&(l=!0),!l)continue;let f,u=n,d=r-1,w=!1;if(a>2){if(4===a)for(w=!1,f=n-1;f>=0;f--)if(w){if('*'!==e[f])break;u=f}else'*'===e[f]&&(u=f,w=!0);for(w=!1,f=u-1;f>=0;f--)if(w){if(this.Yx(s[f]))break;u=f}else this.Yx(s[f])||(w=!0,u=f)}if(c>2){if(4===c)for(w=!1,f=d+1;f<s.length;f++)if(w){if('*'!==t[f])break;d=f}else'*'===t[f]&&(d=f,w=!0);for(w=!1,f=d+1;f<s.length;f++)if(w){if(this.Yx(s[f]))break;d=f}else this.Yx(s[f])||(w=!0,d=f)}this.Kx(u,d+1,s)}};static wD=(t,i,s)=>{let h=0;for(;s<t.length&&h<i.length;){const e=t[s],n=s+1<t.length?t[s+1]:'\0';let r;if((r=this.Jx(n,String.fromCharCode(i[h]),e))>0)s+=r,h++;else{if(0===h)break;let t;if((t=this.Jx(n,String.fromCharCode(i[h-1]),e))>0)s+=t;else{if(!this.Yx(e))break;s++}}}return{tD:s,dD:h}};static Yx=t=>!this.fD(t)&&!this.$x(t);static Vx=t=>!this.qx(t)||('v'===t||'x'===t||'j'===t||'q'===t||'z'===t);static fD=t=>this.qx(t)||this.AD(t);static $x=t=>t>='0'&&t<='9';static qx=t=>t>='a'&&t<='z';static AD=t=>t>='A'&&t<='Z';static jx=t=>{for(let i=0;i<t.length;i++)if(!this.$x(t[i])&&'\0'!==t[i])return!1;return!0};static Kx=(t,i,s)=>{for(let h=t;h<i;h++)s[h]='*'};static yD=(t,i)=>{let s=0;for(let h=i-1;h>=0&&this.Yx(t[h]);h--)'*'===t[h]&&s++;return s};static pD=(t,i)=>{let s=0;for(let h=i+1;h<t.length&&this.Yx(t[h]);h++)'*'===t[h]&&s++;return s};static mD=(t,i,s,h,e)=>(e?this.yD(i,s):this.pD(i,s))>=h?4:this.Yx(e?t[s-1]:t[s+1])?1:0;static sD=(t,i,s,h,e)=>{if(0===t)return 2;for(let s=t-1;s>=0&&this.Yx(i[s]);s--)if(e.includes(i[s]))return 3;return this.mD(i,h,t,s,!0)};static hD=(t,i,s,h,e)=>{if(t+1===i.length)return 2;for(let s=t+1;s<i.length&&this.Yx(i[s]);s++)if(e.includes(i[s]))return 3;return this.mD(i,h,t,s,!1)};static format=t=>{let i=0;for(let s=0;s<t.length;s++)this.ID(t[s])?t[i]=t[s]:t[i]=' ',0!==i&&' '===t[i]&&' '===t[i-1]||i++;for(let s=i;s<t.length;s++)t[s]=' '};static ID=t=>t>=' '&&t<=''||' '===t||'\n'===t||'\t'===t||''===t||''===t;static xx=(t,i)=>{for(let s=0;s<i.length;s++)'*'!==t[s]&&this.AD(i[s])&&(t[s]=i[s])};static Dx=t=>{let i=!0;for(let s=0;s<t.length;s++){const h=t[s];this.fD(h)?i?this.qx(h)&&(i=!1):this.AD(h)&&(t[s]=String.fromCharCode(h.charCodeAt(0)+'a'.charCodeAt(0)-65)):i=!0}}}},2646:(t,i,s)=>{s.d(i,{A:()=>h});class h{static _D=[' ','e','t','a','o','i','h','n','s','r','d','l','u','m','w','c','y','f','g','p','b','v','k','x','j','q','z','0','1','2','3','4','5','6','7','8','9',' ','!','?','.',',',':',';','(',')','-','&','*','\\','\'','@','#','+','=','','$','%','"','[',']'];static ED=[];static ec=(t,i)=>{let s,h=0,e=-1;for(let n=0;n<i&&h<100;n++){const i=t.ZA;s=i>>4&15,-1!==e?(this.ED[h++]=this._D[(e<<4)+s-195],e=-1):s<13?this.ED[h++]=this._D[s]:e=s,s=15&i,-1!==e?(this.ED[h++]=this._D[(e<<4)+s-195],e=-1):s<13?this.ED[h++]=this._D[s]:e=s}let n=!0;for(let t=0;t<h;t++){const i=this.ED[t];n&&i>='a'&&i<='z'&&(this.ED[t]=i.toUpperCase(),n=!1),'.'!==i&&'!'!==i||(n=!0)}return this.ED.slice(0,h).join('')};static uA=(t,i)=>{i.length>80&&(i=i.substring(0,80)),i=i.toLowerCase();let s=-1;for(let h=0;h<i.length;h++){const e=i.charAt(h);let n=0;for(let t=0;t<this._D.length;t++)if(e===this._D[t]){n=t;break}n>12&&(n+=195),-1===s?n<13?s=n:t.p1(n):n<13?(t.p1((s<<4)+n),s=-1):(t.p1((s<<4)+(n>>4)),s=15&n)}-1!==s&&t.p1(s<<4)}}},1908:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(9763);class e{static gD=null;static load=async t=>{this.gD=await(0,h.F)(new WebAssembly.Module(t),{env:void 0})};static read=(t,i,s,h)=>{if(!this.gD)throw new Error('bz2 not found!!');return Int8Array.from(this.gD.read(t,i,s,h))}}},123:(t,i,s)=>{let h;async function e(t,i){n(i);try{const i=await window.audioContext.decodeAudioData(Uint8Array.from(t).buffer);let s=window.audioContext.createBufferSource();s.buffer=i,s.connect(h),s.start()}catch(t){console.log(t)}}function n(t){h||(h=window.audioContext.createGain(),h.connect(window.audioContext.destination)),h.gain.value=t/256}function r(t,i,s){window._tinyMidiPlay&&window._tinyMidiPlay(t,i/256,s)}function o(t){window._tinyMidiVolume&&window._tinyMidiVolume(t/256)}function l(t){window._tinyMidiStop&&window._tinyMidiStop(t)}s.d(i,{zc:()=>e,Xo:()=>r,jp:()=>n,vo:()=>l,zp:()=>o})},9763:(t,i,s)=>{async function h(t,i={}){const s={env:Object.assign(Object.create(globalThis),i.env||{},{abort(t,i,s,h){t=r(t>>>0),i=r(i>>>0),s>>>=0,h>>>=0,(()=>{throw Error(`${t} in ${i}:${s}:${h}`)})()}})},{exports:h}=await WebAssembly.instantiate(t,s),e=h.memory||i.env.memory,n=Object.setPrototypeOf({read:(t,i,s,n)=>(i=function(t,i,s,n,r){if(null==n)return 0;const o=n.length,l=h.__pin(h.__new(o<<s,i))>>>0;if(r)new r(e.buffer,l,o).set(n);else for(let i=0;i<o;i++)t(l+(i<<s>>>0),n[i]);return h.__unpin(l),l}(l,6,0,i,Int8Array)||function(){throw TypeError("value must not be null")}(),function(t,i,s){if(!s)return null;const h=function(t){try{return o.getUint32(t,!0)}catch{return o=new DataView(e.buffer),o.getUint32(t,!0)}}(s-4)>>>i,n=new Array(h);for(let e=0;e<h;++e)n[e]=t(s+(e<<i>>>0));return n}(a,0,h.read(t,i,s,n)>>>0))},h);function r(t){if(!t)return null;const i=t+new Uint32Array(e.buffer)[t-4>>>2]>>>1,s=new Uint16Array(e.buffer);let h=t>>>1,n="";for(;i-h>1024;)n+=String.fromCharCode(...s.subarray(h,h+=1024));return n+String.fromCharCode(...s.subarray(h,i))}let o=new DataView(e.buffer);function l(t,i){try{o.setUint8(t,i,!0)}catch{o=new DataView(e.buffer),o.setUint8(t,i,!0)}}function a(t){try{return o.getInt8(t,!0)}catch{return o=new DataView(e.buffer),o.getInt8(t,!0)}}return n}s.d(i,{F:()=>h})},9896:(t,i,s)=>{var h=s(8151);!function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(window.audioContext=new window.AudioContext);var t=function(i){if(window.audioContext){var s=window.audioContext.createBuffer(1,1,22050),h=window.audioContext.createBufferSource();h.buffer=s,h.connect(window.audioContext.destination),h.start?h.start(0):h.play?h.play(0):h.noteOn&&h.noteOn(0)}document.removeEventListener('touchstart',t),document.removeEventListener('touchend',t),document.removeEventListener('click',t)};document.addEventListener('touchstart',t),document.addEventListener('touchend',t),document.addEventListener('click',t)}(),(async()=>{const t=2,i=44100;let s=new Float32Array,e=window.audioContext.createGain();e.gain.value=.1,e.connect(window.audioContext.destination);let n=window.audioContext.currentTime,r=[];const o=new h.A({CD:30,TD:t=>{let i=new Float32Array(t.buffer),h=new Float32Array(s.length+i.length);h.set(s,0),h.set(i,s.length),s=h},OD:t=>{},bufferSize:102400});await o.init();const l=await fetch('./SCC1_Florestan.sf2'),a=new Uint8Array(await l.arrayBuffer());function c(){if(!window.audioContext||!s.length)return;let h=window.audioContext.createBufferSource();const o=s.length/t,l=window.audioContext.createBuffer(t,o,i);for(let i=0;i<t;i++){const h=l.getChannelData(i);let e=i;for(let i=0;i<o;i++)h[i]=s[e],e+=t}n<window.audioContext.currentTime&&(n=window.audioContext.currentTime),h.buffer=l,h.connect(e),h.start(n),r.push(h),n+=l.duration,s=new Float32Array}let f;function u(){if(f&&clearInterval(f),s=new Float32Array,r.length){let t=e.gain.value;e.gain.value=0,r.forEach((t=>{t.stop(window.audioContext.currentTime)})),r=[],e.gain.value=t}}function d(t,i){-1!==t&&window._tinyMidiVolume(t),n=window.audioContext.currentTime,f=setInterval(c,250),o.bD(i)}o.vD(a),window._tinyMidiStop=async t=>{t?function(t,i){const s=window.audioContext.currentTime;e.gain.cancelScheduledValues(s),e.gain.setValueAtTime(e.gain.value,s),e.gain.linearRampToValueAtTime(t,s+2),setTimeout(i,2e3)}(0,(()=>{u()})):u()},window._tinyMidiVolume=(t=1)=>{e.gain.value=t},window._tinyMidiPlay=async(t,i,s)=>{t&&(await window._tinyMidiStop(s),s?setTimeout((()=>{d(i,t)}),2e3):d(i,t))}})()},8151:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(5473);const e=class{constructor(t={}){this.LD=void 0,this.RD=0,this.SD=0,this.MD=0,this.CD=t.CD||100,this.sampleRate=t.sampleRate||44100,this.kD=t.kD||2,this.gain=t.gain||0,t.bufferSize?this.bufferSize=t.bufferSize:this.xD(1),this.TD=t.TD||(()=>{}),this.OD=t.OD||(()=>{}),this.DD=void 0,this.test=0}async init(){if(!this.LD){if('undefined'!=typeof process){const{ND:t}=await import('path'),{PD:i}=await import('module');globalThis.__dirname=t("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js"),globalThis.require=i("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js")}this.LD=await(0,h.A)(),this.FD=this.LD._malloc(this.bufferSize),this.UD=this.LD._malloc(8)}}xD(t){this.bufferSize=4*this.sampleRate*this.kD*t}BD(){if(!this.LD)throw new Error(`${this.constructor.name} not initalized. call .init()`)}vD(t){this.BD();const{_malloc:i,_free:s,_tsf_load_memory:h,_tsf_set_output:e,_tsf_channel_set_bank_preset:n,_tsf_set_max_voices:r,_tsf_channel_set_presetnumber:o}=this.LD;s(this.RD),this.RD=i(t.length),this.LD.HEAPU8.set(t,this.RD),this.SD=h(this.RD,t.length),e(this.SD,2===this.kD?0:2,this.sampleRate,this.gain)}GD(){this.BD();const t=new Uint8Array(this.bufferSize);return t.set(this.LD.HEAPU8.subarray(this.FD,this.FD+this.bufferSize)),t}HD(t){const{_malloc:i,_free:s,_tml_load_memory:h}=this.LD;return s(this.MD),this.MD=i(t.length),this.LD.HEAPU8.set(t,this.MD),h(this.MD,t.length)}WD(t){const{_midi_render:i}=this.LD;return i(this.SD,t,this.kD,this.sampleRate,this.FD,this.bufferSize,this.UD)}bD(t){if(this.BD(),!this.SD)throw new Error('no soundfont buffer set. call .setSoundfont');window.clearTimeout(this.DD);const{setValue:i,getValue:s}=this.LD;i(this.UD,0,'double'),this.LD._tsf_reset(this.SD),this.LD._tsf_channel_set_bank_preset(this.SD,9,128,0),t[0]==='R'.charCodeAt(0)&&(t=t.slice(20));let h=this.HD(t);const e=()=>{h=this.WD(h);const t=this.GD();this.TD(t),h?this.DD=setTimeout(e,this.CD):this.OD(s(this.UD,'double'))};this.DD=setTimeout(e,16)}}},8227:(t,i,s)=>{t.exports=s.p+"9f86b5397894e28b5ae2.wasm"},5473:(t,i,s)=>{var h;s.d(i,{A:()=>e});const e=(h="file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/tinymidipcm.mjs",function(t){var i,e,n=void 0!==(t=t||{})?t:{};n.ready=new Promise((function(t,s){i=t,e=s})),["_tsf_load_memory","_tsf_set_output","_tsf_channel_set_bank_preset","_tsf_set_max_voices","_tsf_channel_set_presetnumber","_tsf_reset","_tsf_close","_tml_load_memory","_midi_render","_malloc","_realloc","_free","_fflush","onRuntimeInitialized"].forEach((t=>{Object.getOwnPropertyDescriptor(n.ready,t)||Object.defineProperty(n.ready,t,{get:()=>z('You are getting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),set:()=>z('You are setting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js')})}));var r=Object.assign({},n),o=[],l='object'==typeof window,a='function'==typeof importScripts,c='object'==typeof process&&'object'==typeof process.versions&&'string'==typeof process.versions.node,f=!l&&!c&&!a;if(n.ENVIRONMENT)throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');var u,d,w,A='';if(c){if('undefined'==typeof process||!process.release||'node'!==process.release.name)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');var y,p;A=a?require('path').ND(A)+'/':__dirname+'/';var m=()=>{p||(y=require('fs'),p=require('path'))};u=(t,i)=>(m(),t=p.normalize(t),y.YD(t,i?void 0:'utf8')),w=t=>{var i=u(t,!0);return i.buffer||(i=new Uint8Array(i)),D(i.buffer),i},d=(t,i,s)=>{m(),t=p.normalize(t),y.VD(t,(function(t,h){t?s(t):i(h.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,'/'),o=process.argv.slice(2),process.on('uncaughtException',(function(t){if(!(t instanceof et))throw t})),process.on('unhandledRejection',(function(t){throw t})),n.inspect=function(){return'[Emscripten Module object]'}}else if(f){if('object'==typeof process&&'function'==typeof require||'object'==typeof window||'function'==typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');'undefined'!=typeof read&&(u=function(t){return read(t)}),w=function(t){let i;return'function'==typeof readbuffer?new Uint8Array(readbuffer(t)):(i=read(t,'binary'),D('object'==typeof i),i)},d=function(t,i,s){setTimeout((()=>i(w(t))),0)},'undefined'!=typeof scriptArgs?o=scriptArgs:void 0!==arguments&&(o=arguments),'undefined'!=typeof print&&('undefined'==typeof console&&(console={}),console.log=print,console.warn=console.error='undefined'!=typeof printErr?printErr:print)}else{if(!l&&!a)throw new Error('environment detection error');if(a?A=self.location.href:'undefined'!=typeof document&&document.currentScript&&(A=document.currentScript.src),h&&(A=h),A=0!==A.indexOf('blob:')?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf('/')+1):'','object'!=typeof window&&'function'!=typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');u=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.send(null),i.responseText},a&&(w=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.responseType='arraybuffer',i.send(null),new Uint8Array(i.response)}),d=(t,i,s)=>{var h=new XMLHttpRequest;h.open('GET',t,!0),h.responseType='arraybuffer',h.onload=()=>{200==h.status||0==h.status&&h.response?i(h.response):s()},h.onerror=s,h.send(null)}}n.print||console.log.bind(console);var I,_,E=n.printErr||console.warn.bind(console);function g(t,i){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){z('Module.'+t+' has been replaced with plain '+i+' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)')}})}function C(t){return'FS_createPath'===t||'FS_createDataFile'===t||'FS_createPreloadedFile'===t||'FS_unlink'===t||'addRunDependency'===t||'FS_createLazyFile'===t||'FS_createDevice'===t||'removeRunDependency'===t}Object.assign(n,r),r=null,I='fetchSettings',Object.getOwnPropertyDescriptor(n,I)&&z('`Module.'+I+'` was supplied but `'+I+'` not included in INCOMING_MODULE_JS_API'),n.arguments&&(o=n.arguments),g('arguments','arguments_'),n.thisProgram&&n.thisProgram,g('thisProgram','thisProgram'),n.quit&&n.quit,g('quit','quit_'),D(void 0===n.memoryInitializerPrefixURL,'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.pthreadMainPrefixURL,'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.cdInitializerPrefixURL,'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.filePackagePrefixURL,'Module.filePackagePrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.read,'Module.read option was removed (modify read_ in JS)'),D(void 0===n.readAsync,'Module.readAsync option was removed (modify readAsync in JS)'),D(void 0===n.readBinary,'Module.readBinary option was removed (modify readBinary in JS)'),D(void 0===n.setWindowTitle,'Module.setWindowTitle option was removed (modify setWindowTitle in JS)'),D(void 0===n.TOTAL_MEMORY,'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY'),g('read','read_'),g('readAsync','readAsync'),g('readBinary','readBinary'),g('setWindowTitle','setWindowTitle'),D(!f,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),n.wasmBinary&&(_=n.wasmBinary),g('wasmBinary','wasmBinary');var T;n.noExitRuntime;g('noExitRuntime','noExitRuntime'),'object'!=typeof WebAssembly&&z('no native wasm support detected');var O,b,v,L,R,S,M,k,x=!1;function D(t,i){t||z('Assertion failed'+(i?': '+i:''))}function N(t){O=t,n.HEAP8=b=new Int8Array(t),n.HEAP16=L=new Int16Array(t),n.HEAP32=R=new Int32Array(t),n.HEAPU8=v=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=S=new Uint32Array(t),n.HEAPF32=M=new Float32Array(t),n.HEAPF64=k=new Float64Array(t)}'undefined'!=typeof TextDecoder&&new TextDecoder('utf8');var P=5242880;n.TOTAL_STACK&&D(P===n.TOTAL_STACK,'the stack size can no longer be determined at runtime');var F=n.INITIAL_MEMORY||16777216;function U(){if(!x){var t=ft(),i=S[t>>2],s=S[t+4>>2];34821223==i&&2310721022==s||z('Stack overflow! Stack cookie has been overwritten at 0x'+t.toString(16)+', expected hex dwords 0x89BACDFE and 0x2135467, but received 0x'+s.toString(16)+' 0x'+i.toString(16)),1668509029!==S[0]&&z('Runtime error: The application has corrupted its heap memory area (address zero)!')}}g('INITIAL_MEMORY','INITIAL_MEMORY'),D(F>=P,'INITIAL_MEMORY should be larger than TOTAL_STACK, was '+F+'! (TOTAL_STACK='+P+')'),D('undefined'!=typeof Int32Array&&'undefined'!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,'JS engine does not provide full typed array support'),D(!n.wasmMemory,'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally'),D(16777216==F,'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically'),function(){var t=new Int16Array(1),i=new Int8Array(t.buffer);if(t[0]=25459,115!==i[0]||99!==i[1])throw'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)'}();var B=[],G=[],H=[],W=!1;D(Math.imul,'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.fround,'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.clz32,'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.trunc,'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');var Y=0,V=null,K=null,X={};function z(t){n.onAbort&&n.onAbort(t),E(t='Aborted('+t+')'),x=!0;var i=new WebAssembly.RuntimeError(t);throw e(i),i}var j={error:function(){z('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM')},init:function(){j.error()},KD:function(){j.error()},XD:function(){j.error()},zD:function(){j.error()},open:function(){j.error()},jD:function(){j.error()},ZD:function(){j.error()},qD:function(){j.error()},$D:function(){j.error()},JD:function(){j.error()}};n.FS_createDataFile=j.KD,n.FS_createPreloadedFile=j.XD;var Z,q,$,J,Q='data:application/octet-stream;base64,';function tt(t){return t.startsWith(Q)}function it(t){return t.startsWith('file://')}function st(t,i){return function(){var s=t,h=i;return i||(h=n.asm),D(W,'native function `'+s+'` called before runtime initialization'),h[t]||D(h[t],'exported native function `'+s+'` not found'),h[t].apply(null,arguments)}}function ht(t){try{if(t==Z&&_)return new Uint8Array(_);if(w)return w(t);throw"both async and sync fetching of the wasm failed"}catch(t){z(t)}}function et(t){this.name='ExitStatus',this.message='Program terminated with exit('+t+')',this.status=t}function nt(t){for(;t.length>0;)t.shift()(n)}function rt(t){rt.QD||(rt.QD={}),rt.QD[t]||(rt.QD[t]=1,c&&(t='warning: '+t),E(t))}function ot(t){try{return T.grow(t-O.byteLength+65535>>>16),N(T.buffer),1}catch(i){E('emscripten_realloc_buffer: Attempted to grow heap from '+O.byteLength+' bytes to '+t+' bytes, but got error: '+i)}}n.locateFile?tt(Z='tinymidipcm.wasm')||(q=Z,Z=n.locateFile?n.locateFile(q,A):A+q):Z=new URL(s(8227),s.b).toString();var lt,at={"emscripten_memcpy_big":function(t,i,s){v.copyWithin(t,i,i+s)},"emscripten_resize_heap":function(t){var i=v.length;D((t>>>=0)>i);var s,h,e=2147483648;if(t>e)return E('Cannot enlarge memory, asked to go up to '+t+' bytes, but the limit is '+e+' bytes!'),!1;for(var n=1;n<=4;n*=2){var r=i*(1+.2/n);r=Math.min(r,t+100663296);var o=Math.min(e,(s=Math.max(t,r))+((h=65536)-s%h)%h);if(ot(o))return!0}return E('Failed to grow the heap from '+i+' bytes to '+o+' bytes, not enough memory!'),!1}},ct=(function(){var t,i={'env':at,'wasi_snapshot_preview1':at};function s(t,i){var s,h=t.exports;n.asm=h,D(T=n.asm.memory,"memory not found in wasm exports"),N(T.buffer),D(n.asm.__indirect_function_table,"table not found in wasm exports"),s=n.asm.__wasm_call_ctors,G.unshift(s),function(t){if(Y--,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(D(X[t]),delete X[t]):E('warning: run dependency removed without ID'),0==Y&&(null!==V&&(clearInterval(V),V=null),K)){var i=K;K=null,i()}}('wasm-instantiate')}t='wasm-instantiate',Y++,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(D(!X[t]),X[t]=1,null===V&&'undefined'!=typeof setInterval&&(V=setInterval((function(){if(x)return clearInterval(V),void(V=null);var t=!1;for(var i in X)t||(t=!0,E('still waiting on run dependencies:')),E('dependency: '+i);t&&E('(end of list)')}),1e4))):E('warning: run dependency added without ID');var h=n;function r(t){D(n===h,'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?'),h=null,s(t.instance)}function o(t){return function(){if(!_&&(l||a)){if('function'==typeof fetch&&!it(Z))return fetch(Z,{credentials:'same-origin'}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Z+"'";return t.arrayBuffer()})).catch((function(){return ht(Z)}));if(d)return new Promise((function(t,i){d(Z,(function(i){t(new Uint8Array(i))}),i)}))}return Promise.resolve().then((function(){return ht(Z)}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){E('failed to asynchronously prepare wasm: '+t),it(Z)&&E('warning: Loading from a file URI ('+Z+') is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing'),z(t)}))}if(n.instantiateWasm)try{return n.instantiateWasm(i,s)}catch(t){E('Module.instantiateWasm callback failed with error: '+t),e(t)}(_||'function'!=typeof WebAssembly.instantiateStreaming||tt(Z)||it(Z)||c||'function'!=typeof fetch?o(r):fetch(Z,{credentials:'same-origin'}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(r,(function(t){return E('wasm streaming compile failed: '+t),E('falling back to ArrayBuffer instantiation'),o(r)}))}))).catch(e)}(),n.___wasm_call_ctors=st("__wasm_call_ctors"),n._malloc=st("malloc"),n._free=st("free"),n._tsf_load_memory=st("tsf_load_memory"),n._tsf_close=st("tsf_close"),n._tsf_reset=st("tsf_reset"),n._tsf_set_output=st("tsf_set_output"),n._tsf_set_max_voices=st("tsf_set_max_voices"),n._realloc=st("realloc"),n._tsf_channel_set_presetnumber=st("tsf_channel_set_presetnumber"),n._tsf_channel_set_bank_preset=st("tsf_channel_set_bank_preset"),n._tml_load_memory=st("tml_load_memory"),n._midi_render=st("midi_render"),n.___errno_location=st("__errno_location"),n._fflush=st("fflush"),n._emscripten_stack_init=function(){return(ct=n._emscripten_stack_init=n.asm.emscripten_stack_init).apply(null,arguments)}),ft=(n._emscripten_stack_get_free=function(){return(n._emscripten_stack_get_free=n.asm.emscripten_stack_get_free).apply(null,arguments)},n._emscripten_stack_get_base=function(){return(n._emscripten_stack_get_base=n.asm.emscripten_stack_get_base).apply(null,arguments)},n._emscripten_stack_get_end=function(){return(ft=n._emscripten_stack_get_end=n.asm.emscripten_stack_get_end).apply(null,arguments)});function ut(){var t;ct(),D(!(3&(t=ft()))),S[t>>2]=34821223,S[t+4>>2]=2310721022,S[0]=1668509029}function dt(t){function s(){lt||(lt=!0,n.calledRun=!0,x||(D(!W),W=!0,U(),nt(G),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),D(!n._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(U(),n.postRun)for('function'==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)t=n.postRun.shift(),H.unshift(t);var t;nt(H)}()))}t=t||o,Y>0||(ut(),function(){if(n.preRun)for('function'==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)t=n.preRun.shift(),B.unshift(t);var t;nt(B)}(),Y>0||(n.setStatus?(n.setStatus('Running...'),setTimeout((function(){setTimeout((function(){n.setStatus('')}),1),s()}),1)):s(),U()))}if(n.stackSave=st("stackSave"),n.stackRestore=st("stackRestore"),n.stackAlloc=st("stackAlloc"),n.setValue=function(t,i,s="i8"){switch(s.endsWith('*')&&(s='*'),s){case'i1':case'i8':b[0|t]=i;break;case'i16':L[t>>1]=i;break;case'i32':R[t>>2]=i;break;case'i64':J=[i>>>0,($=i,+Math.abs($)>=1?$>0?(0|Math.min(+Math.floor($/4294967296),4294967295))>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],R[t>>2]=J[0],R[t+4>>2]=J[1];break;case'float':M[t>>2]=i;break;case'double':k[t>>3]=i;break;case'*':S[t>>2]=i;break;default:z('invalid type for setValue: '+s)}},n.getValue=function(t,i="i8"){switch(i.endsWith('*')&&(i='*'),i){case'i1':case'i8':return b[0|t];case'i16':return L[t>>1];case'i32':case'i64':return R[t>>2];case'float':return M[t>>2];case'double':return k[t>>3];case'*':return S[t>>2];default:z('invalid type for getValue: '+i)}return null},['run','UTF8ArrayToString','UTF8ToString','stringToUTF8Array','stringToUTF8','lengthBytesUTF8','addOnPreRun','addOnInit','addOnPreMain','addOnExit','addOnPostRun','addRunDependency','removeRunDependency','FS_createFolder','FS_createPath','FS_createDataFile','FS_createPreloadedFile','FS_createLazyFile','FS_createLink','FS_createDevice','FS_unlink','getLEB','getFunctionTables','alignFunctionTables','registerFunctions','prettyPrint','getCompilerSetting','print','printErr','callMain','abort','keepRuntimeAlive','wasmMemory','stackAlloc','stackSave','stackRestore','getTempRet0','setTempRet0','writeStackCookie','checkStackCookie','ptrToString','zeroMemory','stringToNewUTF8','exitJS','getHeapMax','emscripten_realloc_buffer','ENV','ERRNO_CODES','ERRNO_MESSAGES','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','DNS','getHostByName','Protocols','Sockets','getRandomDevice','warnOnce','traverseStack','UNWIND_CACHE','convertPCtoSourceLocation','readAsmConstArgsArray','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','handleException','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','freeTableIndexes','functionsInTableMap','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','PATH','PATH_FS','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16Decoder','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeArrayToMemory','writeAsciiToMemory','SYSCALLS','getSocketFromFD','getSocketAddress','JSEvents','registerKeyEventCallback','specialHTMLTargets','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','currentFullscreenStrategy','restoreOldWindowedStyle','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','demangle','demangleAll','jsStackTrace','stackTrace','ExitStatus','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','dlopenMissingError','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','uncaughtExceptionCount','exceptionLast','exceptionCaught','ExceptionInfo','exception_addRef','exception_decRef','Browser','setMainLoop','wget','FS','MEMFS','TTY','PIPEFS','SOCKFS','_setNetworkCallback','tempFixedLengthArray','miniTempWebGLFloatBuffers','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','GL','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','AL','SDL_unicode','SDL_ttfContext','SDL_audio','SDL','SDL_gfx','GLUT','EGL','GLFW_Window','GLFW','GLEW','IDBStore','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){var i="'"+t+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";C(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),z(i)}})})),['ptrToString','zeroMemory','stringToNewUTF8','exitJS','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','getHostByName','getRandomDevice','traverseStack','convertPCtoSourceLocation','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeAsciiToMemory','getSocketFromFD','getSocketAddress','registerKeyEventCallback','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','ExceptionInfo','exception_addRef','exception_decRef','setMainLoop','_setNetworkCallback','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','SDL_unicode','SDL_ttfContext','SDL_audio','GLFW_Window','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){'undefined'==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{configurable:!0,get:function(){var i='`'+t+'` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line';C(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),rt(i)}})})),K=function t(){lt||dt(),lt||(K=t)},n.preInit)for('function'==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return dt(),t.ready})}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,r),s.exports}r.m=e,t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",i="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",h=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},r.a=(e,n,r)=>{var o;r&&((o=[]).d=-1);var l,a,c,f=new Set,u=e.exports,d=new Promise(((t,i)=>{c=i,a=t}));d[i]=u,d[t]=t=>(o&&t(o),f.forEach(t),d.catch((t=>{}))),e.exports=d,n((e=>{var n;l=(e=>e.map((e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var n=[];n.d=0,e.then((t=>{r[i]=t,h(n)}),(t=>{r[s]=t,h(n)}));var r={};return r[t]=t=>t(n),r}}var o={};return o[t]=t=>{},o[i]=e,o})))(e);var r=()=>l.map((t=>{if(t[s])throw t[s];return t[i]})),a=new Promise((i=>{(n=()=>i(r)).r=0;var s=t=>t!==o&&!f.has(t)&&(f.add(t),t&&!t.d&&(n.r++,t.push(n)));l.map((i=>i[t](s)))}));return n.r?a:r()}),(t=>(t?c(d[s]=t):a(u),h(o)))),o&&o.d<0&&(o.d=0)},r.d=(t,i)=>{for(var s in i)r.o(i,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},r.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r.p="/Client2/",r.b=document.baseURI||self.location.href;r(7906)})();